import{d as P,e as S}from"./chunk-QHRJV7PN.js";import{a as M}from"./chunk-QZKSC5M6.js";import{a as $}from"./chunk-WEIWD5Z2.js";import{b as h}from"./chunk-7MXQG6UX.js";import{a as D}from"./chunk-YOWIORHC.js";import{f as l}from"./chunk-CEAYBKHZ.js";import{a as x}from"./chunk-SOUDSSPT.js";import{b as A,c as _}from"./chunk-JXNVBN57.js";import{c as b}from"./chunk-FJD4SS3V.js";import{d as u}from"./chunk-CL7MNENB.js";import{a as T,b as y,f as O,i as E}from"./chunk-ORNWO27Z.js";var t=O(E());var L={scripting:"Scripting"},k=["runTask","parseHTML","scripting","scriptEvaluation","scriptParseCompile","styleLayout","paintCompositeRender","blocking"],f=(r,o={})=>{let{name:a,type:m}=r,d=a;return a==="Other"?(d="Task",m="runTask"):["scriptParseCompile","scriptEvaluation"].includes(r.type)&&(m="scripting"),a=`${d} (${h({number:r.duration,formatter:"humanDuration"})})`,T(y(T({},r),{name:a,series:d,type:m,color:l[r.type]||l.undefined,profile:m,startTime:r.start_time,endTime:r.end_time,duration:r.duration,y:0,height:100}),o)},F=r=>{let o=[],a=[{name:"Long task warning",color:l.blocking.active,type:"blocking",uuid:"blocking"}],m=i=>{if(!a.find(({type:e})=>e===i.type)){let e=L[i.type]||i.series;a.push({name:e,uuid:i.type,color:(l[i.type]||l.undefined).active,type:i.type})}},d=0;for(let i of r){let e=f(i,{id:`activity-${d}`});if(e.tasks&&e.tasks.length){let s=e.start_time+50,c=e.duration-50;o.push(f(e,{blockingDuration:c,color:l.runTask})),o.push(f(e,{name:null,profile:"blocking",startTime:s,duration:c,color:l.blocking,y:-100,height:10}));let p=0;for(let g of e.tasks){let n=f(g,{id:`activity-${d}-task-${p}`});k.indexOf(n.type)<0||(n.end_time<s?n.blockingDuration=0:n.start_time<s?n.blockingDuration=n.end_time-s:n.blockingDuration=n.duration,o.push(n),p++,m(n))}}else{if(k.indexOf(e.type)<0)continue;o.push(e),o.push(f(e,{id:`blocking-${d}`,name:null,profile:i.type,startTime:i.start_time+50,endTime:i.end_time-50,duration:i.duration-50,color:l.blocking,y:-100,height:10})),m(e)}d++}return{segments:o,series:a.sort((i,e)=>k.indexOf(i.type)-k.indexOf(e.type))}};var v=({description:r})=>t.default.createElement(t.default.Fragment,null,t.default.createElement(_,{as:"h3",level:"sm"},t.default.createElement(u,{id:"mainThreadActivity.title"})," ",t.default.createElement("a",{href:"/docs/features/main-thread-execution-timeline",className:"text-link",target:"_blank",rel:"noopener noreferrer",title:"Learn about Main thread execution timeline",style:{verticalAlign:"middle"}},t.default.createElement(x,null))),!r||t.default.createElement(A,{as:"p",level:"xs",color:"grey300",mt:1,mb:0},r)),I=({mainThreadActivity:r})=>{let{main_thread_activity:o,error:a}=r;if(a)return t.default.createElement("div",{className:"page-section m--0"},t.default.createElement(u,{id:"mainThreadActivity.error"},e=>t.default.createElement(v,{description:e})));if(!o)return t.default.createElement("div",{className:"page-section m--0"},t.default.createElement(u,{id:"mainThreadActivity.noData"},e=>t.default.createElement(v,{description:e})));let{segments:m,series:d}=F(o),i=({id:e})=>{let s=m.find(n=>n.id===e);if(!s||!s.name)return[];let c=[`Blocking: ${h({number:s.blockingDuration===void 0?s.duration-50:s.blockingDuration,formatter:"humanDuration"})}`],p=(s.third_parties||[])[0],g=(s.urls||[])[0];if(p)c.push(`Source: ${p.name} (${p.categories.join(",")})`);else if(g){let n=g.split("/"),N=n.pop(),C=n.join("/");c.push(`Source: ${D(N,35,0)}`),c.push(`Path: ${C}/`)}return c};return o.length?t.default.createElement($,{initialState:d},t.default.createElement("div",{className:"page-section"},t.default.createElement("div",{className:"row"},t.default.createElement("div",{className:"col-xs-12 col-md-6"},t.default.createElement(u,{id:"mainThreadActivity.description"},e=>t.default.createElement(v,{description:e}))),t.default.createElement("div",{className:"col-xs-12 col-md-6 end-md m--b1"},t.default.createElement(M,null))),t.default.createElement(b,{pt:3,pb:2},t.default.createElement(P,{aspectRatio:40,minHeight:100},t.default.createElement(S,{segments:m,formatter:i}))))):t.default.createElement("div",{className:"page-section"},t.default.createElement(u,{id:"mainThreadActivity.notApplicable"},e=>t.default.createElement(v,{description:e})))},U=I;export{U as a};
//# sourceMappingURL=chunk-YGHKJ34N.js.map
