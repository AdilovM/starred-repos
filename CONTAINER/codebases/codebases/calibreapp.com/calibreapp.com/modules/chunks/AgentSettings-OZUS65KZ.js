import{a as X,b as Z}from"./chunk-TIOT2YSZ.js";import{a as R,b as ee}from"./chunk-2H33SDBN.js";import{a as K}from"./chunk-YG5VU5UW.js";import{a as Se}from"./chunk-AQM24QTG.js";import{a as O}from"./chunk-IHTWZOQH.js";import"./chunk-OFY5O3WH.js";import{c as H,e as J}from"./chunk-ECKCXZDJ.js";import"./chunk-5AD3ZUGZ.js";import"./chunk-2OWL4LTV.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import{a as M}from"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as W}from"./chunk-UJ4RDOBF.js";import"./chunk-EWS3NXQH.js";import{d as F,e as z,i as b}from"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import{i as $}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import{e as Q,f as Y}from"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as q}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{b as w,d as j}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as m,b as A,c as G,f as v,i as N}from"./chunk-ORNWO27Z.js";var e=v(N());var f=v(N());var d=v(N());var C=v(N()),ie=v(Se());var pe=30,ne=730,Ne=({testsPerRun:l,scheduleInterval:i,scheduleAnchor:t})=>{switch(i){case"off":return 0;case"daily":return l*pe;case"hourly":return l*ne;case"every_x_hours":return l*(ne/t)}},ae=({usageUrl:l,numberOfPages:i,numberOfProfiles:t,scheduleInterval:n,scheduleAnchor:a})=>{let s=Ne({testsPerRun:i*t,scheduleInterval:n,scheduleAnchor:a});return s&&isFinite(s)?C.default.createElement(K,{"data-testid":"estimated-usage",type:"info",mb:0},"This configuration will generate"," ",C.default.createElement(Y,{color:"blue400"},(0,ie.numberFormat)(s,0))," tests per month. Monitor your usage in"," ",C.default.createElement(Q,{to:l},"Billing \u2192 Overview"),"."):null};ae.defaultProps={usageUrl:""};var de=ae;var Fe=({orgId:l,loading:i,saving:t,locations:n,onUpdate:a,location:s,scheduleInterval:r,scheduleAnchor:o,pages:k,testProfiles:g})=>{let S=(0,d.useRef)(),[T,D]=(0,d.useState)(!1),[h,c]=(0,d.useState)({location:s,scheduleInterval:r,scheduleAnchor:o});(0,d.useEffect)(()=>{c({location:s,scheduleInterval:r,scheduleAnchor:o})},[i]),(0,d.useEffect)(()=>{D(t)},[t]);let E=_=>{_.preventDefault(),a(h)},I=_=>{let L=m(m({},h),_);c(L),D(!0)},{location:U,scheduleInterval:p,scheduleAnchor:x}=h;return d.default.createElement("form",{onSubmit:E,ref:S},d.default.createElement(H,{mb:0},d.default.createElement(X,{loading:i||!U,span:2,location:U,locations:n,onChange:I})),d.default.createElement(H,{mb:0},d.default.createElement(Z,{loading:i||!p,scheduleInterval:p,scheduleAnchor:x,onChange:I})),p==="off"?null:d.default.createElement(H,{mb:0},d.default.createElement(J,{span:2},d.default.createElement(de,{numberOfPages:(k||[]).length,numberOfProfiles:(g||[]).length,scheduleInterval:p,scheduleAnchor:x,usageUrl:`/organisations/${l}/billing`}))),d.default.createElement($,{"data-testid":"agent-settings-submit",disabled:!T||t,loading:t,type:"submit"},d.default.createElement(j,{id:"site.actions.update_agent"})))},te=Fe;var be=g=>{var S=g,{orgId:l,loading:i,saving:t,locations:n,onUpdate:a,location:s,scheduleInterval:r,scheduleAnchor:o}=S,k=G(S,["orgId","loading","saving","locations","onUpdate","location","scheduleInterval","scheduleAnchor"]);return f.default.createElement(f.default.Fragment,null,f.default.createElement(z,null,f.default.createElement(b,{id:"site.settings.agent",link:"/docs/features/agent",mb:0})),f.default.createElement(F,null,f.default.createElement(te,m({orgId:l,loading:i,saving:t,locations:n,onUpdate:a,location:s,scheduleInterval:r,scheduleAnchor:o},k))))},le=be;var y=v(N());var ye=({loading:l,saving:i,onUpdate:t,headers:n})=>y.default.createElement(y.default.Fragment,null,y.default.createElement(F,null,y.default.createElement(b,{id:"site.settings.profiles.headers",mb:0}),y.default.createElement(R,{loading:l,saving:i,headers:(n||[]).map(({name:a,value:s})=>({name:a,value:s})),onUpdate:t,buttonVariant:"primary"}))),se=ye;var V=v(N());var Ve=({loading:l,saving:i,onUpdate:t,cookies:n})=>V.default.createElement(V.default.Fragment,null,V.default.createElement(F,null,V.default.createElement(b,{id:"site.settings.profiles.cookies",mb:0}),V.default.createElement(ee,{loading:l,saving:i,cookies:(n||[]).map(({name:a,value:s,domain:r,path:o,secure:k,httpOnly:g})=>({name:a,value:s,domain:r,path:o,secure:k,httpOnly:g})),onUpdate:t,buttonVariant:"primary"}))),ue=Ve;var me={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Get"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"locations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"emoji"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"tag"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"team"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"teamId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"organisation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"site"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"siteId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"tag"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"scheduleInterval"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"scheduleAnchor"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"pages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"uuid"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"testProfiles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"uuid"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"headers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"cookies"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"domain"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"path"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"secure"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"httpOnly"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]}}]},re={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Update"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orgId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"attributes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AgentSettingsInput"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"updateAgentSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"organisation"},value:{kind:"Variable",name:{kind:"Name",value:"orgId"}}},{kind:"Argument",name:{kind:"Name",value:"site"},value:{kind:"Variable",name:{kind:"Name",value:"siteId"}}},{kind:"Argument",name:{kind:"Name",value:"attributes"},value:{kind:"Variable",name:{kind:"Name",value:"attributes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]},P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateSiteSettings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orgId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siteId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"attributes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SiteSettingsInput"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"updateSiteSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"organisation"},value:{kind:"Variable",name:{kind:"Name",value:"orgId"}}},{kind:"Argument",name:{kind:"Name",value:"site"},value:{kind:"Variable",name:{kind:"Name",value:"siteId"}}},{kind:"Argument",name:{kind:"Name",value:"attributes"},value:{kind:"Variable",name:{kind:"Name",value:"attributes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"headers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"cookies"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"domain"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"path"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"secure"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"httpOnly"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]};var B=e.default.lazy(()=>import("./Feedback-J4FBAYX2.js")),he=({match:{params:{teamId:l,siteId:i}}})=>{let t=w(),[n,a]=(0,e.useState)(),s={teamId:l,siteId:i},{loading:r,data:o}=q(me,{variables:s}),{team:k,locations:g}=o||{},{organisation:S,site:T,name:D}=k||{},{name:h,slug:c}=S||{},{name:E,location:{tag:I},headers:U,cookies:p}=T||{location:{}},[x,{loading:_}]=M(re,{onCompleted:()=>{a({location:"agent",type:"success",message:t.formatMessage({id:"site.settings.agent.success"})})},onError:u=>{a({type:"error",message:O(u)})}}),[L,{loading:oe}]=M(P,{onCompleted:()=>{a({location:"headers",type:"success",message:t.formatMessage({id:"site.settings.profiles.headers.success"})})},onError:u=>{a({type:"error",message:O(u)})}}),[ke,{loading:ce}]=M(P,{onCompleted:()=>{a({location:"cookies",type:"success",message:t.formatMessage({id:"site.settings.profiles.cookies.success"})})},onError:u=>{a({type:"error",message:O(u)})}}),ve=u=>{x({variables:{orgId:c,siteId:i,attributes:u}})},fe=u=>{L({variables:{orgId:c,siteId:i,attributes:{headers:u}},optimisticResponse:{__typename:"Mutation",updateSiteHeaders:{id:i,__typename:"Site",headers:u}}})},ge=u=>{ke({variables:{orgId:c,siteId:i,attributes:{cookies:u}},optimisticResponse:{__typename:"Mutation",updateSiteHeaders:{id:i,__typename:"Site",cookies:u}}})};return e.default.createElement(e.default.Fragment,null,e.default.createElement(W,{id:"site.settings.agent.title",breadcrumbs:[E,D,h]}),n&&n.location==="agent"?e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(B,A(m({},n),{p:null,pt:4,px:4,pb:0,onDismiss:()=>a(null)}))):null,e.default.createElement(le,A(m({orgId:c,siteId:i},T),{location:I,locations:g,loading:r,saving:_,onUpdate:ve})),n&&n.location==="headers"?e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(B,A(m({},n),{p:null,pt:4,px:4,pb:0,onDismiss:()=>a(null)}))):null,e.default.createElement(se,{loading:r,saving:oe,headers:U,onUpdate:fe}),n&&n.location==="cookies"?e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(B,A(m({},n),{p:null,pt:4,px:4,pb:0,onDismiss:()=>a(null)}))):null,e.default.createElement(ue,{saving:ce,onUpdate:ge,cookies:p}))},Re=he;export{Re as default};
//# sourceMappingURL=AgentSettings-OZUS65KZ.js.map
