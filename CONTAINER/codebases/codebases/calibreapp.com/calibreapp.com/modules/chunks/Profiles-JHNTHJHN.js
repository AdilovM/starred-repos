import{a as J,f as K,g as O}from"./chunk-7WG3MLL3.js";import{a as V,c as X,d as Y,e as Z,f as R}from"./chunk-GU7AZSFC.js";import{a as Q,b as G,c as I}from"./chunk-IHNDKV3B.js";import"./chunk-IGBYPMTC.js";import{a as N}from"./chunk-SJXFQYTK.js";import"./chunk-RECLXAEN.js";import{a as j}from"./chunk-ZDHIED7X.js";import{a as W}from"./chunk-VSZVUKJA.js";import{a as M}from"./chunk-IHTWZOQH.js";import"./chunk-OFY5O3WH.js";import"./chunk-WEIYGZZI.js";import{a as S}from"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as z}from"./chunk-UJ4RDOBF.js";import{d as q}from"./chunk-EWS3NXQH.js";import{d as x}from"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import{i as U}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import{b as C,c as H}from"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import{b as _,c as p}from"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as $}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{b as A,d}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as k,c as v,f as w,i as D}from"./chunk-ORNWO27Z.js";var r=w(D());var e=w(D());var te=e.default.lazy(()=>import("./FeedbackBlock-W4EQRLI5.js")),re=({loading:u,teamId:n,siteId:m,profiles:s,onDelete:y,onUpdatePosition:P,profileLimit:T})=>{let c="DELETE",[t,a]=(0,e.useState)([...s]),h=o=>{if(!o.destination)return;let[l]=t.splice(o.source.index,1);t.splice(o.destination.index,0,l),a(t),P({profile:l.uuid,position:o.destination.index+1})};(0,e.useEffect)(()=>{if(s.length!=t.length)return a([...s]);s.forEach(o=>{if(!t.find(f=>f.uuid===o.uuid))return a([...s])})},[s]);let g=t.filter(({deleted:o})=>!o).length>=T;return e.default.createElement(e.default.Fragment,null,e.default.createElement(x,{borderBottom:"none"},!g||e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(te,{type:"warning",mb:4},"Upgrade your plan to create more Test Profiles for this Site. Check ",e.default.createElement("a",{href:"/pricing"},"our pricing")," for more information.")),e.default.createElement(_,{alignItems:"center",flexWrap:["wrap","nowrap"]},e.default.createElement(p,{mr:4,mb:[2,0]},e.default.createElement(H,{as:"h2",level:"sm"},e.default.createElement(d,{id:"site.settings.profiles.title"}))),e.default.createElement(p,{ml:"auto",order:[2,3],mb:[2,0]},e.default.createElement(U,{to:`/teams/${n}/${m}/settings/profiles/new`,disabled:g},e.default.createElement(d,{id:"site.settings.profiles.actions.add"}))))),t.length?e.default.createElement(R,{onReorder:h},t.filter(({deleted:o})=>!o).map((E,B)=>{var b=E,{uuid:o,name:l}=b,f=v(b,["uuid","name"]);return e.default.createElement(V,{key:o,id:o,index:B},F=>e.default.createElement(e.default.Fragment,null,e.default.createElement(X,null,e.default.createElement(Z,null,l),e.default.createElement(W,{items:j(f)})),e.default.createElement(Y,null,e.default.createElement(p,{mr:4},e.default.createElement(Q,k({},F.dragHandleProps))),e.default.createElement(p,null,e.default.createElement(G,{to:`/teams/${n}/${m}/settings/profiles/${o}/edit`})),t.length<=1||e.default.createElement(p,{ml:4},e.default.createElement(d,{id:"site.settings.profiles.delete.prompt",values:{confirmText:c}},L=>e.default.createElement(I,{onClick:()=>{prompt(L)===c&&y({uuid:o})}}))))))})):u?e.default.createElement(x,null,e.default.createElement(q,null)):e.default.createElement(x,null,e.default.createElement(C,null,e.default.createElement(d,{id:"profiles.empty"}))))},ee=re;var se=r.default.lazy(()=>import("./Feedback-J4FBAYX2.js")),ie=({match:{params:{teamId:u,siteId:n}}})=>{let{feedback:m,setFeedback:s,clearFeedback:y}=N(),P=A(),{loading:T,data:c}=$(J,{variables:{teamId:u,siteId:n},fetchPolicy:"cache-and-network"}),{team:t}=c||{},{site:a,organisation:h}=t||{},{name:g,slug:o}=h||{},{name:l,testProfiles:f=[],testProfilesAllowed:B=5}=a||{},[E]=S(K,{onError:i=>s({location:"profiles",type:"error",message:M(i)})}),[b]=S(O,{onCompleted:()=>s({location:"profiles",type:"success",message:P.formatMessage({id:"site.settings.profiles.delete.success"})}),onError:i=>s({location:"profiles",type:"error",message:M(i)})}),F=({uuid:i})=>b({variables:{orgId:o,siteId:n,uuid:i},optimisticResponse:{__typename:"Mutation",updateTestProfile:{id:i,__typename:"TestProfile",deleted:!0}}}),L=({profile:i,position:oe})=>E({variables:{orgId:o,siteId:n,uuid:i,attributes:{position:oe}}});return r.default.createElement(r.default.Fragment,null,r.default.createElement(z,{id:"profiles.title",breadcrumbs:[l,g]}),m.location==="profiles"&&r.default.createElement(r.Suspense,{fallback:r.default.createElement("div",null)},r.default.createElement(se,k({p:0,px:4,pt:4,duration:0,onDismiss:y},m)))||null,r.default.createElement(ee,{loading:T,teamId:u,siteId:n,profiles:f,onUpdatePosition:L,onDelete:F,profileLimit:B}))},Fe=ie;export{Fe as default};
//# sourceMappingURL=Profiles-JHNTHJHN.js.map
