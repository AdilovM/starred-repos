import{a as X}from"./chunk-DNZGOKKR.js";import{a as $}from"./chunk-SJXFQYTK.js";import{a as q}from"./chunk-QSO2TP3W.js";import{c as D,d as F,e as N}from"./chunk-DQSCGVX4.js";import{b as z}from"./chunk-RQDYQJNL.js";import"./chunk-ECNFHRET.js";import"./chunk-ZNS7TFW4.js";import"./chunk-W365GONS.js";import"./chunk-AUHJKPGE.js";import"./chunk-DGXX4BQF.js";import"./chunk-WEIYGZZI.js";import"./chunk-ECKCXZDJ.js";import"./chunk-5AD3ZUGZ.js";import"./chunk-YOWIORHC.js";import"./chunk-2OWL4LTV.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as v}from"./chunk-UJ4RDOBF.js";import"./chunk-EWS3NXQH.js";import"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import{g as k}from"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import"./chunk-D3V43LVN.js";import{a as P}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{d as b}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as m,b as I,f as S,i as W}from"./chunk-ORNWO27Z.js";var e=S(W()),l=S(X());var Y=e.default.lazy(()=>import("./SnapshotSummary-65EHVAO7.js")),Z=e.default.lazy(()=>import("./InitialSnapshotsInProgress-PKZZ64OZ.js")),_=e.default.lazy(()=>import("./ErrorHandler-AQHEWFNA.js")),R=e.default.lazy(()=>import("./PulseMetrics-IA3KYSO3.js")),ee=e.default.lazy(()=>import("./Feedback-J4FBAYX2.js")),se=({match:{params:w},location:{search:A},history:C})=>{let{feedback:p,clearFeedback:M}=$(),{teamId:o,siteId:n}=w,{page:a,duration:u}=l.default.parse(A),c=({page:t=a,duration:s=u})=>{C.push({pathname:`/teams/${o}/${n}`,search:`?${l.default.stringify({page:t,duration:s})}`})},B=u||7,{data:d,loading:E,error:g}=P(q,{variables:{teamId:o,siteId:n,page:a}}),h=t=>{let s="?";return a&&(s+=`page=${a}&`),t&&(s+=`profile=${t}`),{pathname:"",search:s.length>1?s:null}},y=({snapshot:t,measurement:s,profile:V})=>I(m({},h(V)),{pathname:`/teams/${o}/${n}/snapshots/${t}${s?`/${s}`:""}`}),H=(t,s)=>y({snapshot:t,profile:s});if(g)return e.default.createElement(e.Suspense,null,e.default.createElement(_,{error:g}));if(E||!d)return null;let{currentUser:L,team:{organisation:Q,site:r}}=d,{summarySortBy:T,summarySortDirection:U}=L||{},{slug:f,name:x}=Q||{},{name:G,testProfiles:O=[],page:i,hasRecentlyCompletedSnapshots:j,createdAt:J}=r,K=F(N(J),D(new Date,1))&&!j;return e.default.createElement(e.default.Fragment,null,e.default.createElement(v,{id:"pulse.title",breadcrumbs:[G,x]}),e.default.createElement("div",{className:"section-header"},e.default.createElement("div",{className:"type-large"},e.default.createElement("h2",{className:"type-large m--0",style:{display:"inline-block"}},e.default.createElement(b,{id:"pulse.heading"})),e.default.createElement("span",{className:"type-dim"},e.default.createElement(k,{ml:2,mr:1})),e.default.createElement(z,{teamId:o,siteId:n,onApply:c,selectedPage:i}))),p.location==="site"&&e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(ee,m({"data-qa":"sitesFeedback",duration:0,onDismiss:M},p)))||null,K&&e.default.createElement(e.Suspense,null,e.default.createElement(Z,{orgId:f,siteId:n,teamId:o,name:r.name,favicon:r.page.favicon,scheduleInterval:r.scheduleInterval}))||i&&e.default.createElement(e.Suspense,null,e.default.createElement(Y,{snapshotRoute:y,testProfiles:O,summary:i.measurementSummary,initialSortBy:T,initialSortDirection:U}),e.default.createElement(R,{orgId:f,teamId:o,siteId:n,page:i.uuid,childRoute:h,duration:B,onChangeDateRange:t=>c({duration:t}),snapshotLink:H})))},pe=se;export{pe as default};
//# sourceMappingURL=Pulse-HJTEU2UN.js.map
