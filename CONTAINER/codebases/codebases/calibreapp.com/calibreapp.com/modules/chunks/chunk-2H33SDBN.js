import{b as B,c as y,e as l,f as H,g as Z,i as P}from"./chunk-ECKCXZDJ.js";import{a as z}from"./chunk-EWS3NXQH.js";import{i as h}from"./chunk-WNVFIGRJ.js";import{b as w,h as D}from"./chunk-JXNVBN57.js";import{b as M,c as a}from"./chunk-FJD4SS3V.js";import{d}from"./chunk-CL7MNENB.js";import{a as k,b as V,c as T,f as O,i as A}from"./chunk-ORNWO27Z.js";var j=O(A());var f=O(A());var r=O(A());var ie=r.default.lazy(()=>import("./FeedbackBlock-W4EQRLI5.js")),re=({loading:u,onSave:i,onCancel:b,name:m,value:g,parentHeaders:p})=>{let[c,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)({name:m,value:g}),{name:v,value:C}=s;(0,r.useEffect)(()=>{n({name:m,value:g})},[u,m,g]);let S=F=>{let _=k(k({},s),F);n(_),t(!0)},G=()=>{i(s)};return r.default.createElement(r.default.Fragment,null,r.default.createElement(y,{mb:0},r.default.createElement(l,{labelid:"site.settings.profiles.headers.name.label"},r.default.createElement(H,{"data-testid":"header-name",name:"header_name",defaultValue:v,required:!0,maxLength:120,onChange:F=>S({name:F})})),r.default.createElement(l,{labelid:"site.settings.profiles.headers.value.label"},r.default.createElement(H,{"data-testid":"header-value",name:"header_value",defaultValue:C,required:!0,onChange:F=>S({value:F})}))),(p||[]).find(F=>F.name===v)?r.default.createElement(r.Suspense,{fallback:r.default.createElement("div",null)},r.default.createElement(ie,{type:"warning","data-testid":"header-feedback",mb:4},r.default.createElement(d,{id:"site.settings.profiles.headers.parentMatch.text",values:{name:v,link:r.default.createElement("a",{href:"/docs/get-started/authentication#test-profiles-cookies-and-custom-headers",target:"_blank"},r.default.createElement(d,{id:"site.settings.profiles.headers.parentMatch.link"}))}}))):null,r.default.createElement(M,{mb:4},r.default.createElement(a,{order:2},r.default.createElement(h,{"data-testid":"header-submit",disabled:!c||u||!v||!C,onClick:G},r.default.createElement(d,{id:"site.settings.profiles.headers.actions.save"}))),r.default.createElement(a,{mr:2,order:1},r.default.createElement(h,{type:"button","data-testid":"header-cancel",onClick:b,variant:"tertiary"},r.default.createElement(d,{id:"site.actions.cancel"})))))},Y=re;var se=c=>{var t=c,{name:u,value:i,onSave:b,parentHeaders:m,onDelete:g}=t,p=T(t,["name","value","onSave","parentHeaders","onDelete"]);let[s,n]=(0,f.useState)(!1),v=C=>{n(!1),b(C)};return s?f.default.createElement(Y,{onSave:v,parentHeaders:m,name:u,value:i,onCancel:()=>n(!1)}):f.default.createElement(y,V(k({mb:"15px"},p),{alignItems:"center"}),f.default.createElement(l,{labelid:"site.settings.profiles.headers.name.label",mb:"15px"},f.default.createElement(B,null,f.default.createElement(D,{"data-testid":"header-display-name"},u))),f.default.createElement(l,{labelid:"site.settings.profiles.headers.value.label",mb:"15px"},f.default.createElement(B,null,f.default.createElement(D,{"data-testid":"header-display-value"},i))),f.default.createElement(l,{mb:0},f.default.createElement(M,null,f.default.createElement(a,{ml:"auto",mr:2},f.default.createElement(h,{type:"button",variant:"danger",onClick:g},f.default.createElement(d,{id:"site.settings.actions.delete"}))),f.default.createElement(a,null,f.default.createElement(h,{type:"button","data-testid":"header-edit",variant:"tertiary",onClick:()=>n(!0)},f.default.createElement(d,{id:"site.settings.actions.edit"}))))))},$=se;var L=O(A());var ne=g=>{var p=g,{variant:u,onSave:i,parentHeaders:b}=p,m=T(p,["variant","onSave","parentHeaders"]);let[c,t]=(0,L.useState)(!1),s=n=>{t(!1),i(n)};return c?L.default.createElement(Y,{parentHeaders:b,onSave:s,onCancel:()=>t(!1)}):L.default.createElement(a,k({},m),L.default.createElement(h,{"data-testid":"header-add",variant:u,type:"button",onClick:()=>t(!0)},L.default.createElement(d,{id:"site.settings.profiles.headers.actions.add"})))},N=ne;var de=({loading:u,headers:i,parentHeaders:b,onUpdate:m,buttonVariant:g})=>{let p=(t,s)=>{let n=Object.assign([],i);n[t]=s,m(n)},c=t=>{if(confirm("Are you sure?")){let s=Object.assign([],i);s.splice(t,1),m(s)}};return j.default.createElement(j.default.Fragment,null,u?j.default.createElement(a,{mb:4},j.default.createElement(z,null)):Object.keys(i).map((t,s)=>j.default.createElement($,V(k({key:t,id:t},i[t]),{parentHeaders:b,onSave:n=>p(t,n),onDelete:()=>c(t),borderBottom:s===Object.keys(i).length-1?"none":"1px solid",borderBottomColor:"grey100"}))),j.default.createElement(N,{variant:g,parentHeaders:b,onSave:t=>p(i.length,t),mt:i.length?4:0}))},He=de;var E=O(A());var o=O(A());var e=O(A());var ae=e.default.lazy(()=>import("./FeedbackBlock-W4EQRLI5.js")),U=({loading:u,onSave:i,onCancel:b,name:m,path:g,domain:p,secure:c,value:t,httpOnly:s,parentCookies:n})=>{let[v,C]=(0,e.useState)(!1),[S,G]=(0,e.useState)({name:m,path:g,domain:p,secure:c,value:t,httpOnly:s}),{name:F,path:_,domain:K,secure:Q=!0,value:W,httpOnly:X=!1}=S;(0,e.useEffect)(()=>{G({name:m,path:g,domain:p,secure:c,value:t,httpOnly:s})},[u]);let I=x=>{let oe=k(k({},S),x);G(oe),C(!0)},te=()=>{i(S)};return e.default.createElement(e.default.Fragment,null,e.default.createElement(y,{mb:0},e.default.createElement(l,{labelid:"site.settings.profiles.cookies.name.label"},e.default.createElement(H,{"data-testid":"cookie-name",name:"cookie_name",defaultValue:F,required:!0,maxLength:120,onChange:x=>I({name:x}),placeholder:"app.sid"})),e.default.createElement(l,{labelid:"site.settings.profiles.cookies.domain.label"},e.default.createElement(H,{"data-testid":"cookie-domain",name:"cookie_domain",defaultValue:K,required:!0,maxLength:120,onChange:x=>I({domain:x}),placeholder:"google.com"}))),e.default.createElement(y,{mb:0},e.default.createElement(l,{labelid:"site.settings.profiles.cookies.value.label"},e.default.createElement(Z,{"data-testid":"cookie-value",name:"cookie_value",defaultValue:W,required:!0,onChange:x=>I({value:x==null?void 0:x.trim()}),placeholder:"4583490924e9834082d09a8s8932040923482eda",height:150})),e.default.createElement(a,null,e.default.createElement(l,{labelid:"site.settings.profiles.cookies.path.label"},e.default.createElement(H,{"data-testid":"cookie-path",name:"cookie_path",defaultValue:_,required:!0,maxLength:120,onChange:x=>I({path:x}),placeholder:"e.g. /"})),e.default.createElement(l,{mb:"15px"},e.default.createElement(P,{"data-testid":"cookie-secure",name:"cookie_secure",id:"cookie_secure",checked:Q,onChange:()=>I({secure:!Q})},e.default.createElement(d,{id:"site.settings.profiles.cookies.secure.label"}))),e.default.createElement(l,null,e.default.createElement(P,{"data-testid":"cookie-httpOnly",name:"cookie_httpOnly",id:"cookie_httpOnly",checked:X,onChange:()=>I({httpOnly:!X})},e.default.createElement(d,{id:"site.settings.profiles.cookies.httpOnly.label"}))))),e.default.createElement(y,{mb:0}),(n||[]).find(x=>x.name===F&&x.path===_&&x.domain===K)?e.default.createElement(e.Suspense,{fallback:e.default.createElement("div",null)},e.default.createElement(ae,{type:"warning","data-testid":"cookie-feedback",mb:4},e.default.createElement(d,{id:"site.settings.profiles.cookies.parentMatch.text",values:{name:F,link:e.default.createElement("a",{href:"/docs/get-started/authentication#test-profiles-cookies-and-custom-cookies",target:"_blank"},e.default.createElement(d,{id:"site.settings.profiles.cookies.parentMatch.link"}))}}))):null,e.default.createElement(M,null,e.default.createElement(a,{order:2},e.default.createElement(h,{"data-testid":"cookie-submit",disabled:!v||u||!F||!W||!K||!_,onClick:te},e.default.createElement(d,{id:"site.settings.profiles.cookies.actions.save"}))),e.default.createElement(a,{mr:2,order:1},e.default.createElement(h,{type:"button","data-testid":"cookie-cancel",onClick:b,variant:"tertiary"},e.default.createElement(d,{id:"site.actions.cancel"})))))};U.defaultProps={path:"/"};var J=U;var le=v=>{var C=v,{name:u,value:i,domain:b,path:m,secure:g,httpOnly:p,onSave:c,onDelete:t,parentCookies:s}=C,n=T(C,["name","value","domain","path","secure","httpOnly","onSave","onDelete","parentCookies"]);let[S,G]=(0,o.useState)(!1),F=_=>{G(!1),c(_)};return S?o.default.createElement(J,{onSave:F,name:u,value:i,domain:b,path:m,secure:g,httpOnly:p,onCancel:()=>G(!1),parentCookies:s}):o.default.createElement(a,k({mb:"15px"},n),o.default.createElement(y,{mb:0,alignItems:"center"},o.default.createElement(l,{labelid:"site.settings.profiles.cookies.name.label",mb:4},o.default.createElement(B,null,o.default.createElement(D,{"data-testid":"cookie-display-name"},u))),o.default.createElement(l,{labelid:"site.settings.profiles.cookies.path.label",mb:4},o.default.createElement(B,null,o.default.createElement(w,{"data-testid":"cookie-display-path"},m))),o.default.createElement(l,null,o.default.createElement(M,null,o.default.createElement(a,{ml:"auto",mr:2},o.default.createElement(h,{type:"button",variant:"danger",onClick:t},o.default.createElement(d,{id:"site.settings.actions.delete"}))),o.default.createElement(a,null,o.default.createElement(h,{"data-testid":"cookie-edit",variant:"tertiary",onClick:()=>G(!0),type:"button"},o.default.createElement(d,{id:"site.settings.actions.edit"})))))),o.default.createElement(y,{mb:0},o.default.createElement(l,{labelid:"site.settings.profiles.cookies.domain.label",mb:4},o.default.createElement(B,null,o.default.createElement(D,{"data-testid":"cookie-display-domain"},b))),o.default.createElement(l,{labelid:"site.settings.profiles.cookies.secure.label",mb:4},o.default.createElement(B,null,o.default.createElement(w,{"data-testid":"cookie-display-secure"},g?"Yes":"No")))),o.default.createElement(y,{mb:"5px"},o.default.createElement(l,{labelid:"site.settings.profiles.cookies.value.label",mb:4},o.default.createElement(B,null,o.default.createElement(D,{"data-testid":"cookie-display-value"},i))),o.default.createElement(l,{labelid:"site.settings.profiles.cookies.httpOnly.label",mb:4},o.default.createElement(B,null,o.default.createElement(w,{"data-testid":"cookie-display-httpOnly"},p?"Yes":"No")))))},R=le;var q=O(A());var me=g=>{var p=g,{variant:u,parentCookies:i,onSave:b}=p,m=T(p,["variant","parentCookies","onSave"]);let[c,t]=(0,q.useState)(!1),s=n=>{t(!1),b(n)};return c?q.default.createElement(J,{onSave:s,onCancel:()=>t(!1)}):q.default.createElement(a,k({},m),q.default.createElement(h,{"data-testid":"cookie-add",variant:u,type:"button",onClick:()=>t(!0)},q.default.createElement(d,{id:"site.settings.profiles.cookies.actions.add",parentCookies:i})))},ee=me;var pe=({loading:u,cookies:i,parentCookies:b,onUpdate:m,buttonVariant:g})=>{let p=(t,s)=>{let n=Object.assign([],i);n[t]=s,m(n)},c=t=>{if(confirm("Are you sure?")){let s=Object.assign([],i);s.splice(t,1),m(s)}};return E.default.createElement(E.default.Fragment,null,u?E.default.createElement(a,{mb:4},E.default.createElement(z,null)):Object.keys(i).map((t,s)=>E.default.createElement(R,V(k({key:t,id:t},i[t]),{parentCookies:b,onSave:n=>p(t,n),onDelete:()=>c(t),borderBottom:s===Object.keys(i).length-1?"none":"1px solid",borderBottomColor:"grey100"}))),E.default.createElement(ee,{variant:g,parentCookies:b,onSave:t=>p(i.length,t),mt:i.length?4:0}))},ot=pe;export{He as a,ot as b};
//# sourceMappingURL=chunk-2H33SDBN.js.map
