(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{AuOK:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a("JsuU"),n=a("hyLW"),o=a.n(n),s=a("UWC4"),r=a("ponP"),c=a("nKUr");const l=e=>o()(e).format({thousandSeparated:!0,mantissa:0}),d=({intl:e,isFreeTrial:t,limit:a,onLinkClick:n,unit:o})=>{if(t)return{warning:"You've almost reached your quota.",over:"You've exceeded your quota.",willStop:e.formatMessage({id:"common.usage.alerts.free.quota80"}),stopped:e.formatMessage({id:"common.usage.alerts.free.quota100"})};const d="gigabyte"===o?l(Object(r.transformBytesToGigaByte)(a))+s.pc:l(a),p=e=>Object(c.jsx)(i.Link,{variant:i.LinkVariant.Default,iconProps:{icon:"chevron-right",size:16},onClick:n,children:e});return{warning:e.formatMessage({id:"common.usage.alerts.warning"},{a:p}),over:e.formatMessage({id:"common.usage.alerts.over"},{limit:d,a:p}),willStop:e.formatMessage({id:"common.usage.alerts.willStop"},{limit:d,a:p}),stopped:e.formatMessage({id:"common.usage.alerts.stopped"},{limit:d})}}},ByFW:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("dDsW"),n=a("vOnD"),o=a("JsuU"),s=a("nKUr");const r=n.default.div.withConfig({displayName:"NoPlanError__Container",componentId:"aqi5y3-0"})(["width:640px;text-align:center;*{text-align:inherit;}"]),c=n.default.h5.withConfig({displayName:"NoPlanError__Title",componentId:"aqi5y3-1"})(["",";color:",";margin-top:12px;padding:0 32px;"],o.Subtitles["subtitle-03"],Object(o.cssVariables)("neutral-7")),l=n.default.p.withConfig({displayName:"NoPlanError__Description",componentId:"aqi5y3-2"})(["",";color:",";margin-top:4px;white-space:pre-line;"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),d=n.default.div.withConfig({displayName:"NoPlanError__ErrorType",componentId:"aqi5y3-3"})(["width:100%;border:1px solid ",";border-radius:4px;padding:24px 0;margin-top:24px;"],Object(o.cssVariables)("neutral-3")),p=n.default.h6.withConfig({displayName:"NoPlanError__ErrorTypeLabel",componentId:"aqi5y3-4"})(["",";color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-6")),g=n.default.p.withConfig({displayName:"NoPlanError__ErrorTypeDescription",componentId:"aqi5y3-5"})(["",";color:",";margin-top:2px;"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-6")),m=({className:e})=>{const t=Object(i.a)();return Object(s.jsxs)(r,{className:e,children:[Object(s.jsx)(o.Icon,{icon:"error",size:80,color:Object(o.cssVariables)("neutral-5")}),Object(s.jsx)(c,{children:t.formatMessage({id:"common.noPlanError.title"})}),Object(s.jsx)(l,{children:t.formatMessage({id:"common.noPlanError.description"},{a:e=>Object(s.jsx)(o.Link,{variant:o.LinkVariant.Inline,useReactRouter:!0,href:"/settings/contact_us",children:e})})}),Object(s.jsxs)(d,{children:[Object(s.jsx)(p,{children:t.formatMessage({id:"common.noPlanError.errorTypeLabel"})}),Object(s.jsx)(g,{children:t.formatMessage({id:"common.noPlanError.errorTypeDescription"})})]})]})}},ObPb:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("3bBZ");var i=a("q1tI"),n=a("/MKj"),o=a("Qyje"),s=a.n(o),r=a("cAlb"),c=a("Y2WY");const l=e=>{const t=Object(n.g)(e=>e.organizations.current),[{status:a,data:o},l]=Object(c.a)(async()=>{const a=s.a.stringify({start_month:e.format("YYYY-MM"),end_month:e.format("YYYY-MM")});return await Object(r.fetchOrganizationMonthlyUsage)(t.uid,a)},[e]);return Object(i.useEffect)(()=>{l()},[l]),{isLoadingUsage:"loading"===a,monthlyUsage:null==o?void 0:o.data.data[0]}}},aTND:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a("dDsW"),n=a("JsuU"),o=a("Mfcq"),s=a("W7Pl"),r=a("nKUr");const c=({style:e})=>{const t=Object(i.a)(),a=Object(s.W)(),c=()=>{a({dialogTypes:o.a.ConvertFreePlan})};return Object(r.jsx)("div",{style:e,children:Object(r.jsx)(n.InlineNotification,{type:"info",message:t.formatMessage({id:"common.notification.convertFreePlan"},{a:e=>Object(r.jsx)(n.Link,{role:"button",variant:n.LinkVariant.Inline,onClick:c,style:{marginLeft:"8px"},children:e})}),iconProps:{icon:"gift",size:20}})})}},hdWW:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("/MKj"),n=a("E+oP"),o=a.n(n),s=a("bw7j");const r=()=>{const{isSelfService:e}=Object(s.a)(),t=Object(i.g)(e=>e.organizations.current),{free_applications:a,total_applications:n}=t;return!e&&!o()(t)&&a===n}},hx5X:function(e,t,a){"use strict";a.r(t);var i=a("vOnD"),n=a("/MKj"),o=a("JsuU"),s=a("E+oP"),r=a.n(s),c=a("brpS"),l=a("ByFW"),d=(a("3bBZ"),a("q1tI")),p=a("dDsW"),g=a("50DI"),m=a.n(g),u=a("f0Wu"),b=a.n(u),j=a("b2r9"),h=a("UWC4"),O=a("W7Pl"),f=a("hdWW"),x=a("6889"),y=a("2Z9k"),C=a("aTND"),_=a("Mfcq"),w=a("nKUr");let v;const{ResponsiveContainer:z,wideGridMediaQuery:I}=Object(x.Hc)({wideWidth:1008,narrowMaxWidth:820}),N=i.default.div.withConfig({displayName:"Applications__Header",componentId:"sc-3o0jjr-0"})(["margin-bottom:24px;"]),M=i.default.div.withConfig({displayName:"Applications__TitleWrapper",componentId:"sc-3o0jjr-1"})(["display:flex;flex-direction:row;justify-content:space-between;"]),S=i.default.h4.withConfig({displayName:"Applications__Title",componentId:"sc-3o0jjr-2"})(["font-size:20px;font-weight:600;line-height:1.4;letter-spacing:-0.25px;color:",";"],Object(o.cssVariables)("neutral-10")),A=i.default.div.withConfig({displayName:"Applications__TitleActions",componentId:"sc-3o0jjr-3"})(["display:flex;flex-direction:row;"]),U=i.default.div.withConfig({displayName:"Applications__Description",componentId:"sc-3o0jjr-4"})(["font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";strong{font-weight:500;}"],Object(o.cssVariables)("neutral-7")),k=Object(i.default)(z).withConfig({displayName:"Applications__Wrapper",componentId:"sc-3o0jjr-5"})(["display:block;padding-top:32px !important;padding-bottom:32px !important;",""],I(v||(v=(e=>e)`
    padding-left: 16px !important;
    padding-right: 16px !important;
  `))),E=Object(i.default)(o.Avatar).withConfig({displayName:"Applications__AppItemIcon",componentId:"sc-3o0jjr-6"})(["margin-right:14px;"]),P=i.default.div.withConfig({displayName:"Applications__AppInfo",componentId:"sc-3o0jjr-7"})(["display:flex;flex-direction:column;& > p:first-child{margin-bottom:4px;font-size:14px;font-weight:500;line-height:1.43;color:",";}& > p:last-child{font-size:12px;line-height:1.33;color:",";}"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-7")),q=Object(i.default)(x.Pb).withConfig({displayName:"Applications__AppSearchInput",componentId:"sc-3o0jjr-8"})(["width:240px;"]),D=Object(i.default)(o.Button).withConfig({displayName:"Applications__CreateAppButton",componentId:"sc-3o0jjr-9"})([""]);var L=Object(i.default)(D).withConfig({displayName:"Applications___StyledCreateAppButton",componentId:"sc-3o0jjr-10"})(["margin-left:8px;"]);const T=Object(i.default)(o.OverflowMenu).withConfig({displayName:"Applications__RowOverflowMenu",componentId:"sc-3o0jjr-11"})(["margin-right:8px;"]),W=Object(i.default)(e=>Object(o.Table)(e)).withConfig({displayName:"Applications__StyledApplicationTable",componentId:"sc-3o0jjr-12"})(["background-color:transparent;border:0;thead{position:sticky;background-color:white;}"]),B=i.default.div.withConfig({displayName:"Applications__FooterWrapper",componentId:"sc-3o0jjr-13"})(["position:relative;height:32px;margin-top:8px;text-align:center;"]),V={showDialogsRequest:j.b.showDialogsRequest,changeApplicationRequest:j.c.changeApplicationRequest,resetApplicationRequest:j.c.resetApplicationRequest,resetDesk:j.d.resetDesk},R=Object(n.d)(e=>({auth:e.auth,authenticated:e.auth.authenticated,currentOrganization:e.organizations.current}),V)(({authenticated:e,currentOrganization:t,showDialogsRequest:a,changeApplicationRequest:i,resetApplicationRequest:n,resetDesk:s})=>{const c=Object(p.a)(),{isPermitted:l,isSelfService:g}=Object(O.h)(),[u,j]=(()=>{const[e,t]=Object(d.useState)(!1);return[e,Object(d.useCallback)(()=>t(!0),[])]})(),[v,z]=Object(d.useState)("app_name"),{clearSearchQuery:I,fetchNextResults:D,hasMore:V,isFetching:R,isSearchResultVisible:F,items:Y,rawSearchQuery:H,searchQuery:K,updateSearchQuery:$}=Object(O.f)(h.b,v),{footerRef:Q}=(e=>{const t=Object(d.useRef)(null),a=Object(d.useRef)(null);return Object(d.useEffect)(()=>{a.current=e},[e]),Object(d.useEffect)(()=>{const e=new IntersectionObserver(([e])=>{e&&e.isIntersecting&&(null==a.current||a.current())});return t.current&&e.observe(t.current),()=>{e.disconnect()}},[]),{footerRef:t}})(D),Z=Object(O.j)(),G=Object(f.a)(),J=Object(O.R)(Y.length);Object(d.useEffect)(()=>{if(J&&Y.length<J){const e=document.querySelector(".ps");null==e||e.scrollTo(0,0)}},[Y.length,J]),Object(d.useEffect)(()=>{r()(t)&&a({dialogTypes:_.a.Onboarding,dialogProps:{overlayZIndex:1e4}})},[t,a]),Object(d.useEffect)(()=>{n(),s(),window.dashboardSB&&window.dashboardSB.disconnect(()=>{})},[n,s]);const X=Object(d.useCallback)(e=>{e.stopPropagation(),r()(t)||a({dialogTypes:_.a.CreateApp,dialogProps:{organization:t}})},[t,a]),ee=Object(d.useCallback)(e=>{$(e)},[$]),te=Object(d.useCallback)(()=>{I()},[I]),ae=Object(d.useCallback)((e,t)=>{z(e?`${"descend"===t?"-":""}${e.dataIndex}`:"app_name")},[]),ie=Object(O.e)(Y),ne=Object(d.useMemo)(()=>{const e=e=>{return{onClick:(t=e,e=>{e.stopPropagation(),Z&&i(t)})};var t},t=e=>{const t=[{label:"Change app name",onClick:()=>{a({dialogTypes:_.a.ChangeAppName,dialogProps:{application:e}})}}];return l(["organization.applications.all"])&&t.push({label:"Delete",onClick:()=>{a({dialogTypes:_.a.DeleteApplication,dialogProps:{application:e}})}}),t},n=F?{title:c.formatMessage({id:"label.applicationSearchResultEmpty"}),description:c.formatMessage({id:"desc.applicationSearchResultEmpty"})}:{title:c.formatMessage({id:"label.applicationListEmpty"}),description:c.formatMessage({id:"desc.applicationListEmpty"})},s=[{dataIndex:"app_name",title:c.formatMessage({id:"label.name"}),flex:3,render:({app_id:e,app_name:t})=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(E,{type:o.AvatarType.Application,profileID:e,size:32}),Object(w.jsxs)(P,{children:[Object(w.jsx)("p",{children:t}),Object(w.jsx)("p",{children:e})]})]}),sorter:!0,defaultSortOrder:"ascend",onCell:e},...g?[]:[{dataIndex:"plan",title:c.formatMessage({id:"common.home.applications.column.plan"}),flex:1,render:({plan:e})=>"enterprise"===e.toLowerCase()?"Custom":m()(e),sorter:!0,onCell:e}],{dataIndex:"region",title:c.formatMessage({id:"common.home.applications.column.region"}),flex:1,render:e=>ie[e.app_id],sorter:!0,onCell:e},{dataIndex:"created_at",title:c.formatMessage({id:"common.home.applications.column.createdAt"}),flex:1.4,render:e=>b()(e.created_at).format(h.ec),sorter:!0,onCell:e}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(W,{columns:s,rowActions:l(["organization.applications.all"])?e=>[Object(w.jsx)(T,{items:t(e),iconButtonProps:{"data-test-id":"ApplicationRowActionMenuButton"}},"actions")]:void 0,dataSource:Y,rowKey:"app_id",rowStyles:Z?()=>"cursor: pointer;":void 0,density:"large",emptyView:!R&&Object(w.jsx)(y.a,{icon:"applications",...n}),onSortByUpdated:ae}),Object(w.jsxs)(B,{ref:Q,children:[V&&!R&&Object(w.jsx)(o.Button,{buttonType:"tertiary",size:"small",onClick:()=>{D()},children:"More"}),R&&Object(w.jsx)(x.dc,{isFetching:!0})]})]})},[F,c,g,l,Y,R,ae,Q,V,Z,i,a,D,ie]);return e?Object(w.jsxs)(k,{"data-test-id":"Applications",children:[Object(w.jsxs)(N,{children:[Object(w.jsxs)(M,{children:[Object(w.jsx)(S,{children:c.formatMessage({id:"common.home.applications.title"})}),Object(w.jsxs)(A,{children:[Object(w.jsx)(q,{handleChange:ee,handleSearchClear:te,value:H,ph:c.formatMessage({id:"ph.searchApplications"}),isFetching:!!K&&R}),l(["organization.applications.all"])&&Object(w.jsx)(x.tc,{target:Object(w.jsx)(L,{size:"small",buttonType:"primary",onClick:X,icon:"plus",children:c.formatMessage({id:"common.createApp"})}),items:[{description:"Create your first application."}],placement:"left-start",offset:"4, 0",isOpen:!R&&!K&&0===Y.length&&!u,onClickPrimaryButton:j,interactionHover:!1,enablePrimaryButton:!0},"organization_no_app_tooltip")]})]}),Object(w.jsx)(U,{children:c.formatMessage({id:"common.applications.maxApplicationCount.withCurrent"},{max:Object(w.jsx)("strong",{children:t.max_application_count}),current:Object(w.jsx)("strong",{children:t.total_applications}),currentCount:t.total_applications})})]}),G&&Object(w.jsx)(C.a,{style:{margin:"24px 0 16px"}}),ne]}):Object(w.jsx)(x.cc,{})});var F=a("LZ/X"),Y=a("ObPb");const H=b()(),K={usage:0,quota:0,limit:1e4},$=Object(d.createContext)({chatSubscription:null,isChatSubscriptionLoading:!1,supportSubscription:null,isSupportSubscriptionLoading:!1,chatUsage:{[h.u.MonthlyActiveUser]:K,[h.u.PeakConnection]:K}}),Q=({children:e})=>{const{currentSubscription:t,isLoading:a}=Object(F.a)(h.bc.Chat),{currentSubscription:i,isLoading:n}=Object(F.a)(h.bc.Support),{monthlyUsage:o}=Object(Y.a)(H),s={[h.u.MonthlyActiveUser]:o&&t?{usage:o.mau,quota:t.plan.mau.purchased_units,limit:t.plan.mau.hard_limit}:K,[h.u.PeakConnection]:o&&t?{usage:o.pc,quota:t.plan.pc.purchased_units,limit:t.plan.pc.hard_limit}:K};return Object(w.jsx)($.Provider,{value:{chatSubscription:t,isChatSubscriptionLoading:a,supportSubscription:i,isSupportSubscriptionLoading:n,chatUsage:s},children:e})};var Z=a("Ty5D"),G=a("SEis");const J=({children:e,to:t})=>Object(w.jsx)(o.Link,{variant:o.LinkVariant.Mono,useReactRouter:!0,href:t,children:e}),X=e=>Object(w.jsx)(J,{to:"/settings/general",children:e}),ee=e=>Object(w.jsx)(o.InlineNotification,{className:"InlineNotification",type:"error",...e}),te=e=>Object(w.jsx)(o.InlineNotification,{className:"InlineNotification",type:"warning",...e}),ae=()=>{const e=Object(p.a)();return Object(w.jsx)(ee,{"data-test-id":"CallsPaymentDeclined",message:e.formatMessage({id:"common.home.notifications.callsPaymentDeclined"},{a:X})})},ie=()=>{const e=Object(p.a)();return Object(w.jsx)(ee,{"data-test-id":"CallsExpirationError",message:e.formatMessage({id:"common.home.notifications.callsExpirationError"},{a:X})})},ne=()=>{const e=Object(p.a)();return Object(w.jsx)(ee,{"data-test-id":"CallsDepletionError",message:e.formatMessage({id:"common.home.notifications.callsDepletionError"},{a:X})})},oe=()=>{const e=Object(p.a)();return Object(w.jsx)(ee,{"data-test-id":"CallsExpirationAndDepletionError",message:e.formatMessage({id:"common.home.notifications.callsExpirationAndDepletionError"},{a:X})})},se=()=>{const e=Object(p.a)();return Object(w.jsx)(te,{"data-test-id":"CallsDepletionWarning",message:e.formatMessage({id:"common.home.notifications.callsDepletionWarning"},{a:X})})},re=()=>{const e=Object(p.a)();return Object(w.jsx)(te,{"data-test-id":"CallsExpirationWarning",message:e.formatMessage({id:"common.home.notifications.callsExpirationWarning"},{a:X})})},ce=()=>{const e=Object(p.a)();return Object(w.jsx)(te,{"data-test-id":"CallsExpirationAndDepletionWarning",message:e.formatMessage({id:"common.home.notifications.callsExpirationAndDepletionWarning"},{a:X})})},le=()=>{const e=Object(G.h)(),t=Object(G.j)(),a=Object(G.l)(),i=Object(d.useMemo)(()=>{if(!t||!a)return null;const e=t===G.c.Error,i=a===G.c.Error;if(e&&i)return Object(w.jsx)(oe,{});if(i)return Object(w.jsx)(ie,{});if(e)return Object(w.jsx)(ne,{});const n=t===G.c.Warn,o=a===G.c.Warn;return n&&o?Object(w.jsx)(ce,{}):o?Object(w.jsx)(re,{}):n?Object(w.jsx)(se,{}):void 0},[t,a]);return Object(w.jsxs)(w.Fragment,{children:[i,(null==e?void 0:e.status)===G.b.PAYMENT_DECLINED&&Object(w.jsx)(ae,{})]})};let de;const{ResponsiveContainer:pe,wideGridMediaQuery:ge}=Object(x.Hc)({wideWidth:1008,narrowMaxWidth:820}),me=Object(i.default)(pe).withConfig({displayName:"OrganizationInformation__Container",componentId:"k1mlas-0"})(["display:block;"," .orgNotification{margin-bottom:16px;& + .orgNotification{margin-top:6px;}}.InlineNotification + .InlineNotification{margin-top:16px;}.InlineNotification:last-child{margin-bottom:16px;}"],ge(de||(de=(e=>e)`
    padding-left: 16px !important;
    padding-right: 16px !important;
  `))),ue=i.default.div.withConfig({displayName:"OrganizationInformation__Section",componentId:"k1mlas-1"})(["padding:32px 0 0;margin-bottom:32px;"]),be=i.default.div.withConfig({displayName:"OrganizationInformation__OrganizationRow",componentId:"k1mlas-2"})(["display:flex;align-items:start;justify-content:space-between;"]),je=i.default.div.withConfig({displayName:"OrganizationInformation__OrganizationBasic",componentId:"k1mlas-3"})(["display:flex;align-items:center;"]),he=i.default.div.withConfig({displayName:"OrganizationInformation__OrganizationName",componentId:"k1mlas-4"})(["margin-left:16px;& > .onHeader{font-size:20px;font-weight:600;line-height:28px;letter-spacing:-0.25px;color:",";}& > .onCounts{display:flex;align-items:center;font-size:14px;line-height:20px;letter-spacing:-0.1px;color:",";& > .onDivider{position:relative;content:'';margin:0 8px;width:3px;height:3px;background-color:",";}}"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-7"),Object(o.cssVariables)("neutral-7")),Oe=({organization:e})=>{const t=Object(p.a)(),a=Object(Z.k)(),{isAccessiblePage:i}=Object(O.h)();return Object(w.jsxs)(me,{"data-test-id":"OrganizationInformation",children:[Object(w.jsx)(ue,{children:Object(w.jsxs)(be,{children:[Object(w.jsxs)(je,{children:[Object(w.jsx)(o.Avatar,{type:o.AvatarType.Organization,profileID:e.slug_name,size:64}),Object(w.jsxs)(he,{children:[Object(w.jsx)("div",{className:"onHeader","data-test-id":"OrganizationName",children:e.name}),Object(w.jsxs)("div",{className:"onCounts","data-test-id":"OrganizationSummary",children:[e.total_members," members ",Object(w.jsx)("div",{className:"onDivider"})," ",e.total_applications," ","applications"," "]})]})]}),i(h.Gb.organization)&&Object(w.jsx)(o.Button,{buttonType:"tertiary",icon:"settings",size:"small",onClick:()=>a.push("/settings"),"data-test-id":"OrganizationSettingsButton",children:t.formatMessage({id:"common.home.organizationInformation.button.organization"})})]})}),Object(w.jsx)(le,{})]})};var fe=a("UExX"),xe=a("shMb"),ye=a("AuOK");let Ce;var _e;!function(e){e[e.ON=0]="ON",e[e.OFF=1]="OFF",e[e.PAYMENT_DECLINED=2]="PAYMENT_DECLINED"}(_e||(_e={}));const{ResponsiveContainer:we,wideGridMediaQuery:ve}=Object(x.Hc)({wideWidth:1008,narrowMaxWidth:820}),ze=i.default.div.withConfig({displayName:"OrganizationUsage__Wrapper",componentId:"sc-2yczqd-0"})(["width:100%;min-width:1024px;background:",";padding:32px 0;"],Object(o.cssVariables)("neutral-1")),Ie=Object(i.default)(we).withConfig({displayName:"OrganizationUsage__Container",componentId:"sc-2yczqd-1"})(["display:block;> div:not(:last-child){min-height:347px;}",""],ve(Ce||(Ce=(e=>e)`
  padding-left: 16px !important;
  padding-right: 16px !important;
`))),Ne=i.default.div.withConfig({displayName:"OrganizationUsage__UsageGrid",componentId:"sc-2yczqd-2"})(["display:grid;grid-template-columns:repeat(",",1fr);grid-column-gap:32px;& + &{margin-top:16px;}"],({columns:e})=>e),Me=i.default.section.withConfig({displayName:"OrganizationUsage__UsageSection",componentId:"sc-2yczqd-3"})(["flex:1;display:flex;flex-direction:column;a{font-weight:600;font-size:14px;margin-left:auto;}"]),Se=i.default.div.withConfig({displayName:"OrganizationUsage__UsageTitle",componentId:"sc-2yczqd-4"})(["",";color:",";font-weight:600;margin-bottom:8px;"],o.Headings["heading-03"],Object(o.cssVariables)("neutral-10")),Ae=Object(i.default)(x.o).withConfig({displayName:"OrganizationUsage__UsageCard",componentId:"sc-2yczqd-5"})(["width:100%;flex:1;"]),Ue=i.default.div.withConfig({displayName:"OrganizationUsage__UsageItems",componentId:"sc-2yczqd-6"})(["display:grid;grid-row-gap:16px;"]),ke=i.default.div.withConfig({displayName:"OrganizationUsage__UsageCardHeader",componentId:"sc-2yczqd-7"})(["padding:24px;border-bottom:1px solid ",";display:flex;"," button{margin-left:auto;}"],Object(o.cssVariables)("neutral-3"),({isCallsActive:e})=>e&&Object(i.css)(["min-height:92px;"])),Ee=i.default.div.withConfig({displayName:"OrganizationUsage__UsageCardBody",componentId:"sc-2yczqd-8"})(["padding:24px;"]),Pe=i.default.h3.withConfig({displayName:"OrganizationUsage__UsageCardTitle",componentId:"sc-2yczqd-9"})(["display:flex;align-items:center;"," color:",";margin-bottom:8px;"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),qe=i.default.dl.withConfig({displayName:"OrganizationUsage__DList",componentId:"sc-2yczqd-10"})(["display:grid;grid-template-columns:108px 1fr;align-items:flex-start;grid-gap:4px 16px;"]),De=i.default.dt.attrs({"data-test-id":"Label"}).withConfig({displayName:"OrganizationUsage__Label",componentId:"sc-2yczqd-11"})(["",";color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-6")),Le=i.default.dd.attrs({"data-test-id":"Value"}).withConfig({displayName:"OrganizationUsage__Value",componentId:"sc-2yczqd-12"})(["",";display:flex;align-items:center;color:",";",";& > p{margin-top:4px;",";color:",";}"],o.Subtitles["subtitle-01"],e=>{var t;return e.$color&&null!=(t={red:Object(o.cssVariables)("red-5"),yellow:Object(o.cssVariables)("yellow-5"),neutral:Object(o.cssVariables)("neutral-10")}[e.$color])?t:"neutral"},e=>e.$strong&&"font-weight: 600;",o.Body["body-short-01"],Object(o.cssVariables)("neutral-7"));var Te=Object(i.default)(Le).withConfig({displayName:"OrganizationUsage___StyledValue",componentId:"sc-2yczqd-13"})(["display:block;"]);const We=()=>{const e=Object(n.g)(e=>e.organizations.current),{role:t}=Object(O.h)(),{chatSubscription:a,chatUsage:i,supportSubscription:o,isChatSubscriptionLoading:s,isSupportSubscriptionLoading:r}=Object(d.useContext)($),c=[h.Hb.OWNER,h.Hb.ADMIN].includes(t.name),l=e.is_self_serve,p="free_trial"===(null==a?void 0:a.subscription_name);return{subscription:a,support:o,usage:i,isAuthorized:c,isSelfService:l,isFreeTrial:p,willBeExpired:!(!p||null==a||!a.end_date),isChatSubscriptionLoading:s,isSupportSubscriptionLoading:r}},Be=({name:e="Community",isLoading:t,onClickChangeButton:a})=>{const i=Object(p.a)();return Object(w.jsx)(Ne,{columns:1,children:Object(w.jsxs)(Me,{children:[Object(w.jsx)(Se,{children:"Support"}),Object(w.jsx)(Ae,{children:Object(w.jsxs)(ke,{style:{borderBottom:"none"},children:[Object(w.jsxs)(qe,{"data-test-id":"SupportPlan",children:[Object(w.jsx)(De,{children:"Support plan"}),Object(w.jsxs)(Te,{children:[t?h.Z:e,Object(w.jsx)("p",{children:"Services provided to your organization according to the subscribed support plan."})]})]}),Object(w.jsx)(o.Button,{buttonType:"tertiary",size:"small",onClick:a,children:i.formatMessage({id:"common.home.supportPlan.manage"})})]})})]})})},Ve=({expiredAt:e,status:t,showAlert:a})=>{const i=Object(p.a)(),n=a?{[G.c.Warn]:{color:"bg-warning",strong:!0,tooltip:i.formatMessage({id:"common.home.callsUsage.expiresOn.warn"})},[G.c.Error]:{color:"bg-negative",strong:!0,tooltip:i.formatMessage({id:"common.home.callsUsage.expiresOn.error"})}}[t]:null;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(De,{children:i.formatMessage({id:"common.home.callsUsage.expiresOn.label"})}),Object(w.jsxs)(Le,{$color:null==n?void 0:n.color,$strong:null==n?void 0:n.strong,children:[e?b()(e).format(h.bb):h.Z,n&&Object(w.jsx)(x.zc,{icon:"warning-filled",color:n.color,tooltip:n.tooltip})]})]})},Re=i.default.div.withConfig({displayName:"OrganizationUsage__AutoRechargeContainer",componentId:"sc-2yczqd-14"})(["margin-top:8px;min-width:68px;background:white;padding:22px 24px;border:1px solid ",";border-radius:4px;display:grid;grid-template-columns:110px 1fr auto;grid-gap:0 16px;align-items:center;span:first-child{",";}"],Object(o.cssVariables)("neutral-3"),o.Headings["heading-01"]),Fe=({status:e})=>{const t=Object(p.a)();return Object(w.jsxs)(Re,{children:[Object(w.jsx)("span",{children:t.formatMessage({id:"common.home.callsUsage.autoRecharge.label"})}),Object(w.jsx)(x.Cc,{status:e})]})},Ye=({onUpgradeClick:e})=>{const t=Object(p.a)();Object(G.m)();const a=Object(G.f)(),i=Object(G.h)(),n=Object(G.l)(),s=Object(G.i)();if(!a||!i||!n)return Object(w.jsx)(o.SpinnerFull,{});const{balance:r,expireAt:c,usage:l,quota:d}=a;return Object(w.jsxs)(Me,{"data-test-id":"CallsUsage",children:[Object(w.jsx)(Se,{children:t.formatMessage({id:"common.home.callsUsage.title"})}),Object(w.jsxs)(Ae,{children:[Object(w.jsxs)(ke,{children:[Object(w.jsxs)(qe,{children:[Object(w.jsx)(De,{children:t.formatMessage({id:"common.home.callsUsage.balance"})}),Object(w.jsxs)(Le,{children:[r.toLocaleString()," ",t.formatMessage({id:"common.home.callsUsage.creditUnit"})]}),Object(w.jsx)(Ve,{expiredAt:c,status:n,showAlert:s})]}),Object(w.jsx)(o.Button,{buttonType:"tertiary",size:"small",onClick:e,children:t.formatMessage({id:"common.home.callsUsage.change"})})]}),Object(w.jsxs)(Ee,{children:[Object(w.jsx)(Pe,{children:t.formatMessage({id:"common.home.callsUsage.creditUsage"})}),Object(w.jsx)(Ue,{children:Object(w.jsx)(xe.a,{variant:"compact",usage:l,quota:d,showAlert:s})})]})]}),i&&Object(w.jsx)(Fe,{status:i.status})]})},He=({onUsageClick:e,onUpgradeClick:t,isCallsActive:a=!1})=>{const i=Object(p.a)(),n=Object(O.W)(),s=Object(d.useCallback)(()=>{n({dialogTypes:_.a.Overage})},[n]),{subscription:r,usage:c,willBeExpired:l,isChatSubscriptionLoading:g}=We();if(g)return Object(w.jsx)(o.SpinnerFull,{});if(!r)return null;const m=[{labelKey:"common.home.organizationUsage.subscriptionPlan",value:Object(w.jsx)(Le,{children:r.display_name})},l&&{labelKey:"common.home.organizationUsage.expiresOn",value:Object(w.jsx)(Le,{$color:"red",$strong:!0,children:b()(r.end_date).format(h.bb)})}].filter(Boolean),u=[{label:i.formatMessage({id:"common.home.organizationUsage.usage.mau"}),...c[h.u.MonthlyActiveUser]},{label:i.formatMessage({id:"common.home.organizationUsage.usage.pc"}),...c[h.u.PeakConnection]}];return Object(w.jsxs)(Me,{children:[Object(w.jsx)(Se,{children:"Chat"}),Object(w.jsxs)(Ae,{children:[Object(w.jsxs)(ke,{isCallsActive:a,children:[Object(w.jsx)(qe,{"data-test-id":"PlanItems",children:m.map(({labelKey:e,value:t})=>Object(w.jsxs)(d.Fragment,{children:[Object(w.jsx)(De,{children:i.formatMessage({id:e})}),t]},e))}),Object(w.jsx)(o.Button,{buttonType:"tertiary",size:"small",onClick:t,children:i.formatMessage({id:"common.home.chatUsage.manage"})})]}),Object(w.jsxs)(Ee,{children:[Object(w.jsxs)(Pe,{children:[i.formatMessage({id:"common.home.organizationUsage.keyUsage"}),Object(w.jsx)(o.Link,{onClick:e,children:i.formatMessage({id:"common.home.organizationUsage.viewMore"})})]}),Object(w.jsx)(Ue,{children:u.map(({label:e,usage:t,quota:a,limit:n})=>Object(w.jsx)(x.yc,{variant:"compact",showAlert:!0,label:e,labelNumber:"default",labelNumberSuffix:"total",usage:t,quota:a,limit:n||0,showMarker:!0,availabilityTooltips:Object(ye.a)({intl:i,isFreeTrial:(null==r?void 0:r.subscription_name)===h.ac.FreeTrial,limit:n||0,onLinkClick:s})},`usageItem_${e}`))})]})]})]})},Ke=()=>{const{isAuthorized:e,subscription:t,support:a,isChatSubscriptionLoading:i,isSupportSubscriptionLoading:n}=We(),o=Object(fe.a)(),s=Object(Z.k)(),r=()=>{s.push("/settings/general")};if(!e)return null;const c=[(i||t)&&Object(w.jsx)(He,{onUsageClick:()=>{s.push("/settings/usage")},onUpgradeClick:r,isCallsActive:o},"chat"),o&&Object(w.jsx)(Ye,{onUpgradeClick:r},"calls")].filter(Boolean);return Object(w.jsx)(ze,{"data-test-id":"OrganizationUsage",children:Object(w.jsxs)(Ie,{children:[c.length>0&&Object(w.jsx)(Ne,{columns:c.length,children:c}),Object(w.jsx)(Be,{name:null==a?void 0:a.display_name,isLoading:n,onClickChangeButton:r})]})})};var $e=Object(i.default)(l.a).withConfig({displayName:"home___StyledNoPlanError",componentId:"fxo0xm-0"})(["margin:128px auto;"]);t.default=()=>{const e=Object(n.g)(e=>e.organizations.current),{isFreeTrialMissing:t}=Object(c.b)();return Object(w.jsxs)(o.ScrollBar,{children:[!r()(e)&&e.is_self_serve&&Object(w.jsxs)(Q,{children:[Object(w.jsx)(Oe,{organization:e}),t?null:Object(w.jsx)(Ke,{organization:e})]}),t?Object(w.jsx)($e,{}):Object(w.jsx)(R,{})]})}}}]);
//# sourceMappingURL=30.js.map?v=661d7526967132d66f4d