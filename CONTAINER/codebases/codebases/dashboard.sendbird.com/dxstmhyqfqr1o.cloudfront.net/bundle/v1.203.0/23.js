(window.webpackJsonp=window.webpackJsonp||[]).push([[23,0,4,17,47,129],{"+JPL":function(e,t,n){e.exports={default:n("gRli"),__esModule:!0}},"+vXQ":function(e,t,n){e.exports=!n("C61u")&&!n("S4vA")((function(){return 7!=Object.defineProperty(n("BfU5")("div"),"a",{get:function(){return 7}}).a}))},"/F7N":function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},"/NTb":function(e,t,n){t.f=n("zBWt")},"/W6B":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("3bBZ");var a=n("q1tI"),i=n("dDsW"),s=n("55Ip"),r=n("vOnD"),o=n("JsuU"),l=n("DzJC"),c=n.n(l),d=n("KYdE"),u=n("NuuC"),p=n("W7Pl"),g=n("6889"),h=n("ponP"),m=n("nKUr");const f=r.default.div.withConfig({displayName:"agentGroupsSearchDropdown__DropdownToggleWrapper",componentId:"sc-1aythxo-0"})(["display:flex;padding:6px 0;margin-left:16px;"," svg{margin-right:8px;transition:fill 0.2s ",";","}"],o.Subtitles["subtitle-01"],o.transitionDefault,({isOpen:e})=>e&&`fill: ${Object(o.cssVariables)("purple-7")};`),b=r.default.div.withConfig({displayName:"agentGroupsSearchDropdown__EmptyViewWrapper",componentId:"sc-1aythxo-1"})(["display:flex;align-items:center;justify-content:center;height:104px;"," color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-5")),j=r.default.div.withConfig({displayName:"agentGroupsSearchDropdown__InlineItemNotificationWrapper",componentId:"sc-1aythxo-2"})(["margin-bottom:-4px;width:100%;"]),y=Object(r.default)(o.InlineNotification).withConfig({displayName:"agentGroupsSearchDropdown__InlineItemNotification",componentId:"sc-1aythxo-3"})(["width:calc(100% + 8px);transform:translate(-4px,4px);border-radius:0;a{color:",";text-decoration:underline;&:hover{color:",";}}"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-6"));var O=Object(r.default)(o.Dropdown).withConfig({displayName:"agentGroupsSearchDropdown___StyledDropdown",componentId:"sc-1aythxo-4"})(["& + ul{width:",";}",""],e=>e._css,e=>e._css2),v=Object(r.default)(g.qb).withConfig({displayName:"agentGroupsSearchDropdown___StyledInfoTooltip",componentId:"sc-1aythxo-5"})(["margin-left:4px;"]);const x=({selectedAgentGroupId:e=null,selectedAgentGroup:t=null,dropdownProps:n,disabledItemTooltipContent:l,disabled:g,isAllTeamOptionAvailable:x,isBotOnly:_,hasError:C,className:k,filterItems:w,isItemDisabled:T,onItemSelected:S,onChange:E})=>{var I;const M=Object(i.a)(),D=Object(p.c)(),{pid:A,region:N}=Object(u.a)(),[R,P]=Object(a.useState)(t),[L,F]=Object(a.useState)(!1),[{data:U,status:$,error:B},V]=Object(p.g)(async()=>Object(d.fetchAgentGroups)(A,N,{offset:0,limit:100}),[A,N],{status:"loading"}),[{data:z,status:H,error:q},G]=Object(p.g)(async()=>Object(d.fetchAgentGroups)(A,N,{offset:0,limit:100,isBotOnly:_}),[_,A,N],{status:"loading"}),[{data:W,status:K,error:Y},Q]=Object(p.g)(async e=>await Object(d.searchAgentGroups)(A,N,{name:e}),[A,N]),[{data:J,status:X,error:Z},ee]=Object(p.g)(async e=>await Object(d.fetchAgentGroup)(A,N,{groupId:e}),[A,N]),te=Object(a.useMemo)(()=>{const e=[$,K,X].includes("loading");return _?e||"loading"===H:e},[X,$,H,_,K]),ne=Object(a.useMemo)(()=>{const e=[$,K,X].some(e=>"error"===e);return _?e||"error"===H:e},[X,$,H,_,K]);Object(p.s)(Y||q||B||Z,{ignoreDuplicates:!0});const ae=Object(a.useMemo)(()=>({id:-1,name:M.formatMessage({id:"desk.team.allTeam"}),key:null,description:null,project:0,createdAt:"",createdBy:0,memberCount:0}),[M]);Object(a.useEffect)(()=>{null==t?"number"==typeof e&&e>0?ee(e):P(x?ae:null):P(t)},[ae,ee,x,t,e]),Object(a.useEffect)(()=>{V(),_&&G()},[V,G,_]),Object(a.useEffect)(()=>{if(null!=J&&J.data){const{members:e,...t}=J.data,n={...t,memberCount:e.length};P(n)}},[J]);const ie=Object(a.useCallback)(e=>{c()(()=>{Q(e)},200)(),L&&""===e?F(!1):L||""===e||F(!0)},[L,Q]),se=Object(a.useCallback)(e=>{e&&(null==S||S(e))},[S]),re=Object(a.useMemo)(()=>{var e;return te||ne?[]:L?(null==W?void 0:W.data.results.sort((e,t)=>e.name.localeCompare(t.name)))||[]:[...null!=(e=null==U?void 0:U.data.results)?e:[]].sort(h.sortToDefaultTeamFirst)},[U,te,L,ne,W]),oe=Object(a.useMemo)(()=>{const e=x?[ae,...re]:re;return w?e.filter(w):e},[x,ae,re,w]),le=null!=(I=0===(null==z?void 0:z.data.results.length))&&I,ce=e=>{if(null!=e){var t;const a=null!=(t=null==T?void 0:T(e))&&t;if(_){var n;return null!=(n=null==z?void 0:z.data.results.every(t=>t.id!==e.id))&&n||a}return a}return!1};return Object(m.jsx)(O,{size:"small",variant:"inline",placement:"bottom-end",...n,items:oe,itemToString:e=>e.id.toString(),itemToElement:e=>{const t=-1===e.id;if(ce(e)){const t=_?M.formatMessage({id:"desk.team.teamSelect.dropdown.item.contextualHelp.noBotIncluded"}):l;return Object(m.jsx)(o.ContextualHelp,{content:t,placement:"right",popperProps:{modifiers:{offset:{offset:"0, 12px"}}},children:e.name})}return!t&&Object(h.getIsDefaultTeam)(e.key)?Object(m.jsxs)(m.Fragment,{children:[M.formatMessage({id:"desk.team.defaultTeam"}),Object(m.jsx)(v,{content:M.formatMessage({id:"desk.team.defaultTeam.tooltip"}),placement:"right",popperProps:{modifiers:{offset:{offset:"0, 4px"}},positionFixed:!0},portalId:"portal_tooltip",tooltipContentStyle:Object(r.css)(["max-width:280px;"])})]}):e.name},isItemDisabled:ce,selectedItem:R,useSearch:!0,searchPlaceholder:M.formatMessage({id:"desk.team.teamSelect.dropdown.search.placeholder"}),header:_&&le&&Object(m.jsx)(j,{children:Object(m.jsx)(y,{type:"info",message:M.formatMessage({id:"desk.team.teamSelect.dropdown.item.inlineNotification.noBotIncludedTeam"},{span:e=>Object(m.jsx)(s.Link,{to:`/${D}/desk/settings/teams`,children:e}),a:e=>Object(m.jsx)(s.Link,{to:`/${D}/desk/settings/bots`,children:e})})})}),disabled:g||te,hasError:C||ne,onSearchChange:ie,toggleRenderer:e=>{var t;if(null!=n&&n.toggleRenderer)return n.toggleRenderer(e);const{selectedItem:a,isOpen:i}=e,s=-1===(null==a?void 0:a.id),r=Object(h.getIsDefaultTeam)(null!=(t=null==a?void 0:a.key)?t:null),l=a?!s&&r?M.formatMessage({id:"desk.team.defaultTeam"}):a.name:M.formatMessage({id:"desk.team.teamSelect.dropdown.item.placeholder"});return Object(m.jsxs)(f,{isOpen:i,"data-test-id":"DropdownToggleWrapper",children:[!s&&Object(m.jsx)(o.Icon,{icon:"teams",size:20,color:!i&&!a&&Object(o.cssVariables)("neutral-6")||void 0}),l]})},emptyView:Object(m.jsx)(b,{children:te?Object(m.jsx)(o.Spinner,{}):M.formatMessage({id:"desk.team.teamSelect.dropdown.noResult"})}),className:k,onItemSelected:se,onChange:E,_css:(null==n?void 0:n.width)||"276px",_css2:"default"===(null==n?void 0:n.variant)&&Object(r.css)(["&:hover:enabled{svg{fill:",";}}"],Object(o.cssVariables)("purple-7"))})}},"/tXR":function(e,t){t.f=Object.getOwnPropertySymbols},"0WpP":function(e,t,n){var a=n("/F7N"),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},"22QX":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("3bBZ");var a=n("q1tI"),i=n("KqxG"),s=n("KQeT"),r=n("Y2WY");const o=(e,t=!1)=>{const n=Object(s.a)(),[{status:o,data:l},c]=Object(r.a)(()=>Object(i.fetchSDKUserByID)({appId:n,userId:e}),[n,e]);return Object(a.useEffect)(()=>{t&&c()},[c,t]),{loading:"loading"===o,userDetail:null==l?void 0:l.data}}},"2Oix":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,i.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))};var a,i=(a=n("YGjY"))&&a.__esModule?a:{default:a};e.exports=t.default},"2rMq":function(e,t,n){var a;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(a=function(){return s}.call(t,n,t,e))||(e.exports=a)}()},"2xqg":function(e,t,n){var a=n("UNi/"),i=n("EwQA"),s=n("Sxd8"),r=Math.min;e.exports=function(e,t){if((e=s(e))<1||e>9007199254740991)return[];var n=4294967295,o=r(e,4294967295);t=i(t),e-=4294967295;for(var l=a(o,t);++n<e;)t(n);return l}},"3+Ww":function(e,t){},"40oJ":function(e,t,n){var a=n("ixoo")("meta"),i=n("ekG2"),s=n("nA4W"),r=n("GhSp").f,o=0,l=Object.isExtensible||function(){return!0},c=!n("S4vA")((function(){return l(Object.preventExtensions({}))})),d=function(e){r(e,a,{value:{i:"O"+ ++o,w:{}}})},u=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,a)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[a].i},getWeak:function(e,t){if(!s(e,a)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[a].w},onFreeze:function(e){return c&&u.NEED&&l(e)&&!s(e,a)&&d(e),e}}},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"4YET":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));const a=e=>"number"==typeof e.participant_count,i=e=>"number"==typeof e.member_count},"4Zg2":function(e,t,n){var a=n("7whZ"),i=n("VSTI"),s=n("5ETA"),r=n("/NTb"),o=n("GhSp").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=s?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:r.f(e)})}},"4qC0":function(e,t,n){var a=n("NykK"),i=n("Z0cm"),s=n("ExA7");e.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&"[object String]"==a(e)}},"56W2":function(e,t,n){(function(t){var n;n=void 0!==t?t:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),a=n.length,i=-1,s="",r=n.charCodeAt(0);++i<a;)0!=(t=n.charCodeAt(i))?s+=t>=1&&t<=31||127==t||0==i&&t>=48&&t<=57||1==i&&t>=48&&t<=57&&45==r?"\\"+t.toString(16)+" ":0==i&&1==a&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?"\\"+n.charAt(i):n.charAt(i):s+="�";return s};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(n)}).call(this,n("yLpj"))},"5ETA":function(e,t){e.exports=!0},"5Qd4":function(e,t,n){var a=n("USwo");a(a.S+a.F,"Object",{assign:n("By1P")})},"5pjf":function(e,t,n){"use strict";(function(e){var a=n("q1tI"),i=n.n(a),s=n("17x9"),r=n.n(s),o=n("dAtF"),l=n.n(o),c=n("5HJ+"),d=n("PE4B"),u=n.n(d),p=n("EzpS"),g=n.n(p),h=n("apcR"),m=n.n(h),f=n("i8i4"),b=n.n(f),j=n("2rMq");function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?E(e):t}var M={flip:{padding:20},preventOverflow:{padding:10}},D={INIT:"init",IDLE:"idle",OPENING:"opening",OPEN:"open",CLOSING:"closing",ERROR:"error"},A=n.n(j).a.canUseDOM,N=void 0!==b.a.createPortal;function R(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function P(e){var t=e.title,n=e.data,a=e.warn,i=void 0!==a&&a,s=e.debug,r=void 0!==s&&s,o=i?console.warn||console.error:console.log;r&&t&&n&&(console.groupCollapsed("%creact-floater: ".concat(t),"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(n)?n.forEach((function(e){g.a.plainObject(e)&&e.key?o.apply(console,[e.key,e.value]):o.apply(console,[e])})):o.apply(console,[n]),console.groupEnd())}function L(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,a)}function F(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,n,a)}function U(){}var $=function(e){function t(e){var n;return y(this,t),n=I(this,w(t).call(this,e)),A?(n.node=document.createElement("div"),e.id&&(n.node.id=e.id),e.zIndex&&(n.node.style.zIndex=e.zIndex),document.body.appendChild(n.node),n):I(n)}return k(t,e),v(t,[{key:"componentDidMount",value:function(){A&&(N||this.renderPortal())}},{key:"componentDidUpdate",value:function(){A&&(N||this.renderPortal())}},{key:"componentWillUnmount",value:function(){A&&this.node&&(N||b.a.unmountComponentAtNode(this.node),document.body.removeChild(this.node))}},{key:"renderPortal",value:function(){if(!A)return null;var e=this.props,t=e.children,n=e.setRef;return N?b.a.createPortal(t,this.node):(n(b.a.unstable_renderSubtreeIntoContainer(this,t.length>1?i.a.createElement("div",null,t):t[0],this.node)),null)}},{key:"renderReact16",value:function(){var e=this.props,t=e.hasChildren,n=e.placement,a=e.target;return t||a||"center"===n?this.renderPortal():null}},{key:"render",value:function(){return N?this.renderReact16():null}}]),t}(i.a.Component);x($,"propTypes",{children:r.a.oneOfType([r.a.element,r.a.array]),hasChildren:r.a.bool,id:r.a.oneOfType([r.a.string,r.a.number]),placement:r.a.string,setRef:r.a.func.isRequired,target:r.a.oneOfType([r.a.object,r.a.string]),zIndex:r.a.number});var B=function(e){function t(){return y(this,t),I(this,w(t).apply(this,arguments))}return k(t,e),v(t,[{key:"render",value:function(){var e,t=this.props,n=t.placement,a=t.setArrowRef,s=t.styles.arrow,r=s.color,o=s.display,l=s.length,c=s.margin,d=s.position,u=s.spread,p={display:o,position:d},g=u,h=l;return n.startsWith("top")?(e="0,0 ".concat(g/2,",").concat(h," ").concat(g,",0"),p.bottom=0,p.marginLeft=c,p.marginRight=c):n.startsWith("bottom")?(e="".concat(g,",").concat(h," ").concat(g/2,",0 0,").concat(h),p.top=0,p.marginLeft=c,p.marginRight=c):n.startsWith("left")?(h=u,e="0,0 ".concat(g=l,",").concat(h/2," 0,").concat(h),p.right=0,p.marginTop=c,p.marginBottom=c):n.startsWith("right")&&(h=u,e="".concat(g=l,",").concat(h," ").concat(g,",0 0,").concat(h/2),p.left=0,p.marginTop=c,p.marginBottom=c),i.a.createElement("div",{className:"__floater__arrow",style:this.parentStyle},i.a.createElement("span",{ref:a,style:p},i.a.createElement("svg",{width:g,height:h,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("polygon",{points:e,fill:r}))))}},{key:"parentStyle",get:function(){var e=this.props,t=e.placement,n=e.styles.arrow.length,a={pointerEvents:"none",position:"absolute",width:"100%"};return t.startsWith("top")?(a.bottom=0,a.left=0,a.right=0,a.height=n):t.startsWith("bottom")?(a.left=0,a.right=0,a.top=0,a.height=n):t.startsWith("left")?(a.right=0,a.top=0,a.bottom=0):t.startsWith("right")&&(a.left=0,a.top=0),a}}]),t}(i.a.Component);x(B,"propTypes",{placement:r.a.string.isRequired,setArrowRef:r.a.func.isRequired,styles:r.a.object.isRequired});var V=function(e){var t=e.handleClick,n=e.styles,a=n.color,s=n.height,r=n.width,o=S(n,["color","height","width"]);return i.a.createElement("button",{"aria-label":"close",onClick:t,style:o,type:"button"},i.a.createElement("svg",{width:"".concat(r,"px"),height:"".concat(s,"px"),viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},i.a.createElement("g",null,i.a.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:a}))))};V.propTypes={handleClick:r.a.func.isRequired,styles:r.a.object.isRequired};var z=function(e){var t=e.content,n=e.footer,a=e.handleClick,s=e.open,r=e.positionWrapper,o=e.showCloseButton,l=e.title,c=e.styles,d={content:i.a.isValidElement(t)?t:i.a.createElement("div",{className:"__floater__content",style:c.content},t)};return l&&(d.title=i.a.isValidElement(l)?l:i.a.createElement("div",{className:"__floater__title",style:c.title},l)),n&&(d.footer=i.a.isValidElement(n)?n:i.a.createElement("div",{className:"__floater__footer",style:c.footer},n)),!o&&!r||g.a.boolean(s)||(d.close=i.a.createElement(V,{styles:c.close,handleClick:a})),i.a.createElement("div",{className:"__floater__container",style:c.container},d.close,d.title,d.content,d.footer)};z.propTypes={content:r.a.node.isRequired,footer:r.a.node,handleClick:r.a.func.isRequired,open:r.a.bool,positionWrapper:r.a.bool.isRequired,showCloseButton:r.a.bool.isRequired,styles:r.a.object.isRequired,title:r.a.node};var H=function(e){function t(){return y(this,t),I(this,w(t).apply(this,arguments))}return k(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.handleClick,a=e.hideArrow,s=e.setFloaterRef,r=e.status,o={},l=["__floater"];return t?i.a.isValidElement(t)?o.content=i.a.cloneElement(t,{closeFn:n}):o.content=t({closeFn:n}):o.content=i.a.createElement(z,this.props),r===D.OPEN&&l.push("__floater__open"),a||(o.arrow=i.a.createElement(B,this.props)),i.a.createElement("div",{ref:s,className:l.join(" "),style:this.style},i.a.createElement("div",{className:"__floater__body"},o.content,o.arrow))}},{key:"style",get:function(){var e=this.props,t=e.disableAnimation,n=e.component,a=e.placement,i=e.hideArrow,s=e.status,r=e.styles,o=r.arrow.length,l=r.floater,c=r.floaterCentered,d=r.floaterClosing,u=r.floaterOpening,p=r.floaterWithAnimation,g=r.floaterWithComponent,h={};return i||(a.startsWith("top")?h.padding="0 0 ".concat(o,"px"):a.startsWith("bottom")?h.padding="".concat(o,"px 0 0"):a.startsWith("left")?h.padding="0 ".concat(o,"px 0 0"):a.startsWith("right")&&(h.padding="0 0 0 ".concat(o,"px"))),-1!==[D.OPENING,D.OPEN].indexOf(s)&&(h=C({},h,{},u)),s===D.CLOSING&&(h=C({},h,{},d)),s!==D.OPEN||t||(h=C({},h,{},p)),"center"===a&&(h=C({},h,{},c)),n&&(h=C({},h,{},g)),C({},l,{},h)}}]),t}(i.a.Component);x(H,"propTypes",{component:r.a.oneOfType([r.a.func,r.a.element]),content:r.a.node,disableAnimation:r.a.bool.isRequired,footer:r.a.node,handleClick:r.a.func.isRequired,hideArrow:r.a.bool.isRequired,open:r.a.bool,placement:r.a.string.isRequired,positionWrapper:r.a.bool.isRequired,setArrowRef:r.a.func.isRequired,setFloaterRef:r.a.func.isRequired,showCloseButton:r.a.bool,status:r.a.string.isRequired,styles:r.a.object.isRequired,title:r.a.node});var q=function(e){function t(){return y(this,t),I(this,w(t).apply(this,arguments))}return k(t,e),v(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,a=t.handleClick,s=t.handleMouseEnter,r=t.handleMouseLeave,o=t.setChildRef,l=t.setWrapperRef,c=t.style,d=t.styles;if(n)if(1===i.a.Children.count(n))if(i.a.isValidElement(n)){var u=g.a.function(n.type)?"innerRef":"ref";e=i.a.cloneElement(i.a.Children.only(n),x({},u,o))}else e=i.a.createElement("span",null,n);else e=n;return e?i.a.createElement("span",{ref:l,style:C({},d,{},c),onClick:a,onMouseEnter:s,onMouseLeave:r},e):null}}]),t}(i.a.Component);x(q,"propTypes",{children:r.a.node,handleClick:r.a.func.isRequired,handleMouseEnter:r.a.func.isRequired,handleMouseLeave:r.a.func.isRequired,setChildRef:r.a.func.isRequired,setWrapperRef:r.a.func.isRequired,style:r.a.object,styles:r.a.object.isRequired});var G={zIndex:100};var W=["position","top","right","bottom","left"],K=function(t){function n(e){var t;return y(this,n),x(E(t=I(this,w(n).call(this,e))),"setArrowRef",(function(e){t.arrowRef=e})),x(E(t),"setChildRef",(function(e){t.childRef=e})),x(E(t),"setFloaterRef",(function(e){t.floaterRef||(t.floaterRef=e)})),x(E(t),"setWrapperRef",(function(e){t.wrapperRef=e})),x(E(t),"handleTransitionEnd",(function(){var e=t.state.status,n=t.props.callback;t.wrapperPopper&&t.wrapperPopper.instance.update(),t.setState({status:e===D.OPENING?D.OPEN:D.IDLE},(function(){var e=t.state.status;n(e===D.OPEN?"open":"close",t.props)}))})),x(E(t),"handleClick",(function(){var e=t.props,n=e.event,a=e.open;if(!g.a.boolean(a)){var i=t.state,s=i.positionWrapper,r=i.status;("click"===t.event||"hover"===t.event&&s)&&(P({title:"click",data:[{event:n,status:r===D.OPEN?"closing":"opening"}],debug:t.debug}),t.toggle())}})),x(E(t),"handleMouseEnter",(function(){var e=t.props,n=e.event,a=e.open;if(!g.a.boolean(a)&&!R()){var i=t.state.status;"hover"===t.event&&i===D.IDLE&&(P({title:"mouseEnter",data:[{key:"originalEvent",value:n}],debug:t.debug}),clearTimeout(t.eventDelayTimeout),t.toggle())}})),x(E(t),"handleMouseLeave",(function(){var e=t.props,n=e.event,a=e.eventDelay,i=e.open;if(!g.a.boolean(i)&&!R()){var s=t.state,r=s.status,o=s.positionWrapper;"hover"===t.event&&(P({title:"mouseLeave",data:[{key:"originalEvent",value:n}],debug:t.debug}),a?-1===[D.OPENING,D.OPEN].indexOf(r)||o||t.eventDelayTimeout||(t.eventDelayTimeout=setTimeout((function(){delete t.eventDelayTimeout,t.toggle()}),1e3*a)):t.toggle(D.IDLE))}})),t.state={currentPlacement:e.placement,positionWrapper:e.wrapperOptions.position&&!!e.target,status:D.INIT,statusWrapper:D.INIT},t._isMounted=!1,A&&window.addEventListener("load",(function(){t.popper&&t.popper.instance.update(),t.wrapperPopper&&t.wrapperPopper.instance.update()})),t}return k(n,t),v(n,[{key:"componentDidMount",value:function(){if(A){var e=this.state.positionWrapper,t=this.props,n=t.children,a=t.open,i=t.target;this._isMounted=!0,P({title:"init",data:{hasChildren:!!n,hasTarget:!!i,isControlled:g.a.boolean(a),positionWrapper:e,target:this.target,floater:this.floaterRef},debug:this.debug}),this.initPopper(),!n&&i&&g.a.boolean(a)}}},{key:"componentDidUpdate",value:function(e,t){if(A){var n,a=this.props,i=a.autoOpen,s=a.open,r=a.target,o=a.wrapperOptions,l=m()(t,this.state),c=l.changedFrom,d=l.changedTo;if(e.open!==s)g.a.boolean(s)&&(n=s?D.OPENING:D.CLOSING),this.toggle(n);e.wrapperOptions.position===o.position&&e.target===r||this.changeWrapperPosition(this.props),(d("status",D.IDLE)&&s||c("status",D.INIT,D.IDLE)&&i)&&this.toggle(D.OPEN),this.popper&&d("status",D.OPENING)&&this.popper.instance.update(),this.floaterRef&&(d("status",D.OPENING)||d("status",D.CLOSING))&&function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];L(e,t,a=function(i){n(i),F(e,t,a)},i)}(this.floaterRef,"transitionend",this.handleTransitionEnd)}}},{key:"componentWillUnmount",value:function(){A&&(this._isMounted=!1,this.popper&&this.popper.instance.destroy(),this.wrapperPopper&&this.wrapperPopper.instance.destroy())}},{key:"initPopper",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target,n=this.state.positionWrapper,a=this.props,i=a.disableFlip,s=a.getPopper,r=a.hideArrow,o=a.offset,l=a.placement,d=a.wrapperOptions,u="top"===l||"bottom"===l?"flip":["right","bottom-end","top-end","left","top-start","bottom-start"];if("center"===l)this.setState({status:D.IDLE});else if(t&&this.floaterRef){var p=this.options,h=p.arrow,m=p.flip,f=p.offset,b=S(p,["arrow","flip","offset"]);new c.a(t,this.floaterRef,{placement:l,modifiers:C({arrow:C({enabled:!r,element:this.arrowRef},h),flip:C({enabled:!i,behavior:u},m),offset:C({offset:"0, ".concat(o,"px")},f)},b),onCreate:function(t){e.popper=t,s(t,"floater"),e._isMounted&&e.setState({currentPlacement:t.placement,status:D.IDLE}),l!==t.placement&&setTimeout((function(){t.instance.update()}),1)},onUpdate:function(t){e.popper=t;var n=e.state.currentPlacement;e._isMounted&&t.placement!==n&&e.setState({currentPlacement:t.placement})}})}if(n){var j=g.a.undefined(d.offset)?0:d.offset;new c.a(this.target,this.wrapperRef,{placement:d.placement||l,modifiers:{arrow:{enabled:!1},offset:{offset:"0, ".concat(j,"px")},flip:{enabled:!1}},onCreate:function(t){e.wrapperPopper=t,e._isMounted&&e.setState({statusWrapper:D.IDLE}),s(t,"wrapper"),l!==t.placement&&setTimeout((function(){t.instance.update()}),1)}})}}},{key:"changeWrapperPosition",value:function(e){var t=e.target,n=e.wrapperOptions;this.setState({positionWrapper:n.position&&!!t})}},{key:"toggle",value:function(e){var t=this.state.status===D.OPEN?D.CLOSING:D.OPENING;g.a.undefined(e)||(t=e),this.setState({status:t})}},{key:"render",value:function(){var e=this.state,t=e.currentPlacement,n=e.positionWrapper,a=e.status,s=this.props,r=s.children,o=s.component,l=s.content,c=s.disableAnimation,d=s.footer,u=s.hideArrow,p=s.id,g=s.open,h=s.showCloseButton,m=s.style,f=s.target,b=s.title,j=i.a.createElement(q,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:m,styles:this.styles.wrapper},r),y={};return n?y.wrapperInPortal=j:y.wrapperAsChildren=j,i.a.createElement("span",null,i.a.createElement($,{hasChildren:!!r,id:p,placement:t,setRef:this.setFloaterRef,target:f,zIndex:this.styles.options.zIndex},i.a.createElement(H,{component:o,content:l,disableAnimation:c,footer:d,handleClick:this.handleClick,hideArrow:u||"center"===t,open:g,placement:t,positionWrapper:n,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:h,status:a,styles:this.styles,title:b}),y.wrapperInPortal),y.wrapperAsChildren)}},{key:"debug",get:function(){return this.props.debug||!!e.ReactFloaterDebug}},{key:"event",get:function(){var e=this.props,t=e.disableHoverToClick,n=e.event;return"hover"===n&&R()&&!t?"click":n}},{key:"options",get:function(){var e=this.props.options;return u()(M,e||{})}},{key:"styles",get:function(){var e,t=this,n=this.state,a=n.status,i=n.positionWrapper,s=n.statusWrapper,r=this.props.styles,o=u()(function(e){var t=u()(G,e.options||{});return{wrapper:{cursor:"help",display:"inline-flex",flexDirection:"column",zIndex:t.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:t.zIndex},floaterOpening:{opacity:1,visibility:"visible"},floaterWithAnimation:{opacity:1,transition:"opacity 0.3s, transform 0.2s",visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},floaterClosing:{opacity:0,visibility:"visible"},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},arrow:{color:"#fff",display:"inline-flex",length:16,margin:8,position:"absolute",spread:32},options:t}}(r),r);i&&(e=-1===[D.IDLE].indexOf(a)||-1===[D.IDLE].indexOf(s)?o.wrapperPosition:this.wrapperPopper.styles,o.wrapper=C({},o.wrapper,{},e));if(this.target){var l=window.getComputedStyle(this.target);this.wrapperStyles?o.wrapper=C({},o.wrapper,{},this.wrapperStyles):-1===["relative","static"].indexOf(l.position)&&(this.wrapperStyles={},i||(W.forEach((function(e){t.wrapperStyles[e]=l[e]})),o.wrapper=C({},o.wrapper,{},this.wrapperStyles),this.target.style.position="relative",this.target.style.top="auto",this.target.style.right="auto",this.target.style.bottom="auto",this.target.style.left="auto"))}return o}},{key:"target",get:function(){if(!A)return null;var e=this.props.target;return e?g.a.domElement(e)?e:document.querySelector(e):this.childRef||this.wrapperRef}}]),n}(i.a.Component);x(K,"propTypes",{autoOpen:r.a.bool,callback:r.a.func,children:r.a.node,component:l()(r.a.oneOfType([r.a.func,r.a.element]),(function(e){return!e.content})),content:l()(r.a.node,(function(e){return!e.component})),debug:r.a.bool,disableAnimation:r.a.bool,disableFlip:r.a.bool,disableHoverToClick:r.a.bool,event:r.a.oneOf(["hover","click"]),eventDelay:r.a.number,footer:r.a.node,getPopper:r.a.func,hideArrow:r.a.bool,id:r.a.oneOfType([r.a.string,r.a.number]),offset:r.a.number,open:r.a.bool,options:r.a.object,placement:r.a.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto","center"]),showCloseButton:r.a.bool,style:r.a.object,styles:r.a.object,target:r.a.oneOfType([r.a.object,r.a.string]),title:r.a.node,wrapperOptions:r.a.shape({offset:r.a.number,placement:r.a.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","auto"]),position:r.a.bool})}),x(K,"defaultProps",{autoOpen:!1,callback:U,debug:!1,disableAnimation:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,getPopper:U,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1}}),t.a=K}).call(this,n("yLpj"))},"5rLa":function(e,t,n){"use strict";var a=n("vOnD"),i=n("nKUr");const s=a.default.div.withConfig({displayName:"OrderComponent__OrderContainer",componentId:"sc-3bhy1k-0"})([""]);t.a=({id:e,children:t})=>Object(i.jsx)(s,{id:e,children:t})},"6JX1":function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=n(t);function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s={error:null},r=function(e){var t,n;function r(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).state=s,t.updatedWithError=!1,t.resetErrorBoundary=function(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];null==t.props.onReset||(e=t.props).onReset.apply(e,a),t.reset()},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r.getDerivedStateFromError=function(e){return{error:e}};var o=r.prototype;return o.reset=function(){this.updatedWithError=!1,this.setState(s)},o.componentDidCatch=function(e,t){var n,a;null==(n=(a=this.props).onError)||n.call(a,e,t)},o.componentDidMount=function(){null!==this.state.error&&(this.updatedWithError=!0)},o.componentDidUpdate=function(e){var t,n,a,i,s=this.state.error,r=this.props.resetKeys;null===s||this.updatedWithError?null!==s&&(void 0===(a=e.resetKeys)&&(a=[]),void 0===(i=r)&&(i=[]),a.length!==i.length||a.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(t=(n=this.props).onResetKeysChange)||t.call(n,e.resetKeys,r),this.reset()):this.updatedWithError=!0},o.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,i=t.FallbackComponent,s=t.fallback;if(null!==e){var r={error:e,resetErrorBoundary:this.resetErrorBoundary};if(a.isValidElement(s))return s;if("function"==typeof n)return n(r);if(i)return a.createElement(i,r);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(a.Component);e.ErrorBoundary=r,e.useErrorHandler=function(e){var t=a.useState(null),n=t[0],i=t[1];if(null!=e)throw e;if(null!=n)throw n;return i},e.withErrorBoundary=function(e,t){var n=function(n){return a.createElement(r,t,a.createElement(e,n))},i=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+i+")",n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n("q1tI"))},"6jRP":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"7YPn":function(e,t,n){var a,i,s;i=[],void 0===(s="function"==typeof(a=function(){var e=/(auto|scroll)/,t=function(e,n){return null===e.parentNode?n:t(e.parentNode,n.concat([e]))},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},a=function(t){return e.test(function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=t(e.parentNode,[]),i=0;i<n.length;i+=1)if(a(n[i]))return n[i];return document.scrollingElement||document.documentElement}}})?a.apply(t,i):a)||(e.exports=s)},"7hLt":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u}));var a=n("q1tI"),i=n("dDsW"),s=n("Q+E5"),r=n("UWC4");const o={advanced_analytics:"common.features.name.advanced_analytics",announcement:"common.features.name.announcement",auto_thumbnail:"common.features.name.auto_thumbnail",bot_interface:"common.features.name.bot_interface",daily_active_user:"common.features.name.daily_active_user",data_export:"common.features.name.data_export",delivery_receipt:"common.features.name.delivery_receipt",disappearing_messages:"common.features.name.disappearing_messages",domain_filter:"common.features.name.domain_filter",file_storage:"common.features.name.file_storage",image_moderation:"common.features.name.image_moderation",message_retrieval:"common.features.name.message_retrieval",message_search:"common.features.name.message_search",migration:"common.features.name.migration",moderation_tools:"common.features.name.moderation_tools",monthly_active_user:"common.features.name.monthly_active_user",peak_connection:"common.features.name.peak_connection",profanity_filter:"common.features.name.profanity_filter",supergroup:"common.features.name.supergroup",text_moderation:"common.features.name.text_moderation",translation_tools:"common.features.name.translation_tools",upload_traffic:"common.features.name.upload_traffic",webhook:"common.features.name.webhook"},l=()=>{const e=Object(i.a)(),{supergroupMemberLimit:t,isSupergroupSupportedByPlan:n}=Object(s.a)();return Object(a.useMemo)(()=>{if(n){const n=t?`${(t/1e3).toFixed(0)}K`:null;return n?e.formatMessage({id:"common.features.name.supergroupWithTier"},{tier:n}):e.formatMessage({id:o.supergroup})}return e.formatMessage({id:o.supergroup})},[e,n,t])},c=()=>{const e=Object(i.a)(),t=l();return Object(a.useCallback)(({featureKey:n,billingPlanItem:a})=>n===r.u.Supergroup?t:(o[n]?e.formatMessage({id:o[n]}):null==a?void 0:a.display_name)||n,[e,t])},d=({intl:e,usageField:t})=>{switch(t){case"message_search_index":return e.formatMessage({id:"common.features.usage.message_search.message_search_index.title"});case"message_search_query":return e.formatMessage({id:"common.features.usage.message_search.message_search_query.title"});default:return null}},u=()=>{const e=Object(i.a)(),t=c();return n=>{const{featureKey:a,usageField:i}=n,s=d({intl:e,usageField:i}),r=t({featureKey:a});return null!=s?s:r}}},"7hkf":function(e,t,n){"use strict";var a=n("q1tI"),i=n("dDsW"),s=n("vOnD"),r=n("JsuU"),o=n("hyLW"),l=n.n(o),c=n("Mfcq"),d=n("8hhJ"),u=n("UWC4"),p=n("kmMa"),g=n("Dx34"),h=n("nKUr");const m=s.default.img.withConfig({displayName:"OverageTooltip__OverageTooltipImage",componentId:"sc-18f438m-0"})(["margin:24px 0;"]),f=Object(s.default)(r.ContextualHelpContent.Body).withConfig({displayName:"OverageTooltip__OverageTooltipBody",componentId:"sc-18f438m-1"})(["strong{font-weight:600;}p + p{margin-top:16px;}"]);var b=n("S8/c"),j=n("wfeo"),y=n("ponP");const O=s.default.div.withConfig({displayName:"UsageDetailMonthlyQuota__MultipleFeatureDescription",componentId:"sc-1gyhaui-0"})(["display:initial;",";"],r.Body["body-short-01"]),v=s.default.div.withConfig({displayName:"UsageDetailMonthlyQuota__MultipleFeatureUsageName",componentId:"sc-1gyhaui-1"})(["display:block;",";"," + &{margin-top:16px;}"],r.Headings["heading-01"],O),x=e=>l()(e).format({thousandSeparated:!0,mantissa:0});var _=Object(s.default)(({className:e,placement:t="bottom"})=>{const n=Object(i.a)();return Object(h.jsx)(g.a,{className:e,content:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(r.ContextualHelpContent.Header,{children:n.formatMessage({id:"ui.usage.overage.title"})}),Object(h.jsx)(m,{src:`${u.n}/dashboard/img-overage.png`,srcSet:`${u.n}/dashboard/img-overage.png,\n  ${u.n}/dashboard/img-overage%402x.png 2x,\n  ${u.n}/dashboard/img-overage%403x.png 3x\n  `}),Object(h.jsxs)(f,{children:[Object(h.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:n.formatMessage({id:"ui.usage.overage.content.quota"},{strong:e=>Object(h.jsx)("strong",{children:e})})}),Object(h.jsx)("p",{children:n.formatMessage({id:"ui.usage.overage.content.limit"},{strong:e=>Object(h.jsx)("strong",{children:e}),a:e=>Object(h.jsx)(r.Link,{variant:r.LinkVariant.Inline,useReactRouter:!0,href:"/settings/contact_us?category=service_limit_increase",children:e})})})]})]}),tooltipContentStyle:Object(s.css)(["width:322px;"]),placement:t})}).withConfig({displayName:"UsageDetailMonthlyQuota___StyledOverageTooltip",componentId:"sc-1gyhaui-2"})(["display:inline-block;> div{display:inline-block;min-height:auto;min-width:auto;line-height:1;vertical-align:middle;svg{fill:",";}}"],e=>e._css);t.a=({quotas:e})=>{const t=Object(i.a)(),n=Object(p.a)(),s=Object(a.useCallback)(()=>{n({dialogTypes:c.a.Overage})},[n]),o=Object(a.useMemo)(()=>e.map(({usageField:n,quota:a,limit:i},o)=>{const l=u.kb.includes(n),c=e.length>1,p=l?Object(y.transformBytesToGigaByte)(a):a,g=x(p),m=l?Object(y.transformBytesToGigaByte)(i):i,f=x(m),{unit:b}=Object(j.d)({usageField:n}),C=b?t.formatMessage({id:b},{strong:()=>Object(h.jsx)(h.Fragment,{children:g}),value:parseInt(p.toString())}):null,k=b?t.formatMessage({id:b},{strong:()=>Object(h.jsx)(h.Fragment,{children:f}),value:parseInt(m.toString())}):null,w=t.formatMessage({id:"common.settings.usage.usageDetail.monthlyQuota.quotaAndLimit"},{quota:C,limit:k}),T=c?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{children:Object(d.a)({intl:t,usageField:n})}),Object(h.jsx)(O,{children:w})]}):w,S=e.length-1===o?[{type:"button",label:t.formatMessage({id:"common.settings.usage.usageDetail.monthlyQuota.button.overage"}),onClick:s}]:void 0;return{description:T,descriptionSuffix:Object(h.jsx)(_,{placement:"bottom-start",_css:Object(r.cssVariables)("content-2")}),actions:S}}),[s,t,e]);return Object(h.jsx)(b.a,{title:t.formatMessage({id:"common.settings.usage.usageDetail.monthlyQuota.title"}),contents:o,isMultipleContents:o.length>1})}},"7whZ":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"8fa4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return a[e]};var a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};e.exports=t.default},"8hhJ":function(e,t,n){"use strict";var a=n("7hLt");n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.d}))},"8tak":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("/MKj"),i=n("sPrd"),s=n("A6Uk");const r=()=>{const{uid:e}=Object(a.g)(e=>e.organizations.current),{flags:{deskFAQBot:t}}=Object(s.a)();return i.a.includes(e)||!!t}},"9/EM":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("/h9T"),i=n("/Tr7"),s=n("jIYg");function r(e,t){Object(s.a)(2,arguments);var n=Object(i.a)(e),r=Object(a.a)(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}},"9GiO":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return g}));var a=n("vOnD"),i=n("q1tI"),s=n("JsuU"),r=n("nKUr"),o=Object(a.default)("div").withConfig({displayName:"InfiniteScrollComponents___StyledDiv",componentId:"sc-16snuw8-0"})(["display:flex;align-items:center;justify-content:center;padding:32px;"]);const l=Object(i.forwardRef)((e,t)=>Object(r.jsx)(o,{ref:t,...e,children:Object(r.jsx)(s.Spinner,{size:20,stroke:Object(s.cssVariables)("neutral-9")})}));var c=Object(a.default)("div").withConfig({displayName:"InfiniteScrollComponents___StyledDiv2",componentId:"sc-16snuw8-1"})(["display:flex;flex-direction:column;align-items:center;padding:32px 0;text-align:center;color:",";",";button{margin-top:8px;}"],e=>e._css,e=>e._css2);const d=({children:e,onRetry:t,isRetrying:n,retryButtonLabel:a})=>Object(r.jsxs)(c,{role:"alert",_css:Object(s.cssVariables)("neutral-6"),_css2:s.Body["body-short-01"],children:[e,Object(r.jsx)(s.Button,{buttonType:"tertiary",size:"small",icon:"refresh",onClick:t,isLoading:n,disabled:n,children:a})]});var u=Object(a.default)("div").withConfig({displayName:"InfiniteScrollComponents___StyledDiv3",componentId:"sc-16snuw8-2"})(["display:flex;position:absolute;top:0;right:0;bottom:0;left:0;flex-direction:column;align-items:center;justify-content:center;padding:0 16px;"]),p=Object(a.default)(s.EmptyState).withConfig({displayName:"InfiniteScrollComponents___StyledEmptyState",componentId:"sc-16snuw8-3"})(["margin-bottom:16px;"]);const g=({icon:e,title:t,description:n,onRetry:a,isRetrying:i,retryButtonLabel:o})=>Object(r.jsxs)(u,{children:[Object(r.jsx)(p,{size:s.EmptyStateSize.Small,icon:e,title:t,description:n}),Object(r.jsx)(s.Button,{buttonType:"tertiary",size:"small",icon:"refresh",onClick:a,isLoading:i,disabled:i,children:o})]})},A9a0:function(e,t,n){var a=n("nA4W"),i=n("bKEA"),s=n("Oa1h")(!1),r=n("WpRT")("IE_PROTO");e.exports=function(e,t){var n,o=i(e),l=0,c=[];for(n in o)n!=r&&a(o,n)&&c.push(n);for(;t.length>l;)a(o,n=t[l++])&&(~s(c,n)||c.push(n));return c}},AuOK:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("JsuU"),i=n("hyLW"),s=n.n(i),r=n("UWC4"),o=n("ponP"),l=n("nKUr");const c=e=>s()(e).format({thousandSeparated:!0,mantissa:0}),d=({intl:e,isFreeTrial:t,limit:n,onLinkClick:i,unit:s})=>{if(t)return{warning:"You've almost reached your quota.",over:"You've exceeded your quota.",willStop:e.formatMessage({id:"common.usage.alerts.free.quota80"}),stopped:e.formatMessage({id:"common.usage.alerts.free.quota100"})};const d="gigabyte"===s?c(Object(o.transformBytesToGigaByte)(n))+r.pc:c(n),u=e=>Object(l.jsx)(a.Link,{variant:a.LinkVariant.Default,iconProps:{icon:"chevron-right",size:16},onClick:i,children:e});return{warning:e.formatMessage({id:"common.usage.alerts.warning"},{a:u}),over:e.formatMessage({id:"common.usage.alerts.over"},{limit:d,a:u}),willStop:e.formatMessage({id:"common.usage.alerts.willStop"},{limit:d,a:u}),stopped:e.formatMessage({id:"common.usage.alerts.stopped"},{limit:d})}}},AyUB:function(e,t,n){e.exports={default:n("vNbC"),__esModule:!0}},BRsN:function(e,t,n){var a=n("GhSp"),i=n("ENu8");e.exports=n("C61u")?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},BTlO:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n("q1tI"),i=n("dDsW"),s=n("vOnD"),r=n("JsuU"),o=n("Mfcq"),l=n("UWC4"),c=n("W7Pl"),d=n("6889"),u=n("AuOK"),p=n("E5lX"),g=n("wfeo"),h=n("ponP"),m=n("nKUr");const f=s.default.div.withConfig({displayName:"UsageColumnUsage__UsageWrapper",componentId:"sc-1barrcs-0"})(["margin-top:2px;margin-bottom:-6px;padding-right:24px;width:100%;display:flex;flex-direction:column;"]),b=s.default.strong.withConfig({displayName:"UsageColumnUsage__UsageValue",componentId:"sc-1barrcs-1"})(["",";color:",";"],r.Typography["label-02"],({$color:e})=>Object(r.cssVariables)(e||"content-1")),j=s.default.small.withConfig({displayName:"UsageColumnUsage__UsageValueWithUnit",componentId:"sc-1barrcs-2"})(["",";color:",";"],r.Typography["label-02"],({$color:e})=>Object(r.cssVariables)(e||"content-2")),y=({usageField:e,usageValue:t,unitType:n,availability:a})=>{const s=Object(i.a)(),r="gigabyte"===n?Object(h.transformBytesToGigaByte)(t):t,o=Object(h.getTransformedUsage)(r),{content:l}=Object(g.b)(a),c=a===p.a.available?void 0:l,{unit:d}=Object(g.d)({usageField:e}),u=d?s.formatMessage({id:d},{strong:()=>Object(m.jsx)(b,{$color:c,children:o}),value:parseInt(r.toString())}):null;return Object(m.jsx)(j,{$color:c,children:u})};var O=Object(s.default)(r.Link).withConfig({displayName:"UsageColumnUsage___StyledLink",componentId:"sc-1barrcs-3"})(["margin-left:80px;"]);const v=({record:{feature:e,usageData:t,isEnabled:n},subscription:p,skipUpgradeCheck:b=!1,showPercent:j=!0,showAlert:v=!0})=>{const x=Object(i.a)(),_=Object(c.W)(),C=Object(a.useCallback)(()=>{_({dialogTypes:o.a.Overage})},[_]);return n||b?e.trackable?Object(m.jsx)(f,{children:t.map(({usage:n,others:a,quota:i,limit:s,usageField:r})=>{const o=Object(h.isByteUsageFeature)(r)?"gigabyte":"",c=n+(null!=a?a:0),f=Object(g.a)(c,i,s);return Object(m.jsx)(d.yc,{unitType:o,variant:"mini",name:t.length>1?x.formatMessage({id:`common.features.usage.${e.key}.${r}.title`}):"",label:Object(m.jsx)(y,{usageField:r,usageValue:n,unitType:o,availability:f}),usage:n,others:a,usageField:r,quota:i,limit:s,showPercent:j,showAlert:v,showBarChartRange:!0,availabilityTooltips:Object(u.a)({intl:x,isFreeTrial:(null==p?void 0:p.subscription_name)===l.ac.FreeTrial,limit:s,unit:o,onLinkClick:C})},`usageItem_${r}`)})}):null:"SALES_CUSTOM"===(null==p?void 0:p.subscription_type)?Object(m.jsx)(r.ContextualHelp,{content:x.formatMessage({id:"common.settings.usage.usageTable.upgradePlan.tooltip"}),tooltipContentStyle:Object(s.css)(["width:256px;"]),placement:"top-start",popperProps:{modifiers:{offset:{offset:"-8, 10"}}},children:Object(m.jsx)(r.Link,{disabled:!0,children:x.formatMessage({id:"common.settings.usage.usageTable.upgradePlan.button"})})}):Object(m.jsx)(O,{href:"/settings/general",useReactRouter:!0,children:x.formatMessage({id:"common.settings.usage.usageTable.upgradePlan.button"})})}},BYGL:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("q1tI"),i=n("dDsW"),s=n("vOnD"),r=n("JsuU"),o=n("hyLW"),l=n.n(o),c=n("Mfcq"),d=n("UWC4"),u=n("W7Pl"),p=n("ponP"),g=n("6889"),h=n("nKUr");const m=e=>l()(e).format({thousandSeparated:!0,mantissa:0});var f=Object(s.default)(r.InlineNotification).withConfig({displayName:"QuotaNotification___StyledInlineNotification",componentId:"cz670s-0"})(["a{text-decoration:underline;color:",";svg{fill:",";}&:hover{color:",";svg{fill:",";}}}"],e=>e._css,e=>e._css2,e=>e._css3,e=>e._css4);const b=Object(s.default)(({isFreeTrial:e,usage:t,quota:n,limit:s,unit:o,className:l})=>{const b=Object(i.a)(),j=Object(u.W)(),y=t/n*100,O=t/s*100,v=Object(a.useCallback)(()=>{j({dialogTypes:c.a.Overage})},[j]),x="gigabyte"===o?`${m(Object(p.transformBytesToGigaByte)(s))}${d.pc}`:m(s),_=Object(a.useCallback)(e=>Object(h.jsx)(g.s,{onClick:v,children:e}),[v]),C=Object(a.useMemo)(()=>{if(e){if(y>=100)return b.formatMessage({id:"common.usage.alerts.free.quota100"});if(y>=80)return b.formatMessage({id:"common.usage.alerts.free.quota80"})}return O>=100?b.formatMessage({id:"common.usage.alerts.stopped"},{limit:x}):O>=80?b.formatMessage({id:"common.usage.alerts.willStop"},{limit:x,a:_}):y>=100?b.formatMessage({id:"common.usage.alerts.over"},{limit:x,a:_}):y>=80?b.formatMessage({id:"common.usage.alerts.warning"},{a:_}):void 0},[x,b,e,O,_,y]);return C?Object(h.jsx)(f,{className:`${l} usageDetailNotification`,type:e&&y>=100||O>=100?"error":"warning",message:C,"data-test-id":"QuotaNotification",_css:Object(r.cssVariables)("content-1"),_css2:Object(r.cssVariables)("content-1"),_css3:Object(r.cssVariables)("content-1"),_css4:Object(r.cssVariables)("content-1")}):null}).withConfig({displayName:"QuotaNotification",componentId:"cz670s-1"})([""])},BfU5:function(e,t,n){var a=n("ekG2"),i=n("7whZ").document,s=a(i)&&a(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},BqxD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("A6Uk"),i=n("toZZ");const s=()=>{const{flags:e}=Object(a.a)();return"ee9b3f533bfe608437efe3cb023124f7af5d57e1"===Object(i.b)(e=>e.organizations.current.uid)||e.ncsoft}},By1P:function(e,t,n){"use strict";var a=n("C61u"),i=n("mHY4"),s=n("/tXR"),r=n("GRew"),o=n("CYMq"),l=n("n7vu"),c=Object.assign;e.exports=!c||n("S4vA")((function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=a}))?function(e,t){for(var n=o(e),c=arguments.length,d=1,u=s.f,p=r.f;c>d;)for(var g,h=l(arguments[d++]),m=u?i(h).concat(u(h)):i(h),f=m.length,b=0;f>b;)g=m[b++],a&&!p.call(h,g)||(n[g]=h[g]);return n}:c},ByFW:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("dDsW"),i=n("vOnD"),s=n("JsuU"),r=n("nKUr");const o=i.default.div.withConfig({displayName:"NoPlanError__Container",componentId:"aqi5y3-0"})(["width:640px;text-align:center;*{text-align:inherit;}"]),l=i.default.h5.withConfig({displayName:"NoPlanError__Title",componentId:"aqi5y3-1"})(["",";color:",";margin-top:12px;padding:0 32px;"],s.Subtitles["subtitle-03"],Object(s.cssVariables)("neutral-7")),c=i.default.p.withConfig({displayName:"NoPlanError__Description",componentId:"aqi5y3-2"})(["",";color:",";margin-top:4px;white-space:pre-line;"],s.Body["body-short-01"],Object(s.cssVariables)("neutral-7")),d=i.default.div.withConfig({displayName:"NoPlanError__ErrorType",componentId:"aqi5y3-3"})(["width:100%;border:1px solid ",";border-radius:4px;padding:24px 0;margin-top:24px;"],Object(s.cssVariables)("neutral-3")),u=i.default.h6.withConfig({displayName:"NoPlanError__ErrorTypeLabel",componentId:"aqi5y3-4"})(["",";color:",";"],s.Headings["heading-01"],Object(s.cssVariables)("neutral-6")),p=i.default.p.withConfig({displayName:"NoPlanError__ErrorTypeDescription",componentId:"aqi5y3-5"})(["",";color:",";margin-top:2px;"],s.Subtitles["subtitle-01"],Object(s.cssVariables)("neutral-6")),g=({className:e})=>{const t=Object(a.a)();return Object(r.jsxs)(o,{className:e,children:[Object(r.jsx)(s.Icon,{icon:"error",size:80,color:Object(s.cssVariables)("neutral-5")}),Object(r.jsx)(l,{children:t.formatMessage({id:"common.noPlanError.title"})}),Object(r.jsx)(c,{children:t.formatMessage({id:"common.noPlanError.description"},{a:e=>Object(r.jsx)(s.Link,{variant:s.LinkVariant.Inline,useReactRouter:!0,href:"/settings/contact_us",children:e})})}),Object(r.jsxs)(d,{children:[Object(r.jsx)(u,{children:t.formatMessage({id:"common.noPlanError.errorTypeLabel"})}),Object(r.jsx)(p,{children:t.formatMessage({id:"common.noPlanError.errorTypeDescription"})})]})]})}},C5kU:function(e,t,n){"use strict";var a=n("GfoU")(!0);n("OTpG")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=a(t,n),this._i+=e.length,{value:e,done:!1})}))},C61u:function(e,t,n){e.exports=!n("S4vA")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},CYMq:function(e,t,n){var a=n("yQFZ");e.exports=function(e){return Object(a(e))}},CuL1:function(e,t,n){var a=n("mHY4"),i=n("/tXR"),s=n("GRew");e.exports=function(e){var t=a(e),n=i.f;if(n)for(var r,o=n(e),l=s.f,c=0;o.length>c;)l.call(e,r=o[c++])&&t.push(r);return t}},DrT7:function(e,t,n){var a=n("ekG2"),i=n("d+lc"),s=function(e,t){if(i(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{(a=n("nAx8")(Function.call,n("TSC6").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:s}},E0u0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(n("QDlc")),s=a(n("MgzW")),r=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function o(e){return null==e}var l=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){o(e.which)&&(e.which=o(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,a=void 0,i=void 0,s=t.wheelDelta,r=t.axis,o=t.wheelDeltaY,l=t.wheelDeltaX,c=t.detail;s&&(i=s/120),c&&(i=0-(c%3==0?c/3:c)),void 0!==r&&(r===e.HORIZONTAL_AXIS?(a=0,n=0-i):r===e.VERTICAL_AXIS&&(n=0,a=i)),void 0!==o&&(a=o/120),void 0!==l&&(n=-1*l/120),n||a||(a=i),void 0!==n&&(e.deltaX=n),void 0!==a&&(e.deltaY=a),void 0!==i&&(e.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,a=void 0,i=void 0,s=e.target,r=t.button;return s&&o(e.pageX)&&!o(t.clientX)&&(a=(n=s.ownerDocument||document).documentElement,i=n.body,e.pageX=t.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===s?e.toElement:e.fromElement),e}}];function c(){return!0}function d(){return!1}function u(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;i.default.call(this),this.nativeEvent=e;var a=d;"defaultPrevented"in e?a=e.defaultPrevented?c:d:"getPreventDefault"in e?a=e.getPreventDefault()?c:d:"returnValue"in e&&(a=!1===e.returnValue?c:d),this.isDefaultPrevented=a;var s=[],o=void 0,u=void 0,p=r.concat();for(l.forEach((function(e){t.match(e.reg)&&(p=p.concat(e.props),e.fix&&s.push(e.fix))})),o=p.length;o;)this[u=p[--o]]=e[u];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),o=s.length;o;)(0,s[--o])(this,e);this.timeStamp=e.timeStamp||Date.now()}var p=i.default.prototype;(0,s.default)(u.prototype,p,{constructor:u,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,p.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,p.stopPropagation.call(this)}}),t.default=u,e.exports=t.default},EE1x:function(e,t,n){"use strict";const a=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",r=`\n(?:\n(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${s}:){6}(?:${i}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${s}:){5}(?::${i}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${s}:){4}(?:(?::${s}){0,1}:${i}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${s}:){3}(?:(?::${s}){0,2}:${i}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${s}:){2}(?:(?::${s}){0,3}:${i}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${s}:){1}(?:(?::${s}){0,4}:${i}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${s}){0,5}:${i}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${i}$)|(?:^${r}$)`),l=new RegExp(`^${i}$`),c=new RegExp(`^${r}$`),d=e=>e&&e.exact?o:new RegExp(`(?:${a(e)}${i}${a(e)})|(?:${a(e)}${r}${a(e)})`,"g");d.v4=e=>e&&e.exact?l:new RegExp(`${a(e)}${i}${a(e)}`,"g"),d.v6=e=>e&&e.exact?c:new RegExp(`${a(e)}${r}${a(e)}`,"g"),e.exports=d},EJiy:function(e,t,n){"use strict";t.__esModule=!0;var a=r(n("F+2o")),i=r(n("+JPL")),s="function"==typeof i.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function r(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===s(a.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":s(e)}},ENu8:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},ETJ2:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-chatbot-interface/2963"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("h4",null,"[Formula]"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"Active chatbot usage = (number of active chatbot) ","*"," (active days per chatbot)")),Object(a.a)("p",null,"Takes the number of active chatbot integrated over the course of the month.\nThen, counts how many day(s) each integrated chatbot stayed active within the month."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following is an example of usage calculation for active chatbot at an application level."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"Usage for January 1 - 31:"),"\nJanuary 1: integrated 1 chatbot (active for 31days)\nJanuary 10: integrated 2 chatbot (active for 22days)\nJanuary 15: integrated 1 chatbot (active for 17days)")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"active chatbot")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"(1 ",Object(a.a)("em",{parentName:"p"}," 31) + (2 ")," (31-9)) + (1 ","*"," (31-14))\n= (31) + (44) + (17)\n= ",Object(a.a)("strong",{parentName:"p"},"92 active chatbot")))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all active chatbot usage in Sendbird server across all existing applications within the organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nactive chatbot usage for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A :")," 40 active chatbots\n",Object(a.a)("strong",{parentName:"p"},"App B :")," 100 active chatbots\n",Object(a.a)("strong",{parentName:"p"},"App C :")," 20 active chatbots")),Object(a.a)("p",null,"Then, organization’s ",Object(a.a)("strong",{parentName:"p"},"active chatbot")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"40 + 100 + 20 = ",Object(a.a)("strong",{parentName:"p"},"160 active chatbots")))))}l.isMDXComponent=!0},EwQA:function(e,t,n){var a=n("zZ0H");e.exports=function(e){return"function"==typeof e?e:a}},EzpS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getObjectType=function(e){return Object.prototype.toString.call(e).slice(8,-1)};var a=function(e){return function(n){return t.getObjectType(n)===e}},i=function(e){return function(t){return typeof t===e}},s=function(e){switch(e){case null:return"null";case!0:case!1:return"boolean"}switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"bigint":return"bigint";case"symbol":return"symbol"}if(s.array(e))return"Array";if(s.function(e))return"Function";var n=t.getObjectType(e);return n||"Object"};s.array=Array.isArray,s.arrayOf=function(e,t){return!(!s.array(e)&&!s.function(t))&&e.every((function(e){return t(e)}))},s.asyncFunction=a("AsyncFunction"),s.boolean=function(e){return!0===e||!1===e},s.date=a("Date"),s.defined=function(e){return!s.undefined(e)},s.domElement=function(e){return s.object(e)&&!s.plainObject(e)&&1===e.nodeType&&s.string(e.nodeName)&&["innerHTML","ownerDocument","style","attributes","nodeValue"].every((function(t){return t in e}))},s.empty=function(e){return s.string(e)&&0===e.length||s.array(e)&&0===e.length||s.object(e)&&!s.map(e)&&!s.set(e)&&0===Object.keys(e).length||s.set(e)&&0===e.size||s.map(e)&&0===e.size},s.error=a("Error"),s.function=a("Function"),s.generator=function(e){return s.iterable(e)&&s.function(e.next)&&s.function(e.throw)},s.generatorFunction=a("GeneratorFunction"),s.instanceOf=function(e,t){return!(!e||!t)&&Object.getPrototypeOf(e)===t.prototype},s.iterable=function(e){return!s.nullOrUndefined(e)&&s.function(e[Symbol.iterator])},s.map=a("Map"),s.nan=function(e){return Number.isNaN(e)},s.null=function(e){return null===e},s.nullOrUndefined=function(e){return s.null(e)||s.undefined(e)},s.number=function(e){return i("number")(e)&&!s.nan(e)},s.numericString=function(e){return s.string(e)&&e.length>0&&!Number.isNaN(Number(e))},s.object=function(e){return!s.nullOrUndefined(e)&&(s.function(e)||"object"==typeof e)},s.oneOf=function(e,t){return!!s.array(e)&&e.indexOf(t)>-1},s.plainObject=function(e){if("Object"!==t.getObjectType(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.getPrototypeOf({})},s.promise=a("Promise"),s.propertyOf=function(e,t,n){if(!s.object(e)||!t)return!1;var a=e[t];return s.function(n)?n(a):s.defined(a)},s.regexp=a("RegExp"),s.set=a("Set"),s.string=i("string"),s.symbol=i("symbol"),s.undefined=i("undefined"),s.weakMap=a("WeakMap"),s.weakSet=a("WeakSet"),t.default=s},"F+2o":function(e,t,n){e.exports={default:n("UR8F"),__esModule:!0}},FYw3:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("EJiy"),s=(a=i)&&a.__esModule?a:{default:a};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,s.default)(t))&&"function"!=typeof t?e:t}},FZoo:function(e,t,n){var a=n("MrPd"),i=n("4uTw"),s=n("wJg7"),r=n("GoyQ"),o=n("9Nap");e.exports=function(e,t,n,l){if(!r(e))return e;for(var c=-1,d=(t=i(t,e)).length,u=d-1,p=e;null!=p&&++c<d;){var g=o(t[c]),h=n;if("__proto__"===g||"constructor"===g||"prototype"===g)return e;if(c!=u){var m=p[g];void 0===(h=l?l(m,g,p):void 0)&&(h=r(m)?m:s(t[c+1])?[]:{})}a(p,g,h),p=p[g]}return e}},FfPP:function(e,t,n){var a=n("idmN"),i=n("hgQt");e.exports=function(e,t){return a(e,t,(function(t,n){return i(e,n)}))}},FgkJ:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},GDZC:function(e,t,n){var a=n("bKEA"),i=n("ZDin").f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return r&&"[object Window]"==s.call(e)?function(e){try{return i(e)}catch(e){return r.slice()}}(e):i(a(e))}},GRew:function(e,t){t.f={}.propertyIsEnumerable},GfoU:function(e,t,n){var a=n("/F7N"),i=n("yQFZ");e.exports=function(e){return function(t,n){var s,r,o=String(i(t)),l=a(n),c=o.length;return l<0||l>=c?e?"":void 0:(s=o.charCodeAt(l))<55296||s>56319||l+1===c||(r=o.charCodeAt(l+1))<56320||r>57343?e?o.charAt(l):s:e?o.slice(l,l+2):r-56320+(s-55296<<10)+65536}}},GhSp:function(e,t,n){var a=n("d+lc"),i=n("+vXQ"),s=n("M5dz"),r=Object.defineProperty;t.f=n("C61u")?Object.defineProperty:function(e,t,n){if(a(e),t=s(t,!0),a(n),i)try{return r(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],a=t[1];return 3*(n+a)/4-a},t.toByteArray=function(e){for(var t,n=c(e),a=n[0],r=n[1],o=new s(function(e,t,n){return 3*(t+n)/4-n}(0,a,r)),l=0,d=r>0?a-4:a,u=0;u<d;u+=4)t=i[e.charCodeAt(u)]<<18|i[e.charCodeAt(u+1)]<<12|i[e.charCodeAt(u+2)]<<6|i[e.charCodeAt(u+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=255&t;2===r&&(t=i[e.charCodeAt(u)]<<2|i[e.charCodeAt(u+1)]>>4,o[l++]=255&t);1===r&&(t=i[e.charCodeAt(u)]<<10|i[e.charCodeAt(u+1)]<<4|i[e.charCodeAt(u+2)]>>2,o[l++]=t>>8&255,o[l++]=255&t);return o},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],r=0,o=n-i;r<o;r+=16383)s.push(d(e,r,r+16383>o?o:r+16383));1===i?(t=e[n-1],s.push(a[t>>2]+a[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return s.join("")};for(var a=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=r.length;o<l;++o)a[o]=r[o],i[r.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,s,r=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(a[(s=i)>>18&63]+a[s>>12&63]+a[s>>6&63]+a[63&s]);return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},HX2K:function(e,t,n){e.exports=function(e){var t=e.helpers,a=n("wU0g")(e);function i(e){var t=!1,n=e.filter((function(e){switch(e){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return t=!0,!1;default:return!0}}));return t&&-1===n.indexOf("mousemove")&&n.push("mousemove"),n}return{dispatcher:function(e){var n=this.annotation,s=a.elements(this),r=t.getRelativePosition(e,this.chart),o=a.getNearestItems(s,r),l=i(n.options.events),c=n.options.dblClickSpeed,d=[],u=a.getEventHandlerName(e.type),p=(o||{}).options;if("mousemove"===e.type&&(o&&!o.hovering?["mouseenter","mouseover"].forEach((function(t){var n=a.getEventHandlerName(t),i=a.createMouseEvent(t,e);o.hovering=!0,"function"==typeof p[n]&&d.push([p[n],i,o])})):o||s.forEach((function(t){if(t.hovering){t.hovering=!1;var n=t.options;["mouseout","mouseleave"].forEach((function(i){var s=a.getEventHandlerName(i),r=a.createMouseEvent(i,e);"function"==typeof n[s]&&d.push([n[s],r,t])}))}}))),o&&l.indexOf("dblclick")>-1&&"function"==typeof p.onDblclick){if("click"===e.type&&"function"==typeof p.onClick)return clearTimeout(o.clickTimeout),o.clickTimeout=setTimeout((function(){delete o.clickTimeout,p.onClick.call(o,e)}),c),e.stopImmediatePropagation(),void e.preventDefault();"dblclick"===e.type&&o.clickTimeout&&(clearTimeout(o.clickTimeout),delete o.clickTimeout)}o&&"function"==typeof p[u]&&0===d.length&&d.push([p[u],e,o]),d.length>0&&(e.stopImmediatePropagation(),e.preventDefault(),d.forEach((function(e){e[0].call(e[2],e[1])})))},collapseHoverEvents:i}}},HyFC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=t||{},a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}},e.exports=t.default},"I+LG":function(e,t,n){var a=n("JC6p");e.exports=function(e,t,n,i){return a(e,(function(e,a,s){t(i,n(e),a,s)})),i}},IogR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("qxEb")),i=l(n("szUW")),s=l(n("8fa4")),r=l(n("Siog")),o=l(n("t6IN"));function l(e){return e&&e.__esModule?e:{default:e}}var c={code:"en-US",formatDistance:a.default,formatLong:i.default,formatRelative:s.default,localize:r.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.default=c,e.exports=t.default},"J/PD":function(e,t,n){var a=n("cvCv"),i=n("Q62E"),s=n("zZ0H"),r=Object.prototype.toString,o=i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=r.call(t)),e[t]=n}),a(s));e.exports=o},J2m7:function(e,t,n){var a=n("XKAG")(n("UfWW"));e.exports=a},JD84:function(e,t,n){var a=n("SKAX");e.exports=function(e,t,n,i){return a(e,(function(e,a,s){t(i,e,n(e),s)})),i}},JELi:function(e,t,n){var a=n("KwMD"),i=n("ut/Y"),s=n("Sxd8"),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=s(n),c=n<0?r(l+c,0):o(c,l-1)),a(e,i(t,3),c,!0)}},JZM8:function(e,t,n){var a=n("FfPP"),i=n("xs/l")((function(e,t){return null==e?{}:a(e,t)}));e.exports=i},Jt1Q:function(e,t,n){"use strict";var a=n("b08l"),i=n("ENu8"),s=n("kvAF"),r={};n("BRsN")(r,n("zBWt")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=a(r,{next:i(1,n)}),s(e,t+" Iterator")}},K63Y:function(e,t,n){"use strict";n.r(t);n("3bBZ");var a=n("q1tI"),i=n.n(a),s=n("Ty5D"),r=n("vOnD"),o=n("JsuU"),l=n("f0Wu"),c=n.n(l),d=n("RXaK"),u=n("P5lD"),p=n("Xvkt"),g=n("brpS"),h=n("ByFW"),m=n("ABjw"),f=n("UWC4"),b=n("/MKj"),j=n("b2r9"),y=(n("UxlC"),n("wMS7")),O=n("W6Aa"),v=n("V9qv"),x=n("bw7j"),_=n("Co3+"),C=n("sGiN");const k=b.g,w=()=>{const e=Object(s.k)(),t=Object(b.f)(),{pathname:n,search:i}=Object(s.l)(),r=k(e=>e.desk.isFetching),l=k(e=>e.desk.authenticated),c=k(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),{fallbackMenuPath:d}=Object(v.b)(),{preparingFeatures:u}=Object(x.a)(),p=Object(_.a)(),g=Object(a.useRef)(!0);return Object(a.useEffect)(()=>{u||!c||p||(n.startsWith(`/${c}/desk/settings`)?e.replace(d||"/"):(o.toast.warning({message:C.t}),e.replace("/")))},[c,d,e,p,n,u]),Object(a.useEffect)(()=>{Object(O.d)()?!g.current||l||r||t(j.d.deskAuthenticationRequest({match:Object(y.sanitize)(`${n}${i}`)})):"/auth/signin"!==n&&e.push("/"===n?"/auth/signin":`/auth/signin?next=${Object(y.sanitize)(location.pathname)}`)}),Object(a.useEffect)(()=>{g.current&&(g.current=!1)},[]),l};var T=n("sPrd"),S=n("8ZPm"),E=n("dDsW"),I=n("50DI"),M=n.n(I),D=n("Tqso"),A=n("Mfcq"),N=n("KYdE"),R=n("4GuE"),P=n("W7Pl"),L=n("NuuC"),F=n("kmMa");const U=e=>{const t=Object(F.a)(),{onSuccess:n,onDialogClose:i}=e,s=Object(a.useCallback)((e,a)=>{t({dialogTypes:A.a.AgentActivationStatusChange,dialogProps:{agentId:e.id,fromStatus:e.status,toStatus:f.c.ACTIVE,onSuccess:n,onDialogClose:i,...a}})},[i,n,t]),r=Object(a.useCallback)((e,a)=>{t({dialogTypes:A.a.AgentActivationStatusChange,dialogProps:{agentId:e.id,fromStatus:e.status,toStatus:f.c.INACTIVE,onSuccess:n,onDialogClose:i,...a}})},[i,n,t]),l=(({onSuccess:e})=>{const t=Object(E.a)(),{pid:n,region:i}=Object(L.a)(),[s,r]=Object(a.useState)(!1),[{data:l,error:c,status:d},u]=Object(P.g)(e=>(r(!0),D.g.updateAgentStatus(n,i,{status:f.c.PAUSED,agentId:e})),[n,i]);return Object(a.useEffect)(()=>{if(s&&"success"===d&&l)return o.toast.success({message:t.formatMessage({id:"desk.agent.status.update.toast.success"})}),null==e||e(l.data),void r(!1)},[l,c,t,s,e,d]),Object(a.useEffect)(()=>{if(s&&"error"===d)return o.toast.error({message:t.formatMessage({id:"desk.agent.status.update.toast.fail"})}),void r(!1)},[l,t,s,d]),Object(a.useCallback)(e=>u(e.id),[u])})(Object(a.useMemo)(()=>({onSuccess:n}),[n]));return Object(a.useCallback)((e,t,n)=>{switch(t){case f.c.PAUSED:return l(e);case f.c.ACTIVE:return s(e,n);case f.c.INACTIVE:return r(e,n);default:return}},[s,r,l])};var $=n("y7Tk"),B=n("Y/nA"),V=n("6889"),z=n("2Z9k"),H=n("ponP"),q=n("jLJY"),G=n("X38P"),W=n("nKUr");const K=r.default.span.withConfig({displayName:"AgentGroupsTreeSelect__AllAgentGroupsText",componentId:"r8ttke-0"})(["display:flex;align-items:center;padding-left:8px;height:30px;font-size:14px;font-weight:500;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),Y=r.default.div.withConfig({displayName:"AgentGroupsTreeSelect__PrefixItem",componentId:"r8ttke-1"})(["position:relative;display:flex;align-items:center;justify-content:space-between;height:48px;padding:14px 16px;border-bottom:1px solid ",";color:",";cursor:pointer;"," white-space:nowrap;"],Object(o.cssVariables)("neutral-3"),({isChecked:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),Q=Object(a.memo)(({selectedAgentGroupIds:e,width:t,disabled:n,onSelect:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)([]),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(!1),f=Object(a.useCallback)(async()=>{g(!0);try{const{data:{results:e}}=await D.g.fetchAgentGroups(r,l,{offset:0,limit:100});u(e)}catch(e){o.toast.error({message:c(e)})}finally{g(!1)}},[c,r,l]);Object(a.useEffect)(()=>{f()},[f]),Object(a.useEffect)(()=>{0!==e.length&&d.length!==e.length||m(!0)},[d.length,e.length]);const b=Object(a.useCallback)((e,t)=>{0===e.length||t?i([]):i(e),m(t)},[i]),j=d.map(e=>({value:e.id.toString(),label:e.name})),y=j.filter(t=>e.includes(Number(t.value)));return Object(W.jsx)(o.TreeSelect,{treeData:j,selectedNodes:y.length>0?y:j,width:t,disabled:p||n,prefixItem:Object(W.jsxs)(Y,{isChecked:h,onClick:()=>{if(h)return i([{value:d[0].id.toString(),label:d[0].name}]),void m(!1);i([]),m(!0)},children:[s.formatMessage({id:"desk.agents.filter.agentGroups.all"}),h&&Object(W.jsx)(o.Icon,{icon:"done",size:20,color:Object(o.cssVariables)("purple-7")})]}),toggleRenderer:0===e.length?()=>Object(W.jsx)(K,{children:s.formatMessage({id:"desk.agents.filter.agentGroups.all"})}):void 0,onSelect:b})}),J=r.default.div.withConfig({displayName:"AgentListFilters__AgentFilters",componentId:"c38dfs-0"})(["display:flex;align-items:flex-start;margin-top:26px;"]),X=r.default.span.withConfig({displayName:"AgentListFilters__AllAgentTypesText",componentId:"c38dfs-1"})(["display:flex;align-items:center;padding-left:8px;height:30px;font-size:14px;font-weight:500;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),Z=r.default.div.withConfig({displayName:"AgentListFilters__Divider",componentId:"c38dfs-2"})(["width:1px;height:32px;background:",";margin:0 8px;"],Object(o.cssVariables)("neutral-3")),ee=r.default.div.withConfig({displayName:"AgentListFilters__PrefixItem",componentId:"c38dfs-3"})(["position:relative;display:flex;align-items:center;justify-content:space-between;height:48px;padding:14px 16px;border-bottom:1px solid ",";color:",";cursor:pointer;"," white-space:nowrap;"],Object(o.cssVariables)("neutral-3"),({isChecked:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),te=[{labelKey:"desk.agents.filter.status.all",value:"ALL"},{labelKey:"desk.agents.filter.status.online",value:f.d.ONLINE},{labelKey:"desk.agents.filter.status.away",value:f.d.AWAY},{labelKey:"desk.agents.filter.status.offline",value:f.d.OFFLINE}],ne={[f.g.INTERMEDIATE]:"desk.agent.tier.intermediate",[f.g.EXPERT]:"desk.agent.tier.expert"},ae=[{labelKey:"desk.agents.list.tier.all",value:void 0},{labelKey:ne.INTERMEDIATE,value:f.g.INTERMEDIATE},{labelKey:ne.EXPERT,value:f.g.EXPERT}],ie=[{labelKey:"desk.agents.filter.activationStatus.all",value:void 0},{labelKey:"desk.agents.filter.activationStatus.active",value:f.c.ACTIVE},{labelKey:"desk.agents.filter.activationStatus.inactive",value:f.c.INACTIVE},{labelKey:"desk.agents.filter.activationStatus.pending",value:f.c.PENDING},{labelKey:"desk.agents.filter.activationStatus.paused",value:f.c.PAUSED}];var se;!function(e){e.ALL="all",e.ADMIN="admin",e.AGENT="agent",e.BOT="bot"}(se||(se={}));const re=[{value:se.ADMIN,labelKey:"desk.agents.filter.agentType.admin"},{value:se.AGENT,labelKey:"desk.agents.filter.agentType.agent"},{value:se.BOT,labelKey:"desk.agents.filter.agentType.bot"}],oe=Object(a.memo)(({disabled:e,onSelect:t,selectedTypes:n})=>{const i=Object(E.a)(),[s,r]=Object(a.useState)(!1),l=re.map(e=>({value:e.value,label:i.formatMessage({id:e.labelKey})})),c=Object(a.useMemo)(()=>({value:se.ALL,label:i.formatMessage({id:"desk.agents.filter.agentType.all"})}),[i]),d=Object(a.useCallback)(()=>{if(s)return t([c]),void r(!1);t([]),r(!0)},[s,t,c]),u=Object(a.useCallback)((e,n)=>{0===e.length||n?t([]):t(e),r(n)},[t]),p=l.filter(e=>n.includes(e.value));return Object(W.jsx)(o.TreeSelect,{treeData:l,selectedNodes:p.length>0?p:l,disabled:e,prefixItem:Object(W.jsxs)(ee,{isChecked:s,onClick:d,children:[c.label,s&&Object(W.jsx)(o.Icon,{icon:"done",size:20,color:Object(o.cssVariables)("purple-7")})]}),toggleRenderer:0===n.length?()=>Object(W.jsx)(X,{children:i.formatMessage({id:"desk.agents.filter.agentType.all"})}):void 0,onSelect:u})});var le=Object(r.default)(o.Dropdown).withConfig({displayName:"AgentListFilters___StyledDropdown",componentId:"c38dfs-4"})(["margin-right:4px;"]),ce=Object(r.default)(o.Dropdown).withConfig({displayName:"AgentListFilters___StyledDropdown2",componentId:"c38dfs-5"})(["margin-left:4px;"]),de=Object(r.default)(o.Dropdown).withConfig({displayName:"AgentListFilters___StyledDropdown3",componentId:"c38dfs-6"})(["margin-left:4px;"]);const ue=Object(a.memo)(({updateParams:e,teamIds:t,connection:n,isFetching:i,level:s,activationStatus:r,agentTypes:o})=>{const l=Object(E.a)(),c=Object(a.useMemo)(()=>{var e;return null!=(e=null==t?void 0:t.split(",").map(e=>Number(e)))?e:[]},[t]),d=Object(a.useMemo)(()=>{var e;return null!=(e=null==o?void 0:o.split(","))?e:[]},[o]),u=Object(a.useCallback)(t=>{const n=t.map(e=>e.value).join(",");e({page:1,pageSize:20,agentTypes:n})},[e]),p=Object(H.onDropdownChangeIgnoreNull)(t=>{e({page:1,pageSize:20,connection:t.value})}),g=Object(a.useCallback)(t=>{const n=t.map(e=>e.value).join(",");e({page:1,pageSize:20,teamIds:n})},[e]),h=Object(H.onDropdownChangeIgnoreNull)(t=>{e({page:1,pageSize:20,level:t.value})}),m=Object(H.onDropdownChangeIgnoreNull)(t=>{e({page:1,pageSize:20,activationStatus:t.value})});return Object(W.jsxs)(J,{"data-test-id":"AgentListFilters",children:[Object(W.jsx)(oe,{selectedTypes:d,width:d.length>2?300:void 0,disabled:i,onSelect:u}),Object(W.jsx)(Z,{}),Object(W.jsx)(le,{size:"small",items:te,itemToString:e=>l.formatMessage({id:e.labelKey}),selectedItem:te.find(e=>e.value===n),disabled:i,onItemSelected:p}),Object(W.jsx)(Q,{selectedAgentGroupIds:c,width:c.length>2?300:void 0,disabled:i,onSelect:g}),Object(W.jsx)(ce,{size:"small",items:ae,itemToString:e=>l.formatMessage({id:e.labelKey}),selectedItem:ae.find(e=>e.value===s),disabled:i,onItemSelected:h}),Object(W.jsx)(de,{size:"small",items:ie,itemToString:e=>l.formatMessage({id:e.labelKey}),selectedItem:ie.find(e=>e.value===r),disabled:i,onItemSelected:m})]})});n("E9XD");var pe=n("55Ip"),ge=n("kriW"),he=n("58zX");const me=e=>{const t=e.clone().startOf("day");return e.diff(t,"seconds")/86400};function fe(e,t){switch(e){case"ONLINE":return t?Object(o.cssVariables)("green-3"):Object(o.cssVariables)("green-5");case"AWAY":return t?Object(o.cssVariables)("orange-3"):Object(o.cssVariables)("orange-5");case"OFFLINE":return t?Object(o.cssVariables)("neutral-1"):Object(o.cssVariables)("neutral-2");default:return}}const be=({id:e,startedAt:t,connection:n,endedAt:a,barRect:i,isHovered:s=!1,testId:r})=>{const l=a.diff(t,"second");return Object(W.jsx)("rect",{"data-id":e,x:Math.round(me(t)*i.width),y:i.y,width:Math.round(l/86400*i.width),height:i.height,fill:fe(n,s),style:{transition:`0.2s fill ${o.transitionDefault}`},"data-test-id":r},e)},je=r.default.svg.withConfig({displayName:"emptyBar__SVGContainer",componentId:"cj2b8x-0"})(["fill:transparent;width:","px;text{font-size:11px;line-height:","px;fill:",";}"],e=>e.width,e=>e.detailed?12:16,e=>e.detailed?Object(o.cssColors)("neutral-10"):Object(o.cssColors)("neutral-6")),ye=({children:e,className:t,detailed:n,barRect:a,viewBoxHeight:i,onMouseMove:s})=>{const r=n?["0:00","4:00","8:00","12:00","16:00","20:00","0:00"]:["0","12","24"];return Object(W.jsxs)(je,{width:a.width,viewBox:`0 0 ${a.width} ${i}`,xmlns:"http://www.w3.org/2000/svg",className:t,detailed:n,onMouseMove:s,children:[Object(W.jsx)("rect",{x:a.x,y:a.y,width:"100%",height:a.height,fill:n?void 0:Object(o.cssColors)("neutral-3")}),r.map((e,t)=>{let n;return n=0===t?void 0:t===r.length-1?"end":"middle",Object(W.jsx)("text",{x:`${t/(r.length-1)*100}%`,y:i,textAnchor:n,children:e},`number-${e}-${t}`)}),e]})},Oe=r.default.line.withConfig({displayName:"timeVerticalLine__Line",componentId:"sc-1l2wsyu-0"})(["stroke:",";stroke-width:",";"," pointer-events:none;"],e=>e.color,({strokeWidth:e})=>e,e=>"dashed"===e.strokeStyle&&Object(r.css)(["stroke-dasharray:3;"])),ve=({x:e,y1:t,y2:n,opacity:a=1,color:i=Object(o.cssVariables)("neutral-10"),strokeStyle:s="solid",strokeWidth:r=1,testId:l})=>Object(W.jsx)(Oe,{x1:e,y1:t,x2:e,y2:n,color:i,opacity:a,strokeStyle:s,strokeWidth:r,"data-test-id":l}),xe=r.default.div.withConfig({displayName:"AgentConnectionDiagram__BarWrapper",componentId:"njlh5x-0"})(["position:relative;.BarWrapper__popover-target{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;}"]),_e=r.default.div.withConfig({displayName:"AgentConnectionDiagram__PopoverContentContainer",componentId:"njlh5x-1"})(["width:200px;padding:16px;border-radius:4px;background-color:#fff;font-size:14px;line-height:20px;color:",";font-weight:600;"," transition:transform 0.2s ",";.PopoverContent__status{font-size:12px;line-height:16px;color:",";margin-top:18px;}.PopoverContent__duration{font-size:20px;line-height:24px;font-weight:600;color:",";margin-top:8px;}"],Object(o.cssVariables)("neutral-10"),o.elevation.popover,o.transitionDefault,Object(o.cssVariables)("neutral-6"),e=>f.o[e.connection]);var Ce=i.a.memo(({date:e,connectionLogs:t,width:n=288,className:i,detailed:s=!1,serviceHours:r})=>{const[o,l]=Object(a.useState)(void 0),d=Object(a.useRef)(null),u=Object(a.useRef)(null),p={ONLINE:Object(W.jsx)(ge.a,{id:"desk.statistics.agents.detail.lbl.online"}),AWAY:Object(W.jsx)(ge.a,{id:"desk.statistics.agents.detail.lbl.away"}),OFFLINE:Object(W.jsx)(ge.a,{id:"desk.statistics.agents.detail.lbl.offline"})},g=c()(new Date);Object(a.useLayoutEffect)(()=>{d.current&&(u.current=d.current.getBoundingClientRect())});const h=s?60:40,m=c()(e).startOf("day"),b=c()(e).endOf("day"),j=Object(a.useMemo)(()=>({x:0,y:s?12:16,width:n,height:s?24:8}),[n,s]),y=Object(a.useMemo)(()=>t.map(e=>{const t=c()(e.createdAt),n=t.isBefore(m)?m:t,a=null==e.durationTime?g:t.clone().add(e.durationTime,"seconds"),i=a.isAfter(b)?b:a;return{id:e.id,startedAt:n,endedAt:i,connection:e.toConnection}}).filter(e=>e.startedAt.isBefore(e.endedAt)),[t,m,g,b]),O=Object(a.useCallback)(e=>Math.max(.5,Math.min(e,n-.5)),[n]),v=Object(a.useCallback)(e=>O(me(e)*n+.5),[n,O]);let x;if(r&&r.enabled){const{operationTimes:e}=r;x=e.map(({from:e,to:t},n)=>{const a=Object(H.getWorkingHourVerticalLineColor)(n);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ve,{x:v(c()(e,"HH:mm")),y1:0,y2:j.height+24,strokeStyle:"dashed",strokeWidth:1.5,color:a,testId:"ServiceHourStart"},`vertical-line-from-${n}`),Object(W.jsx)(ve,{x:v(c()(t,"HH:mm")),y1:0,y2:j.height+24,strokeStyle:"dashed",strokeWidth:1.5,color:a,testId:"ServiceHourEnd"},`vertical-line-to-${n}`)]})})}const _=Object(a.useCallback)(e=>{if(e.target.dataset){const t=y.find(t=>t.id===parseInt(e.target.dataset.id,10));l(t)}},[y]),C=Object(a.useCallback)(()=>l(void 0),[]),k=Object(a.useCallback)(({startedAt:e,endedAt:t})=>Object(W.jsxs)(W.Fragment,{children:[e.format(f.A),Object(W.jsx)("br",{}),e.format("h:mmA")," - ",t.format("h:mmA")]}),[]),w=Object(a.useCallback)(({startedAt:e,endedAt:t})=>v(c()((e.valueOf()+t.valueOf())/2))-100,[v]);return Object(W.jsxs)(xe,{ref:d,onMouseLeave:C,children:[Object(W.jsxs)(ye,{className:i,barRect:j,detailed:s,viewBoxHeight:h,onMouseMove:_,children:[y.map(({id:e,startedAt:t,endedAt:n,connection:a},i)=>Object(W.jsx)(be,{id:e,barRect:j,startedAt:t,endedAt:n,connection:a,isHovered:o&&o.id===e,testId:`${a}-${i}`},e)),s?Object(W.jsxs)(W.Fragment,{children:[Array.from({length:25},(e,t)=>Object(W.jsx)(ve,{x:O(t/24*n+.5),y1:j.y,y2:j.y+j.height,opacity:t%4?.08:.16,testId:`TimeVerticalLineDetailed-${t}`},`vertical-line-${t}`)),x]}):Object(W.jsx)(ve,{x:v(g),y1:0,y2:h,opacity:.16,testId:"TimeVerticalLine"})]}),Object(W.jsx)(he.a,{placement:"top",offset:"0, 60",isOpen:!!o,enableFlip:!1,canOutsideClickClose:!1,target:Object(W.jsx)("div",{className:"BarWrapper__popover-target"}),content:o&&Object(W.jsxs)(_e,{connection:o.connection,style:{transform:`translateX(${w(o)}px)`},children:[k(o),Object(W.jsx)("div",{className:"PopoverContent__status",children:p[o.connection]}),Object(W.jsx)("div",{className:"PopoverContent__duration",children:Object(H.renderTimestring)(o.endedAt.diff(o.startedAt,"seconds"))})]})})]})}),ke=n("5ILo"),we=n("gYqh");const Te=Object(r.default)(V.W).withConfig({displayName:"agentDetailSidebar__Container",componentId:"sc-15ut8m7-0"})(["width:320px;"]),Se=Object(r.default)(o.IconButton).withConfig({displayName:"agentDetailSidebar__CloseButton",componentId:"sc-15ut8m7-1"})(["position:absolute;right:9px;top:9px;"]),Ee=r.default.div.withConfig({displayName:"agentDetailSidebar__HeaderWrapper",componentId:"sc-15ut8m7-2"})(["display:flex;flex-direction:column;align-items:center;padding-top:28px;padding-bottom:16px;","{position:relative;}h3{font-size:18px;min-height:24px;line-height:24px;font-weight:500;margin-bottom:8px;}dl{width:100%;display:grid;grid-template-columns:88px auto;grid-row-gap:12px;grid-column-gap:16px;font-size:14px;line-height:20px;dt{grid-column:1 / span 1;color:",";margin-right:8px;}dd{grid-column:2 / span 1;word-break:break-all;}}"],ke.a,Object(o.cssVariables)("neutral-6")),Ie=r.default.div.withConfig({displayName:"agentDetailSidebar__AgentTagInfo",componentId:"sc-15ut8m7-3"})(["display:flex;align-items:center;"]),Me=r.default.div.withConfig({displayName:"agentDetailSidebar__AgentAvatarInfo",componentId:"sc-15ut8m7-4"})(["display:flex;padding-bottom:24px;width:100%;"]),De=r.default.div.withConfig({displayName:"agentDetailSidebar__AgentIdentity",componentId:"sc-15ut8m7-5"})(["flex:1;margin-left:12px;"]),Ae=Object(r.default)(o.IconButton).withConfig({displayName:"agentDetailSidebar__AgentBotSettingButton",componentId:"sc-15ut8m7-6"})(["margin-left:4px;"]),Ne=Object(r.default)(V.u).withConfig({displayName:"agentDetailSidebar__RecentTickets",componentId:"sc-15ut8m7-7"})(["div[role='list']{list-style:none;padding:0;margin-left:-16px;margin-right:-16px;padding-bottom:16px;}.no-recent-tickets{font-size:16px;font-weight:500;line-height:20px;text-align:center;color:",";padding-top:48px;padding-bottom:48px;.no-recent-tickets-icon{margin-bottom:8px;}}a{&:hover{text-decoration:none;}}"],Object(o.cssVariables)("neutral-5")),Re=r.default.div.withConfig({displayName:"agentDetailSidebar__ToggleWrapper",componentId:"sc-15ut8m7-8"})(["margin-left:12px;"]),Pe=Object(r.default)(V.u).withConfig({displayName:"agentDetailSidebar__Statistics",componentId:"sc-15ut8m7-9"})(["border-bottom:0;dl{display:flex;flex-flow:row wrap;align-items:flex-start;font-size:14px;line-height:20px;padding-top:12px;dt{flex:1 1 51%;color:",";margin-bottom:12px;}dd{flex:0 0 auto;margin-left:auto;cursor:pointer;a{color:",";}&:hover{text-decoration:underline;}.assignment-ratio{color:",";text-decoration:inherit;vertical-align:baseline;}}}.today{font-size:12px;line-height:16px;color:",";margin-bottom:16px;}"],Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-6")),Le=Object(r.default)(Ce).withConfig({displayName:"agentDetailSidebar__StyledAgentConnectionDiagram",componentId:"sc-15ut8m7-10"})(["margin-bottom:12px;"]),Fe=r.default.div.withConfig({displayName:"agentDetailSidebar__ActivationStatusContainer",componentId:"sc-15ut8m7-11"})(["display:inline-flex;flex-direction:column;"]),Ue={ADMIN:"desk.agents.sidebar.lbl.role.admin",AGENT:"desk.agents.sidebar.lbl.role.agent"},$e={[f.g.EXPERT]:"desk.agents.sidebar.lbl.expert",[f.g.INTERMEDIATE]:"desk.agents.sidebar.lbl.intermediate"};var Be=Object(r.default)(o.Tooltip).withConfig({displayName:"agentDetailSidebar___StyledTooltip",componentId:"sc-15ut8m7-12"})(["display:inline-block;cursor:pointer;label{cursor:pointer;}"]),Ve=Object(r.default)(V.jc).withConfig({displayName:"agentDetailSidebar___StyledTextWithOverflowTooltip",componentId:"sc-15ut8m7-13"})(["max-width:168px;font-size:18px;font-weight:500;"]),ze=Object(r.default)(we.a).withConfig({displayName:"agentDetailSidebar___StyledAgentBadge",componentId:"sc-15ut8m7-14"})(["transform:translateY(4px);"]),He=Object(r.default)(V.J).withConfig({displayName:"agentDetailSidebar___StyledDeskBotTypeTag",componentId:"sc-15ut8m7-15"})(["margin-left:8px;"]);const qe=()=>{var e,t,n,i;const r=Object(E.a)(),l=Object(s.k)(),d=Object(a.useRef)(null),{appId:u,agentId:p}=Object(P.V)(e=>{var t;return{appId:null==(t=e.applicationState.data)?void 0:t.app_id,agentId:e.desk.agent.id}}),{agentDetail:{data:{agent:g,data:h},resetAgentDetail:m,updateAgentData:b}}=Object(a.useContext)(R.a),j=Object(P.o)(),{activeDrawerID:y,closeDrawer:O}=Object(a.useContext)(V.X),v="BOT"===(null==g?void 0:g.agentType),x=Object(a.useCallback)(()=>{setTimeout(()=>m(),1e3*V.Fc)},[m]),_=Object(a.useCallback)(()=>{x(),O("agent")},[O,x]),C=c()(new Date),k=c()(C).set({hour:0,minute:0,second:0,millisecond:0}),w=Object(a.useCallback)(e=>{(!d.current||e.target instanceof Node&&!d.current.contains(e.target))&&O("agent")},[O]),T=Object(a.useCallback)(()=>{window.addEventListener("click",w,!0)},[w]),S=Object(a.useCallback)(()=>{window.removeEventListener("click",w,!0)},[w]),I=Object(a.useCallback)(e=>{b(e),T()},[T,b]),M=U({onSuccess:I,onDialogClose:T});Object(a.useEffect)(()=>(y&&"agent"===y&&setTimeout(()=>{T()},1e3*V.Fc),()=>{S()}),[y,T,S]);const D=Object(a.useCallback)(()=>g&&g.groups&&g.groups.length>0?g.groups.map(e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Neutral,onClick:()=>{_(),l.push(`/${u}/desk/settings/teams/form/${e.id}`)},children:e.name},e.id)).reduce((e,t)=>Object(W.jsxs)(W.Fragment,{children:[e,", ",t]})):f.Z,[g,u,l,_]),A=Object(a.useMemo)(()=>g?j.id===g.id?j.email:g.email:null,[g,j.email,j.id]),{activateItem:N,deactivateItem:L,pausedItem:F,pendingItem:$}={activateItem:{key:f.c.ACTIVE,label:r.formatMessage({id:Object(H.getAgentStatusLabelKey)(f.c.ACTIVE)}),icon:Object(W.jsx)(o.Icon,{icon:"success-filled",size:16,color:Object(o.cssVariables)("green-6")}),onClick:()=>{g&&M(g,f.c.ACTIVE)}},deactivateItem:{key:f.c.INACTIVE,label:r.formatMessage({id:Object(H.getAgentStatusLabelKey)(f.c.INACTIVE)}),icon:Object(W.jsx)(o.Icon,{icon:"success-filled",size:16,color:Object(o.cssVariables)("neutral-5")}),onClick:()=>{g&&M(g,f.c.INACTIVE)}},pausedItem:{key:f.c.PAUSED,label:r.formatMessage({id:Object(H.getAgentStatusLabelKey)(f.c.PAUSED)}),icon:Object(W.jsx)(o.Icon,{icon:"pause",size:16,color:Object(o.cssVariables)("neutral-5")}),onClick:()=>{g&&M(g,f.c.PAUSED)}},pendingItem:{key:f.c.PENDING,label:r.formatMessage({id:Object(H.getAgentStatusLabelKey)(f.c.PENDING)}),icon:Object(W.jsx)(o.Icon,{icon:"warning-filled",size:16,color:Object(o.cssVariables)("yellow-5")})}},B=Object(a.useMemo)(()=>{switch(null==g?void 0:g.status){case f.c.ACTIVE:return N;case f.c.INACTIVE:return L;case f.c.PAUSED:return F;case f.c.PENDING:return $;default:return}},[N,null==g?void 0:g.status,L,F,$]),q=Object(a.useMemo)(()=>{switch(null==g?void 0:g.status){case f.c.ACTIVE:return[F,L];case f.c.INACTIVE:return[F,N];case f.c.PAUSED:return[N,L];case f.c.PENDING:return[N];default:return[]}},[N,g,L,F]),G=(null==g?void 0:g.id)===p,K=(null==g?void 0:g.agentType)===f.h.BOT&&!(null!=g&&null!=(e=g.bot)&&e.isReadyToActivate),Y=G||K,Q=Object(a.useMemo)(()=>G?{content:r.formatMessage({id:"desk.agents.sidebar.lbl.activationStatus.toggle.disabled.tooltip.isAdmin"})}:K?{content:r.formatMessage({id:"desk.agents.sidebar.lbl.activationStatus.toggle.disabled.tooltip.isBotNotReadyToActivate"})}:void 0,[r,G,K]),J=Object(a.useMemo)(()=>[{intlKey:"desk.agents.sidebar.lbl.email",value:A||f.Z},{intlKey:"desk.agents.sidebar.lbl.sendbirdId",value:(null==g?void 0:g.sendbirdId)||f.Z},{intlKey:"desk.agents.sidebar.lbl.phoneNumber",value:(null==g?void 0:g.phoneNumber)||f.Z},{intlKey:"desk.agents.sidebar.lbl.tier",value:g&&(g.agentType===f.h.BOT||"ADMIN"===g.role?f.Z:r.formatMessage({id:$e[g.tier]}))},{intlKey:"desk.agents.sidebar.lbl.teams",value:D()},{intlKey:"desk.agents.sidebar.lbl.created",value:g&&c()(g.createdAt).format("lll")},{intlKey:"desk.agents.sidebar.lbl.activationStatus",value:g&&(g.status===f.c.DELETED?Object(W.jsx)(Be,{content:r.formatMessage({id:"desk.agent.status.guide.userAgent.deleted"}),popperProps:{modifiers:{offset:{offset:"0, 12"}}},tooltipContentStyle:"word-break: break-word;",children:Object(W.jsx)(V.b,{status:f.c.DELETED,disabled:!0})}):Object(W.jsx)(Fe,{children:Object(W.jsx)(o.Dropdown,{selectedItem:B,items:q,disabled:Y,tooltipProps:Q,toggleRenderer:({selectedItem:e})=>(null==e?void 0:e.key)&&Object(W.jsx)(Re,{children:Object(W.jsx)(V.b,{status:e.key,disabled:Y})}),itemToElement:e=>e.label,itemToString:e=>e.label,size:"small",onChange:e=>{null==e||null==e.onClick||e.onClick(),S()}})}))}],[q,g,r,Y,A,D,B,Q,S]),X=g?`/${u}/desk/reports/agents?agent=${g.id}`:"",Z=Object(a.useMemo)(()=>{const e=[{intlKey:"desk.agents.sidebar.lbl.assignments",value:null==h?void 0:h.numberOfAssignments},{intlKey:"desk.agents.sidebar.lbl.firstResponseTime",value:h&&Object(H.renderTimestring)(h.averageResponseTime)},{intlKey:"desk.agents.sidebar.lbl.online",value:h&&Object(H.renderTimestring)(h.onlineDuration)}];return(null==g?void 0:g.agentType)!==f.h.BOT&&e.push({intlKey:"desk.agents.sidebar.lbl.away",value:h&&Object(H.renderTimestring)(h.awayDuration)}),e},[g,h]),ee=Object(a.useCallback)(()=>{O("agent")},[O]);return Object(W.jsx)(Te,{id:"agent",ref:d,children:Object(W.jsxs)(o.ScrollBar,{children:[Object(W.jsx)(V.u,{children:Object(W.jsxs)(Ee,{children:[Object(W.jsx)(Se,{buttonType:"secondary",icon:"close",size:"small",onClick:_}),Object(W.jsxs)(Me,{children:[Object(W.jsx)(ke.a,{profileID:g?g.email:"",size:64,status:(null!=(t=null==g?void 0:g.connection)?t:"offline").toLowerCase(),imageUrl:g?g.photoThumbnailUrl:void 0}),Object(W.jsxs)(De,{children:[Object(W.jsxs)("h3",{children:[g&&Object(W.jsx)(Ve,{tooltipDisplay:"inline-flex",children:g.displayName}),g&&Object(W.jsx)(ze,{size:20,agentType:g.agentType,role:g.role,tier:g.tier})]}),Object(W.jsxs)(Ie,{children:[g&&Object(W.jsx)(o.Tag,{children:r.formatMessage({id:v?"desk.agents.sidebar.lbl.agentType.bot":Ue[g.role]})}),(null==g?void 0:g.bot)&&v&&Object(W.jsx)(He,{type:g.bot.type}),g&&v&&g.status!==f.c.DELETED&&Object(W.jsx)(pe.Link,{to:`/${u}/desk/settings/bots/${null==(n=g.bot)?void 0:n.id}/edit?bot_type=${null==(i=g.bot)?void 0:i.type}`,onClick:ee,children:Object(W.jsx)(Ae,{icon:"settings-filled",size:"small",title:r.formatMessage({id:"desk.agents.sidebar.lbl.botSettings"}),tooltipPlacement:"bottom"})})]})]})]}),Object(W.jsx)("dl",{children:J.map(({intlKey:e,value:t})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:r.formatMessage({id:e})},`${e}-title`),Object(W.jsx)("dd",{children:t},`${e}-value`)]}))})]})}),Object(W.jsx)(Ne,{title:r.formatMessage({id:"desk.agents.sidebar.header.recentTickets"}),children:h&&h.recentTickets.length>0?Object(W.jsx)("div",{role:"list",children:h.recentTickets.map(e=>Object(W.jsx)(pe.Link,{to:`/${u}/desk/tickets/${e.id}`,role:"listitem",onClick:_,children:Object(W.jsx)(V.pc,{ticket:e})},e.id))}):Object(W.jsx)(z.a,{icon:"tickets",title:r.formatMessage({id:"desk.agents.sidebar.lbl.noTickets"}),description:""})}),Object(W.jsxs)(Pe,{title:r.formatMessage({id:"desk.agents.sidebar.header.dailyStatistics"}),children:[Object(W.jsx)("dl",{children:Z.map(({intlKey:e,value:t})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:r.formatMessage({id:e})},`${e}-title`),Object(W.jsx)("dd",{children:Object(W.jsx)(pe.Link,{to:X,onClick:_,children:t})},`${e}-value`)]}))}),Object(W.jsx)(Le,{date:C.format("YYYY-MM-DD"),connectionLogs:h?h.connectionLogs:[]}),Object(W.jsxs)("span",{className:"today",children:[k.format("lll")," - ",C.format("LTS")]})]})]})})};var Ge=n("6blF"),We=n("T1DM"),Ke=n("/21U"),Ye=n("nkY7");function Qe(e,t,n){void 0===e&&(e=0);var a=-1;return Object(Ke.a)(t)?a=Number(t)<1?1:Number(t):Object(Ye.a)(t)&&(n=t),Object(Ye.a)(n)||(n=We.a),new Ge.a((function(t){var i=Object(Ke.a)(e)?e:+e-n.now();return n.schedule(Je,i,{index:0,period:a,subscriber:t})}))}function Je(e){var t=e.index,n=e.period,a=e.subscriber;if(a.next(t),!a.closed){if(-1===n)return a.complete();e.index=t+1,this.schedule(e,n)}}const Xe=["d","h","m","s"];function Ze(e){const t=Date.now();return(e=>{let t=e,n=Math.floor(t/60);t%=60;let a=Math.floor(n/60);n%=60;const i=Math.floor(a/24);return a%=24,[i,a,n,t]})(e>=t?0:Math.floor((t-e)/1e3))}function et(e){return e.reduce((t,n,a)=>0===n&&0===t.length&&a<e.length-1?t:`${t}${n}${Xe[a]}`,"")}function tt(e){const t=et(Ze(e)),[n,i]=Object(a.useState)(t);return Object(a.useEffect)(()=>{const t=Qe(0,1e3).subscribe(()=>{i(et(Ze(e)))});return function(){t&&t.unsubscribe()}},[e]),n}const nt=r.default.span.withConfig({displayName:"agentItemDuration__Duration",componentId:"m5k3vh-0"})(["font-size:14px;font-weight:600;line-height:1.4;color:",";"],e=>e.connection?Object(H.getColorByConnection)(e.connection):Object(o.cssVariables)("neutral-10")),at=i.a.memo(({timestamp:e,connection:t})=>{const n=e?tt(Math.floor(1e3*e)):f.Z;return Object(W.jsx)(nt,{connection:t,children:n})});let it;!function(e){e.NAME="display_name",e.TIER="tier",e.SENDBIRD_ID="sendbird_id",e.GROUP_COUNT="group_count",e.CONNECTION="connection",e.EMAIL="email",e.CONNECTION_UPDATED_AT="connection_updated_at",e.ACTIVATION_STATUS="status"}(it||(it={}));const st=Object(r.default)(V.D).withConfig({displayName:"agentList__CopySendbirdIDButton",componentId:"rbrtn2-0"})(["margin:-3px 0;margin-left:4px;"]),rt=r.default.div.withConfig({displayName:"agentList__AgentAction",componentId:"rbrtn2-1"})(["display:flex;align-items:center;margin-left:4px;color:",";"],Object(o.cssVariables)("neutral-9")),ot=Object(r.default)(V.y).withConfig({displayName:"agentList__AgentActionLabel",componentId:"rbrtn2-2"})(["margin-right:6px;"]),lt=r.default.span.withConfig({displayName:"agentList__AgentActionText",componentId:"rbrtn2-3"})([""]),ct=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"agentList__AgentListTable",componentId:"rbrtn2-4"})(["flex:1;margin-top:16px;height:100%;tr:not(:hover) ","{display:none;}td{overflow:visible;}"],st),dt=Object(r.default)(V.Ub).withConfig({displayName:"agentList__AgentListPaginator",componentId:"rbrtn2-5"})(["margin-left:auto;"]),ut=Object(r.default)(V.hc).withConfig({displayName:"agentList__StyledAgentList",componentId:"rbrtn2-6"})([""," + *{margin-top:24px;}","{transform:translateX(",");transition:transform ","s ",";}"],V.Sb,dt,e=>e.isDetailOpen?"-282px":0,V.Fc,o.transitionDefault),pt=r.default.span.withConfig({displayName:"agentList__AgentTierLabel",componentId:"rbrtn2-7"})(["font-size:14px;font-weight:500;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),gt=r.default.div.withConfig({displayName:"agentList__AgentTierToggle",componentId:"rbrtn2-8"})(["display:flex;align-items:center;padding-left:4px;"]),ht=Object(r.default)(e=>Object(W.jsx)(o.Dropdown,{...e})).withConfig({displayName:"agentList__AgentConnectionDropdown",componentId:"rbrtn2-9"})(["margin-top:-2px;height:24px;"]),mt=r.default.div.withConfig({displayName:"agentList__AgentActionItem",componentId:"rbrtn2-10"})(["display:flex;align-items:center;"]),ft=r.default.div.withConfig({displayName:"agentList__TableHeadStatusContainer",componentId:"rbrtn2-11"})(["display:flex;align-items:center;"]),bt=r.default.span.withConfig({displayName:"agentList__TableHeadStatusText",componentId:"rbrtn2-12"})(["display:inline-block;"]),jt=Object(r.default)(o.TooltipTargetIcon).withConfig({displayName:"agentList__TableHeadStatusInfoIcon",componentId:"rbrtn2-13"})(["display:inline-flex;"]),yt={[f.g.INTERMEDIATE]:"desk.agent.tier.intermediate",[f.g.EXPERT]:"desk.agent.tier.expert"};var Ot=Object(r.default)(o.Dropdown).withConfig({displayName:"agentList___StyledDropdown",componentId:"rbrtn2-14"})(["margin:-6px 0;"]);const vt=Object(a.memo)(({tier:e,onItemSelected:t})=>{const n=(()=>{const e=Object(E.a)();return Object(a.useMemo)(()=>[f.g.INTERMEDIATE,f.g.EXPERT].map(t=>({label:e.formatMessage({id:yt[t]}),value:t})),[e])})();return Object(W.jsx)(Ot,{size:"small",variant:"inline",selectedItem:n.find(t=>t.value===e)||n[0],items:n,itemToString:e=>e.label,positionFixed:!0,toggleRenderer:({selectedItem:e,isOpen:t})=>e&&Object(W.jsx)(gt,{isOpen:t,children:Object(W.jsx)(pt,{children:e.label})}),onItemSelected:Object(H.onDropdownChangeIgnoreNull)(e=>{t(e.value)})})}),xt={page:1,pageSize:f.qb,sortOrder:f.Tb.ASCEND,sortBy:it.NAME,agentTypes:void 0,teamIds:void 0,connection:"ALL",level:void 0,query:void 0},_t=()=>{const e=Object(E.a)(),t=Object(P.W)(),{getErrorMessage:n}=Object($.a)(),{agentDetail:{data:{agent:i},isFetching:s,setSelectedAgent:l,resetAgentDetail:c}}=Object(a.useContext)(R.a),d=Object(P.o)(),{activeDrawerID:u,openDrawer:p,closeDrawer:g}=Object(a.useContext)(V.X),{desk:h,pid:m,region:j}=Object(b.g)(e=>{var t,n;return{desk:e.desk,pid:e.desk.project.pid,region:null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:""}}),[y,O]=Object(a.useState)([]),[v,x]=Object(a.useState)(0),[_,C]=Object(a.useState)(!1),{page:k,pageSize:w,teamIds:T,sortOrder:S,sortBy:I,connection:L,activationStatus:F,level:K,query:Y,agentTypes:Q,updateParams:J}=Object(B.a)(xt),X=Object(a.useMemo)(()=>{var e;return null!=(e=null==T?void 0:T.split(",").map(e=>Number(e)))?e:[]},[T]),Z=Object(a.useMemo)(()=>{var e;return null!=(e=null==Q?void 0:Q.split(","))?e:[]},[Q]),ee=Object(a.useMemo)(()=>{if(0!==Z.length)return Z.includes("bot")?1===Z.length?[f.h.BOT]:[f.h.USER,f.h.BOT]:[f.h.USER]},[Z]),te=Object(a.useMemo)(()=>{if(!Z.includes("agent")||!Z.includes("admin")){if(Z.includes("agent"))return G.c.AGENT;if(Z.includes("admin"))return G.c.ADMIN}},[Z]),ne=Object(a.useCallback)(async({limit:e,offset:t,sortBy:a,sortOrder:i,connection:s,group:r,tier:l,status:c,query:d})=>{C(!0);const u=i===f.Tb.DESCEND?"-":"";try{const{data:{count:n,results:i}}=await D.g.fetchAgents(m,j,{limit:e,offset:t,order:a?`${u}${a}`:void 0,group:r,connection:"ALL"===s?void 0:s,tier:l,status:c,query:d,agentType:ee,role:te});O(i),x(n)}catch(e){o.toast.error({message:n(e)}),Object(q.a)(e)}finally{C(!1)}},[ee,n,m,j,te]),ae=Object(a.useCallback)(e=>{O(t=>{const n=t.findIndex(t=>t.id===e.id);return n>=0?[...t.slice(0,n),e,...t.slice(n+1)]:t})},[]),ie=Object(a.useCallback)(e=>{const t=y.findIndex(t=>t.id===e.id);t>=0&&O([...y.slice(0,t),...y.slice(t+1)])},[y]),se=Object(a.useCallback)((e,t)=>{t===e.connection||"ALL"===L?ae(e):ie(e)},[L,ie,ae]),re=U({onSuccess:ae}),oe=Object(a.useCallback)(async({agentId:t,connection:a,transferGroup:i})=>{try{const{data:n}=await D.g.updateAgentConnection(m,j,{agentId:t,connection:a,transferGroupId:null==i?void 0:i.id});se(n,n.connection),i?o.toast.success({message:e.formatMessage({id:"desk.agents.statusChange.transfer.success"},{teamName:i.name})}):o.toast.success({message:e.formatMessage({id:"desk.agents.statusChange.success"})})}catch(e){o.toast.error({message:n(e)})}},[n,e,m,j,se]);Object(a.useEffect)(()=>{null==u&&ne({offset:w*(k-1),limit:w,sortBy:I,sortOrder:S,connection:L,group:X,tier:K,status:F||[f.c.ACTIVE,f.c.INACTIVE,f.c.PENDING,f.c.PAUSED],query:Y})},[F,u,L,ne,K,k,w,Y,X,I,S]),Object(a.useEffect)(()=>{const e=["AGENT_CONNECTION"],t={AGENT_CONNECTION:e=>{const{agent:t}=e;t&&"INACTIVE"!==t.status&&ae(t)}};if(window.dashboardSB){const n=h.project.openChannelUrl,a=new window.dashboardSB.ChannelHandler,i=new window.dashboardSB.ConnectionHandler;return a.onMessageReceived=(a,i)=>{if(a.isOpenChannel()&&a.url===n)try{const n=JSON.parse(i.message);var s;if(e.includes(n.type)||n.type.includes("AGENT"))null==(s=t[n.type])||s.call(t,n)}catch(e){Object(q.a)({error:e})}},i.onReconnectSucceeded=()=>{ne({offset:w*(k-1),limit:w,sortBy:I,sortOrder:S,connection:L,group:X,query:Y})},window.dashboardSB.addChannelHandler("AGENT_CHANNEL_HANDLER",a),window.dashboardSB.addConnectionHandler("AGENT_CONNECTION_HANDLER",i),()=>{window.dashboardSB.removeChannelHandler("AGENT_CHANNEL_HANDLER"),window.dashboardSB.removeChannelHandler("AGENT_CONNECTION_HANDLER")}}},[L,h.project.openChannelUrl,ne,k,w,I,S,X,ae,Y]);const le=e=>e===I?S:void 0,ce=Object(a.useCallback)((e,t)=>{e&&t&&J({sortBy:e.key,sortOrder:t})},[J]),de=Object(a.useCallback)((e,t)=>{J({page:e,pageSize:t})},[J]),pe=Object(a.useCallback)(e=>{e.stopPropagation();const{agentId:t}=e.currentTarget.dataset;if("string"==typeof t&&(null==i?void 0:i.id)===parseInt(t,10))return g(),void c();const n=t?y.find(e=>e.id===parseInt(t,10)):null;n&&!s&&(p("agent"),l(n.id))},[y,g,s,p,i,l,c]),ge=Object(a.useCallback)(async(e,n)=>{const{data:{active:a}}=await Object(N.fetchAgentTicketCounts)(m,j,{agentId:n.id});0!==a&&e!==f.d.ONLINE&&h.project.bulkTransferEnabled?t({dialogTypes:A.a.AgentConnectionStatusChange,dialogProps:{status:e,onSuccess:t=>{oe({agentId:n.id,connection:e,transferGroup:t})}}}):oe({agentId:n.id,connection:e})},[h.project.bulkTransferEnabled,m,j,t,oe]),he=e=>Object(H.onDropdownChangeIgnoreNull)(t=>{ge(t.value,e)}),me=t=>a=>{(async({agent:t,tier:a})=>{const i=new FormData;i.append("tier",a);try{const{data:n}=await D.g.updateAgentProfile(m,j,{agentId:t.id,payload:i});ae(n),o.toast.success({message:e.formatMessage({id:"desk.agents.list.tier.update.success"},{tier:a})})}catch(e){o.toast.error({message:n(e)})}})({agent:t,tier:a})},fe=Object(a.useCallback)(e=>{J({page:1,pageSize:20,query:e})},[J]),be=Object(a.useCallback)(e=>({"data-agent-id":e.id,onClick:pe,style:{cursor:"pointer"}}),[pe]),je=Object(a.useCallback)(t=>{const n={label:e.formatMessage({id:"desk.agents.list.td.actions.pendingToActive"}),onClick:()=>{re(t,f.c.ACTIVE)},disabled:t.id===h.agent.id||t.agentType===f.h.BOT&&null!=t.bot&&!t.bot.isReadyToActivate},a={label:e.formatMessage({id:"desk.agents.list.td.actions.inactiveToActive"}),onClick:()=>{re(t,f.c.ACTIVE)},disabled:t.id===h.agent.id},i={label:e.formatMessage({id:"desk.agents.list.td.actions.activeToInactive"}),onClick:()=>{re(t,f.c.INACTIVE)},disabled:t.id===h.agent.id},s={label:e.formatMessage({id:"desk.agents.list.td.actions.pause"}),onClick:()=>{re(t,f.c.PAUSED)},disabled:t.id===h.agent.id};switch(t.status){case f.c.PENDING:return[n];case f.c.INACTIVE:return[s,a];case f.c.PAUSED:return[a,i];case f.c.ACTIVE:return[s,i];default:return[i]}},[h.agent.id,e,re]),ye={ONLINE:e.formatMessage({id:"desk.agents.status.online"}),AWAY:e.formatMessage({id:"desk.agents.status.away"}),OFFLINE:e.formatMessage({id:"desk.agents.status.offline"})};return Object(W.jsxs)(ut,{isDetailOpen:"agent"===u,children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"desk.agents.list.title"})}),Object(W.jsx)(V.Sb.Actions,{children:Object(W.jsx)(V.h,{name:"query",defaultValue:Y,placeholder:e.formatMessage({id:"desk.agents.search.placeholder"}),width:240,disabled:_,onSubmit:fe})})]}),Object(W.jsx)(ue,{updateParams:J,agentTypes:Q,teamIds:T,connection:L,level:K,activationStatus:F,isFetching:_}),Object(W.jsx)(ct,{rowKey:"id",dataSource:y,loading:_,showScrollbars:!0,columns:[{key:it.NAME,dataIndex:"name",title:e.formatMessage({id:"desk.agents.list.th.name"}),flex:3,sorter:!0,defaultSortOrder:le(it.NAME),render:e=>{const t=e.id===d.id?d.email:e.email;return Object(W.jsx)(V.c,{agent:{...e,email:t},query:Y})}},{key:it.SENDBIRD_ID,dataIndex:"sendbirdId",title:e.formatMessage({id:"desk.agents.list.th.id"}),flex:3,sorter:!0,defaultSortOrder:le(it.SENDBIRD_ID),render:({sendbirdId:e})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(V.jc,{tooltipDisplay:"inline-block",children:e}),Object(W.jsx)(st,{size:"xsmall",buttonType:"secondary",copyableText:e})]})},{key:it.GROUP_COUNT,dataIndex:"groups",title:e.formatMessage({id:"desk.agents.list.th.teams"}),flex:1,sorter:!0,defaultSortOrder:le(it.GROUP_COUNT),render:({groups:t})=>{const n=Object(W.jsx)("span",{children:e.formatMessage({id:"desk.agents.list.td.teams"},{agentGroupCount:t.length})});return t.length>0?Object(W.jsx)(o.Tooltip,{content:e.formatMessage({id:"desk.agents.list.td.teams.tooltip"},{agentGroupNames:t.map(e=>e.name).slice(0,10).join(", "),moreNameCount:t.slice(10).length}),children:n}):n}},{key:it.TIER,dataIndex:"tier",title:e.formatMessage({id:"desk.agents.list.th.tier"}),width:130,sorter:!0,defaultSortOrder:le(it.TIER),onCell:()=>({onClick:e=>{e.stopPropagation()}}),render:e=>"AGENT"===e.role&&e.agentType===f.h.USER?Object(W.jsx)(vt,{tier:e.tier,onItemSelected:me(e)}):f.Z},{key:it.CONNECTION,dataIndex:"connection",title:e.formatMessage({id:"desk.agents.list.th.connectionStatus"}),flex:1.5,sorter:!0,defaultSortOrder:le(it.CONNECTION),onCell:()=>({onClick:e=>{e.stopPropagation()}}),render:t=>Object(W.jsx)(ht,{positionFixed:!0,placement:"bottom-start",variant:"inline",size:"small",toggleRenderer:()=>Object(W.jsxs)(rt,{children:[Object(W.jsx)(ot,{connection:t.connection}),Object(W.jsx)(lt,{children:ye[t.connection]})]}),selectedItem:{label:M()(t.connection.toLowerCase()),value:t.connection},items:[{label:e.formatMessage({id:"desk.agents.status.online"}),value:f.d.ONLINE},...t.agentType===f.h.BOT?[]:[{label:e.formatMessage({id:"desk.agents.status.away"}),value:f.d.AWAY}],{label:e.formatMessage({id:"desk.agents.status.offline"}),value:f.d.OFFLINE}],itemToString:e=>e.value,itemToElement:e=>Object(W.jsxs)(mt,{children:[Object(W.jsx)(ot,{connection:e.value}),e.label]}),showArrow:!0,onItemSelected:he(t),disabled:t.status!==f.c.ACTIVE})},{key:it.CONNECTION_UPDATED_AT,dataIndex:"connectionUpdatedTs",title:e.formatMessage({id:"desk.agents.list.th.statusDuration"}),flex:2,sorter:!0,defaultSortOrder:le(it.CONNECTION_UPDATED_AT),render:e=>Object(W.jsx)(at,{timestamp:e.connectionUpdatedTs,connection:e.connection})},{key:it.ACTIVATION_STATUS,dataIndex:"status",title:Object(W.jsxs)(ft,{children:[Object(W.jsx)(bt,{children:e.formatMessage({id:"desk.team.form.selectedAgents.th.status"})}),Object(W.jsx)(V.a,{placement:"bottom-end",popperProps:{modifiers:{offset:{offset:"20, 4"}}},children:Object(W.jsx)(jt,{icon:"info"})})]}),flex:2,sorter:!0,defaultSortOrder:le(it.ACTIVATION_STATUS),render:e=>Object(W.jsx)(V.b,{status:e.status})}],onRow:be,rowActions:e=>[Object(W.jsx)(o.OverflowMenu,{items:je(e),stopClickEventPropagation:!0},"agentActivationActions")],rowStyles:(e,t)=>{if(t===(i?y.findIndex(e=>e.id===i.id):void 0))return Object(r.css)(["background:",";"],Object(o.cssVariables)("neutral-1"))},onSortByUpdated:ce,emptyView:Object(W.jsx)(z.a,{icon:"no-search",title:e.formatMessage({id:"desk.agents.list.noResult.header"}),description:Y?e.formatMessage({id:"desk.agents.list.noResult.query.desc"},{query:Y}):e.formatMessage({id:"desk.agents.list.noResult.filter.desc"})}),footer:Object(W.jsx)(dt,{current:k,total:v,pageSize:w,pageSizeOptions:f.E,onChange:de,onItemsPerPageChange:de})})]})},Ct=()=>Object(W.jsx)(_t,{}),kt=[{label:"desk.dataExport.filters.dataType.tickets.allTickets",value:f.U.ALL_TICKETS,icon:"tickets",tooltipContent:"desk.dataExport.filters.dataType.tickets"},{label:"desk.dataExport.filters.dataType.tickets.ticketDetails",value:f.U.TICKET_DETAILS,icon:"tickets",tooltipContent:"desk.dataExport.filters.dataType.tickets"},{label:"desk.dataExport.filters.dataType.tickets.ticketMessages",value:f.U.CHAT_MESSAGE,icon:"tickets",tooltipContent:"desk.dataExport.filters.dataType.tickets"}],wt=[{label:"desk.dataExport.filters.dataType.views.missedTickets",value:f.V.VIEWS_MISSED_TICKET,icon:"tickets",tooltipContent:"desk.dataExport.filters.dataType.views"}],Tt=[{label:"desk.dataExport.filters.dataType.performanceSummary.tickets",value:f.R.REPORT_SUMMARY_TICKETS,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.ticketsPerHour",value:f.R.REPORT_SUMMARY_TICKETS_PER_HOUR,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.messages",value:f.R.REPORT_SUMMARY_MESSAGES,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.messagesPerHour",value:f.R.REPORT_SUMMARY_MESSAGE_PER_HOUR,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.avgFirstResponseTime",value:f.R.REPORT_SUMMARY_AVG_FIRST_RESPONSE,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.avgResolutionTime",value:f.R.REPORT_SUMMARY_AVG_RESOLUTION_TIME,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"},{label:"desk.dataExport.filters.dataType.performanceSummary.csat",value:f.R.REPORT_SUMMARY_CSAT,icon:"reports-filled",tooltipContent:"desk.dataExport.filters.dataType.performanceSummary"}],St=[{label:"desk.dataExport.filters.dataType.reportsAgent.performance",value:f.G.REPORT_AGENT_PERFORMANCE,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.assignments",value:f.G.REPORT_ASSIGNMENTS,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.avgFirstResponseTime",value:f.G.REPORT_FIRST_RESPONSE_TIME,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.closedTickets",value:f.G.REPORT_CLOSED_TICKET_COUNT,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.closedTicketsPerHour",value:f.G.REPORT_CLOSED_HOURLY_AVERAGE_TICKET_COUNT,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.csat",value:f.G.REPORT_CUSTOMER_SATISFACTION_SCORE,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"},{label:"desk.dataExport.filters.dataType.reportsAgent.dailyStatusTracking",value:f.G.REPORT_CONNECTION_LOGS_TIME,icon:"agents-filled",tooltipContent:"desk.dataExport.filters.dataType.reportsAgent"}],Et=[{label:"desk.dataExport.filters.dataType.reportsBot.performance",value:f.K.REPORT_BOT_PERFORMANCE,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.assignments",value:f.K.REPORT_BOT_ASSIGNMENT_COUNT,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.closedTickets",value:f.K.REPORT_BOT_CLOSED_TICKET_COUNT,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.closedAssignmentRate",value:f.K.REPORT_BOT_ASSIGNMENT_CLOSING_RATE,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.avgTimeToClosing",value:f.K.REPORT_BOT_CLOSING_ASSIGNED_TIME,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.avgTimeToHandover",value:f.K.REPORT_BOT_HANDOVER_ASSIGNED_TIME,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"},{label:"desk.dataExport.filters.dataType.reportsBot.csat",value:f.K.REPORT_BOT_CUSTOMER_SATISFACTION_SCORE,icon:"bot",tooltipContent:"desk.dataExport.filters.dataType.reportsBot"}],It=[{label:"desk.dataExport.filters.dataType.reportsTeam.performance",value:f.S.REPORT_TEAM_PERFORMANCE,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"},{label:"desk.dataExport.filters.dataType.reportsTeam.closedTickets",value:f.S.REPORT_TEAM_CLOSED_TICKETS,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"},{label:"desk.dataExport.filters.dataType.reportsTeam.closedTicketsPerHour",value:f.S.REPORT_TEAM_CLOSED_TICKET_PER_HOUR,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"},{label:"desk.dataExport.filters.dataType.reportsTeam.avgFirstResponseTime",value:f.S.REPORT_TEAM_AVG_FIRST_RESPONSE_TIME,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"},{label:"desk.dataExport.filters.dataType.reportsTeam.avgResolutionTime",value:f.S.REPORT_TEAM_AVG_RESOLUTION_TIME,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"},{label:"desk.dataExport.filters.dataType.reportsTeam.csat",value:f.S.REPORT_TEAM_CUSTOMER_SATISFACTION_SCORE,icon:"teams",tooltipContent:"desk.dataExport.filters.dataType.reportsTeam"}],Mt=[{label:"desk.dataExport.filters.dataType.tickets",value:f.U.TICKETS,icon:"tickets",children:kt},{label:"desk.dataExport.filters.dataType.views",value:f.V.VIEWS,icon:"tickets",children:wt},{label:"desk.dataExport.filters.dataType.performanceSummary",value:f.R.REPORT_SUMMARY,icon:"reports-filled",children:Tt},{label:"desk.dataExport.filters.dataType.reportsAgent",value:f.G.REPORT_AGENT,icon:"agents-filled",children:St},{label:"desk.dataExport.filters.dataType.reportsBot",value:f.K.REPORT_BOT,icon:"bot",children:Et},{label:"desk.dataExport.filters.dataType.reportsTeam",value:f.S.REPORT_TEAM,icon:"teams",children:It}],Dt=Mt.reduce((e,t)=>t.children?e.concat(t.children.map(e=>e.value)):e,[]),At={[f.U.ALL_TICKETS]:{exportFrom:"desk.dataExport.filters.dataType.tickets",label:"desk.dataExport.filters.dataType.tickets.allTickets"},[f.U.TICKET_DETAILS]:{exportFrom:"desk.dataExport.filters.dataType.tickets",label:"desk.dataExport.filters.dataType.tickets.ticketDetails"},[f.U.CHAT_MESSAGE]:{exportFrom:"desk.dataExport.filters.dataType.tickets",label:"desk.dataExport.filters.dataType.tickets.ticketMessages"},[f.V.VIEWS_MISSED_TICKET]:{exportFrom:"desk.dataExport.filters.dataType.views",label:"desk.dataExport.filters.dataType.views.missedTickets"},[f.R.REPORT_SUMMARY_TICKETS]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.tickets"},[f.R.REPORT_SUMMARY_TICKETS_PER_HOUR]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.ticketsPerHour"},[f.R.REPORT_SUMMARY_MESSAGES]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.messages"},[f.R.REPORT_SUMMARY_MESSAGE_PER_HOUR]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.messagesPerHour"},[f.R.REPORT_SUMMARY_AVG_FIRST_RESPONSE]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.avgFirstResponseTime"},[f.R.REPORT_SUMMARY_AVG_RESOLUTION_TIME]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.avgResolutionTime"},[f.R.REPORT_SUMMARY_CSAT]:{exportFrom:"desk.dataExport.filters.dataType.performanceSummary",label:"desk.dataExport.filters.dataType.performanceSummary.csat"},[f.G.REPORT_AGENT_PERFORMANCE]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.performance"},[f.G.REPORT_ASSIGNMENTS]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.assignments"},[f.G.REPORT_FIRST_RESPONSE_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.avgFirstResponseTime"},[f.G.REPORT_CLOSED_TICKET_COUNT]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.closedTickets"},[f.G.REPORT_CLOSED_HOURLY_AVERAGE_TICKET_COUNT]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.closedTicketsPerHour"},[f.G.REPORT_CUSTOMER_SATISFACTION_SCORE]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.csat"},[f.G.REPORT_CONNECTION_LOGS_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsAgent",label:"desk.dataExport.filters.dataType.reportsAgent.dailyStatusTracking"},[f.S.REPORT_TEAM_PERFORMANCE]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.performance"},[f.S.REPORT_TEAM_CLOSED_TICKETS]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.closedTickets"},[f.S.REPORT_TEAM_CLOSED_TICKET_PER_HOUR]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.closedTicketsPerHour"},[f.S.REPORT_TEAM_AVG_FIRST_RESPONSE_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.avgFirstResponseTime"},[f.S.REPORT_TEAM_AVG_RESOLUTION_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.avgResolutionTime"},[f.S.REPORT_TEAM_CUSTOMER_SATISFACTION_SCORE]:{exportFrom:"desk.dataExport.filters.dataType.reportsTeam",label:"desk.dataExport.filters.dataType.reportsTeam.csat"},[f.K.REPORT_BOT_PERFORMANCE]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.performance"},[f.K.REPORT_BOT_CLOSED_TICKET_COUNT]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.closedTickets"},[f.K.REPORT_BOT_ASSIGNMENT_COUNT]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.assignments"},[f.K.REPORT_BOT_ASSIGNMENT_CLOSING_RATE]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.closedAssignmentRate"},[f.K.REPORT_BOT_CLOSING_ASSIGNED_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.avgTimeToClosing"},[f.K.REPORT_BOT_HANDOVER_ASSIGNED_TIME]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.avgTimeToHandover"},[f.K.REPORT_BOT_CUSTOMER_SATISFACTION_SCORE]:{exportFrom:"desk.dataExport.filters.dataType.reportsBot",label:"desk.dataExport.filters.dataType.reportsBot.csat"}},Nt=[{label:"desk.dataExport.filters.status.all",value:null},{label:"desk.dataExport.filters.status.completed",value:f.O.COMPLETED},{label:"desk.dataExport.filters.status.expired",value:f.O.EXPIRED},{label:"desk.dataExport.filters.status.failed",value:f.O.FAILED},{label:"desk.dataExport.filters.status.processing",value:f.O.PROCESSING}],Rt={[f.O.COMPLETED]:{color:"green",label:"desk.dataExport.downloadStatus.completed"},[f.O.PROCESSING]:{color:"blue",label:"desk.dataExport.downloadStatus.processing"},[f.O.FAILED]:{color:"red",label:"desk.dataExport.downloadStatus.failed"},[f.O.EXPIRED]:{color:"neutral",label:"desk.dataExport.downloadStatus.expired"}};let Pt;!function(e){e.CREATED_AT="created_at",e.EXPIRED_AT="expired_at"}(Pt||(Pt={}));var Lt=n("/F0l");const Ft=e=>{const t=Number(e);return Number.isInteger(t)&&t>0},Ut=e=>{const t=Number(e);return Number.isInteger(t)&&t>0&&f.E.includes(t)},$t=(e,t)=>{if(!e||!t||Array.isArray(e)||Array.isArray(t))return!1;if(e){const n=f.ob.test(e),a=c()(e,f.nb),i=c()(t,f.nb),s=a.isValid(),r=a.isSameOrBefore(i);if(!n||!s||!r)return!1}return!0},Bt=(e,t)=>{if(!e||!t||Array.isArray(t)||Array.isArray(e))return!1;if(e){const n=f.ob.test(e),a=c()(t,f.nb),i=c()(e,f.nb),s=i.isValid(),r=i.isSameOrAfter(a);if(!n||!s||!r)return!1}return!0},Vt=e=>"string"==typeof e?Lt.b.includes(e):!(!e||!Array.isArray(e))&&e.every(e=>Lt.b.includes(e)),zt=(e,t)=>{if(t&&!Array.isArray(t)){return e.includes(t)}return!1},Ht=e=>{if(e){return Object.values(f.Tb).includes(e)}return!1},qt=e=>{if(e&&!Array.isArray(e)){const t=f.ob.test(e),n=c()(e,f.nb).isValid();return t&&n}return!1};var Gt=n("Qyje"),Wt=n.n(Gt);const Kt=e=>"string"==typeof e?[e]:Array.isArray(e)?e:[];var Yt=n("ScWF"),Qt=n("dbbN");const Jt=r.default.div.withConfig({displayName:"assignmentLogsFilters__FilterContainer",componentId:"c6emu9-0"})(["display:flex;align-items:flex-start;"]),Xt=r.default.div.attrs({"data-test-id":"FilterWrapper"}).withConfig({displayName:"assignmentLogsFilters__FilterWrapper",componentId:"c6emu9-1"})(["margin-right:4px;"]),Zt=Object(r.default)(o.Tooltip).withConfig({displayName:"assignmentLogsFilters__TooltipWrapper",componentId:"c6emu9-2"})(["margin-top:4px;"]);Zt.displayName="Tooltip";const en={7:o.DateRangePickerValue.Last7Days,14:o.DateRangePickerValue.Last14Days,30:o.DateRangePickerValue.Last30Days,90:o.DateRangePickerValue.Last90Days},tn=(e,t)=>{if(!e||!t)return o.DateRangePickerValue.AllDates;const n=c()(e),a=c()(t),i=n.format(f.nb),s=a.format(f.nb),r=c()(),l=r.format(f.nb);if(i===s&&i===l)return o.DateRangePickerValue.Today;if(i===s&&1===r.diff(i,"days"))return o.DateRangePickerValue.Yesterday;const d=en[a.diff(n,"days")+1];return n&&a&&!d?o.DateRangePickerValue.Custom:d},nn=Object(a.memo)(({isFetching:e,queryString:t})=>{const n=Object(E.a)(),i=Object(a.useMemo)(()=>[{label:n.formatMessage({id:"desk.assignmentLogs.list.filter.ticketStatus.dropdown.item.allTickets"}),value:f.jc.ALL},{label:n.formatMessage({id:"ui.ticketStatus.pending"}),value:f.jc.PENDING},{label:n.formatMessage({id:"ui.ticketStatus.active"}),value:f.jc.ACTIVE},{label:n.formatMessage({id:"ui.ticketStatus.idle"}),value:f.jc.IDLE},{label:n.formatMessage({id:"ui.ticketStatus.wip"}),value:f.jc.WIP},{label:n.formatMessage({id:"ui.ticketStatus.closed"}),value:f.jc.CLOSED}],[n]),{ticketStatus:s,updateParams:r}=t,l=Object(a.useMemo)(()=>i.find(e=>e.value===s)||i[0],[i,s]),c=Object(a.useCallback)(e=>{e&&r({ticketStatus:e.value,page:1})},[r]);return Object(W.jsx)(Xt,{children:Object(W.jsx)(o.Dropdown,{placement:"bottom-start",items:i,selectedItem:l,size:"small",itemToString:e=>e.label,onItemSelected:c,disabled:e})})});var an=Object(r.default)(V.mc).withConfig({displayName:"assignmentLogsFilters___StyledTicketChannelTypesFilter",componentId:"c6emu9-3"})(["max-width:208px;"]);const sn=Object(a.memo)(({isFetching:e,queryString:t})=>{const{channelTypes:n,updateParams:i}=t,s=Object(a.useCallback)(e=>{i({channelTypes:e})},[i]);return Object(W.jsx)(Xt,{children:Object(W.jsx)(an,{channelTypes:n,disabled:e,onSelect:s})})}),rn=Object(a.memo)(({isFetching:e,queryString:t})=>{const{agentId:n,updateParams:i}=t,s=Object(a.useCallback)(e=>{i({page:1,agentId:e.id})},[i]);return Object(W.jsx)(Xt,{children:Object(W.jsx)(Qt.a,{selectedAgentId:n,isAllAgentOptionAvailable:!0,dropdownProps:{size:"small",variant:"default",disabled:e},onItemSelected:s})})}),on=Object(a.memo)(({isFetching:e,queryString:t})=>{const{startDate:n,endDate:i,updateParams:s}=t,r=Object(a.useCallback)((e,t)=>{s({page:1,startDate:null==t?void 0:t.startDate.format(f.nb),endDate:null==t?void 0:t.endDate.format(f.nb)})},[s]);return Object(W.jsx)(Xt,{children:Object(W.jsx)(V.Kb,{value:tn(n,i),dateRange:n&&i?{startDate:c()(n),endDate:c()(i)}:void 0,onChange:r,maxDate:c()(),disabled:e,size:"small"})})}),ln=Object(a.memo)(e=>{const t=Object(E.a)(),{isPermitted:n}=Object(P.h)(),a=n(["desk.admin"]);return Object(W.jsxs)(Jt,{"data-test-id":"FilterContainer",children:[Object(W.jsx)(nn,{...e}),Object(W.jsx)(sn,{...e}),a&&Object(W.jsx)(rn,{...e}),Object(W.jsx)(on,{...e}),Object(W.jsx)(Zt,{content:t.messages["desk.assignmentLogs.list.info.tooltip"],placement:"right",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16,"data-test-id":"InfoIcon"})})]})});var cn=n("rJga"),dn=n("9P9J"),un=n("KFoM"),pn=n("M85P"),gn=n("uFVl"),hn=n.n(gn),mn=n("NIJN"),fn=n.n(mn),bn=n("i8i4"),jn=n.n(bn),yn=n("e0ae"),On=n("Yzjp");let vn,xn,_n,Cn,kn=e=>e;const wn=r.default.div.withConfig({displayName:"DeskChatLayout__Container",componentId:"sc-98ufla-0"})(["position:relative;display:grid;grid-gap:1px;min-width:","px;height:100%;grid-template-rows:[top] 56px [ticket-list-top] auto [ticket-list-bottom] 64px [bottom];grid-template-columns:[start] "," [chat-thread-start] 1fr [iframe-sidebar] min-content [end];background-color:",";"],({minWidth:e})=>e,({sidebarWidth:e})=>e,Object(o.cssVariables)("neutral-3")),Tn=r.default.div.withConfig({displayName:"DeskChatLayout__GridItem",componentId:"sc-98ufla-1"})(["background-color:white;min-width:0;min-height:0;",""],e=>e.styles),Sn=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__MainGridItem",componentId:"sc-98ufla-2"})(["grid-row:top / bottom;grid-column:chat-thread-start / end;display:grid;grid-template-rows:[top] auto [chat-titlebar-bottom] 1fr [bottom];grid-template-columns:[chat-thread-start] 1fr [chat-thread-end] "," [end];grid-gap:1px;min-width:0;min-height:0;background-color:",";"],({sidebarWidth:e})=>e,Object(o.cssVariables)("neutral-3")),En=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__TicketSidebarHeaderGridItem",componentId:"sc-98ufla-3"})(["grid-column:start / chat-thread-start;grid-row:top / ticket-list-top;"]),In=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__ChatTitleBarGridItem",componentId:"sc-98ufla-4"})(["grid-row:top / chat-titlebar-bottom;grid-column:chat-thread-start / end;"]),Mn=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__TicketSidebarBodyGridItem",componentId:"sc-98ufla-5"})(["position:relative;grid-column:start / chat-thread-start;grid-row:ticket-list-top / ticket-list-bottom;"]),Dn=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__TicketSidebarFooterGridItem",componentId:"sc-98ufla-6"})(["grid-column:start / chat-thread-start;grid-row:ticket-list-bottom / bottom;"]),An=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__TicketSidebarFooterlessBodyGridItem",componentId:"sc-98ufla-7"})(["grid-column:start / chat-thread-start;grid-row:ticket-list-top / bottom;"]),Nn=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__ChatThreadGridItem",componentId:"sc-98ufla-8"})(["grid-row:chat-titlebar-bottom / bottom;grid-column:chat-thread-start / chat-thread-end;"]),Rn=Object(yn.a)(),Pn=Number(null!=(vn=null==Rn||null==(xn=Rn.version)||null==(_n=xn.match(/^(\d+)\./))?void 0:_n[1])?vn:0),Ln=Pn&&("safari"===(null==Rn?void 0:Rn.name)&&Pn<12||"chrome"===(null==Rn?void 0:Rn.name)&&Pn<70),Fn=i.a.createContext(()=>{});var Un=Object(r.default)("div").withConfig({displayName:"DeskChatLayout___StyledDiv",componentId:"sc-98ufla-9"})([""," padding:0 ","px 12px ","px;min-width:","px;max-width:","px;margin-left:auto;margin-right:auto;transition:all 0.15s ",";"],e=>e._css,16,16,e=>e._css2,e=>e._css3,o.transitionDefault);const $n=Object(r.default)(Tn).withConfig({displayName:"DeskChatLayout__InformationSidebarGridItem",componentId:"sc-98ufla-10"})(["position:relative;z-index:0;grid-row:chat-titlebar-bottom / bottom;grid-column:chat-thread-end / -1;"]),Bn=e=>({children:t,styles:n})=>{if(e){const a=e.id,i=n?Object(r.createGlobalStyle)(Cn||(Cn=kn`#${0} { ${0} }`),a,n):null;return Object(bn.createPortal)(i?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(i,{}),t]}):t,e)}return null},Vn={TicketSidebarHeaderGridItem:En,TicketSidebarBodyGridItem:Mn,TicketSidebarFooterGridItem:Dn,TicketSidebarFooterlessBodyGridItem:An,ChatThreadMessagesContainer:({children:e})=>{const[t,n]=Object(a.useState)(void 0),i=Object(a.useRef)(null),s=Object(a.useRef)(new On.ResizeObserver(([{contentRect:{width:e}}])=>{e!==t&&n(e)}));Object(a.useEffect)(()=>{const{current:e}=s;return i.current&&e.observe(i.current),()=>e.disconnect()},[]);const o=Object(a.useCallback)(({adjacentComponentWidth:e,bubbleHorizontalSpacing:n})=>t?t-32-2*e-2*n:void 0,[t]),l=Object(r.css)(["position:absolute;left:50%;transform:translateX(-50%);width:100%;height:100%;"]);return Object(W.jsx)(Fn.Provider,{value:o,children:Object(W.jsx)(Un,{ref:i,_css:Ln&&l,_css2:336,_css3:992,children:e})})},ChatTitleBarGridItem:Bn(null),ChatThreadGridItem:Bn(null),InformationSidebarGridItem:Bn(null)},zn={isIframeOverlap:!1,iframeLayoutWidth:f.C,setIframeLayoutWidth:()=>{}},Hn=i.a.createContext(Vn),qn=i.a.createContext(zn),Gn=({children:e})=>{const t=Object(a.useRef)(null),[n,i]=Object(a.useState)("normal"),[s,r]=Object(a.useState)(!1),[l,c]=Object(a.useState)(f.C),[d,u]=Object(a.useState)(),p=912+l,g=Object(a.useMemo)(()=>new On.ResizeObserver(([{contentRect:{width:e}}])=>{let t="normal";e<=1152?t="min":e>=1344&&(t="max"),r(e<=p),t!==n&&i(t)}),[p,n]);Object(a.useEffect)(()=>(t.current&&g.observe(t.current),()=>{g.disconnect()}),[g]),Object(a.useEffect)(()=>{const e=document.getElementById("ChatTitleBarGridItem"),t=document.getElementById("ChatThreadGridItem"),n=document.getElementById("InformationSidebarGridItem");u({ChatTitleBarGridItem:Bn(e),ChatThreadGridItem:Bn(t),InformationSidebarGridItem:Bn(n)})},[]);const[h,m]="max"===n?["336px","336px"]:"min"===n?["288px","288px"]:["25%",`calc(max(calc(100vw - ${o.LeftNavigationBar.collapsedWidth}px), ${p}px) / 4)`],b=Object(a.useMemo)(()=>({...Vn,...d}),[d]),j=Object(a.useMemo)(()=>({isIframeOverlap:s,iframeLayoutWidth:l,setIframeLayoutWidth:c}),[l,s]);return Object(W.jsx)(Hn.Provider,{value:b,children:Object(W.jsxs)(wn,{ref:t,sidebarWidth:h,minWidth:p,children:[Object(W.jsx)(qn.Provider,{value:j,children:e}),Object(W.jsxs)(Sn,{sidebarWidth:m,children:[Object(W.jsx)(In,{id:"ChatTitleBarGridItem"}),Object(W.jsx)(Nn,{id:"ChatThreadGridItem"}),Object(W.jsx)($n,{id:"InformationSidebarGridItem"})]})]})})};var Wn;let Kn;var Yn;!function(e){e.Default="default_category",e.TicketField="ticket_field_category",e.CustomerField="customer_field_category"}(Wn||(Wn={})),function(e){e[e.TicketSubject=0]="TicketSubject",e[e.TicketID=1]="TicketID",e[e.CustomerName=2]="CustomerName",e[e.SendbirdID=3]="SendbirdID"}(Kn||(Kn={})),function(e){e[e.InvalidTextValue=0]="InvalidTextValue",e[e.StringFieldInvalidValue=1]="StringFieldInvalidValue",e[e.IntegerFieldInvalidValue=2]="IntegerFieldInvalidValue",e[e.DropdownFieldInvalidValue=3]="DropdownFieldInvalidValue",e[e.RegularSearchWithFilter=4]="RegularSearchWithFilter",e[e.KeywordRequired=5]="KeywordRequired"}(Yn||(Yn={}));const Qn={[Kn.TicketSubject]:"channel_name",[Kn.TicketID]:"ticket",[Kn.CustomerName]:"customer__display_name",[Kn.SendbirdID]:"customer__sendbird_id"},Jn={[Kn.TicketSubject]:"desk.tickets.search.dropdown.defaultFilter.ticketSubject",[Kn.TicketID]:"desk.tickets.search.dropdown.defaultFilter.ticketId",[Kn.CustomerName]:"desk.tickets.search.dropdown.defaultFilter.customerName",[Kn.SendbirdID]:"desk.tickets.search.dropdown.defaultFilter.userId"},Xn=[{id:Kn.TicketSubject,key:Qn[Kn.TicketSubject],name:"desk.tickets.search.dropdown.defaultFilter.ticketSubject",category:Wn.Default},{id:Kn.TicketID,key:Qn[Kn.TicketID],name:"desk.tickets.search.dropdown.defaultFilter.ticketId",category:Wn.Default,isExclusive:!0},{id:Kn.CustomerName,key:Qn[Kn.CustomerName],name:"desk.tickets.search.dropdown.defaultFilter.customerName",category:Wn.Default},{id:Kn.SendbirdID,key:Qn[Kn.SendbirdID],name:"desk.tickets.search.dropdown.defaultFilter.userId",category:Wn.Default}];let Zn,ea;!function(e){e[e.Default=0]="Default",e[e.Inline=1]="Inline"}(Zn||(Zn={})),function(e){e[e.IntegratedSearch=0]="IntegratedSearch",e[e.TagsSearch=1]="TagsSearch"}(ea||(ea={}));const ta=Object(a.createContext)(void 0),na=r.default.div.withConfig({displayName:"TicketSearchInput__Wrapper",componentId:"uu62f8-0"})(["display:flex;flex-direction:row;width:100%;height:100%;"," ",""],({inputType:e})=>e===Zn.Default&&Object(r.css)(["padding-left:16px;border:1px solid ",";border-radius:4px;"],Object(o.cssVariables)("neutral-4")),({inputType:e,hasError:t})=>t&&e===Zn.Default&&Object(r.css)(["border-color:",";"],Object(o.cssVariables)("red-5"))),aa=r.default.div.withConfig({displayName:"TicketSearchInput__SpinnerWrapper",componentId:"uu62f8-1"})(["display:flex;align-items:center;justify-content:center;height:320px;"]),ia=r.default.p.withConfig({displayName:"TicketSearchInput__DropdownPlaceholder",componentId:"uu62f8-2"})(["margin:14px 16px;color:",";",";"],Object(o.cssVariables)("neutral-5"),o.Subtitles["subtitle-01"]),sa=r.default.ul.withConfig({displayName:"TicketSearchInput__DropdownMenuItemList",componentId:"uu62f8-3"})(["position:relative;overflow:hidden;margin:0;padding:0;width:100%;border-radius:4px;background-color:white;z-index:999;transition:opacity 0.1s ",";",";"],o.transitionDefault,o.elevation.popover),ra=r.default.div.withConfig({displayName:"TicketSearchInput__BlockItem",componentId:"uu62f8-4"})(["display:flex;align-items:center;width:100%;height:32px;padding:6px 16px;cursor:pointer;&:hover{background:",";","{background:",";border-color:",";}}",""],Object(o.cssVariables)("neutral-1"),o.Tag,Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3"),({isHighlighted:e})=>e&&Object(r.css)(["background:",";","{background:",";border-color:",";}"],Object(o.cssVariables)("neutral-1"),o.Tag,Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3"))),oa=r.default.div.withConfig({displayName:"TicketSearchInput__DefaultFilterItems",componentId:"uu62f8-5"})(["padding:8px 0;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-2")),la=r.default.div.withConfig({displayName:"TicketSearchInput__CustomFieldItems",componentId:"uu62f8-6"})(["padding:8px 16px;","{margin-left:0;margin-right:8px;margin-top:12px;}"],o.Tag),ca=r.default.div.withConfig({displayName:"TicketSearchInput__SectionBTitle",componentId:"uu62f8-7"})(["padding-top:8px;padding-bottom:4px;font-size:12px;font-weight:500;color:",";"],Object(o.cssVariables)("neutral-6")),da=r.default.span.withConfig({displayName:"TicketSearchInput__FilterItem",componentId:"uu62f8-8"})(["cursor:pointer;",""],({isHighlighted:e})=>e&&Object(r.css)(["","{background:",";border-color:",";}"],o.Tag,Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3"))),ua=Object(r.default)(o.ScrollBar).withConfig({displayName:"TicketSearchInput__StyledScrollBar",componentId:"uu62f8-9"})(["max-height:320px;@media (max-width:","px){max-height:480px;}"],336),pa=r.default.div.withConfig({displayName:"TicketSearchInput__SearchArea",componentId:"uu62f8-10"})(["display:flex;width:100%;min-height:32px;max-height:96px;"]),ga=r.default.input.withConfig({displayName:"TicketSearchInput__SearchInput",componentId:"uu62f8-11"})(["width:100%;min-width:8px;height:32px;padding:4px 0;outline:0;border:0;font-size:14px;&::placeholder{color:",";opacity:1;}:-ms-input-placeholder,::-ms-input-placeholder{color:",";}"],Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-6")),ha=Object(r.default)(o.Icon).withConfig({displayName:"TicketSearchInput__SearchIcon",componentId:"uu62f8-12"})(["margin:6px;"]),ma=r.default.p.withConfig({displayName:"TicketSearchInput__ErrorText",componentId:"uu62f8-13"})(["text-align:left;margin-top:4px;color:",";",";"],Object(o.cssVariables)("red-5"),o.Typography["caption-01"]),fa=r.default.button.withConfig({displayName:"TicketSearchInput__SearchQueryTagRemoveButton",componentId:"uu62f8-14"})(["width:16px;height:16px;padding:2px;margin-left:4px;margin-right:2px;border:0;border-radius:2px;background-color:",";outline:0;cursor:pointer;&:hover{background-color:",";}"],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-3")),ba=r.default.span.withConfig({displayName:"TicketSearchInput__SearchQueryTagWrapper",componentId:"uu62f8-15"})(["display:inline-flex;align-items:center;height:20px;padding-left:8px;margin-top:6px;margin-right:8px;background-color:",";border-radius:3px;white-space:nowrap;color:",";",";&:focus-within{background-color:",";border:1px solid ",";}&[data-is-editing='false']{user-select:none;cursor:text;& > span{max-width:210px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}}span{display:inline;outline:0;}",""],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-7"),o.Typography["label-02"],Object(o.cssVariables)("purple-2"),Object(o.cssVariables)("purple-7"),({hasError:e})=>e&&Object(r.css)(["background-color:",";color:white;","{background-color:",";svg{fill:white;}}"],Object(o.cssVariables)("red-5"),fa,Object(o.cssVariables)("red-5"))),ja=r.default.div.withConfig({displayName:"TicketSearchInput__SearchedItemsWrapper",componentId:"uu62f8-16"})(["padding:8px 0;"]),ya=Object(a.forwardRef)(({query:e,onFocus:t,onBlur:n,onSubmit:i,onRemove:s},r)=>{const l=Object(E.a)(),{isInitialized:c=!1}=e,[d,u]=Object(a.useState)(!c),p=Object(a.useRef)(null),{highlightedIndex:g,setHighlightedIndex:h}=Object(a.useContext)(ta),m=t=>{p.current&&(p.current.innerText=t,i({...e,value:t.trim()}),u(!1))},b=()=>{if(p.current){var t,n,a;if("DROPDOWN"===e.fieldType&&null!=g)return m(null!=(n=null==(a=e.options)?void 0:a[g])?n:""),void h(-1,{isOpen:!0});const s=(null!=(t=p.current.textContent)?t:"").trim(),r=hn()(),o=()=>{var t;return s?"DROPDOWN"!==e.fieldType||null!=(t=e.options)&&t.includes(s)?"INTEGER"!==e.fieldType||f.pb.test(s)&&!r.test(s)?r.test(s)?{type:Yn.StringFieldInvalidValue}:void 0:{type:Yn.IntegerFieldInvalidValue}:{type:Yn.DropdownFieldInvalidValue}:{type:Yn.KeywordRequired}};i({...e,value:s,error:o()}),u(!1)}};Object(a.useEffect)(()=>{if(d){const e=window.getSelection();if(e&&e.rangeCount&&p.current&&p.current.firstChild){const t=document.createRange();t.setStartAfter(p.current.firstChild),t.collapse(!0),e.removeAllRanges(),e.addRange(t)}}},[d]),Object(a.useEffect)(()=>{const e=window.getSelection();if(e&&e.rangeCount&&p.current){const t=document.createTextNode(" ");p.current.appendChild(t);const n=document.createRange();n.setStartAfter(t),e.removeAllRanges(),e.addRange(n)}},[]),Object(a.useEffect)(()=>{c&&p.current&&(p.current.innerText=` ${e.value}`)},[]),Object(a.useImperativeHandle)(r,()=>({id:e.id,updateQueryValue:m}));const j=Object(a.useMemo)(()=>e.category===Wn.Default?l.formatMessage({id:Jn[e.id]}):e.name,[l,e]);return Object(W.jsxs)(ba,{"data-is-editing":d,"data-test-id":"SearchQueryTagWrapper",hasError:!d&&null!=e.error,onFocus:t(e),onBlur:e=>{b(),n(e)},onKeyDown:t=>{if("Enter"===t.key&&b(),"Backspace"===t.key&&p.current){var n;""===(null!=(n=p.current.textContent)?n:"").trim()&&s(e)}if("ArrowDown"===t.key){if(null!=g)return void h(g+1);h(0)}"ArrowUp"===t.key&&null!=g&&g>-1&&h(g-1)},onClick:()=>{d||u(!0)},children:[Object(W.jsxs)("span",{children:[Object(W.jsxs)("span",{children:[j,":"]}),Object(W.jsx)("span",{ref:p,contentEditable:d,"data-test-id":"SearchQueryTagContentEditable",onInput:t=>{var n;0===(null==(n=t.currentTarget.textContent)?void 0:n.length)&&s(e)},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)},...d?{onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault()}}:{}})]}),!d&&Object(W.jsx)(fa,{onClick:()=>{s(e)},children:Object(W.jsx)(o.Icon,{icon:"close",size:12,color:Object(o.cssVariables)("neutral-6")})})]})}),Oa=e=>"LINK"!==e.fieldType,va=e=>JSON.stringify(e.reduce((e,t)=>t.category===Wn.Default?{...e,[t.key]:t.value}:t.category===Wn.TicketField?{...e,ticket_fields:{...e.ticket_fields,[t.id]:t.value}}:t.category===Wn.CustomerField?{...e,customer_fields:{...e.customer_fields,[t.id]:t.value}}:e,{})),xa=e=>Wt.a.stringify(e.reduce((e,t)=>(e[t.id]={name:t.name,value:t.value,category:t.category},e),{})),_a=(e,t)=>{const n=Xn.find(t=>t.id===e);if(n){const{id:e,key:a,isExclusive:i,...s}=n;return Wt.a.stringify({q:{[e]:{...s,value:null!=t?t:""}}})}return""};var Ca=Object(r.default)(o.ScrollBar).withConfig({displayName:"TicketSearchInput___StyledScrollBar",componentId:"uu62f8-17"})(["display:flex;justify-content:stretch;flex:1;"]);const ka=Object(a.forwardRef)(({defaultQueryString:e,initialSearchQuery:t,showResetButton:n,showBackButton:i=!0,backButtonProps:s,inputType:r=Zn.Default,popperProps:l,className:c,onSearch:d,onResetButtonClick:u,...p},g)=>{var h,m;const{pid:f,region:j}=Object(b.g)(e=>{var t,n;return{pid:e.desk.project.pid,region:null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:""}}),[{data:y,status:O,error:v},x]=Object(P.g)(async()=>await Object(N.fetchTicketFields)(f,j,{offset:0,limit:100}),[f,j]),[{data:_,status:C,error:k},w]=Object(P.g)(async()=>await Object(N.fetchCustomerFields)(f,j,{offset:0,limit:100}),[f,j]),T=Object(E.a)(),{isOpen:S,highlightedIndex:I,openMenu:M,closeMenu:D,clearSelection:A,getInputProps:R,getMenuProps:L,getItemProps:F}=Object(a.useContext)(ta),[U,$]=Object(a.useState)([]),[B,V]=Object(a.useState)(""),[z,H]=Object(a.useState)(null),[q,G]=Object(a.useState)([]),[K,Y]=Object(a.useState)(!1),[Q,J]=Object(a.useState)(!1),[X,Z]=Object(a.useState)(!1),ee=null!=g?g:Object(a.useRef)(null),te=Object(a.useRef)(null),ne=Object(a.useRef)(!1),ae=()=>{$([]),V(""),Y(!1)},ie=e=>!U.some(t=>t.id===e.id),se="loading"===O||"loading"===C,re="success"===O&&"success"===C,oe=null!=(h=null==y?void 0:y.data.results.filter(Oa).map(e=>({...e,category:Wn.TicketField})))?h:[],le=null!=(m=null==_?void 0:_.data.results.filter(Oa).map(e=>({...e,category:Wn.CustomerField})))?m:[],ce=Xn.map(e=>({...e,name:T.formatMessage({id:Jn[e.id]})})),de=U.length>0?ce.filter(e=>!e.isExclusive):ce,ue=fn()(de,oe,le).filter(ie),pe=e=>"STRING"===e?T.formatMessage({id:"desk.customFields.detail.field.fieldType.item.text"}):"INTEGER"===e?T.formatMessage({id:"desk.customFields.detail.field.fieldType.item.integer"}):"DROPDOWN"===e?T.formatMessage({id:"desk.customFields.detail.field.fieldType.item.dropdown"}):"LINK"===e?T.formatMessage({id:"desk.customFields.detail.field.fieldType.item.link"}):"",ge=Object(a.useCallback)(()=>{const e=hn()();if(U.length>3)return T.formatMessage({id:"desk.tickets.search.error.fieldLimit"});if(U.length>0){if(""!==B)return T.formatMessage({id:"desk.tickets.search.error.regularSearchWithFilter"});const e=U.filter(e=>void 0!==e.error).map(e=>e.error),t=e.some(e=>(null==e?void 0:e.type)===Yn.KeywordRequired),n=e.some(e=>(null==e?void 0:e.type)===Yn.StringFieldInvalidValue),a=e.some(e=>(null==e?void 0:e.type)===Yn.IntegerFieldInvalidValue),i=e.some(e=>(null==e?void 0:e.type)===Yn.DropdownFieldInvalidValue);return t?T.formatMessage({id:"desk.tickets.search.error.keywordRequired"}):n&&a||n&&i||a&&i?T.formatMessage({id:"desk.tickets.search.error.invalidValues"}):a?T.formatMessage({id:"desk.tickets.search.error.invalidValue.integer"}):i?T.formatMessage({id:"desk.tickets.search.error.invalidValue.dropdown"}):n?T.formatMessage({id:"desk.tickets.search.error.invalidValue.text"}):""}return""===B?T.formatMessage({id:"desk.tickets.search.error.keywordRequired"}):e.test(B)?T.formatMessage({id:"desk.tickets.search.error.invalidValue.integratedSearch"}):""},[T,U,B]),he=e=>{null==p.onClick||p.onClick(e),M()},me=e=>{if("Enter"===e.key){var t;const e=null==I?null:null!=z&&z.options?z.options[I]:""!==B?ue.some(e=>e.name.toLowerCase()===B.toLowerCase())?ue.filter(e=>B.toLowerCase()===e.name.toLowerCase())[I]:(U.length,null):ue[I];if(e&&"string"!=typeof e&&te.current){const t={...e,value:""};return $([...U,t]),"DROPDOWN"!==e.fieldType&&D(),""!==B&&V(""),void J(!1)}const n=hn()();D(),A(),null==(t=ee.current)||t.blur();const a=""!==B&&0===U.length&&!n.test(B),i=""===B&&U.length>0&&U.every(e=>null==e.error);if(U.length<=3&&(a||i)){return d(a?B:U),Y(!1),void J(!0)}return Y(!0),void o.toast.error({message:ge()})}if("Backspace"===e.key&&""===B){const e=[...U];e.pop(),$(e)}},fe=e=>{null==p.onChange||p.onChange(e),V(e.target.value),J(!1)},be=e=>()=>{if(te.current){const t={...e,value:""};$([...U,t]),J(!1),"DROPDOWN"!==e.fieldType&&D()}},je=e=>()=>{V(""),be(e)()},ye=e=>{null==u||u(e),ae()},Oe=e=>{null==s||null==s.onClick||s.onClick(e),ae()},ve=e=>{var t;H(null),t=e,$(U.map(e=>e.id===t.id?t:e)),M(),setTimeout(()=>{var e;return null==(e=ee.current)?void 0:e.focus()},0)},xe=e=>()=>{H(e)},_e=()=>{H(null)},Ce=e=>{$(U.filter(t=>t.id!==e.id)),(null==z?void 0:z.id)===e.id&&H(null)},ke=e=>()=>{var t;const n=q.find(e=>{var t;return(null==(t=e.current)?void 0:t.id)===(null==z?void 0:z.id)});null==n||null==(t=n.current)||t.updateQueryValue(` ${e}`),H(null)},we=()=>{const e=U.find(e=>e.isExclusive);if(se)return Object(W.jsx)(aa,{children:Object(W.jsx)(o.Spinner,{size:32})});if(e)return Object(W.jsx)(ia,{children:T.formatMessage({id:"desk.tickets.search.dropdown.placeholder.exclusive"},{field:T.formatMessage({id:e.name,defaultMessage:e.name})})});if(null!=z&&z.options)return z.options.map((e,t)=>Object(W.jsx)(ra,{isHighlighted:I===t,onMouseDown:ke(e),children:Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,children:`${z.name}: ${e}`})},e));if(!(B.length>0)){const e=ue.filter(e=>e.category===Wn.Default&&(0===U.length||!e.isExclusive)),t=ue.filter(e=>e.category===Wn.TicketField),n=ue.filter(e=>e.category===Wn.CustomerField);return Object(W.jsxs)(ua,{children:[Object(W.jsx)(oa,{children:e.filter(ie).map((e,t)=>Object(W.jsx)(ra,{isHighlighted:I===t,...F({item:e,index:t,onClick:be(e)}),children:Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,children:e.name})},e.id))}),re&&Object(W.jsxs)(W.Fragment,{children:[t.length>0&&Object(W.jsxs)(la,{children:[Object(W.jsx)(ca,{children:T.formatMessage({id:"desk.tickets.search.dropdown.filter.ticketField.title"})}),t.filter(ie).map((t,n)=>Object(W.jsx)(da,{isHighlighted:I===e.length+n,...F({item:t,index:Xn.length+n,onClick:be({...t,category:Wn.TicketField})}),children:Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,children:`${t.name}: ${pe(t.fieldType)}`})},t.id))]}),n.length>0&&Object(W.jsxs)(la,{children:[Object(W.jsx)(ca,{children:T.formatMessage({id:"desk.tickets.search.dropdown.filter.customerField.title"})}),n.filter(ie).map((n,a)=>Object(W.jsx)(da,{isHighlighted:I===e.length+t.length+a,...F({item:n,index:Xn.length+oe.length+a,onClick:be({...n,category:Wn.CustomerField})}),children:Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,children:`${n.name}: ${pe(n.fieldType)}`})},n.id))]})]})]})}return ue.some(e=>e.name.toLowerCase()===B.toLowerCase())?Object(W.jsx)(ja,{children:ue.filter(e=>B.toLowerCase()===e.name.toLowerCase()).map((e,t)=>Object(W.jsx)(ra,{isHighlighted:I===t,...F({item:e,index:t,onClick:je(e)}),children:Object(W.jsx)(da,{isHighlighted:I===t,children:Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,children:e.fieldType?`${e.name}: ${pe(e.fieldType)}`:e.name})})},e.id))}):0===U.length?Object(W.jsx)(ia,{children:T.formatMessage({id:"desk.tickets.search.dropdown.placeholder"})}):void 0};return Object(a.useEffect)(()=>{x(),w()},[w,x]),Object(a.useEffect)(()=>{if(""!==(null==t?void 0:t.value)&&null!=(null==t?void 0:t.type)){if(!ne.current){const{type:e,value:n}=t;if(e===ea.IntegratedSearch)return V(n),d(n),void(ne.current=!0);if(e===ea.TagsSearch){const e=Wt.a.parse(n),t=Object.keys(e).map(e=>Number(e)),a=t=>({...t,value:e[`${t.id}`].value,isInitialized:!0});if(t.every(t=>e[`${t}`].category===Wn.Default&&Object.values(Kn).includes(t))){const e=Xn.filter(e=>t.includes(e.id)).map(a);return $(e),d(e),void(ne.current=!0)}if(re){const n=ue.filter(n=>t.includes(n.id)&&n.category===e[n.id].category).map(a);return $(n),d(n),void(ne.current=!0)}}}}else ne.current=!0},[ue,t,re,d]),Object(a.useEffect)(()=>{q.length!==U.length&&G(Array.from({length:U.length}).map((e,t)=>q[t]?q[t]:Object(a.createRef)()))},[U.length,q]),Object(a.useEffect)(()=>{""===B&&0===U.length&&Y(!1)},[U.length,B]),Object(a.useEffect)(()=>{Z(!!z)},[z]),Object(P.s)(v),Object(P.s)(k),Object(W.jsx)(cn.a,{children:({ref:e})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(na,{ref:e,className:c,inputType:r,hasError:K,children:[i&&Object(W.jsx)(o.IconButton,{"data-test-id":"BackButton",icon:"arrow-left",buttonType:"secondary",size:"small",onClick:Oe,...s}),Object(W.jsx)(Ca,{children:Object(W.jsxs)(pa,{ref:te,children:[U.map((e,t)=>Object(W.jsx)(ya,{ref:q[t],query:e,onFocus:xe,onBlur:_e,onSubmit:ve,onRemove:Ce},e.id)),Object(W.jsx)(ga,{...R({ref:ee,...p,value:B,placeholder:U.length>0?Q||X?"":T.formatMessage({id:"desk.tickets.search.guideText"}):p.placeholder,onClick:he,onChange:fe,onKeyDown:me}),"data-test-id":"SearchInput"})]})}),n||B.length>0||U.length>0?Object(W.jsx)(o.IconButton,{"data-test-id":"ClearButton",icon:"close",buttonType:"secondary",size:"small",onClick:ye}):Object(W.jsx)(ha,{icon:"search",size:20,color:Object(o.cssVariables)("neutral-9")})]}),r===Zn.Default&&K&&Object(W.jsx)(ma,{"data-test-id":"ErrorText",children:ge()}),Object(W.jsx)(dn.a,{placement:"bottom-start",...l,children:({ref:e,style:t})=>S&&Object(W.jsx)(sa,{...L({ref:e,style:t}),"data-test-id":"DropdownMenuItemList",children:we()})})]})})}),wa=(e,t)=>{switch(t.type){case pn.default.stateChangeTypes.itemMouseEnter:return{...t,highlightedIndex:null};case pn.default.stateChangeTypes.blurInput:var n;return{...t,inputValue:e.inputValue,isOpen:"DROPDOWN"===(null==(n=e.selectedItem)?void 0:n.fieldType)};case pn.default.stateChangeTypes.mouseUp:return{...t,inputValue:e.inputValue};default:return t}},Ta=Object(a.forwardRef)((e,t)=>Object(W.jsx)(pn.default,{stateReducer:wa,itemToString:e=>{var t;return null!=(t=null==e?void 0:e.name)?t:""},children:n=>Object(W.jsx)(un.c,{...n.getRootProps(void 0,{suppressRefError:!0}),children:Object(W.jsx)(ta.Provider,{value:n,children:Object(W.jsx)(ka,{ref:t,...e})})})})),Sa=Object(r.default)(V.Ub).withConfig({displayName:"assignmentLogsList__TicketListPagination",componentId:"sc-1pb10vf-0"})(["margin-left:auto;"]),Ea=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"assignmentLogsList__StyledTable",componentId:"sc-1pb10vf-1"})(["flex:1;"]),Ia={7:o.DateRangePickerValue.Last7Days,14:o.DateRangePickerValue.Last14Days,30:o.DateRangePickerValue.Last30Days,90:o.DateRangePickerValue.Last90Days},Ma=Object(a.memo)(({state:e,isAgent:t,queryString:n})=>{const i=Object(E.a)(),s=Object(P.N)(),r=Object(P.c)(),{assignmentLogs:l,assignmentLogsCount:d,isFetching:u}=e,{page:p,pageSize:g,sortBy:h,sortOrder:m,startDate:b,endDate:j,channelTypes:y,ticketStatus:O,updateParams:v}=n,x=Object(a.useMemo)(()=>((e,t)=>{if(!e||!t)return o.DateRangePickerValue.AllDates;const n=c()(e),a=c()(t),i=n.format(f.nb),s=a.format(f.nb),r=c()(),l=r.format(f.nb);if(i===s&&i===l)return o.DateRangePickerValue.Today;if(i===s&&1===r.diff(i,"days"))return o.DateRangePickerValue.Yesterday;const d=Ia[a.diff(n,"days")+1];return n&&a&&!d?o.DateRangePickerValue.Custom:d})(b,j)===Ia[7],[j,b]),_=!y||V.Ec.every(e=>y.includes(e)),C=Object(a.useMemo)(()=>O!==f.jc.ALL||!_||!x,[O,_,x]),k=Object(a.useCallback)((e,t)=>{v({page:e,pageSize:t})},[v]),w=Object(a.useCallback)((e,t)=>{e&&t&&v({sortBy:e.key,sortOrder:t||f.Tb.DESCEND})},[v]),T=Object(a.useCallback)(e=>h===e?m:void 0,[h,m]),S=Object(a.useMemo)(()=>[{title:i.messages["desk.assignmentLogs.list.column.assignedOn"],key:f.i.ASSIGNED_AT,dataIndex:"assignedAt",defaultSortOrder:T(f.i.ASSIGNED_AT),sorter:!0,render:({assignedAt:e})=>Object(W.jsx)(V.oc,{timestamp:e,format:"lll"})},{title:i.messages["desk.assignmentLogs.list.column.subject"],key:f.i.SUBJECT,defaultSortOrder:T(f.i.SUBJECT),sorter:!0,render:e=>{const n=e.assignedTicket,a=_a(Kn.TicketID,n.id.toString());return Object(W.jsx)(V.rc,{ticket:n,subjectLinkTo:`/${r}/desk/${t?"conversation":"tickets"}/${n.id}?${a}`,isAgent:t})}},{title:i.messages["desk.assignmentLogs.list.column.responseTime"],key:f.i.RESPONSE_TIME,dataIndex:"responseTime",defaultSortOrder:T(f.i.RESPONSE_TIME),sorter:!0,render:({responseTime:e})=>e?Object(H.renderTimestring)(e,s):f.Z},{title:i.messages["desk.assignmentLogs.list.column.ticketStatus"],dataIndex:"status",render:e=>Object(W.jsx)(V.qc,{ticketStatus:e.assignedTicket.status2})},{title:i.messages["desk.assignmentLogs.list.column.endedOn"],key:f.i.ENDED_AT,dataIndex:"endedAt",defaultSortOrder:T(f.i.ENDED_AT),sorter:!0,render:({endedAt:e})=>Object(W.jsx)(V.oc,{timestamp:e,format:"lll"})},{title:i.messages["desk.assignmentLogs.list.column.closedOn"],key:f.i.CLOSED_AT,defaultSortOrder:T(f.i.CLOSED_AT),sorter:!0,render:e=>Object(W.jsx)(V.oc,{timestamp:e.assignedTicket.closedAt,format:"lll"})}],[r,T,i.messages,t]);return t||S.find(e=>e.key===f.i.AGENT)||S.splice(2,0,{title:i.messages["desk.assignmentLogs.list.column.agent"],key:f.i.AGENT,dataIndex:"agent",defaultSortOrder:T(f.i.AGENT),sorter:!0,render:e=>Object(W.jsx)(V.kc,{agent:e.agent})}).join(),Object(W.jsx)(Ea,{rowKey:"id",dataSource:l,loading:u,showScrollbars:!0,onSortByUpdated:w,columns:S,emptyView:C?Object(W.jsx)(z.a,{icon:"no-search",title:i.messages["desk.assignmentLogs.list.noResult.title"],description:i.messages["desk.assignmentLogs.list.noResult.desc"]}):Object(W.jsx)(z.a,{icon:"archive",title:i.messages["desk.assignmentLogs.list.noItem.title"],description:i.messages["desk.assignmentLogs.list.noItem.desc"]}),footer:Object(W.jsx)(Sa,{current:p,total:d,pageSize:g,onChange:k,onItemsPerPageChange:k})})}),Da=Object(r.default)(V.hc).withConfig({displayName:"assignmentLogs__AssignmentLogsContainer",componentId:"sc-1rnigh5-0"})(["position:relative;justify-content:stretch;"," + *{margin-top:24px;}"],V.Sb),Aa={page:1,pageSize:f.qb,sortBy:f.i.ASSIGNED_AT,sortOrder:f.Tb.DESCEND,startDate:c()().subtract(6,"day").format(f.nb),endDate:c()().format(f.nb),ticketStatus:f.jc.ALL,channelTypes:[],agentId:void 0};var Na=Object(r.default)(V.f).withConfig({displayName:"assignmentLogs___StyledAutoRefreshDropdown",componentId:"sc-1rnigh5-1"})(["margin-left:8px;"]);const Ra=Object(a.memo)(()=>{w();const{getErrorMessage:e}=Object($.a)(),{isPermitted:t}=Object(P.h)(),n=t(["desk.agent"]),i=Object(E.a)(),{pid:s,region:r,agentId:l}=Object(b.g)(e=>{var t,n;return{region:null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:"",pid:e.desk.project.pid,agentId:e.desk.agent.id}}),[d,u]=Object(a.useState)({isFetching:!1,assignmentLogs:[],assignmentLogsCount:0}),p=Object(a.useRef)(d),g=Object(B.a)(n?Aa:Object.assign(Aa,{agentId:-1}),{page:e=>{const t=Number(e);return Number.isInteger(t)&&t>0},pageSize:e=>{const t=Number(e);return Number.isInteger(t)&&t>0&&f.E.some(e=>e===t)},sortBy:e=>{if(e){return[f.i.AGENT,f.i.ASSIGNED_AT,f.i.CLOSED_AT,f.i.ENDED_AT,f.i.RESPONSE_TIME,f.i.SUBJECT].some(t=>t===e)}return!1},sortOrder:e=>{if(e){return[f.Tb.ASCEND,f.Tb.DESCEND].some(t=>t===e)}return!1},startDate:(e,t)=>{if(Array.isArray(e))return!1;if(!e&&!t.endDate)return!0;if(e){const n=f.ob.test(e),a=c()(e,f.nb),i=c()(t.endDate,f.nb),s=a.isValid(),r=a.isBefore(i),o=a.isSame(i);return!(!n||!s||!o&&!r)}return!1},endDate:(e,t)=>{if(Array.isArray(e))return!1;if(!e&&!t.startDate)return!0;if(e){const n=f.ob.test(e),a=c()(t.startDate,f.nb),i=c()(e,f.nb),s=i.isValid(),r=i.isAfter(a),o=i.isSame(a);return!(!n||!s||!o&&!r)}return!1},ticketStatus:e=>{if(e){return[f.jc.ALL,f.jc.ACTIVE,f.jc.CLOSED,f.jc.IDLE,f.jc.PENDING,f.jc.WIP].some(t=>t===e)}return!1},channelTypes:e=>Vt(e),agentId:e=>{const t=Number(e);return Number.isInteger(t)}}),{page:h,pageSize:m,sortBy:j,sortOrder:y,startDate:O,endDate:v,ticketStatus:x,channelTypes:_,agentId:C}=g,k=Object(a.useMemo)(()=>Kt(_),[_]),T=Object(a.useCallback)(()=>n?l:-1===C?void 0:C,[C,l,n]),S=Object(a.useCallback)(async({limit:t,offset:n,sortBy:a,sortOrder:i,startDate:l,endDate:c,ticketStatus:d,channelTypes:g,agentId:h})=>{u({...p.current,isFetching:!0});try{const{data:{results:e,count:o}}=await Object(N.fetchAssignmentLogs)(s,r,{agent:h,limit:t,offset:n,order:Object(Yt.g)(a,i),startDate:l,endDate:c,ticketChannelType:g,ticketStatus2:Object(Yt.j)(d)});u({isFetching:!1,assignmentLogs:e,assignmentLogsCount:o})}catch(t){u({...p.current,isFetching:!1}),o.toast.error({message:e(t)})}},[e,s,r]),I=Object(a.useCallback)(()=>{S({limit:m,offset:(h-1)*m,sortBy:j,sortOrder:y,startDate:O,endDate:v,ticketStatus:x,channelTypes:k,agentId:T()})},[k,v,S,T,h,m,j,y,O,x]);return Object(a.useEffect)(()=>{p.current=d},[d]),Object(a.useEffect)(()=>{I()},[I]),Object(W.jsxs)(Da,{children:[Object(W.jsx)(V.Sb,{children:Object(W.jsxs)(V.Sb.Title,{children:[i.formatMessage({id:"desk.assignmentLogs.header.lbl"}),Object(W.jsx)(Na,{onRefreshTriggered:I})]})}),Object(W.jsx)(ln,{isFetching:d.isFetching,queryString:{...g,channelTypes:k}}),Object(W.jsx)(Ma,{state:d,isAgent:n,queryString:{...g,channelTypes:k}})]})});var Pa=n("E+oP"),La=n.n(Pa),Fa=n("3JPx"),Ua=n("DiuB"),$a=n("aD8z");const Ba=r.default.div.withConfig({displayName:"reconnectionNotification__ReconnectNotificationWrapper",componentId:"sc-11r2wyc-0"})(["position:absolute;bottom:0;width:100%;padding-top:16px;padding-right:16px;padding-left:16px;padding-bottom:8px;"]),Va=r.default.div.withConfig({displayName:"reconnectionNotification__Container",componentId:"sc-11r2wyc-1"})(["position:relative;width:100%;height:",";transition-property:height;transition:0.5s ",";"],({$isOpen:e,$height:t})=>e?`${t}px`:0,o.transitionDefault),za=Object(b.d)(e=>({isConnected:e.sendbird.isConnected,isReconnectFailed:e.sendbird.isReconnectFailed}))(({isConnected:e,isReconnectFailed:t})=>{const[n,i]=Object(a.useState)(!1),[s,r]=Object(a.useState)(null),[l,c]=Object(a.useState)(0),d=Object(E.a)(),u=Object(P.S)(e=>{const{height:t}=e.contentRect;t>0&&c(t)},{mode:"height"}),p=()=>{window.dashboardSB.reconnect()};return Object(a.useEffect)(()=>{t?(i(!0),r({type:"error",message:d.formatMessage({id:"common.reconnection.failed.inline_notification"})})):e?i(!1):(i(!0),r({type:"warning",message:d.formatMessage({id:"common.reconnection.try.inline_notification"})}))},[e,t,d]),s?Object(W.jsx)(Va,{$isOpen:n,$height:l,children:Object(W.jsx)(Ba,{ref:u,children:Object(W.jsx)(o.InlineNotification,{type:s.type,message:s.message,action:"error"===s.type?{label:"Retry",onClick:p}:void 0})})}):null});var Ha=n("wFjZ");let qa;!function(e){e.COLLAPSED="collapsed",e.EXPANDED="expanded"}(qa||(qa={}));const Ga=r.default.div.withConfig({displayName:"iframeSidebar__IframeContainer",componentId:"sc-1uvsdkv-0"})(["grid-row:ticket-list-top / bottom;background:white;border-top:1px solid ",";transition:border-width 0.2s ",",opacity 0.2s ",";will-change:border-width,opacity;overflow:hidden;"],Object(o.cssVariables)("neutral-3"),o.transitionDefault,o.transitionDefault),Wa=r.default.div.withConfig({displayName:"iframeSidebar__IframePlaceholder",componentId:"sc-1uvsdkv-1"})(["display:grid;width:","px;grid-row:ticket-list-top / bottom;"],24),Ka=r.default.span.withConfig({displayName:"iframeSidebar__HeaderTitle",componentId:"sc-1uvsdkv-2"})(["color:",";font-size:14px;font-weight:600;transition:width 0.2s ",",opacity 0.2s ",";will-change:width,opacity;"],Object(o.cssVariables)("neutral-10"),o.transitionDefault,o.transitionDefault),Ya=r.default.div.withConfig({displayName:"iframeSidebar__Header",componentId:"sc-1uvsdkv-3"})(["display:flex;justify-content:space-between;align-items:center;grid-row:top / ticket-list-top;padding-left:16px;padding-right:8px;background:white;transition:padding 0.2s ",";will-change:padding;& > button{transition:width 0.2s ",";will-change:width;}",""],o.transitionDefault,o.transitionDefault,e=>e.isCollapsed&&Object(r.css)(["justify-content:flex-end;padding:0;","{width:","px;& > button{width:","px;}}"],o.IconButton,24,24)),Qa=r.default.div.withConfig({displayName:"iframeSidebar__AnimateContainer",componentId:"sc-1uvsdkv-4"})(["display:grid;grid-template-rows:inherit;grid-row:top / bottom;transition:width 0.2s ",",box-shadow 0.2s ",";will-change:width,box-shadow;background:white;border-left:none;"," "," ",""],o.transitionDefault,o.transitionDefault,e=>e.isCollapsed&&Object(r.css)(["","{opacity:0;}","{overflow:hidden;width:0;opacity:0;}"],Ga,Ka),e=>e.isOverlap&&Object(r.css)(["position:fixed;top:","px;right:0;height:calc(100vh - ","px);z-index:",";border-left:1px solid ",";"],e.top,e.top,Ha.b.drawer,Object(o.cssVariables)("neutral-3")),e=>!e.isCollapsed&&e.isOverlap&&Object(r.css)(["",";border-left:none;"],o.shadow[12])),Ja=r.default.iframe.withConfig({displayName:"iframeSidebar__StyledIframe",componentId:"sc-1uvsdkv-5"})(["width:100%;height:100%;border:none;background:white;"]),Xa=r.default.div.withConfig({displayName:"iframeSidebar__SpinnerContainer",componentId:"sc-1uvsdkv-6"})(["display:flex;justify-content:center;align-items:center;width:100%;height:100%;"]),Za=r.default.div.withConfig({displayName:"iframeSidebar__ErrorContainer",componentId:"sc-1uvsdkv-7"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;"]),ei=r.default.div.withConfig({displayName:"iframeSidebar__ErrorContent",componentId:"sc-1uvsdkv-8"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;padding-bottom:8%;color:",";"," & > svg{margin-bottom:12px;}& > button{margin-top:18px;}"],Object(o.cssVariables)("neutral-7"),o.Subtitles["subtitle-02"]),ti=Object(a.forwardRef)((e,t)=>Object(W.jsx)(Ja,{...e,ref:t,sandbox:"allow-forms allow-popups allow-popups-to-escape-sandbox allow-scripts allow-same-origin",allow:"camera;microphone"})),ni=Object(a.memo)(({ticketId:e})=>{const t=Object(E.a)(),n=Object(s.k)(),{isIframeOverlap:i,setIframeLayoutWidth:r}=Object(a.useContext)(qn),l=Object(a.useContext)(m.a),[c,d]=Object(a.useState)((()=>{const e=H.ClientStorage.get(f.mb);return[qa.COLLAPSED,qa.EXPANDED].some(t=>t===e)?e:(H.ClientStorage.set(f.mb,qa.EXPANDED),qa.EXPANDED)})()),{iframeApp:u,isKeyFetching:p,isKeyVerifying:g,generateKeyError:h,verifyUrlError:b,generateHtmlKey:j,url:y}=Object(P.x)(e),O=Object(a.useRef)(null);Object(a.useEffect)(()=>{var e;if(null!=(e=n.location.state)&&e.forceReload&&O.current)try{const{src:e}=O.current;O.current.src=e}catch(e){Object(H.logException)({error:e})}},[n.location.state]);const v=c===qa.COLLAPSED,x=v?"24px":`${null==u?void 0:u.width}px`;Object(a.useEffect)(()=>{r(u&&u.isEnabled&&!v?u.width:f.C)},[u,v,r]);const _=Object(a.useCallback)(()=>{localStorage.setItem(f.mb,v?qa.EXPANDED:qa.COLLAPSED),d(e=>e===qa.COLLAPSED?qa.EXPANDED:qa.COLLAPSED)},[v]),C=Object(a.useMemo)(()=>Object(W.jsxs)(Ya,{isCollapsed:v,children:[Object(W.jsx)(Ka,{children:null==u?void 0:u.title}),Object(W.jsx)(o.IconButton,{type:"button",buttonType:"tertiary",icon:v?"collapse":"expand",size:"small",onClick:_,title:v?t.formatMessage({id:"desk.apps.iframe.btn.expand.tooltip"}):t.formatMessage({id:"desk.apps.iframe.btn.collapse.tooltip"}),tooltipPlacement:"bottom-end"})]}),[_,u,t,v]),k=Object(a.useMemo)(()=>p||g?Object(W.jsx)(Xa,{children:Object(W.jsx)(o.Spinner,{})}):b||h?Object(W.jsx)(Za,{children:Object(W.jsxs)(ei,{children:[Object(W.jsx)(o.Icon,{icon:"error",size:65,color:Object(o.cssVariables)("neutral-5")}),Object(W.jsx)("div",{children:t.formatMessage({id:"desk.apps.iframe.error"})}),Object(W.jsx)(o.Button,{buttonType:"tertiary",icon:"refresh",size:"small",onClick:j,children:t.formatMessage({id:"desk.apps.iframe.btn.reload"})})]})}):u?Object(W.jsx)(ti,{ref:O,src:y,title:u.title,style:{width:`${u.width}px`}}):void 0,[b,h,u,t,j,p,g,y]);return null!=u&&u.isEnabled?Object(W.jsxs)(W.Fragment,{children:[i&&Object(W.jsx)(Wa,{}),Object(W.jsxs)(Qa,{style:{width:x},isCollapsed:v,isOverlap:i,top:l,children:[C,Object(W.jsx)(Ga,{children:k})]})]}):null});var ai=n("sEfC"),ii=n.n(ai);const si=(e,t)=>(e=>{var t,n;return[{key:"ticketName",value:e.channelName},{key:"agentName",value:null!=(t=null==(n=e.recentAssignment)?void 0:n.agent.displayName)?t:""},{key:"customerName",value:e.customer.displayName}]})(e).reduce((e,{key:n,value:a})=>{const i=new RegExp(`{${n}}`,"g");return t.match(i)&&(e=e.replace(i,a)),e},t);let ri;!function(e){e.CUSTOMER_DISPLAY_NAME="customerName",e.TICKET_NAME="ticketName",e.AGENT_DISPLAY_NAME="agentName",e.NONE="none"}(ri||(ri={}));const oi=(e,t)=>{let n=null;if(window.getSelection&&(n=window.getSelection(),n)){e.deleteContents();const a=document.createElement("div");a.innerHTML=t;const i=document.createDocumentFragment();let s=null,r=null;for(;s=a.firstChild;)r=i.appendChild(s);if(e.insertNode(i),r){const t=e.cloneRange();t.setStartAfter(r),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}}},li={name:"Ticket name"},ci={displayName:"Customer name"},di={displayName:"Agent name"},ui=i.a.memo(({text:e,values:t})=>{const n=((e,t)=>{if(e.constructor!==Array)throw new Error("The first parameter should be type of string Array");return e.reduce((e,n)=>{const a=t(n);return e.push(a),e},[])})(e.split(/({[a-zA-Z]+})/g),e=>{const n=Object.keys(t);let a=null;return n.forEach(n=>{e===`{${n}}`&&(a=t[n])}),a||e});return Object(W.jsx)(W.Fragment,{children:n})}),pi=()=>{let e={top:0,left:0,bottom:0,right:0,width:0,height:0};if(void 0!==typeof window&&window.getSelection){const t=window.getSelection();if(t&&t.rangeCount){const n=t.getRangeAt(0).cloneRange();if(n.getBoundingClientRect){n.collapse(!0);const{top:t,left:a,bottom:i,right:s,width:r,height:o}=n.getBoundingClientRect();e={top:t,left:a,bottom:i,right:s,width:r,height:o}}}}return e},gi=(e,t)=>{var n;if(null!=(n=e.current)&&n.getCurrent()){const n=(e=>{let t=0;if(window.getSelection){const n=window.getSelection();if(null!=n&&n.rangeCount){const a=n.getRangeAt(0),i=a.cloneRange();i.selectNodeContents(e),i.setEnd(a.endContainer,a.endOffset),t=i.toString().length}}return t})(e.current.getCurrent());let a=((e,t)=>{const n=e.slice(0,t+1).search(/\S+$/),a=e.slice(t).search(/\s/);return a<0?e.slice(n):e.slice(n,a+t)})(e.current.getText(),n-1);const i=a.lastIndexOf(t);return a&&i>0&&(a=a.slice(i,a.length)),a}return""},hi=({range:e,replaceValue:t,searchQuery:n})=>{let a=null;var i;if(window.getSelection&&(a=window.getSelection(),null!=(i=a)&&i.rangeCount&&e)){if(a.removeAllRanges(),a.addRange(e),!a.focusNode)return;const{nodeValue:i}=a.focusNode,s=(i?i.slice(0,a.focusOffset):"").lastIndexOf(n);if(-1===s)return;e.setStart(a.focusNode,s),e.setEnd(a.focusNode,a.focusOffset),e.deleteContents();const r=document.createElement("div");r.innerHTML=t;const o=document.createDocumentFragment(),l=o.appendChild(r.firstChild);e.insertNode(o),l&&((e=e.cloneRange()).setStartAfter(l),e.collapse(!0),a.removeAllRanges(),a.addRange(e))}};var mi=n("26RP");r.default.div.withConfig({displayName:"useQuickReply__NoResult",componentId:"sc-10fy7or-0"})(["padding:40px 16px;width:276px;text-align:center;"]),r.default.span.withConfig({displayName:"useQuickReply__NoResultTitle",componentId:"sc-10fy7or-1"})(["display:inline-block;font-size:14px;font-weight:500;line-height:1.43;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-5"));var fi=e=>{w();const t=Object(b.g)(e=>e.desk.project.pid),n=Object(b.g)(e=>{var t,n;return null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:""}),i=Object(a.useRef)(null),s=Object(a.useRef)(null),r=Object(a.useRef)(null),l=Object(a.useRef)(null),c=Object(a.useRef)(null),[d,u]=Object(a.useState)([]),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(0),[j,y]=Object(a.useState)({all:0,agent:0}),[O,v]=Object(a.useState)(!1),[x,_]=Object(a.useState)(""),[C,k]=Object(a.useState)(""),[T,S]=Object(a.useState)(!1),[E,I]=Object(a.useState)(!1),[M,A]=Object(a.useState)(-1),[N,R]=Object(a.useState)(0),P=M>d.length,L=Object(a.useMemo)(()=>0===h?[f.Pb.ALL]:h>0?[f.Pb.GROUP]:[f.Pb.AGENT],[h]),F=Object(a.useCallback)(e=>{if(window.getSelection){const t=window.getSelection();if(t&&t.getRangeAt&&t.rangeCount&&e)if(t.containsNode(e,!0))i.current=t.getRangeAt(0).cloneRange();else{const t=document.createRange();t.setStart(e,0),t.setEnd(e,0),i.current=t}}},[]),U=()=>{if(window.getSelection){const e=window.getSelection();e&&(e.removeAllRanges(),i.current&&e.addRange(i.current))}},$=Object(a.useCallback)(()=>{var e;const t=null==(e=s.current)?void 0:e.getCurrent();t&&F(t)},[F]),B=Object(a.useCallback)(async({offset:e,limit:a,name:i,isNext:s=!1})=>{g(!0);try{const{data:r}=await D.g.searchQuickReply(t,n,{offset:e,limit:a,name:i,availableType:L,group:L.includes(f.Pb.GROUP)?h:void 0});u(s?d.concat(r.results):r.results),A(r.count)}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{g(!1)}},[h,L,t,d,n]),V=Object(a.useCallback)(async({name:e})=>{try{const{data:a}=await D.g.fetchQuickReplySearchCounts(t,n,{offset:0,limit:0,name:e});if(y(a),e.trim().length>0&&!O)return void v(!0);0===e.trim().length&&O&&v(!1)}catch(e){o.toast.error({message:Object(mi.b)(e)})}},[O,t,n]),z=Object(a.useCallback)(()=>{S(!1),I(!1),k(""),_(""),R(-1),m(0),V({name:""})},[V]);Object(a.useEffect)(()=>{V({name:""})},[]),Object(a.useEffect)(()=>{if(!T&&0===x.indexOf(e))return S(!0),void I(!1);0!==x.indexOf(e)&&T&&S(!1)},[e,x,T,d]);const H=Object(a.useMemo)(()=>ii()(e=>{k(e)},400),[]),q=Object(a.useCallback)(e=>{C!==e&&H(e)},[H,C]),G=Object(a.useCallback)(()=>{""!==x&&_("")},[x]),W=Object(a.useCallback)(e=>t=>{U(),s.current&&i.current&&oi(i.current,si(e,t.message)),z()},[z]),K=Object(a.useCallback)(e=>t=>n=>{null==n||n.preventDefault(),s.current&&i.current&&(hi({range:i.current,replaceValue:si(e,t.message),searchQuery:x}),z())},[x,z]),Y=Object(a.useCallback)(e=>{null==e||e.preventDefault(),z(),$(),B({offset:0,limit:10}),I(!0)},[z,$,B]),Q=Object(a.useCallback)((e,t)=>{if(T&&["ArrowUp","ArrowDown","Enter","Escape"].includes(t.key)){var n,a;t&&t.preventDefault(),t&&t.stopPropagation();const m=d.length-1,f=d[N],b=(null==(n=c.current)?void 0:n.scrollTop)||0,j=(null==(a=c.current)?void 0:a.clientHeight)||0;switch(t.key){case"ArrowUp":if(N-1<0){var r;R(m),null==(r=c.current)||r.scrollToBottom()}else{var o;const e=null==(o=l.current)?void 0:o.children[N-1],t=e?e.offsetTop:0;var u;if(R(N-1),b>t)null==(u=c.current)||u.scrollTo({top:t})}break;case"ArrowDown":if(N+1>m){var p;R(0),null==(p=c.current)||p.scrollToTop()}else{var g;const e=null==(g=l.current)?void 0:g.children[N+1],t=e?e.offsetHeight:0,n=e?e.offsetTop:0;var h;if(R(N+1),b+j-t<n)null==(h=c.current)||h.scrollTo({top:n-j+t})}break;case"Enter":!t.repeat&&f&&s.current&&i.current&&(hi({range:i.current,replaceValue:si(e,f.message),searchQuery:x}),z())}}else;},[x,N,T,d,z]);return{quickReplies:d,hasMore:P,highlightedIndex:N,setHighlightedIndex:R,activeQuickReplyTypeId:h,setActiveQuickReplyTypeId:m,isOpenCaretPopper:T,setIsOpenCaretPopper:S,searchCounts:j,isSearched:O,caretQuickReplyQuery:x,setCaretQuickReplyQuery:_,isOpenDropdownPopper:E,setIsOpenDropdownPopper:I,dropdownQuickReplyQuery:C,setDropdownQuickReplyQuery:k,contentEditableRef:s,popperContentRef:r,itemContainerRef:l,itemScrollRef:c,rangeRef:i,saveSelectionRange:F,restoreSelectionRange:U,saveSelectionOnContentEditable:$,handleQuickReplyDropdownSearchChange:q,handleQuickReplyDropdownChange:G,isFetchingQuickReplies:p,searchQuickRepliesRequest:B,fetchSearchCountsRequest:V,handleAppendQuickReply:W,handleQuickReplyIconButtonClick:Y,handleCaretItemClick:K,handleQuickReplyEditableKeyDown:Q,reset:z}};const bi={quickReplies:[],hasMore:!1,highlightedIndex:0,setHighlightedIndex:()=>{},activeQuickReplyTypeId:-1,setActiveQuickReplyTypeId:()=>{},isOpenCaretPopper:!1,setIsOpenCaretPopper:()=>{},searchCounts:{},isSearched:!1,caretQuickReplyQuery:"",setCaretQuickReplyQuery:()=>{},isOpenDropdownPopper:!1,setIsOpenDropdownPopper:()=>{},dropdownQuickReplyQuery:"",setDropdownQuickReplyQuery:()=>{},contentEditableRef:{current:null},popperContentRef:{current:null},itemContainerRef:{current:null},itemScrollRef:{current:null},rangeRef:{current:null},saveSelectionRange:()=>{},restoreSelectionRange:()=>{},saveSelectionOnContentEditable:()=>{},handleQuickReplyDropdownSearchChange:()=>{},handleQuickReplyDropdownChange:()=>{},isFetchingQuickReplies:!1,searchQuickRepliesRequest:()=>{},fetchSearchCountsRequest:()=>{},handleAppendQuickReply:()=>()=>{},handleQuickReplyIconButtonClick:()=>()=>{},handleCaretItemClick:()=>()=>()=>{},handleQuickReplyEditableKeyDown:()=>{},reset:()=>{}},ji=Object(a.createContext)(bi),yi=i.a.memo(({children:e})=>{const t=fi("#");return Object(W.jsx)(ji.Provider,{value:t,children:e})});var Oi=n("+QRC"),vi=n.n(Oi);const xi=({ticketId:e,tag:t,onRemoveComplete:n})=>{const{pid:i,region:s}=Object(L.a)(),{getErrorMessage:r}=Object($.a)(),[l,c]=Object(a.useState)("idle"),d=async()=>{if("pending"!==l){c("pending");try{await Object(N.removeTag)(i,s,{ticketId:e,tagId:t.id}),c("done"),n(t)}catch(e){var a;if("desk400120"===(null==e||null==(a=e.data)?void 0:a.code))return c("done"),void n(t);o.toast.error({message:r(e)}),c("idle")}}};return"idle"===l?Object(W.jsx)(o.Tag,{variant:o.TagVariant.Dark,onRemove:d,tooltipProps:{placement:"bottom"},children:t.name}):null};var _i=n("NKCw");const Ci=(e,t=(e=>e.message))=>{const n=Object(a.useRef)(t),[i,s]=Object(a.useState)(void 0);return Object(a.useEffect)(()=>{n.current=t}),Object(a.useEffect)(()=>{var t,a;const i=e&&null!=(t=null!=(a=null==n.current?void 0:n.current(e))?a:e.message)?t:"";if(e){if("required"===e.type&&!i)return;s({message:i||"",hasError:!0})}else s(e=>{var t;return{message:null!=(t=null==e?void 0:e.message)?t:"",hasError:!1}})},[e]),i},ki=e=>!/[^-_\s\d\p{L}]/u.test(e.trim()),wi=e=>{const{defaultValue:t,serverError:n}=e,i=Object(E.a)(),{getErrorMessage:s}=Object($.a)(),{handleSubmit:r,register:o,...l}=Object(_i.d)({defaultValues:{name:t}}),c=Object(a.useRef)(null),{errors:d,clearErrors:u,setError:p,setValue:g,trigger:h}=l;Object(a.useEffect)(()=>{if(n){var e;const t=null==n||null==(e=n.data)?void 0:e.code,a={desk400118:i.formatMessage({id:"desk.tags.createTagErrors.duplicated"}),desk400122:i.formatMessage({id:"desk.tags.createTagErrors.maxActiveTags"})}[t]||s(n);p("name",{type:"serverError",message:a})}else u("name")},[u,s,i,n,p]);const m=Ci(d.name,e=>"maxLength"===e.type?i.formatMessage({id:"desk.tags.createTagErrors.maxLengthExceeded"},{limit:32}):"specialCharactersNotAllowed"===e.type?i.formatMessage({id:"desk.tags.createTagErrors.specialCharactersNotAllowed"}):e.message),f=Object(a.useCallback)(e=>r(async({name:t})=>{const n=t.trim();if(g("name",n),await h("name"))return e({name:n});var a;null==(a=c.current)||a.focus()}),[r,g,h]);return Object(a.useMemo)(()=>({nameInputProps:{ref:e=>{o(e,{required:!0,maxLength:32,validate:{specialCharactersNotAllowed:ki}}),c.current=e},error:m,type:"text",name:"name",placeholder:i.formatMessage({id:"desk.settings.tags.nameInputPlaceholder"})},handleSubmit:f,...l}),[f,i,m,o,l])},Ti=r.default.div.withConfig({displayName:"CreateTagFormView__Container",componentId:"ipuih2-0"})(["margin:-8px 0;"]),Si=r.default.h6.withConfig({displayName:"CreateTagFormView__Titlebar",componentId:"ipuih2-1"})(["position:relative;display:flex;align-items:center;justify-content:center;height:46px;",";color:",";border-bottom:1px solid ",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-3")),Ei=r.default.form.withConfig({displayName:"CreateTagFormView__Form",componentId:"ipuih2-2"})(["padding:20px 16px;padding-bottom:0;"]),Ii=r.default.div.withConfig({displayName:"CreateTagFormView__FormActions",componentId:"ipuih2-3"})(["display:flex;flex-direction:row;justify-content:flex-end;padding:8px 4px;border-top:1px solid ",";margin:0 -16px;margin-top:24px;& > *{margin-left:4px;}"],Object(o.cssVariables)("neutral-3")),Mi=Object(r.default)(o.Button).attrs({variant:"ghost",size:"small"}).withConfig({displayName:"CreateTagFormView__FormAction",componentId:"ipuih2-4"})(["min-width:0;"]),Di=Object(r.default)(o.IconButton).attrs({size:"small",buttonType:"secondary",icon:"arrow-left"}).withConfig({displayName:"CreateTagFormView__BackButton",componentId:"ipuih2-5"})(["position:absolute;left:6px;top:50%;transform:translateY(-50%);"]),Ai=({onBackButtonClick:e,onTagCreated:t})=>{const n=Object(E.a)(),{pid:i,region:s}=Object(L.a)(),[r,l]=Object(a.useState)({status:"idle",error:null}),{nameInputProps:c,handleSubmit:d}=wi({serverError:r.error}),u="pending"===r.status;return Object(W.jsxs)(Ti,{children:[Object(W.jsxs)(Si,{children:[n.formatMessage({id:"desk.tickets.ticketTagDropdown.createNewTag.title"}),Object(W.jsx)(Di,{onClick:e})]}),Object(W.jsxs)(Ei,{onSubmit:d(async({name:e})=>{if("pending"!==r.status){l(e=>({...e,status:"pending"}));try{const{data:n}=await Object(N.createTag)(i,s,{name:e});l({status:"done",error:null}),t(n)}catch(e){l({status:"idle",error:e})}}}),children:[Object(W.jsx)(o.InputText,{...c,label:n.formatMessage({id:"desk.tickets.ticketTagDropdown.createNewTag.nameField.label"}),placeholder:n.formatMessage({id:"desk.tickets.ticketTagDropdown.createNewTag.nameField.placeholder"}),autoFocus:!0}),Object(W.jsxs)(Ii,{children:[Object(W.jsx)(Mi,{type:"button",buttonType:"secondary",onClick:e,children:n.formatMessage({id:"desk.tickets.ticketTagDropdown.createNewTag.btn.cancel"})}),Object(W.jsx)(Mi,{type:"submit",buttonType:"primary",isLoading:u,disabled:u,children:n.formatMessage({id:"desk.tickets.ticketTagDropdown.createNewTag.btn.save"})})]})]})]})},Ni=r.default.div.withConfig({displayName:"TicketTagDropdownItem__Container",componentId:"dl4t3m-0"})(["position:relative;display:flex;align-items:center;min-width:0;width:100%;span{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}",""],({isDisabled:e})=>e&&Object(r.css)(["pointer-events:none;color:",";"],Object(o.cssVariables)("neutral-5"))),Ri=r.default.div.withConfig({displayName:"TicketTagDropdownItem__StatusIconWrapper",componentId:"dl4t3m-1"})(["position:absolute;top:0;right:-28px;width:20px;height:20px;"]);var Pi=Object(r.default)(o.Icon).withConfig({displayName:"TicketTagDropdownItem___StyledIcon",componentId:"dl4t3m-2"})(["flex:none;margin-right:8px;"]);const Li=({tag:e,isAdded:t,ticketId:n,onTagAdded:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)("idle"),p=t||null==n||"idle"!==d;return Object(W.jsxs)(Ni,{isDisabled:p,"data-test-id":"TicketTagDropdownItemContainer",onClick:async t=>{if(t.stopPropagation(),null!=n&&!p){u("pending");try{await Object(N.addTag)(r,l,{ticketId:n,tagId:e.id}),u("done"),i(e)}catch(t){var a,d;if("desk400119"===(null==t||null==(a=t.data)?void 0:a.code))return u("done"),void i(e);const n="desk400121"===(null==t||null==(d=t.data)?void 0:d.code)?s.formatMessage({id:"desk.tickets.ticketTagDropdown.error.maxTagsPerTicket"}):c(t);o.toast.error({message:n}),u("idle")}}},children:[Object(W.jsx)(Pi,{icon:"tag",size:20,color:p?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-10")}),Object(W.jsx)("span",{"data-test-id":"TicketTagDropdownItemName",children:e.name}),Object(W.jsx)(Ri,{children:t?Object(W.jsx)(o.Icon,{icon:"done",size:20,color:Object(o.cssVariables)("neutral-5")}):"pending"===d&&Object(W.jsx)(o.Spinner,{stroke:Object(o.cssVariables)("neutral-5"),size:20})})]})},Fi=r.default.div.withConfig({displayName:"TicketTagDropdown__Wrapper",componentId:"sc-1soqr3d-0"})(["width:32px;& > *,& > * > button{width:100%;}"]),Ui=r.default.button.withConfig({displayName:"TicketTagDropdown__StyledCreateTagButton",componentId:"sc-1soqr3d-1"})(["display:grid;grid-template-columns:auto 1fr auto;grid-gap:8px;grid-auto-flow:column;align-items:center;width:280px;padding:6px 16px;padding-right:12px;margin:4px -4px;white-space:nowrap;",";color:",";text-align:left;background:transparent;border:0;border-radius:0;outline:0;cursor:pointer;&:hover,&:focus{background:",";}"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-1")),$i=r.default.div.withConfig({displayName:"TicketTagDropdown__EmptyView",componentId:"sc-1soqr3d-2"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100px;",";color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-5")),Bi=e=>{const t=Object(E.a)();return Object(W.jsxs)(Ui,{...e,children:[Object(W.jsx)(o.Icon,{icon:"plus",size:20,color:Object(o.cssVariables)("neutral-10")}),t.formatMessage({id:"desk.tickets.ticketTagDropdown.menu.createNewTag"}),Object(W.jsx)(o.Icon,{icon:"chevron-right",size:16,color:Object(o.cssVariables)("neutral-10")})]})},Vi=(e,t)=>{switch(t.type){case"LOAD_TAGS_START":return{...e,ongoingLoadTagsRequest:t.payload.request};case"LOAD_TAGS_DONE":return{...e,ongoingLoadTagsRequest:null,tags:t.payload.tags};case"LOAD_TAGS_FAIL":return{...e,ongoingLoadTagsRequest:null};case"SET_QUERY":return{...e,query:t.payload.query};case"SET_CURRENT_VIEW":return{...e,currentView:t.payload.currentView};case"SET_IS_DROPDOWN_OPEN":return{...e,isDropdownOpen:t.payload.isDropdownOpen};default:return e}};n("c9m3");let zi;!function(e){e.NOT_CONFIRMED="NOT_CONFIRMED",e.CONFIRMED="CONFIRMED",e.NOT_CLOSED="NOT_CLOSED",e.CLOSED_BUT_NOT_DEFINED="CLOSED_BUT_NOT_DEFINED",e.CLOSED_BY_SYSTEM="CLOSED_BY_SYSTEM",e.CLOSED_BY_CUSTOMER="CLOSED_BY_CUSTOMER",e.CLOSED_BY_ADMIN="CLOSED_BY_ADMIN",e.CLOSED_BY_AGENT="CLOSED_BY_AGENT"}(zi||(zi={}));const Hi=72+f.zb,qi={UPPER_OFFSET:Hi,MAX_MESSAGE_COUNT:500,INPUT_PADDING:18,INITIAL_INPUT_HEIGHT:74,INPUT_MAX_HEIGHT:170,OVERALL_OFFSET:Hi+18,INITIAL_SOCIAL_INPUT_HEIGHT:107,SOCIAL_INPUT_MAX_HEIGHT:300,SOCIAL_INPUT_HEADER_HEIGHT:40},Gi=`${f.n}/brand/ic-avatar-desk-bot.svg`;let Wi;!function(e){e[e.OutsideAllowedWindow=1340]="OutsideAllowedWindow"}(Wi||(Wi={}));const Ki=r.default.div.withConfig({displayName:"ticketHeaderAction__TicketHeaderActionWrapper",componentId:"n7ei5x-0"})(["margin-left:8px;button{border:1px solid transparent;}"]),Yi=r.default.div.withConfig({displayName:"ticketHeaderAction__ActionToggle",componentId:"n7ei5x-1"})(["margin:0 8px 0 16px;font-size:14px;font-weight:600;color:white;"]),Qi=i.a.memo(({ticket:e,agent:t,isAdmin:n,closeTicketWithoutConfirmation:i,handleActionChange:s})=>{const r=Object(E.a)(),l=!n,c=e.status2===f.jc.WIP,d=e.status2===f.jc.CLOSED,u=e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE,p=e.closeStatus===zi.CLOSED_BY_CUSTOMER||e.closeStatus===zi.CONFIRMED,g=e.recentAssignment&&e.recentAssignment.agent.id===t.id,h=e.channelType&&f.Sb.includes(e.channelType),m="SENDBIRD"===e.channelType||"SENDBIRD_JAVASCRIPT"===e.channelType||"SENDBIRD_IOS"===e.channelType||"SENDBIRD_ANDROID"===e.channelType,b=u&&!d&&(n||l&&i||l&&p||g&&h),j=Object(a.useCallback)(()=>{const t={items:[]},n={items:[]},a=[],i=g&&m&&!c&&!d&&!p;switch(e.status2){case f.jc.ACTIVE:e.recentAssignment&&(g&&t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.WIP}),action:"MOVE_TO_IN_PROGRESS"}),t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.IDLE}),action:"MOVE_TO_IDLE"})),i&&n.items.push({node:r.formatMessage({id:"desk.tickets.header.action.sendConfirmation"}),action:"INQUIRE_TICKET_CLOSURE"}),t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.CLOSED}),action:"CLOSE_TICKET"});break;case f.jc.IDLE:g&&t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.WIP}),action:"MOVE_TO_IN_PROGRESS"}),i&&n.items.push({node:r.formatMessage({id:"desk.tickets.header.action.sendConfirmation"}),action:"INQUIRE_TICKET_CLOSURE"}),t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.CLOSED}),action:"CLOSE_TICKET"});break;case f.jc.WIP:t.items.push({node:r.formatMessage({id:"desk.tickets.header.action.assignToMyself"}),action:"ASSIGN_TICKET_TO_MYSELF"}),t.items.push({node:r.formatMessage({id:"desk.tickets.header.action.assignToAgent"}),action:"ASSIGN_TO_AGENT"})}return a.push(t),n.items.length>0&&a.push(n),a},[r,g,m,d,p,c,e.recentAssignment,e.status2]),y=Object(a.useCallback)(()=>{const t={items:[]},n={items:[]},a=[],i=m&&!c&&!d&&!p;switch(e.status2){case f.jc.ACTIVE:if(!g)break;e.recentAssignment&&(t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.WIP}),action:"MOVE_TO_IN_PROGRESS"}),t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.IDLE}),action:"MOVE_TO_IDLE"})),b&&t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.CLOSED}),action:"CLOSE_TICKET"}),i&&n.items.push({node:r.formatMessage({id:"desk.tickets.header.action.sendConfirmation"}),action:"INQUIRE_TICKET_CLOSURE"});break;case f.jc.IDLE:if(!g)break;e.recentAssignment&&t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.WIP}),action:"MOVE_TO_IN_PROGRESS"}),b&&t.items.push({node:Object(W.jsx)(V.qc,{ticketStatus:f.jc.CLOSED}),action:"CLOSE_TICKET"}),i&&n.items.push({node:r.formatMessage({id:"desk.tickets.header.action.sendConfirmation"}),action:"INQUIRE_TICKET_CLOSURE"});break;case f.jc.WIP:t.items.push({node:r.formatMessage({id:"desk.tickets.header.action.assignToMyself"}),action:"ASSIGN_TICKET_TO_MYSELF"})}return a.push(t),n.items.length>0&&a.push(n),a},[b,r,g,m,d,p,c,e.recentAssignment,e.status2]),O=n?j():y();return 0===O.flatMap(e=>{var t;return null!=(t=null==e?void 0:e.items)?t:e}).length?null:Object(W.jsx)(Ki,{children:Object(W.jsx)(o.Dropdown,{size:"small",selectedItem:{node:"",action:""},items:O,itemsType:"section",itemToElement:e=>e.node,placeholder:"action",placement:"bottom-end",toggleRenderer:()=>Object(W.jsx)(Yi,{"data-test-id":"ActionToggle",children:r.formatMessage({id:Object(H.getTicketStatusLabelKey)(e.status2)})}),toggleTheme:{contentColor:"white",hoverContentColor:"white",pressedContentColor:"white",bgColor:Object(o.cssVariables)("purple-7"),activeBgColor:Object(o.cssVariables)("purple-7"),hoverBgColor:Object(o.cssVariables)("purple-8"),pressedBgColor:Object(o.cssVariables)("purple-7")},onItemSelected:e=>{null!=e&&s({action:e.action})}})})});var Ji=n("/W6B");const Xi=r.default.div.withConfig({displayName:"ticketHeaderTransferActions__Container",componentId:"sc-14rq7ri-0"})(["display:grid;grid-auto-flow:column;grid-gap:8px;"]),Zi=i.a.memo(({ticket:e,isAdmin:t,isAgent:n,transferEnabled:a,handleActionChange:i})=>{const s=Object(E.a)(),r=e.recentAssignment&&(t||n&&a)?"TRANSFER_TO_AGENT":"ASSIGN_TO_AGENT",o=!t&&!a;return Object(W.jsxs)(Xi,{children:[Object(W.jsx)(Ji.a,{selectedAgentGroup:e.group,onItemSelected:t=>{var n;(null==(n=e.group)?void 0:n.id)!==t.id&&i({action:"TRANSFER_TO_GROUP",group:t})}}),Object(W.jsx)(Qt.a,{selectedAgentId:e.recentAssignment?e.recentAssignment.agent.id:null,onItemSelected:e=>{i({action:r,agent:e})},disabled:o,contextualHelpContent:o?s.formatMessage({id:"desk.agentSelect.dropdown.disabled.tooltip.transferDisabled"},{break:Object(W.jsx)("br",{})}):void 0})]})});Zi.displayName="TicketHeaderTransferActions";const es=r.default.div.withConfig({displayName:"ticketHeader__Wrapper",componentId:"sc-1xmhx6q-0"})(["display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:repeat(",",auto);grid-gap:8px 0;grid-auto-flow:column;padding:12px 16px;"],({hasTagRow:e})=>e?2:1),ts=r.default.div.withConfig({displayName:"ticketHeader__TicketInfo",componentId:"sc-1xmhx6q-1"})(["display:flex;align-items:center;min-width:0;min-height:32px;"]),ns=r.default.div.withConfig({displayName:"ticketHeader__TicketDetailHeaderAction",componentId:"sc-1xmhx6q-2"})(["grid-column:-2 / -1;grid-row:1 / 2;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;flex-wrap:nowrap;padding-left:32px;"]),as=r.default.div.withConfig({displayName:"ticketHeader__TicketNameText",componentId:"sc-1xmhx6q-3"})(["height:18px;font-size:16px;font-weight:600;line-height:1;color:",";letter-spacing:-0.15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],Object(o.cssVariables)("neutral-10")),is=r.default.div.withConfig({displayName:"ticketHeader__TicketSocialIcon",componentId:"sc-1xmhx6q-4"})(["margin-right:8px;height:16px;"]),ss=r.default.div.withConfig({displayName:"ticketHeader__SocialCustomerChatLabel",componentId:"sc-1xmhx6q-5"})(["height:20px;padding:0 8px;border-radius:2px;border:1px solid ",";font-size:11px;font-weight:600;line-height:1;color:",";margin-left:8px;display:flex;align-items:center;"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6")),rs=r.default.div.withConfig({displayName:"ticketHeader__TagsWrapper",componentId:"sc-1xmhx6q-6"})(["margin-bottom:-8px;& > *{margin-left:0 !important;margin-bottom:8px;&:not(:last-child){margin-right:4px;}}"]),os=Object(r.default)(rs).withConfig({displayName:"ticketHeader__InlineTagsWrapper",componentId:"sc-1xmhx6q-7"})(["grid-column:2 / 3;grid-row:1 / 2;display:flex;flex-wrap:nowrap;padding-left:4px;overflow:hidden;",""],({isHidden:e})=>e&&"visibility: hidden;"),ls=Object(r.default)(rs).withConfig({displayName:"ticketHeader__TagRow",componentId:"sc-1xmhx6q-8"})(["grid-column:1 / -1;grid-row:2 / 3;padding-right:184px;display:flex;flex-wrap:wrap;"]);var cs=Object(r.default)(V.qc).withConfig({displayName:"ticketHeader___StyledTicketStatusLozenge",componentId:"sc-1xmhx6q-9"})(["margin-left:8px;"]),ds=Object(r.default)(({className:e,currentTicketTags:t,ticketId:n,onTagAdded:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),{isPermitted:d}=Object(P.h)(),u=d(["desk.admin"]),[p,g]=Object(a.useReducer)(Vi,{query:"",tags:[],ongoingLoadTagsRequest:null,currentView:"list",isDropdownOpen:!1}),{query:h,tags:m,ongoingLoadTagsRequest:f,currentView:b,isDropdownOpen:j}=p,y=Object(a.useRef)(p);Object(a.useEffect)(()=>{y.current=p},[p]);const O=Object(a.useMemo)(()=>ii()(async e=>{var t;null==(t=y.current.ongoingLoadTagsRequest)||t.cancel();try{const t=Object(N.getProjectTags)(r,l,{status:"ACTIVE",q:e});g({type:"LOAD_TAGS_START",payload:{request:t}});const n=await t;n&&g({type:"LOAD_TAGS_DONE",payload:{tags:n.data.results}})}catch(e){o.toast.error({message:c(e)}),g({type:"LOAD_TAGS_FAIL"})}},100),[c,r,l]);Object(a.useEffect)(()=>{O(h)},[O,h]),Object(a.useEffect)(()=>{if(!j&&"list"!==b){const e=window.setTimeout(()=>{g({type:"SET_CURRENT_VIEW",payload:{currentView:"list"}})},200);return()=>{clearTimeout(e)}}},[b,j]);const v=Object(a.useCallback)(()=>O(y.current.query),[O]),x=Object(a.useCallback)(()=>g({type:"SET_CURRENT_VIEW",payload:{currentView:"createTagForm"}}),[]),_=Object(a.useMemo)(()=>m.filter(e=>t.some(({id:t})=>t===e.id)),[t,m]),C=Object(a.useMemo)(()=>"createTagForm"===b?{header:void 0,useSearch:!1,items:[],isMenuScrollable:!1,emptyView:Object(W.jsx)(Ai,{onTagCreated:()=>{v(),g({type:"SET_CURRENT_VIEW",payload:{currentView:"list"}})},onBackButtonClick:()=>g({type:"SET_CURRENT_VIEW",payload:{currentView:"list"}})}),stateReducer:(e,t)=>{switch(t.type){case o.Dropdown.stateChangeTypes.keyDownEnter:case o.Dropdown.stateChangeTypes.keyDownArrowUp:case o.Dropdown.stateChangeTypes.keyDownArrowDown:case o.Dropdown.stateChangeTypes.keyDownEscape:case o.Dropdown.stateChangeTypes.keyDownSpaceButton:return{type:t.type};default:return t}}}:{header:u?Object(W.jsx)(Bi,{onClick:x}):void 0,useSearch:!0,items:f?[]:m,isMenuScrollable:!0,emptyView:Object(W.jsx)($i,{children:f?Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-10")}):s.formatMessage({id:"desk.tickets.ticketTagDropdown.empty"})}),stateReducer:(e,t)=>t.type===o.Dropdown.stateChangeTypes.clickItem?{...t,isOpen:e.isOpen}:t},[b,x,s,u,f,v,m]);return Object(W.jsx)(Fi,{className:e,children:Object(W.jsx)(o.Dropdown,{...C,stateReducer:(e,t)=>{const n=C.stateReducer(e,t);return"boolean"==typeof n.isOpen&&g({type:"SET_IS_DROPDOWN_OPEN",payload:{isDropdownOpen:n.isOpen}}),n},placement:"bottom-end",disabled:null==n,selectedItem:null,toggleRenderer:({isOpen:e})=>Object(W.jsx)(o.IconButton,{buttonType:"secondary",size:"small",icon:"tag","aria-pressed":e,title:j?void 0:s.formatMessage({id:"desk.tickets.action.lbl.ticketTag"}),tooltipPlacement:"bottom"}),onSearchChange:e=>{h!==e&&g({type:"SET_QUERY",payload:{query:e}})},searchPlaceholder:s.formatMessage({id:"desk.tickets.ticketTagDropdown.searchInputPlaceholder"}),itemToString:e=>e.name,width:280,itemHeight:32,itemToElement:e=>Object(W.jsx)(Li,{tag:e,isAdded:_.includes(e),ticketId:n,"data-test-id":"TicketTagDropdownItem",onTagAdded:i}),isItemDisabled:e=>_.includes(e),showArrow:!1,variant:"inline",size:"small"})})}).withConfig({displayName:"ticketHeader___StyledTicketTagDropdown",componentId:"sc-1xmhx6q-10"})(["margin-right:4px;"]),us=Object(r.default)(o.OverflowMenu).withConfig({displayName:"ticketHeader___StyledOverflowMenu",componentId:"sc-1xmhx6q-11"})(["margin-right:8px;"]);const ps=Object(a.memo)(({project:e,isFetching:t,ticket:n,agent:i,handleActionChange:s})=>{var r;const{transferEnabled:l,closeTicketWithoutConfirmation:c}=e,{isPermitted:d}=Object(P.h)(),u=d(["desk.admin"]),p=!u,g=Object(E.a)(),{ChatTitleBarGridItem:h}=Object(a.useContext)(Hn),[m,b]=Object(a.useState)(!1),j=Object(a.useRef)(null),y=Object(P.L)(m),{id:O,data:v=null,channelType:x=null,recentAssignment:_=null,status2:C=null,channelName:k=null}=n||{},[w,T]=Object(a.useState)(null!=(r=null==n?void 0:n.tags)?r:[]),S=Object(a.useCallback)(()=>{if(j.current){const e=j.current,t=e.scrollWidth>e.clientWidth;t!==y.current&&b(t)}},[y]),I=Object(a.useRef)(new On.ResizeObserver(e=>{e.length>0&&S()}));Object(a.useEffect)(()=>{if(j.current){const e=I.current;return e.observe(j.current),()=>{e.disconnect()}}},[]),Object(a.useLayoutEffect)(()=>{S()},[w,S]);const M=Object(a.useMemo)(()=>{if("FACEBOOK_CONVERSATION"===x&&v){try{if("customer_chat_plugin"===JSON.parse(v).social.source)return Object(W.jsx)(ss,{children:"CUSTOMER CHAT"})}catch(e){Object(q.a)({error:new Error("Failed to parse JSON in ticket.data"),context:{where:"JSONParseFacebookTicketData",ticketData:v}})}return null}},[x,v]),D=(null==_?void 0:_.agent.id)===i.id,A=C===f.jc.WIP,N=C===f.jc.CLOSED,R=(()=>{switch(x){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return Object(W.jsx)(o.Icon,{icon:"facebook",size:16,color:Object(o.cssVariables)("neutral-9")});case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return Object(W.jsx)(o.Icon,{icon:"twitter",size:16,color:Object(o.cssVariables)("neutral-9")});case"INSTAGRAM_COMMENT":return Object(W.jsx)(o.Icon,{icon:"instagram",size:16,color:Object(o.cssVariables)("neutral-9")});case"WHATSAPP_MESSAGE":return Object(W.jsx)(o.Icon,{icon:"whatsapp",size:16,color:Object(o.cssVariables)("neutral-9")});default:return null}})(),L=Object(a.useMemo)(()=>N?Object(W.jsx)(o.Button,{buttonType:"secondary",size:"small",icon:Object(W.jsx)(o.Icon,{icon:"reopen",size:20}),onClick:()=>s({action:"REOPEN_TICKET"}),"data-test-id":"ReopenButton",children:g.formatMessage({id:"desk.tickets.ticketHeader.reopen.button"})}):n?Object(W.jsx)(Qi,{ticket:n,agent:i,isAdmin:u,closeTicketWithoutConfirmation:c,handleActionChange:s}):null,[i,c,s,g,u,N,n]),F=Object(a.useMemo)(()=>{const e={label:g.formatMessage({id:"desk.tickets.action.lbl.copyUrl"}),onClick:()=>{if(n)return vi()(Object(H.getTicketURL)(n.id,u)),void o.toast.success({message:g.formatMessage({id:"desk.tickets.action.lbl.copyUrl.success"})})}},t={label:g.formatMessage({id:"desk.tickets.action.lbl.exportToCSV"}),onClick:()=>{s({action:"EXPORT_TICKET"})}};return u?[t,e]:[e]},[s,g,u,n]),U=Object(a.useMemo)(()=>null!=O&&w.map(e=>Object(W.jsx)(xi,{ticketId:O,tag:e,onRemoveComplete:e=>T(t=>t.filter(t=>t.id!==e.id))},e.id)),[w,O]),$=n?Object(W.jsxs)(W.Fragment,{children:[R&&Object(W.jsx)(is,{children:R}),Object(W.jsx)(as,{title:k||void 0,children:k}),M,C&&Object(W.jsx)(cs,{ticketStatus:C})]}):null,B=Object(a.useMemo)(()=>n?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ds,{ticketId:O,currentTicketTags:w,onTagAdded:e=>T(t=>[...t,e])}),Object(W.jsx)(us,{iconButtonProps:{buttonType:"secondary"},items:F}),!A&&!N&&(u||p&&D)&&Object(W.jsx)(Zi,{ticket:n,isAdmin:u,isAgent:p,isFetching:t,transferEnabled:l,handleActionChange:s}),L]}):null,[s,u,p,D,t,N,A,n,L,F,O,w,l]);return Object(W.jsx)(h,{children:Object(W.jsxs)(es,{hasTagRow:m,children:[Object(W.jsx)(ts,{children:$}),Object(W.jsx)(os,{ref:j,isHidden:m,children:U}),Object(W.jsx)(ns,{children:B}),m&&Object(W.jsx)(ls,{children:U})]})})});ps.displayName="TicketHeader";var gs=n("Nx5B");const hs=e=>`ticket_history_${e.id}_group_channel_handler`,ms=Object(r.default)(V.u).withConfig({displayName:"HistoryTickets__CollapsedContainer",componentId:"sc-10de5m5-0"})(["border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),fs=r.default.div.withConfig({displayName:"HistoryTickets__StyledHistoryTickets",componentId:"sc-10de5m5-1"})(["margin:0 -16px 16px;"]),bs=({customerId:e})=>{const t=Object(E.a)(),{pid:n,region:i}=Object(L.a)(),{project:s}=Object(b.g)(e=>({project:e.desk.project})),r=Object(b.f)(),[o,l]=Object(a.useState)([]),c=Object(a.useRef)([]),[d,u]=Object(P.g)(e=>Object(N.fetchTickets)(n,i,{offset:0,limit:10,order:"-created_at",customer:e,status2:Object(H.getTicketStatus2)(f.jc.ALL)}),[n,i]),p=e=>{l(t=>t.map(t=>{const{url:n,lastMessage:a}=e;if(La()(a))return t;const i={...t,lastMessageAt:new Date(a.createdAt).toString()};return e.isGroupChannel()&&t.channelUrl===n?"file"===a.messageType?{...i,lastMessage:a.name}:"user"===a.messageType||"admin"===a.messageType?{...i,lastMessage:a.message}:t:t}))},g=Object(a.useCallback)(e=>{const t="sendbird"===Object(H.getTicketSocialType)(e.channelType),n=c.current.some(t=>t===e.channelUrl);if(t&&!n){const t=new window.dashboardSB.ChannelHandler;t.onMessageReceived=p,t.onChannelChanged=p,window.dashboardSB.addChannelHandler(hs(e),t),c.current=[...c.current,e.channelUrl]}},[]);return Object(a.useEffect)(()=>{u(e)},[u,e]),Object(a.useEffect)(()=>{const{status:e,data:t}=d;"success"===e&&null!=(null==t?void 0:t.data)&&l(t.data.results)},[d]),Object(a.useEffect)(()=>{o.filter(e=>e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE).forEach(e=>g(e))},[g,o]),Object(a.useEffect)(()=>{if("success"===d.status&&o.length>0){const t=new window.dashboardSB.ChannelHandler;t.onMessageReceived=(t,n)=>{if(t.isOpenChannel()&&t.url===s.openChannelUrl)try{var a;const t=JSON.parse(n.message);if((null==t||null==(a=t.ticket)?void 0:a.customer.id)!==e)return;switch(t.type){case"TICKET_ASSIGN":case"TICKET_REOPEN":case"TICKET_TRANSFER":{const{ticket:e}=t;l(t=>{const n=[...t];return t.some(t=>t.id===e.id)?n.map(t=>t.id===e.id?e:t):(10===t.length&&n.pop(),[e,...n])}),g(e);break}case"TICKET_CLOSE":case"TICKET_WIP":{const{ticket:e}=t;window.dashboardSB.removeChannelHandler(hs(e)),l(t=>t.map(t=>t.id===e.id?e:t));break}case"TICKET_ACTIVE":case"TICKET_IDLE":{const{ticket:e}=t;l(t=>t.map(t=>t.id===e.id?e:t));break}}}catch(e){Object(H.logException)(e)}},window.dashboardSB.addChannelHandler("ticket_history_open_channel_handler",t)}},[g,e,s.openChannelUrl,d.status,o]),Object(a.useEffect)(()=>()=>{window.dashboardSB.removeChannelHandler("ticket_history_open_channel_handler")},[]),Object(a.useEffect)(()=>()=>{o.filter(e=>e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE).forEach(e=>window.dashboardSB.removeChannelHandler(e.channelUrl))},[o]),"loading"===d.status?Object(W.jsx)(V.cc,{}):o.length>0?Object(W.jsx)("div",{children:Object(W.jsx)(ms,{title:t.formatMessage({id:"desk.tickets.ticketInfoPanel.history.title"},{count:o.length}),children:Object(W.jsx)(fs,{children:o.map(e=>{return Object(W.jsx)(V.pc,{ticket:e,onClick:(t=e,e=>{e.preventDefault(),r(j.d.setTicketHistoryCurrent(t))}),"data-test-id":"TicketListItem"},e.id);var t})})})}):null};var js=n("sch1"),ys=n("6JX1"),Os=n("2OET"),vs=n("Y+p1"),xs=n.n(vs);const _s=({color:e,size:t,className:n})=>{const a=Object(E.a)();return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Dark,content:a.formatMessage({id:"chat.channelDetail.tooltip.operator"}),placement:"top",portalId:"portal_tooltip",className:n,children:Object(W.jsx)(o.Icon,{color:e,icon:"admin-filled",size:t,assistiveText:a.formatMessage({id:"chat.channelDetail.tooltip.operator"})})})},Cs=Object(a.createContext)({openProfilePopup:()=>{},closeProfilePopup:()=>{},currentPopupId:null,addChangeListener:()=>{},removeChangeListener:()=>{},notifyChange:()=>{},channelType:"group_channels",channelUrl:""});var ks=({children:e,channelUrl:t,channelType:n})=>{const[i,s]=Object(a.useState)(null),r=Object(a.useRef)(new Set),o=Object(a.useRef)(new Set),l=Object(a.useRef)(new Set);Object(a.useEffect)(()=>()=>{s(null)},[t,n]);const c=Object(a.useCallback)(e=>s(e),[]),d=Object(a.useCallback)(()=>s(null),[]),u=Object(a.useCallback)((e,t)=>{switch(e){case"ban":r.current.add(t);break;case"mute":o.current.add(t);break;case"deactivate":l.current.add(t);break;default:return}},[]),p=Object(a.useCallback)((e,t)=>{switch(e){case"ban":r.current.delete(t);break;case"mute":o.current.delete(t);break;case"deactivate":l.current.delete(t);break;default:return}},[]),g=Object(a.useCallback)((e,t)=>{switch(e){case"ban":r.current.forEach(e=>e(t.userId,t.isBanned));break;case"mute":o.current.forEach(e=>e(t.userId,t.isMuted));break;case"deactivate":l.current.forEach(e=>e(t.userId));break;default:return}},[]);return Object(W.jsx)(Cs.Provider,{value:{currentPopupId:i,openProfilePopup:c,closeProfilePopup:d,addChangeListener:u,removeChangeListener:p,notifyChange:g,channelUrl:t,channelType:n},children:e})};var ws=({popupId:e,children:t,offset:n="-26, 0",placement:i="bottom",tag:s,popup:r})=>{const{currentPopupId:o,openProfilePopup:l,closeProfilePopup:c}=Object(a.useContext)(Cs),d=o===e,u={isOpen:d,togglePopup:()=>{d?c():l(e)},openPopup:()=>l(e)};return Object(W.jsx)(V.Wb,{canOutsideClickClose:!1,placement:i,offset:n,tag:s,isOpen:d,target:t(u),content:r,transitionDuration:0})};const Ts=Object(r.default)(o.IconButton).attrs({icon:"close",buttonType:"tertiary",size:"small","aria-label":"Close"}).withConfig({displayName:"components__CloseButton",componentId:"sc-1gnazaa-0"})([""]),Ss=r.default.div.withConfig({displayName:"components__Wrapper",componentId:"sc-1gnazaa-1"})([""," position:relative;width:320px;background:white;border-radius:4px;"," > ","{position:absolute;top:8px;right:8px;}"],o.elevation.popover,({$align:e})=>"center"===e&&Object(r.css)(["display:flex;align-items:center;justify-content:center;"]),Ts),Es=r.default.div.withConfig({displayName:"components__Footer",componentId:"sc-1gnazaa-2"})(["display:flex;align-items:center;justify-content:flex-end;border-top:1px solid ",";height:45px;"],Object(o.cssVariables)("neutral-3")),Is=r.default.section.withConfig({displayName:"ProfileCard__Profile",componentId:"sc-17uokk5-0"})(["display:flex;padding:16px;"]),Ms=r.default.div.withConfig({displayName:"ProfileCard__ActionsWrapper",componentId:"sc-17uokk5-1"})(["display:flex;justify-content:flex-end;padding:3px 4px 4px;"]),Ds=Object(r.default)(o.Button).attrs({variant:"ghost",buttonType:"primary",size:"small"}).withConfig({displayName:"ProfileCard__Action",componentId:"sc-17uokk5-2"})(["min-width:0px;"]),As=r.default.div.withConfig({displayName:"ProfileCard__ErrorWrapper",componentId:"sc-17uokk5-3"})(["display:flex;flex-direction:column;"]),Ns=r.default.p.withConfig({displayName:"ProfileCard__ErrorMessage",componentId:"sc-17uokk5-4"})([""," max-width:220px;color:",";margin-bottom:16px;text-align:center;"],o.Typography["body-short-01"],Object(o.cssVariables)("neutral-7")),Rs=Object(r.default)(o.Button).attrs({buttonType:"tertiary",size:"small"}).withConfig({displayName:"ProfileCard__Retry",componentId:"sc-17uokk5-5"})(["min-width:0px;align-self:center;"]),Ps=Object(a.forwardRef)(({align:e,footer:t,onClose:n,children:a,...i},s)=>Object(W.jsxs)(Ss,{ref:s,$align:e,"data-test-id":"ProfileCard",...i,children:[Object(W.jsx)(Is,{children:a}),t&&Object(W.jsx)(Es,{children:t}),n&&Object(W.jsx)(Ts,{onClick:n})]}));var Ls=Object(r.default)(o.Spinner).withConfig({displayName:"ProfileCard___StyledSpinner",componentId:"sc-17uokk5-6"})(["margin:10px;"]);const Fs=({onClose:e})=>Object(W.jsx)(Ps,{align:"center",onClose:e,children:Object(W.jsx)(Ls,{size:20})}),Us=({onClose:e,onRetry:t})=>{const{messages:n}=Object(E.a)(),a=n["error.unexpectedError"];return Object(W.jsx)(Ps,{align:"center",onClose:e,children:Object(W.jsxs)(As,{children:[Object(W.jsx)(Ns,{children:a}),t&&Object(W.jsx)(Rs,{onClick:t,children:"Retry"})]})})},$s=({value:e,...t})=>Object(W.jsx)(Ds,{icon:"ban",...t,children:e?"Unban":"Ban"}),Bs=({value:e,...t})=>Object(W.jsx)(Ds,{icon:"mute",...t,children:e?"Unmute":"Mute"}),Vs=({value:e,...t})=>Object(W.jsx)(Ds,{icon:"deactivate",...t,children:e?"Activate":"Deactivate"}),zs=({actions:e,disabled:t=!1})=>{const{ban:n,mute:a,deactivate:i}=e;return Object(W.jsxs)(Ms,{"data-test-id":"Actions",children:[n&&Object(W.jsx)($s,{disabled:t,value:n.current,onClick:n.handler}),a&&Object(W.jsx)(Bs,{disabled:t,value:a.current,onClick:a.handler}),i&&Object(W.jsx)(Vs,{disabled:t,value:i.current,onClick:i.handler})]})},Hs=Object(r.default)(o.IconButton).attrs({icon:"copy",buttonType:"tertiary",size:"xsmall",title:"Copy"}).withConfig({displayName:"UserProfileHeader__Copy",componentId:"ryi24u-0"})([""]),qs=r.default.div.withConfig({displayName:"UserProfileHeader__Container",componentId:"ryi24u-1"})(["display:flex;padding:16px;"]),Gs=r.default.div.withConfig({displayName:"UserProfileHeader__AvatarWrapper",componentId:"ryi24u-2"})([""]),Ws=r.default.span.withConfig({displayName:"UserProfileHeader__Nickname",componentId:"ryi24u-3"})([""," overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:",";"],o.Headings["heading-02"],Object(o.cssVariables)("neutral-10")),Ks=r.default.span.attrs({"data-test-id":"UserID"}).withConfig({displayName:"UserProfileHeader__UserIdText",componentId:"ryi24u-4"})([""," color:",";overflow:hidden;word-break:break-all;","{position:absolute;transform:translate(0,-4px);opacity:0;}&:hover > ","{opacity:1;}"],o.Typography["caption-01"],Object(o.cssVariables)("neutral-7"),Hs,Hs),Ys=r.default.div.withConfig({displayName:"UserProfileHeader__TextsWrapper",componentId:"ryi24u-5"})(["position:relative;margin-left:18px;display:flex;flex-direction:column;max-width:208px;","{margin-top:4px;}"],Ks),Qs=({id:e})=>{const t=Object(P.k)();return Object(W.jsx)(V.ab,{component:Ks,text:`User ID: ${e}`,maxLines:2,children:Object(W.jsx)(Hs,{onClick:()=>t(e)})})};var Js=Object(r.default)(_s).withConfig({displayName:"UserProfileHeader___StyledOperatorIcon",componentId:"ryi24u-6"})(["display:inline-block;margin-left:4px;vertical-align:top;line-height:0;"]);var Xs=({nickname:e,profileUrl:t,userId:n,userRole:a})=>Object(W.jsxs)(qs,{children:[Object(W.jsx)(Gs,{children:Object(W.jsx)(V.Zb,{size:"xmedium",userID:n,imageUrl:t})}),Object(W.jsxs)(Ys,{children:[Object(W.jsxs)(Ws,{"data-test-id":"Nickname",children:[e,"operator"===a&&Object(W.jsx)(Js,{color:Object(o.cssVariables)("purple-7"),size:20})]}),Object(W.jsx)(Qs,{id:n})]})]});var Zs=e=>{const{isPermitted:t}=Object(P.h)(),n=t(["group_channels"===e?"application.channels.groupChannel.all":"application.channels.openChannel.all"]),a=t(["group_channels"===e?"application.channels.groupChannel.chat":"application.channels.openChannel.chat"]);return{hasAllPermissions:n,canModerate:n||a}};var er=()=>{const{channelType:e,channelUrl:t}=Object(a.useContext)(Cs),n=Object(b.f)();return{banUser:(a,i)=>{t&&n(j.b.showDialogsRequest({dialogTypes:A.a.BanMuteUser,dialogProps:{action:"ban",channelType:e,user:a,channelUrl:t,onSuccess:i}}))},unbanUser:({userId:a},i)=>{n(j.a.unbanUserRequest({origin:e,userId:a,channelUrl:t,onSuccess:i}))},muteUser:(a,i)=>{t&&n(j.b.showDialogsRequest({dialogTypes:A.a.BanMuteUser,dialogProps:{action:"mute",channelType:e,user:a,channelUrl:t,onSuccess:i}}))},unmuteUser:({userId:a},i)=>{n(j.a.unmuteUserRequest({origin:e,userId:a,channelUrl:t,onSuccess:i}))},deactivateUser:(e,t)=>{n(j.b.showDialogsRequest({dialogTypes:A.a.DeactivateUser,dialogProps:{selectedUsers:[e],onSuccess:t}}))}}};var tr=e=>{const{closeProfilePopup:t,notifyChange:n,channelType:i}=Object(a.useContext)(Cs),{hasAllPermissions:s}=Zs(i),{deactivateUser:r}=er();if(s)return{current:!1,handler:()=>{e&&r(e,()=>{n("deactivate",{userId:e.userId}),t()})}}};const nr=({userId:e,channelType:t,channelUrl:n})=>{const i=Object(P.c)(),s=Object(a.useCallback)(async e=>{const n="group_channels"===t?(async e=>{try{return await D.b.getGroupChannelBanDetail(e)}catch(e){var t;const n=400201;if((null==(t=e.data)?void 0:t.code)===n)return{...e,status:200,data:{}};throw e}})(e):Object(js.getOpenChannelBanDetail)(e),a="group_channels"===t?Object(js.getGroupChannelMuteDetail)(e):Object(js.getOpenChannelMuteDetail)(e),[i,s]=await Promise.all([n,a]),r=Object(H.camelCaseKeys)(i.data),{isMuted:o}=Object(H.camelCaseKeys)(s.data);return{isMuted:o,isBanned:!!r.user}},[t]),r=Object(a.useCallback)(async e=>{const t=await(async e=>{const t=await D.f.fetchUser(e);return Object(H.camelCaseKeys)(t.data)})(e),{isActive:n}=t;if(!n)return{user:t,status:void 0};const{isBanned:a,isMuted:i}=await s(e);return{user:t,status:{isActive:n,isBanned:a,isMuted:i}}},[s]),[{data:o,status:l},c]=Object(P.g)(async()=>{if(n)return r({appId:i,channelUrl:n,userId:e})},[i,n,r,e]);return Object(a.useEffect)(()=>{c()},[c]),{status:l,state:o,reload:c}},ar=e=>{const{closeProfilePopup:t,notifyChange:n,channelType:i}=Object(a.useContext)(Cs),{state:s,status:r,reload:o}=nr(e),l=Object(b.g)(e=>e.moderations.sdkUser),{canModerate:c}=Zs(i),{banUser:d,unbanUser:u,muteUser:p,unmuteUser:g}=er(),h=tr(null==s?void 0:s.user),m="init"===r||"loading"===r,f="error"===r;if(!s)return{isLoading:m,hasError:f,reload:o};const{user:j,status:y}=s,O=j.userId===(null==l?void 0:l.user_id);if(!y||O)return{isLoading:m,hasError:f,user:j,reload:o,actions:void 0};const{isMuted:v,isBanned:x}=y;return{isLoading:m,hasError:f,reload:o,user:j,actions:{ban:(()=>{if(c&&!v)return{current:x,handler:()=>{const e=()=>{n("ban",{userId:j.userId,isBanned:!x}),t()};x?u(j,e):d(j,e)}}})(),mute:(()=>{if(c&&!x)return{current:v,handler:()=>{const e=()=>{n("mute",{userId:j.userId,isMuted:!v}),t()};v?g(j,e):p(j,e)}}})(),deactivate:h}}};var ir=({user:e})=>{const{closeProfilePopup:t,channelType:n,channelUrl:i}=Object(a.useContext)(Cs),s=ar({userId:e.userId,channelType:n,channelUrl:i}),{userId:r,nickname:o,profileUrl:l,role:c}=Object(a.useMemo)(()=>({...e,...s.user}),[s.user,e]);return s.isLoading||!s.user?Object(W.jsx)(Fs,{onClose:t}):s.hasError?Object(W.jsx)(Us,{onRetry:s.reload,onClose:t}):Object(W.jsxs)(Ss,{"data-test-id":"UserProfilePopup",children:[Object(W.jsx)(Xs,{userId:r,nickname:o,profileUrl:l,userRole:c}),s.actions&&Object(W.jsx)(Es,{children:Object(W.jsx)(zs,{actions:s.actions})}),Object(W.jsx)(Ts,{onClick:t})]})},sr=n("ufqH");const rr={spacing:"var(--space, 8px)",fontSize:"var(--font-size, 14px)",lineHeight:"var(--line-height, 20px)",timeFontSize:"var(--time-font-size, 12px)",timeLineHeight:"var(--time-line-height, 16px)",dateFontSize:"var(--date-font-size, 13px)",operatorIconSize:"var(--operator-icon-size, 16px)"};var or=e=>{const t=e/100;return Object(r.css)(["--space:","px;--font-size:","px;--line-height:","px;--time-font-size:","px;--time-line-height:","px;--date-font-size:","px;--operator-icon-size:","px;"],8*t,14*t,20*t,12*t,16*t,13*t,16*t)};const lr=r.default.span.withConfig({displayName:"message__MessageWrapper",componentId:"sc-1r9hna6-0"})(["display:inline;color:",";white-space:pre-line;word-wrap:break-word;hyphens:auto;a{text-decoration:underline;}"],Object(o.cssVariables)("neutral-10")),cr=r.default.a.withConfig({displayName:"message__MessageLink",componentId:"sc-1r9hna6-1"})(["display:inline;word-break:break-all;> .file-attach-icon{display:inline-block;margin-right:8px;vertical-align:sub;}"]),dr=r.default.div.withConfig({displayName:"message__MessageImage",componentId:"sc-1r9hna6-2"})(["width:100%;max-width:360px;margin-top:10px;margin-bottom:16px;cursor:pointer;img{width:100%;max-height:360px;border:1px solid ",";border-radius:8px;}"],Object(sr.rgba)(Object(o.cssColors)("neutral-10"),.08)),ur=Object(r.default)(dr).withConfig({displayName:"message__MessageVideoThumbnail",componentId:"sc-1r9hna6-3"})(["position:relative;display:inline-block;img{position:relative;display:block;z-index:0;}"]),pr=r.default.div.withConfig({displayName:"message__MessageVideoThumbnailCover",componentId:"sc-1r9hna6-4"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;background:",";border-radius:8px;> .video-thumbnail-icon{position:absolute;top:16px;right:16px;opacity:0.8;filter:drop-shadow(0 2px 2px rgba(0,0,0,0.2));}"],Object(sr.rgba)(Object(o.cssColors)("neutral-9"),.6)),gr=Object(r.default)(o.Button).attrs({buttonType:"secondary",size:"small",variant:"ghost"}).withConfig({displayName:"message__MessageActionIconButton",componentId:"sc-1r9hna6-5"})(["display:flex;align-items:center;padding:4px;min-width:0;height:auto;"]),hr=({isMenuOpen:e})=>Object(W.jsx)(gr,{"aria-pressed":e,children:Object(W.jsx)(o.Icon,{icon:"more",size:20})}),mr=r.default.div.withConfig({displayName:"message__MessageMenu",componentId:"sc-1r9hna6-6"})(["min-width:57px;border-radius:4px;background-color:white;"," padding:4px 0;"],o.elevation.popover),fr=r.default.div.withConfig({displayName:"message__MessageMenuItem",componentId:"sc-1r9hna6-7"})(["display:block;width:128px;font-size:14px;line-height:20px;color:",";font-weight:500;cursor:pointer;text-align:left;padding:6px 12px 6px 16px;transition:background-color 0.2s ",";&:hover{background-color:",";}"],Object(o.cssVariables)("neutral-10"),o.transitionDefault,Object(o.cssVariables)("neutral-1")),br=r.default.div.withConfig({displayName:"message__MessageMenuDivider",componentId:"sc-1r9hna6-8"})(["height:1px;background-color:",";margin:4px 0;"],Object(o.cssVariables)("neutral-3")),jr=r.default.time.withConfig({displayName:"message__MessageTime",componentId:"sc-1r9hna6-9"})(["position:relative;top:0;width:calc("," * 3);text-align:left;font-size:",";line-height:",";font-weight:500;font-variant-numeric:tabular-nums;color:",";"],rr.timeLineHeight,rr.timeFontSize,rr.timeLineHeight,Object(o.cssVariables)("neutral-6")),yr=r.default.div.withConfig({displayName:"message__SenderNickname",componentId:"sc-1r9hna6-10"})(["display:inline-flex;flex-direction:row;align-items:center;margin-right:8px;line-height:",";letter-spacing:-0.1px;font-size:",";font-weight:600;&:hover{text-decoration:underline;}svg{width:",";height:",";}"],rr.lineHeight,rr.fontSize,rr.operatorIconSize,rr.operatorIconSize),Or=r.default.div.withConfig({displayName:"message__MessageActions",componentId:"sc-1r9hna6-11"})(["display:flex;position:absolute;top:1px;right:8px;opacity:0;border-radius:4px;background-color:",";transition:0.2s ",";transition-property:background-color,opacity;> * + *{margin-left:4px;}"],Object(o.cssVariables)("neutral-2"),o.transitionDefault),vr=r.default.div.withConfig({displayName:"message__MessageItem",componentId:"sc-1r9hna6-12"})(["--padding-y:calc("," * 6 / 8);display:flex;position:relative;flex-direction:row;flex-wrap:wrap;align-items:baseline;padding:var(--padding-y) 48px var(--padding-y) ",";z-index:",";cursor:text;",";","{color:",";}background:",";transition:background 0.2s ",",box-shadow 0.2s ",";box-shadow:",";will-change:background,box-shadow;word-wrap:break-word;&:first-child{margin-top:24px;}&:last-child{margin-bottom:12px;}&:hover{background:",";","{opacity:1;}}&:not(:hover){","}",""],rr.spacing,rr.timeLineHeight,e=>e.focused?250:0,e=>e.messageTextStyle,yr,e=>e.senderNameColor,e=>e.backgroundColor,o.transitionDefault,o.transitionDefault,e=>e.focused?"0 3px 5px 0 rgba(74, 80, 90, 0.35), 0 0 3px 0 rgba(74, 80, 90, 0.4)":null,Object(o.cssVariables)("neutral-2"),Or,e=>e.isMenuOpen&&Object(r.css)(["","{opacity:1;background-color:white;}"],Or),e=>e.styles),xr=(r.default.div.withConfig({displayName:"message__MessageGutter",componentId:"sc-1r9hna6-13"})(["width:84px;position:absolute;top:0;right:0;bottom:0;left:0;text-align:center;margin-left:",";padding:4px 0 4px;"],e=>e.focused?"-12px":null),r.default.div.withConfig({displayName:"message__MessageContent",componentId:"sc-1r9hna6-14"})(["flex:1;line-height:",";word-break:break-word;font-size:",";& > ","{display:initial;}"],rr.lineHeight,rr.fontSize,V.ic)),_r=(r.default.div.withConfig({displayName:"message__ProfileLabel",componentId:"sc-1r9hna6-15"})(["width:30px;height:30px;float:left;text-align:center;border-radius:50%;margin-top:3px;",";"],e=>{if(e.isNickname)return Object(r.css)(["line-height:28px;font-weight:600;color:white;"])}),()=>null),Cr=({children:e})=>Object(W.jsx)(W.Fragment,{children:e()}),kr=({children:e,FallbackComponent:t=_r,...n})=>Object(W.jsx)(ys.ErrorBoundary,{FallbackComponent:t,...n,children:Object(W.jsx)(Cr,{children:e})}),wr={showImagePreviewRequest:j.b.showImagePreviewRequest};let Tr;!function(e){e.edit="edit",e.delete="delete",e.copyUrl="copyUrl",e.showDataInformation="showDataInformation"}(Tr||(Tr={}));const Sr=[Tr.edit],Er=r.default.div.withConfig({displayName:"baseMessage__SilentMessageIndicator",componentId:"sc-2t7gk1-0"})(["display:flex;align-items:center;flex:none;width:100%;color:",";padding-top:2px;margin-bottom:",";",";font-size:",";svg{width:",";height:",";margin-right:calc("," / 2);}"],Object(o.cssVariables)("neutral-6"),rr.spacing,o.Typography["label-02"],rr.timeFontSize,rr.timeFontSize,rr.timeFontSize,rr.spacing),Ir=Object(ys.withErrorBoundary)(({timestamp:e})=>{const t=Object(P.w)();return Object(W.jsx)(jr,{dateTime:new Date(e).toISOString(),children:t(e,"23htime")})},{FallbackComponent:()=>Object(W.jsx)(jr,{as:"div"})});var Mr=Object(r.default)(_s).withConfig({displayName:"baseMessage___StyledOperatorIcon",componentId:"sc-2t7gk1-1"})(["line-height:0;"]);class Dr extends a.Component{constructor(...e){super(...e),this.menuPopoverComponent=void 0,this.deleteAndMuteButtonTooltipRef=Object(a.createRef)(),this.state={isMenuOpen:!1,isDeleteAndMuteActionDisabled:!1},this.setMenuPopoverRef=e=>{this.menuPopoverComponent=e},this.onRefAttached=e=>{var t,n;null==(t=(n=this.props).onRefAttached)||t.call(n,e)},this.handleMenuOpen=e=>()=>{this.setState({isMenuOpen:e})},this.handleEditClick=()=>{const{message:e,editMessage:t}=this.props,n=e.type===H.MessageType.user?"MESG":"ADMM";this.menuPopoverComponent.close(),null==t||t(e,n)},this.handleDeleteClick=()=>{const{message:e,deleteMessage:t}=this.props;this.menuPopoverComponent.close(),null==t||t(e.messageId)},this.handleCopyClick=()=>{const{message:e,copyUrl:t}=this.props;this.menuPopoverComponent.close(),null==t||t(e.messageId)},this.handleShowDataInformation=()=>{const{message:e,showDataInformation:t}=this.props;this.menuPopoverComponent.close(),null==t||t(e.data)},this.handleDeleteAndMuteClick=async e=>{const{message:t,deleteMessageAndMuteSender:n}=this.props;e.currentTarget.disabled=!0,n&&(this.setState({isDeleteAndMuteActionDisabled:!0}),await n(t),this.setState({isDeleteAndMuteActionDisabled:!1}))},this.handleImageClick=()=>{const{message:e,showImagePreviewRequest:t}=this.props;e.file&&t([e.file])},this.handleImageLoaded=()=>{var e,t;null==(e=(t=this.props).onImageLoaded)||e.call(t)},this.filterMessageMenus=e=>{const{message:t}=this.props;return e.filter(e=>t.type!==H.MessageType.file||!Sr.includes(e))},this.renderMessageMenu=e=>{switch(e){case Tr.showDataInformation:return Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)(fr,{onClick:this.handleShowDataInformation,children:"Show Data Information"}),Object(W.jsx)(br,{})]},e);case Tr.edit:return Object(W.jsx)(fr,{onClick:this.handleEditClick,children:"Edit"},e);case Tr.delete:return Object(W.jsx)(fr,{onClick:this.handleDeleteClick,children:"Delete"},e);case Tr.copyUrl:return Object(W.jsx)(fr,{onClick:this.handleCopyClick,children:"Copy URL"},e);default:return null}},this.renderMessageBody=()=>{const{message:e}=this.props;switch(e.type){case H.MessageType.user:case H.MessageType.admin:return Object(W.jsx)(W.Fragment,{children:Object(H.convertURLsAndEmailsToLinks)(e.message||"")});case H.MessageType.file:if(e.file){if(!e.file.url)return null;const{type:t="",name:n,url:a=""}=e.file,i=e=>()=>{window.open(e)};return Object(W.jsxs)(lr,{children:[Object(W.jsxs)(cr,{href:a,target:"_blank",children:[Object(W.jsx)(o.Icon,{icon:"attach",className:"file-attach-icon",size:16}),n||a]}),Object(W.jsx)(kr,{onError:(t,n)=>{Object(H.logException)({error:t,context:{file:e.file,errorInfo:n}})},children:()=>{const n=(e=>{const{type:t="",url:n,thumbnails:a}=e||{};if(!n)return;const i=Object(H.getExtension)(n);return t.match(/^video.+$/i)||"application/x-mpegURL"===t&&["mp4","mov","avi","mpg","mpeg","wmv","asf","asx","flv","swf","mkv","m3u8","3gp"].includes(i)?null==a?void 0:a[0]:void 0})(e.file);return Object(W.jsxs)(W.Fragment,{children:[Object(H.shouldRenderImage)(t,a)&&Object(W.jsx)(dr,{onClick:this.handleImageClick,children:Object(W.jsx)("img",{src:a,alt:a,onLoad:this.handleImageLoaded,onError:this.handleImageLoaded})}),n&&Object(W.jsx)("div",{children:Object(W.jsxs)(ur,{onClick:i(a),children:[Object(W.jsx)(pr,{children:Object(W.jsx)(o.Icon,{icon:"call-video-filled",className:"video-thumbnail-icon",size:24,color:"#fff"})}),Object(W.jsx)("img",{src:n.url,alt:n.url})]})})]})}})]})}return null;default:return null}},this.handleMouseLeave=()=>{var e;null==(e=this.deleteAndMuteButtonTooltipRef.current)||e.hide()}}shouldComponentUpdate(e,t){return this.props.message.message!==e.message.message||this.props.isFocused!==e.isFocused||this.state.isMenuOpen!==t.isMenuOpen||!xs()(this.props.messageMenus,e.messageMenus)}get isSentByOperator(){var e;return"operator"===(null==(e=this.props.message.sender)?void 0:e.role)}get backgroundColor(){const{message:e}=this.props;return e.type===H.MessageType.admin?Object(o.cssVariables)("yellow-2"):e.silent?Object(o.cssVariables)("neutral-1"):"white"}get messageTextStyle(){const{message:e}=this.props;return e.type===H.MessageType.admin?Object(r.css)(["color:",";font-weight:400;"],Object(o.cssVariables)("neutral-10")):e.silent?Object(r.css)(["color:",";font-weight:400;"],Object(o.cssVariables)("neutral-7")):this.isSentByOperator?Object(r.css)(["color:",";font-weight:600;"],Object(o.cssVariables)("purple-7")):Object(r.css)(["color:",";font-weight:400;"],Object(o.cssVariables)("neutral-10"))}get senderNameColor(){const{message:e}=this.props;return this.isSentByOperator&&!e.silent?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-7")}render(){const{message:e,isFocused:t=!1,isEditable:n=!1,messageMenus:a,moderatorUserId:i,intl:s,showDeleteAndMuteAction:r}=this.props,{isMenuOpen:l,isDeleteAndMuteActionDisabled:c}=this.state,{messageId:d,type:u,createdAt:p,sender:g,silent:h}=e,m=u===H.MessageType.admin;return Object(W.jsxs)(vr,{"data-test-id":"Message","data-message-id":d,focused:t,senderNameColor:this.senderNameColor,messageTextStyle:this.messageTextStyle,backgroundColor:this.backgroundColor,isSenderOperator:this.isSentByOperator,isMenuOpen:l,styles:this.props.messageItemStyles,ref:this.onRefAttached,onMouseLeave:this.handleMouseLeave,children:[h&&Object(W.jsxs)(Er,{children:[Object(W.jsx)(o.Icon,{icon:"hide",size:12,color:"currentColor"})," Silent message"]}),Object(W.jsx)(Ir,{timestamp:p}),Object(W.jsxs)(xr,{children:[(()=>m||null==g?null:Object(W.jsx)(ws,{popupId:String(e.messageId),placement:"bottom-start",offset:"0, 8",popup:Object(W.jsx)(ir,{user:g}),children:({togglePopup:e})=>Object(W.jsxs)(yr,{onClick:e,children:[Object(W.jsxs)("span",{children:[g.nickname,g.userId===i&&` ${s.formatMessage({id:"chat.channelDetail.message.you"})}`]}),this.isSentByOperator&&Object(W.jsx)(Mr,{size:16,color:"currentColor"})]})}))(),this.renderMessageBody()]}),n&&Object(W.jsxs)(Or,{children:[e.sender&&r&&Object(W.jsx)(o.Tooltip,{ref:this.deleteAndMuteButtonTooltipRef,content:s.formatMessage({id:"chat.channelDetail.message.btn.deleteAndMute"}),placement:"top",portalId:"portal_popup",children:Object(W.jsx)(gr,{onClick:this.handleDeleteAndMuteClick,disabled:c,"aria-label":s.formatMessage({id:"chat.channelDetail.message.btn.deleteAndMute"}),children:Object(W.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(W.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 1H22V6H13V1ZM15 3H16V4H15V3ZM19 3H20V4H19V3ZM18 3H17V4H18V3ZM6 3H12V5H8V7H12H14H17H18V9H17V22H3V9H2V7H3H6V3ZM5 9H15V20H5V9ZM7 12.171V17.171H9V12.171H7ZM11 17.171V12.171H13V17.171H11Z",fill:"currentColor"})})})}),a&&Object(W.jsx)(V.Wb,{ref:this.setMenuPopoverRef,placement:"bottom-end",transitionDuration:0,isOpen:l,onOpen:this.handleMenuOpen(!0),onClose:this.handleMenuOpen(!1),target:Object(W.jsx)(hr,{isMenuOpen:l}),content:Object(W.jsx)(mr,{children:this.filterMessageMenus(a).map(this.renderMessageMenu)}),preventOpen:!n},`messagePopover_${d}`)]})]})}}const Ar=Object(b.d)(e=>{var t;return{moderatorUserId:null==(t=e.moderations.sdkUser)?void 0:t.user_id}},wr)(Object(Os.c)(Dr));var Nr=n("JZM8"),Rr=n.n(Nr),Pr=n("OkfR");const Lr=e=>e.isAdminMessage();var Fr=e=>{const{file:t,user:n,data:a,thumbnails:i}=e,s=Object(Pr.d)(e),r=n?Object(H.camelCaseKeys)(n):void 0,o={...Object(H.camelCaseKeys)(e),sender:r,type:s};return s===Pr.a.file&&t?{...o,file:{...t,thumbnails:i},data:t.data}:{...o,data:a||""}},Ur=e=>{if(e.isFileMessage()){const t=Rr()(e,["name","size","type","url","thumbnails"]);return{...e,type:Pr.a.file,file:t}}return{...e,type:Lr(e)?Pr.a.admin:Pr.a.user,sender:Lr(e)?void 0:e.sender}};var $r=({message:e,...t})=>{const n=Object(a.useMemo)(()=>Fr(e),[e]);return Object(W.jsx)(Ar,{message:n,...t})};const Br=r.default.div.withConfig({displayName:"DateLine__StyledDateLine",componentId:"mc4hxq-0"})(["display:flex;position:sticky;top:0;z-index:",";margin-top:calc("," * 0.375);background:white;padding:0 calc("," * 2);height:calc("," * 4);line-height:calc("," * 4);letter-spacing:-0.3px;color:",";font-size:",";font-weight:600;"],290,rr.spacing,rr.spacing,rr.spacing,rr.spacing,Object(o.cssVariables)("neutral-8"),rr.dateFontSize);var Vr=({className:e,timestamp:t})=>{const n=Object(P.w)();return Object(W.jsx)(Br,{className:e,children:n(t,"shortDate")})};const zr=Object(a.createContext)({current:null,isOpen:!1,open:()=>{},close:()=>{}}),Hr=({children:e})=>{const[t,n]=Object(a.useState)(!1),[i,s]=Object(a.useState)(null);return Object(W.jsx)(zr.Provider,{value:{current:i,isOpen:t,open:e=>{s(e),n(!0)},close:()=>{n(!1)}},children:e})},qr=r.default.div.withConfig({displayName:"RelatedChat__Container",componentId:"sc-1irb62t-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;bottom:0;left:0;background-color:",";"],Object(o.cssVariables)("neutral-1")),Gr=r.default.div.withConfig({displayName:"RelatedChat__Header",componentId:"sc-1irb62t-1"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:8px 8px 8px 12px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),Wr=r.default.h4.withConfig({displayName:"RelatedChat__Subject",componentId:"sc-1irb62t-2"})(["",";color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),Kr=Object(r.default)(o.IconButton).attrs({icon:"close",size:"small",buttonType:"tertiary"}).withConfig({displayName:"RelatedChat__CloseButton",componentId:"sc-1irb62t-3"})(["svg,&:hover svg,&:active svg,&[aria-pressed='true'] svg,&:disabled svg{fill:",";}"],Object(o.cssVariables)("neutral-9")),Yr=r.default.div.withConfig({displayName:"RelatedChat__Body",componentId:"sc-1irb62t-4"})(["display:flex;flex:1;overflow:hidden;"]),Qr=r.default.div.withConfig({displayName:"RelatedChat__SpinnerWrapper",componentId:"sc-1irb62t-5"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;"]),Jr=r.default.div.withConfig({displayName:"RelatedChat__MessagesBody",componentId:"sc-1irb62t-6"})(["","{background:",";}"],vr,Object(o.cssVariables)("neutral-1")),Xr=Object(r.default)(Vr).withConfig({displayName:"RelatedChat__StyledDateLine",componentId:"sc-1irb62t-7"})(["background:",";"],Object(o.cssVariables)("neutral-1")),Zr=Object(r.css)(["","{font-size:12px;line-height:1.33;color:",";}"],lr,Object(o.cssVariables)("neutral-7")),eo=r.default.div.withConfig({displayName:"RelatedChat__EmptyViewWrapper",componentId:"sc-1irb62t-8"})(["position:absolute;top:42%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;width:100%;p{padding-top:12px;",";color:",";}"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7")),to=()=>{const e=Object(E.a)(),t=Object(P.c)(),{getErrorMessage:n}=Object($.a)(),{close:i,current:s}=Object(a.useContext)(zr),[r,l]=Object(a.useState)(!1),[c,d]=Object(a.useState)(0),[u,p]=Object(a.useState)([]),g=Object(a.useRef)(!0),h=Object(a.useRef)(null),m=Object(a.useRef)(null),f=e=>{null==m.current&&(m.current=e)},b=async({currentTarget:e})=>{if(c>u.length&&h.current&&0===e.scrollTop&&s)try{const{data:e}=await Object(js.fetchGroupChannelsMessages)({appId:t,channelUrl:s.channel_url,ts:u[0].created_at,prevLimit:20,nextLimit:0,include:!1});p(e.messages.concat(u))}catch(e){o.toast.error({message:n(e)})}},j=Object(a.useCallback)(e=>{let t;const n=[];return e.forEach((e,i)=>{if(t){if(t&&t.created_at&&e.created_at){Object(H.shouldRenderDateLine)({previousDate:t.created_at,nextDate:e.created_at})&&n.push(Object(W.jsx)(Xr,{timestamp:e.created_at},e.created_at))}}else n.push(Object(W.jsx)(Xr,{timestamp:e.created_at},e.created_at));if(t=e,!La()(e)){const t=(e=>{var t;if("FILE"!==e.type||null==e.file)return e;const{url:n,thumbnails:a}=new window.dashboardSB.FileMessage({...e,url:null==(t=e.file)?void 0:t.url});return{...e,file:{...e.file,url:n},thumbnails:a}})(e);n.push(Object(a.createElement)($r,{...0===i&&{onRefAttached:f},key:t.message_id,message:t,messageItemStyles:H.platformMessageTypeChecker.isAdminMessage(e)&&Zr}))}}),n},[]);return Object(a.useEffect)(()=>{(async()=>{if(s)try{l(!0);const{data:{total:e}}=await Object(js.fetchGroupChannelsMessagesTotalCount)({appId:t,channelUrl:s.channel_url}),{data:{messages:n}}=await Object(js.fetchGroupChannelsMessages)({appId:t,channelUrl:s.channel_url,ts:(new Date).valueOf(),prevLimit:50,nextLimit:0,include:!0});d(e),p(n)}catch(e){o.toast.error({message:n(e)})}finally{l(!1)}})()},[t,s,n]),Object(a.useLayoutEffect)(()=>{var e,t,n;u.length>0&&(g.current?(g.current=!1,setTimeout(()=>{var e;return null==(e=h.current)?void 0:e.scrollToBottom()})):null==(e=h.current)||e.scrollTo(0,(null!=(t=null==(n=m.current)?void 0:n.offsetTop)?t:0)-100))},[u]),s?Object(W.jsxs)(qr,{children:[Object(W.jsxs)(Gr,{children:[Object(W.jsx)(Wr,{children:s.name}),Object(W.jsx)(Kr,{onClick:i})]}),Object(W.jsx)(Yr,{children:r&&g.current?Object(W.jsx)(Qr,{"data-test-id":"SpinnerWrapper",children:Object(W.jsx)(o.Spinner,{size:32})}):Object(W.jsx)(o.ScrollBar,{ref:h,onScroll:b,children:Object(W.jsx)(Jr,{"data-test-id":"MessageBody",children:u.length>0?j(u):Object(W.jsxs)(eo,{children:[Object(W.jsx)(o.Icon,{icon:"admin-message",size:64,color:Object(o.cssVariables)("neutral-5")}),Object(W.jsx)("p",{children:e.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.relatedChat.noMessage"})})]})})})})]}):null};var no=n("HVr3");const ao=()=>{const{isPermitted:e}=Object(x.a)(),{shouldAuthenticateToAccessFiles:t,project:n,currentAgent:i}=Object(P.V)(e=>{var t,n,a;return{shouldAuthenticateToAccessFiles:null!=(t=null==(n=e.applicationState)||null==(a=n.data)?void 0:a.attrs.file_authentication)&&t,project:e.desk.project,currentAgent:e.desk.agent}}),s=e(["desk.agent"])?n.fileEncryptionAgentPermission:n.fileEncryptionAdminPermission;return Object(a.useMemo)(()=>({shouldAuthenticateToAccessFiles:t,fileEncryptionPermission:s,currentAgent:i}),[i,s,t])},io=e=>{const{ticket:{status2:t,recentAssignment:n},agentId:a,fileEncryptionPermission:i}=e;return i===f.ib.ALL||i===f.ib.MY_TICKETS&&(null==n?void 0:n.agent.id)===a&&(t===f.jc.ACTIVE||t===f.jc.IDLE)},so=e=>{const{shouldAuthenticateToAccessFiles:t,fileEncryptionPermission:n,currentAgent:i}=ao(),{ticket:s}=e,r=io({ticket:s,agentId:i.id,fileEncryptionPermission:n});return Object(a.useMemo)(()=>!t||r,[r,t])},ro=360,oo=Object(W.jsx)(o.Spinner,{size:24,stroke:Object(o.cssVariables)("neutral-3")}),lo=r.default.div.withConfig({displayName:"mediaRenderers__Placeholder",componentId:"r8ggqv-0"})(["position:relative;background-color:",";border:1px solid ",";display:flex;align-items:center;justify-content:center;flex:none;"],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-3"));var co=Object(r.default)(lo).withConfig({displayName:"mediaRenderers___StyledPlaceholder",componentId:"r8ggqv-1"})(["border-radius:","px;width:","px;height:","px;"],e=>e._css,e=>e._css2,e=>e._css3);const uo=r.default.img.withConfig({displayName:"mediaRenderers__Image",componentId:"r8ggqv-2"})(["object-fit:cover;&[data-clickable='true']{cursor:pointer;}"]);var po=Object(r.default)(uo).withConfig({displayName:"mediaRenderers___StyledImage",componentId:"r8ggqv-3"})([""," max-width:","px;max-height:",";border-radius:","px;"],e=>e._css4,e=>e._css5,e=>e._css6,e=>e._css7);const go=r.default.video.withConfig({displayName:"mediaRenderers__Video",componentId:"r8ggqv-4"})(["display:block;object-fit:cover;"]);var ho=Object(r.default)(go).withConfig({displayName:"mediaRenderers___StyledVideo2",componentId:"r8ggqv-5"})(["",""],e=>e._css9),mo=Object(r.default)(go).withConfig({displayName:"mediaRenderers___StyledVideo",componentId:"r8ggqv-6"})(["",""],e=>e._css8);const fo=i.a.createContext({ref:void 0,updateRef:()=>{}}),bo=e=>{const{file:t,frameSize:n,maxSize:i=ro,borderRadius:s=0,placeholderRatio:l=.75,className:c}=e,{fetchStatus:d,dimension:u,onClick:p}=t,[g,h]=Object(a.useState)(!1),m=n||(u?((e,t=ro)=>{const{width:n,height:a}=e;if(n<=t&&a<=t)return{width:n,height:a};if(n>a){const e="number"==typeof t?t:t.width;return{width:e,height:e*a/n}}return"number"==typeof t?{width:t*n/a,height:t}:{width:t.width,height:t.width*a/n}})(u,i):void 0),f="failed"===d||g,b="number"==typeof i?i:i.width,j="number"==typeof i?i:void 0;if("fetching"===d||f){const{width:e,height:n}=(()=>{if(m){if("number"==typeof m.width&&"number"==typeof m.height)return m;if("number"==typeof m.width)return{width:m.width,height:m.width*l};if("number"==typeof m.height)return{height:m.height,width:m.height/l}}return{width:b,height:b*l}})();return Object(W.jsx)(co,{className:c,"data-src":t.url,_css:s,_css2:e,_css3:n,children:"fetching"===d?oo:Object(W.jsx)(o.Icon,{icon:"no-thumbnail",size:48,color:Object(o.cssVariables)("neutral-3")})})}return Object(W.jsx)(po,{className:c,src:t.url,"data-clickable":!!p,onClick:p,onError:()=>{h(!0)},"data-test-id":"ImageFileMessage",_css4:m&&Object(r.css)(["width:",";height:",";"],"number"==typeof m.width?`${m.width}px`:m.width,"number"==typeof m.height?`${m.height}px`:m.height),_css5:b,_css6:j&&`${j}px`,_css7:s})},jo=e=>{const{file:t,frameSize:n,maxSize:a=ro,borderRadius:i=0,className:s}=e,{aspectRatio:o,type:l,sources:c,url:d}=t,u=n||(o?((e,t=ro)=>{const{x:n,y:a}=e;return n>a?{width:t,height:t*a/n}:{width:t*n/a,height:t}})(o,a):void 0),p={autoPlay:"twitter-gif"===l,loop:"twitter-gif"===l,controls:"twitter-gif"!==l,preload:"auto",muted:!0,width:u?u.width:void 0,height:u&&"number"==typeof u.height?u.height:void 0,className:s},g=Object(r.css)(["width:",";height:",";max-width:","px;max-height:","px;border-radius:","px;"],u&&"number"==typeof u.width?`${u.width}px`:void 0,u&&"number"==typeof u.height?`${u.height}px`:void 0,a,a,i);return c?Object(W.jsx)(mo,{...p,_css8:g,children:c.map((e,t)=>"string"==typeof e?Object(W.jsx)("source",{src:e},`source_${e}_${t}`):Object(W.jsx)("source",{type:e.contentType,src:e.url},`source_${e.url}_${t}`))}):Object(W.jsx)(ho,{...p,_css9:g,children:Object(W.jsx)("source",{src:d})})};var yo=Object(r.default)("audio").withConfig({displayName:"mediaRenderers___StyledAudio",componentId:"r8ggqv-7"})(["",""],e=>e._css10);const Oo=e=>{const{file:t,maxSize:n=ro,styles:a}=e,{url:i}=t,s=Object(r.css)(["display:block;max-width:","px;max-height:","px;",""],n,n,a);return Object(W.jsx)(yo,{preload:"auto",controls:!0,src:i,_css10:s})};var vo=n("2xqg"),xo=n.n(vo),_o=(n("56W2"),n("wNFp"));const Co=r.default.div.withConfig({displayName:"bubble__Bubble",componentId:"h3ml2h-0"})(["border-radius:8px;border:1px solid;",""],e=>"white"===e.backgroundColor?Object(r.css)(["border:1px solid ",";background-color:white;"],Object(o.cssVariables)("neutral-3")):e.backgroundColor?Object(r.css)(["border-color:transparent;background-color:",";"],Object(o.cssVariables)([e.backgroundColor,1])):Object(r.css)(["border-color:transparent;background-color:",";"],e.isOwn?Object(o.cssVariables)("purple-3"):Object(o.cssVariables)("neutral-2"))),ko=r.default.div.withConfig({displayName:"bubble__WhiteBubble",componentId:"h3ml2h-1"})(["border-radius:8px;border:1px solid ",";background-color:white;"],Object(o.cssVariables)("neutral-3")),wo=Object(r.default)(o.OverflowMenu).withConfig({displayName:"chatBubbleRenderer__MenuButton",componentId:"sc-46o865-0"})(["grid-area:menu;margin-top:6px;position:relative;",""],({isDisabled:e})=>e&&Object(r.css)(["&:after{content:'';position:absolute;top:0;left:0;width:32px;height:32px;background:",";opacity:0.4;cursor:not-allowed;}"],Object(o.cssVariables)("neutral-1"))),To=r.default.div.withConfig({displayName:"chatBubbleRenderer__Container",componentId:"sc-46o865-1"})(["display:grid;grid-template-rows:auto auto;grid-gap:4px ","px;"," ","{visibility:hidden;}:hover ",",&[data-is-menu-open='true'] ","{visibility:visible;}& + &{margin-top:","px;}.ChatBubbleRenderer__renderAvatar{grid-area:avatar;align-self:end;margin-bottom:6px;}"],8,e=>e.isOwn?Object(r.css)(["grid-template-columns:1fr ","px auto ","px;grid-template-areas:'. menu   message avatar' '. status status  .';align-self:flex-end;","{justify-self:end;}"],32,32,wo):Object(r.css)(["grid-template-columns:","px auto ","px 1fr;grid-template-areas:'avatar message menu   .' '.      status  status .';align-self:flex-start;"],32,32),wo,wo,wo,e=>e.isStatusHidden?0:16),So=r.default.div.withConfig({displayName:"chatBubbleRenderer__MessageArea",componentId:"sc-46o865-2"})(["grid-area:message;justify-self:",";display:grid;grid-template-columns:100%;grid-auto-flow:row;grid-gap:4px;justify-items:",";"],e=>e.isOwn?"end":"start",e=>e.isOwn?"end":"start");var Eo=Object(r.default)(So).withConfig({displayName:"chatBubbleRenderer___StyledMessageArea",componentId:"sc-46o865-3"})(["",""],e=>e._css);const Io=r.default.div.withConfig({displayName:"chatBubbleRenderer__Status",componentId:"sc-46o865-4"})(["grid-area:status;display:flex;flex-direction:",";align-items:center;font-size:12px;line-height:16px;color:",";"],e=>e.isOwn?"row-reverse":"row",Object(o.cssVariables)("neutral-7")),Mo=i.a.createContext(void 0),Do=i.a.forwardRef(({isOwn:e,renderAvatar:t,renderStatus:n=(()=>null),renderMessageArea:i,isAvatarHidden:s,isStatusHidden:r,actions:o=[],className:l},c)=>{const d=Object(a.useRef)(null),u=Object(b.g)(e=>e.sendbird.isConnected),p=Object(a.useCallback)(e=>{d.current&&Object.keys(e).includes("isOpen")&&(d.current.dataset.isMenuOpen=`${!!e.isOpen}`)},[]),g=Object(a.useContext)(Mo),h=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8});return Object(W.jsxs)(To,{ref:e=>{d.current=e,"function"==typeof c?c(e):c&&"object"==typeof c&&(c.current=e)},isOwn:e,isStatusHidden:r,"data-test-id":"ChatBubbleContainer","data-is-menu-open":!1,className:l,children:[!s&&t({className:"ChatBubbleRenderer__renderAvatar"}),Object(W.jsx)(Eo,{isOwn:e,"data-test-id":"ChatBubbleMessage",_css:h?`max-width: ${h}px;`:void 0,children:i()}),o.length>0&&Object(W.jsx)(wo,{items:o,isDisabled:!u,onStateChange:p,popperProps:{placement:e?"bottom-start":"bottom-end",modifiers:{flip:{boundariesElement:null!=g?g:"viewport"}}}}),!r&&Object(W.jsx)(Io,{isOwn:e,children:n()})]})}),Ao=Object(W.jsx)("span",{"aria-hidden":!0,style:{width:8,textAlign:"center"},children:"∙"}),No=Object(W.jsx)(o.Spinner,{size:16,stroke:Object(o.cssVariables)("purple-7")}),Ro=r.default.div.withConfig({displayName:"ChatBubble__MessageText",componentId:"sc-1eyfrp1-0"})(["word-break:break-word;white-space:pre-line;> a{text-decoration:underline;}"]),Po=Object(r.default)(Co).withConfig({displayName:"ChatBubble__MessageBubble",componentId:"sc-1eyfrp1-1"})(["padding:11px 15px;max-width:100%;min-height:44px;color:",";",";","{"," "," "," ","}"],Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"],Ro,e=>e.isDimmed&&Object(r.css)(["color:",";"],Object(o.cssVariables)("neutral-5")),e=>e.isDeleted&&Object(r.css)(["text-decoration:line-through;color:",";"],Object(o.cssVariables)("neutral-5")),({$isRemoved:e})=>e&&Object(r.css)(["color:",";"],Object(o.cssVariables)("neutral-6")),e=>e.isOwn&&Object(r.css)(["> a{color:inherit;}"])),Lo=r.default.div.withConfig({displayName:"ChatBubble__AvatarWrapper",componentId:"sc-1eyfrp1-2"})(["cursor:",";"],({$isCursorPointer:e})=>e&&"pointer"),Fo=r.default.div.withConfig({displayName:"ChatBubble__SenderNameContainer",componentId:"sc-1eyfrp1-3"})(["display:flex;flex-direction:row;align-items:baseline;"]),Uo=r.default.div.withConfig({displayName:"ChatBubble__SenderName",componentId:"sc-1eyfrp1-4"})(["flex:none;max-width:100%;color:",";font-weight:600;white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;"],Object(o.cssVariables)("neutral-10")),$o=r.default.span.withConfig({displayName:"ChatBubble__TwitterScreenName",componentId:"sc-1eyfrp1-5"})(["min-width:0;flex-shrink:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-size:12px;color:",";line-height:1;font-weight:400;margin-left:8px;"],Object(o.cssVariables)("neutral-7")),Bo=Object(r.default)(ko).withConfig({displayName:"ChatBubble__FileBubble",componentId:"sc-1eyfrp1-6"})(["max-width:100%;overflow:hidden;img,video{display:block;}",""],e=>e.shouldHideBorder&&Object(r.css)(["border-radius:0;border:none;background-color:transparent;overflow:auto;"])),Vo=Object(r.default)(ko).withConfig({displayName:"ChatBubble__URLPreviewBubble",componentId:"sc-1eyfrp1-7"})(["display:flex;flex-direction:column;width:224px;overflow:hidden;padding-bottom:16px;.URLPreviewBubble__image{width:100%;height:auto;border-bottom:1px solid ",";margin-bottom:12px;}.URLPreviewBubble__title{"," color:",";margin-bottom:4px;max-height:40px;overflow:hidden;padding:0 16px;}.URLPreviewBubble__description{font-size:12px;line-height:16px;color:",";max-height:48px;overflow:hidden;padding:0 16px;}:hover{.URLPreviewBubble__title,.URLPreviewBubble__description{text-decoration:underline;text-decoration-color:currentColor;}}"],Object(o.cssVariables)("neutral-3"),o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-7")),zo=r.default.div.withConfig({displayName:"ChatBubble__GeneralFileContainer",componentId:"sc-1eyfrp1-8"})(["padding:11px 15px;display:flex;flex-direction:row;align-items:center;> * + *{margin-left:12px;}.GeneralFileContainer__icon{padding:10px;background-color:",";border-radius:6px;}.GeneralFileContainer__name{"," min-width:0;word-break:break-all;}.GeneralFileContainer__size{font-size:12px;line-height:16px;color:",";margin-top:4px;min-width:0;}"],Object(o.cssVariables)("neutral-1"),o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-7")),Ho=Object(r.default)(o.IconButton).withConfig({displayName:"ChatBubble__DownloadButton",componentId:"sc-1eyfrp1-9"})(["flex:none;"]),qo=r.default.div.withConfig({displayName:"ChatBubble__ReactionItem",componentId:"sc-1eyfrp1-10"})(["display:flex;flex-direction:row;align-items:center;"," "," .ReactionItem__count{display:flex;flex-direction:column;align-items:center;position:relative;}.ReactionItem__icon{margin-right:4px;}.ReactionItem__tooltip{position:absolute;bottom:calc(100% + 4px);background-color:",";border-radius:4px;padding:12px 16px;"," color:white;white-space:nowrap;pointer-events:none;user-select:none;opacity:0;animation:"," 0.2s "," forwards;visibility:hidden;::after{content:'';display:block;position:absolute;left:50%;margin-left:-6px;bottom:-12px;width:0;height:0;box-sizing:content-box;border:6px solid transparent;border-top-color:",";opacity:0;animation:"," 0.2s "," forwards;}}"],e=>e.participated&&Object(r.css)(["color:",";font-weight:600;"],e.activeColor),e=>e.hasTooltip&&Object(r.css)([":hover{.ReactionItem__tooltip{visibility:visible;}.ReactionItem__count{text-decoration:underline;}}"]),Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],o.animationFadeIn,o.transitionDefault,Object(o.cssVariables)("neutral-10"),o.animationFadeIn,o.transitionDefault),Go=r.default.a.withConfig({displayName:"ChatBubble__SocialMediaIconWrapper",componentId:"sc-1eyfrp1-11"})(["display:flex;flex-direction:column;align-items:center;position:relative;:hover::before{content:'","';display:block;position:absolute;bottom:calc(100% + 4px);background-color:",";border-radius:4px;padding:8px 16px;font-size:13px;line-height:16px;font-weight:600;color:white;white-space:nowrap;pointer-events:none;user-select:none;opacity:0;animation:"," 0.2s "," forwards;}:hover::after{content:'';display:block;position:absolute;bottom:calc(100% - 8px);width:0;height:0;box-sizing:content-box;border:6px solid transparent;border-top-color:",";opacity:0;animation:"," 0.2s "," forwards;}"],e=>CSS.escape((e.href||"").trim()),Object(o.cssVariables)("neutral-10"),o.animationFadeIn,o.transitionDefault,Object(o.cssVariables)("neutral-10"),o.animationFadeIn,o.transitionDefault),Wo=r.default.div.withConfig({displayName:"ChatBubble__DeliveryStatusIconWrapper",componentId:"sc-1eyfrp1-12"})(["",""],e=>e.isOwn?"margin-left: 4px;":"margin-right: 4px;"),Ko=e=>{const{file:t,mediaMaxSize:n}=e,{type:a,name:i,url:s,onClick:r}=t;switch(a){case"image":return Object(W.jsx)(bo,{file:t,maxSize:n,borderRadius:8});case"video":case"twitter-gif":return Object(W.jsx)(jo,{file:t,maxSize:n,borderRadius:8});case"audio":return Object(W.jsx)(Oo,{file:t,maxSize:n});default:{const e={audio:"audio-filled",archive:"zip-filled",document:"document-filled",video:"video-filled",misc:"file-filled"}[a];return Object(W.jsxs)(zo,{children:[Object(W.jsx)("div",{className:"GeneralFileContainer__icon",children:Object(W.jsx)(o.Icon,{icon:e,size:20,color:Object(o.cssVariables)("neutral-6")})}),Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{className:"GeneralFileContainer__name",children:i||s}),t.formattedSize&&Object(W.jsx)("div",{className:"GeneralFileContainer__size",children:t.formattedSize})]}),Object(W.jsx)(Ho,{icon:"download",size:"small",buttonType:"secondary",onClick:r,"data-test-id":"DownloadButton"})]})}}},Yo=i.a.forwardRef(({actions:e=[],avatar:t,backgroundColor:n,className:s,date:r,deliveryStatus:l,files:c=[],isAvatarHidden:d,isDeleted:u,isRemoved:p=!1,isDimmed:g,isOwn:h=!1,isSenderHidden:m,isStatusHidden:f,mediaMaxSize:b=360,message:j,messageId:y,reactions:O=[],senderName:v,twitterScreenName:x,socialMediaLink:_,status:C,urlPreview:k,embeddedSocialMediaPost:w,renderStatus:T,onAvatarClick:S,children:I},M)=>{const D=Object(E.a)(),A=Object(_o.a)(),N=(()=>{switch(l){case"sending":return No;case"sent":return Object(W.jsx)(o.Icon,{icon:"done",color:Object(o.cssVariables)("green-5"),size:16});case"read":return Object(W.jsx)(o.Icon,{icon:"done-all",color:Object(o.cssVariables)("green-5"),size:16});case"fail":return Object(W.jsx)(o.Icon,{icon:"warning-filled",color:Object(o.cssVariables)("red-5"),size:16});default:return null}})(),R=Object(a.useMemo)(()=>p?D.formatMessage({id:"desk.conversation.sendbird.message.deleted"}):"string"==typeof j?Object(H.convertURLsAndEmailsToLinks)(j):j,[D,p,j]);return Object(W.jsx)(Do,{ref:M,isOwn:h,isStatusHidden:f,renderAvatar:({className:e})=>{const{profileID:n=v||"",imageUrl:a="",type:i=o.AvatarType.User}=t||{};return Object(W.jsx)(Lo,{className:e,$isCursorPointer:"function"==typeof S,onClick:S,children:Object(W.jsx)(o.Avatar,{type:i,size:32,profileID:n,imageUrl:a})})},renderMessageArea:()=>Object(W.jsxs)(W.Fragment,{children:[!p&&c&&c.map((e,t)=>Object(W.jsx)(Bo,{style:{maxWidth:b,maxHeight:b},shouldHideBorder:["audio","video","image","twitter-gif"].includes(e.type),"data-test-id":"FileBubble",children:Object(W.jsx)(Ko,{file:e,mediaMaxSize:b})},`${e.type}_${e.url||t}`)),(j||p)&&Object(W.jsxs)(Po,{isOwn:h,backgroundColor:n,isDeleted:u,$isRemoved:p,isDimmed:g,children:[v&&!m&&Object(W.jsxs)(Fo,{children:[Object(W.jsx)(Uo,{children:v}),x&&Object(W.jsx)($o,{children:x})]}),Object(W.jsx)(Ro,{dir:A,children:R}),w]}),k&&Object(W.jsxs)(Vo,{as:"a",href:k.url,target:"_blank",children:[Object(W.jsx)("img",{className:"URLPreviewBubble__image",src:k.imageURL,alt:""}),Object(W.jsx)("div",{className:"URLPreviewBubble__title",children:k.title}),Object(W.jsx)("div",{className:"URLPreviewBubble__description",children:k.description})]}),I]}),renderStatus:T||(()=>Object(W.jsxs)(W.Fragment,{children:[N&&Object(W.jsx)(Wo,{isOwn:h,children:N}),Object(W.jsx)("span",{children:r&&r.format("HH:mm")}),O.length>0&&O.map(e=>{const{icon:t,participated:n,activeColor:a=Object(o.cssVariables)("green-5"),count:s,tooltipContent:r}=e,l=[y,t].filter(e=>e).join("-"),c=`${l}-tooltip`;return Object(W.jsxs)(i.a.Fragment,{children:[Ao,Object(W.jsxs)(qo,{activeColor:a,participated:n,"aria-labelledby":r?c:void 0,hasTooltip:!!r,children:[Object(W.jsx)(o.Icon,{className:"ReactionItem__icon",icon:t,size:12,color:n?a:Object(o.cssVariables)("neutral-6")}),Object(W.jsxs)("div",{className:"ReactionItem__count",children:[s,r&&Object(W.jsx)("div",{className:"ReactionItem__tooltip",id:c,children:r})]})]})]},l)}),C&&Object(W.jsxs)(W.Fragment,{children:[Ao,Object(W.jsx)("span",{children:C})]}),_&&!u&&Object(W.jsxs)(W.Fragment,{children:[Ao,Object(W.jsx)(Go,{href:_.url,target:"_blank",children:Object(W.jsx)(o.Icon,{icon:_.type,size:12,color:Object(o.cssVariables)("neutral-6")})})]})]})),isAvatarHidden:d,actions:e,className:s})});var Qo=Object(r.default)(Yo).withConfig({displayName:"ChatBubble",componentId:"sc-1eyfrp1-13"})([""]);const Jo=({message:e,previousMessage:t,nextMessage:n})=>{const a=t&&t.timestamp,i=n&&n.timestamp,s=!!a&&a.isSame(e.timestamp,"date"),r=(t&&t.senderId)===e.senderId,o=(t&&t.messageType)===e.messageType,l=!!t&&!!e.deskMessageType&&t.deskMessageType!==e.deskMessageType,c=i&&e.timestamp.isSame(i,"date"),d=i&&e.timestamp.isSame(i,"minute"),u=(n&&n.senderId)!==e.senderId,p=!!n&&!!e.deskMessageType&&n.deskMessageType!==e.deskMessageType,g=!c||u||!d||p&&!e.isRemoved;return{hideSender:s&&r&&(o||!!e.isRemoved)&&(!l||!!e.isRemoved),hideProfile:!g}},Xo=({message:e,previousMessage:t,nextMessage:n})=>{let{hideSender:a,hideProfile:i}=Jo({message:e,previousMessage:t,nextMessage:n});return e.isInReplyToStatusVisible&&(a=!1),n&&n.isInReplyToStatusVisible&&(i=!1),{hideSender:a,hideProfile:i}},Zo=r.default.div.withConfig({displayName:"FAQBotAnswers__ImageWrapper",componentId:"sc-1l9obug-0"})(["display:flex;position:relative;align-items:center;justify-content:center;border-radius:8px;background:",";width:64px;height:64px;overflow:hidden;"],Object(o.cssVariables)("neutral-1")),el=r.default.div.withConfig({displayName:"FAQBotAnswers__InnerShadow",componentId:"sc-1l9obug-1"})(["position:absolute;top:0;right:0;bottom:0;left:0;opacity:0.08;border:1px solid ",";border-radius:8px;"],Object(o.cssVariables)("neutral-9")),tl=r.default.p.withConfig({displayName:"FAQBotAnswers__AnswerParagraph",componentId:"sc-1l9obug-2"})(["white-space:pre-line;word-break:break-word;"]);var nl=Object(r.default)("img").withConfig({displayName:"FAQBotAnswers___StyledImg",componentId:"sc-1l9obug-3"})(["width:100%;height:100%;object-fit:cover;",""],e=>e._css);const al=Object(r.default)(({src:e,className:t})=>{const n=Object(a.useRef)(null),[i,s]=Object(a.useState)("init");return Object(W.jsxs)(Zo,{className:t,children:["error"===i&&Object(W.jsx)(o.Icon,{size:24,icon:"no-thumbnail",color:Object(o.cssVariables)("neutral-5")}),"init"===i&&Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-5")}),Object(W.jsx)(nl,{ref:n,src:e,onLoad:()=>{s("loaded")},onError:()=>{s("error")},alt:"",_css:"loaded"!==i&&Object(r.css)(["width:0;opacity:0;"])}),Object(W.jsx)(el,{})]})}).withConfig({displayName:"FAQBotAnswers__Image",componentId:"sc-1l9obug-4"})([""]);var il=Object(r.default)(al).withConfig({displayName:"FAQBotAnswers___StyledImage",componentId:"sc-1l9obug-5"})(["flex:none;margin-right:16px;"]);const sl=r.default.button.withConfig({displayName:"FAQBotAnswers__FAQAnswerListItem",componentId:"sc-1l9obug-6"})(["display:flex;position:relative;flex-direction:column;align-items:flex-start;border:1px solid ",";border-radius:8px;background:none;cursor:pointer;padding:12px;width:",";text-align:left;transition:0.2s ",";transition-property:border,background;"," &:hover{border-color:",";}&:focus{outline:0;border-color:",";background:",";}& + &{margin-top:8px;}"," a{margin-top:8px;}"],Object(o.cssVariables)("neutral-3"),e=>"compact"===e.$messageRenderMode?"100%":"340px",o.transitionDefault,o.Body["body-short-01"],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-2"),e=>e.$hasImage&&("default"===e.$messageRenderMode?Object(r.css)(["padding-left:88px;","{position:absolute;top:12px;left:12px;}"],al):Object(r.css)(["","{margin-bottom:8px;}"],al))),rl=r.default.div.withConfig({displayName:"FAQBotAnswers__TextWrapper",componentId:"sc-1l9obug-7"})(["max-height:64px;overflow:hidden;dt{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;","}dd{-webkit-box-orient:vertical;-webkit-line-clamp:",";display:-webkit-box;margin-top:4px;overflow:hidden;word-break:break-word;}"],o.Headings["heading-01"],e=>e.$isClipped?1:2);var ol=Object(r.default)("div").withConfig({displayName:"FAQBotAnswers___StyledDiv",componentId:"sc-1l9obug-8"})(["display:flex;flex-direction:row;"]),ll=Object(r.default)("div").withConfig({displayName:"FAQBotAnswers___StyledDiv2",componentId:"sc-1l9obug-9"})(["",""],e=>e._css2),cl=Object(r.default)(o.Link).withConfig({displayName:"FAQBotAnswers___StyledLink",componentId:"sc-1l9obug-10"})(["margin-top:16px;"]);const dl=({question:e,answer:t})=>{const[n,i]=Object(a.useState)(!1),s=Object(a.useRef)(null);return Object(a.useEffect)(()=>{s.current&&i(s.current.clientHeight<s.current.scrollHeight)},[]),Object(W.jsxs)(rl,{ref:s,$isClipped:n,children:[Object(W.jsx)("dt",{children:e}),Object(W.jsx)("dd",{children:t})]})},ul=({data:e,messageRenderMode:t="default"})=>{const n=Object(E.a)(),i=(()=>{const e=Object(E.a)(),t=Object(P.W)();return Object(a.useCallback)(({question:n,answer:a,image_url:i,url:s})=>{t({dialogTypes:A.a.Custom,dialogProps:{title:n,body:Object(W.jsxs)(ol,{children:[i&&Object(W.jsx)(il,{src:i}),Object(W.jsxs)(ll,{_css2:o.Body["body-short-01"],children:[Object(W.jsx)(tl,{children:a}),s&&Object(W.jsx)(cl,{href:s,target:"_blank",iconProps:{icon:"open-in-new",size:16},children:e.formatMessage({id:"desk.conversation.faqbot.btn.seeMore"})})]})]}),isNegativeButtonHidden:!0}})},[e,t])})();return(e=>e&&"object"==typeof e&&Array.isArray(e.results)&&e.results.every(e=>"object"==typeof e&&"string"==typeof e.question&&"string"==typeof e.answer&&"string"==typeof e.objectID))(e)?Object(W.jsx)("dl",{children:e.results.map(e=>{const{objectID:a,question:s,answer:r,image_url:l,url:c}=e;return Object(W.jsxs)(sl,{$hasImage:!!l,$messageRenderMode:t,onClick:()=>i(e),children:[l&&Object(W.jsx)(al,{src:l}),Object(W.jsx)(dl,{question:s,answer:r}),c&&Object(W.jsx)(o.Link,{href:c,target:"_blank",iconProps:{icon:"open-in-new",size:16},onClick:e=>{e.stopPropagation()},children:n.formatMessage({id:"desk.conversation.faqbot.btn.seeMore"})})]},a)})}):null},pl=r.default.div.withConfig({displayName:"systemMessage__CenteredSystemMessage",componentId:"sc-1ocrja4-0"})(["padding:8px 0;text-align:center;font-size:12px;line-height:16px;color:",";margin:8px auto;"," + &{margin-top:16px;}& + ","{margin-top:8px;}"],Object(o.cssVariables)("neutral-10"),Qo,Qo),gl=Object(a.forwardRef)(({date:e,children:t},n)=>{const i=Object(E.a)(),s=Object(a.useMemo)(()=>c.a.isMoment(e)?e.format("HH:mm"):c()(e).format("HH:mm"),[e]);return Object(W.jsxs)(pl,{ref:n,"data-test-id":"CenteredSystemMessage",children:[t,s&&Object(W.jsxs)(W.Fragment,{children:["  ",i.formatMessage({id:"desk.conversation.systemMessageAt"},{date:s})]})]})});gl.displayName="SystemMessage";const hl=r.default.span.withConfig({displayName:"SendBirdMessage__StarContainer",componentId:"sc-1jxgst5-0"})(["display:inline-flex;align-items:center;vertical-align:-2px;"]);let ml;!function(e){e.User="user",e.File="file",e.Image="image",e.AutoMessage="autoMessage",e.BotMessage="botMessage",e.Satisfaction="satisfaction",e.System="system",e.ConfirmEndOfChat="confirmEndOfChat",e.URLPreview="urlPreview",e.None="none"}(ml||(ml={}));const fl=e=>{let t={};if(e&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}else t=e;return t},bl=e=>{if(!e)return ml.None;const{customType:t,data:n}=e,a=fl(n);if("SENDBIRD:AUTO_EVENT_MESSAGE"===t)return ml.AutoMessage;if("SENDBIRD_DESK_BOT_MESSAGE"===t)return ml.BotMessage;if("SENDBIRD_DESK_RICH_MESSAGE"===t&&a){if("SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE"===a.type)return ml.ConfirmEndOfChat;if("SENDBIRD_DESK_URL_PREVIEW"===a.type)return ml.URLPreview;if("SENDBIRD_DESK_CUSTOMER_SATISFACTION"===a.type)return ml.Satisfaction}if(H.sdkMessageTypeChecker.isAdminMessage(e))return"SENDBIRD_DESK_ADMIN_MESSAGE_CUSTOM_TYPE"===t?ml.System:ml.AutoMessage;if(H.sdkMessageTypeChecker.isFileMessage(e)){const{type:t}=e;return t.match(/^image.+$/i)?ml.Image:ml.File}return ml.User},jl=(e,t)=>[ml.AutoMessage,ml.ConfirmEndOfChat,ml.Satisfaction].includes(t)?Gi:e.sender?e.sender.profileUrl:void 0,yl=Object(a.forwardRef)(({customerSendbirdId:e,lastSeenAt:t,message:n,messagesMode:i=f.Q.SENDBIRD,messageRenderMode:s,nextMessage:r,previousMessage:l,deleteMessageAction:d},u)=>{const p=Object(E.a)(),g=Object(b.f)(),h=Object(P.W)(),m=bl(n),y=Object(b.g)(e=>e.desk.agent),O=[ml.AutoMessage,ml.ConfirmEndOfChat].includes(m),v=n.sender&&y&&y.sendbirdId===n.sender.userId,x=n.sender&&e===n.sender.userId,_=O||!x,C=()=>{"file"===n.messageType&&g(j.b.showImagePreviewRequest([{name:n.name||"",type:n.type,url:n.url||"",thumbnails:n.thumbnails&&n.thumbnails.map(e=>e.url),createdAt:n.createdAt}]))},k=Object(a.useMemo)(()=>v?y.displayName:n.sender?n.sender.nickname:"",[y.displayName,v,n.sender]),w=(()=>{if(i===f.Q.SENDBIRD)return _&&t>=n.createdAt?"read":_&&t<n.createdAt?"sent":void 0})(),T=c()(n.createdAt),S=v?{type:f.I.Agent,imageUrl:y.photoThumbnailUrl,profileID:y.email}:{type:f.I.Customer,imageUrl:jl(n,m),profileID:k},I=fl(n.data),{hideSender:M,hideProfile:D}=Jo({message:{senderId:n.sender&&n.sender.userId,timestamp:c()(n.createdAt),messageType:n.messageType,deskMessageType:m,isRemoved:n.isRemoved},previousMessage:l&&{senderId:l.sender&&l.sender.userId,timestamp:c()(l.createdAt),messageType:l.messageType,deskMessageType:bl(l),isRemoved:l.isRemoved},nextMessage:r&&{senderId:r.sender&&r.sender.userId,timestamp:c()(r.createdAt),messageType:r.messageType,deskMessageType:bl(r),isRemoved:r.isRemoved}}),N=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),R=N?Math.min(360,N):void 0,L=null==d?[]:[d],F=Object(a.useCallback)(async()=>{_&&n.sender&&h({dialogTypes:A.a.ViewAgentProfile,dialogProps:{sdkUserId:n.sender.userId}})},[_,n.sender,h]);return"file"===n.messageType?(e=>{switch(m){case ml.File:{const{url:t="",name:n,type:a="",thumbnails:i}=e,s=null==i?void 0:i[0],r=s&&{x:s.real_width/s.real_height,y:1},o=a.startsWith("audio")?"audio":a.startsWith("video")?"video":["application/msword","application/pdf","application/rtf","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/csv","text/html","text/plain"].includes(a)?"document":["application/x-7z-compressed","application/x-bzip","application/x-bzip2","application/x-rar-compressed","application/x-tar","application/zip"].includes(a)?"archive":"misc";return Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,files:[{type:o,url:t,name:n,..."video"===o?{aspectRatio:r}:void 0,onClick:()=>{window.open(t)}}],isAvatarHidden:D,isOwn:_,isSenderHidden:M,isStatusHidden:D,isRemoved:e.isRemoved,senderName:k,mediaMaxSize:R,actions:L,onAvatarClick:_?F:void 0})}case ml.Image:{const t=(e=>{if(0!==e.length)return e.length>2?e[e.length-2]:e[e.length-1]})(e.thumbnails),n=(null==t?void 0:t.url)||e.url||"",a=t?{width:t.real_width,height:t.real_height}:void 0;return Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,files:[{type:"image",url:n,dimension:a,onClick:C}],isAvatarHidden:D,isOwn:_,isSenderHidden:M,isStatusHidden:D,isRemoved:e.isRemoved,senderName:k,mediaMaxSize:R,actions:L,onAvatarClick:_?F:void 0})}default:return null}})(n):(t=>{const n=Object(H.convertURLsAndEmailsToLinks)(t.message);switch(m){case ml.ConfirmEndOfChat:{const e="CONFIRMED"===I.body.state?"green":"DECLINED"===I.body.state?"red":"yellow";return Object(W.jsx)(Qo,{ref:u,avatar:S,backgroundColor:e,date:T,deliveryStatus:w,isAvatarHidden:D,isOwn:_,isSenderHidden:M,isStatusHidden:D,isRemoved:t.isRemoved,message:n,senderName:k,mediaMaxSize:R})}case ml.URLPreview:return I.body.url&&I.body.image?Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,isAvatarHidden:D,isOwn:_,isSenderHidden:M,isStatusHidden:D,isRemoved:t.isRemoved,message:n,senderName:k,mediaMaxSize:R,urlPreview:{...I.body,imageURL:I.body.image},actions:L,onAvatarClick:_?F:void 0}):null;case ml.User:return Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,isAvatarHidden:D,isOwn:_,isSenderHidden:M,isStatusHidden:D,isRemoved:t.isRemoved,message:n,senderName:k,mediaMaxSize:R,actions:L,onAvatarClick:_?F:void 0});case ml.BotMessage:return Object(W.jsx)(Qo,{ref:u,avatar:{type:f.I.Bot,imageUrl:t.sender.profileUrl,profileID:t.sender.userId},date:T,deliveryStatus:w,isOwn:_,backgroundColor:"neutral",isAvatarHidden:D,isSenderHidden:M,isStatusHidden:D,message:n,senderName:k,mediaMaxSize:R,onAvatarClick:_?F:void 0,children:Object(W.jsx)(ul,{data:I,messageRenderMode:s})});case ml.AutoMessage:return Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,isOwn:_,backgroundColor:"neutral",isAvatarHidden:D,isSenderHidden:M,isStatusHidden:D,message:n,senderName:k,mediaMaxSize:R});case ml.Satisfaction:{const{customerSatisfactionScore:a,customerSatisfactionComment:i,status:s}=I.body;if("WAITING"===s)return Object(W.jsx)(Qo,{ref:u,avatar:S,date:T,deliveryStatus:w,isOwn:_,backgroundColor:"neutral",isSenderHidden:M,isStatusHidden:D,message:n,mediaMaxSize:R});if(null!=a){const n=Object(W.jsxs)(gl,{date:t.createdAt,children:[p.formatMessage({id:"desk.conversation.csat.ratedBy"},{ratedBy:e})," ",Object(W.jsxs)(hl,{style:{display:"inline-flex",alignItems:"center"},children:[xo()(a,()=>Object(W.jsx)(o.Icon,{icon:"star-filled",size:12,color:Object(o.cssVariables)("yellow-5")})),xo()(5-a,()=>Object(W.jsx)(o.Icon,{icon:"star-filled",size:12,color:Object(o.cssVariables)("neutral-3")}))]})]}),s=Object(W.jsx)(gl,{date:t.createdAt,children:p.formatMessage({id:"desk.conversation.csat.commented"},{commentedBy:e,customerSatisfactionComment:i})});return i?Object(W.jsxs)(W.Fragment,{children:[n,s]}):n}return null}case ml.System:return Object(W.jsx)(gl,{ref:u,date:T,children:n});default:return null}})(n)}),Ol=["doc","docx","odt","rtf","txt","pdf","htm","html","ppt","pptx"],vl=["zip","gz","7z","pkg","arj","deb","rar","rpm","z"],xl=(e,t)=>{const n=e.split("/"),a=n[n.length-1].match(/^[\w,\s-]+[\\.]([A-Za-z0-9]+)+/gi);if(!a)return{type:"misc"};const[i,s]=a;return t?{type:t,name:i}:Ol.includes(s)?{type:"document",name:i}:vl.includes(s)?{type:"archive",name:i}:{type:"misc",name:i}},_l=(e,t)=>{const{payload:{url:n},type:a}=e,i=t?()=>t(n):void 0,s=()=>window.open(n);switch(a){case f.db.IMAGE:case f.db.PHOTO:case f.db.STICKER:case f.db.ANIMATED_IMAGE_SHARE:return{type:"image",url:n,onClick:i};case f.db.VIDEO:return{type:"video",url:n};case f.db.AUDIO:return{url:n,...xl(n,"audio")};case f.db.FILE:case f.db.FALLBACK:default:return{url:n,...xl(n),onClick:s}}},Cl=Object(a.forwardRef)(({options:e,origin:t,message:n,ticketInfo:i,messageRenderMode:s="default"},r)=>{var o;const l=Object(b.f)(),d=Object(E.a)(),{facebookPage:u,customer:p,lastSeenAt:g}=i,{agent:h,id:m,isEcho:y,attachments:O,isTemp:v,messageType:x,text:_,timestamp:C}=n,k=y?u.name:p.displayName,w=y?{type:f.I.Agent,imageUrl:u.picture.url,profileID:null!=(o=null==h?void 0:h.email)?o:k}:{type:f.I.Customer,imageUrl:p.photoThumbnailUrl||void 0,profileID:k},{hideProfile:T,hideSender:S}=e,I=Object(a.useMemo)(()=>v?"sending":y&&"compact"!==s&&"conversation"===t?g>=C?"read":"sent":void 0,[y,v,g,s,C,t]),M=h?h.displayName:void 0,D=Object(a.useMemo)(()=>!v&&y&&(M||u.name)?d.formatMessage({id:"desk.conversation.facebook.status.sentBy"},{senderName:M,facebookPageName:u.name}):void 0,[u.name,d,y,v,M]),A=Object(a.useMemo)(()=>{if(O)try{const e=JSON.parse(O),t=e=>l(j.b.showImagePreviewRequest([{name:"",url:e}]));return e.filter(e=>!!e).map(e=>_l(e,t))}catch{return}},[O,l]),N=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),R=N?Math.min(360,N):void 0;return"system"===x?Object(W.jsx)(gl,{ref:r,date:C,children:Object(H.convertURLsAndEmailsToLinks)(n.text)}):Object(W.jsx)(Qo,{ref:r,messageId:m,isOwn:y,senderName:k,avatar:w,isSenderHidden:S,isAvatarHidden:T,isStatusHidden:T,message:Object(H.convertURLsAndEmailsToLinks)(_),date:c()(C),status:D,files:A,deliveryStatus:I,mediaMaxSize:R})});var kl=n("6acW"),wl=n.n(kl),Tl=n("Uuth");const Sl=r.default.div.withConfig({displayName:"mediaGrid__GridContainer",componentId:"swn9z7-0"})(["display:grid;grid-template-rows:auto 1fr;grid-template-columns:auto 1fr;grid-gap:","px;"],e=>e.gap),El=({file:e,frameSize:t,borderRadius:n,className:a})=>"image"===e.type?Object(W.jsx)(bo,{file:e,frameSize:t,borderRadius:n,className:a},e.url):Object(W.jsx)(jo,{file:e,frameSize:t,borderRadius:n,className:a},e.url);var Il=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer6",componentId:"swn9z7-1"})(["grid-row:auto / span 2;grid-column:auto / span 2;"]),Ml=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer5",componentId:"swn9z7-2"})(["grid-row:1 / 3;grid-column:auto / span 1;"]),Dl=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer4",componentId:"swn9z7-3"})(["grid-row:2 / 3;grid-column:2 / 3;"]),Al=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer3",componentId:"swn9z7-4"})(["grid-row:1 / 2;grid-column:2 / 3;"]),Nl=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer2",componentId:"swn9z7-5"})(["grid-row:1 / 3;grid-column:1 / 2;"]),Rl=Object(r.default)(El).withConfig({displayName:"mediaGrid___StyledMediaItemRenderer",componentId:"swn9z7-6"})(["grid-row:auto / span 1;grid-column:auto / span 1;"]);const Pl=({files:e,frameSize:t,itemBorderRadius:n})=>{const{width:a,height:i}=t,s=a>200?4:2,r=e.slice(0,4),o={width:(a-s)/2,height:(i-s)/2},l={width:o.width,height:i},c=(()=>{switch(r.length){case 4:return r.map(e=>Object(W.jsx)(Rl,{file:e,frameSize:o,borderRadius:n},e.url));case 3:{const[e,t,a]=r;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Nl,{file:e,frameSize:l,borderRadius:n}),Object(W.jsx)(Al,{file:t,frameSize:o,borderRadius:n}),Object(W.jsx)(Dl,{file:a,frameSize:o,borderRadius:n})]})}case 2:return r.map(e=>Object(W.jsx)(Ml,{file:e,frameSize:l,borderRadius:n},e.url));case 1:{const[e]=r;return Object(W.jsx)(Il,{file:e,frameSize:t,borderRadius:n})}default:return null}})();return Object(W.jsx)(Sl,{gap:s,children:c})},Ll={width:80,height:80},Fl=Object(r.default)(ko).withConfig({displayName:"SocialMediaPostBubbleMessage__PostBubble",componentId:"sc-1401ju3-0"})(["display:flex;position:relative;padding:12px 16px;align-items:flex-start;"," flex-direction:",";"," > * + *{","}",""],e=>"vertical"===e.layoutDirection&&e.hasMedia&&"padding-top: 16px;",e=>"vertical"===e.layoutDirection?"column":"row",e=>"vertical"===e.layoutDirection&&`width: ${Math.min(360,e.maxWidth)}px;`,e=>"vertical"===e.layoutDirection?"margin-top: 12px;":"margin-left: 16px;",e=>"vertical"===e.layoutDirection?Object(r.css)(["flex-direction:column;width:","px;> * + *{margin-top:12px;}"],Math.min(360,e.maxWidth)):Object(r.css)(["flex-direction:row;> * + *{margin-left:16px;}&[data-is-narrow='true']{flex-direction:column;> * + *{margin-top:8px;margin-left:0;}}"])),Ul=r.default.div.withConfig({displayName:"SocialMediaPostBubbleMessage__MessageContainer",componentId:"sc-1401ju3-1"})(["width:100%;.MessageContainer__author{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:baseline;margin-bottom:4px;"," > * + *{margin-left:8px;}}.MessageContainer__avatar{flex:none;align-self:center;}.MessageContainer__authorName{"," flex-shrink:1;text-overflow:ellipsis;overflow-x:hidden;white-space:nowrap;}.MessageContainer__date{flex:none;font-size:12px;line-height:16px;color:",";:not([href]){pointer-events:none;}}.MessageContainer__text{"," word-break:break-word;}"],e=>e.isCollapseButtonVisible&&Object(r.css)(["margin-right:28px;"]),o.Headings["heading-01"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]),$l=Object(r.default)(Co).withConfig({displayName:"SocialMediaPostBubbleMessage__CollapsedBubble",componentId:"sc-1401ju3-2"})(["display:flex;flex-direction:row;align-items:center;padding:11px 15px;"," color:",";transition:0.2s ",";transition-property:color,box-shadow;cursor:pointer;outline:0;"," .CollapsedBubble__Icon{margin-left:8px;transition:0.2s fill ",";}:hover{color:",";.CollapsedBubble__Icon{fill:",";}}:active{color:",";.CollapsedBubble__Icon{fill:",";}}:not(:active):focus{box-shadow:0 0 0 2px ",";}"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("purple-7"),o.transitionDefault,e=>"white"===e.backgroundColor?Object(r.css)(["background-color:white;border-color:",";"],Object(o.cssVariables)("neutral-3")):Object(r.css)(["background-color:",";border-color:transparent;"],Object(o.cssVariables)("neutral-2")),o.transitionDefault,Object(o.cssVariables)("purple-8"),Object(o.cssVariables)("purple-8"),Object(o.cssVariables)("neutral-9"),Object(o.cssVariables)("neutral-9"),Object(o.cssVariables)("purple-7")),Bl=Object(r.default)(o.IconButton).withConfig({displayName:"SocialMediaPostBubbleMessage__CollapseButton",componentId:"sc-1401ju3-3"})(["position:absolute;top:12px;right:12px;"]),Vl={onMouseUp:({currentTarget:e})=>{e.style.boxShadow="none"},onFocus:({currentTarget:e})=>{e.style.boxShadow=""},onMouseDown:({currentTarget:e})=>{e.style.boxShadow=""}};var zl=i.a.forwardRef(({authorName:e,avatar:t,className:n,collapsedBubbleBackgroundColor:i="neutral",collapsedMessage:s,date:r,embeddedSocialMediaPost:l,isExpanded:d,isFetching:u,layoutDirection:p,linkURL:g,maxWidth:h=360,media:m,text:b,onCollapseButtonClick:j,onExpandButtonClick:y},O)=>{const v=Object(E.a)(),x=Object(a.useRef)(null),_=Object(_o.a)();Object(a.useLayoutEffect)(()=>{x.current&&x.current.setAttribute("data-is-narrow",x.current.clientWidth<320?"true":"false")});const C=Object(a.useCallback)(e=>{x.current=e,O&&("object"==typeof O?O.current=e:O(e))},[O]),k=(()=>{if(!r)return null;const e=c()(new Date);return e.isSame(r,"date")?`at ${r.format(f.F)}`:e.isSame(r,"year")?r.format(f.x):r.format(f.A)})(),w=Object(a.useCallback)(e=>{if(!e||0===e.length)return null;const t=h-32,n="vertical"===p?2:8;if(1===e.length){const[a]=e;if("image"===a.type){const e=(()=>{if("horizontal"===p)return Ll;const e=(()=>{if(a.dimension){const{width:e,height:n}=a.dimension;return t*n/e}return"auto"})();return{width:t,height:e}})();return Object(W.jsx)(bo,{file:a,frameSize:e,maxSize:{width:t},borderRadius:n})}const i=(()=>{if("horizontal"===p)return Ll;const e=(()=>{if(a.aspectRatio){const{x:e,y:n}=a.aspectRatio;return t*n/e}return"auto"})();return{width:t,height:e}})();return Object(W.jsx)(jo,{file:a,frameSize:i,borderRadius:n})}return Object(W.jsx)(Pl,{files:e,frameSize:"vertical"===p?{width:t,height:.75*t}:Ll,itemBorderRadius:n})},[p,h]);if(d){const a="vertical"===p?Object(W.jsx)(ke.a,{className:"MessageContainer__avatar",size:16,profileID:e||"",imageUrl:t}):Object(W.jsx)(Tl.a,{className:"MessageContainer__avatar",size:16,profileID:e||"",imageUrl:t});return Object(W.jsxs)(Fl,{ref:C,layoutDirection:p,hasMedia:!!m,maxWidth:h,className:n,children:[w(m),Object(W.jsxs)(Ul,{isCollapseButtonVisible:!!j,children:[Object(W.jsxs)("div",{className:"MessageContainer__author",children:[a,Object(W.jsx)("div",{className:"MessageContainer__authorName",children:e}),Object(W.jsx)("a",{className:"MessageContainer__date",href:g,target:"_blank",children:k})]}),Object(W.jsx)("div",{className:"MessageContainer__text",dir:_,children:b}),l]}),j&&Object(W.jsx)(Bl,{icon:"minimize",size:"xsmall",buttonType:"tertiary",title:v.formatMessage({id:"desk.conversation.twitter.message.collapsedMessage.hide"}),onClick:j})]})}return Object(W.jsxs)($l,{ref:O,backgroundColor:i,as:"button",className:n,onClick:y,...Vl,children:[s,y&&(u?Object(W.jsx)(o.Spinner,{className:"CollapsedBubble__Icon",size:16}):Object(W.jsx)(o.Icon,{className:"CollapsedBubble__Icon",icon:"maximize",size:16,color:Object(o.cssVariables)("purple-7"),assistiveText:"Show"}))]})});var Hl=i.a.forwardRef(({isOwn:e=!1,avatar:t,media:n,authorName:i,authorAvatar:s,className:r,collapsedBubbleBackgroundColor:l="neutral",collapsedMessage:c,date:d,embeddedSocialMediaPost:u,text:p,linkURL:g,maxWidth:h=360,isFetching:m=!1,isExpanded:f=!0,onToggleExpandButtonClick:b},j)=>{const y=Math.min(360,h),O=Object(a.useMemo)(()=>{if(b)return()=>b(!0)},[b]),v=Object(a.useMemo)(()=>{if(b)return()=>b(!1)},[b]);return Object(W.jsx)(Do,{ref:j,isOwn:e,className:r,renderAvatar:({className:e})=>{if((e=>Object(a.isValidElement)(e))(t))return Object(W.jsx)("div",{className:e,children:t});const{profileID:n=i||"",imageUrl:s="",type:r=o.AvatarType.User}=t||{};return Object(W.jsx)(o.Avatar,{type:r,size:32,profileID:n,imageUrl:s,className:e})},renderMessageArea:()=>{const a=s||("string"==typeof t?t:void 0);return Object(W.jsx)(zl,{authorName:i,avatar:a,collapsedBubbleBackgroundColor:l,collapsedMessage:c,date:d,isExpanded:f,isFetching:m,layoutDirection:e?"vertical":"horizontal",linkURL:g,maxWidth:y,media:n,text:p,onCollapseButtonClick:v,onExpandButtonClick:O,embeddedSocialMediaPost:u})}})});const ql=i.a.forwardRef(({ticketInfo:e,options:t,origin:n,message:s,messageRenderMode:r,handleFeedAction:o},l)=>{var d;const{id:u,feedId:p,feedType:g,message:h,messageType:m,fromId:y,attachments:O,status:v,timestamp:x,isTemp:_,agent:C,reactions:k,parentId:w}=s,T=Object(E.a)(),S=Object(b.f)(),{facebookPage:I,customer:M,data:D}=e,A=I.pageId===y,N=M.sendbirdId.split("//")[1],R=A?I.name:N===y?M.displayName:T.formatMessage({id:"desk.conversation.facebook.senderName.otherCustomer"}),P=C?C.displayName:void 0,L=A?{type:f.I.Agent,imageUrl:I.picture.url,profileID:null!=(d=null==C?void 0:C.email)?d:R}:{type:f.I.Customer,imageUrl:M.photoThumbnailUrl||void 0,profileID:R},F="remove"===v,U="hide"===v,$=Object(a.useMemo)(()=>F?T.formatMessage({id:"desk.conversation.facebook.status.removed"}):U?T.formatMessage({id:"desk.conversation.facebook.status.hidden"}):!_&&A&&P?T.formatMessage({id:"desk.conversation.facebook.status.sentBy"},{senderName:P,facebookPageName:I.name}):void 0,[F,U,_,A,P,T,I.name]),{reactions:B,isLiked:V}=Object(a.useMemo)(()=>{if(!k)return{reactions:void 0,isLiked:!1};try{const e=JSON.parse(k),t=e.pageReactions.includes("LIKE"),n=Object.entries(e.reactionCounts);return n.length>0?{reactions:[{icon:"reactions",count:Object.values(e.reactionCounts).reduce((e,t)=>e+t,0),tooltipContent:n.map(([e,t],a)=>Object(W.jsxs)(i.a.Fragment,{children:[wl()(e),": ",t,a<n.length-1&&Object(W.jsx)("br",{})]},e)),participated:t}],isLiked:t}:{reactions:void 0,isLiked:t}}catch{return{reactions:void 0,isLiked:!1}}},[k]),z=(()=>{if("post"===g){const e=p.split("_")[1];return`https://facebook.com/${I.pageId}/posts/${e}`}const[e,t]=p.split("_");return`https://facebook.com/${I.pageId}/posts/${e}?comment_id=${t}`})(),G=Object(a.useMemo)(()=>{if(!O)return;const e=e=>S(j.b.showImagePreviewRequest([{name:"",url:e}]));return JSON.parse(O).map(t=>_l(t,e))},[O,S]),K=i.a.useMemo(()=>{if(!("compact"!==r&&"conversation"===n&&"remove"!==v))return;let e;try{e=JSON.parse(D)}catch(e){Object(q.a)({error:e,context:{dataString:D}})}const t=[];return A||w!==e.social.postId||t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.reply"}),onClick:()=>o({message:s,action:"REPLY"})}),V?t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.unlike"}),onClick:()=>o({message:s,action:"UNLIKE"})}):t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.like"}),onClick:()=>o({message:s,action:"LIKE"})}),A||("hide"===v?t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.unhide"}),onClick:()=>o({message:s,action:"UNHIDE"})}):t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.hide"}),onClick:()=>o({message:s,action:"HIDE"})})),t.push({label:T.formatMessage({id:"desk.conversation.facebook.action.remove"}),onClick:()=>o({message:s,action:"REMOVE"})}),t},[r,n,v,A,w,V,T,D,o,s]),Y=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),Q=Y?Math.min(360,Y):void 0;if(I.pageId===y&&"post"===g){const e=(()=>{if(!O)return;return JSON.parse(O).map(e=>_l(e)).filter(e=>e&&["image","video"].includes(e.type))})();return Object(W.jsx)(Hl,{ref:l,isOwn:A,avatar:L,authorName:R,authorAvatar:L.imageUrl,date:c()(x),text:h,linkURL:z,media:e,maxWidth:Y})}return"system"===m?Object(W.jsx)(gl,{ref:l,date:x,children:Object(H.convertURLsAndEmailsToLinks)(h)}):Object(W.jsx)(Qo,{ref:l,messageId:u,isOwn:A,senderName:R||void 0,avatar:L,isSenderHidden:t.hideSender,isAvatarHidden:t.hideProfile,isStatusHidden:t.hideProfile&&void 0===B,message:Object(H.convertURLsAndEmailsToLinks)(h),date:c()(x),isDeleted:F,status:$,files:G,mediaMaxSize:Q,socialMediaLink:z?{type:"facebook",url:z}:void 0,reactions:B,actions:K})}),Gl=({agent:e,customer:t,customerTwitterUser:n,isOwn:i,twitterUser:s})=>Object(a.useMemo)(()=>{if(i){const t=s.name,n=`@${s.screenName}`;return{senderName:t,twitterScreenName:n,avatar:{type:f.I.Agent,imageUrl:s.profileImageUrl||void 0,profileID:(null==e?void 0:e.email)||t||n}}}const a=t.displayName;return{senderName:a,twitterScreenName:n&&`@${n.screen_name}`,avatar:{type:f.I.Customer,imageUrl:t.photoThumbnailUrl||void 0,profileID:a}}},[e,t.displayName,t.photoThumbnailUrl,n,i,s.name,s.profileImageUrl,s.screenName]),Wl=Object(a.forwardRef)(({options:e,origin:t,ticketInfo:n,message:i,messageRenderMode:s="default",customerTwitterUser:r,onDeleteActionClick:o},l)=>{const d=Object(E.a)(),{pid:u,region:p}=Object(L.a)(),g=Object(b.f)(),{customer:h,twitterUser:m,lastSeenAt:f}=n,[y,O]=Object(a.useState)({isFetching:!1,failed:!1}),v=Object(a.useCallback)(async e=>{if(y.isFetching)return;O(e=>({...e,isFetching:!0}));const{data:t}=await Object(N.fetchTwitterUserMedia)(u,p,{id:m.id,mediaUrl:e}),n=t.s3_media_url;return O({imageURL:n,isFetching:!1,failed:!1}),n},[y.isFetching,u,p,m.id]),x=Object(a.useCallback)(async()=>{y.imageURL&&g(j.b.showImagePreviewRequest([{name:"",url:y.imageURL}]))},[y.imageURL,g]),{id:_,agent:C,attachment:k,text:w,senderId:T,timestamp:S,status:I,messageType:M,isTemp:D}=i,A=T===m.userId,R=C?C.displayName:void 0,{senderName:P,twitterScreenName:F,avatar:U}=Gl({agent:C,customer:h,customerTwitterUser:r,isOwn:A,twitterUser:m}),$="remove"===I,B=Object(a.useMemo)(()=>$?d.formatMessage({id:"desk.conversation.twitter.status.deleted"}):!D&&A&&R?d.formatMessage({id:"desk.conversation.twitter.status.sentBy"},{senderName:R}):void 0,[d,$,A,D,R]),V=Object(a.useMemo)(()=>"compact"!==s&&"conversation"===t&&!$?[{label:d.formatMessage({id:"desk.conversation.twitter.message.actions.delete"}),onClick:o}]:[],[d,$,s,o,t]),z=Object(a.useMemo)(()=>{if(A&&"compact"!==s&&"conversation"===t)return i.isTemp?d.formatMessage({id:"desk.conversation.twitter.deliveryStatus.sending"}):f>=S?d.formatMessage({id:"desk.conversation.twitter.deliveryStatus.read"}):d.formatMessage({id:"desk.conversation.twitter.deliveryStatus.sent"})},[A,s,t,i.isTemp,f,S,d]),[q,G]=Object(a.useMemo)(()=>{if(!k)return[w,void 0];let e=w;const{type:t,indices:n}=k.media,[a,i]=n;switch(e=w.substring(0,a).concat(w.substring(i)).trim(),t){case"photo":{const{media_url_https:t,sizes:{medium:{w:n,h:a}}}=k.media,{isFetching:i,imageURL:s,failed:r}=y;let o;return i?o="fetching":r&&(o="failed"),s||r||v(t).catch(()=>{O(e=>({...e,isFetching:!1,failed:!0}))}),[e,[{type:"image",url:s||"",dimension:{width:n,height:a},onClick:()=>x(),fetchStatus:o}]]}case"animated_gif":case"video":{const{video_info:{aspect_ratio:n,variants:a}}=k.media,[i,s]=n;return[e,[{type:"animated_gif"===t?"twitter-gif":"video",aspectRatio:{x:i,y:s},sources:[...a].sort((e,t)=>(t.bitrate||0)-(e.bitrate||0)).map(({content_type:e,...t})=>({...t,contentType:e}))}]]}default:return[w,void 0]}},[k,y,v,x,w]),K=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),Y=K?Math.min(360,K):void 0;return i.text?"system"===M?Object(W.jsx)(gl,{ref:l,date:S,children:Object(H.convertURLsAndEmailsToLinks)(i.text)}):Object(W.jsx)(Qo,{ref:l,messageId:_,isOwn:A,senderName:P||void 0,twitterScreenName:F||void 0,avatar:U,isSenderHidden:e.hideSender,isAvatarHidden:e.hideProfile,isStatusHidden:e.hideProfile,message:Object(H.convertURLsAndEmailsToLinks)(q.trim()),date:c()(S),isDeleted:$,status:B,actions:V,files:G,deliveryStatus:z,mediaMaxSize:Y}):null}),Kl=Object(b.d)(e=>({customerTwitterUser:e.twitter.twitterUser}))(Wl);var Yl=n("47KM");const Ql=Object(r.default)(zl).withConfig({displayName:"twitterStatus__EmbeddedSocialMediaPostBubbleMessage",componentId:"o80ih9-0"})(["margin-top:8px;"]),Jl=Object(a.forwardRef)(({ticketInfo:e,message:t,messageRenderMode:n="default",onReplyActionClick:i,options:s,origin:r,showAsSocialMediaPost:l=!1},d)=>{const{agent:u,entities:p,extendedEntities:g,favoriteCount:h,favorited:m=!1,id:f,isTemp:y,messageType:O,retweetCount:v,retweeted:x=!1,senderId:_,status:C,statusId:k,text:w,timestamp:T,twitterStatusTwitterUserId:S,quotedStatusId:I,quotedStatusPermalink:M}=t,D=Object(E.a)(),R=Object(b.f)(),{customerTwitterUser:L,pid:F,region:U}=Object(b.g)(e=>{var t,n;return{customerTwitterUser:e.twitter.twitterUser,pid:e.desk.project.pid,region:null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:""}}),$=Object(P.W)(),{customer:B,twitterUser:V,lastSeenAt:z}=e,[q,G]=Object(a.useState)({twitterStatus:null,isExpanded:!1,isFetching:!1}),K=_===V.userId,Y=u?u.displayName:void 0,{senderName:Q,twitterScreenName:J,avatar:X}=Gl({agent:u,customer:B,customerTwitterUser:L,isOwn:K,twitterUser:V}),Z="remove"===C,ee=Object(a.useMemo)(()=>Z?D.formatMessage({id:"desk.conversation.twitter.status.deleted"}):!y&&K&&Y?D.formatMessage({id:"desk.conversation.twitter.status.sentBy"},{senderName:Y}):void 0,[D,Z,K,y,Y]),te=L?Object(Fa.b)({screenName:L.screen_name,statusId:k}):void 0,ne=Object(a.useMemo)(()=>{if(K&&"compact"!==n&&"conversation"===r)return t.isTemp?D.formatMessage({id:"desk.conversation.twitter.deliveryStatus.sending"}):z>=T?D.formatMessage({id:"desk.conversation.twitter.deliveryStatus.read"}):D.formatMessage({id:"desk.conversation.twitter.deliveryStatus.sent"})},[D,K,t.isTemp,n,r,z,T]),{displayedText:ae,files:ie}=Object(a.useMemo)(()=>Object(Fa.c)({text:w,entities:p,extendedEntities:g,showImagePreviewRequest:e=>R(j.b.showImagePreviewRequest(e)),quotedStatusPermalink:M}),[w,p,g,M,R]),se=Object(a.useMemo)(()=>{if(!("compact"!==n&&"conversation"===r&&!Z))return;return[{label:x?D.formatMessage({id:"desk.conversation.twitter.action.undoRetweet"}):D.formatMessage({id:"desk.conversation.twitter.action.retweet"}),onClick:()=>{S&&R(Yl.b.patchTwitterStatusTwitterUserRequest({id:S,twitterStatusId:f,update:{retweeted:!x}}))}},{label:m?D.formatMessage({id:"desk.conversation.twitter.action.undoLike"}):D.formatMessage({id:"desk.conversation.twitter.action.like"}),onClick:()=>{S&&R(Yl.b.patchTwitterStatusTwitterUserRequest({id:S,twitterStatusId:f,update:{favorited:!m}}))}},{label:D.formatMessage({id:"desk.conversation.twitter.action.reply"}),onClick:i},...K?[{label:D.formatMessage({id:"desk.conversation.twitter.action.delete"}),onClick:()=>{$({dialogTypes:A.a.Delete,dialogProps:{title:D.formatMessage({id:"desk.conversation.twitter.dialog.delete.title"}),description:D.formatMessage({id:"desk.conversation.twitter.dialog.delete.description"},{break:Object(W.jsx)("br",{})}),confirmText:D.formatMessage({id:"desk.conversation.twitter.dialog.delete.button.delete"}),cancelText:D.formatMessage({id:"desk.conversation.twitter.dialog.delete.button.cancel"}),onDelete:()=>R(Yl.b.patchTwitterStatusRequest({id:f,status:"remove"}))}})}}]:[]]},[n,r,Z,x,D,m,i,K,$,R,f,S]),re=Object(a.useMemo)(()=>[{icon:"retweet",count:v,participated:x},{icon:"like",activeColor:Object(o.cssVariables)("red-5"),count:h,participated:m}].filter(e=>e.count>0),[v,x,h,m]),oe=Object(a.useMemo)(()=>{if(!I)return;const{isExpanded:e,isFetching:t,twitterStatus:n}=q,a=l?void 0:()=>{G(e=>({...e,isExpanded:!1}))},i={collapsedBubbleBackgroundColor:"white",collapsedMessage:D.formatMessage({id:"desk.conversation.twitter.message.retweetedMessage"}),isExpanded:e,isFetching:t,linkURL:M||void 0,onCollapseButtonClick:a,onExpandButtonClick:async()=>{if(q.twitterStatus)return void G(e=>({...e,isExpanded:!0}));G(e=>({...e,isFetching:!0}));const{data:e}=await Object(N.getTwitterStatus)(F,U,{id:V.id,statusId:I});G(t=>({...t,isFetching:!1,isExpanded:!0,twitterStatus:e}))},layoutDirection:"horizontal"};if(n){const{created_at:e,entities:t,extended_entities:a,full_text:s,user:{screen_name:r,profile_image_url_https:o},quoted_status_permalink:l}=n,{displayedText:d,files:u}=Object(Fa.c)({text:s,entities:t,extendedEntities:a,showImagePreviewRequest:e=>R(j.b.showImagePreviewRequest(e)),quotedStatusPermalink:l?l.expanded:null});return Object(W.jsx)(Ql,{...i,avatar:o,authorName:r,date:c()(e),media:u,text:d})}return Object(W.jsx)(Ql,{...i})},[R,D,F,q,I,M,U,l,V.id]),le=c()(T);return w?"system"===O?Object(W.jsx)(gl,{date:T,children:Object(H.convertURLsAndEmailsToLinks)(t.text)}):Object(W.jsx)(Fn.Consumer,{children:e=>{const t=e({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),n=t?Math.min(360,t):void 0;return l?Object(W.jsx)(Hl,{ref:d,isOwn:K,avatar:X||void 0,authorName:Q||void 0,media:ie,date:le,text:ae,linkURL:te,maxWidth:t,embeddedSocialMediaPost:oe}):Object(W.jsx)(Qo,{ref:d,messageId:f,isOwn:K,senderName:Q||void 0,twitterScreenName:J||void 0,avatar:X,isSenderHidden:s.hideSender,isAvatarHidden:s.hideProfile,isStatusHidden:s.hideProfile&&0===re.length,message:ae,date:le,isDeleted:Z,status:ee,files:ie,deliveryStatus:ne,mediaMaxSize:n,socialMediaLink:te?{type:"twitter",url:te}:void 0,actions:se,reactions:re,embeddedSocialMediaPost:oe})}}):null}),Xl=r.default.div.withConfig({displayName:"SendBirdMessages__DateLine",componentId:"sc-4cz85z-0"})(["display:block;margin:0 24px;position:sticky;top:0;z-index:200;margin-bottom:12px;padding:10px 0;"]),Zl=r.default.div.withConfig({displayName:"SendBirdMessages__DateLineTextWrapper",componentId:"sc-4cz85z-1"})(["display:flex;justify-content:center;"]),ec=r.default.span.withConfig({displayName:"SendBirdMessages__DateLineText",componentId:"sc-4cz85z-2"})(["font-size:13px;font-weight:600;color:",";padding:0 4px 2px 4px;letter-spacing:-0.3px;background:",";border-radius:4px;"],Object(o.cssVariables)("neutral-8"),e=>"compact"===e.messageRenderMode?Object(o.cssVariables)("neutral-1"):"white"),tc=Object(a.memo)(Object(a.forwardRef)(({ticket:e,lastSeenByCustomerAt:t=0,messages:n,messagesMode:i,messageRenderMode:s,initialOrNextFetchedTimestamp:r,fetchMessagesPrev:l,onDeleteMessage:d},u)=>{const p=Object(E.a)(),g=Object(P.W)(),{isPermitted:h}=Object(P.h)(),m=h(["desk.admin"]),b=Object(a.useRef)(null),j=Object(a.useRef)(null),[y,O]=Object(a.useState)(0),[v,x]=Object(a.useState)(!0),_=Object(P.R)(y),C=()=>{var e;null==b||null==(e=b.current)||e.scrollToBottom()},k=e=>{var t;null==b||null==(t=b.current)||t.scrollTo(0,e)},w=()=>j.current;Object(a.useImperativeHandle)(u,()=>({scrollToBottom:C,scrollTo:k,findFirstMessageNode:w})),Object(a.useEffect)(()=>{r&&(x(!0),C())},[r]),Object(a.useEffect)(()=>{y!==_&&v&&(C(),x(!1))},[r,_,y,v]);const T=Object(a.useCallback)(e=>{var t;0===(null==(t=e.target)?void 0:t.scrollTop)&&l()},[l]),S=Object(a.useMemo)(()=>{const r=e=>{if(e&&e.message_id){const t=Object(H.transformToCamelCase)(e);switch(t.sender=t.user?Object(H.transformToCamelCase)(t.user):null,delete t.user,e.type){case"MESG":t.messageType="user";break;case"FILE":t.messageType="file",t.url=e.file.url,t.type=e.file.type,t.name=e.file.name,t.type=e.file.type;break;case"BRDM":case"ADMM":t.messageType="admin"}return t}return e};let o;const l=[];return n&&n.forEach((u,h)=>{const b=r(u),y=h<n.length-1?r(n[h+1]):null,O=Object(W.jsx)(Xl,{children:Object(W.jsx)(Zl,{children:Object(W.jsx)(ec,{messageRenderMode:s,children:c()(b.createdAt).format("ll")})})},`dateline_${b.createdAt}`),v=e.customer.sendbirdId,x=b.sender&&v===b.sender.userId,_=m&&x&&e.status2===f.jc.CLOSED&&!b.isRemoved,C=(()=>{if(_&&d)return{label:p.formatMessage({id:"desk.conversation.sendbird.message.action.delete"}),onClick:()=>{g({dialogTypes:A.a.DeleteDeskSendbirdMessage,dialogProps:{ticketId:e.id,messageId:b.messageId,onSuccess:d}})}}})();o&&o.createdAt&&b.createdAt?Object(H.shouldRenderDateLine)({previousDate:o.createdAt,nextDate:b.createdAt})&&l.push(O):!o&&0===h&&b.createdAt&&l.push(O),La()(b)||l.push(Object(a.createElement)(yl,{...0===h?{ref:j}:null,key:b.messageId,previousMessage:h>0?o:void 0,nextMessage:y,message:b,customerSendbirdId:v,lastSeenAt:t,messagesMode:i||f.Q.SENDBIRD,messageRenderMode:s||"default",deleteMessageAction:_?C:void 0})),o=b}),l},[n,s,m,e.status2,e.id,e.customer.sendbirdId,d,p,g,t,i]);return Object(W.jsx)(Hn.Consumer,{children:({ChatThreadMessagesContainer:e})=>Object(W.jsx)(fo.Consumer,{children:({updateRef:t})=>Object(W.jsx)(o.ScrollBar,{ref:e=>{t(e),b.current=e,O((null==e?void 0:e.scrollHeight)||0)},onScroll:T,options:{suppressScrollX:!0},children:Object(W.jsx)(e,{children:S})})})})}));var nc=r.default.div.withConfig({displayName:"ChatBubblesContainer",componentId:"e3qwtk-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;"]);const ac=r.default.div.withConfig({displayName:"twitterAvatar__TwitterAvatarContainer",componentId:"sc-1e8hmcv-0"})(["display:flex;justify-content:center;align-items:center;width:32px;height:32px;border-radius:16px;overflow:hidden;background:",";"],"#1DA1F2");var ic=Object(W.jsx)(ac,{role:"img",children:Object(W.jsx)(o.Icon,{icon:"twitter",size:20,color:"white"})});const sc=r.default.div.withConfig({displayName:"ChatDateLine__StyledChatDateLine",componentId:"qs8wju-0"})(["display:block;position:sticky;top:0;z-index:200;padding:8px 0;margin:8px 0;"]),rc=r.default.div.withConfig({displayName:"ChatDateLine__ChatDateLineTextWrapper",componentId:"qs8wju-1"})(["display:flex;justify-content:center;"]),oc=r.default.span.withConfig({displayName:"ChatDateLine__ChatDateLineText",componentId:"qs8wju-2"})(["font-size:12px;line-height:1;font-weight:500;color:",";padding:2px 4px;background:white;border-radius:4px;"],Object(o.cssVariables)("neutral-10")),lc=e=>{const{createdAt:t}=e;return Object(W.jsx)(sc,{children:Object(W.jsx)(rc,{children:Object(W.jsx)(oc,{children:c()(t).format("ll")})})})};var cc=n("OeWe"),dc=n("UB5X"),uc=n.n(dc),pc=n("4qC0"),gc=n.n(pc);const hc=[{wildcard:"*",openTag:"<strong>",closeTag:"</strong>"},{wildcard:"_",openTag:"<em>",closeTag:"</em>"},{wildcard:"~",openTag:"<del>",closeTag:"</del>"},{openTag:"<code>",closeTag:"</code>",wildcard:"```"}],mc=(e,t)=>{const n=[],{wildcard:a}=t;return e.split("").forEach((t,i)=>{if(t===a){const t=e[i+1],a=e[i-1];if(n.length%2==0){if(void 0!==t&&" "!==t)return void n.push(i)}else if(" "!==a&&(e=>gc()(e)||uc()(e))(a))return void n.push(i)}else(e=>10===e.charCodeAt(0))(t)&&n.length%2&&n.pop()}),n.length%2!=0&&n.pop(),n},fc=e=>{let t=e;const n=Object(yn.a)();return n&&["chrome","edge","firefox","opera"].some(e=>n.name===e)?hc.forEach(({wildcard:e,openTag:n,closeTag:a})=>{try{const i=new RegExp(`${e}(?=\\S)([\\S|\\s]+?)(?<=\\S)${e}`,"gm"),s=[];let r;for(;null!=(r=i.exec(t));)s.push(r);s.length>0&&s.forEach(e=>{const i=e[0],s=e[1];t=t.split(i).join(`${n}${s}${a}`)})}catch(e){Object(q.a)(e)}}):hc.filter(e=>"```"!==e.wildcard).forEach(e=>{t=((e,t)=>{const{openTag:n,closeTag:a}=t,i=e.split("");return e.length<3?e:(mc(e,t).forEach((e,t)=>{const s=t%2==0?n:a;i.splice(e,1,s)}),i.join(""))})(t,e)}),t},bc=r.default.div.withConfig({displayName:"WhatsAppMessage__DeliveryStatusIconWrapper",componentId:"sc-1yij9rz-0"})(["display:flex;align-items:center;height:16px;",""],({isOwn:e})=>e?"margin-left: 4px;":"margin-right: 4px;"),jc=r.default.div.withConfig({displayName:"WhatsAppMessage__FormattedMessageContent",componentId:"sc-1yij9rz-1"})(["& > code{font-family:'Roboto Mono',monospace;}& > strong{font-weight:600;}"]);var yc=Object(r.default)("span").withConfig({displayName:"WhatsAppMessage___StyledSpan",componentId:"sc-1yij9rz-2"})(["margin-left:4px;color:",";"],e=>e._css);const Oc=Object(a.forwardRef)(({message:e,ticketInfo:t},n)=>{const i=Object(b.f)(),s=Object(E.a)(),{pid:l,region:d}=Object(L.a)(),{messageType:u,timestamp:p,fromNumber:g,content:h,id:m,status:f,rejectLog:O}=e,{nexmoAccount:v}=t,x=g===(null==v?void 0:v.whatsappNumber),{text:_,type:C,location:k,image:w,audio:T,video:S,file:I}=JSON.parse(h),[{status:M,data:D},A]=Object(P.g)(()=>Object(cc.u)(l,d,m),[]),N=Object(a.useCallback)((e,t="")=>()=>{i(j.b.showImagePreviewRequest([{url:e,name:t}]))},[i]),R=Object(a.useMemo)(()=>{if("success"===M&&null!=D){const{media_url:e}=D.data;switch(C){case"image":return w?[{type:C,url:e,name:w.caption,onClick:N(e,w.caption)}]:void 0;case"audio":return T?[{type:C,url:e}]:void 0;case"video":return S?[{type:C,url:e,name:S.caption}]:void 0;case"file":return I?[{type:"misc",url:e,name:I.caption,onClick:()=>window.open(e)}]:void 0;default:return}}},[M,D,C,w,N,T,S,I]),F=Object(a.useMemo)(()=>{if("unsupported"===C)return s.formatMessage({id:"desk.conversation.whatsapp.message.unsupported"});if("location"===C&&null!=k)return Object(Yt.c)(k.lat,k.long);if(_){const e=_.trim(),t=fc(e);return e===t?e:Object(W.jsx)(jc,{dangerouslySetInnerHTML:{__html:Object(y.sanitize)(t)}})}},[s,k,_,C]),U=Object(a.useCallback)(()=>{const e=c()(p);let t=null;switch(f){case"SUBMITTED":t=Object(W.jsx)(o.Icon,{icon:"done",size:16,color:Object(o.cssVariables)("neutral-6"),"data-test-id":"SubmittedIcon"});break;case"DELIVERED":t=Object(W.jsx)(o.Icon,{icon:"done-all",size:16,color:Object(o.cssVariables)("neutral-6"),"data-test-id":"DeliveredIcon"});break;case"READ":t=Object(W.jsx)(o.Icon,{icon:"done-all",size:16,color:Object(o.cssVariables)("green-5"),"data-test-id":"ReadIcon"});break;case"REJECTED":if(t=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.Icon,{icon:"warning",size:16,color:Object(o.cssVariables)("red-5"),"data-test-id":"RejectedWarningIcon"}),Object(W.jsx)(yc,{_css:Object(o.cssVariables)("red-5"),children:s.formatMessage({id:"desk.conversation.whatsapp.message.lbl.failed"})})]}),O){const{code:e}=JSON.parse(O);e===Wi.OutsideAllowedWindow&&(t=Object(W.jsx)(o.ContextualHelp,{content:s.formatMessage({id:"desk.conversation.whatsapp.message.tooltip.notAllowed"}),tooltipContentStyle:Object(r.css)(["max-width:256px;"]),placement:"top-end",children:Object(W.jsx)(o.Icon,{icon:"time",size:16,color:Object(o.cssVariables)("red-5"),"data-test-id":"RejectedTimeIcon"})}))}}return x?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(bc,{isOwn:x,"data-test-id":"DeliveryStatusIconWrapper",children:t}),Object(W.jsx)("span",{children:e&&e.format("HH:mm")}),Object(W.jsx)("span",{"aria-hidden":!0,style:{width:8,textAlign:"center"},children:"∙"}),Object(W.jsx)("span",{children:s.formatMessage({id:"desk.conversation.whatsapp.message.lbl.sentOnWhatsapp"})})]}):Object(W.jsx)("span",{children:e&&e.format("HH:mm")})},[s,x,O,f,p]);return Object(a.useEffect)(()=>{Object(Yt.b)(e)&&A()},[A,e]),"system"===u?Object(W.jsx)(gl,{date:p,children:Object(Pr.c)(_)}):Object(W.jsx)(Qo,{ref:n,messageId:m,isOwn:x,isDimmed:"unsupported"===C,message:F,files:R,date:c()(p),senderName:Object(Yt.a)(g),renderStatus:U})}),vc=new RegExp(/(@[A-Za-z0-9_](?:(?:[A-Za-z0-9_]|(?:\.(?!\.))){0,28}(?:[A-Za-z0-9_]))?)/g),xc=e=>e.match(vc)?Object(W.jsx)("a",{href:`https://instagram.com/${e.replace("@","")}`,target:"_blank",children:e}):e,_c=i.a.forwardRef(({options:e,origin:t,message:n,ticketInfo:s,messageRenderMode:r="default",handleFeedAction:l},d)=>{var u;const p=Object(E.a)(),{instagramUser:g,customer:h,lastSeenAt:m}=s,{instagramComment:b,agent:j}=n,{id:y,senderId:O,isTemp:v,likeCount:x,messageType:_,text:C,timestamp:k,status:w}=b,T=O===g.username,S=T?g.username:h.displayName,I=T?{type:f.I.Agent,imageUrl:g.profilePictureUrl,profileID:null!=(u=null==j?void 0:j.email)?u:S}:{type:f.I.Customer,imageUrl:h.photoThumbnailUrl||void 0,profileID:S},M="INACTIVE"===w,{hideProfile:D,hideSender:A}=e,N=Object(a.useMemo)(()=>v?"sending":T&&"compact"!==r&&"conversation"===t?m>=k?"read":"sent":void 0,[T,v,m,r,k,t]),R=j?j.displayName:void 0,P=!j&&T,L=P?"white":void 0,F=Object(a.useMemo)(()=>M?p.formatMessage({id:"desk.conversation.instagram.status.deleted"}):!v&&T&&(R||g.username)?["Sent",...R?[`by ${R}`]:[],...P?["on Instagram"]:[]].join(" "):void 0,[M,v,T,R,g.username,P,p]),U=i.a.useMemo(()=>{if(!(T&&"compact"!==r&&"conversation"===t))return;const e=[];return M||e.push({label:p.formatMessage({id:"desk.conversation.instagram.action.delete"}),onClick:()=>l({message:n,action:"DELETE"})}),e},[T,r,t,M,p,l,n]),{reactions:$}=Object(a.useMemo)(()=>{if(0===x)return{reactions:void 0};try{return x>0?{reactions:[{icon:"like",count:x,activeColor:Object(o.cssVariables)("red-5"),tooltipContent:p.formatMessage({id:"desk.conversation.instagram.tooltip.liked"},{likeCount:x}),participated:!0}]}:{reactions:void 0}}catch(e){return{reactions:void 0}}},[p,x]),B=Object(a.useContext)(Fn)({adjacentComponentWidth:32,bubbleHorizontalSpacing:8}),V=B?Math.min(360,B):void 0;return"system"===_?Object(W.jsx)(gl,{ref:d,date:k,children:Object(H.convertURLsAndEmailsToLinks)(C)}):Object(W.jsx)(Qo,{ref:d,messageId:y,isOwn:T,isDeleted:M,senderName:S,avatar:I,isSenderHidden:A,isAvatarHidden:D,isStatusHidden:D,message:Object(H.convertMessageWithCustomRule)(C,{regex:vc,converter:xc}),date:c()(k),status:F,deliveryStatus:N,backgroundColor:L,mediaMaxSize:V,reactions:$,actions:U})}),Cc=i.a.forwardRef(({style:e,ticket:t,messages:n,messageRenderMode:i="default",origin:s="conversation",initialOrNextFetchedTimestamp:r,fetchMessagesPrev:l,handleFeedAction:d},u)=>{const p=Object(E.a)(),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),y=Object(b.f)(),{channelType:O,customer:v,data:x,lastSeenAt:_,facebookPage:C,twitterUser:k,instagramUser:w,nexmoAccount:T}=t,S=Object(a.useRef)(null),I=Object(a.useRef)(null),[{thirdPartyTwitterStatuses:M,fetchingThirdPartyTwitterStatusIds:D,expandedThirdPartyTwitterStatusIndexes:A},R]=Object(a.useState)({thirdPartyTwitterStatuses:{},fetchingThirdPartyTwitterStatusIds:[],expandedThirdPartyTwitterStatusIndexes:[]}),[F,U]=Object(a.useState)(0),[B,V]=Object(a.useState)(!0),z=Object(P.R)(F),q=Object(a.useCallback)(()=>{S.current&&S.current.scrollToBottom()},[]),G=Object(a.useCallback)(e=>{S.current&&S.current.scrollTo(0,e)},[]),K=Object(a.useCallback)(()=>I.current,[]);Object(a.useImperativeHandle)(u,()=>({scrollToBottom:q,scrollTo:G,findFirstMessageNode:K})),Object(a.useLayoutEffect)(()=>{r&&(V(!0),q())},[r,q]),Object(a.useLayoutEffect)(()=>{z!==F&&B&&(q(),V(!1))},[z,F,q,B]);const Y=e=>{var t;0===(null==(t=e.target)?void 0:t.scrollTop)&&l()},Q=Object(a.useMemo)(()=>{if("TWITTER_STATUS"!==t.channelType)return null;try{return JSON.parse(t.data).social.source.in_reply_to_status_id}catch{return null}},[t.channelType,t.data]),J=Object(a.useCallback)((e,t)=>async n=>{if(!n)return R(e=>({...e,expandedThirdPartyTwitterStatusIndexes:e.expandedThirdPartyTwitterStatusIndexes.filter(e=>e!==t)}));if(M[e])R(e=>({...e,expandedThirdPartyTwitterStatusIndexes:[...e.expandedThirdPartyTwitterStatusIndexes,t]}));else if(k)try{R(t=>({...t,fetchingThirdPartyTwitterStatusIds:t.fetchingThirdPartyTwitterStatusIds.concat(e)}));const{data:n}=await Object(N.getTwitterStatus)(g,h,{id:k.id,statusId:e});R(a=>({thirdPartyTwitterStatuses:{...a.thirdPartyTwitterStatuses,[e]:n},fetchingThirdPartyTwitterStatusIds:a.fetchingThirdPartyTwitterStatusIds.filter(t=>t!==e),expandedThirdPartyTwitterStatusIndexes:[...a.expandedThirdPartyTwitterStatusIndexes,t]}))}catch(e){o.toast.error({message:m(e)})}else o.toast.error({message:p.formatMessage({id:"desk.conversation.twitter.message.fetch.error"})})},[m,p,g,h,M,k]),X=Object(a.useMemo)(()=>{if("FACEBOOK_CONVERSATION"!==O||!C)return[];return n.reduce((e,t,n,a)=>{const r=n>0?a[n-1]:void 0,o=n<a.length-1?a[n+1]:void 0,l=0===n&&t.timestamp;return(l||r&&r.timestamp&&t.timestamp&&Object(H.shouldRenderDateLine)({previousDate:r.timestamp,nextDate:t.timestamp}))&&e.push(Object(W.jsx)(lc,{createdAt:t.timestamp},`messageDateLine_${n}`)),e.push(Object(W.jsx)(Cl,{ref:l?I:null,origin:s,options:Jo({previousMessage:r&&{...r,timestamp:c()(r.createdAt)},message:{...t,timestamp:c()(t.createdAt)},nextMessage:o&&{...o,timestamp:c()(o.createdAt)}}),message:t,ticketInfo:{facebookPage:C,customer:v,lastSeenAt:_},messageRenderMode:i},`facebook_page_message_${t.mid}`)),e},[])},[O,v,C,_,i,n,s]),Z=Object(a.useMemo)(()=>{if("FACEBOOK_FEED"!==O||!C)return[];const e=n;return e.reduce((t,n,a,r)=>{const o=a>0?r[a-1]:void 0,l=a<e.length-1?e[a+1]:void 0,u=!o&&0===a&&n.timestamp;return(u||o&&o.timestamp&&n.timestamp&&Object(H.shouldRenderDateLine)({previousDate:o.timestamp,nextDate:n.timestamp}))&&t.push(Object(W.jsx)(lc,{createdAt:n.timestamp},`messageDateLine_${a}`)),t.push(Object(W.jsx)(ql,{ref:u?I:null,origin:s,options:Jo({previousMessage:o&&{...o,senderId:o.fromId,timestamp:c()(o.timestamp)},message:{...n,senderId:n.fromId,timestamp:c()(n.timestamp)},nextMessage:l&&{...l,senderId:l.fromId,timestamp:c()(l.timestamp)}}),message:n,ticketInfo:{facebookPage:C,customer:v,data:x},messageRenderMode:i,handleFeedAction:d},`facebook_page_feed_${n.feedId}`)),t},[])},[O,v,x,C,d,i,n,s]),ee=Object(a.useMemo)(()=>{if("TWITTER_DIRECT_MESSAGE_EVENT"!==O||!k)return[];return n.reduce((e,t,n,a)=>{const r=n>0?a[n-1]:void 0,o=n<a.length-1?a[n+1]:void 0,l=!r&&0===n&&t.timestamp;(l||r&&r.timestamp&&t.timestamp&&Object(H.shouldRenderDateLine)({previousDate:r.timestamp,nextDate:t.timestamp}))&&e.push(Object(W.jsx)(lc,{createdAt:t.timestamp},`messageDateLine_${n}`));return e.push(Object(W.jsx)(Kl,{ref:l?I:null,origin:s,options:Jo({previousMessage:r&&{...r,timestamp:c()(r.createdAt)},message:{...t,timestamp:c()(t.createdAt)},nextMessage:o&&{...o,timestamp:c()(o.createdAt)}}),message:t,ticketInfo:{twitterUser:k,customer:v,lastSeenAt:_},messageRenderMode:i,onDeleteActionClick:()=>{d&&d({message:t,action:"DELETE"})}},`${O.toLowerCase()}_${t.eventId}`)),e},[])},[O,v,d,_,i,n,s,k]),te=Object(a.useMemo)(()=>{if("TWITTER_STATUS"!==O||!k)return[];return n.map(({inReplyToStatusId:e,...t},n,a)=>{const i=!!e&&a.every(t=>t.statusId!==e)&&n>0;return{...t,inReplyToStatusId:e,isInReplyToStatusVisible:i}}).reduce((e,n,a,r)=>{const o=a>0?r[a-1]:void 0,l=a<r.length-1?r[a+1]:void 0,u=!o&&0===a&&n.timestamp;(u||o&&o.timestamp&&n.timestamp&&Object(H.shouldRenderDateLine)({previousDate:o.timestamp,nextDate:n.timestamp}))&&e.push(Object(W.jsx)(lc,{createdAt:n.timestamp},`messageDateLine_${a}`));const{inReplyToStatusId:g,senderId:h,statusId:m,isInReplyToStatusVisible:f}=n,b=()=>{d&&d({message:n,action:"REPLY"})},O=m===Q&&h===t.twitterUser.userId,x=m===Q&&h!==t.twitterUser.userId,C=x?m:g,w=A.includes(a),T=(()=>{if(w){const{created_at:e,entities:t,extended_entities:n,full_text:a,user:{screen_name:i,profile_image_url_https:s},quoted_status_permalink:r}=M[C],{displayedText:o,files:l}=Object(Fa.c)({text:a,entities:t,extendedEntities:n,showImagePreviewRequest:e=>y(j.b.showImagePreviewRequest(e)),quotedStatusPermalink:r?r.expanded:null});return{authorAvatar:s,authorName:i,text:o,media:l,date:c()(e),linkURL:Object(Fa.b)({screenName:i,statusId:C})}}return{}})();return x?e.push(Object(W.jsx)(Hl,{isOwn:!1,avatar:ic,collapsedMessage:p.formatMessage({id:"desk.conversation.twitter.message.collapsedMessage.byOtherPeople"}),isExpanded:A.includes(a),isFetching:D.includes(m),onToggleExpandButtonClick:J(m,a),...T},`3rd_party_tweet_original_${m}`)):(g&&f&&e.push(Object(W.jsx)(Hl,{isOwn:!1,avatar:ic,collapsedMessage:p.formatMessage({id:"desk.conversation.twitter.message.collapsedMessage.byOtherPeople"}),isExpanded:A.includes(a),isFetching:D.includes(g),onToggleExpandButtonClick:J(g,a),...T},`3rd_party_tweet_${g}_${m}`)),e.push(Object(W.jsx)(Jl,{ref:u?I:null,origin:s,options:Xo({previousMessage:o&&{...o,timestamp:c()(o.createdAt)},message:{...n,timestamp:c()(n.createdAt)},nextMessage:l&&{...l,timestamp:c()(l.createdAt)}}),ticketInfo:{twitterUser:k,customer:v,lastSeenAt:_},message:n,messageRenderMode:i,onReplyActionClick:b,showAsSocialMediaPost:O},`twitter_status_${m}`))),e},[])},[O,v,y,A,D,d,p,_,i,n,s,Q,M,t,J,k]),ne=Object(a.useMemo)(()=>{if("INSTAGRAM_COMMENT"!==O||!w)return[];return n.reduce((e,t,n,a)=>{const{instagramComment:r,instagramMedia:o}=t,l=n>0?a[n-1].instagramComment:void 0,u=n<a.length-1?a[n+1].instagramComment:void 0,p=!l&&0===n&&r.timestamp,g=l&&l.timestamp&&r.timestamp&&Object(H.shouldRenderDateLine)({previousDate:l.timestamp,nextDate:r.timestamp});if((p||g)&&e.push(Object(W.jsx)(lc,{createdAt:r.timestamp},`messageDateLine_${n}`)),o){const t=[{type:"image",url:o.mediaUrl}];"VIDEO"===o.mediaType&&(t[0]={type:"video",url:o.mediaUrl}),e.push(Object(W.jsx)(Hl,{isOwn:!0,avatar:{type:f.I.Agent,imageUrl:w.profilePictureUrl,profileID:w.username},authorAvatar:w.profilePictureUrl,authorName:w.username,date:c()(o.createdAt),linkURL:`https://www.instagram.com/p/${o.shortcode}/`,media:t,text:o.caption,isExpanded:!0},o.igMediaId))}return e.push(Object(W.jsx)(_c,{ref:p?I:null,origin:s,options:Jo({previousMessage:l&&{...l,timestamp:c()(l.createdAt)},message:{...r,timestamp:c()(r.createdAt)},nextMessage:u&&{...u,timestamp:c()(u.createdAt)}}),message:t,ticketInfo:{instagramUser:w,customer:v,lastSeenAt:_},messageRenderMode:i,handleFeedAction:d},`instagram_comment_message${r.igCommentId}`)),e},[])},[O,v,w,_,i,n,s,d]),ae=Object(a.useMemo)(()=>{if("WHATSAPP_MESSAGE"!==O||null==T)return[];return n.reduce((e,n,a,i)=>{const s=a>0?i[a-1]:void 0,r=0===a&&n.timestamp;return(r||null!=s&&s.timestamp&&n.timestamp&&Object(H.shouldRenderDateLine)({previousDate:s.timestamp,nextDate:n.timestamp}))&&e.push(Object(W.jsx)(lc,{createdAt:n.timestamp},`messageDateLine_${a}`)),e.push(Object(W.jsx)(Oc,{ref:r?I:null,message:n,ticketInfo:{nexmoAccount:t.nexmoAccount}},n.id)),e},[])},[O,n,T,t.nexmoAccount]);return Object(W.jsx)(Hn.Consumer,{children:({ChatThreadMessagesContainer:t})=>Object(W.jsx)(fo.Consumer,{children:({updateRef:n})=>Object(W.jsx)(o.ScrollBar,{ref:e=>{n(e),S.current=e,U((null==e?void 0:e.scrollHeight)||0)},style:e,onScroll:Y,options:{suppressScrollX:!0},children:Object(W.jsx)(t,{children:Object(W.jsxs)(nc,{"data-test-id":"ChatBubblesContainer",children:[te,Z,X,ee,ne,ae]})})})})})}),kc=r.default.div.withConfig({displayName:"HistoryTicketMessages__TicketMessages",componentId:"sc-1y9il2x-0"})(["position:relative;flex:1;min-height:0;"]),wc=r.default.div.withConfig({displayName:"HistoryTicketMessages__SpinnerWrapper",componentId:"sc-1y9il2x-1"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;"]),Tc=({ticket:e})=>{const t=Object(b.f)(),{ticketMessages:n,isFetchingInitialMessages:i}=Object(P.V)(e=>({ticketMessages:Object(Ua.n)(e),isFetchingInitialMessages:e.ticketHistory.isFetchingInitialMessages})),s=so({ticket:e}),r=Object(a.useRef)(null),{pid:l,region:c}=Object(L.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(!1),[m,y]=Object(a.useState)(void 0),O=Object(P.U)({messageCount:n.length,scrollTo:Object(a.useCallback)(e=>{r.current&&r.current.scrollTo(e)},[])});Object(a.useEffect)(()=>{i||y(Date.now())},[i]),Object(a.useEffect)(()=>{t(j.d.fetchTicketHistoryMessagesRequest({channelType:e.channelType,types:"initial",channelUrl:e.channelUrl,ticketId:e.id,messageTs:(new Date).valueOf(),prevLimit:50,nextLimit:0,presignedFileUrl:s}))},[t,s,e.channelType,e.channelUrl,e.id]);const v=Object(a.useCallback)(()=>{if(e)switch(O(r.current&&r.current.findFirstMessageNode()),e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":t(j.d.fetchTicketHistoryMessagesRequest({channelType:e.channelType,types:"prev",ticketId:e.id,channelUrl:e.channelUrl,messageTs:n.length>0?n[0].created_at:0,prevLimit:50,nextLimit:0,presignedFileUrl:s}));break;case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"WHATSAPP_MESSAGE":t(j.d.fetchTicketHistoryMessagesRequest({channelType:e.channelType,types:"prev",ticketId:e.id,messageTs:n.length>0?n[0].timestamp:0,prevLimit:50,nextLimit:0,presignedFileUrl:s}));break;case"INSTAGRAM_COMMENT":t(j.d.fetchTicketHistoryMessagesRequest({channelType:e.channelType,types:"prev",ticketId:e.id,messageTs:n.length>0?n[0].instagramComment.timestamp:0,prevLimit:50,nextLimit:0,presignedFileUrl:s}));break;default:return}},[t,s,O,e,n]),x=Object(a.useMemo)(()=>{switch(e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":return Object(W.jsx)(tc,{ref:r,ticket:e,messagesMode:f.Q.PLATFORM_API,messageRenderMode:"compact",messages:n,initialOrNextFetchedTimestamp:m,fetchMessagesPrev:v});case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":return u?Object(W.jsx)(Cc,{ref:r,ticket:{...e,...u},messageRenderMode:"compact",messages:n,initialOrNextFetchedTimestamp:m,fetchMessagesPrev:v}):null;default:return null}},[v,m,u,e,n]),_=Object(a.useCallback)(async()=>{let t;h(!0);try{switch(e.channelType){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":{const{data:n}=await Object(N.fetchFacebookPage)(l,c,{id:e.facebookPage});t={facebookPage:n};break}case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":{const{data:n}=await Object(N.fetchTwitterUserDetail)(l,c,{id:e.twitterUser});t={twitterUser:n};break}case"INSTAGRAM_COMMENT":{const{data:n}=await Object(N.fetchInstagramUser)(l,c,{id:e.instagramUser});t={instagramUser:n};break}case"WHATSAPP_MESSAGE":{const{data:n}=await Object(N.getNexmoAccountDetail)(l,c,{id:e.nexmoAccount});t={nexmoAccount:n};break}}p(t)}catch(e){const t=d(e);Object(q.a)({error:t,context:{error:e}}),o.toast.error({message:t})}finally{h(!1)}},[d,l,c,e.channelType,e.facebookPage,e.instagramUser,e.nexmoAccount,e.twitterUser]);return Object(a.useEffect)(()=>{"sendbird"!==Object(Yt.i)(e.channelType)&&_()},[_,e.channelType]),g?Object(W.jsx)(wc,{children:Object(W.jsx)(o.Spinner,{})}):Object(W.jsx)(kc,{children:x})},Sc=r.default.div.withConfig({displayName:"historyTicketInfo__TicketInfo",componentId:"sc-1jpms7t-0"})(["padding:10px 16px;position:relative;background-color:",";display:flex;flex-direction:column;align-items:stretch;min-width:0;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("neutral-2")),Ec=r.default.div.withConfig({displayName:"historyTicketInfo__TicketNameRow",componentId:"sc-1jpms7t-1"})(["display:flex;flex-direction:row;align-items:center;"]),Ic=r.default.div.withConfig({displayName:"historyTicketInfo__TicketName",componentId:"sc-1jpms7t-2"})([""," overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0;color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),Mc=r.default.div.withConfig({displayName:"historyTicketInfo__TicketSocialIcon",componentId:"sc-1jpms7t-3"})(["margin-right:6px;height:16px;"]),Dc=r.default.div.withConfig({displayName:"historyTicketInfo__TicketIssuedAt",componentId:"sc-1jpms7t-4"})(["width:100%;flex-shrink:0;font-size:12px;line-height:16px;margin-top:8px;color:",";"],Object(o.cssVariables)("neutral-7")),Ac=Object(r.default)(o.IconButton).withConfig({displayName:"historyTicketInfo__CloseButton",componentId:"sc-1jpms7t-5"})(["position:absolute;top:8px;right:8px;"]);var Nc=Object(r.default)(V.qc).withConfig({displayName:"historyTicketInfo___StyledTicketStatusLozenge",componentId:"sc-1jpms7t-6"})(["margin-right:24px;margin-left:4px;"]);const Rc=({socialIcon:e,ticket:t,onCloseButtonClick:n})=>{const a=Object(E.a)();return Object(W.jsxs)(Sc,{children:[Object(W.jsxs)(Ec,{children:[e&&Object(W.jsx)(Mc,{children:e}),Object(W.jsx)(Ic,{children:t.channelName}),Object(W.jsx)(Nc,{ticketStatus:t.status2})]}),Object(W.jsx)(Dc,{children:a.formatMessage({id:"desk.tickets.ticketInfoPanel.history.ticketIssuedAt"})}),Object(W.jsx)(Ac,{buttonType:"tertiary",size:"small",icon:"close",onClick:n})]})},Pc=r.default.div.withConfig({displayName:"historyTicket__StyledHistoryTicket",componentId:"sc-1fgqt81-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;bottom:0;left:0;background-color:white;opacity:",";transform:scale(",");transition:transform 0.2s ",",opacity 0.2s ",";"],e=>e.isActive?"1":"0",e=>e.isActive?"1":"0",no.e,no.e),Lc=({ticket:e})=>{const{current:t}=Object(P.V)(e=>e.ticketHistory),n=Object(b.f)();Object(a.useEffect)(()=>()=>{n(j.d.resetTicketHistoryCurrent())},[e.id,n]);const i=(()=>{switch(e.channelType){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return Object(W.jsx)(o.Icon,{icon:"facebook",size:16,color:Object(o.cssVariables)("neutral-9")});case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return Object(W.jsx)(o.Icon,{icon:"twitter",size:16,color:Object(o.cssVariables)("neutral-9")});case"INSTAGRAM_COMMENT":return Object(W.jsx)(o.Icon,{icon:"instagram",size:16,color:Object(o.cssVariables)("neutral-6")});case"WHATSAPP_MESSAGE":return Object(W.jsx)(o.Icon,{icon:"whatsapp",size:16,color:Object(o.cssVariables)("neutral-7")});default:return null}})();return Object(W.jsx)(Pc,{isActive:!La()(t),children:t&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Rc,{ticket:t,socialIcon:i,onCloseButtonClick:()=>{n(j.d.resetTicketHistoryCurrent())}}),Object(W.jsx)(Tc,{ticket:t})]})})},Fc={isFetching:!1,ticketStatus:f.jc.ALL,assignee:void 0,channelTypes:[],tags:[],priority:void 0,dateRange:{range:{startDate:c()().subtract(29,"days"),endDate:c()()},value:o.DateRangePickerValue.Last30Days},tickets:[],searchQuery:"",currentSearchedType:null,pagination:{limit:f.qb,offset:0,page:1},ticketCount:0,ticketSorter:{sortBy:f.ic.CREATED,order:f.Tb.DESCEND},isSearchMode:!1,isSearched:!1,setIsFetching:()=>{},setTicketStatus:()=>{},setAssignee:()=>{},setChannelTypes:()=>{},setTags:()=>{},setPriority:()=>{},setDateRange:()=>{},setTickets:()=>{},setSearchQuery:()=>{},setCurrentSearchedType:()=>{},setPagination:()=>{},setTicketCount:()=>{},setTicketSorter:()=>{},setIsSearchMode:()=>{},getSorterParams:()=>"",updateTicketInList:()=>{},resetSearch:()=>{}},Uc=Object(a.createContext)(Fc),$c=({children:e,value:t})=>{const[n,i]=Object(a.useState)(Fc.isFetching),[s,r]=Object(a.useState)(Fc.ticketStatus),[o,l]=Object(a.useState)(Fc.assignee),[c,d]=Object(a.useState)(Fc.channelTypes),[u,p]=Object(a.useState)(Fc.tags),[g,h]=Object(a.useState)(Fc.priority),[m,b]=Object(a.useState)(Fc.dateRange),[j,y]=Object(a.useState)(Fc.tickets),[O,v]=Object(a.useState)(Fc.tickets),[x,_]=Object(a.useState)(Fc.searchQuery),[C,k]=Object(a.useState)(Fc.currentSearchedType),[w,T]=Object(a.useState)(Fc.pagination),[S,E]=Object(a.useState)(Fc.pagination),[I,M]=Object(a.useState)(Fc.ticketCount),[D,A]=Object(a.useState)(Fc.ticketCount),[N,R]=Object(a.useState)(Fc.ticketSorter),[P,L]=Object(a.useState)(Fc.isSearchMode),F=Object(a.useMemo)(()=>P&&""!==x,[P,x]),U=Object(a.useMemo)(()=>P?O:j,[P,O,j]),$=Object(a.useMemo)(()=>F?v:y,[F]),B=Object(a.useMemo)(()=>P?D:I,[P,D,I]),V=Object(a.useMemo)(()=>F?A:M,[F]),z=Object(a.useMemo)(()=>F?S:w,[F,w,S]),H=Object(a.useMemo)(()=>F?E:T,[F]),q=Object(a.useCallback)((e,t)=>{const n=U.findIndex(t=>t.id===e.id);-1!==n&&$([...U.slice(0,n),{...e,...t},...U.slice(n+1)])},[$,U]),G=Object(a.useCallback)((e,t)=>t===f.Tb.ASCEND?String(e):`-${e}`,[]),K=Object(a.useCallback)(()=>{_(""),v(Fc.tickets),A(Fc.ticketCount),E({...Fc.pagination,limit:z.limit})},[z.limit]);return Object(W.jsx)(Uc.Provider,{value:{isFetching:n,ticketStatus:s,assignee:o,channelTypes:c,tags:u,priority:g,dateRange:m,tickets:U,searchQuery:x,currentSearchedType:C,pagination:z,ticketCount:B,ticketSorter:N,isSearchMode:P,isSearched:F,setIsFetching:i,setTicketStatus:r,setAssignee:l,setChannelTypes:d,setTags:p,setPriority:h,setDateRange:b,setTickets:$,setSearchQuery:_,setCurrentSearchedType:k,setPagination:H,setTicketCount:V,setTicketSorter:R,setIsSearchMode:L,getSorterParams:G,updateTicketInList:q,resetSearch:K,...t},children:e})},Bc=r.default.label.withConfig({displayName:"ticketInformation__CustomFieldLabel",componentId:"sc-102tshr-0"})(["width:88px;font-size:14px;line-height:1.43;color:",";margin-bottom:0;margin-right:16px;word-break:break-word;"],Object(o.cssVariables)("neutral-6"));var Vc=Object(r.default)(Bc).withConfig({displayName:"ticketInformation___StyledCustomFieldLabel",componentId:"sc-102tshr-1"})(["display:flex;align-self:flex-start;"]);const zc=r.default.div.withConfig({displayName:"ticketInformation__CustomField",componentId:"sc-102tshr-2"})(["flex:1;min-width:0;"]),Hc=r.default.ul.withConfig({displayName:"ticketInformation__InformationList",componentId:"sc-102tshr-3"})(["list-style:none;margin:0;padding:0;font-size:14px;"]),qc=r.default.li.withConfig({displayName:"ticketInformation__InformationItem",componentId:"sc-102tshr-4"})(["display:flex;align-items:center;& + &{margin-top:12px;}"]),Gc=Object(r.default)(e=>Object(W.jsx)(o.Dropdown,{...e})).withConfig({displayName:"ticketInformation__StyledDropdown",componentId:"sc-102tshr-5"})(["height:24px;padding-left:8px;margin-left:-8px;"]),Wc=r.default.a.withConfig({displayName:"ticketInformation__TicketSocialItemLink",componentId:"sc-102tshr-6"})(["display:flex;align-items:center;position:relative;min-width:0;&:hover{text-decoration:underline;}"]),Kc=r.default.div.withConfig({displayName:"ticketInformation__TicketSocialItemLinkText",componentId:"sc-102tshr-7"})(["line-height:16px;height:16px;color:",";margin-right:4px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"],Object(o.cssVariables)("purple-7")),Yc=r.default.div.withConfig({displayName:"ticketInformation__RelatedChatList",componentId:"sc-102tshr-8"})(["flex:1;a{display:flex;line-height:20px;}a + a{margin-top:4px;}"]),Qc=({ticket:e})=>{const t=Object(E.a)(),n=Object(b.f)(),{updateTicket:i}=Object(P.X)(),{updateTicketInList:s}=Object(a.useContext)(Uc),r=[{priority:f.gc.URGENT,label:t.formatMessage({id:"ui.priority.urgent"})},{priority:f.gc.HIGH,label:t.formatMessage({id:"ui.priority.high"})},{priority:f.gc.MEDIUM,label:t.formatMessage({id:"ui.priority.medium"})},{priority:f.gc.LOW,label:t.formatMessage({id:"ui.priority.low"})}],l=Object(a.useCallback)(()=>r.find(t=>t.priority===e.priority)||r[2],[r,e]),c=Object(a.useCallback)(async a=>{const r=l();if(a&&r.priority!==a.priority)try{const r=await i(e.id,{priority:a.priority});r&&(s(r),n(j.d.updateTicketDetail(r)),o.toast.info({message:t.formatMessage({id:"desk.tickets.ticketInfoPanel.toast.changePriority.success"},{changedPriority:a.label})}))}catch(e){o.toast.error({message:t.formatMessage({id:"desk.tickets.ticketInfoPanel.toast.changePriority.fail"})})}},[i,e.id,s,n,t,l]);return Object(W.jsx)(Gc,{placement:"bottom-start",variant:"inline",items:r,size:"small",selectedItem:l(),itemToString:e=>e.priority,itemToElement:e=>Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0},e.priority),onItemSelected:c,toggleRenderer:({selectedItem:e})=>{if(e)return Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0},e.priority)}})};var Jc=Object(r.default)(o.Icon).withConfig({displayName:"ticketInformation___StyledIcon",componentId:"sc-102tshr-9"})(["flex:none;"]);const Xc=({ticket:e})=>{const t=Object(E.a)(),{data:n=null,channelType:i=null,twitterUser:s=null,instagramUser:r=null}=e||{},l=Object(a.useMemo)(()=>i&&f.Sb.includes(i)&&n,[i,n]),c=Object(a.useMemo)(()=>{switch(i){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return e.facebookPage.name;case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return e.twitterUser.name;case"INSTAGRAM_COMMENT":return e.instagramUser.username;default:return""}},[e,i]),d=Object(a.useMemo)(()=>{switch(i){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return"desk.tickets.ticketInfoPanel.ticketInfo.lbl.socialName.facebook";case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return"desk.tickets.ticketInfoPanel.ticketInfo.lbl.socialName.twitter";case"INSTAGRAM_COMMENT":return"desk.tickets.ticketInfoPanel.ticketInfo.lbl.socialName.instagram";default:return""}},[i]),u=Object(a.useMemo)(()=>{if(!l||!n)return null;let e;try{e=JSON.parse(n)}catch{return null}let{permalink:a}=e.social,c="";switch(i){case"FACEBOOK_FEED":"post"===e.social.source?c=t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.url.facebookPost"}):"comment"===e.social.source&&(c=t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.url.facebookComment"}));break;case"FACEBOOK_CONVERSATION":c=t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.url.facebookMessage"});break;case"TWITTER_DIRECT_MESSAGE_EVENT":c=t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.url.twitterDM"}),e.social.source&&e.social.source.sender_id&&(a=`https://twitter.com/messages/compose?recipient_id=${e.social.source.sender_id}`);break;case"TWITTER_STATUS":c=t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.url.twitterTweet"}),s&&e.social.source&&e.social.source.status_id&&(a=Object(Fa.b)({statusId:e.social.source.status_id}));break;case"INSTAGRAM_COMMENT":c=t.formatMessage({id:"desk.tickets.ticketHeader.socialLink.lbl.instagramComment"}),r&&e.social.source&&e.social.source.shortcode&&(a=`https://instagram.com/p/${e.social.source.shortcode}`)}return""!==c&&a?Object(W.jsxs)(Wc,{target:"_blank",href:a,title:c,children:[Object(W.jsx)(Kc,{children:c}),Object(W.jsx)(Jc,{icon:"open-in-new",size:14,color:Object(o.cssVariables)("purple-7")})]}):""},[i,n,t,s,l,r]);return!l||La()(c)?null:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(qc,{children:[Object(W.jsx)(Bc,{children:t.formatMessage({id:d})}),Object(W.jsx)(zc,{children:c})]}),Object(W.jsxs)(qc,{children:[Object(W.jsx)(Bc,{children:t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.lbl.url"})}),Object(W.jsx)(zc,{children:u})]})]})},Zc=({ticket:e})=>{const t=Object(E.a)(),{isPermitted:n}=Object(P.h)(),i=e.issuedAt?c()(e.issuedAt).format("lll"):"",{open:s}=Object(a.useContext)(zr),r=e=>()=>{s(e)};return Object(W.jsx)(V.u,{title:t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.title"}),children:Object(W.jsxs)(Hc,{children:[Object(W.jsxs)(qc,{children:[Object(W.jsx)(Bc,{children:t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.lbl.created"})}),Object(W.jsx)(zc,{children:i})]}),e.relatedChannels&&Object(W.jsxs)(qc,{children:[Object(W.jsx)(Vc,{children:t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.lbl.relatedChat"})}),Object(W.jsx)(Yc,{children:JSON.parse(e.relatedChannels).map(e=>Object(W.jsx)(o.Link,{role:"button",onClick:r(e),children:e.name},e.channel_url))})]}),Object(W.jsx)(Xc,{ticket:e}),Object(W.jsxs)(qc,{children:[Object(W.jsx)(Bc,{children:t.formatMessage({id:"desk.tickets.ticketInfoPanel.ticketInfo.lbl.priority"})}),Object(W.jsx)(zc,{children:n(["desk.agent"])?Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0}):Object(W.jsx)(Qc,{ticket:e})})]})]})})},ed=(td=Object(a.memo)(({ticket:e,hasLinkToDetail:t})=>{const{twitter:n}=Object(b.g)(e=>({twitter:e.twitter})),i=Object(b.f)(),s=Object(a.createRef)(),{id:r,customer:l,twitterUser:c,channelType:d}=e,{twitterUser:u=null}=n||{},{isOpen:p,close:g}=Object(a.useContext)(zr),h=Object(gs.a)(e.id);return Object(a.useEffect)(()=>{i(j.d.fetchTicketFieldsRequest({offset:0,limit:50})),i(j.d.fetchCustomerFieldsRequest({offset:0,limit:50}))},[i]),Object(a.useEffect)(()=>{i(j.d.getTicketFieldDataListRequest({id:r})),i(j.d.getCustomerFieldDataListRequest({id:l.id}))},[i,r,l.id]),Object(a.useEffect)(()=>{if(("TWITTER_DIRECT_MESSAGE_EVENT"===d||"TWITTER_STATUS"===d)&&c){const e="//",t=l.sendbirdId.split(e)[1];i(j.d.fetchTwitterUserDetailRequest({agentTwitterUserId:c.id,customerTwitterUserId:t}))}},[i,c,l,d]),Object(a.useEffect)(()=>{e.id!==h&&p&&g()},[g,p,h,e.id]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.ScrollBar,{style:{height:"100%"},ref:s,children:Object(W.jsxs)(V.G,{agentTwitter:c,customerTwitter:u,customer:l,hasLinkToDetail:t,children:[Object(W.jsx)(Zc,{ticket:e}),Object(W.jsx)(V.F,{ticket:e,scrollBarRef:s}),Object(W.jsx)(bs,{customerId:l.id})]})}),Object(W.jsx)(Lc,{ticket:e}),p&&Object(W.jsx)(to,{})]})}),e=>Object(W.jsx)(Hr,{children:Object(W.jsx)(td,{...e})}));var td;const nd=r.default.div.withConfig({displayName:"platformAPI__MessagesWrapper",componentId:"qvtxyy-0"})(["position:relative;flex:1;min-height:0;"]),ad=({ticket:e})=>{const t=Object(b.f)(),{messages:n,initialOrNextFetchedTimestamp:i}=Object(b.g)(e=>({messages:Object(Ua.a)(e),initialOrNextFetchedTimestamp:e.conversation.initialOrNextFetchedTimestamp})),{id:s,channelUrl:r}=e,o=so({ticket:e}),l=Object(a.useRef)(null),c=Object(a.useRef)(()=>{}),d=Object(a.useRef)(null);Object(a.useEffect)(()=>{c.current=()=>{t(j.d.fetchConversationMessagesRequest({types:"next",channelUrl:r,messageTs:n.length>0?n[n.length-1].created_at:0,prevLimit:0,nextLimit:50,presignedFileUrl:o}))}},[r,n,o,t]),Object(a.useEffect)(()=>(t(j.d.fetchConversationMessagesRequest({types:"initial",channelUrl:r,messageTs:(new Date).valueOf(),prevLimit:50,nextLimit:0,presignedFileUrl:o})),clearInterval(l.current||void 0),l.current=window.setInterval(()=>c.current(),5e3),()=>{null!=l.current&&(clearInterval(l.current),l.current=null)}),[s,r,o,t]);const u=Object(a.useCallback)(()=>{r&&t(j.d.fetchConversationMessagesRequest({types:"prev",channelUrl:r,messageTs:n.length>0?n[0].created_at:0,prevLimit:50,nextLimit:0,presignedFileUrl:o}))},[t,o,n,r]),p=Object(a.useCallback)(e=>{t(j.d.updateConversationTicketMessage({messageId:e,updated:{is_removed:!0}}))},[t]);return Object(W.jsx)(Mo.Provider,{value:d.current||void 0,children:Object(W.jsx)(nd,{ref:d,children:Object(W.jsx)(tc,{ticket:e,messagesMode:f.Q.PLATFORM_API,messages:n,initialOrNextFetchedTimestamp:i,fetchMessagesPrev:u,onDeleteMessage:p},"wip_messages")})})},id={isFetching:!1,error:null,previousMessagesRequest:{isFetching:!1,error:null},messages:[],initialOrNextFetchedTimestamp:null},sd=(e,t)=>{switch(t.type){case"LOAD_MESSAGES_REQUEST":return{...e,isFetching:!0};case"LOAD_MESSAGES_SUCCESS":return{...e,isFetching:!1,error:null,messages:t.payload.messages,initialOrNextFetchedTimestamp:Date.now()};case"LOAD_MESSAGES_FAIL":return{...e,isFetching:!1,error:t.payload.error};case"LOAD_PREVIOUS_MESSAGES_REQUEST":return{...e,previousMessagesRequest:{...e.previousMessagesRequest,isFetching:!0}};case"LOAD_PREVIOUS_MESSAGES_SUCCESS":return{...e,messages:t.payload.messages.length>0?[...t.payload.messages,...e.messages]:e.messages,previousMessagesRequest:{isFetching:!1,error:null}};case"LOAD_PREVIOUS_MESSAGES_FAIL":return{...e,previousMessagesRequest:{isFetching:!1,error:t.payload.error}};case"UPDATE_MESSAGE":return{...e,messages:e.messages.map(e=>e.messageId===Object(H.camelCaseKeys)(t.payload.message).messageId?t.payload.message:e)};case"APPEND_MESSAGES":return{...e,messages:[...e.messages,...t.payload.messages],initialOrNextFetchedTimestamp:Date.now()};default:return e}};var rd=n("J2m7"),od=n.n(rd),ld=n("qPyV"),cd=n.n(ld);let dd;!function(e){e.NEWEST="NEWEST",e.OLDEST="OLDEST",e.RECENTLY_UPDATED="RECENTLY_UPDATED"}(dd||(dd={}));const ud={counts:{search:0,active:0,idle:0,wip:0,closed:0},sortType:dd.NEWEST,filter:{labelKey:"ui.ticketStatus.active",value:f.jc.ACTIVE},isFetching:!1,isSearchMode:!1,isSearched:!1,assignedTickets:[],searchQuery:"",searchedTickets:[],currentTickets:[],currentChannels:void 0,currentPagination:{page:1,pageSize:30}},pd=e=>{switch(e){case dd.NEWEST:return"-created_at";case dd.OLDEST:return"created_at";case dd.RECENTLY_UPDATED:return"-last_message_at";default:return"-created_at"}},gd=(e,t)=>({...e,...t}),hd=Object(a.createContext)({conversationTickets:{state:ud,setState:()=>{},toggleIsSearchMode:()=>{},updateIsSearchMode:()=>{},updateIsSearched:()=>{},updateFilter:()=>{},updateSortType:()=>{},updateCounts:()=>{},updateCurrentPagination:()=>{},initCurrentChannels:()=>{},addTickets:()=>{},updateTickets:()=>{},updateTicketsAssignment:()=>{},removeFromCurrentTickets:()=>{},resetCurrentTickets:()=>{},fetchCurrentTickets:()=>{},resetSearch:()=>{},fetchSearchTickets:()=>{},fetchAssignedTickets:()=>{},fetchAssignedTicketsCounts:()=>{},updateSearchQuery:()=>{}}});var md=n("DzJC"),fd=n.n(md);const bd=r.default.div.withConfig({displayName:"QuickRepliesPopper__PopperContainer",componentId:"soqgyx-0"})(["position:absolute;overflow:hidden;background:white;border-radius:4px;",";"],o.elevation.popover),jd=r.default.div.withConfig({displayName:"QuickRepliesPopper__PopperContent",componentId:"soqgyx-1"})([""]),yd=r.default.div.withConfig({displayName:"QuickRepliesPopper__SearchQueryContainer",componentId:"soqgyx-2"})(["display:flex;align-items:center;position:relative;padding-right:4px;padding-left:16px;height:40px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),Od=r.default.input.withConfig({displayName:"QuickRepliesPopper__SearchBar",componentId:"soqgyx-3"})(["flex:1;font-size:14px;color:",";border:0;outline:0;&::placeholder{color:",";}"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-6")),vd=Object(r.default)(o.IconButton).withConfig({displayName:"QuickRepliesPopper__SearchIcon",componentId:"soqgyx-4"})(["position:absolute;top:4px;right:8px;z-index:",";opacity:",";transform:translateX(",");transition:",";"],e=>e.isDisplayed?30:10,e=>e.isDisplayed?1:0,e=>e.isDisplayed?0:"16px",Object(o.transitions)({duration:.3,properties:["opacity","transform"]})),xd=r.default.div.withConfig({displayName:"QuickRepliesPopper__FlexChild",componentId:"soqgyx-5"})(["flex:1;height:100%;"]),_d=r.default.div.withConfig({displayName:"QuickRepliesPopper__FlexContainer",componentId:"soqgyx-6"})(["display:flex;width:480px;"," + ","{border-left:1px solid ",";}"],xd,xd,Object(o.cssVariables)("neutral-2")),Cd=r.default.ul.withConfig({displayName:"QuickRepliesPopper__TeamsContainer",componentId:"soqgyx-7"})(["margin:8px;width:148px;"]),kd=r.default.li.withConfig({displayName:"QuickRepliesPopper__Team",componentId:"soqgyx-8"})(["display:flex;align-items:center;padding:8px;height:32px;font-size:12px;font-weight:500;color:",";background:",";border-radius:4px;transition:",";&:hover{background:",";cursor:pointer;}& + &{margin-top:4px;}"],e=>e.isSelected?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-7"),e=>e.isSelected&&Object(o.cssVariables)("neutral-2"),Object(o.transitions)({duration:.3,properties:["color","background"]}),Object(o.cssVariables)("neutral-1")),wd=r.default.li.withConfig({displayName:"QuickRepliesPopper__TeamDivider",componentId:"soqgyx-9"})(["margin:8px 0;width:100%;height:1px;background:",";"],Object(o.cssVariables)("neutral-2")),Td=r.default.ul.withConfig({displayName:"QuickRepliesPopper__ItemContainer",componentId:"soqgyx-10"})([""]),Sd=r.default.span.withConfig({displayName:"QuickRepliesPopper__QuickReplyName",componentId:"soqgyx-11"})(["display:block;overflow:hidden;max-width:248px;font-size:14px;font-weight:500;line-height:1.43;color:",";text-overflow:ellipsis;white-space:nowrap;word-break:break-word;"],Object(o.cssVariables)("neutral-10")),Ed=r.default.p.withConfig({displayName:"QuickRepliesPopper__QuickReplyMessage",componentId:"soqgyx-12"})(["display:block;margin:0;padding:0;max-width:248px;overflow:hidden;font-size:12px;line-height:1.33;color:",";text-overflow:ellipsis;white-space:nowrap;word-break:break-word;"],Object(o.cssVariables)("neutral-7")),Id=r.default.li.withConfig({displayName:"QuickRepliesPopper__Item",componentId:"soqgyx-13"})(["padding:6px 16px;outline:0;background:",";transition:background 0.2s ",";cursor:pointer;&:hover{background:",";}&:focus{box-shadow:inset 0 0 0 2px ",";}"],e=>e.isHighlighted?Object(o.cssVariables)("neutral-1"):"transparent",o.transitionDefault,Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("purple-7")),Md=r.default.div.withConfig({displayName:"QuickRepliesPopper__FooterContainer",componentId:"soqgyx-14"})(["display:flex;align-items:center;padding:8px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),Dd=r.default.div.withConfig({displayName:"QuickRepliesPopper__ButtonCreateContainer",componentId:"soqgyx-15"})(["flex:1;"]),Ad=Object(r.default)(o.Button).withConfig({displayName:"QuickRepliesPopper__ButtonAdd",componentId:"soqgyx-16"})(["min-width:44px;"]),Nd={top:0,left:0,bottom:0,right:0,width:0,height:0};class Rd{constructor(e){this.rects=Nd,e&&(this.rects=e)}getBoundingClientRect(){return this.rects}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const Pd=Object(a.memo)(({item:e,itemRef:t,ticket:n,isHighlighted:a,onItemClick:i})=>Object(W.jsx)(o.Tooltip,{content:si(n,e.message),portalId:"QuickRepliesTooltip",placement:"right",children:Object(W.jsxs)(Id,{ref:t,role:"option","aria-selected":a,isHighlighted:a,onClick:i(e),children:[Object(W.jsx)(Sd,{children:e.name}),Object(W.jsx)(Ed,{children:e.message})]})}));var Ld=Object(a.memo)(({className:e,isOpen:t,ticket:n,searchQuery:i,toggleRef:r,popperProps:l,scrollbarProps:c,onItemClick:d})=>{const{quickReplies:u,hasMore:p,searchCounts:g,isSearched:h,activeQuickReplyTypeId:m,setActiveQuickReplyTypeId:f,setDropdownQuickReplyQuery:b,highlightedIndex:j,setHighlightedIndex:y,popperContentRef:O,itemScrollRef:v,itemContainerRef:x,handleQuickReplyDropdownSearchChange:_,searchQuickRepliesRequest:C,fetchSearchCountsRequest:k}=Object(a.useContext)(ji),w=Object(E.a)(),T=Object(s.k)(),{appId:S,pid:I,region:M,agentId:A}=Object(P.V)(e=>{var t,n,a,i;return{appId:null!=(t=null==(n=e.applicationState.data)?void 0:n.app_id)?t:"",pid:e.desk.project.pid,region:null!=(a=null==(i=e.applicationState.data)?void 0:i.region)?a:"",agentId:e.desk.agent.id}}),{getErrorMessage:N}=Object($.a)(),R=Object(_o.a)(),[L,F]=Object(a.useState)(new Rd),[U,B]=Object(a.useState)([]),V=Object(a.useRef)(()=>{}),H=Object(a.useRef)(null),q=Object(a.useRef)(null),G=!(null!=r&&r.current),K=e=>{if(e){var t,n;const{current:a}=H;a&&a.disconnect(),H.current=new IntersectionObserver(e=>{const[t]=e;t&&t.isIntersecting&&V.current()},{root:null==(t=e.parentNode)||null==(n=t.parentElement)?void 0:n.parentElement}),H.current.observe(e)}},Y=Object(a.useCallback)(async()=>{try{const{data:e}=await D.g.fetchAgent(I,M,{agentId:A});B(e.groups)}catch(e){o.toast.error({message:N(e)})}},[A,N,I,M]),Q=Object(a.useMemo)(()=>fd()(()=>{!p&&t||C({offset:u.length,limit:10,name:i,isNext:!0})},200),[p,t,C,u.length,i]),J=Object(a.useCallback)(async()=>await Promise.all([Y(),k({name:i.trim()}),C({offset:0,limit:10,name:i.trim()})]),[Y,k,i,C]);Object(a.useEffect)(()=>{var e;const n=(null==r||null==(e=r.current)?void 0:e.getBoundingClientRect())||Nd,a=pi(),s=G?a:n,o=L.getBoundingClientRect();t&&i.length>=0&&s.left>0&&s.top>0&&(o.top!==s.top||o.left!==s.left)&&F(new Rd(s))},[t,G,i,r,L]),Object(a.useEffect)(()=>{var e;t&&(J(),null==(e=q.current)||e.focus())},[t,i,m]),Object(a.useEffect)(()=>{V.current=()=>{Q()}},[Q]);const X=e=>{var t;null==e||e.preventDefault(),null==_||_((null==(t=q.current)?void 0:t.value)||"")},Z=e=>()=>{f(e),y(0)},ee=()=>{b(""),q.current&&(q.current.value="")},te=Object(a.useCallback)(()=>{T.push(`/${S}/desk/settings/quick-replies`)},[S,T]),ne=Object(a.useCallback)(()=>{T.push(`/${S}/desk/settings/quick-replies/create`)},[S,T]),ae=Object(a.useMemo)(()=>u.map(e=>({message:e.message,name:e.name,value:e.id})),[u]),ie=(e,t)=>!h||m===e||g[t]>0,se=!h||0===m||-1===m||g.all>0||g.myself>0,re=Object(a.useCallback)(e=>{const t=g[e];return h?t>0?`(${t>999?"999+":t})`:"(0)":""},[h,g]),oe=(e,t)=>e.name.localeCompare(t.name);return t?jn.a.createPortal(Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{id:"QuickRepliesTooltip"}),Object(W.jsx)(dn.a,{placement:G?"top":"top-end",referenceElement:L,...l,children:({ref:a,style:s})=>Object(W.jsx)(bd,{className:e,ref:a,style:s,isShow:t,"data-test-id":"QuickRepliesPopup",children:Object(W.jsxs)(jd,{ref:O,children:[!G&&Object(W.jsxs)(yd,{children:[Object(W.jsx)(Od,{dir:R,ref:q,type:"text",name:"query",placeholder:w.formatMessage({id:"desk.conversation.input.quickReplies.search.placeholder"}),autoFocus:!0,onChange:X,"data-test-id":"QuickRepliesSearchQuery",style:{marginRight:"40px"}}),Object(W.jsx)(vd,{type:"button",buttonType:"secondary",icon:"search",size:"small",disabled:h,isDisplayed:!h,"data-test-id":"ButtonSearchQuickReplies"}),Object(W.jsx)(vd,{type:"button",buttonType:"secondary",icon:"close",size:"small",disabled:!h,isDisplayed:h,onClick:ee,"data-test-id":"ButtonCancelSearchingQuickReplies"})]}),Object(W.jsxs)(_d,{children:[Object(W.jsx)(xd,{children:Object(W.jsx)(o.ScrollBar,{style:{height:320},children:Object(W.jsxs)(Cd,{children:[ie(0,"all")&&Object(W.jsx)(kd,{isSelected:0===m,onClick:Z(0),"data-test-id":"QuickReplyTeamOptionAll",children:`${w.formatMessage({id:"desk.conversation.input.quickReplies.tab.allAgents"})} ${re("all")}`},"all"),ie(-1,"myself")&&Object(W.jsx)(kd,{isSelected:-1===m,onClick:Z(-1),"data-test-id":"QuickReplyTeamOptionMyself",children:`${w.formatMessage({id:"desk.conversation.input.quickReplies.tab.myself"})} ${re("myself")}`},"myself"),se&&Object(W.jsx)(wd,{}),U.filter(e=>{return t=e.id,n=e.name,m===t||g[n]>0;var t,n}).sort(oe).map(({id:e,key:t,name:n})=>Object(W.jsxs)(kd,{isSelected:m===e,onClick:Z(e),children:[n," ",re(n)]},t||"default"))]})})}),Object(W.jsx)(xd,{children:Object(W.jsx)(o.ScrollBar,{ref:v,style:{width:320,height:320},...c,children:ae.length>0?Object(W.jsx)(Td,{ref:x,children:ae.map((e,a)=>Object(W.jsx)(Pd,{item:e,itemRef:ae[ae.length-1]===e&&t&&p?K:void 0,ticket:n,isHighlighted:j===a,onItemClick:d},e.value))}):Object(W.jsx)(z.a,{icon:"no-search",size:"small",title:w.formatMessage({id:"desk.conversation.input.quickReplies.noResults.title"}),description:w.formatMessage({id:"desk.conversation.input.quickReplies.noResults.description"},{query:i})})})})]}),Object(W.jsxs)(Md,{children:[Object(W.jsx)(Dd,{children:Object(W.jsx)(Ad,{size:"small",buttonType:"primary",variant:"ghost",icon:"plus-circle",onClick:ne,children:w.formatMessage({id:"desk.conversation.input.quickReplies.button.create"})})}),Object(W.jsx)(o.IconButton,{size:"small",buttonType:"tertiary",icon:"settings",onClick:te})]})]})})})]}),document.getElementById("portal_popup")):null});const Fd=r.default.div.withConfig({displayName:"sendbird__StyledMessageInput",componentId:"sc-3rdtvg-0"})(["position:relative;margin-right:20px;margin-bottom:18px;margin-left:20px;",";button[disabled]{pointer-events:none;}"],e=>e.styles),Ud=r.default.div.withConfig({displayName:"sendbird__ButtonWrapper",componentId:"sc-3rdtvg-1"})(["position:absolute;right:12px;bottom:9px;cursor:pointer;",";"],e=>e.styles),$d=r.default.div.withConfig({displayName:"sendbird__IconButtonContainer",componentId:"sc-3rdtvg-2"})(["display:inline-block;"]),Bd=r.default.label.withConfig({displayName:"sendbird__FileInput",componentId:"sc-3rdtvg-3"})(["margin-bottom:0;cursor:pointer;input[type='file']{display:none;}",";"],e=>e.styles),Vd=r.default.div.withConfig({displayName:"sendbird__CEWrapper",componentId:"sc-3rdtvg-4"})(["overflow:auto;border-radius:4px;box-shadow:0 1px 5px 0 rgba(33,34,66,0.12),0 0 1px 0 rgba(33,34,66,0.16),0 2px 1px 0 rgba(33,34,66,0.08);transition:border 0.2s ",";",";"],o.transitionDefault,e=>e.styles),zd=r.default.div.withConfig({displayName:"sendbird__DisabledCover",componentId:"sc-3rdtvg-5"})(["display:",";position:absolute;top:0;right:0;left:0;bottom:0;background:",";opacity:0.4;border-radius:4px;z-index:1;"],({isDisabled:e})=>e?"block":"none",Object(o.cssVariables)("neutral-1")),Hd=r.default.div.withConfig({displayName:"sendbird__ToggleQuickReplies",componentId:"sc-3rdtvg-6"})([""]),qd=({currentTicket:e,isDisabled:t=!1,maxHeight:n,onKeyDown:i,onFileChange:s,onResize:l,onSubmit:c,onKeyUp:d,setAgentTyping:u,agentTyping:p,sendMessage:g})=>{const h=Object(E.a)(),m=Object(a.useRef)(null),f=Object(a.useRef)(null),b=Object(a.useRef)(null),j=Object(_o.a)(),{searchCounts:y,isOpenCaretPopper:O,isOpenDropdownPopper:v,caretQuickReplyQuery:x,setCaretQuickReplyQuery:_,dropdownQuickReplyQuery:C,contentEditableRef:k,popperContentRef:w,saveSelectionOnContentEditable:T,handleQuickReplyEditableKeyDown:S,handleAppendQuickReply:I,handleQuickReplyIconButtonClick:M,handleCaretItemClick:D,reset:A}=Object(a.useContext)(ji),N=Object(P.P)({ref:f,exceptionRefs:[w],isExceptionsPreventOutsideClickEvent:!0,onOutsideClick:A}),R=Object(a.useCallback)(e=>{k.current&&k.current.setText(e)},[k]),L=Object(a.useCallback)(()=>{if(k.current)return k.current.getText()},[k]);Object(a.useEffect)(()=>{var e,n;t?null==(e=k.current)||e.blur():null==(n=k.current)||n.focus()},[k,t]),Object(a.useEffect)(()=>{(O||v)&&N.subscribe(),O||v||N.unsubscribe()},[O,v,N]);const F=Object(a.useMemo)(()=>ii()(e=>{_(e)},300),[_]),U=Object(a.useCallback)((e,t)=>{T(),d(e,t);const n=!!t;if(n!==p&&u(n),["Enter","Escape"].includes(e.key)&&(O||v))return void A();const a=gi(k,"#");if(a!==x){if("#"===a)return _("#"),void F.cancel();if(0===a.indexOf("#"))return void F(a);_(""),F.cancel()}},[p,x,k,F,O,v,d,A,T,u,_]);return Object(W.jsxs)(Fd,{ref:f,children:[Object(W.jsx)(zd,{isDisabled:t}),Object(W.jsx)(Ld,{isOpen:O,ticket:e,searchQuery:x.slice(1),onItemClick:D(e)}),Object(W.jsx)(Vd,{styles:Object(r.css)(["max-height:","px;"],n),children:Object(W.jsx)(V.B,{dir:j,ref:k,placeholder:h.formatMessage({id:"desk.conversation.input.ph.message"}),isStopDefaultKeyDownEvent:O,isEditable:!t,autoFocus:!1,onKeyUp:U,onKeyDown:t=>{S(e,t),null==i||i(t)},onResize:e=>{null==l||l(e)},onSubmit:c,styles:Object(r.css)(["padding:17px 120px 17px 20px;word-wrap:break-word;white-space:pre-wrap;"])})}),Object(W.jsxs)(Ud,{children:[Object(W.jsxs)($d,{children:[Object(W.jsx)(Ld,{isOpen:v,ticket:e,searchQuery:C,toggleRef:b,onItemClick:t=>n=>{null==n||n.preventDefault(),I(e)(t),u(!0)}}),Object(W.jsx)(Hd,{ref:b,children:Object(W.jsx)(o.IconButton,{icon:"reply-template",size:"small",buttonType:"tertiary",title:h.formatMessage({id:"desk.conversation.input.button.quickReply"}),disabled:Object.values(y).every(e=>0===e),onClick:e=>{N.subscribe(),T(),M(e)},"data-test-id":"QuickReplyShortcutButton"})})]}),Object(W.jsxs)(Bd,{children:[Object(W.jsx)(o.IconButton,{icon:"attach",size:"small",buttonType:"tertiary",title:h.formatMessage({id:"desk.conversation.input.button.sendFile"}),disabled:p,onClick:()=>{var e;null==(e=m.current)||e.click()},"data-test-id":"SendFileButton"}),Object(W.jsx)("input",{ref:m,type:"file",onChange:s})]}),Object(W.jsx)(o.IconButton,{icon:"send",size:"small",buttonType:"primary",title:h.formatMessage({id:"desk.conversation.input.button.send"}),disabled:!p,onClick:()=>{k.current&&(g(L()),u(!1),R(""))},"data-test-id":"SendMessageButton"})]})]})},Gd=r.default.div.withConfig({displayName:"social__StyledSocialInput",componentId:"sc-1n5bj4y-0"})(["background:white;position:relative;margin-right:20px;margin-bottom:18px;margin-left:20px;border-radius:4px;border:1px solid ",";box-shadow:0 1px 2px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.05);",";button[disabled]{pointer-events:none;}"],Object(o.cssVariables)("neutral-3"),e=>e.workingMessage?`z-index: ${Ha.b.previewBackground+1};`:""),Wd=r.default.div.withConfig({displayName:"social__CEWrapper",componentId:"sc-1n5bj4y-1"})(["max-height:","px;padding-right:120px;overflow:auto;"],e=>e.maxHeight),Kd=r.default.div.withConfig({displayName:"social__SocialInputMenu",componentId:"sc-1n5bj4y-2"})(["display:flex;align-items:center;padding:0 20px;height:40px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),Yd=r.default.div.withConfig({displayName:"social__SocialInputTypes",componentId:"sc-1n5bj4y-3"})(["font-size:13px;font-weight:600;letter-spacing:-0.2px;color:",";"],Object(o.cssVariables)("neutral-10")),Qd=r.default.div.withConfig({displayName:"social__Account",componentId:"sc-1n5bj4y-4"})(["margin-left:auto;display:flex;align-items:center;"]),Jd=r.default.div.withConfig({displayName:"social__AccountText",componentId:"sc-1n5bj4y-5"})(["font-size:12px;font-weight:500;color:",";"],Object(o.cssVariables)("neutral-7")),Xd=r.default.div.withConfig({displayName:"social__AccountProfile",componentId:"sc-1n5bj4y-6"})(["margin:0 10px;"]),Zd=r.default.div.withConfig({displayName:"social__FileInputWrapper",componentId:"sc-1n5bj4y-7"})(["position:absolute;right:16px;bottom:16px;cursor:pointer;"]),eu=r.default.label.withConfig({displayName:"social__FileInput",componentId:"sc-1n5bj4y-8"})(["margin-bottom:0;input[type='file']{display:none;}"]),tu=Object(r.default)(o.IconButton).withConfig({displayName:"social__SendButton",componentId:"sc-1n5bj4y-9"})(["margin-left:4px;"]),nu=r.default.div.withConfig({displayName:"social__SocialWorkingMessage",componentId:"sc-1n5bj4y-10"})(["position:relative;background:rgba(236,239,241,0.9);padding:20px 16px 18px;"]),au=r.default.div.withConfig({displayName:"social__SocialWorkingMessageCustomer",componentId:"sc-1n5bj4y-11"})(["font-size:13px;font-weight:600;line-height:1;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),iu=r.default.div.withConfig({displayName:"social__SocialWorkingMessageMessage",componentId:"sc-1n5bj4y-12"})(["font-size:14px;letter-spacing:-0.1px;color:",";margin-top:6px;"],Object(o.cssVariables)("neutral-10")),su=r.default.img.withConfig({displayName:"social__SocialWorkingMessageImage",componentId:"sc-1n5bj4y-13"})(["display:inline-block;max-width:80%;max-height:260px;border-radius:8px;margin-top:8px;"]),ru=r.default.div.withConfig({displayName:"social__SocialWorkingMessageVideo",componentId:"sc-1n5bj4y-14"})(["display:inline-block;overflow:hidden;border-radius:8px;max-height:260px;margin-top:8px;video{max-height:260px;}"]),ou=Object(r.default)(o.IconButton).withConfig({displayName:"social__CloseButton",componentId:"sc-1n5bj4y-15"})(["position:absolute;top:12px;right:8px;"]),lu=r.default.div.withConfig({displayName:"social__Recipients",componentId:"sc-1n5bj4y-16"})(["display:flex;flex-direction:row;align-items:baseline;padding:10px 16px;.Recipients__label{flex:none;margin-right:8px;font-size:12px;line-height:16px;color:",";}.Recipients__items{"," flex:1;max-height:60px;overflow:hidden;> .Recipients__itemsMeasurer{display:flex;flex-wrap:wrap;}}.Recipients__editButton{"," color:",";cursor:pointer;border:0;outline:0;background:none;:active{color:",";}:hover{color:",";text-decoration:underline;}}"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("neutral-9"),Object(o.cssVariables)("purple-8")),cu=r.default.span.withConfig({displayName:"social__Recipient",componentId:"sc-1n5bj4y-17"})([""," display:inline-block;max-width:400px;text-overflow:ellipsis;overflow-x:hidden;:not(:last-child){margin-right:8px;}"],o.Body["body-short-01"]),du=r.default.div.withConfig({displayName:"social__FilePreviewGrid",componentId:"sc-1n5bj4y-18"})(["display:grid;grid-gap:4px;grid-template-columns:repeat(4,auto);grid-auto-flow:row;justify-content:start;padding:0 16px;margin-top:16px;"]),uu=r.default.div.withConfig({displayName:"social__FilePreviewItem",componentId:"sc-1n5bj4y-19"})(["position:relative;"]),pu=Object(r.default)(o.IconButton).withConfig({displayName:"social__RemoveButton",componentId:"sc-1n5bj4y-20"})(["position:absolute;top:2px;right:2px;"]),gu=r.default.div.withConfig({displayName:"social__DisabledCover",componentId:"sc-1n5bj4y-21"})(["display:",";position:absolute;top:0;right:0;left:0;bottom:0;background:",";opacity:0.4;border-radius:4px;z-index:1;"],({isDisabled:e})=>e?"block":"none",Object(o.cssVariables)("neutral-1")),hu=r.default.div.withConfig({displayName:"social__ToggleQuickReplies",componentId:"sc-1n5bj4y-22"})([""]),mu=r.default.div.withConfig({displayName:"social__IconButtonContainer",componentId:"sc-1n5bj4y-23"})(["display:inline-block;"]),fu={setAgentTypingStatus:j.d.setAgentTypingStatus},bu=e=>e.match(/^(video|image)/i);var ju=Object(r.default)("span").withConfig({displayName:"social___StyledSpan",componentId:"sc-1n5bj4y-24"})(["color:",";"],e=>e._css);const yu=Object(b.d)(e=>({agentTyping:e.conversation.typingStatus.agentTyping,isConnected:e.sendbird.isConnected,isFetchingConversation:e.conversation.isFetching}),fu)(({ticket:e,isFetchingConversation:t,isConnected:n,maxHeight:i,workingMessage:s,recipients:l=[],allowedFileExtensions:c,clearWorkingMessage:d,onEditRecipientsButtonClick:u,onFileChange:p,onResize:g,onSubmit:h,setAgentTypingStatus:m,agentTyping:f})=>{const b=Object(E.a)(),{pid:j,region:y}=Object(L.a)(),{getErrorMessage:O}=Object($.a)(),v=Object(a.useRef)(null),x=Object(a.useRef)(null),_=Object(a.useRef)(null),C=Object(a.useRef)(null),k=Object(P.R)(s),[w,T]=Object(a.useState)(l.length),[S,I]=Object(a.useState)([]),{facebookPage:M,twitterUser:D,instagramUser:A,channelType:R}=e,F=Object(_o.a)(),{searchCounts:U,isOpenCaretPopper:B,isOpenDropdownPopper:z,caretQuickReplyQuery:q,setCaretQuickReplyQuery:G,dropdownQuickReplyQuery:K,contentEditableRef:Y,popperContentRef:Q,saveSelectionOnContentEditable:J,handleQuickReplyEditableKeyDown:X,handleAppendQuickReply:Z,handleQuickReplyIconButtonClick:ee,handleCaretItemClick:te,reset:ne}=Object(a.useContext)(ji),ae=Object(P.P)({ref:_,exceptionRefs:[Q],isExceptionsPreventOutsideClickEvent:!0,onOutsideClick:ne}),ie="TWITTER_STATUS"===e.channelType||"TWITTER_DIRECT_MESSAGE_EVENT"===e.channelType,se=(()=>{switch(e.channelType){case"TWITTER_DIRECT_MESSAGE_EVENT":case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"WHATSAPP_MESSAGE":return 1-S.length;case"TWITTER_STATUS":return S.some(({object:e})=>e.type.toLowerCase().startsWith("video")||"image/gif"===e.type.toLowerCase())?0:4-S.length;default:return 0}})();Object(a.useEffect)(()=>{S.filter(({url:e,isReading:t})=>null==e&&!t).forEach(({object:e})=>{I(t=>t.map(t=>t.object===e?{...t,isReading:!0}:t));const t=new FileReader;t.onload=t=>{I(n=>n.map(n=>n.object===e?{...n,url:t.target.result,isReading:!1}:n))},t.readAsDataURL(e)}),!D||"TWITTER_STATUS"!==e.channelType&&"TWITTER_DIRECT_MESSAGE_EVENT"!==e.channelType||S.filter(({twitterMediaId:e,isUploading:t})=>!t&&null==e).forEach(({object:t})=>{I(e=>e.map(e=>e.object===t?{...e,isUploading:!0}:e)),Object(N.uploadTwitterMedia)(j,y,{id:D.id,channelType:e.channelType,filedata:t}).then(({data:e})=>{const{media_id_string:n}=e;I(e=>e.map(e=>e.object===t?{...e,isUploading:!1,twitterMediaId:n}:e))}).catch(e=>{o.toast.error({message:O(e)}),I(e=>e.filter(e=>e.object!==t))})})},[S,O,j,y,e,e.channelType,D]);Object(a.useEffect)(()=>{T(l.length)},[l]),Object(a.useEffect)(()=>{v.current&&v.current.offsetHeight>20&&T(e=>e-1)},[w]),Object(a.useEffect)(()=>{s!==k&&Y.current&&Y.current.focus()},[s,k,Y]),Object(a.useEffect)(()=>{n?Y.current&&Y.current.focus():Y.current&&Y.current.blur()},[Y,n]),Object(a.useEffect)(()=>{m(!1)},[m]),Object(a.useEffect)(()=>{(B||z)&&ae.subscribe(),B||z||ae.unsubscribe()},[B,z,ae]);const re=Object(a.useMemo)(()=>ii()(e=>{G(e)},400),[G]),oe=Object(a.useCallback)((e,t)=>{J();const n=!!t;if(n!==f&&m(n),["Enter","Escape"].includes(e.key)&&(B||z))return void ne();const a=gi(Y,"#");if(a!==q){if("#"===a)return G("#"),void re.cancel();if(0===a.indexOf("#"))return void re(a);G(""),re.cancel()}},[f,q,Y,re,B,z,ne,J,m,G]),le=Object(a.useCallback)(t=>{for(const n of t){const t=(()=>{switch(e.channelType){case"TWITTER_STATUS":case"TWITTER_DIRECT_MESSAGE_EVENT":return n.type.toLowerCase().startsWith("video")||"image/gif"===n.type.toLowerCase()?15:5;case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return 25;case"WHATSAPP_MESSAGE":return 16;default:return 0}})();if(n.size>1e6*t)return{file:n,limit:t}}},[e.channelType]),ce=({limit:e,multiple:t=!1})=>{o.toast.error({message:b.formatMessage({id:t?"desk.conversation.input.noti.error.fileSizeLimitExceededMultiple":"desk.conversation.input.noti.error.fileSizeLimitExceeded"},{limitInMegabyte:e})})},de=t=>{if(!t.target.files||0===t.target.files.length)return;const n=[];for(let e=0;e<t.target.files.length;e+=1)n.push(t.target.files.item(e));switch(t.target.value="",e.channelType){case"TWITTER_STATUS":{if(n.some(e=>!bu(e.type)))return void o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.unsupportedFileFormat"})});if(n.length>se)return void(S.some(({object:e})=>"image/gif"===e.type.toLowerCase())?o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneGif"})}):S.some(({object:e})=>e.type.toLowerCase().startsWith("video"))?o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneVideo"})}):o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.maximumFourImages"})}));if(n.length>1){if(n.some(e=>"image/gif"===e.type.toLowerCase()))return void o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneGif"})});if(n.some(e=>e.type.toLowerCase().startsWith("video")))return void o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneVideo"})})}const e=le(n);if(e)return void ce({multiple:n.length>1,limit:e.limit});break}case"TWITTER_DIRECT_MESSAGE_EVENT":{if(n.some(e=>!bu(e.type)))return void o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.unsupportedFileFormat"})});if(n.length>se)return void(n.some(e=>"image/gif"===e.type.toLowerCase())?o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneGif"})}):n.some(e=>e.type.toLowerCase().startsWith("video"))?o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneVideo"})}):o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneImage"})}));const e=le(n);if(e)return void ce({multiple:n.length>1,limit:e.limit});break}case"FACEBOOK_FEED":case"FACEBOOK_CONVERSATION":{if(n.some(e=>!bu(e.type)))return void o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.unsupportedFileFormat"})});if(n.length>se)return void(n.some(e=>e.type.toLowerCase().startsWith("video"))?o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneVideo"})}):o.toast.error({message:b.formatMessage({id:"desk.conversation.input.noti.error.onlyOneImage"})}));const e=le(n);if(e)return void ce({multiple:n.length>1,limit:e.limit});break}case"WHATSAPP_MESSAGE":{const e=le(n);if(e)return void ce({multiple:n.length>1,limit:e.limit});break}default:return}var a;ie?(a=n,I(e=>[...e,...a.map(e=>({object:e,isReading:!1,isUploading:!1,twitterMediaId:null,url:null}))])):h("",n),p&&p(t)},ue=()=>{x.current&&x.current.click()},pe=()=>{if(S.some(e=>e.isUploading))return;if(!Y.current)return;(Y.current.getText().trim()||0!==S.length)&&(h(Y.current.getText(),S.map(e=>e.twitterMediaId)),Y.current.setText(""),m(!1),I([]))},{accountProfileImageURL:ge,accountName:he,socialInputType:me}=(()=>{const e={FACEBOOK_CONVERSATION:b.formatMessage({id:"desk.conversation.input.lbl.facebookMessage"}),FACEBOOK_FEED:b.formatMessage({id:"desk.conversation.input.lbl.facebookComment"}),TWITTER_DIRECT_MESSAGE_EVENT:b.formatMessage({id:"desk.conversation.input.lbl.twitterDM"}),TWITTER_STATUS:b.formatMessage({id:"desk.conversation.input.lbl.twitterTweet"}),INSTAGRAM_COMMENT:b.formatMessage({id:"desk.conversation.input.lbl.instagramComment"})}[R];return M?{accountProfileImageURL:M.picture.url,accountName:M.name,socialInputType:e}:D?{accountProfileImageURL:D.profileImageUrl,accountName:D.name,socialInputType:e}:A?{accountProfileImageURL:A.profilePictureUrl,accountName:A.username,socialInputType:e}:{}})(),fe=t=>n=>{null==n||n.preventDefault(),Z(e)(t),m(!0)},be=e=>{ae.subscribe(),J(),ee(e)},je="INSTAGRAM_COMMENT"!==e.channelType,ye=S.some(e=>e.isUploading),Oe=ye||!f&&0===S.length,ve=(()=>{const t=ie?b.formatMessage({id:"desk.conversation.input.button.attachFile"}):b.formatMessage({id:"desk.conversation.input.button.sendFile"}),n=Object(W.jsxs)(eu,{children:[Object(W.jsx)("input",{type:"file",onChange:de,ref:x,multiple:se>1,accept:c}),Object(W.jsx)(o.IconButton,{icon:"attach",size:"small",buttonType:"tertiary",title:se>0?t:void 0,onClick:ue,disabled:0===se,"data-test-id":"SendFileButton"})]}),a=Object(W.jsx)(tu,{icon:"send",size:"small",buttonType:"primary",title:ye?b.formatMessage({id:"desk.conversation.input.button.uploadingFiles"}):b.formatMessage({id:"desk.conversation.input.button.send"}),onClick:pe,disabled:Oe,"data-test-id":"SendMessageButton"}),i=Object(W.jsxs)(mu,{children:[Object(W.jsx)(Ld,{isOpen:z,ticket:e,searchQuery:K,toggleRef:C,onItemClick:fe}),Object(W.jsx)(hu,{ref:C,children:Object(W.jsx)(o.IconButton,{icon:"reply-template",size:"small",buttonType:"tertiary",title:b.formatMessage({id:"desk.conversation.input.button.quickReply"}),disabled:Object.values(U).every(e=>0===e),onClick:be,"data-test-id":"QuickReplyShortcutButton"})})]});return Object(W.jsxs)(W.Fragment,{children:[i,je?n:null,a]})})(),xe=Object(a.useMemo)(()=>"WHATSAPP_MESSAGE"===e.channelType?Object(W.jsxs)(Kd,{children:[Object(W.jsx)(Yd,{children:b.formatMessage({id:"desk.conversation.input.lbl.socialType.whatsapp"})}),Object(W.jsx)(Qd,{children:Object(W.jsx)(Jd,{children:b.formatMessage({id:"desk.conversation.input.lbl.replyWithWhatsApp"},{em:e=>Object(W.jsx)(ju,{_css:Object(o.cssVariables)("neutral-10"),children:e})})})})]}):Object(W.jsxs)(Kd,{children:[Object(W.jsx)(Yd,{children:me}),Object(W.jsxs)(Qd,{children:[Object(W.jsx)(Jd,{children:b.formatMessage({id:"desk.conversation.input.lbl.replyAs"})}),Object(W.jsx)(Xd,{children:Object(W.jsx)(Tl.a,{size:"small",profileID:he||"",imageUrl:ge||void 0})}),Object(W.jsx)(Jd,{children:he})]})]}),[he,ge,b,me,e.channelType]);return Object(W.jsxs)(Gd,{workingMessage:!!s,ref:_,children:[Object(W.jsx)(Ld,{isOpen:B,ticket:e,searchQuery:q.slice(1),onItemClick:te(e)}),xe,l.length>0&&Object(W.jsxs)(lu,{children:[Object(W.jsx)("div",{className:"Recipients__label",children:b.formatMessage({id:"desk.conversation.input.lbl.replyingTo"})}),Object(W.jsx)("div",{className:"Recipients__items",children:Object(W.jsxs)("div",{className:"Recipients__itemsMeasurer",ref:v,children:[l.slice(0,w).map(e=>Object(W.jsx)(cu,{children:e},e)),w<l.length&&Object(W.jsx)(cu,{children:b.formatMessage({id:"desk.conversation.input.recipients.more"},{nextRecipientsNumber:l.length-w})}),Object(W.jsx)("button",{type:"button",className:"Recipients__editButton",onClick:()=>{u&&u(l)},children:b.formatMessage({id:"desk.conversation.input.button.editRecipients"})})]})})]}),s&&Object(W.jsxs)(nu,{children:[Object(W.jsx)(ou,{icon:"close",size:"xsmall",buttonType:"tertiary",onClick:()=>{d()}}),Object(W.jsx)(au,{children:e.customer.displayName}),Object(W.jsx)(iu,{children:(()=>{if(!s)return null;if("FACEBOOK_FEED"===R){const{attachments:e,message:t}=s;let n="";if(e){const t=JSON.parse(e);switch(t.type){case"photo":n=Object(W.jsx)(su,{src:t.payload.url});break;case"video":n=Object(W.jsx)(ru,{children:Object(W.jsx)("video",{preload:"auto",muted:!0,src:t.payload.url,controls:!0})})}}return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{children:t}),n]})}if("TWITTER_STATUS"===R){const{text:e}=s;return Object(H.convertURLsAndEmailsToLinks)(e)}})()})]}),S.length>0&&Object(W.jsx)(du,{children:S.map(e=>{const{object:t,url:n,isUploading:a,isReading:i}=e,s=`${t.type}_${t.name}_${n}`,r=()=>{I(t=>t.filter(t=>t!==e))},o=(()=>{const e=i||a?"fetching":void 0;return"image/gif"===t.type.toLowerCase()?Object(W.jsx)(bo,{file:{type:"image",url:n||"",fetchStatus:e},frameSize:{width:"auto",height:116},borderRadius:8}):t.type.toLowerCase().startsWith("image")?Object(W.jsx)(bo,{file:{type:"image",url:n||"",fetchStatus:e},frameSize:{width:116,height:116},borderRadius:8}):t.type.toLowerCase().startsWith("video")?Object(W.jsx)(jo,{file:{type:"video",url:n||""},frameSize:{width:"auto",height:116},borderRadius:8}):void 0})();return o?Object(W.jsxs)(uu,{children:[o,Object(W.jsx)(pu,{buttonType:"secondary",size:"small",icon:"remove-filled",title:b.formatMessage({id:"desk.conversation.input.button.removeFile"}),onClick:r})]},s):null})}),Object(W.jsx)(gu,{isDisabled:!n}),Object(W.jsx)(Wd,{maxHeight:i,children:Object(W.jsx)(V.B,{dir:F,ref:Y,isStopDefaultKeyDownEvent:B,isEditable:!t,autoFocus:!1,onKeyUp:oe,onKeyDown:t=>{X(e,t)},onResize:g,onSubmit:e=>{(e.trim()||0!==S.length&&!S.some(e=>e.isUploading))&&(h(e,S.map(e=>e.twitterMediaId)),I([]))},placeholder:b.formatMessage({id:"desk.conversation.input.ph.message"}),styles:Object(r.css)(["word-wrap:break-word;white-space:pre-wrap;"])})}),Object(W.jsx)(Zd,{children:ve})]})}),Ou=r.default.div.withConfig({displayName:"typingIndicator__StyledTypingIndicator",componentId:"wa4233-0"})(["padding:2px 24px;height:","px;"],e=>e.isOthersTyping?24:0),vu=r.default.div.withConfig({displayName:"typingIndicator__TypingIndicatorContent",componentId:"wa4233-1"})([""]),xu=r.default.div.withConfig({displayName:"typingIndicator__TypingIndicatorMember",componentId:"wa4233-2"})(["display:inline-block;margin-left:6px;color:",";font-size:11px;"],Object(o.cssVariables)("neutral-6")),_u=r.default.div.withConfig({displayName:"typingIndicator__TypingIndicatorLabel",componentId:"wa4233-3"})(["display:inline-block;margin-left:4px;color:",";font-size:11px;"],Object(o.cssVariables)("neutral-6")),Cu=r.default.div.withConfig({displayName:"typingIndicator__TypingIcon",componentId:"wa4233-4"})(["display:inline-block;vertical-align:middle;position:relative;width:25px;height:12px;"]),ku=({typingStatus:e})=>{const t=Object(E.a)(),n=Object(a.useCallback)(()=>1===e.typingMembers.length?e.typingMembers[0].nickname:e.typingMembers.length>1&&e.typingMembers.length<=3?e.typingMembers.map(e=>e.nickname).join(", "):t.formatMessage({id:"label.others"}),[e]);return Object(W.jsx)(Ou,{isOthersTyping:e.othersTyping,children:e.othersTyping?Object(W.jsxs)(vu,{children:[Object(W.jsx)(Cu,{children:Object(W.jsx)(V.dc,{isFetching:!0,dotColor:Object(o.cssVariables)("neutral-6"),dotSize:{width:4,height:4}})}),Object(W.jsx)(xu,{children:n()}),Object(W.jsx)(_u,{children:Object(W.jsx)(ge.a,{id:"label.isTyping"})})]}):""})},wu=r.default.div.withConfig({displayName:"sendbird__MessagesWrapper",componentId:"sc-1vb8app-0"})(["position:relative;flex:1;min-height:0;"]),Tu=(e,t)=>{var n;return null==(n=e.getReadStatus()[t])?void 0:n.last_seen_at},Su=Object(a.forwardRef)(({ticket:e},t)=>{var n;const i=Object(b.f)(),{conversationTickets:s}=Object(a.useContext)(hd),{updateTickets:r,updateTicketsAssignment:l}=s,{typingStatus:c,agent:d,project:u,isConnected:p,isFetchingConversation:g}=Object(P.V)(e=>({typingStatus:e.conversation.typingStatus,agent:e.desk.agent,project:e.desk.project,isConnected:e.sendbird.isConnected,isFetchingConversation:e.conversation.isFetching})),[h,m]=Object(a.useState)(0),y=Object(a.useRef)(""),O=Object(a.useRef)(null),v=Object(a.useRef)(null),x=Object(a.useRef)(null),_=Object(a.useCallback)(()=>{var t;"AFTER_READ_MESSAGE"===u.markAsReadType&&(i(j.d.markAsReadRequest({ticketId:e.id,onSuccess:r})),null==(t=x.current)||t.markAsRead())},[i,u.markAsReadType,e.id,r]),C=(t,n)=>{"AFTER_SEND_MESSAGE"===u.markAsReadType&&(i(j.d.markAsReadRequest({ticketId:e.id,onSuccess:r})),t.markAsRead(),t.lastMessage=n)},[{isFetching:k,messages:w,initialOrNextFetchedTimestamp:T},{setGroupChannel:S,appendMessages:E,updateMessage:I,loadPreviousMessages:M}]=((e,t)=>{const[n,i]=Object(a.useState)(),{usePlatformAPI:s,onLoad:r}=t||{},[o,l]=Object(a.useReducer)(sd,id),c=Object(P.L)(r),d=Object(a.useRef)(),u=Object(P.L)(n),p=Object(P.c)(),g=so({ticket:e}),{url:h}=n||{};Object(a.useEffect)(()=>()=>{c.current=void 0},[c]),Object(a.useEffect)(()=>{if(!h||null==u.current||!s)return;(async()=>{l({type:"LOAD_MESSAGES_REQUEST"});try{const{data:{messages:e}}=await Object(N.fetchTicketMessages)({appId:p,channelUrl:h,params:{messageTs:Date.now(),prevLimit:50,nextLimit:0,presignedFileUrl:g}});l({type:"LOAD_MESSAGES_SUCCESS",payload:{messages:e}}),null==c.current||c.current(e)}catch(e){l({type:"LOAD_MESSAGES_FAIL",payload:{error:e}})}})()},[p,h,u,g,c,s]),Object(a.useEffect)(()=>{if(!h||null==u.current||s)return()=>{d.current=void 0};l({type:"LOAD_MESSAGES_REQUEST"});const e=u.current.createPreviousMessageListQuery();return e.limit=50,e.reverse=!1,d.current=e,e.load((e,t)=>{var n;h===(null==(n=u.current)?void 0:n.url)&&(t?l({type:"LOAD_MESSAGES_FAIL",payload:{error:t}}):(l({type:"LOAD_MESSAGES_SUCCESS",payload:{messages:e}}),null==c.current||c.current(e)))}),()=>{d.current=void 0}},[h,u,c,s]);const m=Object(a.useCallback)(({onBeforePrepend:e})=>{if(s&&h)return l({type:"LOAD_PREVIOUS_MESSAGES_REQUEST"}),void Object(N.fetchTicketMessages)({appId:p,channelUrl:h,params:{messageTs:o.messages[0].created_at,prevLimit:50,nextLimit:0,presignedFileUrl:g}}).then(({data:{messages:t}})=>{e(),l({type:"LOAD_PREVIOUS_MESSAGES_SUCCESS",payload:{messages:t}})}).catch(e=>{l({type:"LOAD_PREVIOUS_MESSAGES_FAIL",payload:{error:e}})});null!=d.current&&(l({type:"LOAD_PREVIOUS_MESSAGES_REQUEST"}),d.current.load((t,n)=>{n?l({type:"LOAD_PREVIOUS_MESSAGES_FAIL",payload:{error:n}}):(e(),l({type:"LOAD_PREVIOUS_MESSAGES_SUCCESS",payload:{messages:t}}))}))},[p,h,g,o.messages,s]),f=Object(a.useCallback)(e=>{l({type:"APPEND_MESSAGES",payload:{messages:e}})},[]),b=Object(a.useCallback)(e=>{l({type:"UPDATE_MESSAGE",payload:{message:e}})},[]),j=Object(a.useMemo)(()=>({appendMessages:f,updateMessage:b,loadPreviousMessages:m,setGroupChannel:i}),[f,m,b]);return[o,j]})(e,{usePlatformAPI:!0,onLoad:()=>{_()}});Object(a.useImperativeHandle)(t,()=>({appendMessages:E}),[E]);const D=Object(P.U)({messageCount:w.length,scrollTo:Object(a.useCallback)(e=>{O.current&&O.current.scrollTo(e)},[])}),A=Object(a.useCallback)(e=>{S(e),x.current=e||null},[S]),R=Object(a.useCallback)(()=>{window.dashboardSB.GroupChannel.getChannel(e.channelUrl,(t,n)=>{if(n)return void Object(H.logException)({error:n});A(t),m(Tu(t,e.customer.sendbirdId)||0);const a=new window.dashboardSB.ChannelHandler;a.onMessageReceived=(t,n)=>{t.isGroupChannel()&&t.url===e.channelUrl&&(E([n]),_())},a.onMessageUpdated=(t,n)=>{t.isGroupChannel()&&t.url===e.channelUrl&&I(n)},a.onReadReceiptUpdated=t=>{if(t.isGroupChannel()&&t.url===e.channelUrl){const n=t;A(n);const a=Tu(n,e.customer.sendbirdId);a&&m(a)}},a.onTypingStatusUpdated=t=>{if(t.isGroupChannel()&&t.url===e.channelUrl){const e=t.getTypingMembers();e.length>0?i(j.d.setOthersTypingStatus({othersTyping:!0,typingMembers:e})):i(j.d.setOthersTypingStatus({othersTyping:!1,typingMembers:e}))}},window.dashboardSB.addChannelHandler("CONVERSATION_CHANNEL_HANDLER",a)})},[e.channelUrl,e.customer.sendbirdId,A,E,_,I,i]);Object(a.useEffect)(()=>(R(),()=>{A(void 0),window.dashboardSB.removeChannelHandler("CONVERSATION_CHANNEL_HANDLER")}),[R,e.channelUrl,A]);const L=Object(a.useCallback)(()=>{var e;null==(e=x.current)||e.startTyping()},[x]),F=Object(a.useCallback)(()=>{var e;null==(e=x.current)||e.endTyping()},[x]),U=()=>{var t,n;"NOT_RESPONSED"!==(null==(t=e.recentAssignment)?void 0:t.status)&&"IDLE"!==(null==(n=e.recentAssignment)?void 0:n.status)||i(j.d.updateConversationTicketAssignmentRequest({assignmentId:e.recentAssignment.id,payload:{status:"RESPONSED"},onSuccess:t=>{i(j.d.fetchConversationRequest({ticketId:e.id})),l({assignment:t})}}))},$=e=>{const t=e.trim();var n;""!==t&&(n=t,x.current&&x.current.sendUserMessage(n,(e,t)=>{if(90060===(null==t?void 0:t.code))return void o.toast.warning({message:t.message});F(),E([e]),C(x.current,e);const a=n.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").match(f.nc);a&&i(j.d.fetchURLPreviewRequest({url:a[0],onSuccess:t=>{var a;const i={type:"SENDBIRD_DESK_URL_PREVIEW",body:{url:t.url,site_name:t.siteName,title:t.title,description:t.description,image:t.image}};null==(a=x.current)||a.updateUserMessage(e.messageId,n,JSON.stringify(i),"SENDBIRD_DESK_RICH_MESSAGE",e=>{I(e)})}}))}),U())},B=Object(a.useCallback)(e=>{i(j.d.setAgentTypingStatus(e))},[i]),z=Object(a.useCallback)(e=>{const t=w.find(t=>t.message_id===e);t&&I({...t,is_removed:!0})},[w,I]),q="SENDBIRD"===e.channelType||"SENDBIRD_JAVASCRIPT"===e.channelType||"SENDBIRD_IOS"===e.channelType||"SENDBIRD_ANDROID"===e.channelType,G=(e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE)&&(null==(n=e.recentAssignment)?void 0:n.agent.id)===d.id;return Object(W.jsxs)(Mo.Provider,{value:v.current||void 0,children:[k&&Object(W.jsx)(V.cc,{transparent:!0}),Object(W.jsx)(wu,{ref:v,"data-test-id":"MessagesWrapper",children:q&&Object(W.jsx)(tc,{ref:O,lastSeenByCustomerAt:h,ticket:e,messagesMode:f.Q.SENDBIRD,messages:w,initialOrNextFetchedTimestamp:T||void 0,fetchMessagesPrev:()=>{M({onBeforePrepend:()=>{var e;D((null==(e=O.current)?void 0:e.findFirstMessageNode())||null)}})},onDeleteMessage:z})}),Object(W.jsx)(ku,{typingStatus:c}),G&&Object(W.jsx)(qd,{currentTicket:e,isDisabled:!p||g,maxHeight:qi.INPUT_MAX_HEIGHT,onKeyUp:(e,t)=>{var n;(e=>{e.length>0&&e!==y.current&&L(),0===e.length&&y.current&&F()})(t),n=t,y.current=n},onSubmit:$,onFileChange:async e=>{var t;e.persist();const n=null==(t=e.target.files)?void 0:t[0];if(n&&x.current){const t=new window.dashboardSB.FileMessageParams;t.file=n,t.thumbnailSizes=f.T;const a=/^image.*/;let i=null;if(n.type.match(a))try{i=await(e=>new Promise((t,n)=>{const a=new Image,i=new FileReader;a.onload=()=>{t({width:a.width,height:a.height})},i.onloadend=()=>{i.result?a.src=i.result:n("FileReader can't read image correctly")},i.readAsDataURL(e)}))(n)}catch(e){Object(H.logException)({error:e})}i&&(t.data=JSON.stringify({originalImageDimension:i})),e.target.value="",x.current.sendFileMessage(t,(e,t)=>{t?o.toast.warning({message:t.message}):(E([e]),x.current&&(C(x.current,e),x.current.lastMessage=e),U())})}},sendMessage:$,setAgentTyping:B,agentTyping:c.agentTyping})]})});var Eu=n("mVx/"),Iu=n.n(Eu);const Mu={showDialogsRequest:j.b.showDialogsRequest,showImagePreviewRequest:j.b.showImagePreviewRequest,fetchFacebookMessagesRequest:j.d.fetchFacebookMessagesRequest,sendFacebookMessageRequest:j.d.sendFacebookMessageRequest,updateConversationTicketAssignmentRequest:j.d.updateConversationTicketAssignmentRequest,fetchFacebookFeedsRequest:j.d.fetchFacebookFeedsRequest,createFacebookFeedRequest:j.d.createFacebookFeedRequest,editFacebookFeedRequest:j.d.editFacebookFeedRequest,deleteFacebookFeedRequest:j.d.deleteFacebookFeedRequest,facebookFeedLikeRequest:j.d.facebookFeedLikeRequest,facebookFeedUnlikeRequest:j.d.facebookFeedUnlikeRequest,markAsReadRequest:j.d.markAsReadRequest,fetchTwitterDirectMessages:j.d.fetchTwitterDirectMessagesRequest,createTwitterDirectMessageEvent:j.d.createTwitterDirectMessageRequest,deleteTwitterDirectMessageEventRequest:j.d.deleteTwitterDirectMessageEventRequest,fetchTwitterStatuses:j.d.fetchTwitterStatusesRequest,createTwitterStatus:j.d.createTwitterStatusRequest,fetchInstagramCommentsRequest:j.d.fetchInstagramCommentsRequest,createInstagramCommentRequest:j.d.createInstagramCommentRequest,deleteInstagramCommentRequest:j.d.deleteInstagramCommentRequest,fetchWhatsAppMessagesRequest:j.d.fetchWhatsAppMessagesRequest,createWhatsAppMessageRequest:j.d.createWhatsAppMessageRequest,fetchConversationRequest:j.d.fetchConversationRequest},Du=(e,t)=>{switch(t.type){case"SET_FACEBOOK_FEED_WORKING_MESSAGE":return{workingMessage:t.payload.workingMessage};case"CLEAR_FACEBOOK_FEED_WORKING_MESSAGE":return{};case"SET_TWITTER_STATUS_WORKING_MESSAGE":return{workingMessage:t.payload.workingMessage,recipients:t.payload.recipients};case"CLEAR_TWITTER_STATUS_WORKING_MESSAGE":return{recipients:t.payload.recipients};case"UPDATE_TWITTER_STATUS_RECIPIENTS":return xs()(t.payload.recipients,e.recipients)?e:{recipients:t.payload.recipients};default:return e}},Au=r.default.div.withConfig({displayName:"social__MessagesWrapper",componentId:"oih8ng-0"})(["position:relative;flex:1;min-height:0;"]),Nu=r.default.div.withConfig({displayName:"social__PreviewBackground",componentId:"oih8ng-1"})(["position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,0.4);z-index:",";"],Ha.b.previewBackground),Ru=Object(b.d)(e=>({isFetchingConversation:e.conversation.isFetching,isFetchingMessages:e.conversation.isFetchingMessages,initialOrNextFetchedTimestamp:e.conversation.initialOrNextFetchedTimestamp,facebookMessages:Object(Ua.k)(e.conversation),facebookFeeds:Object(Ua.j)(e.conversation),twitterDirectMessages:Object(Ua.o)(e.conversation),twitterStatuses:Object(Ua.p)(e),instagramComments:Object(Ua.l)(e.conversation),whatsAppMessages:e.conversation.whatsAppMessages,customerTwitterUser:e.twitter.twitterUser,agent:e.desk.agent,project:e.desk.project}),Mu)(({agent:e,createFacebookFeedRequest:t,createTwitterDirectMessageEvent:n,createTwitterStatus:i,customerTwitterUser:s,deleteFacebookFeedRequest:r,deleteTwitterDirectMessageEventRequest:o,editFacebookFeedRequest:l,facebookFeedLikeRequest:c,facebookFeedUnlikeRequest:d,facebookFeeds:u,facebookMessages:p,fetchConversationRequest:g,fetchFacebookFeedsRequest:h,fetchFacebookMessagesRequest:m,fetchTwitterDirectMessages:b,fetchTwitterStatuses:j,fetchInstagramCommentsRequest:y,createInstagramCommentRequest:O,deleteInstagramCommentRequest:v,fetchWhatsAppMessagesRequest:x,createWhatsAppMessageRequest:_,isFetchingConversation:C,isFetchingMessages:k,markAsReadRequest:w,project:T,sendFacebookMessageRequest:S,showDialogsRequest:I,ticket:M,twitterDirectMessages:D,twitterStatuses:N,instagramComments:R,updateConversationTicketAssignmentRequest:L,initialOrNextFetchedTimestamp:F,whatsAppMessages:U})=>{const $=Object(E.a)(),B=Object(a.useRef)(null),z=Object(a.useRef)(null),[{workingMessage:G,recipients:K},Y]=Object(a.useReducer)(Du,{}),{id:Q,channelType:J}=M,{conversationTickets:X}=Object(a.useContext)(hd),{updateTickets:Z,updateTicketsAssignment:ee}=X,te=(()=>{switch(J){case"FACEBOOK_CONVERSATION":return p;case"FACEBOOK_FEED":return u;case"TWITTER_DIRECT_MESSAGE_EVENT":return D;case"TWITTER_STATUS":return N;case"INSTAGRAM_COMMENT":return R;case"WHATSAPP_MESSAGE":return U;default:return[]}})(),ne=Object(P.U)({messageCount:te.length,scrollTo:Object(a.useCallback)(e=>{z.current&&z.current.scrollTo(e)},[])}),ae=Object(a.useCallback)(()=>{switch(J){case"FACEBOOK_CONVERSATION":m({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now(),initial:!0});break;case"FACEBOOK_FEED":h({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now(),initial:!0});break;case"TWITTER_DIRECT_MESSAGE_EVENT":b({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now(),initial:!0});break;case"TWITTER_STATUS":j({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now(),initial:!0});break;case"INSTAGRAM_COMMENT":y({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now(),initial:!0});break;case"WHATSAPP_MESSAGE":x({types:"initial",ticketId:Q,prevLimit:50,ts:Date.now()})}"AFTER_READ_MESSAGE"===T.markAsReadType&&w({ticketId:Q,onSuccess:Z})},[J,T.markAsReadType,m,Q,h,b,j,w]),ie=Object(a.useCallback)(()=>{if(N&&"TWITTER_STATUS"===J){const e=N.length>0?Iu()(N,e=>"social"===e.messageType):void 0,t=e&&e.defaultRecipients;Y({type:"CLEAR_TWITTER_STATUS_WORKING_MESSAGE",payload:{recipients:t}})}else Y({type:"CLEAR_FACEBOOK_FEED_WORKING_MESSAGE"})},[J,N]);Object(a.useEffect)(()=>{ae()},[Q,ae]);const se=N[N.length-1];Object(a.useEffect)(()=>{G||ie()},[se,G,ie]);const re=Object(a.useRef)({isFetching:C||k,facebookMessages:p,facebookFeeds:u,twitterDirectMessages:D,twitterStatuses:N,instagramComments:R,whatsAppMessages:U});Object(a.useEffect)(()=>{re.current={isFetching:C||k,facebookMessages:p,facebookFeeds:u,twitterDirectMessages:D,twitterStatuses:N,instagramComments:R,whatsAppMessages:U}},[u,p,C,k,D,N,R,U]);const oe=()=>{ie()};return Object(W.jsxs)(Mo.Provider,{value:B.current||void 0,children:[!La()(G)&&Object(W.jsx)(Nu,{onClick:oe}),k?Object(W.jsx)(V.cc,{transparent:!0}):"",Object(W.jsx)(Au,{ref:B,children:Object(W.jsx)(Cc,{ref:z,ticket:M,messages:te,initialOrNextFetchedTimestamp:F,fetchMessagesPrev:()=>{const{isFetching:e,facebookMessages:t,facebookFeeds:n,twitterDirectMessages:a,twitterStatuses:i,instagramComments:s,whatsAppMessages:r}=re.current;if(!e)switch(ne(z.current&&z.current.findFirstMessageNode()),J){case"FACEBOOK_CONVERSATION":m({types:"prev",ticketId:Q,prevLimit:50,nextLimit:0,ts:t.length>0?t[0].timestamp:0});break;case"FACEBOOK_FEED":h({types:"prev",ticketId:Q,ts:n.length>0?n[0].timestamp:0,prevLimit:50,nextLimit:0});break;case"TWITTER_DIRECT_MESSAGE_EVENT":b({types:"prev",ticketId:Q,ts:a.length>0?a[0].timestamp:0,prevLimit:50,nextLimit:0});break;case"TWITTER_STATUS":j({types:"prev",ticketId:Q,ts:i.length>0?i[0].timestamp:0,prevLimit:50,nextLimit:0});break;case"INSTAGRAM_COMMENT":y({types:"prev",ticketId:Q,ts:s.length>0?s[0].instagramComment.timestamp:0,prevLimit:50,nextLimit:0});break;case"WHATSAPP_MESSAGE":x({types:"prev",ticketId:Q,ts:r.length>0?r[0].timestamp:0,prevLimit:50,nextLimit:0})}},handleFeedAction:({message:e,action:t})=>{const{facebookPage:n,twitterUser:a,instagramUser:i,channelType:s}=M;if(n){const n=e,{feedId:a}=n;switch(t){case"REPLY":Y({type:"SET_FACEBOOK_FEED_WORKING_MESSAGE",payload:{workingMessage:n}});break;case"LIKE":c({ticketId:Q,feed:n});break;case"UNLIKE":d({ticketId:Q,feed:n});break;case"HIDE":l({ticketId:Q,feedId:a,isHidden:!0});break;case"UNHIDE":l({ticketId:Q,feedId:a,isHidden:!1});break;case"REMOVE":I({dialogTypes:A.a.Delete,dialogProps:{title:$.formatMessage({id:"desk.conversation.facebook.dialog.delete.title"}),description:$.formatMessage({id:"desk.conversation.facebook.dialog.delete.desc"}),confirmText:$.formatMessage({id:"desk.conversation.facebook.dialog.delete.confirm"}),cancelText:$.formatMessage({id:"desk.conversation.facebook.dialog.delete.cancel"}),onDelete:()=>{r({ticketId:Q,feed:n})}}});break;default:return}}else{if(a&&"TWITTER_DIRECT_MESSAGE_EVENT"===s)switch(t){case"DELETE":I({dialogTypes:A.a.Delete,dialogProps:{title:"Delete Twitter message",description:"Are you sure you want to delete this message?",confirmText:"Delete",onDelete:()=>{o({id:e.id})}}});break;default:return}if(a&&"TWITTER_STATUS"===s){const n=e;switch(t){case"REPLY":Y({type:"SET_TWITTER_STATUS_WORKING_MESSAGE",payload:{workingMessage:n,recipients:n.defaultRecipients}});break;default:return}}if(i&&"INSTAGRAM_COMMENT"===s)switch(t){case"DELETE":{const t=e;I({dialogTypes:A.a.Delete,dialogProps:{title:"Delete Instagram comment",description:"Are you sure you want to delete this comment?",confirmText:"Delete",onDelete:()=>{v({ticketId:Q,instagramCommentId:t.instagramComment.id})}}});break}default:return}}}})}),(M.status2===f.jc.ACTIVE||M.status2===f.jc.IDLE)&&M.recentAssignment&&M.recentAssignment&&M.recentAssignment.agent.id===e.id?Object(W.jsx)(yu,{ticket:M,maxHeight:300,workingMessage:G,clearWorkingMessage:oe,recipients:K,allowedFileExtensions:"WHATSAPP_MESSAGE"===M.channelType?"":"image/*,video/*",onSubmit:(e,a)=>{var s,r;const o=M.customer.sendbirdId.split("//")[1],l=e.trim();if(l||0!==a.length){switch(J){case"FACEBOOK_CONVERSATION":S({ticketId:Q,recipientId:o,messageText:l,filedata:a.length>0?a[0]:void 0,facebookPageId:M.facebookPage.pageId});break;case"FACEBOOK_FEED":{let e;try{e=JSON.parse(M.data)}catch(e){Object(q.a)({error:e,context:{data:M.data}})}const n=M.facebookPage.pageId.toString();t({ticketId:Q,fromId:n,payload:{parentFeedId:(()=>{if(G)return G.feedId;const t=u.filter(e=>e.fromId===o);if(t.length>0){const n=t[t.length-1];return n.parentId!==e.social.postId?n.parentId:n.feedId}return e.social.postId})(),messageText:l,filedata:a.length>0?a[0]:void 0}}),ie();break}case"TWITTER_DIRECT_MESSAGE_EVENT":n({ticket:M,recipientId:o,messageText:l,mediaId:a.length>0?a[0]:void 0});break;case"TWITTER_STATUS":{let e=G;e||(e=Iu()(N,e=>"social"===e.messageType)),i({ticket:M,recipientId:o,messageText:[...K||[],l.trim()].join(" "),inReplyToStatusId:e?e.statusId:void 0,mediaIds:a.length>0?a:void 0}),ie();break}case"INSTAGRAM_COMMENT":O({ticket:M,igMediaId:JSON.parse(M.data).social.source.ig_media_id,text:l,instagramUsername:M.instagramUser.username});break;case"WHATSAPP_MESSAGE":_({ticketId:M.id,toNumber:M.customer.displayName.substring(1),messageText:l,filedata:a[0]})}"NOT_RESPONSED"!==(null==(s=M.recentAssignment)?void 0:s.status)&&"IDLE"!==(null==(r=M.recentAssignment)?void 0:r.status)||L({assignmentId:M.recentAssignment.id,payload:{status:"RESPONSED"},onSuccess:e=>{g({ticketId:Q}),ee({assignment:e})}}),M&&"AFTER_SEND_MESSAGE"===T.markAsReadType&&w({ticketId:Q,onSuccess:Z})}},onEditRecipientsButtonClick:()=>{if(!M.twitterUser||!s)return;const e=G||(N.length>0?Iu()(N,e=>"social"===e.messageType):void 0);if(!e)return;const t=e,n=`@${s.screen_name}`,a=t.defaultRecipients.filter(e=>!Object(H.isEqualIgnoreCase)(e,n));I({dialogTypes:A.a.SelectTwitterStatusRecipients,dialogProps:{customerName:n,selectableRecipents:a,currentRecipients:K||[],onSubmit:e=>Y({type:"UPDATE_TWITTER_STATUS_RECIPIENTS",payload:{recipients:e}})}})}}):""]})});Ru.displayName="ChatSocial";var Pu=n("k8Y/"),Lu=n.n(Pu),Fu=n("17x9"),Uu=n.n(Fu),$u=n("aUsF"),Bu=["innerHTML","ownerDocument","style","attributes","nodeValue"],Vu=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],zu=["bigint","boolean","null","number","string","symbol","undefined"];function Hu(e){var t,n=Object.prototype.toString.call(e).slice(8,-1);return/HTML\w+Element/.test(n)?"HTMLElement":(t=n,Vu.includes(t)?n:void 0)}function qu(e){return function(t){return Hu(t)===e}}function Gu(e){return function(t){return typeof t===e}}function Wu(e){if(null===e)return"null";switch(typeof e){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Wu.array(e))return"Array";if(Wu.plainFunction(e))return"Function";var t=Hu(e);return t||"Object"}Wu.array=Array.isArray,Wu.arrayOf=function(e,t){return!(!Wu.array(e)&&!Wu.function(t))&&e.every((function(e){return t(e)}))},Wu.asyncGeneratorFunction=function(e){return"AsyncGeneratorFunction"===Hu(e)},Wu.asyncFunction=qu("AsyncFunction"),Wu.bigint=Gu("bigint"),Wu.boolean=function(e){return!0===e||!1===e},Wu.date=qu("Date"),Wu.defined=function(e){return!Wu.undefined(e)},Wu.domElement=function(e){return Wu.object(e)&&!Wu.plainObject(e)&&1===e.nodeType&&Wu.string(e.nodeName)&&Bu.every((function(t){return t in e}))},Wu.empty=function(e){return Wu.string(e)&&0===e.length||Wu.array(e)&&0===e.length||Wu.object(e)&&!Wu.map(e)&&!Wu.set(e)&&0===Object.keys(e).length||Wu.set(e)&&0===e.size||Wu.map(e)&&0===e.size},Wu.error=qu("Error"),Wu.function=Gu("function"),Wu.generator=function(e){return Wu.iterable(e)&&Wu.function(e.next)&&Wu.function(e.throw)},Wu.generatorFunction=qu("GeneratorFunction"),Wu.instanceOf=function(e,t){return!(!e||!t)&&Object.getPrototypeOf(e)===t.prototype},Wu.iterable=function(e){return!Wu.nullOrUndefined(e)&&Wu.function(e[Symbol.iterator])},Wu.map=qu("Map"),Wu.nan=function(e){return Number.isNaN(e)},Wu.null=function(e){return null===e},Wu.nullOrUndefined=function(e){return Wu.null(e)||Wu.undefined(e)},Wu.number=function(e){return Gu("number")(e)&&!Wu.nan(e)},Wu.numericString=function(e){return Wu.string(e)&&e.length>0&&!Number.isNaN(Number(e))},Wu.object=function(e){return!Wu.nullOrUndefined(e)&&(Wu.function(e)||"object"==typeof e)},Wu.oneOf=function(e,t){return!!Wu.array(e)&&e.indexOf(t)>-1},Wu.plainFunction=qu("Function"),Wu.plainObject=function(e){if("Object"!==Hu(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},Wu.primitive=function(e){return Wu.null(e)||(t=typeof e,zu.includes(t));var t},Wu.promise=qu("Promise"),Wu.propertyOf=function(e,t,n){if(!Wu.object(e)||!t)return!1;var a=e[t];return Wu.function(n)?n(a):Wu.defined(a)},Wu.regexp=qu("RegExp"),Wu.set=qu("Set"),Wu.string=Gu("string"),Wu.symbol=Gu("symbol"),Wu.undefined=Gu("undefined"),Wu.weakMap=qu("WeakMap"),Wu.weakSet=qu("WeakSet");var Ku=Wu;function Yu(e,t,n){var a=n.actual,i=n.key,s=n.previous,r=n.type,o=ap(e,i),l=ap(t,i),c=[o,l].every(Ku.number)&&("increased"===r?o<l:o>l);return Ku.undefined(a)||(c=c&&l===a),Ku.undefined(s)||(c=c&&o===s),c}function Qu(e,t,n){var a=n.key,i=n.type,s=n.value,r=ap(e,a),o=ap(t,a),l="added"===i?r:o,c="added"===i?o:r;return Ku.nullOrUndefined(s)?[r,o].every(Ku.array)?!c.every(tp(l)):[r,o].every(Ku.plainObject)?function(e,t){return t.some((function(t){return e.indexOf(t)<0}))}(Object.keys(l),Object.keys(c)):![r,o].every((function(e){return Ku.primitive(e)&&Ku.defined(e)}))&&("added"===i?!Ku.defined(r)&&Ku.defined(o):Ku.defined(r)&&!Ku.defined(o)):Ku.defined(l)?!(!Ku.array(l)&&!Ku.plainObject(l))&&function(e,t,n){return!!np(e,t)&&([e,t].every(Ku.array)?!e.some(Zu(n))&&t.some(Zu(n)):[e,t].every(Ku.plainObject)?!Object.entries(e).some(Xu(n))&&Object.entries(t).some(Xu(n)):t===n)}(l,c,s):$u(c,s)}function Ju(e,t,n){var a=(void 0===n?{}:n).key,i=ap(e,a),s=ap(t,a);if(!np(i,s))throw new TypeError("Inputs have different types");if(!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every((function(e){return Ku.string(e)||Ku.array(e)||Ku.plainObject(e)}))}(i,s))throw new TypeError("Inputs don't have length");return[i,s].every(Ku.plainObject)&&(i=Object.keys(i),s=Object.keys(s)),[i,s]}function Xu(e){return function(t){var n=t[0],a=t[1];return Ku.array(e)?$u(e,a)||e.some((function(e){return $u(e,a)||Ku.array(a)&&tp(a)(e)})):Ku.plainObject(e)&&e[n]?!!e[n]&&$u(e[n],a):$u(e,a)}}function Zu(e){return function(t){return Ku.array(e)?e.some((function(e){return $u(e,t)||Ku.array(t)&&tp(t)(e)})):$u(e,t)}}function ep(e,t){return Ku.array(e)?e.some((function(e){return $u(e,t)})):$u(e,t)}function tp(e){return function(t){return!!e.find((function(e){return $u(e,t)}))}}function np(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(Ku.array)||e.every(Ku.number)||e.every(Ku.plainObject)||e.every(Ku.string)}function ap(e,t){return Ku.plainObject(e)||Ku.array(e)?Ku.string(t)?t.split(".").reduce((function(e,t){return e&&e[t]}),e):Ku.number(t)?e[t]:e:e}function ip(e,t){if([e,t].some(Ku.nullOrUndefined))throw new Error("Missing required parameters");if(![e,t].every((function(e){return Ku.plainObject(e)||Ku.array(e)})))throw new Error("Expected plain objects or array");var n=function(n,a,i){try{var s=ap(e,n),r=ap(t,n),o=Ku.defined(a),l=Ku.defined(i);if(o||l){var c=l?ep(i,s):!ep(a,s),d=ep(a,r);return c&&d}return[s,r].every(Ku.array)||[s,r].every(Ku.plainObject)?!$u(s,r):s!==r}catch(e){return!1}};return{added:function(n,a){try{return Qu(e,t,{key:n,type:"added",value:a})}catch(e){return!1}},changed:n,changedFrom:function(n,a,i){if(!Ku.defined(n))return!1;try{var s=ap(e,n),r=ap(t,n),o=Ku.defined(i);return ep(a,s)&&(o?ep(i,r):!o)}catch(e){return!1}},changedTo:function(e,t){return!!Ku.defined(e)&&n(e,t)},decreased:function(n,a,i){if(!Ku.defined(n))return!1;try{return Yu(e,t,{key:n,actual:a,previous:i,type:"decreased"})}catch(e){return!1}},emptied:function(n){try{var a=Ju(e,t,{key:n}),i=a[0],s=a[1];return!!i.length&&!s.length}catch(e){return!1}},filled:function(n){try{var a=Ju(e,t,{key:n}),i=a[0],s=a[1];return!i.length&&!!s.length}catch(e){return!1}},increased:function(n,a,i){if(!Ku.defined(n))return!1;try{return Yu(e,t,{key:n,actual:a,previous:i,type:"increased"})}catch(e){return!1}},removed:function(n,a){try{return Qu(e,t,{key:n,type:"removed",value:a})}catch(e){return!1}}}}var sp=n("2rMq"),rp=n.n(sp),op=n("zELP"),lp=n.n(op),cp=n("7YPn"),dp=n.n(cp),up=n("TOwV"),pp=n("PE4B"),gp=n.n(pp),hp=n("5pjf");function mp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bp(e,t,n){return t&&fp(e.prototype,t),n&&fp(e,n),e}function jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yp(){return(yp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){jp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cp(e,t)}function _p(e){return(_p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kp(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tp(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?wp(e):t}function Sp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_p(e);if(t){var i=_p(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Tp(this,n)}}var Ep={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},Ip="tour:start",Mp="step:before",Dp="beacon",Ap="tooltip",Np="step:after",Rp="tour:end",Pp="tour:status",Lp="error:target_not_found",Fp={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},Up={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"},$p=rp.a.canUseDOM,Bp=void 0!==bn.createPortal;function Vp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,t=e;return"undefined"==typeof window?t="node":document.documentMode?t="ie":/Edge/.test(e)?t="edge":Boolean(window.opera)||e.indexOf(" OPR/")>=0?t="opera":void 0!==window.InstallTrigger?t="firefox":window.chrome?t="chrome":/(Version\/([0-9._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(t="safari"),t}function zp(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function Hp(e){var t=[];return function e(n){if("string"==typeof n||"number"==typeof n)t.push(n);else if(Array.isArray(n))n.forEach((function(t){return e(t)}));else if(n&&n.props){var a=n.props.children;Array.isArray(a)?a.forEach((function(t){return e(t)})):e(a)}}(e),t.join(" ").trim()}function qp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gp(e,t){return!(!Ku.plainObject(e)||!Ku.array(t))&&Object.keys(e).every((function(e){return-1!==t.indexOf(e)}))}function Wp(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return t+t+n+n+a+a})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function Kp(e){return e.disableBeacon||"center"===e.placement}function Yp(){return!(-1!==["chrome","safari","firefox","opera"].indexOf(Vp()))}function Qp(e){var t=e.title,n=e.data,a=e.warn,i=void 0!==a&&a,s=e.debug,r=void 0!==s&&s,o=i?console.warn||console.error:console.log;r&&(t&&n?(console.groupCollapsed("%creact-joyride: ".concat(t),"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(n)?n.forEach((function(e){Ku.plainObject(e)&&e.key?o.apply(console,[e.key,e.value]):o.apply(console,[e])})):o.apply(console,[n]),console.groupEnd()):console.error("Missing title or data props"))}var Jp={action:"",controlled:!1,index:0,lifecycle:Fp.INIT,size:0,status:Up.IDLE},Xp=["action","index","lifecycle","status"];function Zp(e){var t=new Map,n=new Map;return new(function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.continuous,s=void 0!==i&&i,r=a.stepIndex,o=a.steps,l=void 0===o?[]:o;mp(this,e),jp(this,"listener",void 0),jp(this,"setSteps",(function(e){var a=t.getState(),i=a.size,s=a.status,r={size:e.length,status:s};n.set("steps",e),s===Up.WAITING&&!i&&e.length&&(r.status=Up.RUNNING),t.setState(r)})),jp(this,"addListener",(function(e){t.listener=e})),jp(this,"update",(function(e){if(!Gp(e,Xp))throw new Error("State is not valid. Valid keys: ".concat(Xp.join(", ")));t.setState(vp({},t.getNextState(vp(vp(vp({},t.getState()),e),{},{action:e.action||Ep.UPDATE}),!0)))})),jp(this,"start",(function(e){var n=t.getState(),a=n.index,i=n.size;t.setState(vp(vp({},t.getNextState({action:Ep.START,index:Ku.number(e)?e:a},!0)),{},{status:i?Up.RUNNING:Up.WAITING}))})),jp(this,"stop",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getState(),a=n.index,i=n.status;-1===[Up.FINISHED,Up.SKIPPED].indexOf(i)&&t.setState(vp(vp({},t.getNextState({action:Ep.STOP,index:a+(e?1:0)})),{},{status:Up.PAUSED}))})),jp(this,"close",(function(){var e=t.getState(),n=e.index;e.status===Up.RUNNING&&t.setState(vp({},t.getNextState({action:Ep.CLOSE,index:n+1})))})),jp(this,"go",(function(e){var n=t.getState(),a=n.controlled,i=n.status;if(!a&&i===Up.RUNNING){var s=t.getSteps()[e];t.setState(vp(vp({},t.getNextState({action:Ep.GO,index:e})),{},{status:s?i:Up.FINISHED}))}})),jp(this,"info",(function(){return t.getState()})),jp(this,"next",(function(){var e=t.getState(),n=e.index;e.status===Up.RUNNING&&t.setState(t.getNextState({action:Ep.NEXT,index:n+1}))})),jp(this,"open",(function(){t.getState().status===Up.RUNNING&&t.setState(vp({},t.getNextState({action:Ep.UPDATE,lifecycle:Fp.TOOLTIP})))})),jp(this,"prev",(function(){var e=t.getState(),n=e.index;e.status===Up.RUNNING&&t.setState(vp({},t.getNextState({action:Ep.PREV,index:n-1})))})),jp(this,"reset",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getState(),a=n.controlled;a||t.setState(vp(vp({},t.getNextState({action:Ep.RESET,index:0})),{},{status:e?Up.RUNNING:Up.READY}))})),jp(this,"skip",(function(){t.getState().status===Up.RUNNING&&t.setState({action:Ep.SKIP,lifecycle:Fp.INIT,status:Up.SKIPPED})})),this.setState({action:Ep.INIT,controlled:Ku.number(r),continuous:s,index:Ku.number(r)?r:0,lifecycle:Fp.INIT,status:l.length?Up.READY:Up.IDLE},!0),this.setSteps(l)}return bp(e,[{key:"setState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getState(),i=vp(vp({},a),e),s=i.action,r=i.index,o=i.lifecycle,l=i.size,c=i.status;t.set("action",s),t.set("index",r),t.set("lifecycle",o),t.set("size",l),t.set("status",c),n&&(t.set("controlled",e.controlled),t.set("continuous",e.continuous)),this.listener&&this.hasUpdatedState(a)&&this.listener(this.getState())}},{key:"getState",value:function(){return t.size?{action:t.get("action")||"",controlled:t.get("controlled")||!1,index:parseInt(t.get("index"),10),lifecycle:t.get("lifecycle")||"",size:t.get("size")||0,status:t.get("status")||""}:vp({},Jp)}},{key:"getNextState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getState(),a=n.action,i=n.controlled,s=n.index,r=n.size,o=n.status,l=Ku.number(e.index)?e.index:s,c=i&&!t?s:Math.min(Math.max(l,0),r);return{action:e.action||a,controlled:i,index:c,lifecycle:e.lifecycle||Fp.INIT,size:e.size||r,status:c===r?Up.FINISHED:e.status||o}}},{key:"hasUpdatedState",value:function(e){return JSON.stringify(e)!==JSON.stringify(this.getState())}},{key:"getSteps",value:function(){var e=n.get("steps");return Array.isArray(e)?e:[]}},{key:"getHelpers",value:function(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}}]),e}())(e)}function eg(){return document.scrollingElement||document.createElement("body")}function tg(e){return e?e.getBoundingClientRect():{}}function ng(e){return"string"==typeof e?document.querySelector(e):e}function ag(e){return e&&1===e.nodeType?getComputedStyle(e):{}}function ig(e,t,n){var a=dp()(e);return a.isSameNode(eg())?n?document:eg():a.scrollHeight>a.offsetHeight||t?a:(a.style.overflow="initial",eg())}function sg(e,t){return!!e&&!ig(e,t).isSameNode(eg())}function rg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fixed";if(!(e&&e instanceof HTMLElement))return!1;var n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&(ag(e).position===t||rg(e.parentNode,t))}function og(e){return e instanceof HTMLElement?e.offsetParent instanceof HTMLElement?og(e.offsetParent)+e.offsetTop:e.offsetTop:0}function lg(e,t,n){if(!e)return 0;var a=dp()(e),i=og(e);return sg(e,n)&&!function(e){return e.offsetParent!==document.body}(e)&&(i-=og(a)),Math.floor(i-t)}!function(e){function t(t,n,a,i,s,r){var o=i||"<<anonymous>>",l=r||a;if(null==n[a])return t?new Error("Required ".concat(s," `").concat(l,"` was not specified in `").concat(o,"`.")):null;for(var c=arguments.length,d=new Array(c>6?c-6:0),u=6;u<c;u++)d[u-6]=arguments[u];return e.apply(void 0,[n,a,o,s,l].concat(d))}var n=t.bind(null,!1);n.isRequired=t.bind(null,!0)}((function(e,t,n,a,s){var r=e[t],o=r;if(!i.a.isValidElement(r)&&Object(up.isValidElementType)(r)){var l={ref:function(){},step:{}};o=i.a.createElement(o,l)}if(Ku.string(r)||Ku.number(r)||!Object(up.isValidElementType)(r)||-1===[up.Element,up.ForwardRef].indexOf(Object(up.typeOf)(o)))return new Error("Invalid ".concat(a," `").concat(s,"` supplied to `").concat(n,"`. Expected a React class or forwardRef."))}));var cg={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",zIndex:100},dg={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},ug={borderRadius:4,position:"absolute"};var pg={floaterProps:{options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},locale:{back:"Back",close:"Close",last:"Last",next:"Next",open:"Open the dialog",skip:"Skip"},step:{event:"click",placement:"bottom",offset:10}};function gg(e){var t=["beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent"];return Object.keys(e).filter((function(e){return-1!==t.indexOf(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}function hg(e,t){if(!e)return null;var n=gp.a.all([gg(t),pg.step,e],{isMergeableObject:Ku.plainObject}),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=gp()(cg,e.options||{}),n=290;window.innerWidth>480&&(n=380),t.width&&(n=window.innerWidth<t.width?window.innerWidth-30:t.width);var a={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:t.zIndex},i={beacon:vp(vp({},dg),{},{display:"inline-block",height:t.beaconSize,position:"relative",width:t.beaconSize,zIndex:t.zIndex}),beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:t.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:"rgba(".concat(Wp(t.primaryColor).join(","),", 0.2)"),border:"2px solid ".concat(t.primaryColor),borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:t.backgroundColor,borderRadius:5,boxSizing:"border-box",color:t.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:n},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:vp(vp({},dg),{},{backgroundColor:t.primaryColor,borderRadius:4,color:"#fff"}),buttonBack:vp(vp({},dg),{},{color:t.primaryColor,marginLeft:"auto",marginRight:5}),buttonClose:vp(vp({},dg),{},{color:t.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14}),buttonSkip:vp(vp({},dg),{},{color:t.textColor,fontSize:14}),overlay:vp(vp({},a),{},{backgroundColor:t.overlayColor,mixBlendMode:"hard-light"}),overlayLegacy:vp({},a),overlayLegacyCenter:vp(vp({},a),{},{backgroundColor:t.overlayColor}),spotlight:vp(vp({},ug),{},{backgroundColor:"gray"}),spotlightLegacy:vp(vp({},ug),{},{boxShadow:"0 0 0 9999px ".concat(t.overlayColor,", ").concat(t.spotlightShadow)}),floaterStyles:{arrow:{color:t.arrowColor},options:{zIndex:t.zIndex}},options:t};return gp()(i,e)}(gp()(t.styles||{},e.styles||{})),i=sg(ng(e.target),n.disableScrollParentFix),s=gp.a.all([t.floaterProps||{},pg.floaterProps,n.floaterProps||{}]);return s.offset=n.offset,s.styles=gp()(s.styles||{},a.floaterStyles||{}),delete a.floaterStyles,s.offset+=t.spotlightPadding||e.spotlightPadding||0,e.placementBeacon&&(s.wrapperOptions.placement=e.placementBeacon),i&&(s.options.preventOverflow.boundariesElement="window"),vp(vp({},n),{},{locale:gp.a.all([pg.locale,t.locale||{},n.locale||{}]),floaterProps:s,styles:a})}function mg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ku.plainObject(e)?!!e.target||(Qp({title:"validateStep",data:"target is missing from the step",warn:!0,debug:t}),!1):(Qp({title:"validateStep",data:"step must be an object",warn:!0,debug:t}),!1)}function fg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ku.array(e)?e.every((function(e){return mg(e,t)})):(Qp({title:"validateSteps",data:"steps must be an array",warn:!0,debug:t}),!1)}var bg=function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(mp(this,e),jp(this,"element",void 0),jp(this,"options",void 0),jp(this,"canBeTabbed",(function(e){var t=e.tabIndex;return(null===t||t<0)&&(t=void 0),!isNaN(t)&&n.canHaveFocus(e)})),jp(this,"canHaveFocus",(function(e){var t=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(t)&&!e.getAttribute("disabled")||"a"===t&&!!e.getAttribute("href"))&&n.isVisible(e)})),jp(this,"findValidTabElements",(function(){return[].slice.call(n.element.querySelectorAll("*"),0).filter(n.canBeTabbed)})),jp(this,"handleKeyDown",(function(e){var t=n.options.keyCode,a=void 0===t?9:t;e.keyCode===a&&n.interceptTab(e)})),jp(this,"interceptTab",(function(e){e.preventDefault();var t=n.findValidTabElements(),a=e.shiftKey;if(t.length){var i=t.indexOf(document.activeElement);-1===i||!a&&i+1===t.length?i=0:a&&0===i?i=t.length-1:i+=a?-1:1,t[i].focus()}})),jp(this,"isHidden",(function(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0,n=window.getComputedStyle(e);return!(!t||e.innerHTML)||(t&&"visible"!==n.getPropertyValue("overflow")||"none"===n.getPropertyValue("display"))})),jp(this,"isVisible",(function(e){for(var t=e;t;)if(t instanceof HTMLElement){if(t===document.body)break;if(n.isHidden(t))return!1;t=t.parentNode}return!0})),jp(this,"removeScope",(function(){window.removeEventListener("keydown",n.handleKeyDown)})),jp(this,"checkFocus",(function(e){document.activeElement!==e&&(e.focus(),window.requestAnimationFrame((function(){return n.checkFocus(e)})))})),jp(this,"setFocus",(function(){var e=n.options.selector;if(e){var t=n.element.querySelector(e);t&&window.requestAnimationFrame((function(){return n.checkFocus(t)}))}})),!(t instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=t,this.options=a,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()},jg=function(e){xp(n,e);var t=Sp(n);function n(e){var a;if(mp(this,n),jp(wp(a=t.call(this,e)),"setBeaconRef",(function(e){a.beacon=e})),!e.beaconComponent){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.id="joyride-beacon-animation",s.appendChild(document.createTextNode("\n        @keyframes joyride-beacon-inner {\n          20% {\n            opacity: 0.9;\n          }\n        \n          90% {\n            opacity: 0.7;\n          }\n        }\n        \n        @keyframes joyride-beacon-outer {\n          0% {\n            transform: scale(1);\n          }\n        \n          45% {\n            opacity: 0.7;\n            transform: scale(0.75);\n          }\n        \n          100% {\n            opacity: 0.9;\n            transform: scale(1);\n          }\n        }\n      ")),i.appendChild(s)}return a}return bp(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.shouldFocus;setTimeout((function(){Ku.domElement(e.beacon)&&t&&e.beacon.focus()}),0)}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("joyride-beacon-animation");e&&e.parentNode.removeChild(e)}},{key:"render",value:function(){var e,t=this.props,n=t.beaconComponent,a=t.locale,s=t.onClickOrHover,r=t.styles,o={"aria-label":a.open,onClick:s,onMouseEnter:s,ref:this.setBeaconRef,title:a.open};if(n){var l=n;e=i.a.createElement(l,o)}else e=i.a.createElement("button",yp({key:"JoyrideBeacon",className:"react-joyride__beacon",style:r.beacon,type:"button"},o),i.a.createElement("span",{style:r.beaconInner}),i.a.createElement("span",{style:r.beaconOuter}));return e}}]),n}(i.a.Component),yg=function(e){var t=e.styles;return i.a.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight",style:t})},Og=function(e){xp(n,e);var t=Sp(n);function n(){var e;mp(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return jp(wp(e=t.call.apply(t,[this].concat(i))),"_isMounted",!1),jp(wp(e),"state",{mouseOverSpotlight:!1,isScrolling:!1,showSpotlight:!0}),jp(wp(e),"handleMouseMove",(function(t){var n=e.state.mouseOverSpotlight,a=e.spotlightStyles,i=a.height,s=a.left,r=a.position,o=a.top,l=a.width,c="fixed"===r?t.clientY:t.pageY,d="fixed"===r?t.clientX:t.pageX,u=d>=s&&d<=s+l&&(c>=o&&c<=o+i);u!==n&&e.updateState({mouseOverSpotlight:u})})),jp(wp(e),"handleScroll",(function(){var t=ng(e.props.target);e.scrollParent!==document?(e.state.isScrolling||e.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(e.scrollTimeout),e.scrollTimeout=setTimeout((function(){e.updateState({isScrolling:!1,showSpotlight:!0})}),50)):rg(t,"sticky")&&e.updateState({})})),jp(wp(e),"handleResize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){e._isMounted&&e.forceUpdate()}),100)})),e}return bp(n,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.debug,e.disableScrolling,e.disableScrollParentFix),n=ng(e.target);this.scrollParent=ig(n,t,!0),this._isMounted=!0,window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.lifecycle,i=n.spotlightClicks,s=ip(e,this.props).changed;s("lifecycle",Fp.TOOLTIP)&&(this.scrollParent.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout((function(){t.state.isScrolling||t.updateState({showSpotlight:!0})}),100)),(s("spotlightClicks")||s("disableOverlay")||s("lifecycle"))&&(i&&a===Fp.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):a!==Fp.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),this.scrollParent.removeEventListener("scroll",this.handleScroll)}},{key:"updateState",value:function(e){this._isMounted&&this.setState(e)}},{key:"render",value:function(){var e=this.state,t=e.mouseOverSpotlight,n=e.showSpotlight,a=this.props,s=a.disableOverlay,r=a.disableOverlayClose,o=a.lifecycle,l=a.onClickOverlay,c=a.placement,d=a.styles;if(s||o!==Fp.TOOLTIP)return null;var u=d.overlay;Yp()&&(u="center"===c?d.overlayLegacyCenter:d.overlayLegacy);var p,g,h,m=vp({cursor:r?"default":"pointer",height:(p=document,g=p.body,h=p.documentElement,g&&h?Math.max(g.scrollHeight,g.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight):0),pointerEvents:t?"none":"auto"},u),f="center"!==c&&n&&i.a.createElement(yg,{styles:this.spotlightStyles});if("safari"===Vp()){m.mixBlendMode,m.zIndex;var b=kp(m,["mixBlendMode","zIndex"]);f=i.a.createElement("div",{style:vp({},b)},f),delete m.backgroundColor}return i.a.createElement("div",{className:"react-joyride__overlay",style:m,onClick:l},f)}},{key:"spotlightStyles",get:function(){var e=this.state.showSpotlight,t=this.props,n=t.disableScrollParentFix,a=t.spotlightClicks,i=t.spotlightPadding,s=t.styles,r=ng(t.target),o=tg(r),l=rg(r),c=function(e,t,n){var a=tg(e),i=ig(e,n),s=sg(e,n),r=0;i instanceof HTMLElement&&(r=i.scrollTop);var o=a.top+(s||rg(e)?0:r);return Math.floor(o-t)}(r,i,n);return vp(vp({},Yp()?s.spotlightLegacy:s.spotlight),{},{height:Math.round(o.height+2*i),left:Math.round(o.left-i),opacity:e?1:0,pointerEvents:a?"none":"auto",position:l?"fixed":"absolute",top:c,transition:"opacity 0.2s",width:Math.round(o.width+2*i)})}}]),n}(i.a.Component),vg=function(e){var t=e.styles,n=kp(e,["styles"]),a=t.color,s=t.height,r=t.width,o=kp(t,["color","height","width"]);return i.a.createElement("button",yp({style:o,type:"button"},n),i.a.createElement("svg",{width:"number"==typeof r?"".concat(r,"px"):r,height:"number"==typeof s?"".concat(s,"px"):s,viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},i.a.createElement("g",null,i.a.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:a}))))},xg=function(e){xp(n,e);var t=Sp(n);function n(){return mp(this,n),t.apply(this,arguments)}return bp(n,[{key:"render",value:function(){var e=this.props,t=e.backProps,n=e.closeProps,a=e.continuous,s=e.index,r=e.isLastStep,o=e.primaryProps,l=e.size,c=e.skipProps,d=e.step,u=e.tooltipProps,p=d.content,g=d.hideBackButton,h=d.hideCloseButton,m=d.hideFooter,f=d.showProgress,b=d.showSkipButton,j=d.title,y=d.styles,O=d.locale,v=O.back,x=O.close,_=O.last,C=O.next,k=O.skip,w={primary:x};return a&&(w.primary=r?_:C,f&&(w.primary=i.a.createElement("span",null,w.primary," (",s+1,"/",l,")"))),b&&!r&&(w.skip=i.a.createElement("button",yp({style:y.buttonSkip,type:"button","aria-live":"off"},c),k)),!g&&s>0&&(w.back=i.a.createElement("button",yp({style:y.buttonBack,type:"button"},t),v)),w.close=!h&&i.a.createElement(vg,yp({styles:y.buttonClose},n)),i.a.createElement("div",yp({key:"JoyrideTooltip",className:"react-joyride__tooltip",style:y.tooltip},u),i.a.createElement("div",{style:y.tooltipContainer},j&&i.a.createElement("h4",{style:y.tooltipTitle,"aria-label":j},j),i.a.createElement("div",{style:y.tooltipContent},p)),!m&&i.a.createElement("div",{style:y.tooltipFooter},i.a.createElement("div",{style:y.tooltipFooterSpacer},w.skip),w.back,i.a.createElement("button",yp({style:y.buttonNext,type:"button"},o),w.primary)),w.close)}}]),n}(i.a.Component),_g=function(e){xp(n,e);var t=Sp(n);function n(){var e;mp(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return jp(wp(e=t.call.apply(t,[this].concat(i))),"handleClickBack",(function(t){t.preventDefault(),e.props.helpers.prev()})),jp(wp(e),"handleClickClose",(function(t){t.preventDefault(),e.props.helpers.close()})),jp(wp(e),"handleClickPrimary",(function(t){t.preventDefault();var n=e.props,a=n.continuous,i=n.helpers;a?i.next():i.close()})),jp(wp(e),"handleClickSkip",(function(t){t.preventDefault(),e.props.helpers.skip()})),jp(wp(e),"getElementsProps",(function(){var t=e.props,n=t.continuous,a=t.isLastStep,i=t.setTooltipRef,s=t.step,r=Hp(s.locale.back),o=Hp(s.locale.close),l=Hp(s.locale.last),c=Hp(s.locale.next),d=Hp(s.locale.skip),u=n?c:o;return a&&(u=l),{backProps:{"aria-label":r,"data-action":"back",onClick:e.handleClickBack,role:"button",title:r},closeProps:{"aria-label":o,"data-action":"close",onClick:e.handleClickClose,role:"button",title:o},primaryProps:{"aria-label":u,"data-action":"primary",onClick:e.handleClickPrimary,role:"button",title:u},skipProps:{"aria-label":d,"data-action":"skip",onClick:e.handleClickSkip,role:"button",title:d},tooltipProps:{"aria-modal":!0,ref:i,role:"alertdialog"}}})),e}return bp(n,[{key:"render",value:function(){var e,t=this.props,n=t.continuous,a=t.index,s=t.isLastStep,r=t.size,o=t.step,l=(o.beaconComponent,o.tooltipComponent),c=kp(o,["beaconComponent","tooltipComponent"]);if(l){var d=vp(vp({},this.getElementsProps()),{},{continuous:n,index:a,isLastStep:s,size:r,step:c}),u=l;e=i.a.createElement(u,d)}else e=i.a.createElement(xg,yp({},this.getElementsProps(),{continuous:n,index:a,isLastStep:s,size:r,step:o}));return e}}]),n}(i.a.Component),Cg=function(e){xp(n,e);var t=Sp(n);function n(e){var a;return mp(this,n),a=t.call(this,e),$p?(a.node=document.createElement("div"),e.id&&(a.node.id=e.id),document.body.appendChild(a.node),a):Tp(a)}return bp(n,[{key:"componentDidMount",value:function(){$p&&(Bp||this.renderReact15())}},{key:"componentDidUpdate",value:function(){$p&&(Bp||this.renderReact15())}},{key:"componentWillUnmount",value:function(){$p&&this.node&&(Bp||jn.a.unmountComponentAtNode(this.node),document.body.removeChild(this.node))}},{key:"renderReact15",value:function(){if(!$p)return null;var e=this.props.children;return jn.a.unstable_renderSubtreeIntoContainer(this,e,this.node),null}},{key:"renderReact16",value:function(){if(!$p||!Bp)return null;var e=this.props.children;return jn.a.createPortal(e,this.node)}},{key:"render",value:function(){return Bp?this.renderReact16():null}}]),n}(i.a.Component),kg=function(e){xp(n,e);var t=Sp(n);function n(){var e;mp(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return jp(wp(e=t.call.apply(t,[this].concat(i))),"scope",{removeScope:function(){}}),jp(wp(e),"handleClickHoverBeacon",(function(t){var n=e.props,a=n.step,i=n.update;"mouseenter"===t.type&&"hover"!==a.event||i({lifecycle:Fp.TOOLTIP})})),jp(wp(e),"handleClickOverlay",(function(){var t=e.props,n=t.helpers;t.step.disableOverlayClose||n.close()})),jp(wp(e),"setTooltipRef",(function(t){e.tooltip=t})),jp(wp(e),"setPopper",(function(t,n){var a=e.props,i=a.action,s=a.setPopper,r=a.update;"wrapper"===n?e.beaconPopper=t:e.tooltipPopper=t,s(t,n),e.beaconPopper&&e.tooltipPopper&&r({action:i===Ep.CLOSE?Ep.CLOSE:i,lifecycle:Fp.READY})})),e}return bp(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.debug,n=e.index;Qp({title:"step:".concat(n),data:[{key:"props",value:this.props}],debug:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.action,a=t.callback,i=t.continuous,s=t.controlled,r=t.debug,o=t.index,l=t.lifecycle,c=t.size,d=t.status,u=t.step,p=t.update,g=ip(e,this.props),h=g.changed,m=g.changedFrom,f={action:n,controlled:s,index:o,lifecycle:l,size:c,status:d},b=i&&n!==Ep.CLOSE&&(o>0||n===Ep.PREV),j=h("action")||h("index")||h("lifecycle")||h("status"),y=m("lifecycle",[Fp.TOOLTIP,Fp.INIT],Fp.INIT);if(h("action",[Ep.NEXT,Ep.PREV,Ep.SKIP,Ep.CLOSE])&&(y||s)&&a(vp(vp({},f),{},{index:e.index,lifecycle:Fp.COMPLETE,step:e.step,type:Np})),j&&u){var O=ng(u.target),v=!!O;v&&function(e){if(!e)return!1;for(var t=e;t&&t!==document.body;){if(t instanceof HTMLElement){var n=getComputedStyle(t),a=n.display,i=n.visibility;if("none"===a||"hidden"===i)return!1}t=t.parentNode}return!0}(O)?(m("status",Up.READY,Up.RUNNING)||m("lifecycle",Fp.INIT,Fp.READY))&&a(vp(vp({},f),{},{step:u,type:Mp})):(console.warn(v?"Target not visible":"Target not mounted",u),a(vp(vp({},f),{},{type:Lp,step:u})),s||p({index:o+(-1!==[Ep.PREV].indexOf(n)?-1:1)}))}m("lifecycle",Fp.INIT,Fp.READY)&&p({lifecycle:Kp(u)||b?Fp.TOOLTIP:Fp.BEACON}),h("index")&&Qp({title:"step:".concat(l),data:[{key:"props",value:this.props}],debug:r}),h("lifecycle",Fp.BEACON)&&a(vp(vp({},f),{},{step:u,type:Dp})),h("lifecycle",Fp.TOOLTIP)&&(a(vp(vp({},f),{},{step:u,type:Ap})),this.scope=new bg(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus()),m("lifecycle",[Fp.TOOLTIP,Fp.INIT],Fp.INIT)&&(this.scope.removeScope(),delete this.beaconPopper,delete this.tooltipPopper)}},{key:"componentWillUnmount",value:function(){this.scope.removeScope()}},{key:"render",value:function(){var e=this.props,t=e.continuous,n=e.debug,a=e.helpers,s=e.index,r=e.lifecycle,o=e.shouldScroll,l=e.size,c=e.step,d=ng(c.target);return mg(c)&&Ku.domElement(d)?i.a.createElement("div",{key:"JoyrideStep-".concat(s),className:"react-joyride__step"},i.a.createElement(Cg,{id:"react-joyride-portal"},i.a.createElement(Og,yp({},c,{debug:n,lifecycle:r,onClickOverlay:this.handleClickOverlay}))),i.a.createElement(hp.a,yp({component:i.a.createElement(_g,{continuous:t,helpers:a,index:s,isLastStep:s+1===l,setTooltipRef:this.setTooltipRef,size:l,step:c}),debug:n,getPopper:this.setPopper,id:"react-joyride-step-".concat(s),isPositioned:c.isFixed||rg(d),open:this.open,placement:c.placement,target:c.target},c.floaterProps),i.a.createElement(jg,{beaconComponent:c.beaconComponent,locale:c.locale,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:o,styles:c.styles}))):null}},{key:"open",get:function(){var e=this.props,t=e.step,n=e.lifecycle;return!(!Kp(t)&&n!==Fp.TOOLTIP)}}]),n}(i.a.Component),wg=function(e){xp(n,e);var t=Sp(n);function n(e){var a;return mp(this,n),jp(wp(a=t.call(this,e)),"initStore",(function(){var e=a.props,t=e.debug,n=e.getHelpers,i=e.run,s=e.stepIndex;a.store=new Zp(vp(vp({},a.props),{},{controlled:i&&Ku.number(s)})),a.helpers=a.store.getHelpers();var r=a.store.addListener;return Qp({title:"init",data:[{key:"props",value:a.props},{key:"state",value:a.state}],debug:t}),r(a.syncState),n(a.helpers),a.store.getState()})),jp(wp(a),"callback",(function(e){var t=a.props.callback;Ku.function(t)&&t(e)})),jp(wp(a),"handleKeyboard",(function(e){var t=a.state,n=t.index,i=t.lifecycle,s=a.props.steps[n],r=window.Event?e.which:e.keyCode;i===Fp.TOOLTIP&&27===r&&s&&!s.disableCloseOnEsc&&a.store.close()})),jp(wp(a),"syncState",(function(e){a.setState(e)})),jp(wp(a),"setPopper",(function(e,t){"wrapper"===t?a.beaconPopper=e:a.tooltipPopper=e})),jp(wp(a),"shouldScroll",(function(e,t,n,a,i,s,r){return!e&&(0!==t||n||a===Fp.TOOLTIP)&&"center"!==i.placement&&(!i.isFixed||!rg(s))&&r.lifecycle!==a&&-1!==[Fp.BEACON,Fp.TOOLTIP].indexOf(a)})),a.state=a.initStore(),a}return bp(n,[{key:"componentDidMount",value:function(){if($p){var e=this.props,t=e.disableCloseOnEsc,n=e.debug,a=e.run,i=e.steps,s=this.store.start;fg(i,n)&&a&&s(),t||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}}},{key:"componentDidUpdate",value:function(e,t){if($p){var n=this.state,i=n.action,s=n.controlled,r=n.index,o=n.lifecycle,l=n.status,c=this.props,d=c.debug,u=c.run,p=c.stepIndex,g=c.steps,h=e.steps,m=e.stepIndex,f=this.store,b=f.setSteps,j=f.reset,y=f.start,O=f.stop,v=f.update,x=ip(e,this.props).changed,_=ip(t,this.state),C=_.changed,k=_.changedFrom,w=hg(g[r],this.props),T=!function e(t,n){var i,s=Object(a.isValidElement)(t)||Object(a.isValidElement)(n),r=Ku.undefined(t)||Ku.undefined(n);if(zp(t)!==zp(n)||s||r)return!1;if(Ku.domElement(t))return t.isSameNode(n);if(Ku.number(t))return t===n;if(Ku.function(t))return t.toString()===n.toString();for(var o in t)if(qp(t,o)){if(void 0===t[o]||void 0===n[o])return!1;if(i=zp(t[o]),-1!==["object","array"].indexOf(i)&&e(t[o],n[o]))continue;if("function"===i&&e(t[o],n[o]))continue;if(t[o]!==n[o])return!1}for(var l in n)if(qp(n,l)&&void 0===t[l])return!1;return!0}(h,g),S=Ku.number(p)&&x("stepIndex"),E=ng(null==w?void 0:w.target);if(T&&(fg(g,d)?b(g):console.warn("Steps are not valid",g)),x("run")&&(u?y(p):O()),S){var I=m<p?Ep.NEXT:Ep.PREV;i===Ep.STOP&&(I=Ep.START),-1===[Up.FINISHED,Up.SKIPPED].indexOf(l)&&v({action:i===Ep.CLOSE?Ep.CLOSE:I,index:p,lifecycle:Fp.INIT})}s||l!==Up.RUNNING||0!==r||E||(this.store.update({index:r+1}),this.callback(vp(vp({},this.state),{},{type:Lp,step:w})));var M=vp(vp({},this.state),{},{index:r,step:w});if(C("action",[Ep.NEXT,Ep.PREV,Ep.SKIP,Ep.CLOSE])&&C("status",Up.PAUSED)){var D=hg(g[t.index],this.props);this.callback(vp(vp({},M),{},{index:t.index,lifecycle:Fp.COMPLETE,step:D,type:Np}))}if(C("status",[Up.FINISHED,Up.SKIPPED])){var A=hg(g[t.index],this.props);s||this.callback(vp(vp({},M),{},{index:t.index,lifecycle:Fp.COMPLETE,step:A,type:Np})),this.callback(vp(vp({},M),{},{type:Rp,step:A,index:t.index})),j()}else k("status",[Up.IDLE,Up.READY],Up.RUNNING)?this.callback(vp(vp({},M),{},{type:Ip})):(C("status")||C("action",Ep.RESET))&&this.callback(vp(vp({},M),{},{type:Pp}));w&&(this.scrollToStep(t),"center"===w.placement&&l===Up.RUNNING&&o===Fp.INIT&&this.store.update({lifecycle:Fp.READY}))}}},{key:"componentWillUnmount",value:function(){this.props.disableCloseOnEsc||document.body.removeEventListener("keydown",this.handleKeyboard)}},{key:"scrollToStep",value:function(e){var t=this.state,n=t.index,a=t.lifecycle,i=t.status,s=this.props,r=s.debug,o=s.disableScrolling,l=s.disableScrollParentFix,c=s.scrollToFirstStep,d=s.scrollOffset,u=s.scrollDuration,p=hg(s.steps[n],this.props);if(p){var g=ng(p.target),h=this.shouldScroll(o,n,c,a,p,g,e);if(i===Up.RUNNING&&h){var m=sg(g,l),f=ig(g,l),b=Math.floor(lg(g,d,l))||0;if(Qp({title:"scrollToStep",data:[{key:"index",value:n},{key:"lifecycle",value:a},{key:"status",value:i}],debug:r}),a===Fp.BEACON&&this.beaconPopper){var j=this.beaconPopper,y=j.placement,O=j.popper;-1!==["bottom"].indexOf(y)||m||(b=Math.floor(O.top-d))}else if(a===Fp.TOOLTIP&&this.tooltipPopper){var v=this.tooltipPopper,x=v.flipped,_=v.placement,C=v.popper;-1===["top","right","left"].indexOf(_)||x||m?b-=p.spotlightPadding:b=Math.floor(C.top-d)}b=b>=0?b:0,i===Up.RUNNING&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eg(),n=arguments.length>2?arguments[2]:void 0;new Promise((function(a,i){var s=t.scrollTop,r=e>s?e-s:s-e;lp.a.top(t,e,{duration:r<100?50:n},(function(e){return e&&"Element already at target scroll position"!==e.message?i(e):a()}))}))}(b,f,u)}}}},{key:"render",value:function(){if(!$p)return null;var e,t=this.state,n=t.index,a=t.status,s=this.props,r=s.continuous,o=s.debug,l=s.disableScrolling,c=s.scrollToFirstStep,d=hg(s.steps[n],this.props);return a===Up.RUNNING&&d&&(e=i.a.createElement(kg,yp({},this.state,{callback:this.callback,continuous:r,debug:o,setPopper:this.setPopper,helpers:this.helpers,shouldScroll:!l&&(0!==n||c),step:d,update:this.store.update}))),i.a.createElement("div",{className:"react-joyride"},e)}}]),n}(i.a.Component);jp(wg,"defaultProps",{continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:function(){},hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]});var Tg=wg;const Sg=r.default.div.withConfig({displayName:"Tour__StyledTour",componentId:"sc-1pkfu3y-0"})(["background:white;border-radius:4px;overflow:hidden;"]),Eg=r.default.h1.withConfig({displayName:"Tour__TourTitle",componentId:"sc-1pkfu3y-1"})(["",";display:flex;align-items:center;font-size:14px;margin:0 0 4px;div{margin-left:8px;}"],o.Headings["heading-01"]),Ig=r.default.h1.withConfig({displayName:"Tour__TourDialogTitle",componentId:"sc-1pkfu3y-2"})(["",";font-size:20;font-weight:600;margin:2px 0 0;"],o.Headings["heading-04"]),Mg=r.default.div.withConfig({displayName:"Tour__TourDialogContent",componentId:"sc-1pkfu3y-3"})(["margin-top:16px;padding-bottom:16px;",";"],o.Body["body-short-01"]),Dg=r.default.div.withConfig({displayName:"Tour__TourDialogClose",componentId:"sc-1pkfu3y-4"})(["position:absolute;top:16px;right:16px;cursor:pointer;"]),Ag=r.default.div.withConfig({displayName:"Tour__TourBody",componentId:"sc-1pkfu3y-5"})(["position:relative;padding:16px 24px;text-align:left;"]),Ng=r.default.div.withConfig({displayName:"Tour__TourContent",componentId:"sc-1pkfu3y-6"})(["",";strong{font-weight:600;}"],o.Body["body-short-01"]),Rg=r.default.div.withConfig({displayName:"Tour__TourActions",componentId:"sc-1pkfu3y-7"})(["margin-top:16px;display:flex;align-items:center;justify-content:space-between;a{font-size:14px;font-weight:600;&:hover{font-weight:600;}}"]),Pg=r.default.div.withConfig({displayName:"Tour__Spotlight",componentId:"sc-1pkfu3y-8"})(["width:48px;height:48px;border-radius:24px;background:rgba(47,186,159,1);z-index:999999;position:fixed;animation-name:",";animation-duration:1.9s;animation-iteration-count:infinite;animation-timing-function:ease-out;animation-fill-mode:both;"],()=>Object(r.keyframes)(["0%{opacity:0.5;transform:scale(0.7);}100%{opacity:0.05;transform:scale(1);}"])),Lg=r.default.img.withConfig({displayName:"Tour__TourImage",componentId:"sc-1pkfu3y-9"})(["border-bottom:1px solid ",";height:145px;"],Object(o.cssVariables)("neutral-3")),Fg=({index:e,size:t,step:n,customProps:a,skipProps:i,primaryProps:s,tooltipProps:r})=>{var l;const c=Object(E.a)(),{isDialog:d,cover:u,stageNumber:p}=a[e],g=a.filter(({stageNumber:e})=>e>0).length;return Object(W.jsx)(Sg,{...r,style:{width:d?480:320,...null==(l=n.styles)?void 0:l.tooltipContainer},children:d?Object(W.jsxs)(Ag,{children:[Object(W.jsx)(Dg,{...i,children:Object(W.jsx)(o.IconButton,{icon:"close",buttonType:"secondary",size:"small"})}),Object(W.jsx)(Ig,{children:n.title}),Object(W.jsx)(Mg,{children:n.content}),Object(W.jsxs)(Rg,{children:[e>=0&&Object(W.jsx)(o.Link,{...i,children:c.formatMessage({id:"common.onboarding.tour.button.noThanks"})}),e+1<=t&&Object(W.jsx)(o.Button,{buttonType:"primary",style:{width:104},...s,"data-action":"none",children:c.formatMessage({id:"common.onboarding.tour.button.start"})})]})]}):Object(W.jsxs)(W.Fragment,{children:[!!u&&Object(W.jsx)(Lg,{src:u.src,srcSet:u.srcSet,"data-test-id":"TourImage"}),Object(W.jsxs)(Ag,{children:[n.title&&Object(W.jsxs)(Eg,{children:[n.title," ",Object(W.jsx)(o.Lozenge,{variant:o.LozengeVariant.Light,color:"neutral",children:c.formatMessage({id:"common.onboarding.tour.lozenge.stepStage"},{current:p,max:g})})]}),Object(W.jsx)(Ng,{children:n.content}),Object(W.jsxs)(Rg,{style:e+1===t?{justifyContent:"flex-end"}:{},children:[e>=0&&t!==e+1&&Object(W.jsx)(o.Link,{...i,children:c.formatMessage({id:"common.onboarding.tour.button.skip"})}),e+1<t&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",style:{width:64},...s,"data-action":"none",children:c.formatMessage({id:"common.onboarding.tour.button.next"})}),e+1===t&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",style:{width:64},...s,"data-action":"none",children:c.formatMessage({id:"common.onboarding.tour.button.done"})})]})]})]})})},Ug={overlay:{mixBlendMode:"inherit",cursor:"arrow"},spotlight:{background:"transparent"}};var $g=({steps:e,onStepChange:t,onStepEnd:n})=>{var i,s,r,l;const[c,d]=Object(a.useState)(0),[u,p]=Object(a.useState)(!0),[g,h]=Object(a.useState)(),m=Object(a.useRef)(-1),f=Object(a.useMemo)(()=>{let t=1;return e.map(({isDialog:e,cover:n,spotlight:a})=>{var i,s;const r={cover:n||null,isDialog:e||!1,stageNumber:e?-1:t,spotlight:{offset:null!=(i=null==a?void 0:a.offset)?i:{x:0,y:0},isHidden:null!=(s=null==a?void 0:a.isHidden)&&s}};return e||t++,r})},[e]);Object(a.useEffect)(()=>{m.current!==c&&(null==t||t(c),m.current=c)},[c,t]);const b=null==(i=f[c])?void 0:i.spotlight,j=g?{top:g.y+g.height/2-24+(null!=(s=null==b?void 0:b.offset.y)?s:0),left:g.x+g.width/2-24+(null!=(r=null==b?void 0:b.offset.x)?r:0)}:{display:"none"},y=!(null!=b&&b.isHidden);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Tg,{steps:e.map(({isDialog:e,cover:t,spotlight:n,...a})=>({...a,styles:{...Ug,...a.styles}})),callback:t=>{const{index:a,status:i,type:s}=t;var r;s===Np?(d(a+1),e.length===a+1&&p(!1),e[a+1]&&e[a+1].target&&h(null==(r=document.querySelector(e[a+1].target))?void 0:r.getBoundingClientRect())):[Up.FINISHED,Up.SKIPPED].includes(i)&&(null==n||n(i),p(!1))},tooltipComponent:e=>Object(W.jsx)(Fg,{...e,customProps:f}),styles:{options:{overlayColor:null!=(l=e[c])&&l.isDialog?Object(o.cssColors)("bg-overlay-4"):"transparent",zIndex:999998}},floaterProps:{disableAnimation:!0,options:{preventOverflow:{enabled:!1}},styles:{arrow:{spread:16,length:8},floater:{filter:`drop-shadow(${Object(o.cssColors)("bg-overlay-2")} 0px 3px 5px) drop-shadow(${Object(o.cssColors)("bg-overlay-2")} 0px 4px 6px) drop-shadow(${Object(o.cssColors)("bg-overlay-3")} 0px 8px 11px)`}}},getHelpers:({go:e})=>{e(c)}}),y&&u&&Object(W.jsx)(Pg,{style:j})]})};const Bg=1e3*o.LeftNavigationBar.collapseAnimationDurationSecond,Vg="deskAgentOnboardingFinished",zg=()=>{const e=H.ClientStorage.get(Vg);try{if(!e)return{};const t=JSON.parse(e);return"object"==typeof t?t:{}}catch(e){return{}}},Hg={isFinished:e=>!!zg()[e],appendFinished:e=>{const t=zg();H.ClientStorage.set(Vg,JSON.stringify({...t,[e]:!0}))}},qg=()=>{const e=Object(s.k)(),t=Object(P.c)();return Object(a.useCallback)(()=>{e.push(`/${t}/desk/conversation`)},[t,e])},Gg=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentProfileConnectionContainer",componentId:"sc-9gnsuf-0"})(["display:flex;align-items:center;margin-left:-8px;width:100%;"]),Wg=r.default.div.withConfig({displayName:"AgentProfileConnection__ConnectionToggle",componentId:"sc-9gnsuf-1"})(["color:",";font-size:14px;display:flex;align-items:center;height:24px;padding:0 4px;transition:background 0.2s ",",border 0.2s ",";"],Object(o.cssVariables)("neutral-10"),o.transitionDefault,o.transitionDefault),Kg=r.default.div.withConfig({displayName:"AgentProfileConnection__ConnectionLabel",componentId:"sc-9gnsuf-2"})(["display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:6px;transition:background 0.15s ",";background:",";"],o.transitionDefault,e=>f.o[e.$connection]),Yg=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentContents",componentId:"sc-9gnsuf-3"})(["display:flex;align-items:center;padding:0 8px;min-width:196px;border-radius:4px;transition:",";&:hover{flex:1;}",";",";"],Object(o.transitions)({duration:.5,properties:["box-shadow"]}),({$isOnboarding:e})=>e&&Object(r.css)(["box-shadow:0 0 0 2px ",";"],Object(o.cssVariables)("purple-7")),({$isEditingDisplayName:e,$hasError:t})=>(e||t)&&Object(r.css)(["flex:1;"])),Qg=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentProfileThumbnail",componentId:"sc-9gnsuf-4"})(["position:relative;width:40px;height:40px;margin-right:12px;overflow:hidden;"]),Jg=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentProfileEditButton",componentId:"sc-9gnsuf-5"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;right:0;bottom:0;left:0;z-index:30;width:100%;height:100%;&::before{content:'';display:block;position:absolute;top:0;left:0;z-index:10;width:100%;height:100%;border-radius:20px;background:transparent;transition:",";}&:hover{","{opacity:1;}&::before{background:",";}}","{position:relative;z-index:10;opacity:0;transition:",";}input{display:block;position:absolute;top:0;left:0;z-index:30;width:100%;height:100%;opacity:0;cursor:pointer;}"],Object(o.transitions)({duration:.3,properties:["background"]}),o.Icon,Object(sr.rgba)(Object(o.cssColors)("neutral-7"),.6),o.Icon,Object(o.transitions)({duration:.3,properties:["opacity"]})),Xg=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentInfo",componentId:"sc-9gnsuf-6"})(["flex:1;max-width:calc(100% - 54px);transform:translateY(2px);"]),Zg=r.default.span.withConfig({displayName:"AgentProfileConnection__AgentDisplayNameText",componentId:"sc-9gnsuf-7"})(["display:inline-block;position:relative;z-index:30;font-size:14px;font-weight:500;line-height:1.43;color:",";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],Object(o.cssVariables)("neutral-10")),eh=r.default.input.withConfig({displayName:"AgentProfileConnection__AgentDisplayNameInput",componentId:"sc-9gnsuf-8"})(["position:absolute;top:-1px;left:-1px;z-index:10;padding:0 8px;width:105%;font-size:14px;font-weight:500;line-height:1.43;color:",";border:1px solid transparent;border-radius:4px;outline:0;opacity:",";transform:translateX(-8px);transition:",";background:white;",";&:focus{border-color:",";opacity:1;z-index:50;}"],Object(o.cssVariables)("neutral-10"),({$hasError:e})=>e?1:0,Object(o.transitions)({properties:["border","opacity","background"],duration:.3}),({$hasError:e,$isHover:t})=>t&&Object(r.css)(["border-color:",";opacity:1;z-index:50;"],e?Object(o.cssVariables)("red-5"):Object(o.cssVariables)("neutral-3")),({$hasError:e})=>e?Object(o.cssVariables)("red-5"):Object(o.cssVariables)("purple-7")),th=r.default.form.withConfig({displayName:"AgentProfileConnection__AgentInfoNameForm",componentId:"sc-9gnsuf-9"})(["display:flex;align-items:center;"]),nh=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentInfoConnection",componentId:"sc-9gnsuf-10"})(["margin-top:-3px;transform:translateX(-5px);"]),ah=r.default.div.withConfig({displayName:"AgentProfileConnection__AgentSetting",componentId:"sc-9gnsuf-11"})(["margin-left:auto;"]),ih=Object(r.default)(o.IconButton).withConfig({displayName:"AgentProfileConnection__AgentSettingButton",componentId:"sc-9gnsuf-12"})(["position:static;transform:translateX(8px);transition:",";",";"],Object(o.transitions)({duration:.5,properties:["box-shadow"]}),({$isOnboarding:e})=>e&&Object(r.css)(["box-shadow:0 0 0 2px ",";"],Object(o.cssVariables)("purple-7"))),sh={[f.d.ONLINE]:"ui.agentConnection.online",[f.d.AWAY]:"ui.agentConnection.away",[f.d.OFFLINE]:"ui.agentConnection.offline"};var rh=Object(r.default)(we.a).withConfig({displayName:"AgentProfileConnection___StyledAgentBadge",componentId:"sc-9gnsuf-13"})(["position:relative;z-index:30;"]);const oh=()=>{var e;(()=>{const{isCollapsed:e}=Object(a.useContext)(S.a);Object(a.useEffect)(()=>{const e=Date.now();window.requestAnimationFrame((function t(){window.dispatchEvent(new Event("resize")),Date.now()-e<=Bg&&window.requestAnimationFrame(t)}))},[e])})();const t=Object(E.a)(),n=Object(b.f)(),i=qg(),{pid:s,region:r}=Object(L.a)(),l=Object(P.W)(),c=Object(P.K)(),{project:d,currentAgent:u}=Object(P.V)(e=>({project:e.desk.project,currentAgent:e.desk.agent})),{getErrorMessage:p}=Object($.a)(),g=Object(a.useRef)(u.displayName),h=Object(a.useRef)(null),[m,y]=Object(a.useState)(!1),[O,v]=Object(a.useState)(!1),{isFinished:x,appendFinished:_}=Hg,[C,k]=Object(a.useState)(!x(u.id)),[w,T]=Object(a.useState)(0),{register:I,errors:M,reset:N,formState:R,handleSubmit:F}=Object(_i.d)({defaultValues:{displayName:u.displayName},mode:"onChange"}),{conversationTickets:U}=Object(a.useContext)(hd),{state:{counts:B},resetCurrentTickets:V}=U,[z,H]=Object(a.useState)(!1);Object(a.useEffect)(()=>{u.displayName===g.current?z||!h.current||g.current===h.current.value||N({displayName:g.current}):N({displayName:u.displayName})},[u.displayName,z,N]);const G=Object(a.useCallback)(async({displayName:e})=>{if(R.isDirty){const i=new FormData;i.append("displayName",e.trim());try{var a;const{data:e}=await D.g.updateAgentProfile(s,r,{agentId:u.id,payload:i});n(j.d.setDeskAgent(e)),g.current=e.displayName,null==(a=h.current)||a.blur(),o.toast.success({message:t.formatMessage({id:"desk.agentProfile.dialog.form.submit.toast.success"})})}catch(e){Object(q.a)(e),o.toast.error({message:p(e)})}finally{y(!1)}}},[u.id,n,R.isDirty,p,t,s,r]),K=Object(a.useCallback)(async e=>{var a;if(null!=(a=e.target)&&a.files){y(!0);try{const a=new FormData;a.append("profileFile",e.target.files[0]);const{data:i}=await D.g.updateAgentProfile(s,r,{agentId:u.id,payload:a});n(j.d.setDeskAgent(i)),o.toast.success({message:t.formatMessage({id:"desk.agentProfile.dialog.form.submit.toast.success"})})}catch(e){Object(q.a)(e),o.toast.error({message:p(e)})}finally{y(!1)}}},[u.id,n,p,t,s,r]),Y=Object(a.useCallback)(e=>{var t;switch(e.key){case"Escape":return void(null==(t=h.current)||t.blur());default:return}},[]),Q=Object(a.useCallback)(e=>{T(e)},[]),J=Object(a.useCallback)(()=>{_(u.id),k(!1)},[_,u.id]),X=Object(a.useCallback)(async()=>{l({dialogTypes:A.a.UpdateAgentProfile,dialogProps:{agentId:u.id}})},[u.id,l]),Z=Object(a.useCallback)(e=>{if(null==e)return;const a=async a=>{try{var l;const{data:c}=await D.g.updateAgentConnection(s,r,{agentId:u.id,connection:e,transferGroupId:null==a||null==(l=a.transferGroup)?void 0:l.id});c.connection===e&&(null!=a&&a.transferGroup?o.toast.success({message:t.formatMessage({id:"desk.agents.statusChange.transfer.success"},{teamName:a.transferGroup.name})}):o.toast.success({message:t.formatMessage({id:"desk.agents.statusChange.success"})}),e===f.d.OFFLINE&&(V(),i()),n(j.d.setAgentConnection(c.connection)))}catch(e){o.toast.error({message:p(e)})}};0!==B.active&&e!==f.d.ONLINE&&d.bulkTransferEnabled?l({dialogTypes:A.a.AgentConnectionStatusChange,dialogProps:{status:e,onSuccess:e=>{a({transferGroup:e})}}}):a()},[B.active,u.id,n,i,p,t,s,d.bulkTransferEnabled,r,V,l]),ee=!(null==(e=M.displayName)||!e.message);return Object(W.jsxs)(Gg,{"data-test-id":"AgentProfileConnection",children:[C&&Object(W.jsx)($g,{steps:[{title:t.formatMessage({id:"desk.conversation.agentProfile.tour.step1.title"}),content:t.formatMessage({id:"desk.conversation.agentProfile.tour.step1.content"}),placement:"top-start",target:"#quickEdit",offset:0,disableBeacon:!0,disableOverlay:!0,disableOverlayClose:!0,floaterProps:{options:{offset:{offset:"-22, 6"}}},styles:{tooltipContainer:{width:336}},spotlight:{isHidden:!0}},{title:t.formatMessage({id:"desk.conversation.agentProfile.tour.step2.title"}),content:t.formatMessage({id:"desk.conversation.agentProfile.tour.step2.content"}),placement:"top-end",target:"#agentProfileSetting",disableBeacon:!0,disableOverlay:!0,disableOverlayClose:!0,floaterProps:{options:{offset:{offset:"24, 9"}}},styles:{tooltipContainer:{width:336}},spotlight:{isHidden:!0}}],onStepChange:Q,onStepEnd:J}),Object(W.jsxs)(Yg,{$isOnboarding:C&&0===w,$isEditingDisplayName:z,$hasError:ee,children:[Object(W.jsxs)(Qg,{id:"quickEdit",children:[Object(W.jsxs)(Jg,{children:[Object(W.jsx)(o.Icon,{size:20,icon:"camera",color:"white"}),Object(W.jsx)("input",{type:"file",accept:"image/*",onChange:K})]}),Object(W.jsx)(ke.a,{profileID:u.email,imageUrl:u.photoThumbnailUrl||void 0,size:40,isLoading:m})]}),Object(W.jsxs)(Xg,{children:[Object(W.jsxs)(th,{onSubmit:F(G),children:[Object(W.jsx)(Zg,{onMouseEnter:()=>{v(!0)},"data-test-id":"AgentDisplayNameText",children:u.displayName}),Object(W.jsx)(rh,{agentType:u.agentType,tier:u.tier,role:u.role}),Object(W.jsx)(eh,{ref:e=>{h.current=e,I({validate:{required:e=>e.trim().length>0||t.formatMessage({id:"desk.agentProfile.dialog.form.error.displayName.required"})}})(e)},name:"displayName",maxLength:80,$isHover:O,$hasError:ee,onFocus:()=>{H(!0)},onBlur:()=>{H(!1),h.current&&g.current!==h.current.value&&(h.current.value=g.current,N({displayName:g.current}))},onKeyDown:Y,onMouseLeave:()=>{v(!1)},"data-test-id":"AgentDisplayNameInput"})]}),Object(W.jsx)(nh,{"data-test-id":"AgentInfoConnection",children:Object(W.jsx)(o.Dropdown,{variant:"inline",size:"small",placement:"right-end",portalId:"portal_popup",disabled:c,selectedItem:u.connection,onChange:Z,items:[f.d.ONLINE,f.d.AWAY,f.d.OFFLINE],itemToString:e=>e&&t.formatMessage({id:sh[e]}),itemToElement:e=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Kg,{$connection:e}),t.formatMessage({id:sh[e]})]}),positionFixed:!0,toggleRenderer:({selectedItem:e})=>e&&Object(W.jsxs)(Wg,{"data-test-id":"AgentConnectionLabel",children:[Object(W.jsx)(Kg,{$connection:u.connection}),t.formatMessage({id:sh[e]})]})})})]})]}),Object(W.jsx)(ah,{children:Object(W.jsx)(ih,{id:"agentProfileSetting",className:"agentSetting__icon",buttonType:"tertiary",icon:"settings",size:"small",iconSize:16,$isOnboarding:C&&1===w,onClick:X})})]})};var lh=n("Q8gc");const ch=r.default.div.withConfig({displayName:"ticketItem__TicketCustomerThumbnail",componentId:"sc-1twxs02-0"})(["width:40px;min-width:40px;height:40px;border-radius:50%;margin-right:12px;"," background-position:center;background-size:cover;"],e=>e.url?`background-image: url(${e.url});`:""),dh=r.default.div.withConfig({displayName:"ticketItem__TicketName",componentId:"sc-1twxs02-1"})(["max-width:248px;flex:1;display:flex;align-items:center;"]),uh=r.default.div.withConfig({displayName:"ticketItem__TicketNameText",componentId:"sc-1twxs02-2"})(["font-size:14px;line-height:20px;font-weight:500;color:",";flex:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;"],Object(o.cssVariables)("neutral-10")),ph=r.default.p.withConfig({displayName:"ticketItem__TicketCustomerName",componentId:"sc-1twxs02-3"})(["height:20px;margin-top:2px;padding:0;font-size:12px;line-height:1.33;color:",";"],Object(o.cssVariables)("neutral-7")),gh=r.default.div.withConfig({displayName:"ticketItem__TicketMessage",componentId:"sc-1twxs02-4"})(["width:100%;font-size:14px;color:",";line-height:1.43;letter-spacing:-0.1px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"],({$isRemoved:e})=>Object(o.cssVariables)(e?"neutral-6":"neutral-10")),hh=r.default.div.withConfig({displayName:"ticketItem__LastMessageAt",componentId:"sc-1twxs02-5"})(["text-align:right;font-size:12px;font-weight:500;line-height:1.33;color:",";"],Object(o.cssVariables)("neutral-7")),mh=r.default.div.withConfig({displayName:"ticketItem__TicketSocialIcon",componentId:"sc-1twxs02-6"})(["margin-right:8px;"]),fh=r.default.div.withConfig({displayName:"ticketItem__TicketInformation",componentId:"sc-1twxs02-7"})(["width:100%;display:flex;flex-direction:column;"]),bh=r.default.div.withConfig({displayName:"ticketItem__TicketTop",componentId:"sc-1twxs02-8"})(["display:flex;"]),jh=r.default.div.withConfig({displayName:"ticketItem__BasicInformation",componentId:"sc-1twxs02-9"})(["display:flex;justify-content:space-between;flex-direction:column;flex:1;min-width:0;padding-right:16px;"]),yh=r.default.div.withConfig({displayName:"ticketItem__AdditionalInformation",componentId:"sc-1twxs02-10"})(["min-width:40px;display:flex;justify-content:space-between;align-items:flex-end;flex-direction:column;font-size:14px;"]),Oh=r.default.div.withConfig({displayName:"ticketItem__TicketBottom",componentId:"sc-1twxs02-11"})(["display:flex;flex-direction:row;align-items:baseline;width:100%;max-width:100%;margin-top:6px;","{margin-left:16px;}"],o.Badge),vh=r.default.div.withConfig({displayName:"ticketItem__StyledTicket",componentId:"sc-1twxs02-12"})(["position:relative;z-index:10;padding:12px 16px;border-bottom:1px solid ",";transition:",";cursor:pointer;&:hover{background:",";}&:before{content:'';display:block;position:absolute;top:0;bottom:0;left:0;width:2px;height:100%;background:",";transform:translateX(-4px) scale(0);transition:transform 0.3s ",";}&:after{content:'';display:block;position:absolute;top:-1px;right:0;left:0;width:100%;height:1px;opacity:0;background:",";transition:",";}",";"],Object(o.cssVariables)("neutral-3"),Object(o.transitions)({duration:.2,properties:["background","border"]}),Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("purple-7"),o.transitionDefault,Object(o.cssVariables)("neutral-1"),Object(o.transitions)({duration:.3,properties:["background","opacity"]}),e=>e.isActive?Object(r.css)(["z-index:20;border-color:",";background:",";&:before{transform:translateX(0) scale(1);}&:after{opacity:1;}"," svg{fill:",";}","{color:",";}"],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-2"),dh,Object(o.cssVariables)("purple-7"),uh,Object(o.cssVariables)("purple-7")):""),xh=Object(a.memo)(({isActive:e,agentId:t,ticket:n,ticketClickHandler:i})=>{var s;const r=Object(E.a)(),l=Object(a.useRef)(null),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(!1),g=Object(a.useRef)(()=>{}),h=Object(a.useRef)(()=>{}),[m,b]=Object(a.useState)({lastMessage:void 0,unreadMessageCount:0});Object(a.useEffect)(()=>{g.current=async()=>{var e;if("sendbird"===Object(H.getTicketSocialType)(n.channelType)&&(n.status2===f.jc.ACTIVE||n.status2===f.jc.IDLE)&&(null==(e=n.recentAssignment)?void 0:e.agent.id)===t)try{const e=await window.dashboardSB.GroupChannel.getChannel(n.channelUrl);e&&(b({lastMessage:e.lastMessage,unreadMessageCount:e.unreadMessageCount}),d(e&&e.getTypingMembers().length>0))}catch(e){Object(q.a)({error:e,context:{ticket:n,agentId:t}})}}},[t,n]),Object(a.useEffect)(()=>{h.current=e=>{if(e.isGroupChannel()&&e.url===n.channelUrl){const t={lastMessage:e.lastMessage,unreadMessageCount:e.unreadMessageCount};Object(H.isShallowEqual)(m,t)||b(t);const n=e.getTypingMembers().length>0;n!==!c&&d(n)}}},[m,c,n.channelUrl]),Object(a.useEffect)(()=>{g.current();const e=new window.dashboardSB.ChannelHandler,t=e=>h.current(e);return e.onMessageReceived=t,e.onChannelChanged=t,e.onTypingStatusUpdated=t,window.dashboardSB.addChannelHandler(`ticketItem_${n.id}_handler`,e),()=>window.dashboardSB.removeChannelHandler(`ticketItem_${n.id}_handler`)},[n.id]);const j=[{label:r.formatMessage({id:"desk.tickets.action.lbl.copyUrl"}),onClick:()=>{vi()(Object(H.getTicketURL)(n.id,!1)),o.toast.success({message:r.formatMessage({id:"desk.tickets.action.lbl.copyUrl.success"})})}}],y=Object(a.useCallback)(()=>{i(n)},[i,n]),O=Object(a.useCallback)(()=>{p(!0)},[]),v=Object(a.useCallback)(()=>{p(!1)},[]),x=(()=>{switch(n.channelType){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return Object(W.jsx)(o.Icon,{icon:"facebook",size:16,color:Object(o.cssVariables)("neutral-6")});case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return Object(W.jsx)(o.Icon,{icon:"twitter",size:16,color:Object(o.cssVariables)("neutral-6")});case"INSTAGRAM_COMMENT":return Object(W.jsx)(o.Icon,{icon:"instagram",size:16,color:Object(o.cssVariables)("neutral-6")});case"WHATSAPP_MESSAGE":return Object(W.jsx)(o.Icon,{icon:"whatsapp",size:16,color:Object(o.cssVariables)("neutral-7")});default:return null}})(),_=Object(lh.a)();return Object(W.jsx)(vh,{ref:l,onMouseLeave:v,onMouseOver:O,isActive:e,onClick:y,"data-test-id":"ticketItem",children:Object(W.jsxs)(fh,{children:[Object(W.jsxs)(bh,{children:[Object(W.jsx)(ch,{url:n.customer.photoThumbnailUrl||`${f.n}/desk/thumbnail-member-0${Object(H.getRandomNumber)(n.channelUrl,3)}.svg`,onError:e=>{e.target.src=`${f.n}/desk/thumbnail-member-0${Object(H.getRandomNumber)(n.channelUrl,3)}.svg`},"data-test-id":"ticketItem__thumbnail"}),Object(W.jsxs)(jh,{children:[Object(W.jsxs)(dh,{children:[x&&Object(W.jsx)(mh,{children:x}),Object(W.jsx)(uh,{children:n.channelName})]}),Object(W.jsx)(ph,{children:n.customer.displayName})]}),Object(W.jsx)(yh,{children:u?Object(W.jsx)(o.OverflowMenu,{items:j,stopClickEventPropagation:!0,popperProps:{modifiers:{flip:{boundariesElement:(null==(s=l.current)?void 0:s.parentElement)||void 0}}}}):Object(W.jsx)(hh,{children:n.lastMessageAt&&_(new Date(n.lastMessageAt),{withoutSuffix:!0})})})]}),Object(W.jsxs)(Oh,{children:[Object(W.jsx)(gh,{$isRemoved:n.lastMessageIsRemoved,children:c?r.formatMessage({id:"desk.typingIndicator"},{customerName:n.customer.displayName}):n.lastMessageIsRemoved?r.formatMessage({id:"desk.conversation.ticketList.lastMessage.deleted"}):f.Sb.includes(n.channelType)?n.lastMessage?n.lastMessage:"":m&&n.channelType===f.Q.SENDBIRD&&m.lastMessage?"file"===m.lastMessage.messageType?m.lastMessage.name:"user"===m.lastMessage.messageType||"admin"===m.lastMessage.messageType?m.lastMessage.message:void 0:n.lastMessage||""}),n.recentAssignment&&n.recentAssignment.unreadCount>0?Object(W.jsx)(o.Badge,{count:n.recentAssignment.unreadCount,color:"red"}):null]})]})})},(e,t)=>{let n=!0;return(JSON.stringify(e.ticket)!==JSON.stringify(t.ticket)||e.agentId!==t.agentId||e.isActive!==t.isActive)&&(n=!1),n}),_h=r.default.div.withConfig({displayName:"tickets__TicketsLoadMore",componentId:"sc-1s64x4q-0"})(["margin:8px;"]),Ch=Object(r.default)(o.Button).withConfig({displayName:"tickets__TicketsLoadMoreButton",componentId:"sc-1s64x4q-1"})(["width:100%;"]),kh=r.default.div.withConfig({displayName:"tickets__EmptyTable",componentId:"sc-1s64x4q-2"})(["display:table;overflow:hidden;width:100%;height:100%;"]),wh=r.default.div.withConfig({displayName:"tickets__EmptyTableCell",componentId:"sc-1s64x4q-3"})(["display:table-cell;padding:0 8px;vertical-align:middle;text-align:center;"]),Th=r.default.div.withConfig({displayName:"tickets__NoTicketHeader",componentId:"sc-1s64x4q-4"})(["font-size:16px;color:",";margin-bottom:8px;"],Object(o.cssVariables)("neutral-8")),Sh=r.default.div.withConfig({displayName:"tickets__NoTicketDescription",componentId:"sc-1s64x4q-5"})(["font-size:14px;color:",";"],Object(o.cssVariables)("neutral-6")),Eh=Object(a.memo)(({agent:e,isLoadMore:t,isSearchMode:n,isSearched:i,conversation:r,tickets:l,onLoadMore:c,isFetching:d})=>{const u=Object(E.a)(),p=Object(s.k)(),g=Object(s.l)(),h=Object(P.c)(),[m,b]=Object(a.useState)([]),j=Object(a.useMemo)(()=>"string"==typeof m?u.formatMessage({id:"desk.tickets.search.manual.noMatch.description"},{query:m}):Array.isArray(m)&&1===m.length?u.formatMessage({id:"desk.tickets.search.singleFilter.noMatch.description"}):u.formatMessage({id:"desk.tickets.search.multiFilters.noMatch.description"}),[m,u]),{ticket:y}=r,O=y&&y.id,v=Object(a.useCallback)(e=>{const t=`/${h}/desk/conversation/${e.id}${g.search}`;p.push(t,{forceReload:e.id===O})},[h,g.search,p,O]);let x;return x=l.length>0?l.map(t=>t?Object(W.jsx)(xh,{ticket:t,agentId:e.id,isActive:t.id===O,ticketClickHandler:v},`conversation_ticket_${t.id}`):""):n?i?Object(W.jsx)(z.a,{icon:"no-search",title:u.formatMessage({id:"desk.tickets.search.noMatch.title"}),description:j}):Object(W.jsx)(z.a,{icon:"tickets",title:u.formatMessage({id:"desk.tickets.search.title"}),description:u.formatMessage({id:"desk.tickets.search.description"},{break:Object(W.jsx)("br",{})})}):Object(W.jsx)(kh,{children:Object(W.jsxs)(wh,{children:[Object(W.jsx)(Th,{children:u.formatMessage({id:"desk.conversation.ticketList.noItem"})}),Object(W.jsx)(Sh,{children:u.formatMessage({id:"desk.conversation.ticketList.noItem.desc"})})]})}),Object(a.useEffect)(()=>{if(""!==g.search){const{q:e}=Wt.a.parse(g.search,{ignoreQueryPrefix:!0}),t=Wt.a.parse(e);Object.keys(t).some(e=>f.pb.test(e.trim()))?b(Object.values(t)):b(e)}},[g.search]),Object(W.jsxs)(o.ScrollBar,{options:{suppressScrollX:!0},children:[d&&Object(W.jsx)(V.cc,{transparent:!0}),x,t&&l.length>0?Object(W.jsx)(_h,{children:Object(W.jsx)(Ch,{buttonType:"tertiary",size:"small",onClick:c,children:u.formatMessage({id:"desk.conversation.ticketList.loadMore.button"})})}):null]})}),Ih=Object(b.d)((e,t)=>({agent:e.desk.agent,conversation:e.conversation,tickets:t.tickets}))(Eh);var Mh=n("xXU7"),Dh=n("xMyE");const Ah=()=>Object(a.useContext)(hd).conversationTickets,Nh=()=>{const e=Object(E.a)(),t=Object(b.f)(),n=Object(s.k)(),i=Object(P.c)(),{isSearchMode:r}=Ah().state,o=(()=>{const{conversationTickets:e}=Object(a.useContext)(hd),{assignedTickets:t}=e.state;return{assignedTickets:t,agentId:Object(P.Y)(e=>e.desk.agent.id)}})(),l=Object(P.L)(o),{updateAllCurrentTickets:d,fetchAllAssignedTickets:u}=(()=>{const e=Object(P.Y)(e=>e.desk.agent.id),t=Ah(),{fetchCurrentTickets:n,fetchAssignedTickets:i}=t,{page:s,pageSize:r}=t.state.currentPagination,o=Object(P.L)({agentId:e,fetchCurrentTickets:n,fetchAssignedTickets:i,page:s,pageSize:r});return{updateAllCurrentTickets:Object(a.useCallback)(()=>{o.current.fetchCurrentTickets({agentId:o.current.agentId,offset:0,limit:o.current.page*o.current.pageSize})},[o]),fetchAllAssignedTickets:Object(a.useCallback)(()=>{o.current.fetchAssignedTickets({agentId:o.current.agentId})},[o])}})(),p=Object(a.useRef)(null),g=Object(a.useRef)(null),h=Object(a.useRef)(Qe(5e3,3e4).pipe(Object(Dh.a)(()=>{const{assignedTickets:a,agentId:s}=l.current;a.forEach(a=>{const r=a.status2===f.jc.ACTIVE,o=a.recentAssignment&&a.recentAssignment.agent.id===s,l="CUSTOMER"===a.lastMessageSender&&c()().diff(c()(a.lastMessageAt))>=6e4;r&&o&&l&&Object(H.checkIfDesktopNotificationGranted)()&&t(j.b.addDesktopNotificationsRequest({title:e.formatMessage({id:"desk.desktopNotification.waitingTicket.title"}),body:e.formatMessage({id:"desk.desktopNotification.waitingTicket.body"}),callback:()=>{try{window.parent.focus(),window.focus(),n.push(`/${i}/desk/conversation/${a.id}`)}catch(e){Object(q.a)({error:e})}}}))})}))),m=Object(a.useRef)(Object(Mh.a)(3e4).pipe(Object(Dh.a)(()=>{d(),u()}))),y=()=>{null==p.current&&(p.current=h.current.subscribe()),null==g.current&&(g.current=m.current.subscribe())},O=()=>{[p,g].filter(e=>e.current).forEach(e=>{var t;null==(t=e.current)||t.unsubscribe(),e.current=null})};Object(a.useEffect)(()=>(y(),()=>{O()}),[]),Object(a.useEffect)(()=>{r?O():y()},[r])};var Rh=n("OFL0"),Ph=n.n(Rh),Lh=n("isby"),Fh=n("2Bdj"),Uh=n("67Y/");function $h(e,t,n,a){return Object(Fh.a)(n)&&(a=n,n=void 0),a?$h(e,t,n).pipe(Object(Uh.a)((function(e){return Object(Lh.a)(e)?a.apply(void 0,e):a(e)}))):new Ge.a((function(a){!function e(t,n,a,i,s){var r;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var o=t;t.addEventListener(n,a,s),r=function(){return o.removeEventListener(n,a,s)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var l=t;t.on(n,a),r=function(){return l.off(n,a)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,a),r=function(){return c.removeListener(n,a)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var d=0,u=t.length;d<u;d++)e(t[d],n,a,i,s)}i.add(r)}(e,t,(function(e){arguments.length>1?a.next(Array.prototype.slice.call(arguments)):a.next(e)}),a,n)}))}const Bh=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(!1);return Object(a.useEffect)(()=>{e.current=$h(window,"focus").subscribe(()=>{n.current=!0}),t.current=$h(window,"blur").subscribe(()=>{n.current=!1});const a=e.current,i=t.current;return()=>{a&&a.unsubscribe(),i&&i.unsubscribe()}},[]),Object(a.useCallback)(()=>n.current,[])},Vh=()=>Object(a.useContext)(hd).conversationTickets,zh=()=>{const e=Object(P.Y)(e=>e.desk.agent.id),t=Vh(),{fetchAssignedTicketsCounts:n,addTickets:i,removeFromCurrentTickets:s,fetchCurrentTickets:r}=t,{currentPagination:{page:o,pageSize:l}}=t.state,c=Object(P.L)({agentId:e,fetchAssignedTicketsCounts:n,fetchCurrentTickets:r,addTickets:i,removeFromCurrentTickets:s,page:o,pageSize:l});return{addToCurrentTicketsList:Object(a.useCallback)(e=>{c.current.addTickets({ticket:e}),c.current.fetchAssignedTicketsCounts({agentId:c.current.agentId})},[c]),removeFromCurrentTicketsList:Object(a.useCallback)(e=>{c.current.removeFromCurrentTickets({ticket:e}),c.current.fetchAssignedTicketsCounts({agentId:c.current.agentId})},[c]),updateAllCurrentTickets:Object(a.useCallback)(()=>{c.current.fetchCurrentTickets({agentId:c.current.agentId,offset:0,limit:c.current.page*c.current.pageSize})},[c])}},Hh=()=>{const e=Object(E.a)(),t=Object(b.f)(),n=Object(P.c)(),i=Object(P.V)(e=>{var t;const{id:n,status:a,sendbirdId:i}=e.desk.agent,{openChannelUrl:s}=e.desk.project;return{agentId:n,agentStatus:a,agentSendbirdId:i,conversationTicketId:null==(t=e.conversation.ticket)?void 0:t.id,openChannelUrl:s}}),s=(()=>{const e=Bh();return Object(a.useCallback)(()=>!e()&&Object(H.checkIfDesktopNotificationGranted)(),[e])})(),r=qg(),{updateTickets:o,updateCounts:l,fetchAssignedTicketsCounts:c,removeFromCurrentTickets:d,updateTicketsAssignment:u,resetCurrentTickets:p,state:{isSearchMode:g,filter:h,currentTickets:m,assignedTickets:f}}=Vh();return{intl:e,dispatch:t,updateTickets:o,updateCounts:l,updateTicketsAssignment:u,fetchAssignedTicketsCounts:c,removeFromCurrentTickets:d,resetCurrentTickets:p,exitFromCurrentTicket:r,checkIfCanShowDesktopNotification:s,isSearchMode:g,filter:h,currentTicketsById:Object(a.useMemo)(()=>m.reduce((e,t)=>(e[t.id]=t,e),{}),[m]),assignedTicketsByChannel:Object(a.useMemo)(()=>f.reduce((e,t)=>(e[t.channelUrl]=t,e),{}),[f]),deskProjectFileEncryptionPermission:ao(),appId:n,...i,...zh()}},qh=(e,t)=>{var n;return(null==(n=e.recentAssignment)?void 0:n.agent.id)===t},Gh={TICKET_ASSIGN:({ticket:e},{intl:t,conversationTicketId:n,agentId:a,isSearchMode:i,filter:s,currentTicketsById:r,checkIfCanShowDesktopNotification:l,dispatch:c,addToCurrentTicketsList:d,removeFromCurrentTicketsList:u})=>{const p=Object.prototype.hasOwnProperty.call(r,e.id),g=e.recentAssignment&&e.recentAssignment.agent.id===a,h=e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE,m=s.value===f.jc.ACTIVE;if(e.id===n&&c(j.d.fetchConversationSuccess(e)),h)return g?(i||(m&&!p&&d(e),!m&&p&&u(e)),l()&&c(j.b.addDesktopNotificationsRequest({title:t.formatMessage({id:"desk.desktopNotification.newIncomingChat.title"}),body:t.formatMessage({id:"desk.desktopNotification.newIncomingChat.body"},{customerName:e.customer.displayName}),callback:()=>{c(j.d.fetchConversationSuccess(e))}})),void o.toast.success({message:Object(W.jsxs)("div",{children:[Object(W.jsx)("p",{children:Object(W.jsx)("strong",{children:t.formatMessage({id:"desk.desktopNotification.newTransferredChat.title"})})}),Object(W.jsx)("p",{children:t.formatMessage({id:"desk.desktopNotification.newIncomingChat.body"},{customerName:e.customer.displayName})})]})})):void(!i&&p&&u(e))},TICKET_TRANSFER:({ticket:e,transfer:t},{intl:n,conversationTicketId:a,agentId:i,isSearchMode:s,filter:r,currentTicketsById:l,exitFromCurrentTicket:c,checkIfCanShowDesktopNotification:d,dispatch:u,addToCurrentTicketsList:p,removeFromCurrentTicketsList:g})=>{const h=e.id===a,m=t.toAssignment.agent.id===i,b=t.fromAssignment.agent.id===i,y=Object.prototype.hasOwnProperty.call(l,e.id),O=r.value===f.jc.ACTIVE;if(m&&!s)return o.toast.success({message:Object(W.jsxs)("div",{children:[Object(W.jsx)("p",{children:Object(W.jsx)("strong",{children:n.formatMessage({id:"desk.desktopNotification.newIncomingChat.title"})})}),Object(W.jsx)("p",{children:n.formatMessage({id:"desk.desktopNotification.newIncomingChat.body"},{customerName:e.customer.displayName})})]})}),O&&!y&&p(e),!O&&y&&g(e),void(d()&&u(j.b.addDesktopNotificationsRequest({title:n.formatMessage({id:"desk.desktopNotification.newTransferredChat.title"}),body:n.formatMessage({id:"desk.desktopNotification.newIncomingChat.body"},{customerName:e.customer.displayName}),callback:()=>{u(j.d.fetchConversationSuccess(e))}})));b&&(o.toast.success({message:Object(W.jsx)($a.a,{action:$a.b.TRANSFERRED_TO_AGENT,ticketChannelName:e.channelName})}),!s&&y&&g(e),h&&c())},TICKET_CLOSE:({ticket:e},{intl:t,conversationTicketId:n,agentId:a,isSearchMode:i,currentTicketsById:s,checkIfCanShowDesktopNotification:r,dispatch:l,removeFromCurrentTicketsList:c})=>{const d=e.id===n,u=e.recentAssignment&&e.recentAssignment.agent.id===a,p=Object.prototype.hasOwnProperty.call(s,e.id);d&&l(j.d.fetchConversationSuccess(e)),u&&(!i&&p&&c(e),d&&l(j.d.setConversationAssignment(e.recentAssignment)),r()&&l(j.b.addDesktopNotificationsRequest({title:t.formatMessage({id:"desk.ticket.update.message.ticketClosed"},{ticketChannelName:e.channelName}),body:""})),o.toast.success({message:Object(W.jsx)("div",{children:t.formatMessage({id:"desk.conversation.events.ticketClosed.success"})})}))},TICKET_REOPEN:({ticket:e},{agentId:t,conversationTicketId:n,filter:a,dispatch:i,addToCurrentTicketsList:s})=>{const r=e.id===n,o=e.recentAssignment&&e.recentAssignment.agent.id===t,l=a.value===f.jc.ACTIVE;r&&i(j.d.fetchConversationSuccess(e)),o&&l&&s(e)},TICKET_CONFIRMED:({ticket:e},{dispatch:t,conversationTicketId:n})=>{e.id===n&&t(j.d.fetchConversationSuccess(e))},TICKET_ACTIVE:({ticket:e},{appId:t,agentId:n,isSearchMode:a,filter:i,currentTicketsById:s,conversationTicketId:r,dispatch:o,addToCurrentTicketsList:l,removeFromCurrentTicketsList:c})=>{const d=Object.prototype.hasOwnProperty.call(s,e.id),u=e.recentAssignment&&e.recentAssignment.agent.id===n,p=i.value===f.jc.ACTIVE;e.recentAssignment||Object(q.a)({error:"No recentAssignment",context:{appId:t,ticketId:e.id,name:"TICKET_ACTIVE"}}),u&&(a||(!p&&d&&c(e),p&&!d&&l(e)),e.id===r&&o(j.d.fetchConversationSuccess(e)))},TICKET_WIP:({ticket:e},{conversationTicketId:t,isSearchMode:n,currentTicketsById:a,filter:i,dispatch:s,addToCurrentTicketsList:r,removeFromCurrentTicketsList:o})=>{const l=i.value===f.jc.WIP,c=Object.prototype.hasOwnProperty.call(a,e.id);n||l||!c||o(e),!n&&l&&r(e),e.id===t&&s(j.d.fetchConversationSuccess(e))},TICKET_IDLE:({ticket:e},{conversationTicketId:t,agentId:n,appId:a,filter:i,isSearchMode:s,currentTicketsById:r,dispatch:o,addToCurrentTicketsList:l,removeFromCurrentTicketsList:c})=>{const d=e.id===t,u=Object.prototype.hasOwnProperty.call(r,e.id),p=e.recentAssignment&&e.recentAssignment.agent.id===n,g=i.value===f.jc.IDLE;e.recentAssignment||Object(q.a)({error:"No recentAssignment",context:{appId:a,ticketId:e.id,name:"TICKET_IDLE"}}),p&&(s||(!g&&u&&c(e),g&&!u&&l(e)),d&&o(j.d.fetchConversationSuccess(e)))},TICKET_CSAT_UPDATED:({ticket:e},{conversationTicketId:t,dispatch:n,agentId:a,deskProjectFileEncryptionPermission:i})=>{const s=e.id===t,r=e.status2===f.jc.CLOSED;if(s&&r){const{shouldAuthenticateToAccessFiles:t,fileEncryptionPermission:s}=i,r=(e=>{const{ticket:t,agentId:n,shouldAuthenticateToAccessFiles:a,fileEncryptionPermission:i}=e,s=io({ticket:t,agentId:n,fileEncryptionPermission:i});return!a||s})({ticket:e,agentId:a,shouldAuthenticateToAccessFiles:t,fileEncryptionPermission:s});n(j.d.fetchConversationMessagesRequest({types:"initial",channelUrl:e.channelUrl,messageTs:(new Date).valueOf(),prevLimit:50,nextLimit:0,presignedFileUrl:r}))}},TICKET_TEAM_TRANSFER:({ticket:e},{conversationTicketId:t,agentId:n,updateTickets:a,assignedTicketsByChannel:i,removeFromCurrentTickets:s,dispatch:r})=>{const o=e.id===t,l=e.recentAssignment&&e.recentAssignment.agent.id===n;null!==e.recentAssignment?(Ph()(i,e.channelUrl)&&l&&a({ticket:e}),o&&r(j.d.fetchConversationSuccess(e))):s({ticket:e})},ASSIGNMENT_RESPONSED:({assignment:e},{conversationTicketId:t,agentId:n,dispatch:a,updateTicketsAssignment:i})=>{e.agent.id===n&&(i({assignment:e}),e&&e.assignedTicket===t&&a(j.d.setConversationAssignment(e)))},ASSIGNMENT_UPDATED:({assignment:e},{conversationTicketId:t,agentId:n,dispatch:a,updateTicketsAssignment:i})=>{e.agent.id===n&&(i({assignment:e}),e&&e.assignedTicket===t&&a(j.d.setConversationAssignment(e)))},AGENT_CONNECTION:({agent:e},{agentId:t,dispatch:n,updateAllCurrentTickets:a,exitFromCurrentTicket:i})=>{e.id===t&&(n(j.d.setDeskAgent(e)),i(),"INACTIVE"!==e.status&&a())},AGENT_ROLE:({agent:e},{agentId:t,dispatch:n,exitFromCurrentTicket:a})=>{e.id===t&&(n(j.d.setDeskAgent(e)),a())},AGENT_STATUS:({agent:e},{agentId:t,agentStatus:n,resetCurrentTickets:a,exitFromCurrentTicket:i})=>{e.id===t&&"INACTIVE"===e.status&&"ACTIVE"===n&&(i(),a(),H.ClientStorage.remove("deskApiToken"))},TICKET_LAST_SEEN_AT_UPDATED:({ticket:e},{conversationTicketId:t,agentId:n,updateTickets:a,dispatch:i})=>{const s=e.id===t,r=e.recentAssignment&&e.recentAssignment.agent.id===n;e.recentAssignment||Object(q.a)({error:"No recentAssignment",context:{ticketId:e.id,name:"TICKET_LAST_SEEN_AT_UPDATED"}}),r&&(a({ticket:e}),s&&i(j.d.fetchConversationSuccess(e)))},TICKET_PRIORITY_VALUE_UPDATED:({ticket:e},{intl:t,conversationTicketId:n,dispatch:a})=>{e.id===n&&(o.toast.info({message:t.formatMessage({id:"desk.tickets.ticketInfoPanel.toast.changePriority.success"},{changedPriority:wl()(e.priority)})}),a(j.d.fetchConversationSuccess(Object(H.camelCaseKeys)(e))))},TICKET_FACEBOOK_PAGE_MESSAGE_UPDATED:({facebookPageMessage:e},{agentId:t,updateTickets:n})=>{qh(e.ticket,t)&&n({ticket:e.ticket})},TICKET_FACEBOOK_PAGE_FEED_UPDATED:({facebookPageFeedTicket:e},{agentId:t,updateTickets:n})=>{qh(e.ticket,t)&&n({ticket:e.ticket})},TICKET_TWITTER_DIRECT_MESSAGE_EVENT_UPDATED:({twitterDirectMessageEvent:e},{agentId:t,updateTickets:n})=>{qh(e.ticket,t)&&n({ticket:e.ticket})},TICKET_TWITTER_STATUS_TICKET_UPDATED:({twitterStatusTicket:e},{agentId:t,updateTickets:n})=>{qh(e.ticket,t)&&n({ticket:e.ticket})},TICKET_WHATSAPP_MESSAGE_UPDATED:({nexmoWhatsappMessage:e},{agentId:t,updateTickets:n})=>{qh(e.ticket,t)&&n({ticket:e.ticket})},TICKET_DELETE_MESSAGE:({ticket:e},{agentId:t,updateTickets:n})=>{qh(e,t)&&n({ticket:e})}},Wh=()=>{const e=Object(b.f)(),t=Hh(),n=Object(P.L)(t),i=(()=>{const e=Object(E.a)(),t=Object(b.f)();return Object(a.useCallback)((n,a)=>{let i="";n.isUserMessage()||n.isAdminMessage()?i=n.message:n.isFileMessage()&&n.type&&n.type.match(/^image.+$/i)&&(i="(image)"),t(j.b.addDesktopNotificationsRequest({title:e.formatMessage({id:"desk.desktopNotification.newMessage.title"},{nickname:n.sender.nickname}),body:i,callback:a}))},[t,e])})();Object(a.useEffect)(()=>{if(null==window.dashboardSB)return;const t=new window.dashboardSB.ChannelHandler;t.onMessageReceived=(t,a)=>{const s=n.current;if(t.isOpenChannel()&&t.url===s.openChannelUrl)try{const e=JSON.parse(a.message);"function"==typeof Gh[e.type]&&Gh[e.type](e,s)}catch(e){Object(q.a)({error:e,context:{channel:t,message:a}})}else if(s.checkIfCanShowDesktopNotification()&&t.isGroupChannel()&&(a.isUserMessage()||a.isFileMessage())&&a.sender.userId!==s.agentSendbirdId&&Ph()(s.assignedTicketsByChannel,a.channelUrl)){const t=s.assignedTicketsByChannel[a.channelUrl];i(a,()=>{e(j.d.fetchConversationSuccess(t))})}};const a=new window.dashboardSB.ConnectionHandler;return a.onReconnectSucceeded=()=>{(({updateAllCurrentTickets:e})=>{e()})(n.current)},window.dashboardSB.addChannelHandler("CONVERSATION_TICKETS_CHANNEL_HANDLER",t),window.dashboardSB.addConnectionHandler("AGENT_CONNECTION_HANDLER",a),()=>{var e,t;null==(e=window.dashboardSB)||e.removeChannelHandler("CONVERSATION_TICKETS_CHANNEL_HANDLER"),null==(t=window.dashboardSB)||t.removeConnectionHandler("AGENT_CONNECTION_HANDLER")}},[e,n,i])},Kh=r.default.div.withConfig({displayName:"conversationTickets__ConversationTicketsHeaderWrapper",componentId:"sc-98wawn-0"})(["display:flex;align-items:center;position:relative;z-index:80;padding-top:12px;"]),Yh=r.default.div.withConfig({displayName:"conversationTickets__TicketSidebarBodyWrapper",componentId:"sc-98wawn-1"})(["position:absolute;width:100%;height:100%;"]),Qh=r.default.div.withConfig({displayName:"conversationTickets__Filter",componentId:"sc-98wawn-2"})(["display:flex;flex:1;align-items:center;opacity:",";pointer-events:",";transition:opacity 0.2s ",";will-change:opacity;"],e=>e.hide?0:1,e=>e.hide?"none":"",o.transitionDefault),Jh=r.default.div.withConfig({displayName:"conversationTickets__SortWrapper",componentId:"sc-98wawn-3"})(["display:flex;justify-content:center;align-self:center;opacity:",";pointer-events:",";transition:opacity 0.2s ",";will-change:opacity;"],e=>e.hide?0:1,e=>e.hide?"none":"",o.transitionDefault),Xh=r.default.div.withConfig({displayName:"conversationTickets__SortToggle",componentId:"sc-98wawn-4"})(["display:flex;justify-content:center;align-items:center;width:32px;height:32px;text-align:center;font-size:13px;color:",";svg{fill:",";transition:fill 0.3s ",";}"],Object(o.cssVariables)("neutral-6"),e=>e.isOpen?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-9"),o.transitionDefault),Zh=r.default.span.withConfig({displayName:"conversationTickets__CurrentFilterText",componentId:"sc-98wawn-5"})(["padding-right:4px;padding-left:8px;font-size:16px;font-weight:600;line-height:1.25;letter-spacing:-0.15px;color:",";"],Object(o.cssVariables)("neutral-10")),em=Object(r.default)(Ta).withConfig({displayName:"conversationTickets__StyledTicketSearchInput",componentId:"sc-98wawn-6"})(["opacity:",";"],({isSearchMode:e})=>e?1:0),tm=r.default.div.withConfig({displayName:"conversationTickets__TicketSearchInputContainer",componentId:"sc-98wawn-7"})(["width:100%;background:",";pointer-events:",";"],({isSearchMode:e})=>e?"white":"transparent",({isSearchMode:e})=>e?"auto":"none"),nm={[f.jc.ACTIVE]:"ui.ticketStatus.active",[f.jc.IDLE]:"ui.ticketStatus.idle",[f.jc.WIP]:"ui.ticketStatus.wip",[f.jc.CLOSED]:"ui.ticketStatus.closed"},am={[f.jc.ACTIVE]:"active",[f.jc.IDLE]:"idle",[f.jc.WIP]:"wip"},im=[{labelKey:nm[f.jc.ACTIVE],value:f.jc.ACTIVE},{labelKey:nm[f.jc.IDLE],value:f.jc.IDLE},{labelKey:nm[f.jc.WIP],value:f.jc.WIP},{labelKey:nm[f.jc.CLOSED],value:f.jc.CLOSED}],sm=i.a.memo(({initialSearchQuery:e,onSearch:t,onResetSearch:n})=>{const i=Object(E.a)(),{conversationTickets:s}=Object(a.useContext)(hd);Wh(),Nh();const{id:l}=Object(P.V)(e=>{const{id:t,connection:n,email:a,photoThumbnailUrl:i,displayName:s,tier:r,role:o}=e.desk.agent;return{id:t,connection:n,email:a,photoThumbnailUrl:i,displayName:s,tier:r,role:o}}),{state:{isSearchMode:d,isSearched:u,filter:p,sortType:g,counts:h,searchedTickets:m,currentTickets:b,currentPagination:j,searchQuery:y,isFetching:O},updateIsSearchMode:v,updateCurrentPagination:x,resetCurrentTickets:_,fetchCurrentTickets:C,resetSearch:k,fetchSearchTickets:w,fetchAssignedTickets:T,fetchAssignedTicketsCounts:S}=s,I=Object(P.L)(p),M=Object(a.useMemo)(()=>d?[...m]:(({sortType:e,tickets:t})=>{const n=e===dd.OLDEST?"asc":"desc";return Lu()(t,[t=>{let n=c()(t.createdAt).unix()||c()(t.issuedAt).unix();return e===dd.RECENTLY_UPDATED&&(n=c()(t.lastMessageAt).unix()||c()(t.issuedAt).unix()),n}],[n])})({sortType:g,tickets:b}),[b,d,m,g]);Object(a.useEffect)(()=>{S({agentId:l})},[l,S]),Object(a.useEffect)(()=>{T({agentId:l})},[l,h.active,h.idle,T]),Object(a.useEffect)(()=>{d||C({agentId:l,filter:I.current,offset:0})},[l,C,d,I]);const D=e=>{x({page:1}),C({agentId:l,filter:e,offset:0})},A=Object(a.useCallback)(e=>{C({agentId:l,sortType:e.value,offset:0}),x({page:1})},[l,C,x]),N=e=>{e&&e.preventDefault(),d||(v(!0),_())},R=e=>{e&&e.preventDefault(),k(),n()},L=Object(a.useCallback)(()=>{const{page:e,pageSize:t}=j;e*t<(d?h.search:h[p.value.toLowerCase()])&&(x({page:e+1}),d?w({offset:e*t,isLoadMore:!0,query:y,ticketType:f.lc.CUSTOMER_CHAT}):C({agentId:l,offset:e*t,isLoadMore:!0}))},[j,d,h,p.value,x,w,y,C,l]),F=e=>{e.preventDefault(),k({shouldReset:{isSearchMode:!1}}),n()},U=j.page*j.pageSize<(d?h.search:h[p.value.toLowerCase()]),$=[{label:i.formatMessage({id:"desk.conversation.sorter.label.newest"}),value:dd.NEWEST},{label:i.formatMessage({id:"desk.conversation.sorter.label.oldest"}),value:dd.OLDEST},{label:i.formatMessage({id:"desk.conversation.sorter.label.recentlyUpdated"}),value:dd.RECENTLY_UPDATED}];return Object(W.jsx)(Hn.Consumer,{children:({TicketSidebarHeaderGridItem:n,TicketSidebarBodyGridItem:a,TicketSidebarFooterGridItem:s})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(n,{styles:Object(r.css)(["padding:0 8px;"]),children:Object(W.jsx)(Kh,{children:d?Object(W.jsx)(tm,{isSearchMode:d,children:Object(W.jsx)(em,{inputType:Zn.Inline,placeholder:i.formatMessage({id:"desk.tickets.search.placeholder.collapsed"}),initialSearchQuery:e,isSearchMode:d,showResetButton:y.length>0,backButtonProps:{icon:"list-back",onClick:R},onSearch:t,onResetButtonClick:F})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Qh,{hide:d,"data-test-id":"ConversationTicketsFilter",children:Object(W.jsx)(o.Dropdown,{items:im,itemToString:e=>i.formatMessage({id:e.labelKey}),itemToElement:e=>`${i.formatMessage({id:nm[e.value]})} ${e.value===f.jc.CLOSED?"":`(${h[am[e.value]]})`}`,toggleRenderer:({selectedItem:e})=>e&&Object(W.jsxs)(Zh,{children:[i.formatMessage({id:e.labelKey})," ",e.value!==f.jc.CLOSED&&`(${h[am[e.value]]})`]}),placement:"bottom-start",showArrow:!0,variant:"inline",size:"small",selectedItem:p,onChange:D})}),Object(W.jsx)(Jh,{hide:d,children:Object(W.jsx)(o.Dropdown,{placement:"bottom-end",items:$,itemToString:e=>e.label,itemToElement:e=>e.label,toggleRenderer:({isOpen:e})=>Object(W.jsx)(Xh,{isOpen:e,children:Object(W.jsx)(o.Icon,{icon:"list-sorting",size:20})}),variant:"inline",size:"small",selectedItem:$.find(e=>e.value===g),onChange:A})}),Object(W.jsx)(o.IconButton,{"data-test-id":"SearchIconButton",buttonType:"secondary",icon:"search",size:"small",onClick:N})]})})}),Object(W.jsx)(a,{children:Object(W.jsx)(Yh,{children:Object(W.jsx)(Ih,{tickets:M,isSearchMode:d,isSearched:u,isLoadMore:U,isFetching:O,query:y,onLoadMore:L})})}),Object(W.jsx)(s,{styles:"\n              display: flex;\n              align-items: center;\n              position: relative;\n              z-index: 30;\n              padding: 0 16px;\n            ",children:Object(W.jsx)(oh,{})})]})})}),rm=r.default.div.withConfig({displayName:"conversation__NotificationWrapper",componentId:"c4wnrg-0"})(["width:100%;position:absolute;bottom:96px;padding:0 16px;"]),om=r.default.div.withConfig({displayName:"conversation__EmptyTicketPlaceholder",componentId:"c4wnrg-1"})(["background-color:white;grid-row:top / bottom;grid-column:chat-thread-start / iframe-sidebar;"]),lm=()=>{const e=Object(E.a)(),t=Object(s.m)(),n=Object(s.k)(),i=Object(b.f)(),l=Object(F.a)(),{isPermitted:c}=Object(P.h)(),d=c(["desk.admin"]),[u,p]=Object(a.useState)(!1),{desk:g,ticket:h,isFetching:m,appId:y}=Object(b.g)(e=>{var t,n;return{desk:e.desk,ticket:e.conversation.ticket,isFetching:e.conversation.isFetching,appId:null!=(t=null==(n=e.applicationState.data)?void 0:n.app_id)?t:""}}),{project:O}=g,{id:v=null,channelType:x=null}=h||{},{conversationTickets:_}=Object(a.useContext)(hd),{updateIsSearchMode:C,fetchSearchTickets:k}=_,{q:w,updateParams:T,clearParams:S}=Object(B.a)({q:""}),I=(()=>{const e=Object(b.f)(),t=Object(P.V)(e=>e.conversation.typingStatus);return Object(a.useCallback)(n=>{e(j.d.setTypingStatus({...t,agentTyping:n}))},[e,t])})(),M=Object(a.useRef)(null),D=Object(a.useCallback)(e=>{i(j.d.fetchConversationRequest({ticketId:Number(e),onSuccess:t=>{var a;const i=g.agent.id===(null==t||null==(a=t.recentAssignment)?void 0:a.agent.id),s=(null==t?void 0:t.status2)===f.jc.WIP;if(d&&!i&&!s){const t=_a(Kn.TicketID,e);n.replace(`/${y}/desk/tickets/${e}?${t}`)}},onFail:()=>{y&&n.replace(d?`/${y}/desk/tickets`:`/${y}/desk/conversation`)}}))},[y,g.agent.id,i,n,d]);Object(a.useEffect)(()=>{i(j.d.resetConversationMessages()),t.ticketId?D(t.ticketId):i(j.d.resetConversation())},[i,D,t.ticketId]),Object(a.useEffect)(()=>()=>{i(j.d.resetConversation())},[i]),Object(a.useEffect)(()=>{const e=Wt.a.parse(location.search,{ignoreQueryPrefix:!0,parseArrays:!1});La()(e)||(C(!0),T({q:Wt.a.stringify(e.q)}))},[]);const N=Object(a.useCallback)(()=>{const e=new window.dashboardSB.ChannelHandler;e.onMessageReceived=(e,t)=>{if(e.isOpenChannel()&&e.url===g.project.openChannelUrl)try{const e=JSON.parse(t.message);switch(e.type){case"TICKET_FACEBOOK_PAGE_MESSAGE_UPDATED":e.facebookPageMessage.ticket.id===v&&i(j.d.updateFacebookMessageRequest({facebookMessage:e.facebookPageMessage}));break;case"TICKET_FACEBOOK_PAGE_FEED_UPDATED":if(e.facebookPageFeedTicket.ticket.id!==v)return;e.verb===f.eb.ADD?i(j.d.updateFacebookFeedsRequest(e.facebookPageFeedTicket.facebookPageFeed)):(e.verb===f.eb.EDITED||e.verb===f.eb.EDIT||e.verb===f.eb.HIDE||e.verb===f.eb.UNHIDE||e.verb===f.eb.REMOVE)&&i(j.d.updateFacebookFeedRequest({feed:e.facebookPageFeedTicket.facebookPageFeed,verb:e.verb}));break;case"TICKET_FACEBOOK_PAGE_FEED_REACTION_UPDATED":if(e.facebookPageFeedTicket.ticket.id!==v)return;i(j.d.updateFacebookFeedRequest({feed:e.facebookPageFeedTicket.facebookPageFeed,verb:e.verb}));break;case"TICKET_TWITTER_DIRECT_MESSAGE_EVENT_UPDATED":{const t=e.twitterDirectMessageEvent;t.ticket.id===v&&i(j.d.upsertTwitterDirectMessageEvent(Object(Fa.d)(t)));break}case"TICKET_TWITTER_STATUS_TICKET_UPDATED":if(e.twitterStatusTicket.ticket.id===v){const t=Object(Fa.a)(e.twitterStatusTicket);t.isTemp=!1,i(j.d.updateTwitterStatusFromDeskEvent(t))}break;case"TICKET_INSTAGRAM_COMMENT_UPDATED":e.instagramCommentTicket.ticket.id===v&&i(j.d.updateInstagramCommentFromDeskEvent(e.instagramCommentTicket));break;case"TICKET_WHATSAPP_MESSAGE_UPDATED":e.nexmoWhatsappMessage.ticket.id===v&&i(j.d.updateWhatsAppMessageFromDeskEvent(e.nexmoWhatsappMessage))}}catch(e){throw`The error is occurred while processing open channel event of ${JSON.parse(t.message).type} while receiving a message.`}},window.dashboardSB.addChannelHandler("FACEBOOK_HANDLER",e)},[g.project.openChannelUrl,i,v]);Object(a.useEffect)(()=>{x&&f.Sb.includes(x)&&N()},[N,x]);const R=e=>{if("string"==typeof e)T({q:e}),k({offset:0,query:e});else{const t=xa(e);T({q:t}),k({offset:0,query:va(e)})}},L=Object(a.useCallback)(()=>{p(!1)},[p]),U=Object(a.useCallback)(()=>{S()},[S]),$=Object(a.useCallback)(({action:t,agent:n,group:a})=>{if(h)switch(t){case"TRANSFER_TO_AGENT":return void l({dialogTypes:A.a.AssignTransferTicketToAgent,dialogProps:{mode:"TRANSFER",ticket:h,agent:n,origin:"conversation"}});case"ASSIGN_TO_AGENT":return void l({dialogTypes:A.a.AssignTransferTicketToAgent,dialogProps:{mode:"ASSIGN",ticket:h,agent:n,origin:"conversation",onSuccess:e=>{o.toast.success({message:Object(W.jsx)($a.a,{action:$a.b.ASSIGNED,ticketChannelName:e.channelName})})}}});case"REOPEN_TICKET":return void l({dialogTypes:A.a.ReopenTicket,dialogProps:{ticket:h}});case"CLOSE_TICKET":return void l({dialogTypes:A.a.CloseTicket,dialogProps:{ticket:h,origin:"conversation"}});case"INQUIRE_TICKET_CLOSURE":return void l({dialogTypes:A.a.ConfirmEndOfChat,dialogProps:{project:g.project,handleSubmit:async()=>{var e;const{groupChannel:t,userMessage:n}=await(async e=>{if(null==window.dashboardSB)throw new Error("Sendbird instance must be initialized first.");const{ticketId:t,channelUrl:n,message:a}=e,i={type:"SENDBIRD_DESK_INQUIRE_TICKET_CLOSURE",body:{state:"WAITING",ticketId:t}},s=await window.dashboardSB.GroupChannel.getChannel(n);return new Promise((e,t)=>{const n=new window.dashboardSB.UserMessageParams;n.message=a,n.data=JSON.stringify(i),n.customType="SENDBIRD_DESK_RICH_MESSAGE",s.sendUserMessage(n,(n,a)=>{if(a)return Object(H.logException)({error:a}),void t(a);e({userMessage:n,groupChannel:s})})})})({ticketId:h.id,channelUrl:h.channelUrl,message:g.project.inquireCloseMessage});null==(e=M.current)||e.appendMessages([n]),t.markAsRead(),I(!1)}}});case"MOVE_TO_IN_PROGRESS":return void l({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.inProgress"}),description:"",confirmText:e.formatMessage({id:"desk.dialogs.button.ok"}),cancelText:e.formatMessage({id:"desk.dialogs.button.cancel"}),onConfirm:()=>{i(j.d.moveTicketToWIPRequest(h))}}});case"MOVE_TO_IDLE":return void l({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle"}),description:"",confirmText:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.confirm"}),cancelText:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.cancel"}),onConfirm:()=>{i(j.d.moveTicketToIdleRequest({ticket:h,origin:"conversation"}))}}});case"ASSIGN_TICKET_TO_MYSELF":return void l({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.assignTicketToMyself.dialog.title"}),description:e.formatMessage({id:"desk.assignTicketToMyself.dialog.description"}),confirmText:e.formatMessage({id:"desk.assignTicketToMyself.dialog.button.confirm"}),cancelText:e.formatMessage({id:"desk.assignTicketToMyself.dialog.button.cancel"}),onConfirm:()=>{i(j.d.assignTicketToMyselfRequest(h))}}});case"TRANSFER_TO_GROUP":return void l({dialogTypes:A.a.AssignTransferTicketToGroup,dialogProps:{mode:"TRANSFER",ticket:h,group:a,origin:"conversation"}});case"EXPORT_TICKET":return void l({dialogTypes:A.a.ExportTicket,dialogProps:{ticketID:h.id,onSuccess:()=>{p(!0)}}});default:return}},[g.project,i,e,I,l,h]),V=e=>{switch(e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":return Object(Ua.b)(e,g.agent.id)?Object(W.jsx)(ad,{ticket:e},e.id):Object(W.jsx)(Su,{ticket:e,ref:M},e.id);case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":return Object(W.jsx)(Ru,{ticket:e},e.id);default:return null}};return Object(W.jsx)(Gn,{children:Object(W.jsx)(Hn.Consumer,{children:({ChatThreadGridItem:t,InformationSidebarGridItem:n})=>{var a;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(sm,{initialSearchQuery:{value:w,type:ea.TagsSearch},onSearch:R,onResetSearch:U}),Object(W.jsx)(ps,{isFetching:m,project:O,ticket:h,agent:g.agent,handleActionChange:$},null!=(a=null==h?void 0:h.id)?a:""),h?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(t,{styles:Object(r.css)(["display:flex;flex-direction:column;overflow:hidden;"]),children:[Object(W.jsx)(za,{}),Object(W.jsx)(yi,{children:V(h)}),u&&Object(W.jsx)(rm,{children:Object(W.jsx)(o.InlineNotification,{type:"info",message:e.formatMessage({id:"desk.dataExport.notification.dataExport.start"},{link:Object(W.jsx)(o.Link,{href:"../data_exports",variant:o.LinkVariant.Inline,useReactRouter:!0,children:e.formatMessage({id:"desk.dataExport.title"})})}),onClose:L})})]}),Object(W.jsx)(n,{children:Object(W.jsx)(ed,{hasLinkToDetail:!0,ticket:h})})]}):Object(W.jsx)(om,{}),Object(W.jsx)(ni,{ticketId:null!=v?v:void 0})]})}})})};var cm=n("/Tr7"),dm=n("jIYg");var um=n("wd/R"),pm=n.n(um);const gm=r.default.div.withConfig({displayName:"ProactiveChatMessages__DateLine",componentId:"sc-12vpvz4-0"})(["display:block;margin:0 24px;position:sticky;top:0;z-index:200;margin-bottom:12px;padding:10px 0;"]),hm=r.default.div.withConfig({displayName:"ProactiveChatMessages__DateLineTextWrapper",componentId:"sc-12vpvz4-1"})(["display:flex;justify-content:center;"]),mm=r.default.span.withConfig({displayName:"ProactiveChatMessages__DateLineText",componentId:"sc-12vpvz4-2"})(["font-size:13px;font-weight:600;color:",";padding:0 4px 2px 4px;letter-spacing:-0.3px;border-radius:4px;background:white;"],Object(o.cssVariables)("neutral-8")),fm=r.default.div.withConfig({displayName:"ProactiveChatMessages__MessagesWrapper",componentId:"sc-12vpvz4-3"})(["display:flex;flex-direction:column;padding:24px;"]),bm=({messages:e})=>{const t=Object(E.a)(),n=Object(a.useMemo)(()=>{const n=[];let a=null;return e.forEach((i,s)=>{const{id:r,message:o,createdAt:l,createdBy:c}=i,d=s<e.length-1?e[s+1]:null,u=Object(W.jsx)(gm,{"data-test-id":"DateLine",children:Object(W.jsx)(hm,{children:Object(W.jsx)(mm,{children:pm()(l).format("ll")})})},`dateline_${l}`);(null!=a&&Object(H.shouldRenderDateLine)({previousDate:a.createdAt,nextDate:l})||0===s)&&n.push(u);const p=!!d&&d.createdBy.id===i.createdBy.id&&function(e,t){Object(dm.a)(2,arguments);var n=Object(cm.a)(e),a=Object(cm.a)(t);return n.getTime()===a.getTime()}(new Date(d.createdAt).setSeconds(0,0),new Date(i.createdAt).setSeconds(0,0));La()(i)||n.push(Object(W.jsx)(Qo,{"data-test-id":"ChatBubble",message:o,date:pm()(l),status:t.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.message.status.sentBy"},{agentName:c.displayName}),avatar:{type:f.I.Customer,imageUrl:Gi,profileID:c.id},isOwn:!0,isAvatarHidden:p,isStatusHidden:p},r)),a=i}),n},[t,e]);return Object(W.jsx)(fm,{children:n})};var jm=n("/Yf2");const ym=()=>{const e=Object(jm.a)(),{drawerState:t}=e;return null!=t&&null!=t.ticket?e:{...e,drawerState:void 0}},Om=r.default.div.withConfig({displayName:"StatusChangedNotification__NotificationWrapper",componentId:"es0su-0"})(["display:grid;grid-template-columns:20px 1fr;grid-column-gap:16px;align-items:flex-start;border-radius:4px;background:",";padding:0 16px;"],Object(o.cssVariables)("neutral-2")),vm=r.default.div.withConfig({displayName:"StatusChangedNotification__ContentArea",componentId:"es0su-1"})(["display:flex;flex-direction:column;"]),xm=r.default.p.withConfig({displayName:"StatusChangedNotification__Message",componentId:"es0su-2"})(["color:",";padding:14px 0;",";"],Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),_m=r.default.div.withConfig({displayName:"StatusChangedNotification__Actions",componentId:"es0su-3"})(["margin-bottom:14px;button + button{margin-left:4px;}"]);var Cm=Object(r.default)(o.Icon).withConfig({displayName:"StatusChangedNotification___StyledIcon",componentId:"es0su-4"})(["margin-top:14px;"]),km=Object(r.default)("b").withConfig({displayName:"StatusChangedNotification___StyledB",componentId:"es0su-5"})(["font-weight:600;"]);const wm="proactiveChatView",Tm=Object(r.default)(V.uc).withConfig({displayName:"ProactiveChatViewDrawer__DrawerContainer",componentId:"sc-1jmnv1d-0"})(["display:grid;grid-template-rows:auto 1fr auto;width:560px;"]),Sm=r.default.header.withConfig({displayName:"ProactiveChatViewDrawer__Header",componentId:"sc-1jmnv1d-1"})(["display:grid;grid-template-areas:'title   title title    close' 'subject group priority .';grid-template-columns:auto auto 1fr 32px;grid-column-gap:8px;align-items:center;border-bottom:1px solid ",";padding:16px 16px 16px 24px;color:",";",";> div{display:flex;align-items:center;}> div::before{display:inline-block;margin-right:4px;background:",";width:1px;height:12px;content:'';}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-10"),o.Typography["caption-01"],Object(o.cssVariables)("neutral-3")),Em=r.default.div.withConfig({displayName:"ProactiveChatViewDrawer__Body",componentId:"sc-1jmnv1d-2"})(["overflow:hidden;"]),Im=r.default.h3.withConfig({displayName:"ProactiveChatViewDrawer__Title",componentId:"sc-1jmnv1d-3"})(["display:inline-flex;grid-area:title;align-items:center;height:32px;",";"],o.Headings["heading-03"]),Mm=Object(r.default)(o.IconButton).withConfig({displayName:"ProactiveChatViewDrawer__CloseButton",componentId:"sc-1jmnv1d-4"})(["grid-area:close;"]),Dm=r.default.span.withConfig({displayName:"ProactiveChatViewDrawer__Subject",componentId:"sc-1jmnv1d-5"})(["grid-area:subject;"]),Am=r.default.div.withConfig({displayName:"ProactiveChatViewDrawer__Footer",componentId:"sc-1jmnv1d-6"})(["display:flex;align-items:center;padding:24px;"]),Nm=r.default.div.withConfig({displayName:"ProactiveChatViewDrawer__MessageInput",componentId:"sc-1jmnv1d-7"})(["position:relative;width:100%;"]),Rm=r.default.div.withConfig({displayName:"ProactiveChatViewDrawer__DisabledCover",componentId:"sc-1jmnv1d-8"})(["display:",";position:absolute;top:0;right:0;left:0;bottom:0;background:",";opacity:0.4;border-radius:4px;z-index:1;"],({$disabled:e})=>e?"block":"none",Object(o.cssVariables)("neutral-1")),Pm=r.default.div.withConfig({displayName:"ProactiveChatViewDrawer__CEWrapper",componentId:"sc-1jmnv1d-9"})(["transition:border 0.2s ",";border-radius:4px;box-shadow:0 1px 5px 0 rgba(33,34,66,0.12),0 0 1px 0 rgba(33,34,66,0.16),0 2px 1px 0 rgba(33,34,66,0.08);max-height:","px;overflow:auto;"],o.transitionDefault,qi.INPUT_MAX_HEIGHT),Lm=Object(r.default)(V.B).withConfig({displayName:"ProactiveChatViewDrawer__StyledContentEditable",componentId:"sc-1jmnv1d-10"})(["padding:18px 56px 18px 16px;min-height:56px;"]);var Fm=Object(r.default)(Tl.a).withConfig({displayName:"ProactiveChatViewDrawer___StyledDeskCustomerAvatar",componentId:"sc-1jmnv1d-11"})(["margin-left:4px;margin-right:8px;"]),Um=Object(r.default)("div").withConfig({displayName:"ProactiveChatViewDrawer___StyledDiv",componentId:"sc-1jmnv1d-12"})(["grid-area:group;"]),$m=Object(r.default)(o.Icon).withConfig({displayName:"ProactiveChatViewDrawer___StyledIcon",componentId:"sc-1jmnv1d-13"})(["margin-right:4px;"]),Bm=Object(r.default)("div").withConfig({displayName:"ProactiveChatViewDrawer___StyledDiv2",componentId:"sc-1jmnv1d-14"})(["grid-area:priority;"]),Vm=Object(r.default)(o.Spinner).withConfig({displayName:"ProactiveChatViewDrawer___StyledSpinner",componentId:"sc-1jmnv1d-15"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),zm=Object(r.default)(({onBackButtonClick:e,onSeeTicketButtonClick:t,...n})=>{const a=Object(E.a)(),i=Object(s.k)(),r=Object(P.c)(),{isPermitted:l}=Object(P.h)(),{drawerState:c}=ym();return Object(W.jsx)(o.OverlayButtonBackgroundTypeContext.Provider,{value:o.OverlayButtonBackgroundType.Mono,children:Object(W.jsxs)(Om,{...n,children:[Object(W.jsx)(Cm,{icon:"info-filled",size:20,color:Object(o.cssVariables)("neutral-6"),assistiveText:"Notification"}),Object(W.jsxs)(vm,{children:[Object(W.jsx)(xm,{children:a.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.notification.content"},{b:e=>Object(W.jsx)(km,{children:e})})}),Object(W.jsxs)(_m,{children:[Object(W.jsx)(o.OverlayButton,{onClick:()=>{e()},children:a.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.notification.action.back"})}),Object(W.jsx)(o.OverlayButton,{onClick:()=>{if(c){const{ticket:e}=c,n=_a(Kn.TicketID,e.id.toString());t(),l(["desk.agent"])?i.push(`/${r}/desk/conversation/${e.id}?${n}`):i.push(`/${r}/desk/tickets/${e.id}?${n}`)}},children:a.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.notification.action.seeTicket"})})]})]})]})})}).withConfig({displayName:"ProactiveChatViewDrawer___StyledStatusChangedNotification",componentId:"sc-1jmnv1d-16"})(["margin:14px 24px 0;"]),Hm=Object(r.default)(o.IconButton).withConfig({displayName:"ProactiveChatViewDrawer___StyledIconButton",componentId:"sc-1jmnv1d-17"})(["position:absolute;right:12px;top:50%;transform:translateY(-50%);"]);const qm=()=>{const e=Object(E.a)(),t=Object(_o.a)(),{drawerState:n,activeDrawerID:i,closeDrawer:s}=ym(),{pid:r,region:l}=Object(L.a)(),{openChannelUrl:c}=Object(P.V)(e=>({openChannelUrl:e.desk.project.openChannelUrl})),[d,u]=Object(a.useState)([]),[p,g]=Object(a.useState)(!1),h=Object(a.useRef)(null),m=Object(a.useRef)(null),[{status:f,data:b},j]=Object(P.g)(e=>N.fetchProactiveChatDetail(r,l,e),[r,l],{status:"loading"}),y=Object(a.useCallback)(()=>{s(),null==n||null==n.onClose||n.onClose()},[s,n]),O=Object(a.useCallback)(()=>{u([]),g(!1),window.dashboardSB.removeChannelHandler("PROACTIVE_CHAT_HANDLER"),window.removeEventListener("popstate",y)},[y]),v=Object(a.useCallback)(()=>{if(null!=n){j({ticketId:n.ticket.id});const e=new window.dashboardSB.ChannelHandler;e.onMessageReceived=(e,t)=>{if(e.isOpenChannel()&&e.url===c)try{const e=JSON.parse(t.message);"TICKET_PROACTIVE_TO_PENDING"===e.type&&e.ticket.id===(null==n?void 0:n.ticket.id)&&g(!0)}catch(e){Object(H.logException)(e)}},window.dashboardSB.addChannelHandler("PROACTIVE_CHAT_HANDLER",e),window.addEventListener("popstate",y)}},[y,n,j,c]),x=Object(a.useCallback)(()=>{y()},[y]),_=Object(a.useCallback)(async()=>{var t,a;const i=null!=(t=null==(a=h.current)?void 0:a.getText())?t:"";if(n&&i.trim().length>0){var s;null==(s=h.current)||s.setText("");try{const{data:e}=await N.sendFollowUpMessage(r,l,{ticketId:n.ticket.id,message:i});u(t=>[...t,e])}catch{o.toast.error({message:e.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.notification.error"})})}}},[n,e,r,l]);if(Object(a.useEffect)(()=>{v()},[v]),Object(a.useEffect)(()=>{null==n&&i!==wm&&O()},[i,O,n]),Object(a.useEffect)(()=>{var e;"success"===f&&u(null!=(e=null==b?void 0:b.data.proactiveChat.messages)?e:[])},[null==b?void 0:b.data.proactiveChat.messages,f]),Object(a.useEffect)(()=>{"error"===f&&o.toast.error({message:e.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.notification.error"})})},[e,f]),Object(a.useEffect)(()=>{var e;null==(e=m.current)||e.scrollToBottom()},[d]),null!=n){var C;const{customer:a,channelName:i,priority:s,group:r}=n.ticket,l="error"===f||p;return Object(W.jsxs)(Tm,{id:wm,isDarkBackground:!0,isFullHeight:!0,children:[Object(W.jsxs)(Sm,{"data-test-id":"DrawerHeader",children:[Object(W.jsx)(Im,{children:e.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.title"},{profileImage:Object(W.jsx)(Fm,{profileID:a.id,imageUrl:null!=(C=a.photoThumbnailUrl)?C:"",size:20}),customerName:a.displayName})}),Object(W.jsx)(Mm,{"data-test-id":"CloseDrawerButton",icon:"close",buttonType:"tertiary",size:"small",onClick:x}),Object(W.jsx)(Dm,{children:i}),Object(W.jsxs)(Um,{children:[Object(W.jsx)($m,{icon:"teams",color:Object(o.cssVariables)("neutral-9"),size:12}),null==r?void 0:r.name]}),Object(W.jsx)(Bm,{children:Object(W.jsx)(V.Xb,{priority:s,showLabel:!0})})]}),Object(W.jsx)(Em,{"data-test-id":"Body",children:"loading"===f?Object(W.jsx)(Vm,{size:64}):Object(W.jsxs)(W.Fragment,{children:[p&&Object(W.jsx)(zm,{"data-test-id":"StatusChangedNotification",onBackButtonClick:y,onSeeTicketButtonClick:y}),Object(W.jsx)(o.ScrollBar,{ref:m,children:Object(W.jsx)(bm,{messages:d})})]})}),Object(W.jsx)(Am,{children:Object(W.jsxs)(Nm,{"data-test-id":"MessageInput",children:[Object(W.jsx)(Rm,{"data-test-id":"DisabledCover",$disabled:l}),Object(W.jsx)(Pm,{children:Object(W.jsx)(Lm,{dir:t,ref:h,placeholder:l?" ":e.formatMessage({id:"desk.drawer.proactiveChatViewDrawer.input.placeholder"}),isEditable:!l,onSubmit:_})}),Object(W.jsx)(Hm,{icon:"send",size:"small",buttonType:"tertiary",color:Object(o.cssVariables)("neutral-5"),onClick:_})]})})]})}return null},Gm=Object(a.createContext)({page:1,pageSize:f.qb,setPagination:()=>{}}),Wm=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"customerList__CustomerListTable",componentId:"sc-4592mq-0"})(["flex:1;border-right:none;border-left:none;"]),Km=Object(r.default)(V.hc).withConfig({displayName:"customerList__CustomerListContainer",componentId:"sc-4592mq-1"})([""," + *{margin-top:24px;}"],V.Sb),Ym=r.default.div.withConfig({displayName:"customerList__CustomerProfile",componentId:"sc-4592mq-2"})(["width:32px;height:32px;border-radius:50%;margin-top:-6px;margin-bottom:-6px;margin-right:12px;",";background-position:center;background-size:cover;"],e=>e.url?`background-image: url(${e.url})`:""),Qm=r.default.div.withConfig({displayName:"customerList__DisplayName",componentId:"sc-4592mq-3"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),Jm=Object(r.default)(V.Ub).withConfig({displayName:"customerList__CustomerListPaginator",componentId:"sc-4592mq-4"})(["margin-left:auto;"]),Xm={showDialogRequest:j.b.showDialogsRequest,fetchCustomersRequest:j.d.fetchCustomersRequest,fetchCustomersCancel:j.d.fetchCustomersCancel,setCustomersSearchQuery:j.d.setCustomersSearchQuery},Zm=Object(b.d)(e=>({application:e.applicationState.data,customers:e.customers,proactiveChatEnabled:e.desk.project.proactiveChatEnabled}),Xm)(({application:e,customers:t,fetchCustomersRequest:n,fetchCustomersCancel:i,setCustomersSearchQuery:l,showDialogRequest:d,proactiveChatEnabled:u})=>{const{isFetching:p,query:g,items:h,pagination:m}=t,{page:b,pageSize:j,setPagination:y}=Object(a.useContext)(Gm),{push:O}=Object(s.k)(),[v,x]=Object(a.useState)(g),_=Object(E.a)(),C=Object(a.useRef)(()=>{});Object(a.useEffect)(()=>{C.current=({limit:e=f.qb,offset:a=0,query:s=t.query})=>{p&&i(),n({offset:a,limit:e,query:s}),x(s||void 0)}},[t.query,i,n,p,x]),Object(a.useEffect)(()=>{C.current({offset:(b-1)*j,limit:j})},[b,j]);const k=Object(a.useCallback)(e=>{l(e)},[l]),w=Object(a.useCallback)(()=>{l(""),C.current({query:""})},[l]),T=Object(a.useCallback)(e=>{C.current({query:e})},[]);return Object(W.jsxs)(Km,{children:[Object(W.jsx)(V.Sb,{children:Object(W.jsx)(V.Sb.Title,{children:_.formatMessage({id:"desk.customers.title"})})}),Object(W.jsx)(V.ac,{styles:{SearchInput:Object(r.css)(["width:194px;height:32px;"])},ph:_.formatMessage({id:"desk.customers.customerList.table.search.placeholder"}),value:g,handleChange:k,handleSearchClear:w,handleSubmit:T}),Object(W.jsx)(Wm,{columns:[{dataIndex:"displayName",title:_.formatMessage({id:"desk.customers.customerList.table.label.name"}),flex:"30%",render:({photoThumbnailUrl:e,displayName:t})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ym,{url:e||`${f.n}/desk/thumbnail-member-0${Object(H.getRandomNumber)(t,3)}.svg`}),Object(W.jsx)(Qm,{children:t||f.Z})]})},{dataIndex:"sendbirdId",title:_.formatMessage({id:"desk.customers.customerList.table.label.id"}),flex:"45%"},{dataIndex:"createdAt",title:_.formatMessage({id:"desk.customers.customerList.table.label.created"}),render:({createdAt:e})=>c()(e).format("lll"),flex:"15%"}],dataSource:h,loading:p,showScrollbars:!0,emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:_.formatMessage({id:v?"desk.customers.search.header.noResult":"desk.customers.search.header.noItem"}),description:v?_.formatMessage({id:"desk.customers.search.desc.noResult"},{query:v}):_.formatMessage({id:"desk.customers.search.desc.noItem"})}),onRow:t=>{return{onClick:(n=t,()=>{e&&O(`/${e.app_id}/desk/customers/${n.id}`)}),style:{cursor:"pointer"}};var n},footer:Object(W.jsx)(Jm,{current:b,total:m.count,pageSize:j,onChange:y,onItemsPerPageChange:y}),rowActions:e=>{const t=u&&"SENDBIRD"===e.channelType,n=[{label:_.formatMessage({id:"desk.customers.customerList.table.menu.proactiveChatStart"}),onClick:()=>{d({dialogTypes:A.a.CreateProactiveChat,dialogProps:{targetCustomer:e}})},tooltip:t?void 0:{content:u?_.formatMessage({id:"desk.customers.detail.proactiveChat.button.tooltip.disabled.by.sns"}):_.formatMessage({id:"desk.customers.detail.proactiveChat.button.tooltip.disabled.by.setting.off"})},disabled:!t}];return[Object(W.jsx)(o.OverflowMenu,{items:n,stopClickEventPropagation:!0},"customerListOverflow")]}})]})});var ef=n("ANjH"),tf=Object(r.default)(o.Icon).withConfig({displayName:"ProactiveChatMessageCountBadge___StyledIcon",componentId:"dpl3n9-0"})(["margin-right:4px;"]);const nf=({messageCount:e,...t})=>{const n=Object(E.a)();return Object(W.jsx)(o.Tooltip,{content:n.formatMessage({id:"desk.proactiveChatMessageCountBadge.tooltip"}),placement:"top",popperProps:{modifiers:{offset:{offset:"0, 8"}}},children:Object(W.jsx)(o.Badge,{color:"neutral",count:e,max:9,prefixNode:Object(W.jsx)(tf,{icon:"proactive-chat-filled",size:12,color:Object(o.cssVariables)("neutral-7")}),...t})})};var af=n("Je2f"),sf=n("hxiM"),rf=n.n(sf);const of={instagramAccounts:[],isFetchingInstagramAccounts:!1,isPatchingInstagramAccounts:!1,fetchInstagramAccountsError:null,patchInstagramAccountsError:null},lf=(e,t)=>{switch(t.type){case"SET_INSTAGRAM_ACCOUNTS":return{...e,instagramAccounts:t.payload};case"FETCH_INSTAGRAM_ACCOUNTS_REQUEST":return{...e,isFetchingInstagramAccounts:!0,fetchInstagramAccountsError:null};case"FETCH_INSTAGRAM_ACCOUNTS_SUCCESS":return{...e,isFetchingInstagramAccounts:!1,instagramAccounts:t.payload,fetchInstagramAccountsError:null};case"ADD_INSTAGRAM_ACCOUNT_REQUEST":return{...e,isPatchingInstagramAccounts:!0,fetchInstagramAccountsError:null};case"ADD_INSTAGRAM_ACCOUNT_SUCCESS":return{...e,isPatchingInstagramAccounts:!1,instagramAccounts:rf()(t.payload,e.instagramAccounts,"id")};case"PATCH_INSTAGRAM_ACCOUNT_REQUEST":return{...e,isPatchingInstagramAccounts:!0,patchInstagramAccountsError:null};case"PATCH_INSTAGRAM_ACCOUNT_SUCCESS":return{...e,isPatchingInstagramAccounts:!1,instagramAccounts:e.instagramAccounts.map(e=>e.id===t.payload.id?t.payload:e)};case"FETCH_INSTAGRAM_ACCOUNTS_FAIL":return{...e,isFetchingInstagramAccounts:!1,isPatchingInstagramAccounts:!1,fetchInstagramAccountsError:t.payload};case"ADD_INSTAGRAM_ACCOUNT_FAIL":case"PATCH_INSTAGRAM_ACCOUNT_FAIL":return{...e,isFetchingInstagramAccounts:!1,isPatchingInstagramAccounts:!1,patchInstagramAccountsError:t.payload};default:return e}},cf={isFetchingTwitterUsers:!1,isFetchingTwitterOauthToken:!1,isFetchingSubscribeTwitter:!1,fetchTwitterUsersError:null,pendingUnsubscribeTwitterIDs:[],twitterUsers:[],isPatchingTwitterUser:!1},df=(e,t)=>{switch(t.type){case"SET_TWITTER_USERS":return{...e,twitterUsers:t.payload};case"FETCH_TWITTER_USERS_REQUEST":return{...e,isFetchingTwitterUsers:!0,fetchTwitterUsersError:null};case"FETCH_TWITTER_USERS_SUCCESS":return{...e,isFetchingTwitterUsers:!1,twitterUsers:t.payload,fetchTwitterUsersError:null};case"FETCH_TWITTER_USERS_FAIL":return{...e,isFetchingTwitterUsers:!1,fetchTwitterUsersError:t.payload};case"ADD_TWITTER_USER":return{...e,twitterUsers:[...e.twitterUsers,t.payload]};case"AUTHENTICATE_TWITTER_REQUEST":return{...e,isFetchingTwitterOauthToken:!0};case"AUTHENTICATE_TWITTER_DONE":return{...e,isFetchingTwitterOauthToken:!1};case"SUBSCRIBE_TWITTER_REQUEST":return{...e,isFetchingSubscribeTwitter:!0};case"SUBSCRIBE_TWITTER_DONE":return{...e,isFetchingSubscribeTwitter:!1};case"UNSUBSCRIBE_TWITTER_REQUEST":return{...e,pendingUnsubscribeTwitterIDs:[...e.pendingUnsubscribeTwitterIDs,t.payload]};case"UNSUBSCRIBE_TWITTER_SUCCESS":return{...e,twitterUsers:e.twitterUsers.filter(e=>e.id!==t.payload),pendingUnsubscribeTwitterIDs:e.pendingUnsubscribeTwitterIDs.filter(e=>e!==t.payload)};case"UNSUBSCRIBE_TWITTER_FAIL":return{...e,pendingUnsubscribeTwitterIDs:e.pendingUnsubscribeTwitterIDs.filter(e=>e!==t.payload)};case"PATCH_TWITTER_USER_REQUEST":return{...e,isPatchingTwitterUser:!0};case"PATCH_TWITTER_USER_SUCCESS":return{...e,isPatchingTwitterUser:!1,twitterUsers:e.twitterUsers.map(e=>e.id===t.payload.id?t.payload:e)};case"PATCH_TWITTER_USER_FAIL":return{...e,isPatchingTwitterUser:!1};default:return e}},uf=i.a.createContext({twitterReducer:{state:cf,dispatch:()=>cf,actions:{fetchTwitterUsers:async()=>{},authenticateTwitter:async()=>{},subscribeTwitterRequest:async()=>{},removeTwitterAccount:async()=>{},patchTwitterAccount:async()=>{}}},instagramReducer:{state:of,dispatch:()=>of,actions:{fetchInstagramAccounts:async()=>{},addInstagramAccountsRequest:async()=>{},patchInstagramAccountRequest:async()=>{}}}}),pf=({pid:e,region:t,children:n})=>{const i=(e=>{const[t,n]=Object(a.useReducer)(df,cf),{pid:i,region:s}=e,{getErrorMessage:r}=Object($.a)(),o=Object(a.useCallback)(async()=>{n({type:"FETCH_TWITTER_USERS_REQUEST"});try{const{data:{results:e}}=await Object(N.getProjectTwitterUsers)(i,s);n({type:"FETCH_TWITTER_USERS_SUCCESS",payload:e})}catch(e){n({type:"FETCH_TWITTER_USERS_FAIL",payload:r(e)})}},[r,i,s]),l=Object(a.useCallback)(async e=>{n({type:"AUTHENTICATE_TWITTER_REQUEST"});try{const{data:{oauth_token:t}}=await Object(N.getTwitterOauthToken)(i,s);H.ClientStorage.set("twitterCallbackRedirectPathname",e),location.assign(`https://api.twitter.com/oauth/authenticate?oauth_token=${t}`)}finally{n({type:"AUTHENTICATE_TWITTER_DONE"})}},[i,s]),c=Object(a.useCallback)(async e=>{n({type:"SUBSCRIBE_TWITTER_REQUEST"});try{return await Object(N.subscribeTwitter)(i,s,e),o()}finally{n({type:"SUBSCRIBE_TWITTER_DONE"})}},[i,s,o]),d=Object(a.useCallback)(async e=>{n({type:"UNSUBSCRIBE_TWITTER_REQUEST",payload:e});try{await Object(N.patchTwitterUser)(i,s,{id:e,status:"UNSUBSCRIBED"}),n({type:"UNSUBSCRIBE_TWITTER_SUCCESS",payload:e})}catch(t){throw n({type:"UNSUBSCRIBE_TWITTER_FAIL",payload:e}),t}},[i,s]),u=Object(a.useCallback)(async(e,t)=>{n({type:"PATCH_TWITTER_USER_REQUEST",payload:{id:e,...t}});try{const{data:a}=await Object(N.patchTwitterUser)(i,s,{id:e,...t});n({type:"PATCH_TWITTER_USER_SUCCESS",payload:a})}catch(e){throw n({type:"PATCH_TWITTER_USER_FAIL"}),e}},[i,s]);return{state:t,dispatch:n,actions:{fetchTwitterUsers:o,authenticateTwitter:l,subscribeTwitterRequest:c,removeTwitterAccount:d,patchTwitterAccount:u}}})({pid:e,region:t}),r=(e=>{const[t,n]=Object(a.useReducer)(lf,of),{getErrorMessage:i}=Object($.a)(),{pid:r,region:l}=e,c=Object(s.k)(),d=Object(E.a)(),u=Object(a.useCallback)(async()=>{n({type:"FETCH_INSTAGRAM_ACCOUNTS_REQUEST"});try{const{data:{results:e}}=await Object(N.getProjectInstagramAccounts)(r,l);if(!Array.isArray(e))throw n({type:"FETCH_INSTAGRAM_ACCOUNTS_FAIL",payload:""}),new Error(d.formatMessage({id:"desk.settings.integration.instagram.toast.fetch.fail"}));n({type:"FETCH_INSTAGRAM_ACCOUNTS_SUCCESS",payload:e})}catch(e){n({type:"FETCH_INSTAGRAM_ACCOUNTS_FAIL",payload:i(e)})}},[i,d,r,l]),p=Object(a.useCallback)(async({accessToken:e,onSuccessNavigateTo:t,onError:a})=>{n({type:"ADD_INSTAGRAM_ACCOUNT_REQUEST"});try{const{data:a}=await Object(N.instagramLoadAccounts)(r,l,{accessToken:e});if(!Array.isArray(a)||0===a.length)throw n({type:"ADD_INSTAGRAM_ACCOUNT_FAIL",payload:""}),new Error(d.formatMessage({id:"desk.settings.integration.instagram.toast.add.fail"}));n({type:"ADD_INSTAGRAM_ACCOUNT_SUCCESS",payload:a}),o.toast.success({message:d.formatMessage({id:"desk.settings.integration.instagram.toast.add.success.register"})}),t&&c.push(t)}catch(e){a&&a(e.data.code),n({type:"ADD_INSTAGRAM_ACCOUNT_FAIL",payload:i(e)}),o.toast.error({message:i(e)})}},[i,c,d,r,l]),g=Object(a.useCallback)(async({instagramUserId:e,isCommentEnabled:t,status:a,onSuccess:s})=>{n({type:"PATCH_INSTAGRAM_ACCOUNT_REQUEST"});try{const{data:i}=await Object(N.patchInstagramUser)(r,l,{instagramUserId:e,isCommentEnabled:t,status:a});if(!i)throw new Error(d.formatMessage({id:"desk.settings.integration.instagram.toast.patch.fail"}));n({type:"PATCH_INSTAGRAM_ACCOUNT_SUCCESS",payload:i}),o.toast.success({message:d.formatMessage({id:"INACTIVE"===a?"desk.settings.integration.instagram.toast.inactive.success":"desk.settings.integration.instagram.toast.patch.success"})}),null==s||s(i)}catch(e){n({type:"PATCH_INSTAGRAM_ACCOUNT_FAIL",payload:i(e)}),o.toast.error({message:i(e)})}},[i,d,r,l]);return{state:t,dispatch:n,actions:{fetchInstagramAccounts:u,addInstagramAccountsRequest:p,patchInstagramAccountRequest:g}}})({pid:e,region:t});return Object(a.useEffect)(()=>{e&&t&&(r.actions.fetchInstagramAccounts(),i.actions.fetchTwitterUsers())},[e,t]),Object(W.jsx)(uf.Provider,{value:{twitterReducer:i,instagramReducer:r},children:n})},gf=r.default.div.withConfig({displayName:"detail__HeaderWrapper",componentId:"sc-120ul1q-0"})(["display:flex;align-items:center;justify-content:center;border-bottom:1px solid ",";padding:0 32px;width:100%;height:80px;> *{width:100%;}button[disabled]{pointer-events:none;}"],Object(o.cssVariables)("neutral-3")),hf=r.default.div.withConfig({displayName:"detail__StyledCustomersDetail",componentId:"sc-120ul1q-1"})(["display:flex;flex-direction:column;justify-content:stretch;height:100%;min-height:0;overflow-y:auto;padding:0;"]),mf=r.default.div.withConfig({displayName:"detail__CustomerInformation",componentId:"sc-120ul1q-2"})([""]),ff=r.default.div.withConfig({displayName:"detail__DropdownWrapper",componentId:"sc-120ul1q-3"})(["margin-bottom:16px;"]),bf=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"detail__CustomerDetailTable",componentId:"sc-120ul1q-4"})(["flex:1;border-right:none;border-left:none;tbody tr > td{padding-top:16px;padding-bottom:16px;}"]),jf=r.default.div.withConfig({displayName:"detail__TicketSocialIcon",componentId:"sc-120ul1q-5"})(["margin-right:8px;height:16px;"]),yf=Object(r.default)(V.Ub).withConfig({displayName:"detail__CustomerTicketsPaginator",componentId:"sc-120ul1q-6"})(["margin-left:auto;"]),Of=r.default.div.withConfig({displayName:"detail__CustomerContainer",componentId:"sc-120ul1q-7"})(["display:flex;max-width:100%;height:calc(100% - 81px);"]),vf=r.default.div.withConfig({displayName:"detail__CustomerContainerLeft",componentId:"sc-120ul1q-8"})(["width:25%;min-width:288px;max-width:336px;height:100%;max-height:100%;overflow-y:auto;border-right:1px solid ",";"],Object(o.cssVariables)("neutral-3")),xf=Object(r.default)(V.z).withConfig({displayName:"detail__CustomerContainerRight",componentId:"sc-120ul1q-9"})(["display:flex;flex-direction:column;width:100%;max-width:100%;min-width:800px;height:100%;max-height:100%;padding:24px 32px 0 32px;overflow-x:auto;"]),_f=Object(r.default)(V.u).withConfig({displayName:"detail__CollapsibleSectionWrapper",componentId:"sc-120ul1q-10"})(["border-bottom:none;padding:0 32px;"]),Cf=r.default.div.withConfig({displayName:"detail__DisplayName",componentId:"sc-120ul1q-11"})(["flex:1;font-size:14px;font-weight:500;color:",";margin-left:8px;word-break:break-word;"],Object(o.cssVariables)("neutral-10")),kf=r.default.div.withConfig({displayName:"detail__LastMessage",componentId:"sc-120ul1q-12"})(["color:",";width:100%;font-size:12px;margin-top:4px;margin-bottom:4px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"],Object(o.cssVariables)("neutral-7")),wf=r.default.div.withConfig({displayName:"detail__LastAt",componentId:"sc-120ul1q-13"})(["display:flex;align-items:center;color:",";"," > span{margin-left:4px;}"],Object(o.cssVariables)("neutral-7"),o.Typography["caption-01"]),Tf=r.default.div.withConfig({displayName:"detail__IssuedAtDate",componentId:"sc-120ul1q-14"})(["color:",";"],Object(o.cssVariables)("neutral-10")),Sf=r.default.div.withConfig({displayName:"detail__RelatedTicket",componentId:"sc-120ul1q-15"})(["display:flex;flex-direction:column;max-width:100%;"]),Ef=r.default.div.withConfig({displayName:"detail__TicketHeader",componentId:"sc-120ul1q-16"})(["display:flex;align-items:center;"]),If=r.default.div.withConfig({displayName:"detail__TicketHeaderDisplayName",componentId:"sc-120ul1q-17"})(["color:",";font-weight:500;display:flex;"],Object(o.cssVariables)("neutral-10")),Mf=r.default.div.withConfig({displayName:"detail__AvatarWrapper",componentId:"sc-120ul1q-18"})(["flex:none;"]),Df={pushHistory:j.b.pushHistory,showDialogsRequest:j.b.showDialogsRequest,fetchCustomerRequest:j.d.fetchCustomerRequest,fetchCustomerTicketsRequest:j.d.fetchCustomerTicketsRequest,fetchCustomerTicketsCancel:j.d.fetchCustomerTicketsCancel,addCustomerFieldData:j.d.addCustomerFieldDataRequest,updateCustomerFieldData:j.d.updateCustomerFieldDataRequest,getCustomerFieldDataList:j.d.getCustomerFieldDataListRequest,fetchCustomerFields:j.d.fetchCustomerFieldsRequest},Af=[{label:"desk.customers.detail.typeFilter.all",value:void 0},{label:"desk.customers.detail.typeFilter.normal",value:f.lc.CUSTOMER_CHAT},{label:"desk.customers.detail.typeFilter.proactiveChat",value:f.lc.PROACTIVE_CHAT}];var Nf=Object(r.default)(V.Sb).withConfig({displayName:"detail___StyledPageHeader",componentId:"sc-120ul1q-19"})(["","{left:0;margin-right:8px;}"],e=>e._css),Rf=Object(r.default)(nf).withConfig({displayName:"detail___StyledProactiveChatMessageCountBadge",componentId:"sc-120ul1q-20"})(["margin-left:4px;"]),Pf=Object(r.default)(o.IconButton).withConfig({displayName:"detail___StyledIconButton",componentId:"sc-120ul1q-21"})(["margin-top:-6px;"]);const Lf=Object(ef.c)(e=>t=>{const n=Object(b.f)(),i=Object(b.g)(e=>e.customers.current),{twitterReducer:s}=Object(a.useContext)(uf),r=Object(P.R)(i.id);return Object(a.useEffect)(()=>{if(i.sendbirdId&&r!==i.id)switch(i.channelType){case"TWITTER_USER":{const{twitterUsers:e}=s.state;if(e.length>0){const t=e[0],a="//",s=i.sendbirdId.split(a)[1];n(j.d.fetchTwitterUserDetailRequest({agentTwitterUserId:t.id,customerTwitterUserId:s}))}}}},[i,s.state,r,n]),Object(W.jsx)(e,{socialReducer:{twitter:s},...t})},Object(b.d)(e=>({customers:e.customers,customerFields:e.customerFields,twitter:e.twitter}),Df))(({match:e,customers:t,customerFields:n,fetchCustomerRequest:i,fetchCustomerTicketsRequest:s,fetchCustomerTicketsCancel:l,pushHistory:d,addCustomerFieldData:u,updateCustomerFieldData:p,getCustomerFieldDataList:g,fetchCustomerFields:h,twitter:m,socialReducer:j,showDialogsRequest:y})=>{const O=Object(E.a)(),v=Object(P.c)(),{isPermitted:x,role:_}=Object(P.h)(),{openDrawer:C}=Object(jm.a)(),[k,w]=Object(a.useState)({}),[T,S]=Object(a.useState)(Af[0]),I=Object(a.createRef)(),M=Object(b.g)(e=>e.desk.project.proactiveChatEnabled),{current:D,customerTickets:N,customerTicketsPagination:R}=t,{customerId:L}=e.params,F=Object(a.useRef)(t.isFetchingCustomerTickets),{page:U,pageSize:$,setPagination:B}=Object(P.Q)(1,f.qb),q=j.twitter.state.twitterUsers[0],G=x(["desk.agent"]);Object(a.useEffect)(()=>{F.current=t.isFetchingCustomerTickets},[t.isFetchingCustomerTickets]),Object(a.useEffect)(()=>{h({offset:0,limit:50}),i(L)},[h,i,L]),Object(a.useEffect)(()=>{D.id&&g({id:D.id})},[g,D.id]);const K=Object(a.useCallback)(({offset:e=0,limit:t=f.qb,ticketStatus:n=f.jc.ALL,ticketType:a=T.value})=>{F.current&&l(),s({offset:e,limit:t,customerId:L,ticketStatus:n,ticketType:a})},[L,s,l,T]);Object(a.useEffect)(()=>{K({offset:(U-1)*$,limit:$})},[K,U,$]);const Y=e=>()=>{if(e.status2===f.jc.PROACTIVE)return;const t=_a(Kn.TicketID,e.id.toString());d(G?`/${v}/desk/conversation/${e.id}?${t}`:`/${v}/desk/tickets/${e.id}?${t}`)},Q=e=>{let t;switch(Object(H.getTicketSocialType)(e.channelType)){case"facebook":t=Object(W.jsx)(o.Icon,{icon:"facebook",size:16,color:Object(o.cssVariables)("neutral-7")});break;case"twitter":t=Object(W.jsx)(o.Icon,{icon:"twitter",size:16,color:Object(o.cssVariables)("neutral-7")});break;case"instagram":t=Object(W.jsx)(o.Icon,{icon:"instagram",size:16,color:Object(o.cssVariables)("neutral-7")});break;case"whatsapp":t=Object(W.jsx)(o.Icon,{icon:"whatsapp",size:16,color:Object(o.cssVariables)("neutral-7")})}return t&&Object(W.jsx)(jf,{children:t})},J=Object(a.useCallback)((e,t)=>{switch(Object(H.getTicketSocialType)(t.channelType)){case"facebook":case"twitter":case"instagram":return D.displayName;default:return e}},[D]),X=Object(a.useCallback)(e=>{e&&S(e)},[]),Z=Object(a.useCallback)(()=>{y({dialogTypes:A.a.CreateProactiveChat,dialogProps:{targetCustomer:D,onSuccess:()=>setTimeout(()=>{K({offset:(U-1)*$,limit:$})},100)}})},[y,D,K,U,$]),ee=Object(a.useMemo)(()=>{const e=!("SENDBIRD"===D.channelType)||!M,t=Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"send",onClick:Z,disabled:e,children:O.formatMessage({id:"desk.customers.detail.proactiveChat.button.label"})});return e?Object(W.jsx)(o.Tooltip,{content:M?O.formatMessage({id:"desk.customers.detail.proactiveChat.button.tooltip.disabled.by.sns"}):O.formatMessage({id:"desk.customers.detail.proactiveChat.button.tooltip.disabled.by.setting.off"}),children:t}):t},[O,D.channelType,M,Z]),te=Object(lh.a)();return Object(W.jsxs)(hf,{children:[Object(W.jsx)(gf,{children:Object(W.jsxs)(Nf,{_css:V.Sb.BackButton,children:[Object(W.jsx)(V.Sb.BackButton,{href:`/${v}/desk/customers`}),Object(W.jsx)(V.Sb.Title,{children:null==D.displayName||""===D.displayName.trim()?f.Z:D.displayName}),Object(W.jsx)(V.Sb.Actions,{children:ee})]})}),Object(W.jsxs)(Of,{children:[Object(W.jsx)(vf,{children:Object(W.jsx)(o.ScrollBar,{style:{height:"100%"},ref:I,children:Object(W.jsx)(mf,{children:Object(W.jsx)(V.G,{agentTwitter:q,customerTwitter:m.twitterUser,customer:D,hasLinkToDetail:!1,styles:Object(r.css)(["padding:24px 32px;"]),children:Object(W.jsx)(_f,{title:O.formatMessage({id:"desk.customers.detail.customerInformation.label"}),isCollapsible:!1,styles:Object(r.css)(["height:64px;"]),scrollBarRef:I,children:Object(W.jsx)(V.E,{id:D.id,fields:n,currentEditingField:k,addFieldData:u,updateFieldData:p,onAddOrEditButtonClick:e=>()=>w({id:e}),onCancelButtonClick:()=>w({}),settingLink:G?void 0:`/${v}/desk/settings/customer-fields`,role:_})})})})})}),Object(W.jsx)(o.ScrollBar,{style:{width:"100%"},children:Object(W.jsxs)(xf,{children:[Object(W.jsx)(ff,{children:Object(W.jsx)(o.Dropdown,{items:Af,size:"small",itemToString:e=>O.formatMessage({id:e.label}),selectedItem:T,initialSelectedItem:Af[0],onItemSelected:X})}),Object(W.jsx)(bf,{columns:[{dataIndex:"status",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.status"}),flex:1,width:98,render:e=>Object(W.jsx)(V.qc,{ticketStatus:e.status2})},{dataIndex:"channelName",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.subject"}),flex:3,width:200,render:e=>{var t;return Object(W.jsxs)(Sf,{children:[Object(W.jsxs)(Ef,{children:[Q(e),Object(W.jsxs)(If,{children:[J(e.channelName,e),e.status2===f.jc.PROACTIVE&&Object(W.jsx)(Rf,{messageCount:null!=(t=e.proactiveChatTicketMessageCount)?t:0})]})]}),e.lastMessage&&Object(W.jsx)(kf,{children:e.lastMessage}),e.lastMessageAt&&Object(W.jsxs)(wf,{children:[Object(W.jsx)(o.Icon,{icon:"time",size:12,color:Object(o.cssVariables)("neutral-7")}),Object(W.jsx)("span",{children:te(new Date(e.lastMessageAt))})]})]})}},{width:48,render:e=>e.status2===f.jc.PROACTIVE&&Object(W.jsx)(Pf,{"data-test-id":"SendFollowUpMessageButton",icon:"proactive-chat",buttonType:"tertiary",size:"small",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.button.sendMessage.tooltip"}),tooltipPlacement:"top",onClick:()=>C(wm,{ticket:e,onClose:()=>{K({offset:(U-1)*$,limit:$})}})})},{dataIndex:"customer",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.customer"}),flex:1,width:127,render:e=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Mf,{children:Object(W.jsx)(Tl.a,{size:"small",profileID:e.customer.id,imageUrl:e.customer.photoThumbnailUrl||""})}),Object(W.jsx)(Cf,{children:e.customer.displayName})]})},{dataIndex:"team",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.team"}),flex:1,width:90,render:e=>{if(e.group){const t=null==e.group.key;return Object(W.jsx)(o.Tag,{maxWidth:120,children:t?O.formatMessage({id:"desk.team.defaultTeam"}):e.group.name})}return Object(W.jsx)("span",{children:f.Z})}},{dataIndex:"recentAssignment",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.assignee"}),flex:1,width:146,render:e=>{var t;return Object(W.jsx)(af.a,{agent:null==(t=e.recentAssignment)?void 0:t.agent})}},{dataIndex:"issuedAt",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.label.created"}),flex:1,width:160,render:({issuedAt:e,createdAt:t})=>Object(W.jsx)(Tf,{children:c()(e||t).format("lll")})}],dataSource:N,loading:t.isFetchingCustomerTickets,emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:O.formatMessage({id:"desk.customers.detail.ticketList.table.noResult.title"}),description:O.formatMessage({id:"desk.customers.detail.ticketList.table.noResult.desc"})}),showScrollbars:!0,onRow:e=>({onClick:Y(e)}),rowStyles:e=>{const t=e.status2===f.jc.PROACTIVE;return Object(r.css)(["cursor:pointer;"," ",""],t&&Object(r.css)(["cursor:inherit;"]),!t&&Object(r.css)(["","{transition:color 0.2s ",";}&:hover{","{color:",";text-decoration:underline;}}"],If,o.transitionDefault,If,Object(o.cssVariables)("purple-7")))},footer:Object(W.jsx)(yf,{current:U,total:R.count,pageSize:$,onChange:B,onItemsPerPageChange:B})})]})})]})]})}),Ff=({match:e})=>{const{page:t,pageSize:n,setPagination:a}=Object(P.Q)(1,f.qb);return Object(W.jsxs)(Gm.Provider,{value:{page:t,pageSize:n,setPagination:a},children:[Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/:customerId`,component:Lf}),Object(W.jsx)(s.d,{path:`${e.url}`,component:Zm})]}),Object(W.jsx)(qm,{})]})},Uf=e=>{const t=c()();switch(e){case o.DateRangePickerValue.Today:return{startDate:t,endDate:t};case o.DateRangePickerValue.Yesterday:{const e=c()().subtract(1,"day");return{startDate:e,endDate:e}}case o.DateRangePickerValue.Last7Days:return{startDate:c()(t).subtract(6,"day"),endDate:t};case o.DateRangePickerValue.Last14Days:return{startDate:c()(t).subtract(13,"day"),endDate:t};case o.DateRangePickerValue.Last30Days:return{startDate:c()(t).subtract(29,"day"),endDate:t};case o.DateRangePickerValue.Last90Days:return{startDate:c()(t).subtract(89,"day"),endDate:t};default:return}},$f={dataType:void 0,status:void 0,dateRangeValue:o.DateRangePickerValue.AllDates,startDate:void 0,endDate:void 0},Bf={page:1,pageSize:f.qb,sortBy:Pt.CREATED_AT,order:f.Tb.DESCEND,...$f},Vf={isFetching:!1,dataExports:[],exportsCount:0},zf={state:Vf,setState:()=>{},fetchDataExports:()=>{},getDownloadURL:()=>{},isFiltered:!1,searchParams:{...Bf,updateParams:()=>{},clearParams:()=>{}}},Hf=(e,t)=>({...e,...t}),qf=Nt.map(e=>e.value),Gf=e=>{const t=Object(E.a)(),n=Object(B.a)(Bf,{page:e=>Ft(e),pageSize:e=>Ut(e),dataType:e=>(e=>{if(void 0===e)return!0;if("string"==typeof e)return Dt.includes(e);if(Array.isArray(e)){return e.every(e=>Dt.includes(e))}return!1})(e),dateRangeValue:(e,t)=>!![o.DateRangePickerValue.Today,o.DateRangePickerValue.Yesterday,o.DateRangePickerValue.Last7Days,o.DateRangePickerValue.Last14Days,o.DateRangePickerValue.Last30Days,o.DateRangePickerValue.Last90Days,o.DateRangePickerValue.Custom,o.DateRangePickerValue.AllDates].some(t=>t===e)&&!!(e!==o.DateRangePickerValue.Custom||t.startDate&&t.endDate),startDate:(e,t)=>{const n=t.dateRangeValue!==o.DateRangePickerValue.Custom;return!(!e||n)&&$t(e,t.endDate)},endDate:(e,t)=>{const n=t.dateRangeValue!==o.DateRangePickerValue.Custom;return!(!e||n)&&Bt(e,t.startDate)},status:e=>{if(e){return qf.some(t=>t===e)}return!0},sortBy:e=>{if(e){return[Pt.CREATED_AT,Pt.EXPIRED_AT].some(t=>t===e)}return!1},order:e=>{if(e){return[f.Tb.ASCEND,f.Tb.DESCEND].some(t=>t===e)}return!1}}),{pid:i,region:s}=Object(L.a)(),{getErrorMessage:r}=Object($.a)(),[l,d]=Object(a.useReducer)(Hf,{...Vf,...e}),{page:u,pageSize:p,dataType:g=null,status:h=null,startDate:m,endDate:b,sortBy:j,order:y,dateRangeValue:O}=n,v=Object(a.useMemo)(()=>"string"==typeof g?[g]:Array.isArray(g)?g:[],[g]),x=Object(a.useCallback)(async()=>{try{var e,t,n,a;d({isFetching:!0});let r={startDate:m,endDate:b};if(O!==o.DateRangePickerValue.Custom){const e=Uf(O||o.DateRangePickerValue.AllDates);e&&(r={startDate:e.startDate.format(f.nb),endDate:e.endDate.format(f.nb)})}const l=await Object(N.fetchDataExports)(i,s,{limit:p,offset:(u-1)*p,requestType:null!=v?v:void 0,status:null!=h?h:void 0,startDate:null!=(e=null==(t=r)?void 0:t.startDate)?e:void 0,endDate:null!=(n=null==(a=r)?void 0:a.endDate)?n:void 0,order:Object(H.getSorterParams)(j,y)});d({dataExports:l.data.results.map(e=>e.expiredAt&&c()(e.expiredAt).isBefore(c()())?{...e,status:f.O.EXPIRED}:e),isFetching:!1,exportsCount:l.data.count})}catch(e){d({isFetching:!1}),o.toast.error({message:r(e)})}},[m,b,O,i,s,p,u,v,h,j,y,r]),_=Object(a.useCallback)(async e=>{try{const{data:n}=await Object(N.getDownloadURL)(i,s,{id:e}),a=document.createElement("a");a.setAttribute("href",n.url),document.body.appendChild(a),a.click(),document.body.removeChild(a),o.toast.success({message:t.formatMessage({id:"desk.dataExport.toast.dataExport.success"})})}catch(e){o.toast.error({message:r(e)})}},[r,t,i,s]),C=Object(a.useMemo)(()=>!Object.keys($f).map(e=>{var t,a;return(null!=(t=$f[e])?t:null)===(null!=(a=n[e])?a:null)}).every(e=>e),[n]);return Object(a.useMemo)(()=>({state:l,setState:d,fetchDataExports:x,getDownloadURL:_,isFiltered:C,searchParams:{...n,dataType:v}}),[l,x,_,C,n,v])},Wf=Object(a.createContext)(zf),Kf=r.default.div.withConfig({displayName:"deskDataExportFilters__FilterContainer",componentId:"sc-8wy1or-0"})(["display:flex;align-items:center;margin-bottom:16px;"]),Yf=r.default.div.withConfig({displayName:"deskDataExportFilters__FilterWrapper",componentId:"sc-8wy1or-1"})(["margin-right:4px;"]),Qf=r.default.div.withConfig({displayName:"deskDataExportFilters__PrefixItem",componentId:"sc-8wy1or-2"})(["position:relative;display:flex;align-items:center;justify-content:space-between;height:48px;padding:14px 16px;border-bottom:1px solid ",";color:",";cursor:pointer;"," white-space:nowrap;"],Object(o.cssVariables)("neutral-3"),({isChecked:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),Jf=r.default.span.withConfig({displayName:"deskDataExportFilters__AllTypesText",componentId:"sc-8wy1or-3"})(["display:flex;align-items:center;padding-left:8px;height:30px;font-size:14px;font-weight:500;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),Xf=()=>{const e=Object(E.a)(),{searchParams:t,state:n}=Object(a.useContext)(Wf),{updateParams:i,dataType:s}=t,{isFetching:r}=n,[l,c]=Object(a.useState)(null!=s?s:[]),[d,u]=Object(a.useState)(!0),p=Mt.reduce((t,n)=>{var a;return t.push({...n,label:e.formatMessage({id:n.label}),tooltipContent:n.tooltipContent&&e.formatMessage({id:n.tooltipContent}),children:null==(a=n.children)?void 0:a.map(t=>({...t,label:e.formatMessage({id:t.label}),tooltipContent:t.tooltipContent&&e.formatMessage({id:t.tooltipContent})}))}),t},[]),g=Object(a.useMemo)(()=>p.reduce((e,t)=>{if(Object.prototype.hasOwnProperty.call(t,"children")){var n;if(!(null==(n=t.children)?void 0:n.every(e=>l.includes(e.value)))){var a;const n=null==(a=t.children)?void 0:a.filter(e=>l.includes(e.value));return e.concat(null!=n?n:[])}e.push(t)}else e.push(t);return e},[]),[p,l]),h=Object(a.useMemo)(()=>({value:"all",label:e.formatMessage({id:"desk.dataExport.filters.dataType.all"})}),[e]),m=Object(a.useCallback)(()=>{d||(c([]),u(!0),i({dataType:[]}))},[d,i]);return Object(W.jsx)(Yf,{"data-test-id":"DataTypeFilter",children:Object(W.jsx)(o.TreeSelect,{treeData:p,onSelect:(e,t)=>{const n=(e=>e.reduce((e,t)=>{switch(t.value){case f.U.TICKETS:return e.concat(kt.map(e=>e.value));case f.V.VIEWS:return e.concat(wt.map(e=>e.value));case f.R.REPORT_SUMMARY:return e.concat(Tt.map(e=>e.value));case f.G.REPORT_AGENT:return e.concat(St.map(e=>e.value));case f.K.REPORT_BOT:return e.concat(Et.map(e=>e.value));case f.S.REPORT_TEAM:return e.concat(It.map(e=>e.value));default:return e.concat(t.value)}},[]))(e);c(n),0===n.length||t?(c([]),i({dataType:void 0})):(c(n),i({dataType:n})),u(t)},selectedNodes:l.length>0?g:p,toggleRenderer:0===l.length?()=>Object(W.jsx)(Jf,{children:e.formatMessage({id:"desk.dataExport.filters.dataType.all"})}):void 0,disabled:r,width:l.length>0?260:150,prefixItem:Object(W.jsxs)(Qf,{isChecked:d,onClick:m,children:[h.label,d&&Object(W.jsx)(o.Icon,{icon:"done",size:20,color:Object(o.cssVariables)("purple-7")})]})})})},Zf=()=>{const{searchParams:e,state:t}=Object(a.useContext)(Wf),{dateRangeValue:n,startDate:i,endDate:s,updateParams:r}=e,{isFetching:l}=t,d=Object(a.useMemo)(()=>{switch(n){case o.DateRangePickerValue.Custom:return i&&s?{startDate:c()(i,f.nb),endDate:c()(s,f.nb)}:void 0;case o.DateRangePickerValue.AllDates:case null:return;default:return n&&Uf(n)}},[n,s,i]),u=Object(a.useCallback)((e,t)=>{const n=e===o.DateRangePickerValue.AllDates,a=e===o.DateRangePickerValue.Custom;r(t&&a?{dateRangeValue:e,startDate:null==t?void 0:t.startDate.format(f.nb),endDate:null==t?void 0:t.endDate.format(f.nb),page:1}:{dateRangeValue:n?void 0:e,startDate:void 0,endDate:void 0,page:1})},[r]);return Object(W.jsx)(Yf,{"data-test-id":"DateRangeFilter",children:Object(W.jsx)(V.Kb,{value:n||o.DateRangePickerValue.AllDates,dateRange:d,onChange:u,maxDate:c()(),disabled:l,size:"small"})})},eb=()=>{const e=Object(E.a)(),{searchParams:t,state:n}=Object(a.useContext)(Wf),{updateParams:i,status:s}=t,{isFetching:r}=n,l=Nt.map(t=>({...t,label:e.messages[t.label]})),c=Object(a.useMemo)(()=>l.find(e=>e.value===s)||l[0],[s,l]),d=Object(a.useCallback)(e=>{var t;e&&i({status:null!=(t=e.value)?t:void 0})},[i]);return Object(W.jsx)(Yf,{"data-test-id":"StatusFilter",children:Object(W.jsx)(o.Dropdown,{placement:"bottom-start",items:l,selectedItem:c,size:"small",itemToString:e=>e.label,onItemSelected:d,disabled:r})})},tb=()=>Object(W.jsxs)(Kf,{"data-test-id":"DeskDataExportFilter",children:[Object(W.jsx)(Xf,{}),Object(W.jsx)(Zf,{}),Object(W.jsx)(eb,{})]}),nb=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"deskDataExportList__StyledTable",componentId:"sc-11boala-0"})(["flex:1;"]),ab=Object(r.default)(V.Ub).withConfig({displayName:"deskDataExportList__DeskDataExportPaginator",componentId:"sc-11boala-1"})(["margin-left:auto;"]),ib=r.default.div.withConfig({displayName:"deskDataExportList__FailedMessage",componentId:"sc-11boala-2"})(["font-size:12px;color:",";"],Object(o.cssVariables)("neutral-6")),sb=i.a.memo(({exportRecord:e})=>{const t=Object(E.a)(),{getDownloadURL:n}=Object(a.useContext)(Wf),[i,s]=Object(a.useState)(!1),r=Object(a.useCallback)(async()=>{s(!0),await n(e.id),s(!1)},[e.id,n]);switch(e.status){case f.O.COMPLETED:return e.filename?Object(W.jsx)(o.Button,{buttonType:"secondary",size:"small",icon:"download",onClick:r,isLoading:i,children:t.messages["desk.dataExport.downloadStatus.button.download"]}):Object(W.jsx)("div",{children:t.formatMessage({id:"desk.dataExport.downloadStatus.completed.noMatch"})});case f.O.FAILED:return Object(W.jsx)(ib,{children:t.formatMessage({id:"desk.dataExport.downloadStatus.failed.message"})});default:return null}}),rb=i.a.memo(({status:e})=>{const t=Object(E.a)(),n=Rt[e];return Object(W.jsx)(o.Lozenge,{"data-test-id":"StatusLozenge",color:n.color,children:t.formatMessage({id:n.label})})}),ob=i.a.memo(({exportRecord:e})=>{if(e.params){const t=Object(H.camelCaseKeys)(JSON.parse(e.params)),{startDate:n,endDate:a}=t;if(n&&a)return Object(W.jsxs)("div",{children:[Object(W.jsxs)("div",{children:[c()(n).format("lll")," - "]}),Object(W.jsx)("div",{children:c()(a).format("lll")})]})}return Object(W.jsx)(W.Fragment,{children:f.Z})}),lb=()=>{const e=Object(E.a)(),{state:t,searchParams:n,isFiltered:i}=Object(a.useContext)(Wf),{dataExports:s,exportsCount:r,isFetching:o}=t,{updateParams:l,page:d,pageSize:u,sortBy:p,order:g}=n,h=Object(a.useCallback)((e,t)=>{l({page:e,pageSize:t})},[l]),m=Object(a.useCallback)((e,t)=>{l({page:e,pageSize:t})},[l]),b=Object(a.useCallback)((e,t)=>{e&&t&&l({sortBy:e.key,order:t})},[l]),j=Object(a.useCallback)(e=>p===e?g:void 0,[p,g]);return Object(W.jsx)(nb,{rowKey:"id",dataSource:s,loading:o,columns:[{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.id"}),key:"id",dataIndex:"id",flex:1},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.requester"}),key:"requester",flex:2,render:e=>{var t;return Object(W.jsx)("div",{children:null==(t=e.createdBy)?void 0:t.displayName})}},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.dataType"}),dataIndex:"requestType",key:"requestType",flex:2,render:({requestType:t})=>(t=>{if(!t||!Object.keys(At).includes(t))return f.Z;const{exportFrom:n,label:a}=At[t];return`${e.formatMessage({id:n})} > ${e.formatMessage({id:a})}`})(t)},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.dateRange"}),key:"dateRange",flex:1,render:e=>Object(W.jsx)(ob,{exportRecord:e})},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.createOn"}),dataIndex:"createdAt",flex:1,sorter:!0,key:Pt.CREATED_AT,defaultSortOrder:j(Pt.CREATED_AT),render:({createdAt:e})=>e?c()(e).format("lll"):f.Z},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.expiration"}),dataIndex:"expiredAt",flex:1,sorter:!0,key:Pt.EXPIRED_AT,defaultSortOrder:j(Pt.EXPIRED_AT),render:({expiredAt:e})=>e?c()(e).format("lll"):f.Z},{title:e.formatMessage({id:"desk.dataExport.exportList.table.column.status"}),dataIndex:"status",key:"status",flex:1,render:({status:e})=>Object(W.jsx)(rb,{status:e})},{key:"download",flex:2,render:e=>Object(W.jsx)(sb,{exportRecord:e})}],onSortByUpdated:b,showScrollbars:!0,emptyView:i?Object(W.jsx)(z.a,{icon:"no-data",title:e.messages["desk.dataExport.exportList.noResult.title"],description:e.messages["desk.dataExport.exportList.noResult.desc"]}):Object(W.jsx)(z.a,{icon:"data-export",title:e.messages["desk.dataExport.exportList.noData.title"],description:e.messages["desk.dataExport.exportList.noData.desc"]}),footer:Object(W.jsx)(ab,{current:d,total:r,pageSize:u,pageSizeOptions:f.E,onChange:h,onItemsPerPageChange:m})})},cb=Object(r.default)(V.Rb).withConfig({displayName:"dataExport__Container",componentId:"sc-32ywtf-0"})(["display:flex;flex-direction:column;height:100%;"]);var db=Object(r.default)(V.Sb).withConfig({displayName:"dataExport___StyledPageHeader",componentId:"sc-32ywtf-1"})(["& + *{margin-top:24px;}"]),ub=Object(r.default)(V.f).withConfig({displayName:"dataExport___StyledAutoRefreshDropdown",componentId:"sc-32ywtf-2"})(["margin-left:8px;"]);const pb=()=>{const e=Object(E.a)(),t=Gf(),{fetchDataExports:n}=t,i=Object(a.useCallback)(()=>{n()},[n]);return Object(a.useEffect)(()=>{n()},[n]),Object(W.jsx)(Wf.Provider,{value:t,children:Object(W.jsxs)(cb,{children:[Object(W.jsx)(db,{children:Object(W.jsxs)(V.Sb.Title,{children:[e.formatMessage({id:"desk.dataExport.title"}),Object(W.jsx)(ub,{onRefreshTriggered:i})]})}),Object(W.jsx)(tb,{}),Object(W.jsx)(lb,{})]})})};var gb=n("gQMU"),hb=n.n(gb),mb=n("X8yK"),fb=n("tGOr");const{background:bb,hover:jb,size:yb}=Object(mb.d)({dataSize:6}),Ob=Object(r.default)(V.Rb).withConfig({displayName:"monitoring__MonitoringContainer",componentId:"sc-1intp8b-0"})(["padding-top:88px;padding-bottom:48px;"]),vb=r.default.section.withConfig({displayName:"monitoring__FixedSection",componentId:"sc-1intp8b-1"})(["position:fixed;top:","px;left:","px;right:0;z-index:80;padding-top:24px;padding-bottom:24px;background:white;transition:",";"],({gnbHeight:e})=>e||0,({isCollapsed:e})=>e?o.LeftNavigationBar.collapsedWidth:o.LeftNavigationBar.defaultWidth,Object(o.transitions)({duration:.2,properties:["top","left"]})),xb=r.default.section.withConfig({displayName:"monitoring__Section",componentId:"sc-1intp8b-2"})(["& + &{margin-top:32px;}"]),_b=r.default.h2.withConfig({displayName:"monitoring__SectionTitle",componentId:"sc-1intp8b-3"})(["margin:0;padding-bottom:12px;font-size:16px;font-weight:500;line-height:1.25;letter-spacing:-0.15px;color:",";"],Object(o.cssVariables)("neutral-7")),Cb=r.default.div.withConfig({displayName:"monitoring__MonitorTime",componentId:"sc-1intp8b-4"})(["display:inline-block;font-size:14px;color:",";"],Object(o.cssVariables)("neutral-6")),kb=Object(r.default)(o.IconButton).withConfig({displayName:"monitoring__MonitorRefreshButton",componentId:"sc-1intp8b-5"})(["margin-left:8px;"]),wb=r.default.div.withConfig({displayName:"monitoring__MonitoringBoxContainer",componentId:"sc-1intp8b-6"})(["display:flex;flex-direction:column;align-items:flex-start;padding:24px;height:100%;border-radius:4px;border:solid 1px ",";background:",";transition:background "," ",";"],Object(o.cssVariables)("neutral-3"),e=>e.isUpdated?Object(o.cssVariables)("purple-3"):"white",e=>e.isUpdated?"0.1s":"0.5s",o.transitionDefault),Tb=r.default.h3.withConfig({displayName:"monitoring__MonitoringBoxTitle",componentId:"sc-1intp8b-7"})(["display:flex;align-items:center;margin:0;font-size:16px;font-weight:600;line-height:1.25;letter-spacing:-0.15px;color:",";"],Object(o.cssVariables)("neutral-10")),Sb=r.default.span.withConfig({displayName:"monitoring__MonitoringBoxIcon",componentId:"sc-1intp8b-8"})(["margin-left:4px;"]),Eb=r.default.div.withConfig({displayName:"monitoring__MonitoringBoxContent",componentId:"sc-1intp8b-9"})(["flex:1;display:flex;align-items:",";justify-content:",";flex-direction:",";width:100%;"],({alignItems:e})=>e||"flex-end",({justifyContent:e})=>e||"flex-start",({flexDirection:e})=>e),Ib=r.default.div.withConfig({displayName:"monitoring__MetricValueContainer",componentId:"sc-1intp8b-10"})(["display:flex;flex-direction:column;text-align:center;& + &{margin-top:16px;}"]),Mb=r.default.span.withConfig({displayName:"monitoring__MonitoringValue",componentId:"sc-1intp8b-11"})(["display:inline-block;margin-top:38px;font-size:36px;font-weight:500;line-height:1.22;letter-spacing:-0.5px;color:",";"],Object(o.cssVariables)("purple-7")),Db=r.default.span.withConfig({displayName:"monitoring__MetricValue",componentId:"sc-1intp8b-12"})(["font-size:","px;font-weight:",";color:",";"],({valueFontSize:e})=>e||36,({valueFontSize:e})=>56===e?400:24===e?600:500,({valueFontColor:e})=>e||Object(o.cssVariables)("purple-7")),Ab=r.default.span.withConfig({displayName:"monitoring__MetricLabel",componentId:"sc-1intp8b-13"})(["margin-top:","px;font-size:14px;line-height:1.43;letter-spacing:-0.1px;text-align:center;color:",";"],({valueFontSize:e})=>56===e?4:2,Object(o.cssVariables)("neutral-6")),Nb=r.default.div.withConfig({displayName:"monitoring__MetricListItem",componentId:"sc-1intp8b-14"})(["display:flex;padding:7px 0 6px;"]),Rb=r.default.div.withConfig({displayName:"monitoring__MetricListItemLabel",componentId:"sc-1intp8b-15"})(["flex:1;font-size:14px;text-align:left;color:",";"],Object(o.cssVariables)("neutral-7")),Pb=r.default.div.withConfig({displayName:"monitoring__MetricListItemValue",componentId:"sc-1intp8b-16"})(["flex:1;text-align:right;font-size:14px;color:",";"],Object(o.cssVariables)("purple-7")),Lb=r.default.div.withConfig({displayName:"monitoring__MetricListHeader",componentId:"sc-1intp8b-17"})(["display:flex;padding:6px 0;font-size:12px;color:",";border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-3")),Fb=r.default.div.withConfig({displayName:"monitoring__MetricListHeaderLeft",componentId:"sc-1intp8b-18"})(["flex:1;text-align:left;"]),Ub=r.default.div.withConfig({displayName:"monitoring__MetricListHeaderRight",componentId:"sc-1intp8b-19"})(["flex:1;text-align:right;"]),$b=r.default.div.withConfig({displayName:"monitoring__MetricList",componentId:"sc-1intp8b-20"})(["width:100%;margin-top:32px;"," + ","{border-top:1px solid ",";}"],Nb,Nb,Object(o.cssVariables)("neutral-3")),Bb=Object(r.default)(o.GridItem).withConfig({displayName:"monitoring__GridItemWrapper",componentId:"sc-1intp8b-21"})(["height:325px;"]),Vb=Object(r.default)(o.Grid).withConfig({displayName:"monitoring__GridTicketsPerAgent",componentId:"sc-1intp8b-22"})(["height:100%;"]),zb=Object(r.default)(o.Grid).withConfig({displayName:"monitoring__TimeGrid",componentId:"sc-1intp8b-23"})(["width:100%;margin-top:40px;"]),Hb=r.default.div.withConfig({displayName:"monitoring__TicketReportMetrics",componentId:"sc-1intp8b-24"})(["padding:36px 0;"]),qb=r.default.div.withConfig({displayName:"monitoring__BarChartContainer",componentId:"sc-1intp8b-25"})(["margin-top:40px;width:100%;height:192px;"]),Gb=["#8362fb","#806ffd","#7d7efd","#7a8cff"],Wb=i.a.memo(({className:e,title:t,titleTooltipText:n,contentAlignItems:i,contentJustifyContent:s,contentDirection:r,value:l,updatableChildrenValues:c,titleTooltipPlacement:d,children:u})=>{const[p,g]=Object(a.useState)(!1),h=Object(a.useRef)(null),m=Object(P.R)(l),f=Object(P.R)(c);return Object(a.useEffect)(()=>{(m&&m!==l||Array.isArray(f)&&!xs()(f,c))&&(g(!0),setTimeout(()=>{g(!1)},100))},[m,f,l,c]),Object(W.jsxs)(wb,{className:e,isUpdated:p,children:[Object(W.jsxs)(Tb,{children:[t,n&&Object(W.jsx)(o.Tooltip,{ref:h,content:n,placement:d||"top",children:Object(W.jsx)(Sb,{onMouseEnter:()=>{var e;null==(e=h.current)||e.show()},onMouseLeave:()=>{var e;null==(e=h.current)||e.hide()},children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})})]}),Object(W.jsxs)(Eb,{alignItems:i,justifyContent:s,flexDirection:r,children:["number"==typeof l?Object(W.jsx)(Mb,{children:l}):null,u]})]})}),Kb=Object(r.default)(Wb).withConfig({displayName:"monitoring__CustomMonitoringBox",componentId:"sc-1intp8b-26"})(["padding-bottom:0;"]),Yb=i.a.memo(({value:e,label:t,theme:n,valueFontSize:a})=>Object(W.jsxs)(Ib,{children:[Object(W.jsx)(Db,{valueFontSize:a,valueFontColor:(e=>{switch(e){case"online":return Object(o.cssVariables)("green-5");case"away":return Object(o.cssVariables)("orange-5");case"offline":return Object(o.cssVariables)("neutral-6");default:return Object(o.cssVariables)("purple-7")}})(n),children:"string"==typeof e?e:Object(W.jsx)(V.Z,{value:e,speed:250})}),Object(W.jsx)(Ab,{valueFontSize:a,children:t})]})),Qb=i.a.memo(({rowKey:e,percentiles:t,intl:n})=>Object(W.jsxs)($b,{children:[Object(W.jsxs)(Lb,{children:[Object(W.jsx)(Fb,{children:n.formatMessage({id:"desk.monitoring.lbl.percentile"})}),Object(W.jsx)(Ub,{children:n.formatMessage({id:"desk.monitoring.lbl.averageTime"})})]}),Object.keys(t).map(n=>Object(W.jsxs)(Nb,{children:[Object(W.jsxs)(Rb,{children:[n.replace(/\D/g,"")," %"]}),Object(W.jsx)(Pb,{children:Object(H.renderTimestring)(t[n])})]},`${e}-${n}`))]})),Jb={currentActiveTicketCount:0,currentIdleTicketCount:0,currentPendingTicketCount:0,currentWipTicketCount:0,currentOfflineAgent:0,currentOnlineAgent:0,currentAwayAgent:0,currentAverageAgentLoad:0,currentAverageOnlineAgentLoad:0,todayAverageDurationTime:0,todayAveragePendingTime:0,todayAverageResponseTime:0,todayAverageFirstAssignmentToCloseTime:0,todayAverageConversationTime:0,todayCloseStatusCounts:[],todayClosedTicketCount:0,todayIssuedTicketCount:0,todayLongestConversationTime:null,todayLongestDurationTime:null,todayLongestFirstAssignmentToCloseTime:null,todayLongestPendingTime:null,todayLongestResponseTime:null,todayCustomerSatisfactionScores:[],todayPercentilePendingTime:{p95:0,p90:0,p80:0},todayPercentileResponseTime:{p95:0,p90:0,p80:0},todayPercentileDurationTime:{p95:0,p90:0,p80:0},todayPercentileFirstAssignmentToCloseTime:{p95:0,p90:0,p80:0},todayPercentileConversationTime:{p95:0,p90:0,p80:0},todayTicketFunnel:{initialized:0,pending:0,assigned:0,closed:0}},Xb={assigned:"desk.monitoring.lbl.assigned",closed:"desk.monitoring.lbl.closed",initialized:"desk.monitoring.lbl.initialized",pending:"desk.monitoring.lbl.pending"},Zb={CLOSED_BY_CUSTOMER:"desk.monitoring.closedStatuses.lbl.customer",CLOSED_BY_AGENT:"desk.monitoring.closedStatuses.lbl.agent",CLOSED_BY_ADMIN:"desk.monitoring.closedStatuses.lbl.admin",CLOSED_BY_SYSTEM:"desk.monitoring.closedStatuses.lbl.system",CLOSED_BY_PLATFORM_API:"desk.monitoring.closedStatuses.lbl.platform",CLOSED_BUT_NOT_DEFINED:"desk.monitoring.closedStatuses.lbl.undefined"};var ej=Object(r.default)(V.Sb).withConfig({displayName:"monitoring___StyledPageHeader",componentId:"sc-1intp8b-27"})(["width:100% !important;"]);const tj=i.a.memo(()=>{const e=Object(E.a)(),t=Object(a.useContext)(m.a),{isCollapsed:n,isForceCollapsed:i}=Object(a.useContext)(S.a),[s,r]=Object(a.useState)(c()().format("lll (z)")),[l,d]=Object(a.useState)(Jb),[u,p]=Object(a.useState)(!1),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:b}=Object($.a)(),j=Object(a.useCallback)(async()=>{p(!0);try{const{data:e}=await D.g.fetchMonitorMetric(g,h);d(e),p(!1)}catch(e){o.toast.error({message:b(e)}),p(!1)}},[b,g,h]),y=Object(a.useCallback)(e=>{e&&e.preventDefault(),j(),r(c()().format("lll (z)"))},[j]);Object(a.useEffect)(()=>(y(),()=>{d(Jb)}),[y]),Object(P.C)(()=>{y()},3e4);const{currentActiveTicketCount:O,currentIdleTicketCount:v,currentPendingTicketCount:x,currentWipTicketCount:_,currentOfflineAgent:C,currentOnlineAgent:k,currentAwayAgent:w,currentAverageAgentLoad:T,currentAverageOnlineAgentLoad:I,todayAverageDurationTime:M,todayAveragePendingTime:A,todayAverageResponseTime:N,todayAverageFirstAssignmentToCloseTime:R,todayAverageConversationTime:F,todayCloseStatusCounts:U,todayClosedTicketCount:B,todayIssuedTicketCount:z,todayPercentilePendingTime:q,todayPercentileResponseTime:G,todayPercentileDurationTime:K,todayPercentileFirstAssignmentToCloseTime:Y,todayPercentileConversationTime:Q,todayTicketFunnel:J,todayLongestConversationTime:X,todayLongestDurationTime:Z,todayLongestFirstAssignmentToCloseTime:ee,todayLongestPendingTime:te,todayLongestResponseTime:ne,todayCustomerSatisfactionScores:ae}=l,ie=Object(a.useRef)({labels:[],values:[]});Object(a.useEffect)(()=>{ie.current=U.reduce((t,n)=>(t.labels[Object(H.getClosedStatusesIndex)(n.closeStatus)]=e.formatMessage({id:Zb[n.closeStatus]}),t.values[Object(H.getClosedStatusesIndex)(n.closeStatus)]=n.counts,t),{labels:new Array(yb).fill(""),values:new Array(yb).fill(0)})},[e,U]);const se=[{key:"firstAssigned",average:A,longest:te,percentiles:q},{key:"firstResponse",average:N,longest:ne,percentiles:G},{key:"ticketProcessing",average:R,longest:ee,percentiles:Y},{key:"ticketResolution",average:M,longest:Z,percentiles:K},{key:"ticketMessing",average:F,longest:X,percentiles:Q}];return Object(W.jsxs)(Ob,{children:[Object(W.jsx)(vb,{gnbHeight:t,isCollapsed:n||i,children:Object(W.jsx)(V.z,{children:Object(W.jsxs)(ej,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"desk.monitoring.header.title"})}),Object(W.jsxs)(V.Sb.Actions,{children:[Object(W.jsx)(Cb,{children:e.formatMessage({id:"desk.monitoring.updated"},{time:s})}),Object(W.jsx)(kb,{title:e.formatMessage({id:"desk.monitoring.button.refresh"}),tooltipPlacement:"bottom",icon:"refresh",size:"xsmall",buttonType:"tertiary",isLoading:u,onClick:y})]})]})})}),Object(W.jsxs)(xb,{children:[Object(W.jsx)(_b,{children:e.formatMessage({id:"desk.monitoring.sectionTitle.ticketAgentActivity"})}),Object(W.jsxs)(o.Grid,{gap:32,templateColumn:4,children:[Object(W.jsx)(Bb,{colSpan:2,children:Object(W.jsxs)(o.Grid,{gap:16,templateColumn:2,children:[Object(W.jsx)(o.GridItem,{colSpan:1,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.pending.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.pending.desc"}),value:x})}),Object(W.jsx)(o.GridItem,{colSpan:1,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.active.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.active.desc"}),value:O})}),Object(W.jsx)(o.GridItem,{colSpan:1,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.idle.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.idle.desc"}),titleTooltipPlacement:"top-start",value:v})}),Object(W.jsx)(o.GridItem,{colSpan:1,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.wip.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.wip.desc"}),titleTooltipPlacement:"top-start",value:_})})]})}),Object(W.jsx)(Bb,{colSpan:1,children:Object(W.jsxs)(Vb,{gap:16,templateColumn:2,children:[Object(W.jsx)(o.GridItem,{colSpan:2,children:Object(W.jsx)(Kb,{title:e.formatMessage({id:"desk.monitoring.ticketsPerAgent.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.ticketsPerAgent.desc"}),updatableChildrenValues:[T],contentAlignItems:"center",contentJustifyContent:"center",children:Object(W.jsx)(Yb,{value:0===T?0:Number(T).toFixed(2),valueFontSize:36,label:e.formatMessage({id:"desk.monitoring.ticketsPerAgent.label"})})})}),Object(W.jsx)(o.GridItem,{colSpan:2,children:Object(W.jsx)(Kb,{title:e.formatMessage({id:"desk.monitoring.ticketsPerOnlineAgent.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.ticketsPerOnlineAgent.desc"}),updatableChildrenValues:[I],contentAlignItems:"center",contentJustifyContent:"center",children:Object(W.jsx)(Yb,{value:0===I?0:Number(I).toFixed(2),valueFontSize:36,label:e.formatMessage({id:"desk.monitoring.ticketsPerOnlineAgent.label"})})})})]})}),Object(W.jsx)(Bb,{colSpan:1,children:Object(W.jsxs)(Wb,{title:e.formatMessage({id:"desk.monitoring.agentStatus.header"}),updatableChildrenValues:[k,w,C],contentAlignItems:"center",contentJustifyContent:"center",contentDirection:"column",children:[Object(W.jsx)(Yb,{value:k,label:e.formatMessage({id:"desk.monitoring.agentStatus.label.online"}),theme:"online"}),Object(W.jsx)(Yb,{value:w,label:e.formatMessage({id:"desk.monitoring.agentStatus.label.away"}),theme:"away"}),Object(W.jsx)(Yb,{value:C,label:e.formatMessage({id:"desk.monitoring.agentStatus.label.offline"}),theme:"offline"})]})})]})]}),Object(W.jsxs)(xb,{children:[Object(W.jsx)(_b,{children:e.formatMessage({id:"desk.monitoring.sectionTitle.dailyStatistics"})}),Object(W.jsxs)(o.Grid,{children:[se.map(({key:t,average:n,longest:a,percentiles:i})=>Object(W.jsx)(Bb,{colSpan:4,children:Object(W.jsxs)(Wb,{title:e.formatMessage({id:`desk.monitoring.time.${t}.header`}),titleTooltipText:e.formatMessage({id:`desk.monitoring.time.${t}.desc`}),updatableChildrenValues:[n,a],contentAlignItems:"center",contentJustifyContent:"center",contentDirection:"column",children:[Object(W.jsxs)(zb,{gap:0,children:[Object(W.jsx)(o.GridItem,{colSpan:6,children:Object(W.jsx)(Yb,{value:Object(H.renderTimestring)(n),valueFontSize:24,label:e.formatMessage({id:"desk.monitoring.metric.label.average"})})}),Object(W.jsx)(o.GridItem,{colSpan:6,children:Object(W.jsx)(Yb,{value:"number"==typeof a?Object(H.renderTimestring)(a):f.Z,valueFontSize:24,label:e.formatMessage({id:"desk.monitoring.metric.label.longest"})})})]}),Object(W.jsx)(Qb,{rowKey:t,percentiles:i,intl:e})]})},t)),Object(W.jsx)(Bb,{colSpan:4,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.ticketFunnel.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.ticketFunnel.desc"}),updatableChildrenValues:[J.initialized,J.pending,J.assigned,J.closed],contentAlignItems:"flex-end",contentJustifyContent:"center",children:Object(W.jsx)(qb,{children:Object(W.jsx)(fb.j,{labels:Object.keys(J).map(t=>Xb[t]?e.formatMessage({id:Xb[t]}):hb()(t)),datasets:[{label:"funnel",data:[J.initialized,J.pending,J.assigned,J.closed],backgroundColor:Gb,hoverBackgroundColor:Gb,borderWidth:0}]})})})}),Object(W.jsx)(Bb,{colSpan:4,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.ticketReport.header"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.ticketReport.desc"}),updatableChildrenValues:[z,B],contentAlignItems:"center",contentJustifyContent:"center",contentDirection:"column",children:Object(W.jsxs)(Hb,{children:[Object(W.jsx)(Yb,{value:z,label:e.formatMessage({id:"desk.monitoring.metric.label.new"})}),Object(W.jsx)(Yb,{value:B,label:e.formatMessage({id:"desk.monitoring.metric.label.closed"})})]})})}),Object(W.jsx)(Bb,{colSpan:4,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.closedStatuses"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.closedStatuses.desc"}),contentAlignItems:"center",contentJustifyContent:"center",contentDirection:"column",children:Object(W.jsx)(fb.i,{labels:ie.current.labels,values:ie.current.values,colors:{backgroundColors:bb,hoverBorderColors:jb},tooltip:{items:[{label:e.formatMessage({id:"desk.monitoring.closedStatuses.tooltip.responses"})},{label:e.formatMessage({id:"desk.monitoring.closedStatuses.tooltip.percentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.reduce((e,t,a)=>n.includes(a)?e:e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:e.formatMessage({id:"desk.monitoring.closedStatuses.center.label.top"}),centerLabelBottom:e.formatMessage({id:"desk.monitoring.closedStatuses.center.label.bottom"})},"desk_stats_chart_closedStatuses")})}),Object(W.jsx)(Bb,{colSpan:4,children:Object(W.jsx)(Wb,{title:e.formatMessage({id:"desk.monitoring.csat"}),titleTooltipText:e.formatMessage({id:"desk.monitoring.csat.desc"}),contentAlignItems:"center",contentJustifyContent:"center",contentDirection:"column",children:Object(W.jsx)(fb.i,{labels:[e.formatMessage({id:"desk.monitoring.csat.5stars"}),e.formatMessage({id:"desk.monitoring.csat.4stars"}),e.formatMessage({id:"desk.monitoring.csat.3stars"}),e.formatMessage({id:"desk.monitoring.csat.2stars"}),e.formatMessage({id:"desk.monitoring.csat.1star"})],values:[...ae].reverse(),colors:{backgroundColors:bb,hoverBorderColors:jb},tooltip:{items:[{label:e.formatMessage({id:"desk.monitoring.csat.label.responses"})},{label:e.formatMessage({id:"desk.monitoring.csat.label.responsesPercentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.reduce((e,t,a)=>n.includes(a)?e:e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:e.formatMessage({id:"desk.monitoring.csat.label.total.top"}),centerLabelBottom:e.formatMessage({id:"desk.monitoring.csat.label.total.bottom"})},"desk_stats_chart_closedStatuses")})})]})]})]})});var nj=n("XzEE");const aj=e=>{try{return e.toLowerCase()}catch(e){return}};var ij=Object(r.default)("div").withConfig({displayName:"DropdownItem___StyledDiv",componentId:"x5rrfq-0"})(["display:flex;flex-direction:row;align-items:center;svg{margin-right:16px;}"]);const sj=Object(r.default)(({className:e,children:t})=>Object(W.jsxs)(ij,{className:e,children:[Object(W.jsx)(o.Icon,{icon:"user-avatar",size:20,color:"currentColor"}),t]})).withConfig({displayName:"DropdownItem__UnselectItemContent",componentId:"x5rrfq-1"})([""]),rj=Object(r.default)(o.Icon).attrs({icon:"done",size:20,color:Object(o.cssVariables)("purple-7")}).withConfig({displayName:"DropdownItem__SelectedIcon",componentId:"x5rrfq-2"})(["position:relative;top:6px;align-self:flex-start;"]),oj=r.default.div.withConfig({displayName:"DropdownItem__AgentItemTitle",componentId:"x5rrfq-3"})(["display:flex;align-items:center;width:100%;height:20px;"]),lj=Object(r.default)(we.a).withConfig({displayName:"DropdownItem__PositionedAgentBadge",componentId:"x5rrfq-4"})(["height:16px;"]),cj=r.default.li.withConfig({displayName:"DropdownItem__Item",componentId:"x5rrfq-5"})(["display:flex;flex-direction:row;align-items:center;outline:0;cursor:pointer;padding:0 16px;height:","px;line-height:20px;font-size:14px;font-weight:500;",";",";"," > *:first-child{flex:1;min-width:0;}> *:nth-child(2){flex:none;margin-left:8px;}"],({$itemType:e})=>"team"===e?32:48,({$isHighlighted:e})=>e&&`background-color: ${Object(o.cssVariables)("neutral-1")};`,({$isSelected:e})=>e&&Object(r.css)(["color:",";svg{fill:currentColor;}"],Object(o.cssVariables)("purple-7")),({$itemType:e})=>"agent"===e&&Object(r.css)(["","{svg{margin-left:6px;margin-right:18px;}}"," ~ ","{align-self:center;top:initial;}"],sj,sj,rj)),dj=({isSelected:e,isHighlighted:t,unselectItemLabel:n,item:a,tabIndex:i=0,...s})=>{const r=Object(E.a)();return Object(W.jsxs)(cj,{$itemType:"team",$isSelected:e,$isHighlighted:t,tabIndex:i,...s,children:[a?Object(W.jsx)("span",{children:null===a.key?r.formatMessage({id:"desk.team.defaultTeam"}):a.name}):Object(W.jsx)(sj,{children:n}),e&&Object(W.jsx)(rj,{})]})},uj=({isSelected:e,isHighlighted:t,unselectItemLabel:n,item:i,tabIndex:s=0,...r})=>{const l=Object(nj.a)(),c=Object(a.useMemo)(()=>{if(null==i)return Object(W.jsx)(sj,{children:n});const{displayName:t,email:a,photoThumbnailUrl:s,connection:r,agentType:c,tier:d,role:u,bot:p}=i,g=c===f.h.USER?a.trim()||f.Z:c===f.h.BOT&&p?l(p.type):void 0;return Object(W.jsx)(o.TwoLineDropdownItemWithAvatar,{title:Object(W.jsxs)(oj,{children:[Object(W.jsx)(V.jc,{tooltipDisplay:"inline-block",children:t}),Object(W.jsx)(lj,{agentType:c,role:u,tier:d})]}),subtitle:g,avatar:{type:null==p?f.I.Agent:f.I.Bot,profileID:a||"",imageUrl:s,status:aj(r)},isSelected:e})},[l,e,i,n]);return Object(W.jsxs)(cj,{$itemType:"agent",$isSelected:e,$isHighlighted:t,tabIndex:s,...r,children:[c,e&&Object(W.jsx)(rj,{})]})},pj=r.default.div.withConfig({displayName:"EmptyView__Container",componentId:"sc-1mqllch-0"})(["position:relative;display:flex;align-items:center;justify-content:center;padding:32px 0;"," > [role='progressbar']{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%) scale(",");}"],({$state:e})=>"loading"===e&&Object(r.css)(["height:320px;","{display:none;}"],o.EmptyState),({$state:e})=>"loading"===e?1:0),gj=r.default.div.withConfig({displayName:"EmptyView__Error",componentId:"sc-1mqllch-1"})(["font-size:14px;line-height:20px;letter-spacing:-0.1px;text-align:center;color:",";> *:first-child{margin-bottom:8px;}"],Object(o.cssVariables)("neutral-6")),hj=({isLoading:e,error:t,onRetry:n,title:i,description:s})=>{const r=Object(E.a)(),l=Object(a.useMemo)(()=>t?"error":e?"loading":"idle",[t,e]);return t?Object(W.jsx)(pj,{$state:l,children:Object(W.jsxs)(gj,{role:"alert",children:[Object(W.jsx)("div",{children:t}),Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",icon:"refresh",onClick:n,isLoading:e,children:r.formatMessage({id:"desk.agentSelect.dropdown.btn.retry"})})]})}):Object(W.jsxs)(pj,{$state:l,children:[Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-9"),"aria-hidden":!e}),Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Small,icon:"no-data",withoutMarginBottom:!0,title:i,description:s})]})},mj=(e,t)=>{const[{status:n,items:i,next:s,error:r,isSearchResultsVisible:o,loadMoreError:l},c]=Object(a.useReducer)((e,t)=>{switch(t.type){case"FETCH_START":return{...e,status:"loading"};case"FETCH_SUCCESS":return{...e,items:t.payload.response.results,next:t.payload.response.next,isSearchResultsVisible:t.payload.isSearchResultsVisible,error:null,status:"success"};case"FETCH_FAIL":return{...e,error:t.payload.error,status:"fail"};case"RESET_STATUS":return{...e,status:"init"};case"LOAD_MORE_START":return{...e,status:"loadmore-pending"};case"LOAD_MORE_SUCCESS":return{...e,status:"success",items:e.items.concat(t.payload.response.results),next:t.payload.response.next,loadMoreError:null};case"LOAD_MORE_FAIL":return{...e,status:"loadmore-fail",loadMoreError:t.payload.error};default:return e}},{status:"init",items:[],next:null,error:null,loadMoreError:null,isSearchResultsVisible:!1}),d=Object(a.useRef)(),u=Object(a.useRef)(),p=Object(P.n)(t,100),g=Object(P.L)(e),{pid:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),f=Object(a.useCallback)(async()=>{if(s&&"loadmore-pending"!==n){c({type:"LOAD_MORE_START"});try{const e=D.a.get(s,{headers:{Authorization:`Token ${H.ClientStorage.get("deskApiToken")}`,pid:h}});u.current=e;const t=await e;if(null==t)return;c({type:"LOAD_MORE_SUCCESS",payload:{response:t.data}})}catch(e){c({type:"LOAD_MORE_FAIL",payload:{error:m(e)}})}finally{u.current=void 0}}},[m,s,h,n]),{scrollBarRef:b,spinnerWrapperRef:j}=Object(P.A)({hasMore:!!s,handleLoadMore:f,isLoadMoreFailed:!!l}),y=Object(a.useCallback)(async()=>{var e;c({type:"FETCH_START"}),null==(e=d.current)||e.cancel();try{const e=g.current(p);d.current=e;const t=await e;if(null==t)return;c({type:"FETCH_SUCCESS",payload:{response:t.data,isSearchResultsVisible:!!p}})}catch(e){c({type:"FETCH_FAIL",payload:{error:m(e)}})}finally{d.current=void 0}},[g,p,m]);Object(a.useLayoutEffect)(()=>{c({type:"RESET_STATUS"})},[t]),Object(a.useEffect)(()=>{y()},[y]),Object(a.useEffect)(()=>()=>{var e,t;null==(e=d.current)||null==e.cancel||e.cancel(),null==(t=u.current)||null==t.cancel||t.cancel()},[]);const O={status:n,items:i,hasNext:!!s,error:r,loadMoreError:l,isSearchResultsVisible:o,reload:y,loadMore:f,scrollBarRef:b,spinnerWrapperRef:j};return Object(a.useDebugValue)(O),O};var fj;!function(e){e.Teams="teams",e.Agents="agents"}(fj||(fj={}));const bj=r.default.div.withConfig({displayName:"AgentOrTeamDropdown__Container",componentId:"sc-1hlnhx1-0"})(["",""],({$isBlock:e})=>e&&Object(r.css)(["button[aria-haspopup='true']{width:100%;}"])),jj=r.default.div.withConfig({displayName:"AgentOrTeamDropdown__PopoverContainer",componentId:"sc-1hlnhx1-1"})(["z-index:999;border-radius:2px;background:white;width:","px;overflow:hidden;",";"],({$width:e})=>e||320,o.elevation.popover),yj=r.default.ul.withConfig({displayName:"AgentOrTeamDropdown__ItemList",componentId:"sc-1hlnhx1-2"})(["border-bottom-left-radius:2px;border-bottom-right-radius:2px;list-style:none;",""],({$hasPadding:e})=>e&&"padding: 8px 0;"),Oj=Object(r.default)(o.Link).withConfig({displayName:"AgentOrTeamDropdown__EmptyViewLink",componentId:"sc-1hlnhx1-3"})(["font-size:16px;line-height:24px;letter-spacing:-0.15px;font-weight:600;"]),vj=r.default.div.withConfig({displayName:"AgentOrTeamDropdown__SpinnerWrapper",componentId:"sc-1hlnhx1-4"})(["padding:32px;text-align:center;line-height:0;> *{display:inline-block;}"]),xj=r.default.div.withConfig({displayName:"AgentOrTeamDropdown__SearchInputWrapper",componentId:"sc-1hlnhx1-5"})(["border-bottom:1px solid ",";input{border:0;border-radius:0;box-shadow:none !important;}"],Object(o.cssVariables)("neutral-3")),_j=({onClear:e,...t})=>{const n=Object(a.useRef)(null);return Object(W.jsx)(o.InputText,{role:"search",ref:n,...t,icons:[{buttonType:"secondary",icon:t.value?"close":"search","data-test-id":t.value?"ClearSearchQueryButton":"SearchButton",onClick:()=>{var t;e(),null==(t=n.current)||t.focus()}}]})},Cj=e=>e&&"object"==typeof e&&Object.keys(e).includes("key")?"team":"agent",kj=(e,t)=>t.type===pn.default.stateChangeTypes.blurButton?{}:t;var wj=Object(r.default)(ke.a).withConfig({displayName:"AgentOrTeamDropdown___StyledDeskAgentAvatar",componentId:"sc-1hlnhx1-6"})(["margin-left:-8px !important;margin-right:8px;"]),Tj=Object(r.default)("span").withConfig({displayName:"AgentOrTeamDropdown___StyledSpan",componentId:"sc-1hlnhx1-7"})(["flex:1;"]),Sj=Object(r.default)(V.jc).withConfig({displayName:"AgentOrTeamDropdown___StyledTextWithOverflowTooltip",componentId:"sc-1hlnhx1-8"})(["max-width:",";"],e=>e._css),Ej=Object(r.default)(o.Icon).withConfig({displayName:"AgentOrTeamDropdown___StyledIcon",componentId:"sc-1hlnhx1-9"})(["margin-left:-8px;margin-right:8px;"]),Ij=Object(r.default)(o.DropdownToggleButton).withConfig({displayName:"AgentOrTeamDropdown___StyledDropdownToggleButton",componentId:"sc-1hlnhx1-10"})(["padding-left:16px;",";",""],e=>e._css2,e=>e._css3),Mj=Object(r.default)(o.TabbedInterface).withConfig({displayName:"AgentOrTeamDropdown___StyledTabbedInterface",componentId:"sc-1hlnhx1-11"})(["[role='tablist']{padding:0 22px;}"]);const Dj=({className:e,disabled:t,onChange:n,unselectItemLabel:i,placeholder:s,selectedItemId:l,selectedItem:c,isBlock:d=!1})=>{var u,p;const g=Object(E.a)(),h=Object(P.c)(),m=Object(P.W)({dialogTypes:A.a.InviteMember,dialogProps:{role:"DESK_AGENT",uid:Object(P.O)().uid}}),f=Object(P.o)(),b=Object(a.useRef)(null),j=Object(a.useRef)(),[y,O]=Object(a.useState)(""),[v,x]=Object(a.useState)(""),[_,C]=Object(a.useState)(null!=(u=null==(p=b.current)?void 0:p.clientWidth)?u:0),{isPermitted:k}=Object(P.h)(),w=k(["organization.members.all"]),T=k(["desk.admin"]),S=Object(P.S)(d?e=>{C(e.target.clientWidth)}:void 0),I=(e=>{const{pid:t,region:n}=Object(L.a)();return mj(e=>Object(N.fetchAgentGroups)(t,n,{limit:20,offset:0,query:e}),e)})(y),{items:M}=I,D=(e=>{const{pid:t,region:n}=Object(L.a)();return mj(e=>Object(N.fetchAgents)(t,n,{limit:20,offset:0,query:e}),e)})(v),{items:R}=D,{status:F,data:U}=(e=>{const{pid:t,region:n}=Object(L.a)(),{selectedItem:i,selectedItemId:s,teams:r,agents:o}=e,[l,c]=Object(P.g)(async()=>{if(null==s||i)return i||null;const{id:e,type:a}=s,l="agent"===a?o.find(t=>t.id===e):r.find(t=>t.id===e);if(l)return l;const{data:c}=await("team"===a?Object(N.fetchAgentGroup)(t,n,{groupId:e}):Object(N.fetchAgent)(t,n,{agentId:e}));return c},[o,t,n,i,s,r]);return Object(a.useEffect)(()=>{c()},[c]),{...l,data:l.data||null}})({selectedItemId:l,selectedItem:c,teams:M,agents:R}),$=Object(a.useMemo)(()=>{const e=I.isSearchResultsVisible,t=M.length+(e?0:1);return[{id:fj.Teams,title:g.formatMessage({id:"desk.agentSelect.dropdown.tab.teams"}),items:M,baseIndex:0},{id:fj.Agents,title:g.formatMessage({id:"desk.agentSelect.dropdown.tab.agents"}),items:R.map(e=>e.id===f.id?{...e,email:f.email}:e),baseIndex:t}]},[R,f.email,f.id,g,I.isSearchResultsVisible,M]),B=i||g.formatMessage({id:"desk.agentSelect.dropdown.item.allAgents"}),V=s||g.formatMessage({id:"desk.agentSelect.dropdown.item.placeholder"});Object(a.useEffect)(()=>{const e=e=>{var t;(null==(t=b.current)?void 0:t.contains(e.target))||null==j.current||j.current()};return window.addEventListener("focusin",e),()=>{window.removeEventListener("focusin",e)}},[]);const z=e=>{return"success"!==F?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ej,{icon:"user-avatar",size:20,color:"currentColor"}),Object(W.jsx)("span",{children:V})]}):null==e?B:"team"===Cj(e)?e.name:(t=e,Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(wj,{profileID:t.email,imageUrl:t.photoThumbnailUrl,size:20,status:aj(t.connection)}),Object(W.jsx)(Tj,{children:Object(W.jsx)(Sj,{_css:!d&&"160px",children:t.displayName})})]}));var t},H=Object(a.useCallback)(e=>null==e?B:"agent"===Cj(e)?e.displayName:e.name,[B]),q=e=>(t,n,a)=>{const{items:i,query:s,setQuery:r,status:o,error:l,reload:c,emptyViewContent:d}=t.id===fj.Teams?{...I,query:y,setQuery:O,emptyViewContent:T?{title:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.teams.title"}),description:Object(W.jsx)(Oj,{href:`/${h}/desk/settings/teams/form`,target:"_blank",iconProps:{icon:"open-in-new",size:20},children:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.teams.btn.createTeam"})})}:{title:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.teams.title.withoutAction"})}}:{...D,query:v,setQuery:x,emptyViewContent:w?{title:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.agents.title"}),description:Object(W.jsx)(Oj,{role:"button",onClick:()=>{m()},target:"_blank",iconProps:{icon:"plus",size:20},children:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.agents.btn.addAgent"})})}:{title:g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.agents.title.withoutAction"})}},u=Object(W.jsx)(_j,{value:s,onChange:e=>{r(e.target.value)},placeholder:g.formatMessage({id:"desk.agentSelect.dropdown.search.placeholder"}),onClear:()=>{r("")}}),p=Object(W.jsx)(hj,{isLoading:"init"===o||"loading"===o,error:l,onRetry:c,title:s?g.formatMessage({id:"desk.agentSelect.dropdown.emptyView.noResults"}):d.title,description:s?void 0:d.description});return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(xj,{children:u}),l||0===i.length?p:e[n](a)]})};return Object(W.jsx)(pn.default,{onChange:e=>{if(null==n)return;if(null==e)return void n(e,"agent");const t=Cj(e);n(e,t)},selectedItem:U,itemToString:H,stateReducer:kj,children:({getRootProps:n,getToggleButtonProps:a,getItemProps:i,isOpen:s,highlightedIndex:l,closeMenu:c,clearSelection:u,selectItemAtIndex:p,setHighlightedIndex:h})=>{j.current=c;const{sectionRenderers:m}=$.reduce((e,t,n)=>(e.sectionRenderers.push(e=>{const{isSearchResultsVisible:a,scrollBarRef:s,spinnerWrapperRef:r,hasNext:c,loadMoreError:d,status:g,loadMore:m}=t.id===fj.Teams?I:D,f=a?t.items:[null,...t.items];return Object(W.jsx)(o.ScrollBar,{style:{maxHeight:320},ref:e=>{var t;s(null!=(t=null==e?void 0:e.node)?t:null)},children:Object(W.jsxs)(yj,{$hasPadding:t.id===fj.Teams,children:[f.map((a,s)=>{const r=null==a,o=t.baseIndex+s,c=0===n,d=r?null==U:U===a,g=i({item:a,index:o,disabled:!e,onFocus:()=>{h(o)},onClick:r?()=>{u()}:void 0,onKeyDown:e=>{var t,n,a,i,s,r;switch(e.key){case"Up":case"ArrowUp":e.preventDefault(),e.stopPropagation(),null==(t=e.currentTarget.previousElementSibling||(null==(a=e.currentTarget.parentNode)?void 0:a.lastElementChild))||null==(n=t.focus)||n.call(t);break;case"Down":case"ArrowDown":e.preventDefault(),null==(i=e.currentTarget.nextElementSibling||(null==(r=e.currentTarget.parentNode)?void 0:r.firstElementChild))||null==(s=i.focus)||s.call(i);break;case"Enter":p(o)}}}),m={isHighlighted:l===o,isSelected:d,unselectItemLabel:B,...g};return c?Object(W.jsx)(dj,{item:a,...m},s):Object(W.jsx)(uj,{item:a,...m},s)}),c&&(d?Object(W.jsx)(hj,{isLoading:"loadmore-pending"===g,error:d,onRetry:m}):Object(W.jsx)(vj,{ref:r,children:Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-9")})}))]},n)})}),e.indexOffset+=t.items.length,e),{sectionRenderers:[],indexOffset:0}),{ref:f,...y}=n(void 0,{suppressRefError:!0});return Object(W.jsx)(un.c,{children:Object(W.jsxs)(bj,{...y,ref:e=>{f(e),b.current=e,S(e)},className:e,$isBlock:d,children:[Object(W.jsx)(cn.a,{children:({ref:e})=>Object(W.jsx)(Ij,{ref:e,size:"small",variant:"default",disabled:t||"loading"===F,"aria-pressed":s,...a(),_css2:o.Subtitles["subtitle-01"],_css3:"success"!==F&&Object(r.css)(["color:",";"],Object(o.cssVariables)("neutral-6")),children:z(U)})}),s&&Object(W.jsx)(dn.a,{placement:"bottom-start",modifiers:{preventOverflow:{boundariesElement:"viewport"}},positionFixed:!0,children:({ref:e,style:t})=>Object(W.jsx)(jj,{ref:e,style:t,$width:_,children:Object(W.jsx)(Mj,{initialActiveTabIndex:U&&"object"==typeof U&&Object.keys(U).includes("displayName")?1:0,hasBorder:!0,tabs:[{title:g.formatMessage({id:"desk.agentSelect.dropdown.tab.teams"}),id:fj.Teams},{title:g.formatMessage({id:"desk.agentSelect.dropdown.tab.agents"}),id:fj.Agents}],children:q(m)})})})]})})}})},Aj=["ALL",...Object.values(G.J)],Nj=r.default.div.withConfig({displayName:"TicketPriorityFilter__PriorityFilterToggleContent",componentId:"sc-17e00ex-0"})(["margin-left:16px;line-height:20px;font-size:14px;font-weight:500;"]),Rj=({selectedItem:e,onChange:t,...n})=>{const i=Object(E.a)(),s=Object(a.useCallback)(e=>"ALL"===e?i.formatMessage({id:"desk.tickets.filter.priority.allPriorities"}):Object(W.jsx)(V.Xb,{priority:e,showLabel:!0}),[i]);return Object(W.jsx)(o.Dropdown,{size:"small",items:Aj,selectedItem:e||"ALL",itemToElement:s,onChange:Object(H.onDropdownChangeIgnoreNull)(e=>t("ALL"===e?void 0:e)),itemToString:e=>i.formatMessage({id:"ALL"===e?"desk.tickets.filter.priority.allPriorities":Object(H.getTicketPriorityLabelKey)(e)}),toggleRenderer:({selectedItem:e})=>e&&Object(W.jsx)(Nj,{children:s(e)}),...n})},Pj=Object(r.default)(V.hc).withConfig({displayName:"proactiveChat__ProactiveChat",componentId:"sc-1bzk7m0-0"})([""," + *{margin-top:24px;}"],V.Sb),Lj=r.default.div.withConfig({displayName:"proactiveChat__ProactiveContainer",componentId:"sc-1bzk7m0-1"})(["display:flex;flex-direction:column;"]),Fj=Object(r.default)(o.Tooltip).withConfig({displayName:"proactiveChat__FullMessageTooltip",componentId:"sc-1bzk7m0-2"})(["width:100%;"]),Uj=r.default.p.withConfig({displayName:"proactiveChat__Message",componentId:"sc-1bzk7m0-3"})(["display:-webkit-box;max-width:100%;overflow:hidden;word-break:normal;color:",";font-size:14px;font-weight:500;-webkit-box-orient:vertical;-webkit-line-clamp:2;"],Object(o.cssVariables)("neutral-10")),$j=r.default.span.withConfig({displayName:"proactiveChat__Filter",componentId:"sc-1bzk7m0-4"})(["display:inline-block;vertical-align:center;& + &{margin-left:4px;}"]),Bj=r.default.div.withConfig({displayName:"proactiveChat__SearchContainer",componentId:"sc-1bzk7m0-5"})(["position:relative;"]),Vj=Object(r.default)(o.IconButton).withConfig({displayName:"proactiveChat__SearchButton",componentId:"sc-1bzk7m0-6"})(["position:absolute;top:4px;right:8px;opacity:",";transform:translateX(","px);transition:",";"],({isShow:e})=>e?1:0,({isShow:e})=>e?0:8,Object(o.transitions)({properties:["transform","opacity"],duration:.3})),zj=r.default.div.withConfig({displayName:"proactiveChat__SubjectContainer",componentId:"sc-1bzk7m0-7"})(["display:flex;align-items:flex-start;width:100%;"]),Hj=r.default.div.withConfig({displayName:"proactiveChat__SubjectText",componentId:"sc-1bzk7m0-8"})(["display:inline-flex;align-items:center;flex:auto;white-space:nowrap;font-weight:500;"]),qj=Object(r.default)(o.Tooltip).withConfig({displayName:"proactiveChat__TooltipWrapper",componentId:"sc-1bzk7m0-9"})([""]);qj.displayName="Tooltip";const Gj=Object(r.default)(e=>Object(W.jsx)(o.Table,{...e})).withConfig({displayName:"proactiveChat__ProactiveChatTicketsTable",componentId:"sc-1bzk7m0-10"})(["flex:1;overflow:visible;"]),Wj=Object(r.default)(V.Ub).withConfig({displayName:"proactiveChat__ProactiveChatPaginator",componentId:"sc-1bzk7m0-11"})(["margin-left:auto;"]),Kj={7:o.DateRangePickerValue.Last7Days,14:o.DateRangePickerValue.Last14Days,30:o.DateRangePickerValue.Last30Days,90:o.DateRangePickerValue.Last90Days},Yj=(e,t)=>{if(!e||!t)return o.DateRangePickerValue.AllDates;const n=e.format(f.nb),a=t.format(f.nb),i=c()(),s=i.format(f.nb);if(n===a&&n===s)return o.DateRangePickerValue.Today;if(n===a&&1===i.diff(n,"days"))return o.DateRangePickerValue.Yesterday;const r=Kj[t.diff(e,"days")+1];return e&&t&&!r?o.DateRangePickerValue.Custom:r};var Qj;!function(e){e.MESSAGE="proactive_chat__message",e.SUBJECT="ticket__channel_name",e.RECEIVER="ticket__customer__display_name",e.TEAM="proactive_chat__assigned_group__name",e.SENDER="proactive_chat__created_by__display_name",e.REPLY_RECEIVED_ON="ticket__issued_at",e.SENT_ON="proactive_chat__created_at"}(Qj||(Qj={}));const Jj={page:1,pageSize:f.qb,sortBy:Qj.SENT_ON,sortOrder:f.Tb.DESCEND,startDate:void 0,endDate:void 0,agentId:void 0,teamId:void 0,priority:void 0,query:""},Xj=({isProactive:e=!1,wrapper:t,children:n})=>Object(W.jsx)(W.Fragment,{children:e?n:t(n)});var Zj=Object(r.default)(nf).withConfig({displayName:"proactiveChat___StyledProactiveChatMessageCountBadge",componentId:"sc-1bzk7m0-12"})(["margin-left:4px;"]),ey=Object(r.default)(o.IconButton).withConfig({displayName:"proactiveChat___StyledIconButton",componentId:"sc-1bzk7m0-13"})(["margin-top:-6px;"]),ty=Object(r.default)(o.EmptyState).withConfig({displayName:"proactiveChat___StyledEmptyState",componentId:"sc-1bzk7m0-14"})(["margin:90px auto;"]),ny=Object(r.default)(o.InputText).withConfig({displayName:"proactiveChat___StyledInputText",componentId:"sc-1bzk7m0-15"})(["width:232px;"]);const ay=Object(a.memo)(()=>{const e=Object(E.a)(),{pid:t,region:n}=Object(L.a)(),i=Object(P.c)(),{isPermitted:s}=Object(P.h)(),r=s(["desk.agent"]),{openDrawer:l}=Object(jm.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)([]),[g,h]=Object(a.useState)(0),[m,b]=Object(a.useState)(!1),j=Object(a.useRef)({}),{page:y,pageSize:O,sortBy:v,sortOrder:x,startDate:_,endDate:C,agentId:k,teamId:w,query:T,priority:S,updateParams:I}=Object(B.a)(Jj),{handleSubmit:M,register:D,setValue:A,watch:R}=Object(_i.d)({mode:"onChange"}),F=R("query"),U=_?c()(_):void 0,z=C?c()(C):void 0,H=Object(a.useCallback)(async({offset:e,limit:a,q:i,sortBy:s,sortOrder:r})=>{const l=r===f.Tb.DESCEND?"-":"";b(!0);try{const{data:{count:r,results:o}}=await Object(N.getProactiveChatTickets)(t,n,{offset:e,limit:a,q:i,startDate:_?c()(_).format(f.nb):void 0,endDate:C?c()(C).format(f.nb):void 0,createdBy:k,groupId:w,order:`${l}${s}`,priority:S});h(r),p(o)}catch(e){o.toast.error({message:d(e)}),Object(q.a)(e)}finally{b(!1)}},[k,C,d,t,S,n,_,w]);Object(a.useEffect)(()=>{H({offset:O*(y-1),limit:O,q:T,sortBy:v,sortOrder:x})},[H,y,O,T,v,x]),Object(a.useEffect)(()=>{A("query",T)},[T]);const G=e=>t=>{j.current[e]=t},K=e=>t=>{var n,a;const i=j.current[e];if(null==i)return;const s=null!=(n=null==(a=t.currentTarget.closest("td"))?void 0:a.clientWidth)?n:0;t.currentTarget.clientWidth<s||i.show()},Y=e=>()=>{const t=j.current[e];null!=t&&t.hide()},Q=Object(a.useCallback)((e,t)=>{I({page:1,startDate:null==t?void 0:t.startDate.format(f.nb),endDate:null==t?void 0:t.endDate.format(f.nb)})},[I]),J=Object(a.useCallback)((e,t)=>{e&&t&&I({sortBy:e.key,sortOrder:t})},[I]),X=Object(a.useCallback)((e,t)=>{I({page:e,pageSize:t})},[I]),Z=Object(a.useCallback)(e=>{e&&e.preventDefault(),A("query",""),I({page:1,query:""})},[I,A]),ee=Object(a.useCallback)(e=>{I({page:1,query:e.query})},[I]),te=Object(a.useMemo)(()=>k?{id:Number(k),type:"agent"}:w?{id:Number(w),type:"team"}:void 0,[k,w]),ne=Object(a.useMemo)(()=>Object(W.jsxs)(V.gc,{children:[Object(W.jsx)($j,{children:Object(W.jsx)(Dj,{selectedItemId:te,placeholder:e.formatMessage({id:"desk.proactiveChat.ticketList.filter.agent.placeholder"}),unselectItemLabel:e.formatMessage({id:"desk.proactiveChat.ticketList.filter.agent.all"}),disabled:m,onChange:(e,t)=>{I(null!=e?"agent"!==t?{page:1,agentId:void 0,teamId:e.id}:{page:1,teamId:void 0,agentId:e.id}:{page:1,teamId:void 0,agentId:void 0})}})}),Object(W.jsx)($j,{children:Object(W.jsx)(Rj,{selectedItem:S,onChange:e=>I({priority:e,page:1}),disabled:m})}),Object(W.jsx)($j,{children:Object(W.jsx)(V.Kb,{value:Yj(U,z),dateRange:_&&C?{startDate:c()(_),endDate:c()(C)}:void 0,disabled:m,maxDate:c()(),onChange:Q,size:"small"})}),Object(W.jsx)($j,{children:Object(W.jsx)(qj,{content:e.formatMessage({id:"desk.proactiveChat.ticketList.info.tooltip"}),placement:"right",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})})]}),[e,m,te,S,U,z,_,C,Q,I]),ae=Object(a.useMemo)(()=>Object(W.jsx)(Gj,{rowKey:"id",loading:m,dataSource:u,showScrollbars:!0,onSortByUpdated:J,columns:[{key:Qj.MESSAGE,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.message"}),dataIndex:"message",sorter:!0,flex:2.5,render:({id:e,proactiveChat:t})=>{const{message:n}=t;return Object(W.jsx)(Fj,{trigger:o.TooltipTrigger.Manual,ref:G(e),content:n,placement:"bottom",popperProps:{modifiers:{preventOverflow:{boundariesElement:"viewport"}}},children:Object(W.jsx)(Uj,{onMouseEnter:K(e),onMouseLeave:Y(e),children:n})})}},{key:"priority",title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.priority"}),width:100,render:({ticket:e})=>Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0})},{key:Qj.SUBJECT,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.subject"}),dataIndex:"ticket",sorter:!0,width:232,render:({ticket:t,proactiveChat:n})=>Object(W.jsxs)(zj,{children:[Object(W.jsxs)(Hj,{"data-test-id":"SubjectText",children:[Object(W.jsx)(Xj,{isProactive:t.status2===f.jc.PROACTIVE,wrapper:e=>{const n=_a(Kn.TicketID,t.id.toString());return Object(W.jsx)(o.Link,{variant:o.LinkVariant.Neutral,href:r?`/${i}/desk/conversation/${t.id}?${n}`:`/${i}/desk/tickets/${t.id}?${n}`,useReactRouter:!0,children:e})},children:t.channelName||f.Z}),Object(W.jsx)(Zj,{messageCount:n.messageCount})]}),t.status2===f.jc.PROACTIVE&&Object(W.jsx)(ey,{icon:"proactive-chat",buttonType:"tertiary",size:"small",title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.button.sendMessage.tooltip"}),tooltipPlacement:"top",onClick:()=>l(wm,{ticket:t,onClose:()=>{H({offset:(y-1)*O,limit:O,sortBy:v,sortOrder:x})}})})]})},{key:Qj.RECEIVER,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.receiver"}),dataIndex:"customer",sorter:!0,render:e=>Object(W.jsx)(V.nc,{ticket:e.ticket})},{key:Qj.TEAM,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.team"}),dataIndex:"team",sorter:!0,render:({ticket:e})=>{var t;return Object(W.jsx)(V.sc,{teamName:null==(t=e.group)?void 0:t.name})}},{key:Qj.SENDER,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.sender"}),dataIndex:"assignee",sorter:!0,render:e=>Object(W.jsx)(V.kc,{agent:e.proactiveChat.createdBy,isShowAgentThumbnail:!0})},{key:Qj.REPLY_RECEIVED_ON,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.repliedOn"}),dataIndex:"repliedAt",sorter:!0,render:e=>Object(W.jsx)(V.oc,{timestamp:e.ticket.issuedAt,format:"lll"})},{key:Qj.SENT_ON,title:e.formatMessage({id:"desk.proactiveChat.ticketList.table.label.sentOn"}),dataIndex:"createdAt",sorter:!0,render:e=>Object(W.jsx)(V.oc,{timestamp:e.proactiveChat.createdAt,format:"lll"})}],footer:Object(W.jsx)(Wj,{current:y,total:g,pageSize:O,onChange:X,onItemsPerPageChange:X}),emptyView:Object(W.jsx)(ty,{title:e.formatMessage({id:null!=T&&T.trim()?"desk.proactiveChat.ticketList.searched.empty.title":"desk.proactiveChat.ticketList.noTicket.title"}),description:e.formatMessage({id:null!=T&&T.trim()?"desk.proactiveChat.ticketList.searched.empty.desc":"desk.proactiveChat.ticketList.noTicket.desc"},{query:null==T?void 0:T.trim()}),icon:"proactive-chat",size:o.EmptyStateSize.Large})}),[m,u,J,e,y,g,O,X,T,i,r,l,H,v,x]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Pj,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"desk.proactiveChat.title"})}),Object(W.jsx)(V.Sb.Actions,{children:Object(W.jsx)("form",{name:"proactive",onSubmit:M(ee),children:Object(W.jsxs)(Bj,{children:[Object(W.jsx)(ny,{ref:D,name:"query",placeholder:e.formatMessage({id:"desk.proactiveChat.ticketList.search.placeholder"}),size:"small",disabled:m}),Object(W.jsx)(Vj,{icon:"search",size:"xsmall",type:"submit",isShow:0===(null==F?void 0:F.trim().length),buttonType:"secondary",disabled:m}),Object(W.jsx)(Vj,{icon:"close",size:"xsmall",buttonType:"secondary",disabled:m||!F,isShow:!!F,onClick:Z})]})})})]}),Object(W.jsxs)(Lj,{children:[ne,ae]})]}),Object(W.jsx)(qm,{})]})});var iy=n("vpus"),sy=n("Y2WY"),ry=n("8tak");const oy=()=>{const e=Object(s.k)(),{openDrawer:t,closeDrawer:n}=Object(a.useContext)(V.X),{webhook:i}=Wt.a.parse(e.location.search,{ignoreQueryPrefix:!0}),r=Object(a.useCallback)(n=>{const a=Wt.a.parse(e.location.search,{ignoreQueryPrefix:!0});null!=a.webhook&&(a.webhook=n,e.push(`${e.location.pathname}?${Wt.a.stringify(a)}`)),e.push(`${e.location.pathname}?${Wt.a.stringify({...a,webhook:n})}`),t("BotWebhookLogsDrawer")},[e,t]),o=Object(a.useCallback)(()=>{const t=Wt.a.parse(e.location.search,{ignoreQueryPrefix:!0});delete t.webhook,e.push(`${e.location.pathname}?${Wt.a.stringify(t)}`),n("BotWebhookLogsDrawer")},[n,e]);return Object(a.useMemo)(()=>({webhook:i,openWebhookLogs:r,closeWebhookLogs:o}),[o,r,i])},ly=r.default.div.withConfig({displayName:"BotCard__CardWrapper",componentId:"sb9dq9-0"})(["padding:18px 24px;width:100%;border:1px solid ",";border-radius:4px;cursor:pointer;transition:",";&:hover{border-color:",";}"],Object(o.cssVariables)("neutral-3"),Object(o.transitions)({duration:.3,properties:["border-color"]}),Object(o.cssVariables)("neutral-3")),cy=r.default.h3.withConfig({displayName:"BotCard__BotName",componentId:"sb9dq9-1"})(["align-self:center;margin-left:8px;margin-right:8px;",";"],o.Subtitles["subtitle-03"]),dy=r.default.span.withConfig({displayName:"BotCard__BotKey",componentId:"sb9dq9-2"})(["margin-left:6px;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]),uy=r.default.div.withConfig({displayName:"BotCard__GroupsWrapper",componentId:"sb9dq9-3"})(["margin-top:-8px;> div{margin-top:8px;margin-right:4px;}div + div{margin-left:0 !important;}"]),py=r.default.span.withConfig({displayName:"BotCard__NoTeamsText",componentId:"sb9dq9-4"})(["margin-top:8px;color:",";",";"],Object(o.cssVariables)("neutral-6"),o.Body["body-short-01"]),gy=r.default.span.withConfig({displayName:"BotCard__BotCreatedAt",componentId:"sb9dq9-5"})(["display:inline-flex;align-items:flex-end;margin-left:auto;padding-left:64px;white-space:nowrap;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]);var hy=Object(r.default)("div").withConfig({displayName:"BotCard___StyledDiv",componentId:"sb9dq9-6"})(["display:flex;align-items:center;"]),my=Object(r.default)(o.OverflowMenu).withConfig({displayName:"BotCard___StyledOverflowMenu",componentId:"sb9dq9-7"})(["margin-top:-4px;margin-right:-4px;margin-left:auto;"]),fy=Object(r.default)("div").withConfig({displayName:"BotCard___StyledDiv2",componentId:"sb9dq9-8"})(["display:flex;align-items:center;margin-top:16px;"]),by=Object(r.default)("div").withConfig({displayName:"BotCard___StyledDiv3",componentId:"sb9dq9-9"})(["display:flex;margin-top:12px;"]),jy=Object(r.default)(o.InlineNotification).withConfig({displayName:"BotCard___StyledInlineNotification",componentId:"sb9dq9-10"})(["margin-top:16px;"]),yy=Object(r.default)(o.InlineNotification).withConfig({displayName:"BotCard___StyledInlineNotification2",componentId:"sb9dq9-11"})(["margin-top:16px;"]);const Oy=Object(a.memo)(({bot:e,onDelete:t,...n})=>{const i=Object(E.a)(),r=Object(s.k)(),{pid:l,region:d}=Object(L.a)(),u=Object(P.c)(),{openWebhookLogs:p}=oy(),g=Object(P.W)(),[h,m]=Object(a.useState)(e),b=h.type===f.M.FAQBOT&&h.status===f.c.PAUSED&&!h.isReadyToActivate,j=`${location.pathname}${location.search}`,[{status:y,error:O},v]=Object(P.g)(()=>N.updateDeskBot(l,d,{id:h.id,payload:{isUnreadError:!1}}),[h.id,l,d]);Object(P.s)(O);const x=Object(a.useCallback)(()=>{h.type===f.M.CUSTOMIZED&&h.isUnreadError&&v(),p(h.id)},[h.id,h.isUnreadError,h.type,v,p]),_=Object(a.useCallback)(()=>{if(h.type===f.M.FAQBOT){const e={bot_type:h.type,tab:f.J.FILES,page:1,page_size:f.qb,sort_order:f.Tb.DESCEND,sort_by:"created_at"};r.push(`/${u}/desk/settings/bots/${h.id}/edit?${Wt.a.stringify(e)}`)}},[u,h.id,h.type,r]),C=Object(a.useCallback)(()=>{const{agent:{id:e},id:n}=h;g({dialogTypes:A.a.DeleteDeskBot,dialogProps:{agentId:e,onSuccess:()=>{t(n)}}})},[h,t,g]),k=Object(a.useCallback)(()=>{r.push(`/${u}/desk/settings/bots/${h.id}/duplicate?name=${i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.input.value.duplicated"},{name:h.name})}&bot_type=${h.type}`,{backUrl:j})},[u,j,h.id,h.name,h.type,r,i]);Object(a.useEffect)(()=>{"success"===y&&m(e=>({...e,isUnreadError:!1}))},[y]);const w=Object(a.useMemo)(()=>{const e=[{label:i.formatMessage({id:"desk.settings.bots.list.item.overflowMenu.item.duplicate"}),onClick:k},{label:i.formatMessage({id:"desk.settings.bots.list.item.overflowMenu.item.delete"}),onClick:C}];switch(h.type){case f.M.CUSTOMIZED:return[{label:i.formatMessage({id:"desk.settings.bots.list.item.overflowMenu.item.webhookLog"}),onClick:x},{isDivider:!0},...e];case f.M.FAQBOT:return[{label:i.formatMessage({id:"desk.settings.bots.list.item.overflowMenu.item.files"}),onClick:_},{isDivider:!0},...e];default:return e}},[h.type,C,k,_,x,i]);return Object(W.jsxs)(ly,{role:"listitem",...n,children:[Object(W.jsxs)(hy,{children:[Object(W.jsx)(o.Avatar,{type:o.AvatarType.Bot,size:32,profileID:h.id,imageUrl:h.agent.photoThumbnailUrl,status:h.agent.connection.toLowerCase()}),Object(W.jsx)(cy,{children:h.name}),Object(W.jsx)(V.b,{status:h.status}),Object(W.jsx)(my,{items:w,stopClickEventPropagation:!0,popperProps:{positionFixed:!0}})]}),Object(W.jsxs)(fy,{children:[Object(W.jsx)(V.J,{type:h.type}),Object(W.jsx)(dy,{children:h.key})]}),Object(W.jsxs)(by,{children:[Object(W.jsx)(uy,{children:h.agent.groups.length>0?h.agent.groups.map(e=>Object(W.jsx)(o.Tag,{children:e.name},e.id)):Object(W.jsx)(py,{children:i.formatMessage({id:"desk.settings.bots.list.item.label.noTeams"})})}),Object(W.jsx)(gy,{children:i.formatMessage({id:"desk.settings.bots.list.item.createdOn"},{date:c()(h.createdAt).format("lll")})})]}),h.isUnreadError&&Object(W.jsx)(jy,{type:"error",message:i.formatMessage({id:"desk.settings.bots.list.item.notification.error.webhook.unread"}),action:{label:i.formatMessage({id:"desk.settings.bots.list.item.notification.error.webhook.action"}),onClick:e=>{e.stopPropagation(),x()}}}),b&&Object(W.jsx)(yy,{type:"warning",message:i.formatMessage({id:"desk.settings.bots.list.item.notification.error.file"}),action:{label:i.formatMessage({id:"desk.settings.bots.list.item.notification.error.file.action"}),onClick:e=>{e.stopPropagation(),_()}}})]})}),vy={id:-1},xy=[{labelKey:"desk.settings.bots.filter.botType.item.all",value:void 0},{labelKey:"desk.settings.bots.filter.botType.item.faq",value:f.M.FAQBOT},{labelKey:"desk.settings.bots.filter.botType.item.custom",value:f.M.CUSTOMIZED}],_y=[{labelKey:"desk.settings.bots.filter.activeStatus.item.all",value:[f.c.ACTIVE,f.c.INACTIVE,f.c.PENDING,f.c.PAUSED]},{labelKey:"desk.settings.bots.filter.activeStatus.item.activated",value:f.c.ACTIVE},{labelKey:"desk.settings.bots.filter.activeStatus.item.deactivated",value:f.c.INACTIVE},{labelKey:"desk.settings.bots.filter.activeStatus.item.pending",value:f.c.PENDING},{labelKey:"desk.settings.bots.filter.activeStatus.item.paused",value:f.c.PAUSED}],Cy=r.default.div.withConfig({displayName:"BotList__FiltersWrapper",componentId:"sc-1bxu8wx-0"})(["display:flex;flex-direction:row;align-items:center;[role='combobox'] + [role='combobox']{margin-left:4px;}"]),ky=r.default.div.withConfig({displayName:"BotList__AllTeamsItemWrapper",componentId:"sc-1bxu8wx-1"})(["display:flex;flex-direction:row;align-items:center;","{margin-right:8px;}"],o.Icon),wy=r.default.div.withConfig({displayName:"BotList__ListWrapper",componentId:"sc-1bxu8wx-2"})(["",",> [role='progressbar']{margin:178px auto 0;min-height:484px;}"],o.EmptyState),Ty=Object(r.default)(o.TooltipTargetIcon).withConfig({displayName:"BotList__InfoIcon",componentId:"sc-1bxu8wx-3"})(["display:inline-flex;margin-left:4px;"]),Sy=r.default.div.withConfig({displayName:"BotList__BotCardsWrapper",componentId:"sc-1bxu8wx-4"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:24px;& > div:not(:first-of-type){margin-top:16px;}"]);var Ey=Object(r.default)(o.Button).withConfig({displayName:"BotList___StyledButton",componentId:"sc-1bxu8wx-5"})(["width:100%;margin-top:24px;"]);const Iy=()=>{var e;const t=Object(E.a)(),n=Object(s.k)(),i=Object(P.c)(),{pid:r,region:l}=Object(L.a)(),{group:c,type:d,status:u,updateParams:p}=Object(B.a)({group:vy.id,status:_y[0].value}),g=Object(ry.a)(),[h,m]=Object(a.useState)([]),[{status:b,data:j},y]=Object(sy.a)(e=>N.fetchDeskBots(r,l,e),[r,l]),[{status:O,data:v},x]=Object(sy.a)(e=>D.a.get(e,{headers:{Authorization:`Token ${localStorage.getItem("deskApiToken")}`,pid:r}}),[r]),[{status:_,data:C},k]=Object(sy.a)(e=>N.fetchAgentGroups(r,l,e),[r,l]),w=h.length>20?null==v?void 0:v.data.next:null==j?void 0:j.data.next,T=null!=(e=null==C?void 0:C.data.results)?e:[],S="loading"===b,I="loading"===_,M=Object(a.useCallback)(e=>{e&&p({type:e.value})},[p]),A=Object(a.useCallback)(e=>{e&&p({group:e.id===vy.id?void 0:e.id})},[p]),R=Object(a.useCallback)(e=>{e&&p({status:e.value})},[p]),F=Object(a.useCallback)(e=>{const t=[...h];t.splice(t.findIndex(t=>t.id===e),1),m(t)},[h]),U=Object(a.useCallback)(()=>{w&&x(w)},[x,w]);Object(a.useEffect)(()=>{y({group:c===vy.id?void 0:c,status:null!=u?u:_y[0].value,type:d,offset:0,limit:20})},[y,c,u,d]),Object(a.useEffect)(()=>{k({offset:0,limit:100})},[k]),Object(a.useEffect)(()=>{var e;"success"===b&&m(null!=(e=null==j?void 0:j.data.results)?e:[])},[j,b]),Object(a.useEffect)(()=>{"success"===O&&m(e=>{var t;return[...e,...null!=(t=null==v?void 0:v.data.results)?t:[]]})},[v,O]);const $=Object(a.useMemo)(()=>0===h.length?S?Object(W.jsx)(o.SpinnerFull,{transparent:!0}):Object(W.jsx)(o.EmptyState,{title:t.formatMessage({id:"desk.settings.bots.noResult.title"}),description:t.formatMessage({id:"desk.settings.bots.noResult.desc"}),icon:"bot",size:o.EmptyStateSize.Large}):Object(W.jsxs)(W.Fragment,{children:[S&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsxs)(Sy,{children:[h.map(e=>Object(W.jsx)(Oy,{bot:e,onClick:()=>n.push(`/${i}/desk/settings/bots/${e.id}/edit?bot_type=${e.type}`,{backUrl:`${location.pathname}${location.search}`}),onDelete:F},e.id)),w&&Object(W.jsx)(Ey,{buttonType:"tertiary",isLoading:"loading"===O,onClick:U,children:t.formatMessage({id:"desk.settings.bots.list.button.loadMore"})})]})]}),[i,h,F,U,n,t,S,O,w]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Cy,{"data-test-id":"BotFilters",children:[g&&Object(W.jsx)(o.Dropdown,{size:"small",items:xy,itemToString:({labelKey:e})=>t.formatMessage({id:e}),initialSelectedItem:xy[0],selectedItem:xy.find(({value:e})=>xs()(e,d)),disabled:S,onItemSelected:M}),Object(W.jsx)(o.Dropdown,{size:"small",items:[vy,...T],itemToString:e=>e.id===vy.id?t.formatMessage({id:"desk.settings.bots.filter.teams.item.all"}):e.name,itemToElement:(e,n)=>e.id===vy.id?Object(W.jsxs)(ky,{children:[Object(W.jsx)(o.Icon,{icon:"teams",size:20,color:n?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10")}),t.formatMessage({id:"desk.settings.bots.filter.teams.item.all"})]}):e.name,initialSelectedItem:vy,selectedItem:T.find(e=>e.id===c),disabled:I||S,onItemSelected:A}),Object(W.jsx)(o.Dropdown,{size:"small",items:_y,itemToString:({labelKey:e})=>t.formatMessage({id:e}),initialSelectedItem:_y[0],selectedItem:_y.find(({value:e})=>xs()(e,u)),disabled:S,onItemSelected:R}),Object(W.jsx)(V.a,{placement:"bottom-end",agentType:f.h.BOT,popperProps:{modifiers:{offset:{offset:"20, 4"}}},children:Object(W.jsx)(Ty,{icon:"info"})})]}),Object(W.jsx)(wy,{children:$})]})},My=()=>{const e=Object(E.a)(),t=Object(F.a)();return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"desk.settings.bots.title"})}),Object(W.jsx)(iy.a.Actions,{children:Object(W.jsx)(o.Button,{size:"small",buttonType:"primary",icon:"plus",onClick:()=>t({dialogTypes:A.a.CreateDeskBot}),children:e.formatMessage({id:"desk.settings.bots.button.add"})})}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:"desk.settings.bots.desc"},{a:e=>Object(W.jsx)(o.Link,{href:"https://www.notion.so/sendbirddesk/User-guide-for-Bots-Teams-and-Assignment-rules-6be1ae3219f2451497b9b11a2af0e5a6",target:"_blank",children:e})})})]}),Object(W.jsx)(Iy,{})]})};var Dy=n("lizX");const Ay=r.default.h3.withConfig({displayName:"CommonFormComponents__FieldsGroupTitle",componentId:"sst9s2-0"})(["margin-bottom:8px;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Headings["heading-01"]),Ny=r.default.div.withConfig({displayName:"BotSettingsGroup__SettingsGroupContainer",componentId:"sc-1rxisnl-0"})(["& + &{margin-top:32px;}"]),Ry=i.a.memo(({title:e,children:t})=>Object(W.jsxs)(Ny,{children:[Object(W.jsx)(Ay,{children:e}),t&&Object(W.jsx)(Dy.d,{children:t})]}));let Py;!function(e){e[e.CREATE=0]="CREATE",e[e.EDIT=1]="EDIT",e[e.DUPLICATE=2]="DUPLICATE"}(Py||(Py={}));const Ly=Object(a.createContext)({}),Fy=()=>Object(a.useContext)(Ly),Uy=()=>{var e,t,n;const i=Object(E.a)(),{mode:s,bot:r}=Fy(),{formState:l,register:c,errors:d,watch:u,setValue:p}=Object(_i.e)(),g=null==r?void 0:r.name,h=Object(a.useRef)(),m=u("name"),f={validate:{maxLength:e=>!(e.trim().length>80)||i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.input.error.maxLength"}),required:e=>0!==e.trim().length||i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.input.error.required"})}};return Object(a.useEffect)(()=>{var e;s===Py.DUPLICATE&&g&&g===m&&!l.isSubmitted&&(p("name",i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.input.value.duplicated"},{name:g})),null==(e=h.current)||e.focus())},[g,l.isSubmitted,i,s,p,m]),Object(W.jsx)(Dy.c,{title:i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.title"}),children:Object(W.jsx)(o.InputText,{ref:e=>{h.current=e,c(e,f)},name:"name",placeholder:i.formatMessage({id:"desk.settings.bots.detail.form.basic.botName.input.ph"}),error:{hasError:!!d.name,message:null!=(e=null==(t=d.name)||null==(n=t.message)?void 0:n.toString())?e:""}})})};n("Kz25");var $y=n("mby5");const By=Object(r.default)($y.a).withConfig({displayName:"DeskBotPhotoSetting__BotAvatar",componentId:"sc-1p3ddwd-0"})(["margin-right:24px;"]),Vy=r.default.div.withConfig({displayName:"DeskBotPhotoSetting__PhotoUrlFieldError",componentId:"sc-1p3ddwd-1"})(["margin-top:2px;line-height:16px;color:",";font-size:12px;"],Object(o.cssVariables)("red-5")),zy=r.default.div.withConfig({displayName:"DeskBotPhotoSetting__ProfileFileFieldWrapper",componentId:"sc-1p3ddwd-2"})(["display:flex;flex-direction:row;a{margin-top:22px;}label{cursor:pointer;}input{display:none;}"]),Hy=()=>{var e,t;const n=Object(E.a)(),{bot:i}=Fy(),{errors:s,watch:r,register:l}=Object(_i.e)(),c=r("profileFile"),d={validate:{sizeLimit:e=>{if(e&&e.length>0){if(e[0].size>5*f.k)return n.formatMessage({id:"desk.settings.bots.detail.form.basic.botPhoto.error.sizeLimit"})}return!0}}},u=Object(a.useMemo)(()=>c&&c.length>0?window.URL.createObjectURL(c[0]):(null==i?void 0:i.photoUrl)||void 0,[i,c]);return Object(W.jsx)(Dy.c,{title:n.formatMessage({id:"desk.settings.bots.detail.form.basic.botPhoto.title"}),description:n.formatMessage({id:"desk.settings.bots.detail.form.basic.botPhoto.desc"}),children:Object(W.jsxs)(zy,{"data-test-id":"BotPhotoWrapper",children:[Object(W.jsx)(By,{size:64,profileID:null!=(e=null==i?void 0:i.id)?e:0,imageUrl:u}),Object(W.jsxs)("div",{children:[Object(W.jsx)(o.Link,{children:Object(W.jsxs)("label",{htmlFor:"upload",children:[Object(W.jsx)("input",{ref:l(d),type:"file",id:"upload",name:"profileFile",accept:"image/*","data-test-id":"BotProfileFile"}),n.formatMessage({id:"desk.settings.bots.detail.form.basic.botPhoto.button.upload"})]})}),!!s.profileFile&&Object(W.jsx)(Vy,{children:null==(t=s.profileFile)?void 0:t.message})]})]})})};var qy=n("nNFT");const Gy=()=>{var e,t,n;const a=Object(E.a)(),i=Object(P.k)(),{pid:s,region:r}=Object(L.a)(),{errors:l,register:c,trigger:d,getValues:u}=Object(_i.e)(),{mode:p}=Fy(),g=Object(qy.a)(async e=>{try{const{data:t}=await N.checkIsBotKeyDuplicated(s,r,{botKey:e});return!!t.result||a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.error.unique"})}catch{return!0}},200),h={validate:{maxLength:e=>!(e.trim().length>30)||a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.error.maxLength"}),required:e=>0!==e.trim().length||a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.error.required"}),allowed:e=>e.length>1?!!e.match(/^[a-z0-9-]*$/)||a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.error.allowed"}):!!e.match(/^[a-z0-9]/)||a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.error.startWith"}),unique:e=>{var t;return p!==Py.CREATE&&(p!==Py.DUPLICATE||"allowed"===(null==(t=l.key)?void 0:t.type))||g(e)}}};return Object(W.jsx)(Dy.c,{title:a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.title"}),description:a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.desc"}),children:Object(W.jsx)(o.InputText,{ref:c(h),name:"key",readOnly:p===Py.EDIT,placeholder:a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.ph"}),helperText:p===Py.CREATE?a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.desc"}):void 0,icons:p===Py.EDIT?[{icon:"copy",title:a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.copy"}),onClick:()=>{i(u("key"),{copySuccessMessage:a.formatMessage({id:"desk.settings.bots.detail.form.basic.botKey.input.copy.toast.success"})})}}]:void 0,error:{hasError:!!l.key,message:null!=(e=null==(t=l.key)||null==(n=t.message)?void 0:n.toString())?e:""},onChange:()=>d("key")})})},Wy=r.default.div.withConfig({displayName:"DeskBotWebhookUrlSetting__WebhookUrlFieldWrapper",componentId:"sc-9gqa6z-0"})(["display:flex;flex-direction:row;div:first-child{flex:1;}"]);var Ky=Object(r.default)(o.Button).withConfig({displayName:"DeskBotWebhookUrlSetting___StyledButton",componentId:"sc-9gqa6z-1"})(["margin-left:8px;"]);const Yy=()=>{var e,t,n;const i=Object(E.a)(),{pid:s,region:r}=Object(L.a)(),{errors:l,register:c}=Object(_i.e)(),{mode:d,bot:u}=Fy(),{openWebhookLogs:p}=oy(),[{error:g,status:h},m]=Object(P.g)(e=>N.updateDeskBot(s,r,{id:e,payload:{isUnreadError:!1}}),[s,r]);Object(P.s)(g);const b=Object(a.useCallback)(()=>{u&&(u.isUnreadError&&m(u.id),p(u.id))},[u,m,p]),j={pattern:{value:f.oc,message:i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.input.error.invalid"})},validate:{required:e=>0!==e.trim().length||i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.input.error.required"})}};return Object(W.jsx)(Dy.c,{title:i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.title"}),description:i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.desc"}),children:Object(W.jsxs)(Wy,{children:[Object(W.jsx)(o.InputText,{ref:c(j),name:"webhookUrl",placeholder:i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.input.ph"}),error:{hasError:!!l.webhookUrl,message:null!=(e=null==(t=l.webhookUrl)||null==(n=t.message)?void 0:n.toString())?e:""}}),d===Py.EDIT&&Object(W.jsx)(Ky,{buttonType:"tertiary",icon:"call-logs",disabled:"loading"===h,onClick:b,children:i.formatMessage({id:"desk.settings.bots.detail.form.basic.webhookUrl.button.webhookLogs"})})]})})},Qy=()=>{const e=Object(E.a)(),t=Object(P.k)(),{bot:n}=Fy();return Object(W.jsx)(Dy.c,{title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.secretKey.title"}),description:e.formatMessage({id:"desk.settings.bots.detail.form.basic.secretKey.desc"}),children:Object(W.jsx)(o.InputText,{value:null==n?void 0:n.secretKey,readOnly:!0,icons:[{icon:"copy",title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.secretKey.input.copy"}),onClick:()=>{n&&t(n.secretKey,{copySuccessMessage:e.formatMessage({id:"desk.settings.bots.detail.form.basic.secretKey.input.copy.toast.success"})})}}],"data-test-id":"BotSecretKeyInput"})})},Jy=e=>{const t=Object(E.a)();if(e===f.M.FAQBOT){return{type:f.M.FAQBOT,name:"",key:"",profileFile:null,canReceiveTransferredTickets:!1,welcomeMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.input.default"}),handoverMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.input.default"}),noResultsMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.noResult.input.default"}),questionSelectedMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.questionSelected.input.default"})}}return{type:f.M.CUSTOMIZED,name:"",key:"",profileFile:null,webhookUrl:"",canReceiveTransferredTickets:!1,welcomeMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.input.default"}),fallbackRetryLimit:1,serverErrorMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.serverMessage.input.default"}),timeoutMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeoutMessage.input.default"}),timeLimitMinutes:1,timeLimitSeconds:0,handoverMessage:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.input.default"})}},Xy=()=>{const e=Object(E.a)(),{control:t}=Object(_i.e)(),{queryParams:n}=Fy(),a=Jy(n.botType||f.M.CUSTOMIZED);return Object(W.jsx)(Dy.c,{title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.transfer.title"}),titleId:"can-receive-transferred-tickets",description:e.formatMessage({id:"desk.settings.bots.detail.form.basic.transfer.desc"}),children:Object(W.jsx)(_i.a,{control:t,name:"canReceiveTransferredTickets",defaultValue:a.canReceiveTransferredTickets,render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(o.Toggle,{ref:i,name:a,checked:n,"aria-labelledby":"can-receive-transferred-tickets",onChange:e,onBlur:t})})})},Zy=()=>{const e=Object(E.a)(),t=Object(P.c)();return Object(W.jsx)(Dy.c,{title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.assignmentRules.title"}),description:e.formatMessage({id:"desk.settings.bots.detail.form.basic.assignmentRules.desc"}),children:Object(W.jsx)(o.Button,{buttonType:"tertiary",icon:"open-in-new",onClick:()=>window.open(`/${t}/desk/settings/assignment_rules`),children:e.formatMessage({id:"desk.settings.bots.detail.form.basic.assignmentRules.button"})})})},eO=r.default.div.withConfig({displayName:"CaretPopper__PopperContainer",componentId:"svlbpt-0"})(["position:absolute;padding:8px 0;overflow:hidden;background:white;border-radius:4px;box-shadow:0 3px 5px -3px rgba(33,34,66,0.04),0 3px 14px 2px rgba(33,34,66,0.08),0 8px 10px 1px rgba(33,34,66,0.12);"]),tO=r.default.ul.withConfig({displayName:"CaretPopper__ItemContainer",componentId:"svlbpt-1"})([""]),nO=r.default.li.withConfig({displayName:"CaretPopper__CaretPopperItem",componentId:"svlbpt-2"})(["padding:8px 16px;outline:0;background:",";transition:background 0.2 ",";cursor:pointer;&:hover{background:",";}&:focus{box-shadow:inset 0 0 0 2px ",";}"],e=>e.isHighlighted?Object(o.cssVariables)("neutral-1"):"transparent",o.transitionDefault,Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("purple-7"));class aO{constructor(e){this.rects={top:0,left:0,bottom:0,right:0,width:0,height:0},e&&(this.rects=e)}getBoundingClientRect(){return this.rects}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}var iO=({className:e,isOpen:t,highlightedIndex:n,itemContainerRef:i,items:s,itemToElement:r,searchQuery:l,popperProps:c,scrollbarProps:d,scrollbarRef:u,onItemFilter:p,onItemClick:g})=>{const[h,m]=Object(a.useState)(new aO);if(Object(a.useEffect)(()=>{m(new aO(pi()))},[t,s,l]),!t)return null;const f=p?s.filter(p):s;return jn.a.createPortal(Object(W.jsx)(dn.a,{placement:"top",referenceElement:h,...c,children:({ref:a,style:s})=>Object(W.jsx)(eO,{className:e,ref:a,style:s,isShow:t,children:Object(W.jsx)(o.ScrollBar,{ref:u,...d,children:Object(W.jsx)(tO,{ref:i,children:f.map((e,t)=>Object(W.jsx)(nO,{role:"option","aria-selected":n===t,isHighlighted:n===t,onClick:g(e),children:r?r(e):e.label||e.value},`${e.value}-${t}`))})})})}),document.getElementById("portal_popup"))},sO=n("rJpm"),rO=n("yMp5");const oO=i.a.memo(({text:e,values:t})=>{const n=((e,t)=>{if(e.constructor!==Array)throw new Error("The first parameter should be type of string Array");return e.reduce((e,n)=>{const a=t(n);return e.push(a),e},[])})(e.split(/({[a-zA-Z_]+})/g),e=>{if(!t)return e;const n=Object.keys(t);let a=null;return n.forEach(n=>{e===`{${n}}`&&(a=t[n])}),a||e});return Object(W.jsx)(W.Fragment,{children:n})}),lO=(e,t)=>{var n;if(null!=(n=e.current)&&n.getCurrent()){const n=(e=>{let t=0;if(window.getSelection){const n=window.getSelection();if(n){const a=n.getRangeAt(0),i=a.cloneRange();i.selectNodeContents(e),i.setEnd(a.endContainer,a.endOffset),t=i.toString().length}}return t})(e.current.getCurrent());let a=((e,t)=>{const n=e.slice(0,t+1).search(/\S+$/),a=e.slice(t).search(/\s/);return a<0?e.slice(n):e.slice(n,a+t)})(e.current.getText(),n-1);const i=a.lastIndexOf(t);return a&&i>0&&(a=a.slice(i,a.length)),a}return""},cO=({range:e,replaceValue:t,searchQuery:n})=>{let a=null;var i;if(window.getSelection&&(a=window.getSelection(),null!=(i=a)&&i.rangeCount&&e)){if(a.removeAllRanges(),a.addRange(e),!a.focusNode)return;const{nodeValue:i}=a.focusNode,s=(i?i.slice(0,a.focusOffset):"").lastIndexOf(n);if(-1===s)return;e.setStart(a.focusNode,s),e.setEnd(a.focusNode,a.focusOffset),e.deleteContents();const r=document.createElement("div");r.innerHTML=`{${t}}`;const o=document.createDocumentFragment(),l=o.appendChild(r.firstChild);e.insertNode(o),l&&((e=e.cloneRange()).setStartAfter(l),e.collapse(!0),a.removeAllRanges(),a.addRange(e))}};var dO;!function(e){e.ORIGINAL="ORIGINAL",e.PREVIEW="PREVIEW"}(dO||(dO={}));const uO=r.default.div.withConfig({displayName:"FormatTextarea__Container",componentId:"yxmqph-0"})(["position:relative;z-index:1;padding:0 16px 6px;min-height:128px;border-radius:4px;border-width:1px;border-style:solid;border-color:",";border-color:",";box-shadow:",";box-shadow:",";transition:0.2s ",";transition-property:color,background,border,box-shadow;will-change:color,background,border,box-shadow;&:focus{border-color:",";box-shadow:0 0 0 1px ",";}#caret{display:inline-block;width:1px;height:18px;background:",";}"],e=>e.isFocused?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-4"),e=>e.error&&Object(o.cssVariables)("red-5"),e=>e.isFocused?`0 0 0 1px ${Object(o.cssVariables)("purple-7")}`:"none",e=>e.error&&`0 0 0 1px ${Object(o.cssVariables)("red-5")}`,o.transitionDefault,Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")),pO=r.default.div.withConfig({displayName:"FormatTextarea__EditorFunctions",componentId:"yxmqph-1"})(["display:flex;align-items:center;"]),gO=r.default.ul.withConfig({displayName:"FormatTextarea__EditorTabs",componentId:"yxmqph-2"})(["display:flex;flex:1;"]),hO=Object(r.default)(o.Lozenge).withConfig({displayName:"FormatTextarea__EditorTag",componentId:"yxmqph-3"})(["display:inline-block;font-family:'Roboto Mono',monospace;color:"," !important;"],Object(o.cssVariables)("neutral-10")),mO=r.default.li.withConfig({displayName:"FormatTextarea__EditorTab",componentId:"yxmqph-4"})(["position:relative;display:flex;align-items:center;margin-right:24px;height:40px;font-size:14px;font-weight:600;line-height:1.43;letter-spacing:-0.1px;color:",";cursor:pointer;&:before{content:'';display:block;position:absolute;right:0;left:0;bottom:0;width:100%;height:2px;background:",";opacity:",";transform:scale(",");transition:0.2s ",";transition-property:opacity,transform;}"],e=>e.isActive?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-7"),Object(o.cssVariables)("purple-7"),e=>e.isActive?1:0,e=>e.isActive?1:0,o.transitionDefault),fO=r.default.div.withConfig({displayName:"FormatTextarea__EditorPropertyTag",componentId:"yxmqph-5"})(["flex:none;position:relative;z-index:100;height:40px;transform:translateX(8px) translateY(4px);display:flex;align-items:center;"]),bO=Object(r.css)(["margin:0;padding:0;min-height:68px;font-size:14px;line-height:1.5;letter-spacing:-0.1px;color:",";background:none;outline:0;word-wrap:break-word;white-space:pre-wrap;"],Object(o.cssVariables)("neutral-10")),jO=r.default.div.withConfig({displayName:"FormatTextarea__EditorContainer",componentId:"yxmqph-6"})(["position:relative;margin-top:12px;"]),yO=Object(r.default)(rO.a).withConfig({displayName:"FormatTextarea__Editable",componentId:"yxmqph-7"})(["position:relative;z-index:30;"]),OO=r.default.div.withConfig({displayName:"FormatTextarea__Viewer",componentId:"yxmqph-8"})([""," position:absolute;top:0;left:0;z-index:10;width:100%;opacity:",";transition:opacity 0.3s ",";"],bO,e=>e.isShow?1:0,o.transitionDefault),vO=r.default.div.withConfig({displayName:"FormatTextarea__ErrorMessageText",componentId:"yxmqph-9"})(["display:block;font-size:12px;line-height:16px;color:",";margin-top:4px;transition:0.2s ",";transition-property:height,opacity,transform;will-change:height,opacity,transform;&[aria-hidden='true']{height:0;opacity:0;transform:translateY(-12px);}"],Object(o.cssVariables)("red-5"),o.transitionDefault);var xO=i.a.memo(({editorRef:e,defaultText:t,propertyTags:n,propertyTagTooltip:i,placeholder:s,contextualTooltip:l,disabled:c,onChange:d,testId:u,error:p})=>{var g;const h=Object(E.a)(),[m,f]=Object(a.useState)(!1),[b,j]=Object(a.useState)(dO.ORIGINAL),[y,O]=Object(a.useState)(""),[v,x]=Object(a.useState)(!1),[_,C]=Object(a.useState)(-1),k=Object(a.useRef)(null),w=Object(a.useRef)(null),T=Object(a.useRef)(null),S=Object(sO.a)({ref:w,exceptionRefs:[T],isExceptionsPreventOutsideClickEvent:!0,onOutsideClick:()=>{f(!1),j(dO.PREVIEW),x(!1),C(-1)}}),I=()=>{if(window.getSelection){const e=window.getSelection();e&&e.getRangeAt&&e.rangeCount&&(k.current=e.getRangeAt(0))}},M=e=>"{"===y||!y||e.value.toLowerCase().includes(y.slice(1).toLowerCase()),D=t=>()=>{var n;t===dO.ORIGINAL?null==(n=e.current)||n.focus():f(!1);t!==b&&j(t)},A=()=>{var t;null==(t=e.current)||t.focus()},N=Object(a.useCallback)(t=>{t&&t.stopPropagation(),I(),O(lO(e,"{")||"")},[e]);Object(a.useEffect)(()=>{"{"===y||0===y.indexOf("{")&&null!=n&&n.find(e=>e.value.toLowerCase().includes(y.toLowerCase().slice(1)))?x(!0):v&&0!==y.indexOf("{")&&x(!1)},[v,y,n]),Object(a.useEffect)(()=>{e.current&&e.current.setText(t)},[t,e]);const R=b===dO.ORIGINAL,P=b===dO.PREVIEW,L=null==n?void 0:n.reduce((e,t)=>(e[t.value]=Object(W.jsx)(hO,{color:"neutral",children:t.label},t.value),e),{});return Object(W.jsxs)(W.Fragment,{children:[n&&Object(W.jsx)(iO,{isOpen:v,searchQuery:y.slice(1),highlightedIndex:_,itemContainerRef:T,items:n,itemToElement:e=>Object(W.jsx)(hO,{color:"neutral",children:e.label},e.value),onItemFilter:M,onItemClick:e=>t=>{t&&t.preventDefault(),cO({range:k.current,replaceValue:e.value,searchQuery:y}),x(!1)}}),Object(W.jsxs)(uO,{id:"FormatTextareaContainer",ref:w,isFocused:m,error:p,children:[Object(W.jsxs)(pO,{children:[Object(W.jsxs)(gO,{children:[Object(W.jsx)(mO,{isActive:b===dO.ORIGINAL,onClick:D(dO.ORIGINAL),children:h.formatMessage({id:"ui.formatTextarea.tab.write"})}),Object(W.jsx)(mO,{isActive:P,onClick:D(dO.PREVIEW),children:h.formatMessage({id:"ui.formatTextarea.tab.preview"})})]}),n&&Object(W.jsxs)(fO,{"data-test-id":"PropertyTagMenu",children:[l&&Object(W.jsx)(o.ContextualHelp,{content:l,tooltipContentStyle:Object(r.css)(["width:360px;cursor:default;"]),placement:"top-end",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})}),Object(W.jsx)(o.Dropdown,{variant:"inline",showArrow:!1,placement:"bottom-end",disabled:P||c,selectedItem:{label:"",value:""},items:n,itemToElement:e=>Object(W.jsx)(hO,{color:"neutral",children:e.label},e.value),toggleRenderer:()=>Object(W.jsx)(o.Tooltip,{placement:"top-end",content:null!=i?i:"PropertyTag",portalId:"portal_popup",children:Object(W.jsx)(o.IconButton,{icon:"metadata",buttonType:"primary",size:"small",disabled:P||c,onClick:A})}),onItemSelected:t=>{var n;(k.current&&t&&((e,t)=>{let n=null;if(window.getSelection&&(n=window.getSelection(),n)){e.deleteContents();const a=document.createElement("div");a.innerHTML=t;const i=document.createDocumentFragment();let s=null,r=null;for(;s=a.firstChild;)r=i.appendChild(s);if(e.insertNode(i),r){const t=e.cloneRange();t.setStartAfter(r),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}}})(k.current,`{${t.value}}`),e.current)&&(null==d||d(null==(n=e.current)?void 0:n.getText()))}})]})]}),Object(W.jsxs)(jO,{children:[Object(W.jsx)(yO,{ref:e,autoFocus:!1,placeholder:s,isEnterKeySubmit:!1,isEditable:!c,isStopDefaultKeyDownEvent:v,onFocus:()=>{S.subscribe(),f(!0),j(dO.ORIGINAL),I()},onBlur:()=>{S.unsubscribe()},onKeyDown:e=>{if(e&&e.stopPropagation(),n&&v&&["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)){e&&e.preventDefault();const t=n.filter(M),a=t[_],i=t.length-1;switch(e.key){case"ArrowUp":C(_-1<0?i:_-1);break;case"ArrowDown":C(_+1>i?0:_+1);break;case"Enter":a&&cO({range:k.current,replaceValue:a.value,searchQuery:y}),x(!1),C(-1);break;case"Escape":x(!1),C(-1)}}else I()},onKeyUp:N,onChange:d,testId:u,styles:Object(r.css)(["",";opacity:",";transition:opacity 0.3s ",";"],bO,R?1:0,o.transitionDefault)}),Object(W.jsx)(OO,{isShow:P,"data-test-id":"Preview",children:Object(W.jsx)(oO,{text:(null==(g=e.current)?void 0:g.getText())||"",values:L})})]})]}),Object(W.jsx)(vO,{"data-test-id":"ErrorMessage","aria-hidden":!p,children:p})]})});const _O=r.default.div.withConfig({displayName:"FormattedBotMessage__TooltipHeader",componentId:"sc-1nfye6h-0"})([""," color:",";margin-bottom:4px;"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10"));var CO=Object(r.default)("b").withConfig({displayName:"FormattedBotMessage___StyledB",componentId:"sc-1nfye6h-1"})(["font-weight:600;"]);const kO=({name:e,defaultValue:t,registerOptions:n,tags:i,testId:s})=>{var r,o,l,c;const d=Object(E.a)(),u=Object(a.useRef)(null),{watch:p,errors:g,register:h,setValue:m}=Object(_i.e)(),f={[G.g.CUSTOMER_NAME]:{label:d.formatMessage({id:"desk.settings.bots.detail.property.customerName"}),value:G.g.CUSTOMER_NAME},[G.g.TICKET_NAME]:{label:d.formatMessage({id:"desk.settings.bots.detail.property.ticketName"}),value:G.g.TICKET_NAME},[G.g.SELECTED_QUESTION]:{label:d.formatMessage({id:"desk.settings.bots.detail.property.selectedQuestion"}),value:G.g.SELECTED_QUESTION}};Object(a.useEffect)(()=>{h(e,n)},[e,h,n]);return Object(W.jsx)(xO,{editorRef:u,defaultText:(null!=(r=p(e))?r:"")||t,contextualTooltip:Object(W.jsxs)("div",{children:[Object(W.jsx)(_O,{children:d.formatMessage({id:"desk.settings.systemMessages.contextualTooltip.title"})}),Object(W.jsx)("div",{children:d.formatMessage({id:"desk.settings.systemMessages.contextualTooltip.desc"},{b:e=>Object(W.jsx)(CO,{children:e}),break:Object(W.jsx)("br",{})})})]}),propertyTags:i.map(e=>f[e]),propertyTagTooltip:d.formatMessage({id:"desk.settings.bots.detail.property.tooltip"}),testId:s,error:null!=(o=null==(l=g[e])||null==(c=l.message)?void 0:c.toString())?o:"",onChange:t=>{m(e,t,{shouldDirty:!0})}})},wO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__FormattedWrapper",componentId:"sc-139cztz-0"})(["& + &{margin-top:16px;}"]),TO=r.default.label.withConfig({displayName:"DeskBotFallbackMessageSetting__InputLabelWrapper",componentId:"sc-139cztz-1"})(["display:flex;align-items:center;",";","{margin-left:4px;}"],o.Typography["label-02"],o.Icon),SO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__FallbackCountFieldLabel",componentId:"sc-139cztz-2"})(["margin-bottom:12px;color:",";",""],Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),EO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__FallbackRetryTimesFieldWrapper",componentId:"sc-139cztz-3"})(["display:flex;align-items:center;margin-bottom:16px;"]),IO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__FallbackRetryTimesFieldSuffix",componentId:"sc-139cztz-4"})(["margin-left:8px;color:",";",";"],Object(o.cssVariables)("neutral-10"),o.Subtitles["subtitle-01"]),MO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__TimeLimitFieldLabel",componentId:"sc-139cztz-5"})(["margin-top:16px;margin-bottom:8px;",";font-weight:500;"],o.Typography["label-03"]),DO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__TimeLimitSecondsFieldWrapper",componentId:"sc-139cztz-6"})(["display:flex;flex-direction:column;margin-left:32px;"]),AO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__TimeLimitFieldsWrapper",componentId:"sc-139cztz-7"})(["display:flex;flex-direction:row;align-items:top;",";> div{margin-right:8px;}span{margin-top:8px;}"],o.Subtitles["subtitle-01"]),NO=r.default.div.withConfig({displayName:"DeskBotFallbackMessageSetting__TimeLimitFieldErrorMessage",componentId:"sc-139cztz-8"})(["margin-top:4px;line-height:16px;color:",";font-size:12px;"],Object(o.cssVariables)("red-5"));var RO=Object(r.default)(o.Lozenge).withConfig({displayName:"DeskBotFallbackMessageSetting___StyledLozenge",componentId:"sc-139cztz-9"})(["display:inline-block;"]);const PO=()=>{var e,t;const n=Object(E.a)(),{errors:i,control:s,getValues:r,watch:l,trigger:c}=Object(_i.e)(),d=Jy(f.M.CUSTOMIZED),u=l("timeLimitMinutes");Object(a.useEffect)(()=>{c("timeLimitSeconds")},[u,c]);const p={required:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.serverMessage.input.error.required"}),maxLength:{value:254,message:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.serverMessage.input.error.maxLength"})}},g={required:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeoutMessage.input.error.required"}),maxLength:{value:254,message:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeoutMessage.input.error.maxLength"})}};return Object(W.jsxs)(Dy.c,{title:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.title"}),description:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(SO,{children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.count.label"},{pending:Object(W.jsx)(RO,{variant:o.LozengeVariant.Light,color:"red",children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.count.label.tag"})})})}),Object(W.jsxs)(EO,{"data-test-id":"fallbackRetryLimit",children:[Object(W.jsx)(_i.a,{control:s,name:"fallbackRetryLimit",defaultValue:d.fallbackRetryLimit,render:({onChange:e,value:t,ref:n})=>Object(W.jsx)(o.Dropdown,{ref:n,selectedItem:t,onChange:Object(H.onDropdownChangeIgnoreNull)(e),items:Array.from({length:5}).map((e,t)=>t+1),width:156})}),Object(W.jsx)(IO,{children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.count.input.suffix"})})]}),Object(W.jsxs)(wO,{children:[Object(W.jsxs)(TO,{children:[n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.serverMessage.input.label"}),Object(W.jsx)(V.qb,{content:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.serverMessage.input.tooltip"})})]}),Object(W.jsx)(kO,{name:"serverErrorMessage",defaultValue:null!=(e=d.serverErrorMessage)?e:"",registerOptions:p,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME]})]}),Object(W.jsxs)(wO,{children:[Object(W.jsxs)(TO,{children:[n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeoutMessage.input.label"}),Object(W.jsx)(V.qb,{content:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeoutMessage.input.tooltip"})})]}),Object(W.jsx)(kO,{name:"timeoutMessage",defaultValue:null!=(t=d.timeoutMessage)?t:"",registerOptions:g,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME]})]}),Object(W.jsx)(MO,{children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeLimit.label"})}),Object(W.jsxs)(AO,{"data-test-id":"timeLimitMinutes",children:[Object(W.jsx)(_i.a,{control:s,name:"timeLimitMinutes",defaultValue:d.timeLimitMinutes,render:({onChange:e,value:t,ref:n})=>Object(W.jsx)(o.Dropdown,{ref:n,selectedItem:t,items:Array.from({length:6},(e,t)=>t),onChange:Object(H.onDropdownChangeIgnoreNull)(e),width:156})}),Object(W.jsx)("span",{children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeLimit.minutes"})}),Object(W.jsxs)(DO,{"data-test-id":"timeLimitSeconds",children:[Object(W.jsx)(_i.a,{control:s,name:"timeLimitSeconds",defaultValue:d.timeLimitSeconds,rules:{validate:{limit:e=>!(5===r("timeLimitMinutes")&&e>0)||n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeLimit.seconds.error.limit"})}},render:({onChange:e,value:t,ref:n})=>Object(W.jsx)(o.Dropdown,{ref:n,selectedItem:t,items:Array.from({length:6},(e,t)=>10*t),onChange:Object(H.onDropdownChangeIgnoreNull)(e),hasError:!!i.timeLimitSeconds,width:156})}),i.timeLimitSeconds&&Object(W.jsx)(NO,{children:i.timeLimitSeconds.message})]}),Object(W.jsx)("span",{children:n.formatMessage({id:"desk.settings.bots.detail.form.message.fallback.timeLimit.seconds"})})]})]})};var LO=Object(r.default)("b").withConfig({displayName:"DeskBotHandoverMessageSetting___StyledB",componentId:"sc-1aootsf-0"})(["font-weight:600;"]);const FO=()=>{var e;const t=Object(E.a)(),{queryParams:n}=Object(a.useContext)(Ly),i=Jy(n.botType||f.M.CUSTOMIZED),s={required:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.input.error.required"}),maxLength:{value:254,message:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.input.error.maxLength"})}};return Object(W.jsx)(Dy.c,{title:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.title"}),description:t.formatMessage({id:"desk.settings.bots.detail.form.message.handover.desc"},{b:e=>Object(W.jsx)(LO,{children:e})}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(kO,{name:"handoverMessage",defaultValue:null!=(e=i.handoverMessage)?e:"",registerOptions:s,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME]})})},UO=()=>{var e;const t=Object(E.a)(),{queryParams:n}=Object(a.useContext)(Ly),i=Jy(n.botType||f.M.CUSTOMIZED),s={required:t.formatMessage({id:"desk.settings.bots.detail.form.message.noResult.input.error.required"}),maxLength:{value:254,message:t.formatMessage({id:"desk.settings.bots.detail.form.message.noResult.input.error.maxLength"})}};return Object(W.jsx)(Dy.c,{title:t.formatMessage({id:"desk.settings.bots.detail.form.message.noResult.title"}),description:t.formatMessage({id:"desk.settings.bots.detail.form.message.noResult.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(kO,{name:"noResultsMessage",defaultValue:null!=(e=i.noResultsMessage)?e:"",registerOptions:s,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME],testId:"DeskBotNoResultsMessage"})})},$O=()=>{var e;const t=Object(E.a)(),{queryParams:n}=Object(a.useContext)(Ly),i=Jy(n.botType||f.M.CUSTOMIZED),s={required:t.formatMessage({id:"desk.settings.bots.detail.form.message.questionSelected.input.error.required"}),maxLength:{value:254,message:t.formatMessage({id:"desk.settings.bots.detail.form.message.questionSelected.input.error.maxLength"})}};return Object(W.jsx)(Dy.c,{title:t.formatMessage({id:"desk.settings.bots.detail.form.message.questionSelected.title"}),description:t.formatMessage({id:"desk.settings.bots.detail.form.message.questionSelected.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(kO,{name:"questionSelectedMessage",defaultValue:null!=(e=i.questionSelectedMessage)?e:"",registerOptions:s,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME,f.m.SELECTED_QUESTION]})})},BO=()=>{var e;const t=Object(E.a)(),{queryParams:n}=Object(a.useContext)(Ly),i=Jy(n.botType||f.M.CUSTOMIZED),s={required:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.input.error.required"}),maxLength:{value:254,message:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.input.error.maxLength"})}};return Object(W.jsx)(Dy.c,{title:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.title"}),description:t.formatMessage({id:"desk.settings.bots.detail.form.message.welcome.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(kO,{name:"welcomeMessage",defaultValue:null!=(e=i.welcomeMessage)?e:"",testId:"DeskBotWelcomeMessage",registerOptions:s,tags:[f.m.TICKET_NAME,f.m.CUSTOMER_NAME]})})},VO=e=>{const t=e.split("/").reverse()[0];return"edit"===t?Py.EDIT:"create"===t?Py.CREATE:Py.DUPLICATE},zO=()=>{const e=Object(s.l)(),[t,n]=Object(a.useState)(VO(e.pathname));return Object(a.useEffect)(()=>{e.pathname&&n(VO(e.pathname))},[e.pathname]),Object(a.useMemo)(()=>({mode:t,setMode:n}),[t])},HO=()=>{const e=Object(E.a)(),{mode:t}=zO();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Ry,{title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.title"}),children:[Object(W.jsx)(Uy,{}),Object(W.jsx)(Hy,{}),Object(W.jsx)(Gy,{}),Object(W.jsx)(Yy,{}),t===Py.EDIT&&Object(W.jsx)(Qy,{}),Object(W.jsx)(Xy,{}),t===Py.EDIT&&Object(W.jsx)(Zy,{})]}),Object(W.jsxs)(Ry,{title:e.formatMessage({id:"desk.settings.bots.detail.form.message.title"}),children:[Object(W.jsx)(BO,{}),Object(W.jsx)(PO,{}),Object(W.jsx)(FO,{})]})]})},qO=()=>{const e=Object(E.a)(),{mode:t}=zO();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Ry,{title:e.formatMessage({id:"desk.settings.bots.detail.form.basic.title"}),children:[Object(W.jsx)(Uy,{}),Object(W.jsx)(Hy,{}),Object(W.jsx)(Gy,{}),t===Py.EDIT&&Object(W.jsx)(Qy,{}),Object(W.jsx)(Xy,{}),t===Py.EDIT&&Object(W.jsx)(Zy,{})]}),Object(W.jsxs)(Ry,{title:e.formatMessage({id:"desk.settings.bots.detail.form.message.title"}),children:[Object(W.jsx)(BO,{}),Object(W.jsx)(UO,{}),Object(W.jsx)(FO,{}),Object(W.jsx)($O,{})]})]})},GO=r.default.div.withConfig({displayName:"DeskBotDetailStatusDropdown__ToggleWrapper",componentId:"pgl0o6-0"})(["display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;padding-left:16px;padding-right:4px;& > svg{margin-right:8px;}"]),WO=r.default.div.withConfig({displayName:"DeskBotDetailStatusDropdown__ActivationDropdownItem",componentId:"pgl0o6-1"})(["display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:500;& > svg{margin-right:8px;}"]),KO={[f.c.ACTIVE]:"desk.settings.bots.detail.header.title.label.status.activated",[f.c.INACTIVE]:"desk.settings.bots.detail.header.title.label.status.deactivated",[f.c.PENDING]:"desk.settings.bots.detail.header.title.label.status.pending",[f.c.PAUSED]:"desk.settings.bots.detail.header.title.label.status.paused"},YO=Object(a.memo)(({mode:e,bot:t,onChange:n})=>{var i;const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),c=Object(P.W)(),[{status:d},u]=Object(P.g)(e=>D.g.updateAgentStatus(r,l,{agentId:e,status:f.c.ACTIVE}),[r,l]),[{status:p},g]=Object(P.g)(()=>D.g.updateAgentStatus(r,l,{agentId:null==t?void 0:t.agent.id,status:f.c.PAUSED}),[t,r,l]),h=Object(a.useCallback)(()=>{t&&u(t.agent.id)},[u,t]),m=Object(a.useCallback)(()=>{t&&c({dialogTypes:A.a.DeactivateDeskBot,dialogProps:{agentId:t.agent.id,onSuccess:()=>n(f.c.INACTIVE)}})},[t,n,c]),b=Object(a.useCallback)(()=>{g()},[g]),j=Object(a.useMemo)(()=>[{key:f.c.PAUSED,label:s.formatMessage({id:"desk.settings.bots.detail.header.button.pause"}),icon:"pause",onClick:b},{key:f.c.ACTIVE,label:s.formatMessage({id:"desk.settings.bots.detail.header.button.activate"}),icon:"resume",onClick:h},{key:f.c.INACTIVE,label:s.formatMessage({id:"desk.settings.bots.detail.header.button.deactivate"}),icon:"stop",onClick:m}],[h,m,s,b]),y=Object(a.useMemo)(()=>({key:f.c.PENDING,label:"",icon:"pause",onClick:void 0}),[]);Object(a.useEffect)(()=>{"success"===d&&(n(f.c.ACTIVE),o.toast.success({message:s.formatMessage({id:"desk.settings.bots.detail.toast.activated"})}))},[d,s,n]),Object(a.useEffect)(()=>{"success"===p&&(n(f.c.PAUSED),o.toast.success({message:s.formatMessage({id:"desk.settings.bots.detail.toast.paused"})}))},[p,s,n]);const O=Object(a.useCallback)(e=>Object(W.jsxs)(WO,{children:[Object(W.jsx)(o.Icon,{icon:e.icon,size:18,color:Object(o.cssVariables)("neutral-6")}),e.label]}),[]),v=Object(a.useMemo)(()=>[...j,y].find(e=>e.key===(null==t?void 0:t.status))||j[2],[null==t?void 0:t.status,j,y]),x=Object(a.useMemo)(()=>j.filter(e=>(null==t?void 0:t.status)===f.c.PENDING?e.key===f.c.ACTIVE:e.key!==(null==t?void 0:t.status)),[null==t?void 0:t.status,j]),_=e===Py.CREATE||e===Py.DUPLICATE,C=null!=(i=!(null!=t&&t.isReadyToActivate))&&i,k=_||C,w=Object(a.useMemo)(()=>_?{content:s.formatMessage({id:"desk.settings.bots.detail.header.button.activate.tooltip.custom"})}:C?{content:s.formatMessage({id:"desk.settings.bots.detail.header.button.activate.tooltip.faq"})}:void 0,[s,C,_]);return Object(W.jsx)(o.Dropdown,{size:"small",initialSelectedItem:v,selectedItem:v,items:x,disabled:k,tooltipProps:w,toggleRenderer:({selectedItem:e})=>{if(e)return Object(W.jsxs)(GO,{children:[Object(W.jsx)(o.Icon,{icon:e.icon,size:18,color:k?Object(o.cssVariables)("neutral-5"):"white"}),s.formatMessage({id:KO[e.key]})]})},itemToElement:O,toggleTheme:{contentColor:"white",hoverContentColor:"white",pressedContentColor:"white",bgColor:Object(o.cssVariables)("purple-7"),activeBgColor:Object(o.cssVariables)("purple-7"),hoverBgColor:Object(o.cssVariables)("purple-8"),pressedBgColor:Object(o.cssVariables)("purple-7"),disabledBgColor:Object(o.cssVariables)("neutral-2")},onChange:e=>{null==e||null==e.onClick||e.onClick()}})}),QO=r.default.div.withConfig({displayName:"DeskFAQBotFiles__FilesHeader",componentId:"sc-1bfmr1o-0"})(["display:flex;align-items:center;padding:24px 0;"]),JO=r.default.div.withConfig({displayName:"DeskFAQBotFiles__FilesHeaderContent",componentId:"sc-1bfmr1o-1"})(["display:flex;align-items:center;"]),XO=r.default.div.withConfig({displayName:"DeskFAQBotFiles__FilesHeaderActions",componentId:"sc-1bfmr1o-2"})(["flex:1;position:relative;text-align:right;"]),ZO=r.default.h2.withConfig({displayName:"DeskFAQBotFiles__FilesTitle",componentId:"sc-1bfmr1o-3"})(["line-height:1.25;letter-spacing:-0.15px;white-space:pre-wrap;color:",";font-size:16px;font-weight:500;"],Object(o.cssVariables)("neutral-10")),ev=Object(r.default)(o.Button).withConfig({displayName:"DeskFAQBotFiles__ActionButton",componentId:"sc-1bfmr1o-4"})(["& + &{margin-left:4px;}"]),tv=r.default.div.withConfig({displayName:"DeskFAQBotFiles__FilesBody",componentId:"sc-1bfmr1o-5"})([""]),nv=Object(r.default)(o.EmptyState).attrs({size:o.EmptyStateSize.Large}).withConfig({displayName:"DeskFAQBotFiles__EmptyStateContainer",componentId:"sc-1bfmr1o-6"})(["margin:104px auto;"]),av=Object(r.default)(o.Radio).withConfig({displayName:"DeskFAQBotFiles__BotRadio",componentId:"sc-1bfmr1o-7"})(["width:14px;height:14px;&::before{top:2px;left:2px;width:6px;height:6px;}"]),iv=r.default.div.withConfig({displayName:"DeskFAQBotFiles__FilesContainer",componentId:"sc-1bfmr1o-8"})(["width:100%;border-top:1px solid ",";",";"],Object(o.cssVariables)("neutral-3"),({$disabled:e})=>e&&Object(r.css)(["",",th > span{color:",";}"],ZO,Object(o.cssVariables)("neutral-5"))),sv=Object(r.default)(V.qc).withConfig({displayName:"DeskFAQBotFiles__StyledTicketStatusLozenge",componentId:"sc-1bfmr1o-9"})(["display:inline-block;margin:0 4px;"]),rv=Object(r.default)(V.jc).withConfig({displayName:"DeskFAQBotFiles__InvalidFileStatusDimmer",componentId:"sc-1bfmr1o-10"})(["opacity:",";transition:",";"],({$isInvalid:e})=>e?.4:1,Object(o.transitions)({duration:.3,properties:["opacity"]})),ov=[f.L.ERROR,f.L.EXPIRED,f.L.DELETED];let lv={};var cv=Object(r.default)(V.bc).withConfig({displayName:"DeskFAQBotFiles___StyledSlideTransition",componentId:"sc-1bfmr1o-11"})(["position:absolute;right:0;top:0;"]),dv=Object(r.default)(o.InlineNotification).withConfig({displayName:"DeskFAQBotFiles___StyledInlineNotification",componentId:"sc-1bfmr1o-12"})(["margin-bottom:24px;"]),uv=Object(r.default)(V.Ub).withConfig({displayName:"DeskFAQBotFiles___StyledPaginator",componentId:"sc-1bfmr1o-13"})(["margin-left:auto;"]);const pv=({shouldRefetchFiles:e,isSelectBotFileMode:t,setIsSelectBotFileMode:n})=>{var i,s;const r=Object(E.a)(),{pid:l,region:c}=Object(L.a)(),d=Object(P.W)(),{getErrorMessage:u}=Object($.a)(),{mode:p,bot:g,queryParams:h,updateParams:m,fetchDeskBotRequest:b}=Object(a.useContext)(Ly),j=null==g?void 0:g.id,y=p===Py.DUPLICATE,O=void 0===g,{tab:v,page:x,pageSize:_,sortBy:C,sortOrder:k}=h,[w,T]=Object(a.useState)([]),[S,I]=Object(a.useState)(0),[M,N]=Object(a.useState)(-1),[R,F]=Object(a.useState)(!1),U=Object(a.useRef)({}),B=Object(a.useRef)(),[{status:z,data:q},G]=Object(P.g)(e=>D.g.fetchDeskFAQBotFiles(l,c,e),[l,c]),[{status:K,data:Y,error:Q},J]=Object(P.g)(e=>D.g.updateDeskFAQBotFile(l,c,e),[l,c]),X=null!=(i=null==(s=w.find(({status:e})=>e===f.L.ACTIVE))?void 0:s.id)?i:0,Z=Object(a.useCallback)(()=>{if(j&&v===f.J.FILES){const e=k===f.Tb.DESCEND?"-":"";G({id:j,order:C?`${e}${C}`:"-created_at",offset:_&&x?Number(_)*(Number(x)-1):0,status:[f.L.ACTIVE,f.L.INACTIVE,f.L.PROCESSING,f.L.EXPIRED,f.L.ERROR],limit:_||10})}},[j,G,x,_,v,C,k]),ee=Object(a.useCallback)(async({id:e})=>{try{const{data:t}=await D.g.fetchDeskFAQBotFile(l,c,{id:e}),n=U.current[e];n&&t.status!==f.L.PROCESSING&&(clearInterval(n),U.current[e]=null,Z())}catch(t){o.toast.error({message:u(t)}),Object(H.logException)({error:t,label:"fetchDeskFAQBotFileRequest"});const n=U.current[e];n&&(clearInterval(n),U.current[e]=null)}},[Z,u,l,c]);Object(a.useEffect)(()=>{y||Z()},[Z,y]),Object(a.useEffect)(()=>{e&&Z()},[Z,e]),Object(a.useEffect)(()=>{q&&"success"===z&&(T(q.data.results),I(q.data.count))},[M,q,z]),Object(a.useEffect)(()=>{Y&&b()},[b,Y]),Object(a.useEffect)(()=>{if(!t){const e=w.find(e=>e.status===f.L.ACTIVE);e&&e.id!==M&&N(e.id),w.forEach(({id:e,status:t})=>{t!==f.L.PROCESSING||U.current[e]||(U.current[e]=setInterval(()=>{ee({id:e})},5e3),lv=U.current)})}},[M,w,ee,t]),Object(a.useEffect)(()=>{if("loading"===K&&T(e=>e.map(e=>e.id===M||e.status===f.L.ACTIVE?{...e,status:f.L.PROCESSING}:e)),"success"===K&&void 0!==B.current)switch(Z(),B.current){case f.L.DELETED:return o.toast.success({message:r.formatMessage({id:"desk.settings.bots.detail.files.toast.deleteFile.success"})}),void(B.current=void 0);default:o.toast.success({message:r.formatMessage({id:"desk.settings.bots.detail.files.toast.updateFileStatus.success"})}),B.current=void 0}Q&&"error"===K&&void 0!==B.current&&(B.current=void 0,o.toast.error({message:r.formatMessage({id:"desk.settings.bots.detail.files.toast.serverError"})}),Z())},[M,Z,r,Q,K]),Object(a.useEffect)(()=>()=>{Object.keys(lv).forEach(e=>{clearInterval(lv[e])})},[]);const te=Object(a.useCallback)(e=>e===h.sortBy?h.sortOrder:void 0,[h.sortBy,h.sortOrder]),ne=Object(a.useCallback)(async e=>{if(void 0!==g)try{F(!0);const{data:t}=await D.g.getFAQBotCSVFileDownloadURL(l,c,{id:e}),n=document.createElement("a");n.setAttribute("href",t.fileUrl),document.body.appendChild(n),n.click(),document.body.removeChild(n),o.toast.success({message:r.formatMessage({id:"desk.settings.bots.detail.files.toast.download.success"})})}catch(e){o.toast.error({message:u(e)})}finally{F(!1)}},[g,u,r,l,c]),ae=Object(a.useCallback)((e,t)=>{d({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:"desk.settings.bots.detail.files.popup.delete.header.title"}),description:t===f.L.ACTIVE?r.formatMessage({id:"desk.settings.bots.detail.files.popup.delete.header.desc.inUse"},{pending:Object(W.jsx)(sv,{ticketStatus:f.jc.PENDING})}):r.formatMessage({id:"desk.settings.bots.detail.files.popup.delete.header.desc.notInUse"}),cancelText:r.formatMessage({id:"desk.settings.bots.detail.files.popup.delete.button.cancel"}),confirmText:r.formatMessage({id:"desk.settings.bots.detail.files.popup.delete.button.delete"}),confirmType:"danger",onConfirm:()=>{B.current=f.L.DELETED,J({id:e,status:f.L.DELETED}),M&&N(-1)}}})},[M,r,d,J]),ie=Object(a.useCallback)((e,t)=>{e&&t&&m({sortBy:e.key,sortOrder:t})},[m]),se=Object(a.useCallback)((e,t)=>{m({page:e,pageSize:t})},[m]),re=e=>ov.includes(e),oe=Object(a.useMemo)(()=>{const e=[{key:"filename",dataIndex:"filename",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.head.name"}),flex:3,render:({filename:e,status:n})=>Object(W.jsx)(rv,{$isInvalid:t&&re(n),children:e})},{key:"createdBy",dataIndex:"createdBy",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.head.createdBy"}),flex:2,render:({createdBy:e,status:t})=>Object(W.jsx)(rv,{$isInvalid:re(t),children:Object(W.jsx)(V.kc,{agent:e,isShowAgentThumbnail:!0})})},{key:f.P.CREATED_AT,dataIndex:"createdAt",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.head.createdOn"}),flex:2,sorter:!0,defaultSortOrder:te(f.P.CREATED_AT),render:({createdAt:e,status:n})=>Object(W.jsx)(rv,{$isInvalid:t&&re(n),children:e?pm()(e).format("lll"):f.Z})},{key:"fileUploadNote",dataIndex:"fileUploadNote",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.head.notes"}),flex:2,render:({fileUploadNote:e,status:n})=>Object(W.jsx)(rv,{$isInvalid:t&&re(n),children:e||f.Z})},{key:f.P.STATUS,dataIndex:"status",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.head.status"}),flex:2,sorter:!0,defaultSortOrder:te(f.P.CREATED_AT),render:({status:e})=>Object(W.jsx)(V.I,{status:e})}];return t?[{title:"",key:"activeFAQBotFileId",width:20,render:({id:e,status:t})=>!ov.includes(t)&&Object(W.jsx)(av,{name:"activeFAQBotFileId",id:"activeFAQBotFileId",value:e,checked:e===M,disabled:t===f.L.PROCESSING,onChange:e=>{N(parseInt(e.target.value))}})},...e]:e},[M,te,r,t]),le=Object(a.useCallback)(e=>{const n=R||t,a=[{label:r.formatMessage({id:"desk.settings.bots.detail.files.table.body.overflowMenu.delete"}),disabled:n,onClick:()=>{ae(e.id,e.status)}}];return ov.includes(e.status)?a:[{label:r.formatMessage({id:"desk.settings.bots.detail.files.table.body.overflowMenu.download"}),disabled:n,onClick:()=>{ne(e.id)}},...a]},[ne,ae,r,R,t]);return Object(W.jsxs)(iv,{$disabled:O,children:[Object(W.jsxs)(QO,{children:[Object(W.jsxs)(JO,{children:[Object(W.jsx)(ZO,{children:r.formatMessage({id:"desk.settings.bots.detail.files.title"})}),Object(W.jsx)(V.qb,{content:r.formatMessage({id:"desk.settings.bots.detail.files.title.contextualHelp"})})]}),Object(W.jsxs)(XO,{children:[Object(W.jsxs)(V.bc,{show:t,shouldUnmountAfterFadeOut:!1,from:"left",children:[Object(W.jsx)(ev,{buttonType:"tertiary",variant:"ghost",disabled:O,onClick:()=>{n(!1),N(X||0)},children:r.formatMessage({id:"desk.settings.bots.detail.files.table.button.cancel"})}),Object(W.jsx)(ev,{buttonType:"secondary",isLoading:"loading"===K,disabled:"loading"===K||O||M===X||M<0,onClick:()=>{X!==M&&d({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:"desk.settings.bots.detail.files.popup.useFile.header.title"}),description:r.formatMessage({id:"desk.settings.bots.detail.files.popup.useFile.header.desc"}),cancelText:r.formatMessage({id:"desk.settings.bots.detail.files.popup.useFile.button.cancel"}),confirmText:r.formatMessage({id:"desk.settings.bots.detail.files.popup.useFile.button.ok"}),onConfirm:()=>{n(!1),B.current=f.L.ACTIVE,J({id:M,status:f.L.ACTIVE})}}})},children:r.formatMessage({id:"desk.settings.bots.detail.files.table.button.save"})})]}),Object(W.jsx)(cv,{show:!t,children:Object(W.jsx)(ev,{buttonType:"tertiary",disabled:O||0===w.length||w.every(({status:e})=>ov.includes(e)),onClick:()=>{n(!0)},children:r.formatMessage({id:"desk.settings.bots.detail.files.button.selectBot"})})})]})]}),Object(W.jsxs)(tv,{children:["error"===z&&Object(W.jsx)(dv,{type:"error",message:r.formatMessage({id:"desk.settings.bots.detail.files.inlineNotification.error.message.fetch"}),action:{label:r.formatMessage({id:"desk.settings.bots.detail.files.inlineNotification.error.button.retry"}),onClick:Z}}),Object(W.jsx)(o.Table,{rowKey:"id",dataSource:w,columns:oe,onSortByUpdated:ie,rowActions:e=>[Object(W.jsx)(o.OverflowMenu,{items:le(e)},"botFileActions")],emptyView:Object(W.jsx)(nv,{icon:"document",title:r.formatMessage({id:"desk.settings.bots.detail.files.table.body.empty.title"}),description:r.formatMessage({id:"desk.settings.bots.detail.files.table.body.empty.desc"})}),footer:S>10&&Object(W.jsx)(uv,{current:Number(h.page)||1,total:S,pageSize:h.pageSize,pageSizeOptions:f.E,onChange:se,onItemsPerPageChange:se})})]})]})},gv=r.default.div.withConfig({displayName:"DeskBotFileUploadSetting__Wrapper",componentId:"sc-193t3p0-0"})(["",""],({$disabled:e})=>e&&Object(r.css)(["",",","{color:",";}"],Dy.f,Dy.a,Object(o.cssVariables)("neutral-5"))),hv=r.default.div.withConfig({displayName:"DeskBotFileUploadSetting__FileUploader",componentId:"sc-193t3p0-1"})(["display:flex;margin-top:16px;"]),mv=Object(r.default)(o.Button).withConfig({displayName:"DeskBotFileUploadSetting__CancelFileUploadButton",componentId:"sc-193t3p0-2"})(["margin-left:4px;width:108px;"]),fv=Object(r.default)(mv).withConfig({displayName:"DeskBotFileUploadSetting__ChooseFileButton",componentId:"sc-193t3p0-3"})(["position:relative;margin-left:4px;width:108px;label{position:absolute;top:0;left:0;width:100%;height:100%;}"]),bv=Object(r.default)(V.bc).withConfig({displayName:"DeskBotFileUploadSetting__FileNameSuffixIconContainer",componentId:"sc-193t3p0-4"})(["position:absolute;z-index:90;width:16px;height:16px;top:12px;right:16px;"]);var jv=Object(r.default)(o.InlineNotification).withConfig({displayName:"DeskBotFileUploadSetting___StyledInlineNotification",componentId:"sc-193t3p0-5"})(["margin-bottom:24px;"]),yv=Object(r.default)(o.InputText).withConfig({displayName:"DeskBotFileUploadSetting___StyledInputText",componentId:"sc-193t3p0-6"})(["flex:auto;"]),Ov=Object(r.default)(o.Button).withConfig({displayName:"DeskBotFileUploadSetting___StyledButton",componentId:"sc-193t3p0-7"})(["margin-top:16px;"]),vv=Object(r.default)(o.InlineNotification).withConfig({displayName:"DeskBotFileUploadSetting___StyledInlineNotification2",componentId:"sc-193t3p0-8"})(["margin-top:16px;"]);const xv=()=>{var e,t,n,i,s;const l=Object(E.a)(),{pid:c,region:d}=Object(L.a)(),{mode:u,bot:p}=Fy(),[g,h]=Object(a.useState)(""),m=Object(a.useRef)(null),{errors:b,reset:j,register:y,watch:O,handleSubmit:v}=Object(_i.d)({mode:"onChange",defaultValues:{fileUploadNote:null,csvFiles:null}}),x=O("csvFiles"),_=!(null==x||null==(e=x[0])||!e.name),C=g.length>0,[k,w]=Object(a.useState)(!1),[T,S]=Object(a.useState)("init"),[I,M]=Object(a.useState)(!1),A=u===Py.CREATE,N=u===Py.DUPLICATE,R=void 0===p||I||N,P=A||N,F=Object(H.debouncePromise)(async e=>{try{const{data:t}=await D.g.checkIsBotFilenameDuplicated(c,d,e);return t.result||l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.error.unique"})}catch{return!0}},200),U=Object(a.useCallback)(async e=>{w(!0),S("loading");const t=D.g.uploadDeskFAQBotFile(c,d,e);m.current=t;try{if(null==await t)return void S("init");S("success"),setTimeout(()=>{j(),h("")},1e3)}catch(e){S("error")}finally{w(!1)}},[c,d,j]);Object(a.useEffect)(()=>{0===g.length&&setTimeout(()=>{S("init")},300)},[g.length]);const $={validate:{sizeLimit:e=>{if(e&&e.length>0){return!(e[0].size>5*f.k)||l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.error.sizeLimit"})}},unique:e=>{if(p&&e&&e.length>0){const t=e[0];return F({id:p.id,filename:t.name})}return!0}}},B=()=>{const e=document.createElement("a");e.setAttribute("href","https://dxstmhyqfqr1o.cloudfront.net/desk/FAQ+sample.csv"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},V=Object(a.useMemo)(()=>{var e;return null!=(e=b.csvFiles)&&e.type?"error":T},[null==(t=b.csvFiles)?void 0:t.type,T]),z=Object(a.useMemo)(()=>{switch(V){case"loading":return Object(W.jsx)(o.Spinner,{size:16,stroke:Object(o.cssVariables)("neutral-6")});case"success":return Object(W.jsx)(o.Icon,{icon:"done",size:16,color:Object(o.cssVariables)("green-5")});case"error":return Object(W.jsx)(o.Icon,{icon:"error",size:16,color:Object(o.cssVariables)("red-5")});default:return null}},[V]);return Object(W.jsxs)(gv,{$disabled:R,children:[P&&Object(W.jsx)(jv,{type:"warning",message:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.inlineNotification.noBot"})}),Object(W.jsx)(Dy.c,{title:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.header.title"}),description:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.header.desc"},{a:e=>Object(W.jsx)(o.Link,{href:"#FAQ_file_sample",iconProps:{icon:"download",size:16},onClick:B,children:e})}),gridItemConfig:{subject:{alignSelf:"start"}},gap:["0","32px"],extra:Object(W.jsx)(pv,{shouldRefetchFiles:"success"===T,isSelectBotFileMode:I,setIsSelectBotFileMode:M}),children:Object(W.jsxs)("form",{onSubmit:v(async({fileUploadNote:e,csvFiles:t})=>{p&&t&&t.length>0&&U({bot:p.id,fileUploadNote:e,filedata:t[0]})}),children:[Object(W.jsx)(o.InputText,{ref:y,type:"text",name:"fileUploadNote",disabled:R,placeholder:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.notes.placeholder"}),"data-test-id":"FileNoteInput"}),Object(W.jsxs)(hv,{children:[Object(W.jsx)(yv,{type:"text",value:g,helperText:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.helperText"}),suffixNode:Object(W.jsx)(bv,{show:C,shouldUnmountAfterFadeOut:!1,children:z}),readOnly:!0,disabled:R,error:{hasError:void 0!==(null==(n=b.csvFiles)?void 0:n.message)||"error"===T,message:null!=(i=null==(s=b.csvFiles)?void 0:s.message)?i:""},styles:Object(r.css)(["padding-right:48px;"]),"data-test-id":"FilenameInput"}),"loading"===T?Object(W.jsx)(mv,{buttonType:"tertiary","data-test-id":"CancelFileUploadButton",onClick:()=>{var e;null==(e=m.current)||e.cancel()},children:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.button.cancel"})}):Object(W.jsxs)(fv,{buttonType:"tertiary",disabled:k||R,"data-test-id":"ChooseFileButton",children:[Object(W.jsx)("label",{htmlFor:"bot_file",children:Object(W.jsx)("input",{ref:y($),type:"file",id:"bot_file",name:"csvFiles",accept:".csv",hidden:!0,"data-test-id":"FileUploaderInput",onChange:e=>{const t=e.target.files;t&&t.length>0&&h(t[0].name)}})}),l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.button.chooseFile"})]})]}),Object(W.jsx)(Ov,{buttonType:"tertiary",type:"submit",disabled:k||!_||R||void 0!==b.csvFiles,"data-test-id":"FileSubmitButton",children:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.button.upload"})}),"error"===T&&Object(W.jsx)(vv,{type:"error",message:l.formatMessage({id:"desk.settings.bots.detail.fileUpload.file.error.serverError"})})]})})]})},_v=r.default.div.withConfig({displayName:"BotDetail__FormActions",componentId:"j6ioui-0"})(["display:flex;justify-content:flex-end;margin-top:16px;button + button{margin-left:8px;}"]),Cv=r.default.input.withConfig({displayName:"BotDetail__HiddenTextInput",componentId:"j6ioui-1"})(["position:fixed;top:0;left:0;width:auto;overflow:auto;min-width:initial;visibility:hidden;pointer-events:none;"]),kv=r.default.div.withConfig({displayName:"BotDetail__BotDetailContentContainer",componentId:"j6ioui-2"})(["a[role='tab']:focus{box-shadow:none !important;}"]);var wv;!function(e){e[e.TOAST_SUCCESS=0]="TOAST_SUCCESS"}(wv||(wv={}));const Tv={[f.M.CUSTOMIZED]:{[wv.TOAST_SUCCESS]:"desk.settings.bots.detail.form.toast.create.custom.success"},[f.M.FAQBOT]:{[wv.TOAST_SUCCESS]:"desk.settings.bots.detail.form.toast.create.faq.success"}},Sv=new RegExp(/^[0-9]+$/),Ev=e=>void 0!==e&&([f.J.FILES,f.J.SETTINGS].includes(e)||"string"==typeof e&&Sv.test(e))?e:f.J.SETTINGS;var Iv=Object(r.default)(V.J).withConfig({displayName:"BotDetail___StyledDeskBotTypeTag",componentId:"j6ioui-3"})(["",""],e=>e._css),Mv=Object(r.default)(V.J).withConfig({displayName:"BotDetail___StyledDeskBotTypeTag2",componentId:"j6ioui-4"})(["",""],e=>e._css2),Dv=Object(r.default)(V.J).withConfig({displayName:"BotDetail___StyledDeskBotTypeTag3",componentId:"j6ioui-5"})(["",""],e=>e._css3),Av=Object(r.default)(o.Button).withConfig({displayName:"BotDetail___StyledButton",componentId:"j6ioui-6"})(["margin-right:auto;"]),Nv=Object(r.default)("form").withConfig({displayName:"BotDetail___StyledForm",componentId:"j6ioui-7"})(["margin-top:","px;"],e=>e._css4),Rv=Object(r.default)("div").withConfig({displayName:"BotDetail___StyledDiv",componentId:"j6ioui-8"})(["margin-top:","px;"],e=>e._css5);const Pv=()=>{const e=Object(E.a)(),t=Object(s.k)(),n=Object(P.c)(),{pid:i,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),d=Object(P.W)(),{botId:u}=Object(s.m)(),{updateParams:p,...g}=Object(B.a)({tab:f.J.SETTINGS,page:1,pageSize:10}),h=Jy(g.botType||f.M.CUSTOMIZED),m=(e=>{const t=Object(E.a)(),n=e?Tv[e]:void 0;return e=>{const a=null==n?void 0:n[e];return a?t.formatMessage({id:a}):e}})(g.botType),b=Object(ry.a)(),[j,y]=Object(a.useState)(Ev(g.tab)),O=Object(_i.d)({mode:"onChange",defaultValues:h}),{formState:v,handleSubmit:x,getValues:_,control:C,reset:k,errors:w}=O,T=v.isValid||La()(w),S=v.isDirty,I=v.isSubmitted,[M,D]=Object(a.useState)(),[R,F]=Object(a.useState)(),{mode:U}=zO(),z=Object(a.useRef)(!1),q=Object(a.useRef)(!1),G=Object(a.useRef)(null),[{status:K,data:Y,error:Q},J]=Object(P.g)(e=>N.fetchDeskBot(i,l,{id:e}),[i,l]),[{status:X,data:Z,error:ee},te]=Object(P.g)(e=>N.createDeskBot(i,l,e),[i,l]),[{status:ne,data:ae,error:ie},se]=Object(P.g)(e=>N.updateDeskBot(i,l,e),[i,l]),re=Object(a.useCallback)(()=>{u&&J(Number(u))},[u,J]),oe=Object(a.useMemo)(()=>{var e,a;return"string"==typeof(null==(e=t.location.state)?void 0:e.backUrl)&&(G.current=t.location.state.backUrl),null!=(a=G.current)?a:`/${n}/desk/settings/bots`},[n,t.location.state]),le=g.botType===f.M.CUSTOMIZED,ce=g.botType===f.M.FAQBOT,de=Object(a.useCallback)(()=>{M&&d({dialogTypes:A.a.DeleteDeskBot,dialogProps:{agentId:M.agent.id,onSuccess:()=>t.push(oe)}})},[oe,M,t,d]),ue=Object(a.useCallback)(e=>{const{profileFile:t,...n}=e;if(le){const e=n,{timeLimitMinutes:t,timeLimitSeconds:a}=e;"number"==typeof t&&"number"==typeof a&&(n.timeoutSeconds=60*t+a)}return t&&t.length>0&&([n.profileFile]=t),U===Py.DUPLICATE&&"string"==typeof(null==M?void 0:M.photoUrl)&&M.photoUrl.trim().length>0&&(n.photoUrl=M.photoUrl),n},[M,le,U]),pe=Object(a.useCallback)(async e=>{z.current=!0,F(e),U!==Py.CREATE&&U!==Py.DUPLICATE?U===Py.EDIT&&await se({id:Number(u),payload:ue(Object.keys(v.dirtyFields).reduce((e,t)=>"timeLimitMinutes"===t||"timeLimitSeconds"===t?{timeLimitMinutes:_("timeLimitMinutes"),timeLimitSeconds:_("timeLimitSeconds"),...e}:{[t]:_(t),...e},{}))}):await te(ue(e))},[u,ue,te,v.dirtyFields,_,U,se]),ge=Object(a.useCallback)(e=>{const t=(({bot:e,formMode:t})=>{const{key:n,timeoutSeconds:a,agent:i,project:s,status:r,photoUrl:o,isUnreadError:l,updatedAt:c,createdAt:d,type:u,...p}=e;if(u===f.M.CUSTOMIZED){const{noResultsMessage:e,questionSelectedMessage:i,...s}=p;return{type:u,key:t===Py.EDIT?n:"",timeLimitMinutes:Math.floor(a/60),timeLimitSeconds:a%60,profileFile:null,...s}}if(u===f.M.FAQBOT){const{webhookUrl:e,fallbackRetryLimit:a,serverErrorMessage:i,timeoutMessage:s,...r}=p;return{type:u,key:t===Py.EDIT?n:"",profileFile:null,...r}}return null})({bot:e,formMode:U});t&&k(t)},[U,k]),he=Object(a.useCallback)(e=>{t.replace(`/${n}/desk/settings/bots/${e.id}/edit?bot_type=${e.type}`)},[n,t]);Object(a.useEffect)(()=>{re(),ce&&y(Ev(g.tab))},[re,ce,g.tab]),Object(a.useEffect)(()=>{U!==Py.EDIT&&U!==Py.DUPLICATE||"success"!==K||null==Y||(D(Y.data),ge(Y.data),z.current=!1)},[Y,K,U,ge]),Object(a.useEffect)(()=>{if("success"===X&&Z&&R&&v.isSubmitted){const a=Z.data;k(R),D(a),U===Py.CREATE&&o.toast.success({message:m(wv.TOAST_SUCCESS)}),U===Py.DUPLICATE&&o.toast.success({message:e.formatMessage({id:"desk.settings.bots.detail.form.toast.duplicate.success"})}),ce&&!q.current?d({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.settings.bots.dialog.createdDialog.title"}),description:e.formatMessage({id:"desk.settings.bots.dialog.createdDialog.desc"},{botName:a.name}),cancelText:e.formatMessage({id:"desk.settings.bots.dialog.createdDialog.button.skip"}),confirmText:e.formatMessage({id:"desk.settings.bots.dialog.createdDialog.button.upload"}),onClose:()=>{he(a)},onCancel:()=>{q.current=!0,he(a)},onConfirm:()=>{q.current=!0;const e={name:a.name,bot_type:a.type,tab:f.J.FILES,page:1,pageSize:10,sortOrder:f.Tb.DESCEND,sortBy:f.P.CREATED_AT};t.push(`/${n}/desk/settings/bots/${a.id}/edit?${Wt.a.stringify(e)}`,{backUrl:oe})}}}):he(a)}},[n,oe,m,Z,X,v.isSubmitted,t,e,ce,U,he,k,d,R]),Object(a.useEffect)(()=>{"success"===ne&&ae&&R&&v.isSubmitted&&(o.toast.success({message:e.formatMessage({id:"desk.settings.bots.detail.form.toast.update.success"})}),k(R),D(ae.data))},[v.isSubmitted,_,e,k,R,ae,ne,p]),Object(a.useEffect)(()=>{"error"===K&&(o.toast.error({message:c(Q)}),t.push(oe))},[oe,Q,K,c,t]),Object(a.useEffect)(()=>{"error"===X&&(o.toast.error({message:e.formatMessage({id:"desk.settings.bots.detail.form.toast.create.error"})}),Object(H.logException)(ee))},[e,X,ee]),Object(a.useEffect)(()=>{"error"===ne&&(o.toast.error({message:e.formatMessage({id:"desk.settings.bots.detail.form.toast.update.error"})}),Object(H.logException)(ie))},[e,ie,ne]);const me=Object(a.useMemo)(()=>{const t=Object(r.css)(["margin:0 8px;transform:translateY(-2px);"]);return U===Py.CREATE?Object(W.jsxs)(W.Fragment,{children:[e.formatMessage({id:"desk.settings.bots.detail.create.title"}),g.botType&&Object(W.jsx)(Iv,{type:g.botType,_css:t})]}):U===Py.DUPLICATE?Object(W.jsxs)(W.Fragment,{children:[e.formatMessage({id:"desk.settings.bots.detail.duplicate.title"}),g.botType&&Object(W.jsx)(Mv,{type:g.botType,_css2:t})]}):U===Py.EDIT?M?Object(W.jsxs)(W.Fragment,{children:[M.name,M&&Object(W.jsx)(Dv,{type:M.type,_css3:t})]}):"loading"===K?Object(W.jsx)(o.Spinner,{}):null:null},[M,K,e,U,g.botType]),fe=Object(a.useMemo)(()=>Object(W.jsxs)(_v,{children:[U===Py.EDIT&&Object(W.jsx)(Av,{buttonType:"primary",variant:"ghost",icon:"delete",onClick:de,children:e.formatMessage({id:"desk.settings.bots.detail.form.actions.button.delete"})}),Object(W.jsx)(o.Button,{buttonType:"tertiary",onClick:()=>t.push(oe),"data-test-id":"CancelButton",children:e.formatMessage({id:"desk.settings.bots.detail.form.actions.button.cancel"})}),Object(W.jsx)(o.Button,{buttonType:"primary",type:"submit",disabled:!(v.isDirty&&T),isLoading:"loading"===X||"loading"===ne,"data-test-id":"SaveButton",children:e.formatMessage({id:"desk.settings.bots.detail.form.actions.button.save"})})]}),[oe,X,v.isDirty,de,t,e,T,U,ne]),be=Object(a.useCallback)(e=>e===f.J.SETTINGS?Object(W.jsxs)(_i.b,{...O,children:["loading"===K&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsxs)(Nv,{onSubmit:x(pe),_css4:ce?24:0,children:[Object(W.jsx)(_i.a,{type:"hidden",defaultValue:g.botType,control:C,name:"type",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(Cv,{ref:i,name:a,value:n,onChange:e,onBlur:t})}),le&&Object(W.jsx)(HO,{}),ce&&Object(W.jsx)(qO,{}),fe]})]}):e===f.J.FILES?Object(W.jsx)(Rv,{_css5:ce?24:0,children:Object(W.jsx)(xv,{})}):void 0,[C,K,fe,x,le,ce,O,pe,g.botType]),je=Object(a.useCallback)(e=>{D(t=>t?{...t,status:e,agent:{...t.agent,status:e}}:t)},[]);return b||g.botType===f.M.CUSTOMIZED?void 0!==M&&M.type!==g.botType?Object(W.jsx)(s.c,{to:oe}):Object(W.jsxs)(iy.b,{children:[Object(W.jsx)(V.wc,{when:!z.current&&(void 0===g.tab||g.tab===f.J.SETTINGS)&&S&&!I}),Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:oe}),Object(W.jsx)(iy.a.Title,{role:"heading",children:me}),Object(W.jsx)(iy.a.Actions,{"data-test-id":"PageHeaderActions",children:Object(W.jsx)(YO,{mode:U,bot:M,onChange:je})})]}),Object(W.jsx)(kv,{children:Object(W.jsxs)(Ly.Provider,{value:{bot:M,mode:U,queryParams:g,updateParams:p,fetchDeskBotRequest:re},children:[ce&&Object(W.jsx)(o.TabbedInterface,{tabs:[{title:e.formatMessage({id:"desk.settings.bots.detail.tabs.general"}),id:f.J.SETTINGS.toString()},{title:e.formatMessage({id:"desk.settings.bots.detail.tabs.faqFiles"}),id:f.J.FILES.toString()}],activeTabIndex:j,onActiveTabChange:({index:e})=>{p({tab:e,...e===f.J.FILES?{page:g.page||1,pageSize:g.pageSize||10,sortOrder:f.Tb.DESCEND,sortBy:f.P.CREATED_AT}:{page:void 0,pageSize:void 0,sortOrder:void 0,sortBy:void 0}})},children:(e,t)=>be(t)}),le&&be(f.J.SETTINGS)]})})]}):Object(W.jsx)(s.c,{to:oe})};var Lv,Fv=n("G6T8");!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.ALL=2]="ALL"}(Lv||(Lv={}));const Uv={[Lv.SUCCESS]:[f.N.INITIALIZED,f.N.SENT,f.N.RECEIVED],[Lv.ERROR]:[f.N.ERROR,f.N.TIMEOUT],[Lv.ALL]:[f.N.INITIALIZED,f.N.SENT,f.N.RECEIVED,f.N.ERROR,f.N.TIMEOUT]},$v=[{labelKey:"desk.settings.bots.sidebar.webhookLogs.filter.deliveryStatus.all",status:Lv.ALL},{labelKey:"desk.settings.bots.sidebar.webhookLogs.filter.deliveryStatus.success",status:Lv.SUCCESS},{labelKey:"desk.settings.bots.sidebar.webhookLogs.filter.deliveryStatus.error",status:Lv.ERROR}],Bv=Object(r.default)(Fv.a).withConfig({displayName:"BotWebhookLogsSidebar__DrawerContainer",componentId:"sc-1pk06g3-0"})(["padding-top:16px;padding-right:24px;padding-left:24px;width:560px;"]),Vv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__Header",componentId:"sc-1pk06g3-1"})(["display:flex;flex-direction:row;margin-bottom:32px;"]),zv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__Body",componentId:"sc-1pk06g3-2"})(["display:flex;flex-direction:column;height:calc(100% - 64px);"]),Hv=r.default.h2.withConfig({displayName:"BotWebhookLogsSidebar__Title",componentId:"sc-1pk06g3-3"})(["",";"],o.Headings["heading-03"]),qv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__FiltersWrapper",componentId:"sc-1pk06g3-4"})(["display:flex;flex-direction:row;align-items:center;margin:24px 0;> * + *{margin-left:8px;}"]),Gv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__BotInfoWrapper",componentId:"sc-1pk06g3-5"})(["display:flex;flex-direction:row;align-items:center;border:1px solid ",";border-radius:4px;padding:16px;"],Object(o.cssVariables)("neutral-3")),Wv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__BotName",componentId:"sc-1pk06g3-6"})(["margin-left:12px;max-width:436px;overflow:hidden;text-overflow:ellipsis;color:",";",";"],Object(o.cssVariables)("neutral-10"),o.Headings["heading-01"]),Kv=r.default.div.withConfig({displayName:"BotWebhookLogsSidebar__DeliveryStatusFilterToggle",componentId:"sc-1pk06g3-7"})(["margin-left:16px;margin-right:4px;",";"],o.Subtitles["subtitle-01"]);var Yv=Object(r.default)(o.IconButton).withConfig({displayName:"BotWebhookLogsSidebar___StyledIconButton",componentId:"sc-1pk06g3-8"})(["margin-left:auto;"]),Qv=Object(r.default)(V.Ub).withConfig({displayName:"BotWebhookLogsSidebar___StyledPaginator",componentId:"sc-1pk06g3-9"})(["margin-left:auto;"]),Jv=Object(r.default)(o.Table).withConfig({displayName:"BotWebhookLogsSidebar___StyledTable",componentId:"sc-1pk06g3-10"})(["height:100%;"]);const Xv=()=>{const e=Object(E.a)(),{pid:t,region:n}=Object(L.a)(),{webhook:i,closeWebhookLogs:s}=oy(),l=(()=>{const e=Object(E.a)();return[{title:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.table.th.status"}),dataIndex:"status",render:({status:t})=>"ERROR"===t||"TIMEOUT"===t?Object(W.jsx)(o.Lozenge,{color:"red",children:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.filter.deliveryStatus.error"})}):Object(W.jsx)(o.Lozenge,{color:"green",children:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.filter.deliveryStatus.success"})})},{title:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.table.th.endpoint"}),dataIndex:"webhookUrl",width:220},{title:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.table.th.created"}),dataIndex:"createdAt",width:180,render:({createdAt:e})=>c()(e).format("lll")}]})(),{page:d,pageSize:u,setPagination:p}=Object(P.Q)(1,20),[g,h]=Object(a.useState)(Lv.ALL),[m,b]=Object(a.useState)({startDate:c()().subtract(30,"day"),endDate:c()()}),[j,y]=Object(a.useState)(o.DateRangePickerValue.Last30Days),[{status:O,data:v},x]=Object(P.g)(e=>N.fetchDeskBot(t,n,{id:e}),[t,n]),[{status:_,data:C},k]=Object(P.g)(e=>N.fetchDeskBotWebhookLogs(t,n,e),[t,n]),w=()=>{s()},T=(e,t)=>{y(e),t&&b(t)},S=e=>{h(e.status)},I=({labelKey:t,status:n})=>n===Lv.ALL?e.formatMessage({id:t}):Object(W.jsx)(o.Lozenge,{color:n===Lv.SUCCESS?"green":"red",children:e.formatMessage({id:t})});var M,D;return Object(a.useEffect)(()=>{i&&x(i)},[i,x]),Object(a.useEffect)(()=>{if(i){const{startDate:e,endDate:t}=m;k({id:i,offset:(d-1)*u,limit:u,startDate:e.format(f.nb),endDate:t.format(f.nb),status:Uv[g]})}},[m,g,k,d,u,i]),Object(a.useEffect)(()=>{p(1,20)},[p,j,g]),i?Object(W.jsxs)(Bv,{id:"BotWebhookLogsDrawer",isFullHeight:!0,isDarkBackground:!0,children:[Object(W.jsxs)(Vv,{children:[Object(W.jsx)(Hv,{children:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.title"})}),Object(W.jsx)(Yv,{icon:"close",buttonType:"secondary",size:"small",onClick:w})]}),Object(W.jsx)(zv,{children:"success"===O&&null!=v?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Gv,{children:[Object(W.jsx)(o.Avatar,{type:o.AvatarType.Bot,size:32,profileID:v.data.id,status:v.data.agent.connection.toLowerCase(),imageUrl:v.data.photoUrl}),Object(W.jsx)(o.Tooltip,{content:v.data.name,tooltipContentStyle:Object(r.css)(["max-width:258px;word-break:break-word;"]),children:Object(W.jsx)(Wv,{children:v.data.name})})]}),Object(W.jsxs)(qv,{children:[Object(W.jsx)(o.Dropdown,{size:"small",items:$v,itemToString:({labelKey:t})=>e.formatMessage({id:t}),itemToElement:I,initialSelectedItem:$v[0],toggleRenderer:({selectedItem:e})=>e&&Object(W.jsx)(Kv,{children:I(e)}),onItemSelected:S}),Object(W.jsx)(V.Kb,{size:"small",value:j,dateRange:m,maximumNights:30,onChange:T}),Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.filter.date.tooltip"}),placement:"top",popperProps:{modifiers:{offset:{offset:"0, 8"}}},children:Object(W.jsx)(o.Icon,{icon:"info",size:16,color:Object(o.cssVariables)("neutral-6")})})]}),Object(W.jsx)(Jv,{columns:l,dataSource:null!=(M=null==C?void 0:C.data.results)?M:[],loading:"loading"===_,emptyView:Object(W.jsx)(z.a,{icon:"call-logs",title:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.table.noResult.title"}),description:e.formatMessage({id:"desk.settings.bots.sidebar.webhookLogs.table.noResult.desc"})}),footer:Object(W.jsx)(Qv,{current:d,total:null!=(D=null==C?void 0:C.data.count)?D:0,pageSize:u,pageSizeOptions:[10,20,50,100],onChange:p,onItemsPerPageChange:p}),showScrollbars:!0})]}):Object(W.jsx)(o.Spinner,{})})]}):null},Zv=r.default.h3.withConfig({displayName:"FileEncryption__RoleText",componentId:"sc-1f67n8x-0"})(["margin-bottom:12px;font-size:13px;font-weight:600;line-height:1.23;color:",";transition:",";"],({disabled:e})=>e?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-10"),Object(o.transitions)({properties:["color"],duration:.3})),ex=r.default.div.withConfig({displayName:"FileEncryption__RoleContainer",componentId:"sc-1f67n8x-1"})(["& + &{margin-top:24px;}"]),tx=r.default.div.withConfig({displayName:"FileEncryption__RadioGroup",componentId:"sc-1f67n8x-2"})(["display:flex;flex-direction:column;align-items:flex-start;margin-bottom:8px;& > * + *{margin-top:8px;}"]),nx=[{value:f.ib.ALL,intlKey:"desk.settings.security.fileEncryption.radio.option.label.all"},{value:f.ib.MY_TICKETS,intlKey:"desk.settings.security.fileEncryption.radio.option.label.myTickets"}],ax=i.a.memo(({value:e,name:t,disabled:n,onChange:a})=>{const i=Object(E.a)(),s=e=>{e.currentTarget.checked&&a(e.currentTarget.value)};return Object(W.jsx)(tx,{children:nx.map(a=>Object(W.jsx)(o.Radio,{name:t,label:i.formatMessage({id:a.intlKey}),value:a.value,checked:e===a.value,disabled:n,onChange:s},`${t}.option.value`))})}),ix=i.a.memo(({project:e,isFetching:t})=>{const n=Object(E.a)(),i=Object(b.f)(),s=Object(b.g)(e=>{var t,n,a;return null!=(t=null==(n=e.applicationState)||null==(a=n.data)?void 0:a.attrs.file_authentication)&&t}),r=Object(a.useMemo)(()=>({fileEncryptionAdminPermission:e.fileEncryptionAdminPermission||f.ib.MY_TICKETS,fileEncryptionAgentPermission:e.fileEncryptionAgentPermission||f.ib.MY_TICKETS}),[e.fileEncryptionAdminPermission,e.fileEncryptionAgentPermission]),{control:l,reset:c,formState:d,handleSubmit:u}=Object(_i.d)({mode:"onChange",defaultValues:r}),p=Object(a.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),c()},[c]),g=Object(a.useCallback)(e=>{d.isDirty&&i(j.d.updateProjectRequest({...e,onSuccess:()=>{c(e)}}))},[i,d.isDirty,c]),h=t||!s;return Object(W.jsxs)(iy.i,{title:Object(W.jsxs)(W.Fragment,{children:[n.formatMessage({id:"desk.settings.security.fileEncryption.header.title"}),Object(W.jsx)(V.C,{content:n.formatMessage({id:"desk.settings.security.fileEncryption.header.tooltip"},{a:e=>Object(W.jsx)(o.Link,{href:"/settings/contact_us",children:e})})})]}),description:!h&&n.formatMessage({id:"desk.settings.security.fileEncryption.header.description"}),gridItemConfig:{subject:{alignSelf:"start"}},showActions:d.isDirty,actions:Object(f.qc)({key:"fileEncryption",intl:n,isFetching:!1,onCancel:p,onSave:u(g)}),children:[Object(W.jsxs)(ex,{"data-test-id":"AdminFileEncryption",children:[Object(W.jsx)(Zv,{disabled:h,children:n.formatMessage({id:"desk.settings.security.fileEncryption.radio.title.admin"})}),Object(W.jsx)(_i.a,{control:l,rules:{required:!0},name:"fileEncryptionAdminPermission",render:({onChange:e,value:t,name:n})=>Object(W.jsx)(ax,{name:n,onChange:e,value:t,disabled:h})})]}),Object(W.jsxs)(ex,{"data-test-id":"AgentFileEncryption",children:[Object(W.jsx)(Zv,{disabled:h,children:n.formatMessage({id:"desk.settings.security.fileEncryption.radio.title.agent"})}),Object(W.jsx)(_i.a,{control:l,rules:{required:!0},name:"fileEncryptionAgentPermission",render:({onChange:e,value:t,name:n})=>Object(W.jsx)(ax,{name:n,onChange:e,value:t,disabled:h})})]})]})}),sx=()=>{const e=Object(E.a)(),{project:t,isUpdating:n}=Object(P.V)(e=>{const{project:t,isUpdating:n}=e.desk;return{project:t,isUpdating:n}});return Object(W.jsxs)(iy.b,{children:[Object(W.jsx)(iy.a,{children:Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"desk.settings.security.title"})})}),Object(W.jsx)(ix,{project:t,isFetching:n})]})};var rx=n("xweI"),ox=n.n(rx),lx=n("u6S6"),cx=n.n(lx),dx=n("hrVQ");const ux=r.default.div.withConfig({displayName:"AssignmentConsequentTypeRadioGroup__RadioGroup",componentId:"sc-1hw6tkp-0"})(["display:flex;align-items:flex-start;& > * + *{margin-left:8px;}"]),px=[{value:dx.g.GROUP,intlKey:"desk.settings.assignmentRulesDetail.form.consequent.type.team"},{value:dx.g.GROUP_WITH_BOT_AGENT,intlKey:"desk.settings.assignmentRulesDetail.form.consequent.type.bot"}],gx=i.a.memo(({value:e,name:t,disabled:n,onChange:a})=>{const i=Object(E.a)();return Object(W.jsx)(ux,{children:px.map(s=>Object(W.jsx)(o.Radio,{name:t,label:i.formatMessage({id:s.intlKey}),value:s.value,checked:e===s.value,disabled:n,onChange:a},t))})}),hx=r.default.div.withConfig({displayName:"PriorityRadioGroup__RadioGroup",componentId:"sc-1puxnoe-0"})(["display:flex;flex-direction:column;align-items:flex-start;margin-bottom:8px;& > * + *{margin-top:8px;}"]),mx=Object(a.memo)(({value:e,hasError:t,disabled:n,onChange:a})=>{const i=Object(E.a)(),s=e=>{e.currentTarget.checked&&a(e.currentTarget.value)};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(hx,{children:[f.gc.URGENT,f.gc.HIGH,f.gc.MEDIUM,f.gc.LOW].map(a=>Object(W.jsx)(o.Radio,{name:"conditional.consequent.value",label:Object(W.jsx)(V.Xb,{priority:a,showLabel:!0}),value:a,checked:e===a,hasError:t,disabled:n,onChange:s},a))}),Object(W.jsx)(o.ErrorMessage,{error:{hasError:t,message:i.formatMessage({id:"desk.settings.priorityRulesDetail.form.consequent.value.error.required"})},fallbackErrorMessage:""})]})}),fx=Object(r.default)(V.jc).withConfig({displayName:"TicketRuleConditionValue__ToggleOverflowText",componentId:"sc-1mewbf8-0"})(["margin-left:16px;max-width:156px;font-weight:500;"]),bx=Object(r.default)(V.jc).withConfig({displayName:"TicketRuleConditionValue__ValueOptionText",componentId:"sc-1mewbf8-1"})(["max-width:280px;font-weight:500;"]),jx=r.default.span.withConfig({displayName:"TicketRuleConditionValue__TicketChannelTypeLabel",componentId:"sc-1mewbf8-2"})(["padding-left:","px;font-weight:",";"],({isParent:e})=>e?0:16,({isParent:e})=>e?500:400),yx=r.default.span.withConfig({displayName:"TicketRuleConditionValue__SelectedTicketChannelTypeLabel",componentId:"sc-1mewbf8-3"})(["font-size:14px;font-weight:500;"]),Ox=Object(r.default)(o.Icon).withConfig({displayName:"TicketRuleConditionValue__ChannelIcon",componentId:"sc-1mewbf8-4"})(["margin-right:8px;margin-left:12px;"]),vx=Object(r.default)(o.InputText).withConfig({displayName:"TicketRuleConditionValue__HiddenInputText",componentId:"sc-1mewbf8-5"})(["width:0;height:0;margin:0;overflow:hidden;pointer-events:none;& + &{margin:0;}"]),xx=new RegExp(/^[0-9]+$/),_x=[dx.a.INAPP,dx.a.FACEBOOK,dx.a.TWITTER,dx.a.INSTAGRAM,dx.a.WHATSAPP];var Cx=Object(r.default)(o.Dropdown).withConfig({displayName:"TicketRuleConditionValue___StyledDropdown",componentId:"sc-1mewbf8-6"})(["svg{transition:fill 0.2s ",";}&:hover:enabled{svg{fill:",";}}"],o.transitionDefault,e=>e._css);const kx=e=>Object(W.jsx)(Cx,{...e,_css:Object(o.cssVariables)("purple-7")}),wx=e=>null!=e&&e.message?{hasError:!0,message:"string"==typeof e.message?e.message:""}:void 0,Tx=Object(a.memo)(({index:e,defaultCondition:t,currentConditionField:n,consequentType:i,consequentAgent:s,keyMap:r,valueMap:l,control:c,errors:d,setError:u,clearError:p,onValueDropdownSelected:g})=>{var h,m,f,b,j,y,O,v,x;const _=Object(E.a)(),C=null!=(h=null==n?void 0:n.key)?h:t.key,k=null!=(m=!!C&&(null==(f=r.get(C))?void 0:f.type))?m:dx.f.DROPDOWN,w=null!=(b=null==n?void 0:n.operator)?b:t.operator,T=Object(a.useRef)(t.value),S=null==C?void 0:C.split("."),I=!!S&&3===S.length&&("ticket_field"===S[0]||"customer_field"===S[0]),M=I&&S?S[0]:void 0,D=I&&S?S[2]:void 0,A=D&&M?l.get(`${M}.key.${D}`):void 0,N=k===dx.f.TEXT,R=k===dx.f.NUMBER,P=k===dx.f.DROPDOWN,L=null==(null==n?void 0:n.value)||null==d||null==(j=d.conditional)||null==(y=j.conditions)||null==(O=y[e])?void 0:O.value,F=void 0===L,U=i===dx.g.GROUP_WITH_BOT_AGENT,$=(null==s||null==(v=s.bot)?void 0:v.type)===G.o.CUSTOMIZED,B=(null==s||null==(x=s.bot)?void 0:x.type)===G.o.FAQBOT,V=$&&(null==n?void 0:n.value)&&dx.D.every(e=>e!==n.value),z=B&&(null==n?void 0:n.value)&&dx.s.every(e=>e!==n.value),H=(null==n?void 0:n.value)&&dx.A.includes(n.value),q=`conditional.conditions[${e}].value`,K=C===dx.z.key,Y=dx.u.includes(w);Object(a.useEffect)(()=>{var e;T.current=null!=(e=null==n?void 0:n.value)?e:null},[n]),Object(a.useEffect)(()=>{if(K){if(U&&(V||z)){var t,n,a,i;const s=V?dx.b.INVALID_CHANNEL_BY_CONSEQUENT_CUSTOM_BOT:z?dx.b.INVALID_CHANNEL_BY_CONSEQUENT_FAQ_BOT:dx.b.INVALID_CHANNEL_BY_UNKNOWN_REASON;return void((null==(t=d.conditional)||null==(n=t.conditions)||null==(a=n[e])||null==(i=a.value)?void 0:i.message)!==s&&u(q,{type:dx.c.VALUE,message:s}))}if(!F&&!U&&H)return void p(q)}},[p,d,e,U,V,z,F,H,K,q,u]);const Q=Object(a.useMemo)(()=>K&&U&&$?e=>!dx.D.includes(e):K&&U&&B?e=>!dx.s.includes(e):void 0,[$,B,U,K]);if(C&&!Y&&(N||R)){const t=C===dx.o.key||C===dx.p.key?100:190,n=e=>0===(null==e?void 0:e.trim().length)?_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.textNumber.error.required"}):void 0,a=e=>e&&xx.test(e)?void 0:_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.number.error.onlyNumber"}),i=e=>e&&e.length>t?_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.error.maximum"},{max:t}):void 0,s=R?{requiredValue:n,maximum:i,onlyNumber:a}:{requiredValue:n,maximum:i};return Object(W.jsx)(_i.a,{control:c,name:q,defaultValue:T.current,rules:{required:_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.textNumber.error.required"}),validate:s},render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(o.InputText,{onChange:e,onBlur:t,value:n,name:a,ref:i,error:L&&wx(L)})},`TextOrNumberValue-${C}-${e}`)}if(C&&!Y&&P){const t=K?dx.A:A,a=e=>dx.A.includes(e),i=e=>a(e)?_.formatMessage({id:dx.B[e]}):"",s=e=>dx.r.includes(e)?"facebook":dx.E.includes(e)?"twitter":dx.t.includes(e)?"instagram":dx.F.includes(e)?"whatsapp":"mobile-application",r=e=>e&&a(e)?i(e):e||"",l=e=>e&&a(e)?Object(W.jsx)(jx,{isParent:_x.includes(e),children:i(e)}):Object(W.jsx)(bx,{children:e}),d=({isOpen:e,selectedItem:t})=>t&&a(t)?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ox,{icon:s(t),color:e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),size:20}),Object(W.jsx)(yx,{children:i(t)})]}):Object(W.jsx)(fx,{children:t});return Object(W.jsx)(_i.a,{control:c,rules:{required:_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.textNumber.error.required"})},name:q,defaultValue:T.current,render:({onChange:e,value:a,ref:i})=>Object(W.jsx)(kx,{ref:i,selectedItem:a,onChange:e,portalId:"portal_popup",placeholder:_.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.dropdown.placeholder"}),items:t,itemToString:r,itemToElement:l,isItemDisabled:Q,toggleRenderer:null!=n&&n.value?d:void 0,hasError:!!L,onItemSelected:g})},`DropdownValue-${C}-${e}`)}return Object(W.jsx)(_i.a,{defaultValue:null,control:c,name:q,render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(vx,{type:"hidden",onChange:e,onBlur:t,value:n,name:a,ref:i})},`NullValue-${C}-${e}`)}),Sx=()=>{const e=Object(s.n)();return Object(a.useMemo)(()=>{const t=null==e?void 0:e.url.split("/");if(!t||t.length<5||t.length>6)throw new Error("Match url is invalid");const n=5===(null==t?void 0:t.length)?1:2;switch(null==t?void 0:t[t.length-n]){case"priority_rules":return{type:dx.j.PRIORITY,consequent:{key:"priority"},intlKeyByType:"priorityRules",pathname:"priority_rules"};default:return{type:dx.j.ASSIGNMENT,consequent:{key:"id"},intlKeyByType:"assignmentRules",pathname:"assignment_rules"}}},[e])},Ex=Object(r.default)(V.uc).withConfig({displayName:"TicketRuleDetail__RuleDrawer",componentId:"sc-1qn04f8-0"})(["width:560px;"]),Ix=r.default.div.withConfig({displayName:"TicketRuleDetail__Grid",componentId:"sc-1qn04f8-1"})(["display:grid;grid-template-columns:1fr auto;grid-template-rows:","px 1fr ","px;height:100%;"],54,64),Mx=r.default.div.withConfig({displayName:"TicketRuleDetail__Item",componentId:"sc-1qn04f8-2"})(["display:flex;justify-self:",";align-items:center;padding:0 24px;"],({justifySelf:e})=>e||"start"),Dx=Object(r.default)(Mx).withConfig({displayName:"TicketRuleDetail__Title",componentId:"sc-1qn04f8-3"})(["",";"],o.Headings["heading-03"]),Ax=Object(r.default)(o.IconButton).withConfig({displayName:"TicketRuleDetail__DrawerCloseButton",componentId:"sc-1qn04f8-4"})(["margin-right:-8px;"]),Nx=r.default.div.withConfig({displayName:"TicketRuleDetail__FormContainer",componentId:"sc-1qn04f8-5"})(["grid-column:1 / span 2;height:calc(100vh - ","px);border-top:1px solid ",";border-bottom:1px solid ",";"],118,Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3")),Rx=r.default.form.withConfig({displayName:"TicketRuleDetail__Form",componentId:"sc-1qn04f8-6"})(["display:flex;flex-direction:column;padding:24px;min-height:100%;"]),Px=r.default.div.withConfig({displayName:"TicketRuleDetail__FormGroup",componentId:"sc-1qn04f8-7"})(["display:flex;flex-direction:column;& + &{margin-top:32px;}"]),Lx=r.default.h3.withConfig({displayName:"TicketRuleDetail__FromGroupTitle",componentId:"sc-1qn04f8-8"})(["display:block;",""],o.Headings["heading-01"]),Fx=r.default.div.withConfig({displayName:"TicketRuleDetail__FormGroupContent",componentId:"sc-1qn04f8-9"})(["margin-top:8px;"]),Ux=r.default.div.withConfig({displayName:"TicketRuleDetail__MatchContainer",componentId:"sc-1qn04f8-10"})(["display:flex;align-items:center;"]),$x=r.default.h4.withConfig({displayName:"TicketRuleDetail__MatchTitle",componentId:"sc-1qn04f8-11"})(["margin-right:4px;",";color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-6")),Bx=r.default.div.withConfig({displayName:"TicketRuleDetail__MatchToggleRenderText",componentId:"sc-1qn04f8-12"})(["margin-right:4px;margin-left:8px;",";"],o.Subtitles["subtitle-01"]),Vx=r.default.div.withConfig({displayName:"TicketRuleDetail__ConditionsContainer",componentId:"sc-1qn04f8-13"})(["display:grid;grid-template-columns:auto 1fr;gap:4px 8px;margin-top:12px;"]),zx=r.default.div.withConfig({displayName:"TicketRuleDetail__InputTransition",componentId:"sc-1qn04f8-14"})(["width:",";opacity:",";transform:translateX(","px);transition:",";overflow:",";"],({isHidden:e})=>e?0:"auto",({isHidden:e})=>e?0:1,({isHidden:e})=>e?16:0,Object(o.transitions)({duration:.3,properties:["opacity","transform"]}),({isHidden:e})=>e?"hidden":"visible"),Hx=r.default.ul.withConfig({displayName:"TicketRuleDetail__ConditionRow",componentId:"sc-1qn04f8-15"})(["display:block;"]),qx=Object(r.default)(zx).withConfig({displayName:"TicketRuleDetail__ConditionColumn",componentId:"sc-1qn04f8-16"})(["display:inline-flex;margin:0 ","px;padding-bottom:4px;align-items:flex-start;vertical-align:top;list-style:none;&:first-child,&:last-child{margin:0;}"],({isHidden:e})=>e?0:4),Gx=r.default.section.withConfig({displayName:"TicketRuleDetail__KeyTitle",componentId:"sc-1qn04f8-17"})(["margin-top:6px;margin-bottom:-8px;font-size:12px;font-weight:500;color:",";pointer-events:none;"],Object(o.cssVariables)("neutral-6")),Wx=Object(r.default)(V.jc).withConfig({displayName:"TicketRuleDetail__ToggleOverflowText",componentId:"sc-1qn04f8-18"})(["margin-left:16px;max-width:156px;font-weight:500;"]),Kx=Object(r.default)(o.InputText).attrs({hidden:!0}).withConfig({displayName:"TicketRuleDetail__HiddenInputText",componentId:"sc-1qn04f8-19"})(["width:0;height:0;margin:0;overflow:hidden;pointer-events:none;& + &{margin:0;}"]),Yx=r.default.ul.withConfig({displayName:"TicketRuleDetail__ConsequentItems",componentId:"sc-1qn04f8-20"})(["list-style:none;"]),Qx=r.default.li.withConfig({displayName:"TicketRuleDetail__ConsequentItem",componentId:"sc-1qn04f8-21"})(["& + &{margin-top:16px;}"]),Jx=r.default.div.withConfig({displayName:"TicketRuleDetail__AddConditionButtonContainer",componentId:"sc-1qn04f8-22"})(["width:","px;grid-column:1 / span 2;"],72),Xx=Object(r.default)(o.IconButton).withConfig({displayName:"TicketRuleDetail__RemoveConditionButton",componentId:"sc-1qn04f8-23"})(["margin-top:4px;margin-left:4px;"]),Zx=Object(r.default)(o.Button).withConfig({displayName:"TicketRuleDetail__AddButton",componentId:"sc-1qn04f8-24"})(["min-width:","px;transform:translateX(-8px);"],72),e_=Object(r.default)(o.Button).withConfig({displayName:"TicketRuleDetail__DeleteButton",componentId:"sc-1qn04f8-25"})(["transform:translateX(-12px);"]),t_=Object(r.default)(o.Button).withConfig({displayName:"TicketRuleDetail__CancelButton",componentId:"sc-1qn04f8-26"})(["margin-right:8px;"]),n_=new RegExp(/^[0-9]+$/),a_="TeamAssignmentRuleForm",i_={key:null,operator:dx.d.Is,value:null};var s_=Object(r.default)(V.bc).withConfig({displayName:"TicketRuleDetail___StyledSlideTransition",componentId:"sc-1qn04f8-27"})(["display:flex;flex:1;align-items:flex-end;"]),r_=Object(r.default)(o.InlineNotification).withConfig({displayName:"TicketRuleDetail___StyledInlineNotification",componentId:"sc-1qn04f8-28"})(["width:100%;"]);const o_=Object(a.memo)(()=>{const e=Object(E.a)(),t=Object(s.n)(),n=Object(s.k)(),i=Object(P.W)(),r=Object(P.c)(),{pid:l,region:c}=Object(L.a)(),d=Sx(),{getErrorMessage:u}=Object($.a)(),{openDrawer:p,closeDrawer:g}=Object(a.useContext)(V.X),[h,m]=Object(a.useState)(null),[b,j]=Object(a.useState)(null),[y,O]=Object(a.useState)(!1),{ruleId:v}=null==t?void 0:t.params,x="string"==typeof v&&n_.test(v),[_,C]=Object(a.useState)(),[k,w]=Object(a.useState)([]),[T,S]=Object(a.useState)([]),[I,M]=Object(a.useState)(!1),[N,R]=Object(a.useState)([]),[F,U]=Object(a.useState)(!1),[B,z]=Object(a.useState)([]),[H,q]=Object(a.useState)(null),G=Object(a.useRef)(new Map),K=Object(a.useRef)(new Map),Y=Object(a.useMemo)(()=>{const e=d.type===dx.j.PRIORITY?{type:dx.g.PRIORITY,_priority:{key:"priority",value:null}}:{type:dx.g.GROUP,_group:{key:"id",value:null}};return{name:"",conditional:{match:dx.h.OR,conditions:[i_],consequent:e}}},[d.type]),{register:Q,errors:J,control:X,watch:Z,setValue:ee,setError:te,clearErrors:ne,formState:ae,reset:ie,handleSubmit:se}=Object(_i.d)({mode:"onChange",defaultValues:Y}),{fields:re,append:oe,remove:le}=Object(_i.c)({control:X,name:"conditional.conditions"}),ce=Object(a.useRef)(Y),de=Z("name"),ue=Z("conditional"),pe=Z("conditional.match"),ge=Object(a.useMemo)(()=>ue.conditions||[i_],[ue.conditions]),he=Z("conditional.consequent"),me=Z("conditional.consequent.type"),fe=me===dx.g.GROUP_WITH_BOT_AGENT,[{error:be,data:je},ye]=Object(P.g)(e=>D.g.fetchAgent(l,c,{agentId:e}),[l,c]);Object(P.s)(be,{ignoreDuplicates:!0});const Oe=Object(a.useCallback)(async({onSuccess:e})=>{O(!0);try{const{data:{name:t,conditional:{match:n,conditions:a,consequent:i},error:s}}=await D.g.fetchTicketRule(l,c,{id:Number(v)}),r=(e=>{if(e.type===dx.g.GROUP_WITH_BOT_AGENT)return e;if(e.type===dx.g.PRIORITY){if(void 0!==e._priority)return e;const{type:t,key:n,value:a}=e;return{type:t,_priority:{key:n,value:a}}}if(void 0!==e._group)return e;const{type:t,key:n,value:a}=e;return{type:t,_group:{key:n,value:a}}})(i),o={name:t,conditional:{match:n,conditions:a,consequent:r}};ie(o),m(s),e(r),ce.current=o}catch(e){o.toast.error({message:u(e)}),j("FETCH")}finally{O(!1)}},[u,l,c,ie,v]),ve=Object(a.useCallback)(async({name:t,conditional:n})=>{O(!0);try{const{status:a}=await D.g.createTicketRule(l,c,{type:d.type,name:t,conditional:n});return o.toast.success({message:e.formatMessage({id:`desk.settings.${d.intlKeyByType}.toast.create.success`})}),200===a}catch(e){return o.toast.error({message:u(e)}),j("SAVE"),!1}finally{O(!1)}},[d.intlKeyByType,d.type,u,e,l,c]),xe=Object(a.useCallback)(async({name:t,conditional:n})=>{O(!0);try{const{status:a}=await D.g.updateTicketRule(l,c,{id:Number(v),name:t,conditional:n});return o.toast.success({message:e.formatMessage({id:`desk.settings.${d.intlKeyByType}.toast.update.success`})}),200===a}catch(e){return o.toast.error({message:u(e)}),j("SAVE"),!1}finally{O(!1)}},[d.intlKeyByType,u,e,l,c,v]),_e=Object(a.useCallback)(async()=>{O(!0);try{const{status:t}=await D.g.deleteTicketRule(l,c,{id:Number(v)});return o.toast.success({message:e.formatMessage({id:`desk.settings.${d.intlKeyByType}.toast.delete.success`})}),200===t}catch(e){return o.toast.error({message:u(e)}),j("DELETE"),!1}finally{O(!1)}},[d.intlKeyByType,u,e,l,c,v]),Ce=Object(a.useCallback)(async({selectedAgentGroupId:e})=>{try{const{data:{members:t,...n}}=await D.g.fetchAgentGroup(l,c,{groupId:e}),a={...n,memberCount:t.length};q(a)}catch(e){}},[l,c]),ke=Object(a.useCallback)(async()=>{M(!0);try{const{data:{results:e}}=await D.g.fetchTicketFields(l,c,{offset:0,limit:100}),{data:{results:t}}=await D.g.fetchCustomerFields(l,c,{offset:0,limit:100});w(e),S(t)}catch(e){o.toast.error({message:u(e)}),j("FETCH")}finally{M(!1)}},[u,l,c]),we=e=>{switch(e){case"STRING":return dx.f.TEXT;case"INTEGER":return dx.f.NUMBER;default:return dx.f.DROPDOWN}},Te=Object(a.useCallback)((e,t)=>{ox()(e,e=>e.name.toLowerCase()).filter(e=>"LINK"!==e.fieldType).forEach(e=>{const n={type:we(e.fieldType),name:e.name,key:`${t}.${e.key}`,operator:dx.d.Is,value:null};G.current.set(n.key,n)})},[]),Se=Object(a.useCallback)((e,t)=>{G.current.clear(),G.current.set(dx.m.ticket.key,dx.m.ticket),G.current.set(dx.z.key,dx.z),e.length>0&&(G.current.set(dx.m.ticketField.key,dx.m.ticketField),Te(e,"ticket_field.key")),G.current.set(dx.m.customer.key,dx.m.customer),G.current.set(dx.o.key,dx.o),G.current.set(dx.p.key,dx.p),t.length>0&&(G.current.set(dx.m.customerField.key,dx.m.customerField),Te(t,"customer_field.key"))},[Te]),Ee=Object(a.useCallback)((e,t)=>{e.filter(e=>"DROPDOWN"===e.fieldType).forEach(e=>{K.current.set(`ticket_field.key.${e.key}`,e.options)}),t.filter(e=>"DROPDOWN"===e.fieldType).forEach(e=>{K.current.set(`customer_field.key.${e.key}`,e.options)})},[]),Ie=Object(a.useCallback)(()=>Array.from(G.current.values(),e=>e.key),[]),Me=Object(a.useCallback)(()=>{const e=Ie();R(e)},[Ie]),De=Object(a.useMemo)(()=>({or:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditional.match.option.any"}),and:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditional.match.option.all"})}),[e]),Ae=Object(a.useCallback)(()=>{if(ce.current&&void 0!==pe&&void 0!==ge&&void 0!==he){const{name:e,conditional:{match:t,conditions:n,consequent:a}}=ce.current,i=e.trim()!==de.trim(),s=t!==pe,r=(()=>{if(d.type===dx.j.PRIORITY){var e,t;const n=a,i=he;return!(null==(e=i._priority)||!e.value)&&(null==(t=n._priority)?void 0:t.value)!==i._priority.value}if(me===dx.g.GROUP_WITH_BOT_AGENT){var n,i,s,r;const e=a,t=he;return!(null==(n=t._agent)||!n.value||null==(i=t._group)||!i.value||(null==(s=e._group)?void 0:s.value)===t._group.value&&(null==(r=e._agent)?void 0:r.value)===t._agent.value)}if(me===dx.g.GROUP){var o,l;const e=a,t=he;return!(null==(o=t._group)||!o.value)&&(null==(l=e._group)?void 0:l.value)!==t._group.value}return!1})(),o=x?i||s||r:i&&r,l=n.length!==(null==ge?void 0:ge.length)&&(null==ge?void 0:ge.every(e=>null!=e.key&&(!dx.u.includes(e.operator)&&null!=e.value||dx.u.includes(e.operator))))||n.length===(null==ge?void 0:ge.length)&&n.some((e,t)=>{var n,a,i,s,r,o;return(null==(n=ge[t])?void 0:n.key)&&(null==(a=ge[t])?void 0:a.operator)&&(dx.u.includes(ge[t].operator)||(null==(i=ge[t])?void 0:i.value))&&(e.key!==(null==(s=ge[t])?void 0:s.key)||e.operator!==(null==(r=ge[t])?void 0:r.operator)||e.value!==(null==(o=ge[t])?void 0:o.value))});return x?o||l:o&&l}return!1},[d.type,x,ge,he,me,pe,de]),Ne=Object(a.useCallback)(e=>{if([dx.g.GROUP,dx.g.GROUP_WITH_BOT_AGENT].includes(e.type)){var t,n;const a=null!=(t=null==e||null==(n=e._group)?void 0:n.value)?t:void 0;void 0!==a&&Ce({selectedAgentGroupId:a})}e.type===dx.g.GROUP_WITH_BOT_AGENT&&e._agent.value&&ye(e._agent.value)},[ye,Ce]),Re=Object(a.useCallback)(()=>{const e=Ae();U(e&&La()(J))},[Ae,J]);Object(a.useEffect)(()=>{je&&C(je.data)},[je]),Object(a.useEffect)(()=>{Re()},[Re]),Object(a.useEffect)(()=>{ke()},[ke]),Object(a.useEffect)(()=>{Se(k,T),Ee(k,T),Me()},[Me,Se,k,T,Ee]),Object(a.useEffect)(()=>{x&&Oe({onSuccess:Ne})},[Oe,x,Ne]),Object(a.useEffect)(()=>{p("RuleDrawer")},[p]),Object(a.useEffect)(()=>{if(h){const{conditional:{conditions:t,consequent:n}}=h;t&&t.length>0&&t.forEach(({errors:t,index:n})=>{t.forEach(t=>{const a=e.formatMessage({id:`desk.settings.ticketRulesDetail.form.conditions.serverError.${cx()(t.reason)}`},{type:t.type.toLowerCase()});te(`conditional.conditions[${n}].${t.type.toLowerCase()}`,{type:t.type,message:a})})}),null!=n&&n.errors&&n.errors.forEach(e=>{const{type:t,reason:n}=e;te(`conditional.consequent.${t}.value`,{type:t,message:n})}),t&&0!==(null==t?void 0:t.length)||n||m(null)}},[e,B,h,te]);const Pe=Object(a.useCallback)(t=>0===t?e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.prefix.if"}):pe===dx.h.AND?e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.prefix.all"}):e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.prefix.any"}),[e,pe]),Le=Object(a.useCallback)(t=>{var n;const a=!!dx.w.find(e=>e===t),i=(null==(n=G.current.get(t))?void 0:n.name)||"";return a&&i?e.formatMessage({id:i}):i},[e]),Fe=Object(a.useCallback)(t=>{var n,a;const{index:i,operator:s}=t,r=null!=(n=null==(a=ge[i])?void 0:a.key)?n:null;if(r){var o;const t=`${s}${((null==(o=G.current.get(r))?void 0:o.type)||dx.d.Is)!==dx.f.NUMBER||s!==dx.d.Is&&s!==dx.d.IsNot?"":"_for_number"}`;return e.formatMessage({id:dx.e[t]})}return""},[e,ge]),Ue=Object(a.useCallback)(e=>{var t;const n=ge?ge[e]:void 0,a=null!=n&&n.key&&G.current.has(n.key)?null==(t=G.current.get(n.key))?void 0:t.type:dx.f.DROPDOWN;return a===dx.f.TEXT?dx.y:a===dx.f.NUMBER?dx.v:a===dx.f.DROPDOWN?dx.q:[...dx.l,...dx.k]},[ge]),$e=Object(a.useCallback)(e=>{e.preventDefault(),oe(i_)},[oe]),Be=Object(a.useCallback)(e=>{if(h&&h.conditional.conditions&&h.conditional.conditions.length>0){var t,n;const a=null==(t=h.conditional.conditions)?void 0:t.findIndex(t=>t.index===e);if(void 0!==a&&a>=0)return void m({...h,conditional:{...h.conditional,conditions:[...h.conditional.conditions.slice(0,a),...h.conditional.conditions.slice(a+1).map(e=>({...e,index:e.index-1}))]}});m({...h,conditional:{...h.conditional,conditions:null==(n=h.conditional.conditions)?void 0:n.map(t=>t.index>e?{...t,index:t.index-1}:t)}})}},[h]),Ve=Object(a.useCallback)(e=>{var t;const n=null==h||null==(t=h.conditional.conditions)?void 0:t.findIndex(t=>t.index===e&&t.errors.some(e=>"VALUE"===e.type));null!=h&&h.conditional.conditions&&n&&n>=0&&m({...h,conditional:{...h.conditional,conditions:[...h.conditional.conditions.slice(0,n),{...h.conditional.conditions[n],errors:h.conditional.conditions[n].errors.filter(e=>e.type===dx.c.VALUE)},...h.conditional.conditions.slice(n+1)]}})},[h]),ze=Object(a.useCallback)(e=>()=>{ge.forEach((t,n)=>{n>=e&&ne([`conditional.conditions[${n}].key`,`conditional.conditions[${n}].value`])}),Be(e),z([...B,e]),le(e)},[ne,le,Be,B,ge]),He=Object(a.useCallback)(()=>{g("RuleDrawer"),setTimeout(()=>{n.push(`/${r}/desk/settings/${d.pathname}`)},1e3*V.Ic)},[r,g,d.pathname,n]),qe=Object(a.useCallback)(()=>{(x?Ae():ae.isDirty)?i({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.settings.ticketRulesDetail.dialog.title"}),description:e.formatMessage({id:"desk.settings.ticketRulesDetail.dialog.description"}),cancelText:e.formatMessage({id:"desk.settings.ticketRulesDetail.dialog.button.cancel"}),confirmText:e.formatMessage({id:"desk.settings.ticketRulesDetail.dialog.button.discard"}),onConfirm:()=>{He()}}}):He()},[Ae,He,ae.isDirty,e,x,i]),Ge=()=>{ke()},We=Object(a.useCallback)(e=>t=>{ne([`conditional.conditions[${e}].key`,`conditional.conditions[${e}].value`]),Be(e),ie({name:de,conditional:{...ue,conditions:[...ge.slice(0,e),{key:t,operator:dx.d.Is,value:null},...ge.slice(e+1)]}},{errors:!0,dirtyFields:!0,isDirty:!0})},[ne,Be,ie,ue,ge,de]),Ke=Object(a.useCallback)(e=>()=>{Ve(e)},[Ve]),Ye=Object(a.useCallback)(e=>()=>{Ve(e)},[Ve]),Qe=Object(a.useCallback)(()=>{h&&(m({...h,conditional:{...h.conditional,consequent:null}}),ne("conditional.consequent._group.value"),fe&&ne("conditional.consequent._agent.value"))},[ne,fe,h]),Je=Object(a.useCallback)(e=>{ie({name:de,conditional:{...ue,consequent:{...ue.consequent,type:e,_group:{key:"id",value:null},_agent:{key:"id",value:null}}}},{errors:!0,dirtyFields:!0,isDirty:!0}),C(void 0)},[ie,ue,de]),Xe=Object(a.useCallback)(e=>{Je(e),Qe(),q(null),Re()},[Qe,Je,Re]),Ze=Object(a.useCallback)(e=>{const{fieldName:t,value:n}=e;ee(t,n),ne(t),Qe()},[ne,Qe,ee]),et=Object(a.useCallback)(e=>{Ze({fieldName:"conditional.consequent._group.value",value:e.id}),q(e),fe&&ee("conditional.consequent._agent.value",null)},[fe,Ze,ee]),tt=Object(a.useCallback)(e=>{Ze({fieldName:"conditional.consequent._agent.value",value:e.id}),C(e)},[Ze]),nt=Object(a.useCallback)(()=>{i({dialogTypes:A.a.Delete,dialogProps:{title:e.formatMessage({id:"desk.settings.ticketRules.dialog.delete.title"},{ruleName:de}),description:e.formatMessage({id:`desk.settings.${d.intlKeyByType}.dialog.delete.description`}),confirmText:e.formatMessage({id:"desk.settings.ticketRules.dialog.delete.button"}),cancelText:e.formatMessage({id:"desk.settings.ticketRules.dialog.cancel.button"}),onDelete:async e=>{e(!0),await _e()&&He()}}})},[i,e,de,d.intlKeyByType,_e,He]),at=Object(a.useCallback)(async e=>{let t=!1;const n={...e,name:e.name.trim()};x?await xe(n).then(e=>{t=e}):await ve(n).then(e=>{t=e}),t&&He()},[He,ve,x,xe]),it=e.formatMessage({id:"desk.settings.ticketRulesDetail.form.serverError.button.retry"}),st=Object(a.useMemo)(()=>({SAVE:{intlKey:"desk.settings.ticketRulesDetail.form.serverError.save",action:void 0},DELETE:{intlKey:"desk.settings.ticketRulesDetail.form.serverError.delete",action:{label:it,onClick:nt}},FETCH:{intlKey:"desk.settings.ticketRulesDetail.form.serverError.fetch",action:{label:it,onClick:()=>{Oe({onSuccess:Ne}),ke()}}}}),[ke,Oe,nt,Ne,it]),rt=Object(a.useRef)(),ot=(()=>{var t,n;const a=null!=(t=null==(n=J.conditional)?void 0:n.conditions)?t:[];if(a.some(e=>{var t;return(null==e||null==(t=e.value)?void 0:t.message)===dx.b.INVALID_CHANNEL_BY_CONSEQUENT_CUSTOM_BOT})){const t=e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.error.inline.custom"});return rt.current=t,{isRender:!0,type:"error",message:t}}if(a.some(e=>{var t;return(null==e||null==(t=e.value)?void 0:t.message)===dx.b.INVALID_CHANNEL_BY_CONSEQUENT_FAQ_BOT})){const t=e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.value.error.inline.faq"});return rt.current=t,{isRender:!0,type:"error",message:t}}if(null!=b){const t=e.formatMessage({id:st[b].intlKey});return rt.current=t,{isRender:!0,type:"error",message:t,action:st[b].action}}return{isRender:!1,type:"error",message:rt.current}})(),lt=({selectedItem:e})=>e&&Object(W.jsx)(Wx,{children:Le(e)});return Object(W.jsxs)(Ex,{id:"RuleDrawer",isFullHeight:!0,isDarkBackground:!0,children:[(y||I)&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsxs)(Ix,{children:[Object(W.jsx)(Dx,{as:"h2",children:x?e.formatMessage({id:"desk.settings.ticketRulesDetail.title.edit"}):e.formatMessage({id:`desk.settings.${d.intlKeyByType}.title.create`})}),Object(W.jsx)(Mx,{justifySelf:"end",children:Object(W.jsx)(Ax,{icon:"close",role:"button",buttonType:"secondary",size:"small",onClick:qe})}),Object(W.jsx)(Nx,{children:Object(W.jsx)(o.ScrollBar,{style:{height:"100%"},children:Object(W.jsxs)(Rx,{id:a_,role:"form",onSubmit:se(at),children:[Object(W.jsxs)(Px,{children:[Object(W.jsx)(Lx,{children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.ruleName.title"})}),Object(W.jsx)(Fx,{children:Object(W.jsx)(o.InputText,{ref:Q({validate:{required:t=>t.trim().length>0||e.formatMessage({id:"desk.settings.ticketRulesDetail.form.name.error.required"}),maxLength:t=>t.trim().length<=100||e.formatMessage({id:"desk.settings.ticketRulesDetail.form.name.error.maximum"})}}),name:"name",error:(ct=J.name,null!=ct&&ct.message?{hasError:!0,message:"string"==typeof ct.message?ct.message:""}:void 0)})})]}),Object(W.jsxs)(Px,{children:[Object(W.jsx)(Lx,{children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.title"})}),Object(W.jsxs)(Fx,{children:[Object(W.jsxs)(Ux,{children:[Object(W.jsx)($x,{children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditional.match"})}),Object(W.jsx)(_i.a,{control:X,rules:{required:!0},name:"conditional.match",render:({onChange:e,value:t})=>Object(W.jsx)(o.Dropdown,{selectedItem:t,onChange:e,portalId:"portal_popup",variant:"inline",items:[dx.h.OR,dx.h.AND],itemToString:e=>De[e],itemToElement:e=>De[e],toggleRenderer:({selectedItem:e})=>e&&Object(W.jsx)(Bx,{children:De[e]})})})]}),Object(W.jsx)(Vx,{children:re.map((t,n)=>{var i,s;return Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)(V.d,{text:Pe(n),minWidth:48}),Object(W.jsxs)(Hx,{role:"row",children:[Object(W.jsx)(qx,{as:"li",onClick:Ge,children:Object(W.jsx)(_i.a,{control:X,rules:{required:!0},name:`conditional.conditions[${n}].key`,defaultValue:t.key,render:({onChange:t,value:a})=>{var i,s,r,l;return Object(W.jsx)(o.Dropdown,{selectedItem:a,onChange:t,portalId:"portal_popup",placeholder:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.dropdown.placeholder"}),items:N,itemToString:e=>Le(e),itemToElement:e=>{const t=Le(e);return dx.n.find(t=>t===e)?Object(W.jsx)(Gx,{children:t}):Object(W.jsx)(W.Fragment,{children:t})},toggleRenderer:null!=(i=ge[n])&&i.key?lt:void 0,isItemDisabled:e=>!!dx.n.find(t=>t===e),onItemSelected:We(n),hasError:!(null==J||null==(s=J.conditional)||null==(r=s.conditions)||null==(l=r[n])||!l.key)||!1})}})}),Object(W.jsx)(qx,{as:"li",isHidden:!(t.key||null!=(i=ge[n])&&i.key),children:Object(W.jsx)(_i.a,{control:X,name:`conditional.conditions[${n}].operator`,portalId:"portal_popup",defaultValue:t.operator,render:({onChange:t,value:a})=>Object(W.jsx)(o.Dropdown,{placeholder:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.conditions.dropdown.placeholder"}),selectedItem:a,onChange:t,items:Ue(n),itemToString:e=>Fe({index:n,operator:e}),itemToElement:e=>Fe({index:n,operator:e}),onItemSelected:Ke(n)})})}),Object(W.jsxs)(qx,{as:"li",children:[Object(W.jsx)(zx,{isHidden:!(t.key||null!=(s=ge[n])&&s.key),children:Object(W.jsx)(Tx,{control:X,index:n,defaultCondition:t,currentConditionField:ge[n],consequentType:me,consequentAgent:_,keyMap:G.current,valueMap:K.current,errors:J,setError:te,clearError:ne,onValueDropdownSelected:Ye(n)},`${t.key}.${t.value}`)}),Object(W.jsx)(zx,{isHidden:re.length<=1,children:Object(W.jsx)(Xx,{icon:"remove",size:"small",type:"button",buttonType:"tertiary",onClick:ze(n)})})]})]}),re.length-1===n&&Object(W.jsx)(Jx,{children:Object(W.jsx)(o.Tooltip,{placement:"top-start",content:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.button.add.tooltip.exceedMaximum"}),portalId:"portal_tooltip",disabled:re.length<10,children:Object(W.jsx)(Zx,{icon:"plus",type:"button",buttonType:"primary",variant:"ghost",onClick:$e,disabled:re.length>=10,children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.button.add"})})})})]},t.id)})})]})]}),Object(W.jsxs)(Px,{children:[Object(W.jsx)(Lx,{children:e.formatMessage({id:`desk.settings.${d.intlKeyByType}Detail.form.consequent.title`})}),Object(W.jsxs)(Fx,{children:[d.type===dx.j.ASSIGNMENT&&Object(W.jsxs)(Yx,{children:[Object(W.jsxs)(Qx,{children:[Object(W.jsx)(_i.a,{control:X,name:"conditional.consequent.type",render:({onChange:e,value:t,name:n})=>Object(W.jsx)(gx,{name:n,value:t,disabled:y,onChange:t=>{(e=>[dx.g.GROUP,dx.g.GROUP_WITH_BOT_AGENT,dx.g.PRIORITY].includes(e))(t.target.value)&&(Xe(t.target.value),e(t.target.value))}})}),Object(W.jsx)(_i.a,{defaultValue:"id",control:X,name:"conditional.consequent._group.key",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(Kx,{ref:i,name:a,value:n,onChange:e,onBlur:t})})]}),fe&&Object(W.jsx)(Qx,{children:Object(W.jsx)(o.InlineNotification,{type:"info",message:e.formatMessage({id:"desk.settings.assignmentRulesDetail.form.consequent.bot.info"})})}),Object(W.jsxs)(Qx,{children:[Object(W.jsx)(_i.a,{control:X,rules:{required:e.formatMessage({id:"desk.settings.assignmentRulesDetail.form.consequent.value.error.required"})},name:"conditional.consequent._group.value",render:()=>{var e,t,n;return Object(W.jsx)(Ji.a,{selectedAgentGroup:H,dropdownProps:{size:"medium",variant:"default",width:"100%"},isBotOnly:me===dx.g.GROUP_WITH_BOT_AGENT,hasError:!(null==(e=J.conditional)||null==(t=e.consequent)||null==(n=t._group)||!n.value),onItemSelected:et})}}),fe&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(_i.a,{defaultValue:"id",control:X,name:"conditional.consequent._agent.key",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(Kx,{ref:i,name:a,value:n,onChange:e,onBlur:t})}),Object(W.jsx)(_i.a,{name:"conditional.consequent._agent.value",control:X,rules:{required:e.formatMessage({id:"desk.settings.assignmentRulesDetail.form.consequent.value.error.required"})},render:({value:t})=>{var n,a,i;return Object(W.jsx)(Qt.a,{selectedAgentId:t,placeholder:e.formatMessage({id:"desk.agentSelect.dropdown.item.placeholder.select.botAgent"}),selectedAgentGroup:null!=H?H:void 0,agentType:f.h.BOT,isToggleFullWidth:!0,isAgentGroupDropdownHidden:!0,isSearchHidden:!0,dropdownProps:{size:"medium",variant:"default",width:"100%"},disabled:!H,hasError:!(null==J||null==(n=J.conditional)||null==(a=n.consequent)||null==(i=a._agent)||!i.value),styles:{marginTop:8},onItemSelected:tt})}})]})]})]}),d.type===dx.j.PRIORITY&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(_i.a,{defaultValue:dx.g.PRIORITY,control:X,name:"conditional.consequent.type",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(Kx,{ref:i,name:a,value:n,onChange:e,onBlur:t})}),Object(W.jsx)(_i.a,{defaultValue:"priority",control:X,name:"conditional.consequent._priority.key",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(Kx,{ref:i,name:a,value:n,onChange:e,onBlur:t})}),Object(W.jsx)(_i.a,{control:X,rules:{required:e.formatMessage({id:"desk.settings.priorityRulesDetail.form.consequent.value.error.required"})},name:"conditional.consequent._priority.value",defaultValue:f.gc.MEDIUM,render:({onChange:e,value:t})=>{var n,a,i;return Object(W.jsx)(mx,{value:t,onChange:e,hasError:!(null==J||null==(n=J.conditional)||null==(a=n.consequent)||null==(i=a._priority)||!i.value),disabled:y})}})]})]})]}),Object(W.jsx)(s_,{show:ot.isRender,from:"bottom",children:Object(W.jsx)(r_,{"data-test-id":"RuleErrorNotification",...ot})})]})})}),Object(W.jsx)(Mx,{children:x&&Object(W.jsx)(e_,{icon:"delete",type:"button",buttonType:"primary",variant:"ghost",disabled:y,onClick:nt,children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.button.delete"})})}),Object(W.jsxs)(Mx,{justifySelf:"end","data-test-id":"FormActionContainer",children:[Object(W.jsx)(t_,{type:"button",buttonType:"tertiary",role:"button",disabled:y,onClick:qe,children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.button.cancel"})}),Object(W.jsx)(o.Button,{buttonType:"primary",type:"submit",role:"button",form:a_,disabled:!F||y,onClick:se(at),children:e.formatMessage({id:"desk.settings.ticketRulesDetail.form.button.save"})})]})]})]});var ct});var l_=n("dI71"),c_=n("wx14"),d_=n("bCCX"),u_=function(){return Math.random().toString(36).substring(7).split("").join(".")},p_={INIT:"@@redux/INIT"+u_(),REPLACE:"@@redux/REPLACE"+u_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u_()}};function g_(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h_(e,t,n){var a;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(h_)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,s=t,r=[],o=r,l=!1;function c(){o===r&&(o=r.slice())}function d(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function u(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var n=o.indexOf(e);o.splice(n,1),r=null}}}function p(e){if(!g_(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,s=i(s,e)}finally{l=!1}for(var t=r=o,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,p({type:p_.REPLACE})}function h(){var e,t=u;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[d_.a]=function(){return this},e}return p({type:p_.INIT}),(a={dispatch:p,subscribe:u,getState:d,replaceReducer:g})[d_.a]=h,a}function m_(e,t){return function(){return t(e.apply(this,arguments))}}function f_(e,t){if("function"==typeof e)return m_(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var a in e){var i=e[a];"function"==typeof i&&(n[a]=m_(i,t))}return n}function b_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j_(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function y_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j_(n,!0).forEach((function(t){b_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v_(e,t){var n=Object(a.useState)((function(){return{inputs:t,result:e()}}))[0],i=Object(a.useRef)(!0),s=Object(a.useRef)(n),r=i.current||Boolean(t&&s.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,s.current.inputs))?s.current:{inputs:t,result:e()};return Object(a.useEffect)((function(){i.current=!1,s.current=r}),[r]),r.result}var x_=v_,__=function(e,t){return v_((function(){return e}),t)};var C_=function(e,t){if(!e)throw new Error("Invariant failed")},k_=function(e){var t=e.top,n=e.right,a=e.bottom,i=e.left;return{top:t,right:n,bottom:a,left:i,width:n-i,height:a-t,x:i,y:t,center:{x:(n+i)/2,y:(a+t)/2}}},w_=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},T_=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},S_={top:0,right:0,bottom:0,left:0},E_=function(e){var t=e.borderBox,n=e.margin,a=void 0===n?S_:n,i=e.border,s=void 0===i?S_:i,r=e.padding,o=void 0===r?S_:r,l=k_(w_(t,a)),c=k_(T_(t,s)),d=k_(T_(c,o));return{marginBox:l,borderBox:k_(t),paddingBox:c,contentBox:d,margin:a,border:s,padding:o}},I_=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&C_(!1),n},M_=function(e,t){var n,a,i=e.borderBox,s=e.border,r=e.margin,o=e.padding,l=(a=t,{top:(n=i).top+a.y,left:n.left+a.x,bottom:n.bottom+a.y,right:n.right+a.x});return E_({borderBox:l,border:s,margin:r,padding:o})},D_=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),M_(e,t)},A_=function(e,t){var n={top:I_(t.marginTop),right:I_(t.marginRight),bottom:I_(t.marginBottom),left:I_(t.marginLeft)},a={top:I_(t.paddingTop),right:I_(t.paddingRight),bottom:I_(t.paddingBottom),left:I_(t.paddingLeft)},i={top:I_(t.borderTopWidth),right:I_(t.borderRightWidth),bottom:I_(t.borderBottomWidth),left:I_(t.borderLeftWidth)};return E_({borderBox:e,margin:n,padding:a,border:i})},N_=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return A_(t,n)},R_=n("Wwog"),P_=function(e){var t=[],n=null,a=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];t=i,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function L_(e,t){}L_.bind(null,"warn"),L_.bind(null,"error");function F_(){}function U_(e,t,n){var a=t.map((function(t){var a,i,s=(a=n,i=t.options,Object(c_.a)({},a,{},i));return e.addEventListener(t.eventName,t.fn,s),function(){e.removeEventListener(t.eventName,t.fn,s)}}));return function(){a.forEach((function(e){e()}))}}function $_(e){this.message=e}function B_(e,t){if(!e)throw new $_("Invariant failed")}$_.prototype.toString=function(){return this.message};var V_=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).callbacks=null,t.unbind=F_,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof $_&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}Object(l_.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=U_(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof $_))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(i.a.Component),z_=function(e){return e+1},H_=function(e,t){var n=e.droppableId===t.droppableId,a=z_(e.index),i=z_(t.index);return n?"\n      You have moved the item from position "+a+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+a+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},q_=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},G_=function(e){return"\n  The item has returned to its starting position\n  of "+z_(e.index)+"\n"},W_="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",K_=function(e){return"\n  You have lifted an item in position "+z_(e.source.index)+"\n"},Y_=function(e){var t=e.destination;if(t)return H_(e.source,t);var n=e.combine;return n?q_(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Q_=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+G_(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+H_(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+q_(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+G_(e.source)+"\n  "},J_={x:0,y:0},X_=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Z_=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},eC=function(e,t){return e.x===t.x&&e.y===t.y},tC=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},nC=function(e,t,n){var a;return void 0===n&&(n=0),(a={})[e]=t,a["x"===e?"y":"x"]=n,a},aC=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},iC=function(e,t){return Math.min.apply(Math,t.map((function(t){return aC(e,t)})))},sC=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},rC=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},oC=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},lC=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=k_({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):k_(e)},cC=function(e){var t=e.page,n=e.withPlaceholder,a=e.axis,i=e.frame,s=function(e,t,n){var a;return n&&n.increasedBy?Object(c_.a)({},e,((a={})[t.end]=e[t.end]+n.increasedBy[t.line],a)):e}(function(e,t){return t?rC(e,t.scroll.diff.displacement):e}(t.marginBox,i),a,n);return{page:t,withPlaceholder:n,active:lC(s,i)}},dC=function(e,t){e.frame||B_(!1);var n=e.frame,a=Z_(t,n.scroll.initial),i=tC(a),s=Object(c_.a)({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:a,displacement:i},max:n.scroll.max}}),r=cC({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return Object(c_.a)({},e,{frame:s,subject:r})};function uC(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function pC(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function gC(e,t){if(e.find)return e.find(t);var n=pC(e,t);return-1!==n?e[n]:void 0}function hC(e){return Array.prototype.slice.call(e)}var mC=Object(R_.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),fC=Object(R_.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),bC=Object(R_.a)((function(e){return uC(e)})),jC=Object(R_.a)((function(e){return uC(e)})),yC=Object(R_.a)((function(e,t){return jC(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function OC(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function vC(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var xC=Object(R_.a)((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),_C=function(e,t){return e.descriptor.droppableId===t.descriptor.id},CC={point:J_,value:0},kC={invisible:{},visible:{},all:[]},wC={displaced:kC,displacedBy:CC,at:null},TC=function(e,t){return function(n){return e<=n&&n<=t}},SC=function(e){var t=TC(e.top,e.bottom),n=TC(e.left,e.right);return function(a){if(t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right))return!0;var i=t(a.top)||t(a.bottom),s=n(a.left)||n(a.right);if(i&&s)return!0;var r=a.top<e.top&&a.bottom>e.bottom,o=a.left<e.left&&a.right>e.right;return!(!r||!o)||(r&&s||o&&i)}},EC=function(e){var t=TC(e.top,e.bottom),n=TC(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},IC={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},MC={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},DC=function(e){var t=e.target,n=e.destination,a=e.viewport,i=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,r=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:J_;return rC(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(r,n,s)&&function(e,t,n){return n(t)(e)}(r,a,s)},AC=function(e){return DC(Object(c_.a)({},e,{isVisibleThroughFrameFn:SC}))},NC=function(e){return DC(Object(c_.a)({},e,{isVisibleThroughFrameFn:EC}))};function RC(e){var t=e.afterDragging,n=e.destination,a=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,r=e.last;return t.reduce((function(e,t){var o=function(e,t){var n=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return k_(w_(n,a))}(t,a),l=t.descriptor.id;if(e.all.push(l),!AC({target:o,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c={draggableId:l,shouldAnimate:function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var a=t.invisible,i=t.visible;if(a[e])return!1;var s=i[e];return!s||s.shouldAnimate}(l,r,s)};return e.visible[l]=c,e}),{all:[],visible:{},invisible:{}})}function PC(e){var t=e.insideDestination,n=e.inHomeList,a=e.displacedBy,i=e.destination,s=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:kC,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function LC(e){var t=e.draggable,n=e.insideDestination,a=e.destination,i=e.viewport,s=e.displacedBy,r=e.last,o=e.index,l=e.forceShouldAnimate,c=_C(t,a);if(null==o)return PC({insideDestination:n,inHomeList:c,displacedBy:s,destination:a});var d=gC(n,(function(e){return e.descriptor.index===o}));if(!d)return PC({insideDestination:n,inHomeList:c,displacedBy:s,destination:a});var u=xC(t,n),p=n.indexOf(d);return{displaced:RC({afterDragging:u.slice(p),destination:a,displacedBy:s,last:r,viewport:i.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:o}}}}function FC(e,t){return Boolean(t.effected[e])}var UC=function(e){var t=e.isMovingForward,n=e.isInHomeList,a=e.draggable,i=e.draggables,s=e.destination,r=e.insideDestination,o=e.previousImpact,l=e.viewport,c=e.afterCritical,d=o.at;if(d||B_(!1),"REORDER"===d.type){var u=function(e){var t=e.isMovingForward,n=e.isInHomeList,a=e.insideDestination,i=e.location;if(!a.length)return null;var s=i.index,r=t?s+1:s-1,o=a[0].descriptor.index,l=a[a.length-1].descriptor.index;return r<o||r>(n?l:l+1)?null:r}({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:r});return null==u?null:LC({draggable:a,insideDestination:r,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})}var p=function(e){var t=e.isMovingForward,n=e.destination,a=e.draggables,i=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var r=i.draggableId,o=a[r].descriptor.index;return FC(r,s)?t?o:o-1:t?o+1:o}({isMovingForward:t,destination:s,displaced:o.displaced,draggables:i,combine:d.combine,afterCritical:c});return null==p?null:LC({draggable:a,insideDestination:r,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:p})},$C=function(e){var t=e.afterCritical,n=e.impact,a=e.draggables,i=vC(n);i||B_(!1);var s=i.draggableId,r=a[s].page.borderBox.center,o=function(e){var t=e.displaced,n=e.afterCritical,a=e.combineWith,i=e.displacedBy,s=Boolean(t.visible[a]||t.invisible[a]);return FC(a,n)?s?J_:tC(i.point):s?i.point:J_}({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return X_(r,o)},BC=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},VC=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},zC=function(e){var t=e.axis,n=e.moveRelativeTo,a=e.isMoving;return nC(t.line,n.marginBox[t.end]+BC(t,a),VC(t,n.marginBox,a))},HC=function(e){var t=e.axis,n=e.moveRelativeTo,a=e.isMoving;return nC(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,a),VC(t,n.marginBox,a))},qC=function(e){var t=e.impact,n=e.draggable,a=e.draggables,i=e.droppable,s=e.afterCritical,r=yC(i.descriptor.id,a),o=n.page,l=i.axis;if(!r.length)return function(e){var t=e.axis,n=e.moveInto,a=e.isMoving;return nC(t.line,n.contentBox[t.start]+BC(t,a),VC(t,n.contentBox,a))}({axis:l,moveInto:i.page,isMoving:o});var c=t.displaced,d=t.displacedBy,u=c.all[0];if(u){var p=a[u];if(FC(u,s))return HC({axis:l,moveRelativeTo:p.page,isMoving:o});var g=M_(p.page,d.point);return HC({axis:l,moveRelativeTo:g,isMoving:o})}var h=r[r.length-1];if(h.descriptor.id===n.descriptor.id)return o.borderBox.center;if(FC(h.descriptor.id,s)){var m=M_(h.page,tC(s.displacedBy.point));return zC({axis:l,moveRelativeTo:m,isMoving:o})}return zC({axis:l,moveRelativeTo:h.page,isMoving:o})},GC=function(e,t){var n=e.frame;return n?X_(t,n.scroll.diff.displacement):t},WC=function(e){var t=function(e){var t=e.impact,n=e.draggable,a=e.droppable,i=e.draggables,s=e.afterCritical,r=n.page.borderBox.center,o=t.at;return a&&o?"REORDER"===o.type?qC({impact:t,draggable:n,draggables:i,droppable:a,afterCritical:s}):$C({impact:t,draggables:i,afterCritical:s}):r}(e),n=e.droppable;return n?GC(n,t):t},KC=function(e,t){var n=Z_(t,e.scroll.initial),a=tC(n);return{frame:k_({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:a}}}};function YC(e,t){return e.map((function(e){return t[e]}))}var QC=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,a=function(e,t){return X_(e.scroll.diff.displacement,t)}(e.viewport,t),i=Z_(a,n.page.borderBox.center);return X_(n.client.borderBox.center,i)},JC=function(e){var t=e.draggable,n=e.destination,a=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,r=e.onlyOnMainAxis,o=void 0!==r&&r,l=Z_(a,t.page.borderBox.center),c={target:rC(t.page.borderBox,l),destination:n,withDroppableDisplacement:s,viewport:i};return o?function(e){return DC(Object(c_.a)({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=TC(e.top,e.bottom),a=TC(e.left,e.right);return function(e){return t===IC?n(e.top)&&n(e.bottom):a(e.left)&&a(e.right)}})}));var t}(c):NC(c)},XC=function(e){var t=e.isMovingForward,n=e.draggable,a=e.destination,i=e.draggables,s=e.previousImpact,r=e.viewport,o=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!a.isEnabled)return null;var d=yC(a.descriptor.id,i),u=_C(n,a),p=function(e){var t=e.isMovingForward,n=e.draggable,a=e.destination,i=e.insideDestination,s=e.previousImpact;if(!a.isCombineEnabled)return null;if(!OC(s))return null;function r(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:a.descriptor.id}};return Object(c_.a)({},s,{at:t})}var o=s.displaced.all,l=o.length?o[0]:null;if(t)return l?r(l):null;var c=xC(n,i);if(!l)return c.length?r(c[c.length-1].descriptor.id):null;var d=pC(c,(function(e){return e.descriptor.id===l}));-1===d&&B_(!1);var u=d-1;return u<0?null:r(c[u].descriptor.id)}({isMovingForward:t,draggable:n,destination:a,insideDestination:d,previousImpact:s})||UC({isMovingForward:t,isInHomeList:u,draggable:n,draggables:i,destination:a,insideDestination:d,previousImpact:s,viewport:r,afterCritical:c});if(!p)return null;var g=WC({impact:p,draggable:n,droppable:a,draggables:i,afterCritical:c});if(JC({draggable:n,destination:a,newPageBorderBoxCenter:g,viewport:r.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:QC({pageBorderBoxCenter:g,draggable:n,viewport:r}),impact:p,scrollJumpRequest:null};var h=Z_(g,o);return{clientSelection:l,impact:function(e){var t=e.impact,n=e.viewport,a=e.destination,i=e.draggables,s=e.maxScrollChange,r=KC(n,X_(n.scroll.current,s)),o=a.frame?dC(a,X_(a.frame.scroll.current,s)):a,l=t.displaced,c=RC({afterDragging:YC(l.all,i),destination:a,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),d=RC({afterDragging:YC(l.all,i),destination:o,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),u={},p={},g=[l,c,d];return l.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var a=t[n].visible[e];if(a)return a}return null}(e,g);t?p[e]=t:u[e]=!0})),Object(c_.a)({},t,{displaced:{all:l.all,invisible:u,visible:p}})}({impact:p,viewport:r,destination:a,draggables:i,maxScrollChange:h}),scrollJumpRequest:h}},ZC=function(e){var t=e.subject.active;return t||B_(!1),t},ek=function(e,t){var n=e.page.borderBox.center;return FC(e.descriptor.id,t)?Z_(n,t.displacedBy.point):n},tk=function(e,t){var n=e.page.borderBox;return FC(e.descriptor.id,t)?rC(n,tC(t.displacedBy.point)):n},nk=Object(R_.a)((function(e,t){var n=t[e.line];return{value:n,point:nC(e.line,n)}})),ak=function(e,t){return Object(c_.a)({},e,{scroll:Object(c_.a)({},e.scroll,{max:t})})},ik=function(e,t,n){var a=e.frame;_C(t,e)&&B_(!1),e.subject.withPlaceholder&&B_(!1);var i=nk(e.axis,t.displaceBy).point,s=function(e,t,n){var a=e.axis;if("virtual"===e.descriptor.mode)return nC(a.line,t[a.line]);var i=e.subject.page.contentBox[a.size],s=yC(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[a.size]}),0)+t[a.line]-i;return s<=0?null:nC(a.line,s)}(e,i,n),r={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!a){var o=cC({page:e.subject.page,withPlaceholder:r,axis:e.axis,frame:e.frame});return Object(c_.a)({},e,{subject:o})}var l=s?X_(a.scroll.max,s):a.scroll.max,c=ak(a,l),d=cC({page:e.subject.page,withPlaceholder:r,axis:e.axis,frame:c});return Object(c_.a)({},e,{subject:d,frame:c})},sk=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,a=e.draggable,i=e.isOver,s=e.draggables,r=e.droppables,o=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,a=e.source,i=e.droppables,s=e.viewport,r=a.subject.active;if(!r)return null;var o=a.axis,l=TC(r[o.start],r[o.end]),c=bC(i).filter((function(e){return e!==a})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return SC(s.frame)(ZC(e))})).filter((function(e){var n=ZC(e);return t?r[o.crossAxisEnd]<n[o.crossAxisEnd]:n[o.crossAxisStart]<r[o.crossAxisStart]})).filter((function(e){var t=ZC(e),n=TC(t[o.start],t[o.end]);return l(t[o.start])||l(t[o.end])||n(r[o.start])||n(r[o.end])})).sort((function(e,n){var a=ZC(e)[o.crossAxisStart],i=ZC(n)[o.crossAxisStart];return t?a-i:i-a})).filter((function(e,t,n){return ZC(e)[o.crossAxisStart]===ZC(n[0])[o.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter((function(e){return TC(ZC(e)[o.start],ZC(e)[o.end])(n[o.line])}));return 1===d.length?d[0]:d.length>1?d.sort((function(e,t){return ZC(e)[o.start]-ZC(t)[o.start]}))[0]:c.sort((function(e,t){var a=iC(n,oC(ZC(e))),i=iC(n,oC(ZC(t)));return a!==i?a-i:ZC(e)[o.start]-ZC(t)[o.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:r,viewport:o});if(!c)return null;var d=yC(c.descriptor.id,s),u=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,a=e.insideDestination,i=e.draggable,s=e.draggables,r=e.destination,o=e.viewport,l=e.afterCritical;if(!n){if(a.length)return null;var c={displaced:kC,displacedBy:CC,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:0}}},d=WC({impact:c,draggable:i,droppable:r,draggables:s,afterCritical:l}),u=_C(i,r)?r:ik(r,i,s);return JC({draggable:i,destination:u,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,g=Boolean(t[r.axis.line]<=n.page.borderBox.center[r.axis.line]),h=(p=n.descriptor.index,n.descriptor.id===i.descriptor.id||g?p:p+1),m=nk(r.axis,i.displaceBy);return LC({draggable:i,insideDestination:a,destination:r,viewport:o,displacedBy:m,last:kC,index:h})}({previousPageBorderBoxCenter:n,destination:c,draggable:a,draggables:s,moveRelativeTo:function(e){var t=e.pageBorderBoxCenter,n=e.viewport,a=e.destination,i=e.insideDestination,s=e.afterCritical;return i.filter((function(e){return NC({target:tk(e,s),destination:a,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=aC(t,GC(a,ek(e,s))),r=aC(t,GC(a,ek(n,s)));return i<r?-1:r<i?1:e.descriptor.index-n.descriptor.index}))[0]||null}({pageBorderBoxCenter:n,viewport:o,destination:c,insideDestination:d,afterCritical:l}),insideDestination:d,viewport:o,afterCritical:l});if(!u)return null;var p=WC({impact:u,draggable:a,droppable:c,draggables:s,afterCritical:l});return{clientSelection:QC({pageBorderBoxCenter:p,draggable:a,viewport:o}),impact:u,scrollJumpRequest:null}},rk=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},ok=function(e){var t=e.state,n=e.type,a=function(e,t){var n=rk(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(a),s=t.dimensions.droppables[t.critical.droppable.id],r=a||s,o=r.axis.direction,l="vertical"===o&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===o&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,d=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,p=t.dimensions,g=p.draggables,h=p.droppables;return l?XC({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:r,draggables:g,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):sk({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:r,draggables:g,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function lk(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function ck(e){var t=TC(e.top,e.bottom),n=TC(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function dk(e){var t=e.pageBorderBox,n=e.draggable,a=e.droppables,i=bC(a).filter((function(e){if(!e.isEnabled)return!1;var n,a,i=e.subject.active;if(!i)return!1;if(a=i,!((n=t).left<a.right&&n.right>a.left&&n.top<a.bottom&&n.bottom>a.top))return!1;if(ck(i)(t.center))return!0;var s=e.axis,r=i.center[s.crossAxisLine],o=t[s.crossAxisStart],l=t[s.crossAxisEnd],c=TC(i[s.crossAxisStart],i[s.crossAxisEnd]),d=c(o),u=c(l);return!d&&!u||(d?o<r:l>r)}));return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,a=e.candidates,i=n.page.borderBox.center,s=a.map((function(e){var n=e.axis,a=nC(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:aC(i,a)}})).sort((function(e,t){return t.distance-e.distance}));return s[0]?s[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var uk=function(e,t){return k_(rC(e,t))};function pk(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var gk=function(e){var t=e.pageOffset,n=e.draggable,a=e.draggables,i=e.droppables,s=e.previousImpact,r=e.viewport,o=e.afterCritical,l=uk(n.page.borderBox,t),c=dk({pageBorderBox:l,draggable:n,droppables:i});if(!c)return wC;var d,u,p=i[c],g=yC(p.descriptor.id,a),h=(d=l,(u=p.frame)?uk(d,u.scroll.diff.value):d);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,a=e.previousImpact,i=e.destination,s=e.insideDestination,r=e.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,l=nk(i.axis,t.displaceBy),c=l.value,d=n[o.start],u=n[o.end],p=gC(xC(t,s),(function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[o.size]/4,s=FC(t,r),l=pk({displaced:a.displaced,id:t});return s?l?u>n[o.start]+i&&u<n[o.end]-i:d>n[o.start]-c+i&&d<n[o.end]-c-i:l?u>n[o.start]+c+i&&u<n[o.end]+c-i:d>n[o.start]+i&&d<n[o.end]-i}));return p?{displacedBy:l,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:s,destination:p,insideDestination:g,afterCritical:o})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,a=e.destination,i=e.insideDestination,s=e.last,r=e.viewport,o=e.afterCritical,l=a.axis,c=nk(a.axis,n.displaceBy),d=c.value,u=t[l.start],p=t[l.end],g=function(e){var t=e.draggable,n=e.closest,a=e.inHomeList;return n?a&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:gC(xC(n,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],a=FC(t,o),i=pk({displaced:s,id:t});return a?i?p<=n:u<n-d:i?p<=n+d:u<n})),inHomeList:_C(n,a)});return LC({draggable:n,insideDestination:i,destination:a,viewport:r,last:s,displacedBy:c,index:g})}({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:p,insideDestination:g,last:s.displaced,viewport:r,afterCritical:o})},hk=function(e,t){var n;return Object(c_.a)({},e,((n={})[t.descriptor.id]=t,n))},mk=function(e){var t=e.previousImpact,n=e.impact,a=e.droppables,i=rk(t),s=rk(n);if(!i)return a;if(i===s)return a;var r=a[i];if(!r.subject.withPlaceholder)return a;var o=function(e){var t=e.subject.withPlaceholder;t||B_(!1);var n=e.frame;if(!n){var a=cC({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Object(c_.a)({},e,{subject:a})}var i=t.oldFrameMaxScroll;i||B_(!1);var s=ak(n,i),r=cC({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return Object(c_.a)({},e,{subject:r,frame:s})}(r);return hk(a,o)},fk=function(e){var t=e.state,n=e.clientSelection,a=e.dimensions,i=e.viewport,s=e.impact,r=e.scrollJumpRequest,o=i||t.viewport,l=a||t.dimensions,c=n||t.current.client.selection,d=Z_(c,t.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:X_(t.initial.client.borderBoxCenter,d)},p={selection:X_(u.selection,o.scroll.current),borderBoxCenter:X_(u.borderBoxCenter,o.scroll.current),offset:X_(u.offset,o.scroll.diff.value)},g={client:u,page:p};if("COLLECTING"===t.phase)return Object(c_.a)({phase:"COLLECTING"},t,{dimensions:l,viewport:o,current:g});var h=l.draggables[t.critical.draggable.id],m=s||gk({pageOffset:p.offset,draggable:h,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),f=function(e){var t=e.draggable,n=e.draggables,a=e.droppables,i=e.previousImpact,s=e.impact,r=mk({previousImpact:i,impact:s,droppables:a}),o=rk(s);if(!o)return r;var l=a[o];if(_C(t,l))return r;if(l.subject.withPlaceholder)return r;var c=ik(l,t,n);return hk(r,c)}({draggable:h,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return Object(c_.a)({},t,{current:g,dimensions:{draggables:l.draggables,droppables:f},impact:m,viewport:o,scrollJumpRequest:r||null,forceShouldAnimate:!r&&null})};var bk=function(e){var t=e.impact,n=e.viewport,a=e.draggables,i=e.destination,s=e.forceShouldAnimate,r=t.displaced,o=RC({afterDragging:function(e,t){return e.map((function(e){return t[e]}))}(r.all,a),destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:r});return Object(c_.a)({},t,{displaced:o})},jk=function(e){var t=e.impact,n=e.draggable,a=e.droppable,i=e.draggables,s=e.viewport,r=e.afterCritical,o=WC({impact:t,draggable:n,draggables:i,droppable:a,afterCritical:r});return QC({pageBorderBoxCenter:o,draggable:n,viewport:s})},yk=function(e){var t=e.state,n=e.dimensions,a=e.viewport;"SNAP"!==t.movementMode&&B_(!1);var i=t.impact,s=a||t.viewport,r=n||t.dimensions,o=r.draggables,l=r.droppables,c=o[t.critical.draggable.id],d=rk(i);d||B_(!1);var u=l[d],p=bk({impact:i,viewport:s,destination:u,draggables:o}),g=jk({impact:p,draggable:c,droppable:u,draggables:o,viewport:s,afterCritical:t.afterCritical});return fk({impact:p,clientSelection:g,state:t,dimensions:r,viewport:s})},Ok=function(e){var t=e.draggable,n=e.home,a=e.draggables,i=e.viewport,s=nk(n.axis,t.displaceBy),r=yC(n.descriptor.id,a),o=r.indexOf(t);-1===o&&B_(!1);var l,c=r.slice(o+1),d=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),u={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:s,effected:d};return{impact:{displaced:RC({afterDragging:c,destination:n,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:u}},vk=function(e){0},xk=function(e){0},_k=function(e){var t=e.additions,n=e.updatedDroppables,a=e.viewport,i=a.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||B_(!1),t}(n[t]).scroll.diff.value;return function(e){var t=e.draggable,n=e.offset,a=e.initialWindowScroll,i=M_(t.client,n),s=D_(i,a);return Object(c_.a)({},t,{placeholder:Object(c_.a)({},t.placeholder,{client:i}),client:i,page:s})}({draggable:e,offset:X_(i,s),initialWindowScroll:a.scroll.initial})}))},Ck=function(e){return"SNAP"===e.movementMode},kk=function(e,t,n){var a=function(e,t){return{draggables:e.draggables,droppables:hk(e.droppables,t)}}(e.dimensions,t);return!Ck(e)||n?fk({state:e,dimensions:a}):yk({state:e,dimensions:a})};function wk(e){return e.isDragging&&"SNAP"===e.movementMode?Object(c_.a)({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Tk={phase:"IDLE",completed:null,shouldFlush:!1},Sk=function(e,t){if(void 0===e&&(e=Tk),"FLUSH"===t.type)return Object(c_.a)({},Tk,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&B_(!1);var n=t.payload,a=n.critical,i=n.clientSelection,s=n.viewport,r=n.dimensions,o=n.movementMode,l=r.draggables[a.draggable.id],c=r.droppables[a.droppable.id],d={selection:i,borderBoxCenter:l.client.borderBox.center,offset:J_},u={client:d,page:{selection:X_(d.selection,s.scroll.initial),borderBoxCenter:X_(d.selection,s.scroll.initial),offset:X_(d.selection,s.scroll.diff.value)}},p=bC(r.droppables).every((function(e){return!e.isFixedOnPage})),g=Ok({draggable:l,home:c,draggables:r.draggables,viewport:s}),h=g.impact;return{phase:"DRAGGING",isDragging:!0,critical:a,movementMode:o,dimensions:r,initial:u,current:u,isWindowScrollAllowed:p,impact:h,afterCritical:g.afterCritical,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&B_(!1),Object(c_.a)({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&B_(!1),function(e){var t=e.state,n=e.published;vk();var a=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return dC(n,e.scroll)})),i=Object(c_.a)({},t.dimensions.droppables,{},mC(a)),s=fC(_k({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),r=Object(c_.a)({},t.dimensions.draggables,{},s);n.removals.forEach((function(e){delete r[e]}));var o={droppables:i,draggables:r},l=rk(t.impact),c=l?o.droppables[l]:null,d=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],p=Ok({draggable:d,home:u,draggables:r,viewport:t.viewport}),g=p.impact,h=p.afterCritical,m=c&&c.isCombineEnabled?t.impact:g,f=gk({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h});xk();var b=Object(c_.a)({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:f,onLiftImpact:g,dimensions:o,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?b:Object(c_.a)({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;lk(e)||B_(!1);var m=t.payload.client;return eC(m,e.current.client.selection)?e:fk({state:e,clientSelection:m,impact:Ck(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return wk(e);if("COLLECTING"===e.phase)return wk(e);lk(e)||B_(!1);var f=t.payload,b=f.id,j=f.newScroll,y=e.dimensions.droppables[b];if(!y)return e;var O=dC(y,j);return kk(e,O,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;lk(e)||B_(!1);var v=t.payload,x=v.id,_=v.isEnabled,C=e.dimensions.droppables[x];C||B_(!1),C.isEnabled===_&&B_(!1);var k=Object(c_.a)({},C,{isEnabled:_});return kk(e,k,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;lk(e)||B_(!1);var w=t.payload,T=w.id,S=w.isCombineEnabled,E=e.dimensions.droppables[T];E||B_(!1),E.isCombineEnabled===S&&B_(!1);var I=Object(c_.a)({},E,{isCombineEnabled:S});return kk(e,I,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;lk(e)||B_(!1),e.isWindowScrollAllowed||B_(!1);var M=t.payload.newScroll;if(eC(e.viewport.scroll.current,M))return wk(e);var D=KC(e.viewport,M);return Ck(e)?yk({state:e,viewport:D}):fk({state:e,viewport:D})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!lk(e))return e;var A=t.payload.maxScroll;if(eC(A,e.viewport.scroll.max))return e;var N=Object(c_.a)({},e.viewport,{scroll:Object(c_.a)({},e.viewport.scroll,{max:A})});return Object(c_.a)({phase:"DRAGGING"},e,{viewport:N})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&B_(!1);var R=ok({state:e,type:t.type});return R?fk({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var P=t.payload.reason;return"COLLECTING"!==e.phase&&B_(!1),Object(c_.a)({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:P})}if("DROP_ANIMATE"===t.type){var L=t.payload,F=L.completed,U=L.dropDuration,$=L.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&B_(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:U,newHomeClientOffset:$,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},Ek=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Ik=function(){return{type:"COLLECTION_STARTING",payload:null}},Mk=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Dk=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Ak=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Nk=function(e){return{type:"MOVE",payload:e}},Rk=function(){return{type:"MOVE_UP",payload:null}},Pk=function(){return{type:"MOVE_DOWN",payload:null}},Lk=function(){return{type:"MOVE_RIGHT",payload:null}},Fk=function(){return{type:"MOVE_LEFT",payload:null}},Uk=function(e){return{type:"DROP_COMPLETE",payload:e}},$k=function(e){return{type:"DROP",payload:e}},Bk=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Vk="cubic-bezier(.2,1,.1,1)",zk={drop:0,combining:.7},Hk={drop:.75},qk=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Gk={fluid:"opacity "+qk,snap:"transform "+qk+", opacity "+qk,drop:function(e){var t=e+"s "+Vk;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+qk,placeholder:"height "+qk+", width "+qk+", margin "+qk},Wk=function(e){return eC(e,J_)?null:"translate("+e.x+"px, "+e.y+"px)"},Kk=Wk,Yk=function(e,t){var n=Wk(e);return n?t?n+" scale("+Hk.drop+")":n:null},Qk=.33,Jk=.55,Xk=Jk-Qk,Zk=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(a){if("DROP"===a.type){var i=t(),s=a.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&B_(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&B_(!1);var r=i.critical,o=i.dimensions,l=o.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,a=e.lastImpact,i=e.home,s=e.viewport,r=e.onLiftImpact;return a.at&&"DROP"===n?"REORDER"===a.at.type?{impact:a,didDropInsideDroppable:!0}:{impact:Object(c_.a)({},a,{displaced:kC}),didDropInsideDroppable:!0}:{impact:bk({draggables:t,impact:r,destination:i,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=c.impact,u=c.didDropInsideDroppable,p=u?OC(d):null,g=u?vC(d):null,h={index:r.draggable.index,droppableId:r.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:h,reason:s,mode:i.movementMode,destination:p,combine:g},f=function(e){var t=e.impact,n=e.draggable,a=e.dimensions,i=e.viewport,s=e.afterCritical,r=a.draggables,o=a.droppables,l=rk(t),c=l?o[l]:null,d=o[n.descriptor.droppableId],u=jk({impact:t,draggable:n,draggables:r,afterCritical:s,droppable:c||d,viewport:i});return Z_(u,n.client.borderBox.center)}({impact:d,draggable:l,dimensions:o,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:d};if(!eC(i.current.client.offset,f)||Boolean(m.combine)){var j=function(e){var t=e.current,n=e.destination,a=e.reason,i=aC(t,n);if(i<=0)return Qk;if(i>=1500)return Jk;var s=Qk+Xk*(i/1500);return Number(("CANCEL"===a?.6*s:s).toFixed(2))}({current:i.current.client.offset,destination:f,reason:s});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:f,dropDuration:j,completed:b}))}else n(Uk({completed:b}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(a)}}},ew=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tw(e){var t=e.onWindowScroll;var n,a=P_((function(){t(ew())})),i=(n=a,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||n()}}),s=F_;function r(){return s!==F_}return{start:function(){r()&&B_(!1),s=U_(window,[i])},stop:function(){r()||B_(!1),a.cancel(),s(),s=F_},isActive:r}}var nw=function(e){var t=tw({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},aw=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=pC(e,(function(e){return e.timerId===t}));-1===n&&B_(!1),e.splice(n,1)[0].callback()}(n)})),a={timerId:n,callback:t};e.push(a)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},iw=function(e,t){vk(),t(),xk()},sw=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},rw=function(e,t,n,a){if(e){var i=function(e){var t=!1,n=!1,a=setTimeout((function(){n=!0})),i=function(i){t||n||(t=!0,e(i),clearTimeout(a))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(a(t))}else n(a(t))},ow=function(e,t){var n=function(e,t){var n=aw(),a=null,i=function(n){a||B_(!1),a=null,iw(0,(function(){return rw(e().onDragEnd,n,t,Q_)}))};return{beforeCapture:function(t,n){a&&B_(!1),iw(0,(function(){var a=e().onBeforeCapture;a&&a({draggableId:t,mode:n})}))},beforeStart:function(t,n){a&&B_(!1),iw(0,(function(){var a=e().onBeforeDragStart;a&&a(sw(t,n))}))},start:function(i,s){a&&B_(!1);var r=sw(i,s);a={mode:s,lastCritical:i,lastLocation:r.source,lastCombine:null},n.add((function(){iw(0,(function(){return rw(e().onDragStart,r,t,K_)}))}))},update:function(i,s){var r=OC(s),o=vC(s);a||B_(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,a=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&a}(i,a.lastCritical);l&&(a.lastCritical=i);var c,d,u=(c=a.lastLocation,d=r,!(null==c&&null==d||null!=c&&null!=d&&c.droppableId===d.droppableId&&c.index===d.index));u&&(a.lastLocation=r);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&(e.draggableId===t.draggableId&&e.droppableId===t.droppableId)}(a.lastCombine,o);if(p&&(a.lastCombine=o),l||u||p){var g=Object(c_.a)({},sw(i,a.mode),{combine:o,destination:r});n.add((function(){iw(0,(function(){return rw(e().onDragUpdate,g,t,Y_)}))}))}},flush:function(){a||B_(!1),n.flush()},drop:i,abort:function(){if(a){var e=Object(c_.a)({},sw(a.lastCritical,a.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(a){if("BEFORE_INITIAL_CAPTURE"!==a.type){if("INITIAL_PUBLISH"===a.type){var i=a.payload.critical;return n.beforeStart(i,a.payload.movementMode),t(a),void n.start(i,a.payload.movementMode)}if("DROP_COMPLETE"===a.type){var s=a.payload.completed.result;return n.flush(),t(a),void n.drop(s)}if(t(a),"FLUSH"!==a.type){var r=e.getState();"DRAGGING"===r.phase&&n.update(r.critical,r.impact)}else n.abort()}else n.beforeCapture(a.payload.draggableId,a.payload.movementMode)}}}},lw=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var a=e.getState();"DROP_ANIMATING"!==a.phase&&B_(!1),e.dispatch(Uk({completed:a.completed}))}else t(n)}}},cw=function(e){var t=null,n=null;return function(a){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),a(i),"DROP_ANIMATE"===i.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=U_(window,[s])}))}}}},dw=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var a=e.getState();"DROP_PENDING"===a.phase&&(a.isWaiting||e.dispatch($k({reason:a.reason})))}}}},uw=O_,pw=function(e){var t,n=e.dimensionMarshal,a=e.focusMarshal,i=e.styleMarshal,s=e.getResponders,r=e.announce,o=e.autoScroller;return h_(Sk,uw(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return y_({},n,{dispatch:a=O_.apply(void 0,s)(n.dispatch)})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,a=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var s=i.payload,r=s.id,o=s.clientSelection,l=s.movementMode,c=n();"DROP_ANIMATING"===c.phase&&a(Uk({completed:c.completed})),"IDLE"!==n().phase&&B_(!1),a({type:"FLUSH",payload:null}),a({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:r,movementMode:l}});var d={draggableId:r,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},u=e.startPublishing(d),p=u.critical,g=u.dimensions,h=u.viewport;a(function(e){return{type:"INITIAL_PUBLISH",payload:e}}({critical:p,dimensions:g,clientSelection:o,movementMode:l,viewport:h}))}else t(i)}}}}(n),Zk,lw,cw,dw,function(e){return function(t){return function(n){return function(a){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(a))return e.stop(),void n(a);if("INITIAL_PUBLISH"===a.type){n(a);var i=t.getState();return"DRAGGING"!==i.phase&&B_(!1),void e.start(i)}n(a),e.scroll(t.getState())}}}}(o),nw,function(e){var t=!1;return function(){return function(n){return function(a){if("INITIAL_PUBLISH"===a.type)return t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),n(a),void e.tryRestoreFocusRecorded();if(n(a),t){if("FLUSH"===a.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===a.type){t=!1;var i=a.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(a),ow(s,r))))};var gw=function(e){var t=e.scrollHeight,n=e.scrollWidth,a=e.height,i=e.width,s=Z_({x:n,y:t},{x:i,y:a});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},hw=function(){var e=document.documentElement;return e||B_(!1),e},mw=function(){var e=hw();return gw({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},fw=function(e){var t=e.critical,n=e.scrollOptions,a=e.registry;vk();var i,s,r,o,l,c,d,u=(i=ew(),s=mw(),r=i.y,o=i.x,l=hw(),c=l.clientWidth,d=l.clientHeight,{frame:k_({top:r,left:o,right:o+c,bottom:r+d}),scroll:{initial:i,current:i,max:s,diff:{value:J_,displacement:J_}}}),p=u.scroll.current,g=t.droppable,h=a.droppable.getAllByType(g.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,n)})),m=a.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(p)})),f={draggables:fC(m),droppables:mC(h)};return xk(),{dimensions:f,critical:t,viewport:u}};function bw(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var jw,yw,Ow=function(e,t){var n=null,a=function(e){var t=e.registry,n=e.callbacks,a={additions:{},removals:{},modified:{}},i=null,s=function(){i||(n.collectionStarting(),i=requestAnimationFrame((function(){i=null,vk();var e=a,s=e.additions,r=e.removals,o=e.modified,l=Object.keys(s).map((function(e){return t.draggable.getById(e).getDimension(J_)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(o).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),d={additions:l,removals:Object.keys(r),modified:c};a={additions:{},removals:{},modified:{}},xk(),n.publish(d)})))};return{add:function(e){var t=e.descriptor.id;a.additions[t]=e,a.modified[e.descriptor.droppableId]=!0,a.removals[t]&&delete a.removals[t],s()},remove:function(e){var t=e.descriptor;a.removals[t.id]=!0,a.modified[t.droppableId]=!0,a.additions[t.id]&&delete a.additions[t.id],s()},stop:function(){i&&(cancelAnimationFrame(i),i=null,a={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||B_(!1);var i=n.critical.draggable;"ADDITION"===t.type&&bw(e,i,t.value)&&a.add(t.value),"REMOVAL"===t.type&&bw(e,i,t.value)&&a.remove(t.value)};return{updateDroppableIsEnabled:function(a,i){e.droppable.exists(a)||B_(!1),n&&t.updateDroppableIsEnabled({id:a,isEnabled:i})},updateDroppableIsCombineEnabled:function(a,i){n&&(e.droppable.exists(a)||B_(!1),t.updateDroppableIsCombineEnabled({id:a,isCombineEnabled:i}))},scrollDroppable:function(t,a){n&&e.droppable.getById(t).callbacks.scroll(a)},updateDroppableScroll:function(a,i){n&&(e.droppable.exists(a)||B_(!1),t.updateDroppableScroll({id:a,newScroll:i}))},startPublishing:function(t){n&&B_(!1);var a=e.draggable.getById(t.draggableId),s=e.droppable.getById(a.descriptor.droppableId),r={draggable:a.descriptor,droppable:s.descriptor},o=e.subscribe(i);return n={critical:r,unsubscribe:o},fw({critical:r,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){a.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},vw=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},xw=function(e){window.scrollBy(e.x,e.y)},_w=Object(R_.a)((function(e){return bC(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),Cw=function(e){var t=e.center,n=e.destination,a=e.droppables;if(n){var i=a[n];return i.frame?i:null}return function(e,t){return gC(_w(t),(function(t){return t.frame||B_(!1),ck(t.frame.pageMarginBox)(e)}))}(t,a)},kw=.25,ww=.05,Tw=28,Sw=function(e){return Math.pow(e,2)},Ew={stopDampeningAt:1200,accelerateAt:360},Iw=function(e){var t=e.startOfRange,n=e.endOfRange,a=e.current,i=n-t;return 0===i?0:(a-t)/i},Mw=Ew.accelerateAt,Dw=Ew.stopDampeningAt,Aw=function(e){var t=e.distanceToEdge,n=e.thresholds,a=e.dragStartTime,i=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Tw;if(e===t.startScrollingFrom)return 1;var n=Iw({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=Tw*Sw(1-n);return Math.ceil(a)}(t,n);return 0===s?0:i?Math.max(function(e,t){var n=t,a=Dw,i=Date.now()-n;if(i>=Dw)return e;if(i<Mw)return 1;var s=Iw({startOfRange:Mw,endOfRange:a,current:i}),r=e*Sw(s);return Math.ceil(r)}(s,a),1):s},Nw=function(e){var t=e.container,n=e.distanceToEdges,a=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,r=function(e,t){return{startScrollingFrom:e[t.size]*kw,maxScrollValueAt:e[t.size]*ww}}(t,i);return n[i.end]<n[i.start]?Aw({distanceToEdge:n[i.end],thresholds:r,dragStartTime:a,shouldUseTimeDampening:s}):-1*Aw({distanceToEdge:n[i.start],thresholds:r,dragStartTime:a,shouldUseTimeDampening:s})},Rw=sC((function(e){return 0===e?0:e})),Pw=function(e){var t=e.dragStartTime,n=e.container,a=e.subject,i=e.center,s=e.shouldUseTimeDampening,r={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},o=Nw({container:n,distanceToEdges:r,dragStartTime:t,axis:IC,shouldUseTimeDampening:s}),l=Nw({container:n,distanceToEdges:r,dragStartTime:t,axis:MC,shouldUseTimeDampening:s}),c=Rw({x:l,y:o});if(eC(c,J_))return null;var d=function(e){var t=e.container,n=e.subject,a=e.proposedScroll,i=n.height>t.height,s=n.width>t.width;return s||i?s&&i?null:{x:s?0:a.x,y:i?0:a.y}:a}({container:n,subject:a,proposedScroll:c});return d?eC(d,J_)?null:d:null},Lw=sC((function(e){return 0===e?0:e>0?1:-1})),Fw=(jw=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,a=e.change,i=X_(t,a),s={x:jw(i.x,n.x),y:jw(i.y,n.y)};return eC(s,J_)?null:s}),Uw=function(e){var t=e.max,n=e.current,a=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},s=Lw(a),r=Fw({max:i,current:n,change:s});return!r||(0!==s.x&&0===r.x||0!==s.y&&0===r.y)},$w=function(e,t){return Uw({current:e.scroll.current,max:e.scroll.max,change:t})},Bw=function(e,t){var n=e.frame;return!!n&&Uw({current:n.scroll.current,max:n.scroll.max,change:t})},Vw=function(e){var t=e.state,n=e.dragStartTime,a=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,r=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,a=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,r=Pw({dragStartTime:i,container:t.frame,subject:n,center:a,shouldUseTimeDampening:s});return r&&$w(t,r)?r:null}({dragStartTime:n,viewport:t.viewport,subject:o,center:r,shouldUseTimeDampening:a});if(l)return void i(l)}var c=Cw({center:r,destination:rk(t.impact),droppables:t.dimensions.droppables});if(c){var d=function(e){var t=e.droppable,n=e.subject,a=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,r=t.frame;if(!r)return null;var o=Pw({dragStartTime:i,container:r.pageMarginBox,subject:n,center:a,shouldUseTimeDampening:s});return o&&Bw(t,o)?o:null}({dragStartTime:n,droppable:c,subject:o,center:r,shouldUseTimeDampening:a});d&&s(c.descriptor.id,d)}},zw=function(e){var t=e.move,n=e.scrollDroppable,a=e.scrollWindow,i=function(e,t){if(!Bw(e,t))return t;var a=function(e,t){var n=e.frame;return n&&Bw(e,t)?Fw({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!a)return n(e.descriptor.id,t),null;var i=Z_(t,a);return n(e.descriptor.id,i),Z_(t,i)},s=function(e,t,n){if(!e)return n;if(!$w(t,n))return n;var i=function(e,t){if(!$w(e,t))return null;var n=e.scroll.max,a=e.scroll.current;return Fw({current:a,max:n,change:t})}(t,n);if(!i)return a(n),null;var s=Z_(n,i);return a(s),Z_(n,s)};return function(e){var n=e.scrollJumpRequest;if(n){var a=rk(e.impact);a||B_(!1);var r=i(e.dimensions.droppables[a],n);if(r){var o=e.viewport,l=s(e.isWindowScrollAllowed,o,r);l&&function(e,n){var a=X_(e.current.client.selection,n);t({client:a})}(e,l)}}}},Hw=function(e){var t=e.scrollDroppable,n=e.scrollWindow,a=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,a=P_(t),i=P_(n),s=null,r=function(e){s||B_(!1);var t=s,n=t.shouldUseTimeDampening,r=t.dragStartTime;Vw({state:e,scrollWindow:a,scrollDroppable:i,dragStartTime:r,shouldUseTimeDampening:n})};return{start:function(e){vk(),s&&B_(!1);var t=Date.now(),n=!1,a=function(){n=!0};Vw({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:a,scrollDroppable:a}),s={dragStartTime:t,shouldUseTimeDampening:n},xk(),n&&r(e)},stop:function(){s&&(a.cancel(),i.cancel(),s=null)},scroll:r}}({scrollWindow:n,scrollDroppable:t}),s=zw({move:a,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):i.scroll(e))},start:i.start,stop:i.stop}},qw={base:yw="data-rbd-drag-handle",draggableId:yw+"-draggable-id",contextId:yw+"-context-id"},Gw=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ww=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Kw={contextId:"data-rbd-scroll-container-context-id"},Yw=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Qw="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?a.useLayoutEffect:a.useEffect,Jw=function(){var e=document.querySelector("head");return e||B_(!1),e},Xw=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Zw(e,t){var n=x_((function(){return function(e){var t,n,a,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),s=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(qw.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),r=[(a="\n      transition: "+Gk.outOfTheWay+";\n    ",{selector:i(Gw.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}),s,{selector:i(Ww.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Yw(r,"always"),resting:Yw(r,"resting"),dragging:Yw(r,"dragging"),dropAnimating:Yw(r,"dropAnimating"),userCancel:Yw(r,"userCancel")}}(e)}),[e]),i=Object(a.useRef)(null),s=Object(a.useRef)(null),r=__(Object(R_.a)((function(e){var t=s.current;t||B_(!1),t.textContent=e})),[]),o=__((function(e){var t=i.current;t||B_(!1),t.textContent=e}),[]);Qw((function(){(i.current||s.current)&&B_(!1);var a=Xw(t),l=Xw(t);return i.current=a,s.current=l,a.setAttribute("data-rbd-always",e),l.setAttribute("data-rbd-dynamic",e),Jw().appendChild(a),Jw().appendChild(l),o(n.always),r(n.resting),function(){var e=function(e){var t=e.current;t||B_(!1),Jw().removeChild(t),e.current=null};e(i),e(s)}}),[t,o,r,n.always,n.resting,e]);var l=__((function(){return r(n.dragging)}),[r,n.dragging]),c=__((function(e){r("DROP"!==e?n.userCancel:n.dropAnimating)}),[r,n.dropAnimating,n.userCancel]),d=__((function(){s.current&&r(n.resting)}),[r,n.resting]);return x_((function(){return{dragging:l,dropping:c,resting:d}}),[l,c,d])}var eT=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function tT(e){return e instanceof eT(e).HTMLElement}function nT(e,t){var n="["+qw.contextId+'="'+e+'"]',a=hC(document.querySelectorAll(n));if(!a.length)return null;var i=gC(a,(function(e){return e.getAttribute(qw.draggableId)===t}));return i&&tT(i)?i:null}function aT(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function a(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var a=e.draggables[n.descriptor.id];a&&a.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,s=a(i);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=a(e);return t||B_(!1),t},findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(t){return uC(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||B_(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return uC(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var iT=i.a.createContext(null),sT=function(){var e=document.body;return e||B_(!1),e},rT={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var oT=0,lT={separator:"::"};function cT(e,t){return void 0===t&&(t=lT),x_((function(){return""+e+t.separator+oT++}),[t.separator,e])}var dT=i.a.createContext(null);function uT(e){0}function pT(e,t){uT()}function gT(){pT()}function hT(e){var t=Object(a.useRef)(e);return Object(a.useEffect)((function(){t.current=e})),t}var mT,fT=((mT={})[13]=!0,mT[9]=!0,mT),bT=function(e){fT[e.keyCode]&&e.preventDefault()},jT=function(){var e="visibilitychange";return"undefined"==typeof document?e:gC([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var yT,OT={type:"IDLE"};function vT(e){var t=e.cancel,n=e.completed,a=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,s=e.clientY;if(0===t){var r={x:n,y:s},o=a();if("DRAGGING"===o.type)return e.preventDefault(),void o.actions.move(r);"PENDING"!==o.type&&B_(!1);var l=o.point;if(c=l,d=r,Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5){var c,d;e.preventDefault();var u=o.actions.fluidLift(r);i({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var i=a();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===a().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==a().type)return 27===e.keyCode?(e.preventDefault(),void t()):void bT(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===a().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=a();"IDLE"===n.type&&B_(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:jT,fn:t}]}function xT(){}var _T=((yT={})[34]=!0,yT[33]=!0,yT[36]=!0,yT[35]=!0,yT);function CT(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(a){return 27===a.keyCode?(a.preventDefault(),void n()):32===a.keyCode?(a.preventDefault(),t(),void e.drop()):40===a.keyCode?(a.preventDefault(),void e.moveDown()):38===a.keyCode?(a.preventDefault(),void e.moveUp()):39===a.keyCode?(a.preventDefault(),void e.moveRight()):37===a.keyCode?(a.preventDefault(),void e.moveLeft()):void(_T[a.keyCode]?a.preventDefault():bT(a))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:jT,fn:n}]}var kT={type:"IDLE"};var wT={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function TT(e,t){var n=t.target;return!!tT(n)&&function e(t,n){if(null==n)return!1;if(Boolean(wT[n.tagName.toLowerCase()]))return!0;var a=n.getAttribute("contenteditable");return"true"===a||""===a||n!==t&&e(t,n.parentElement)}(e,n)}var ST=function(e){return k_(e.getBoundingClientRect()).center};var ET="undefined"==typeof document?"matches":gC(["matches","msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||"matches";function IT(e,t){return e.closest?e.closest(t):function e(t,n){return null==t?null:t[ET](n)?t:e(t.parentElement,n)}(e,t)}function MT(e,t){var n,a=t.target;if(!((n=a)instanceof eT(n).Element))return null;var i=IT(a,function(e){return"["+qw.contextId+'="'+e+'"]'}(e));return i&&tT(i)?i:null}function DT(e){e.preventDefault()}function AT(e){var t=e.expected,n=e.phase,a=e.isLockActive;e.shouldWarn;return!!a()&&t===n}function NT(e){var t=e.lockAPI,n=e.store,a=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=a.draggable.findById(i);return!!s&&(!!s.options.isEnabled&&!!vw(n.getState(),i))}function RT(e){var t=e.lockAPI,n=e.contextId,a=e.store,i=e.registry,s=e.draggableId,r=e.forceSensorStop,o=e.sourceEvent;if(!NT({lockAPI:t,store:a,registry:i,draggableId:s}))return null;var l=i.draggable.getById(s),c=function(e,t){var n="["+Gw.contextId+'="'+e+'"]',a=gC(hC(document.querySelectorAll(n)),(function(e){return e.getAttribute(Gw.id)===t}));return a&&tT(a)?a:null}(n,l.descriptor.id);if(!c)return null;if(o&&!l.options.canDragInteractiveElements&&TT(c,o))return null;var d=t.claim(r||F_),u="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function g(){return t.isActive(d)}var h=function(e,t){AT({expected:e,phase:u,isLockActive:g,shouldWarn:!0})&&a.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),u="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var s=U_(window,[{eventName:"click",fn:DT,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}n(),a.dispatch($k({reason:t}))}return"PRE_DRAG"!==u&&(n(),"PRE_DRAG"!==u&&B_(!1)),a.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),u="DRAGGING",Object(c_.a)({isActive:function(){return AT({expected:"DRAGGING",phase:u,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return AT({expected:"PRE_DRAG",phase:u,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=P_((function(e){h((function(){return Nk({client:e})}))})),n=m({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}});return Object(c_.a)({},n,{move:t})},snapLift:function(){var e={moveUp:function(){return h(Rk)},moveRight:function(){return h(Lk)},moveDown:function(){return h(Pk)},moveLeft:function(){return h(Fk)}};return m({liftActionArgs:{id:s,clientSelection:ST(c),movementMode:"SNAP"},cleanup:F_,actions:e})},abort:function(){AT({expected:"PRE_DRAG",phase:u,isLockActive:g,shouldWarn:!0})&&t.release()}}}var PT=[function(e){var t=Object(a.useRef)(OT),n=Object(a.useRef)(F_),i=x_((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var a=e.findClosestDraggableId(t);if(a){var i=e.tryGetLock(a,o,{sourceEvent:t});if(i){t.preventDefault();var s={x:t.clientX,y:t.clientY};n.current(),d(i,s)}}}}}}),[e]),s=x_((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var a=e.findOptionsForDraggable(n);a&&(a.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),r=__((function(){n.current=U_(window,[s,i],{passive:!1,capture:!0})}),[s,i]),o=__((function(){"IDLE"!==t.current.type&&(t.current=OT,n.current(),r())}),[r]),l=__((function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[o]),c=__((function(){var e=vT({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=U_(window,e,{capture:!0,passive:!1})}),[l,o]),d=__((function(e,n){"IDLE"!==t.current.type&&B_(!1),t.current={type:"PENDING",point:n,actions:e},c()}),[c]);Qw((function(){return r(),function(){n.current()}}),[r])},function(e){var t=Object(a.useRef)(xT),n=x_((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var a=e.findClosestDraggableId(n);if(a){var s=e.tryGetLock(a,l,{sourceEvent:n});if(s){n.preventDefault();var r=!0,o=s.snapLift();t.current(),t.current=U_(window,CT(o,l),{capture:!0,passive:!1})}}}function l(){r||B_(!1),r=!1,t.current(),i()}}}}),[e]),i=__((function(){t.current=U_(window,[n],{passive:!1,capture:!0})}),[n]);Qw((function(){return i(),function(){t.current()}}),[i])},function(e){var t=Object(a.useRef)(kT),n=Object(a.useRef)(F_),i=__((function(){return t.current}),[]),s=__((function(e){t.current=e}),[]),r=x_((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var a=e.findClosestDraggableId(t);if(a){var i=e.tryGetLock(a,l,{sourceEvent:t});if(i){var s=t.touches[0],r={x:s.clientX,y:s.clientY};n.current(),p(i,r)}}}}}}),[e]),o=__((function(){n.current=U_(window,[r],{capture:!0,passive:!1})}),[r]),l=__((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),s(kT),n.current(),o())}),[o,s]),c=__((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),d=__((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:i},a=U_(window,function(e){var t=e.cancel,n=e.completed,a=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=a();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],s={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var i=a();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===a().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=a();"IDLE"===n.type&&B_(!1);var i=e.touches[0];if(i&&i.force>=.15){var s=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return s?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:jT,fn:t}]}(t),e),s=U_(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:jT,fn:t}]}(t),e);n.current=function(){a(),s()}}),[c,i,l]),u=__((function(){var e=i();"PENDING"!==e.type&&B_(!1);var t=e.actions.fluidLift(e.point);s({type:"DRAGGING",actions:t,hasMoved:!1})}),[i,s]),p=__((function(e,t){"IDLE"!==i().type&&B_(!1);var n=setTimeout(u,120);s({type:"PENDING",point:t,actions:e,longPressTimerId:n}),d()}),[d,i,s,u]);Qw((function(){return o(),function(){n.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),s(kT))}}),[i,o,s]),Qw((function(){return U_(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function LT(e){var t=e.contextId,n=e.store,i=e.registry,s=e.customSensors,r=e.enableDefaultSensors,o=[].concat(r?PT:[],s||[]),l=Object(a.useState)((function(){return function(){var e=null;function t(){e||B_(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&B_(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=__((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);Qw((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();c(e,t),e=t}))}),[l,n,c]),Qw((function(){return l.tryAbandon}),[l.tryAbandon]);var d=__((function(e){return NT({lockAPI:l,registry:i,store:n,draggableId:e})}),[l,i,n]),u=__((function(e,a,s){return RT({lockAPI:l,registry:i,contextId:t,store:n,draggableId:e,forceSensorStop:a,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})}),[t,l,i,n]),p=__((function(e){return function(e,t){var n=MT(e,t);return n?n.getAttribute(qw.draggableId):null}(t,e)}),[t]),g=__((function(e){var t=i.draggable.findById(e);return t?t.options:null}),[i.draggable]),h=__((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))}),[l,n]),m=__(l.isClaimed,[l]),f=x_((function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:p,findOptionsForDraggable:g,tryReleaseLock:h,isLockClaimed:m}}),[d,u,p,g,h,m]);uT();for(var b=0;b<o.length;b++)o[b](f)}function FT(e){return e.current||B_(!1),e.current}function UT(e){var t=e.contextId,n=e.setCallbacks,s=e.sensors,r=e.nonce,o=e.dragHandleUsageInstructions,l=Object(a.useRef)(null);gT();var c=hT(e),d=__((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(c.current)}),[c]),u=function(e){var t=x_((function(){return function(e){return"rbd-announcement-"+e}(e)}),[e]),n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Object(c_.a)(e.style,rT),sT().appendChild(e),function(){setTimeout((function(){var t=sT();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),__((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),p=function(e){var t=e.contextId,n=e.text,i=cT("hidden-text",{separator:"-"}),s=x_((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:i}).contextId+"-"+e.uniqueId;var e}),[i,t]);return Object(a.useEffect)((function(){var e=document.createElement("div");return e.id=s,e.textContent=n,e.style.display="none",sT().appendChild(e),function(){var t=sT();t.contains(e)&&t.removeChild(e)}}),[s,n]),s}({contextId:t,text:o}),g=Zw(t,r),h=__((function(e){FT(l).dispatch(e)}),[]),m=x_((function(){return f_({publishWhileDragging:Ek,updateDroppableScroll:Mk,updateDroppableIsEnabled:Dk,updateDroppableIsCombineEnabled:Ak,collectionStarting:Ik},h)}),[h]),f=function(){var e=x_(aT,[]);return Object(a.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),j=x_((function(){return Ow(f,m)}),[f,m]),y=x_((function(){return Hw(Object(c_.a)({scrollWindow:xw,scrollDroppable:j.scrollDroppable},f_({move:Nk},h)))}),[j.scrollDroppable,h]),O=function(e){var t=Object(a.useRef)({}),n=Object(a.useRef)(null),i=Object(a.useRef)(null),s=Object(a.useRef)(!1),r=__((function(e,n){var a={id:e,focus:n};return t.current[e]=a,function(){var n=t.current;n[e]!==a&&delete n[e]}}),[]),o=__((function(t){var n=nT(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),l=__((function(e,t){n.current===e&&(n.current=t)}),[]),c=__((function(){i.current||s.current&&(i.current=requestAnimationFrame((function(){i.current=null;var e=n.current;e&&o(e)})))}),[o]),d=__((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(qw.draggableId)===e&&(n.current=e)}),[]);return Qw((function(){return s.current=!0,function(){s.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}}),[]),x_((function(){return{register:r,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}}),[r,d,c,l])}(t),v=x_((function(){return pw({announce:u,autoScroller:y,dimensionMarshal:j,focusMarshal:O,getResponders:d,styleMarshal:g})}),[u,y,j,O,d,g]);l.current=v;var x=__((function(){var e=FT(l);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),_=__((function(){var e=FT(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(x_((function(){return{isDragging:_,tryAbort:x}}),[_,x]));var C=__((function(e){return vw(FT(l).getState(),e)}),[]),k=__((function(){return lk(FT(l).getState())}),[]),w=x_((function(){return{marshal:j,focus:O,contextId:t,canLift:C,isMovementAllowed:k,dragHandleUsageInstructionsId:p,registry:f}}),[t,j,p,O,C,k,f]);return LT({contextId:t,store:v,registry:f,customSensors:s,enableDefaultSensors:!1!==e.enableDefaultSensors}),Object(a.useEffect)((function(){return x}),[x]),i.a.createElement(dT.Provider,{value:w},i.a.createElement(b.a,{context:iT,store:v},e.children))}var $T=0;function BT(e){var t=x_((function(){return""+$T++}),[]),n=e.dragHandleUsageInstructions||W_;return i.a.createElement(V_,null,(function(a){return i.a.createElement(UT,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var VT=function(e){return function(t){return e===t}},zT=VT("scroll"),HT=VT("auto"),qT=(VT("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),GT=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return qT(n,zT)||qT(n,HT)},WT=function e(t){return null==t||t===document.body||t===document.documentElement?null:GT(t)?t:e(t.parentElement)},KT=function(e){return{x:e.scrollLeft,y:e.scrollTop}},YT=function(e){return{closestScrollable:WT(e),isFixedOnPage:function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))}(e)}},QT=function(e){var t=e.ref,n=e.descriptor,a=e.env,i=e.windowScroll,s=e.direction,r=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,c=a.closestScrollable,d=function(e,t){var n=N_(e);if(!t)return n;if(e!==t)return n;var a=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,s=a+t.scrollHeight,r=i+t.scrollWidth,o=w_({top:a,right:r,bottom:s,left:i},n.border);return E_({borderBox:o,margin:n.margin,border:n.border,padding:n.padding})}(t,c),u=D_(d,i),p=function(){if(!c)return null;var e=N_(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:D_(e,i),scroll:KT(c),scrollSize:t,shouldClipSubject:l}}();return function(e){var t=e.descriptor,n=e.isEnabled,a=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,r=e.client,o=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=gw({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:J_,displacement:J_}}}}(),d="vertical"===s?IC:MC;return{descriptor:t,isCombineEnabled:a,isFixedOnPage:i,axis:d,isEnabled:n,client:r,page:o,frame:c,subject:cC({page:o,withPlaceholder:null,axis:d,frame:c})}}({descriptor:n,isEnabled:!r,isCombineEnabled:o,isFixedOnPage:a.isFixedOnPage,direction:s,client:d,page:u,closest:p})},JT={passive:!1},XT={passive:!0},ZT=function(e){return e.shouldPublishImmediately?JT:XT};function eS(e){var t=Object(a.useContext)(e);return t||B_(!1),t}var tS=function(e){return e&&e.env.closestScrollable||null};function nS(){}var aS={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},iS=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,a=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,a=e.animate;return t||"close"===a?aS:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==a?Gk.placeholder:null}};var sS=i.a.memo((function(e){var t=Object(a.useRef)(null),n=__((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),s=e.animate,r=e.onTransitionEnd,o=e.onClose,l=e.contextId,c=Object(a.useState)("open"===e.animate),d=c[0],u=c[1];Object(a.useEffect)((function(){return d?"open"!==s?(n(),u(!1),nS):t.current?nS:(t.current=setTimeout((function(){t.current=null,u(!1)})),n):nS}),[s,d,n]);var p=__((function(e){"height"===e.propertyName&&(r(),"close"===s&&o())}),[s,o,r]),g=iS({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return i.a.createElement(e.placeholder.tagName,{style:g,"data-rbd-placeholder-context-id":l,onTransitionEnd:p,ref:e.innerRef})})),rS=i.a.createContext(null);var oS=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return Object(l_.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(i.a.PureComponent),lS=5e3,cS=4500,dS=function(e,t){return t?Gk.drop(t.duration):e?Gk.snap:Gk.fluid},uS=function(e,t){return e?t?zk.drop:zk.combining:null};function pS(e){return"DRAGGING"===e.type?(a=(n=e).dimension.client,i=n.offset,s=n.combineWith,r=n.dropping,o=Boolean(s),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(n),c=Boolean(r),d=c?Yk(i,o):Kk(i),{position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:dS(l,r),transform:d,opacity:uS(o,c),zIndex:c?cS:lS,pointerEvents:"none"}):{transform:Kk((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,n,a,i,s,r,o,l,c,d}function gS(e){var t=cT("draggable"),n=e.descriptor,i=e.registry,s=e.getDraggableRef,r=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=x_((function(){return{canDragInteractiveElements:r,shouldRespectForcePress:o,isEnabled:l}}),[r,l,o]),d=__((function(e){var t=s();return t||B_(!1),function(e,t,n){void 0===n&&(n=J_);var a=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=A_(i,a),r=D_(s,n);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:a.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:r}}(n,t,e)}),[n,s]),u=x_((function(){return{uniqueId:t,descriptor:n,options:c,getDimension:d}}),[n,d,c,t]),p=Object(a.useRef)(u),g=Object(a.useRef)(!0);Qw((function(){return i.draggable.register(p.current),function(){return i.draggable.unregister(p.current)}}),[i.draggable]),Qw((function(){if(g.current)g.current=!1;else{var e=p.current;p.current=u,i.draggable.update(u,e)}}),[u,i.draggable])}function hS(e,t,n){pT()}function mS(e){e.preventDefault()}var fS=function(e,t){return e===t},bS=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function jS(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var yS={mapped:{type:"SECONDARY",offset:J_,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:jS(null)}};var OS={dropAnimationFinished:Bk},vS=Object(b.d)((function(){var e,t,n,a=(e=Object(R_.a)((function(e,t){return{x:e,y:t}})),t=Object(R_.a)((function(e,t,n,a,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:a,combineTargetFor:null}})),n=Object(R_.a)((function(e,n,a,i,s,r,o){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:r,mode:n,offset:e,dimension:a,forceShouldAnimate:o,snapshot:t(n,i,s,r,null)}}})),function(a,i){if(a.isDragging){if(a.critical.draggable.id!==i.draggableId)return null;var s=a.current.client.offset,r=a.dimensions.draggables[i.draggableId],o=rk(a.impact),l=(d=a.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=a.forceShouldAnimate;return n(e(s.x,s.y),a.movementMode,r,i.isClone,o,l,c)}var d;if("DROP_ANIMATING"===a.phase){var u=a.completed;if(u.result.draggableId!==i.draggableId)return null;var p=i.isClone,g=a.dimensions.draggables[i.draggableId],h=u.result,m=h.mode,f=bS(h),b=function(e){return e.combine?e.combine.draggableId:null}(h),j={duration:a.dropDuration,curve:Vk,moveTo:a.newHomeClientOffset,opacity:b?zk.drop:null,scale:b?Hk.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:g,dropping:j,draggingOver:f,combineWith:b,mode:m,forceShouldAnimate:null,snapshot:t(m,p,f,b,j)}}}return null}),i=function(){var e=Object(R_.a)((function(e,t){return{x:e,y:t}})),t=Object(R_.a)(jS),n=Object(R_.a)((function(e,n,a){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:a,snapshot:t(n)}}})),a=function(e){return e?n(J_,e,!0):null},i=function(t,i,s,r){var o=s.displaced.visible[t],l=Boolean(r.inVirtualList&&r.effected[t]),c=vC(s),d=c&&c.draggableId===t?i:null;if(!o){if(!l)return a(d);if(s.displaced.invisible[t])return null;var u=tC(r.displacedBy.point),p=e(u.x,u.y);return n(p,d,!0)}if(l)return a(d);var g=s.displacedBy.point,h=e(g.x,g.y);return n(h,d,o.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return a(e,t)||i(e,t)||yS}}),OS,null,{context:iT,pure:!0,areStatePropsEqual:fS})((function(e){var t=Object(a.useRef)(null),n=__((function(e){t.current=e}),[]),i=__((function(){return t.current}),[]),s=eS(dT),r=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,c=eS(rS),d=c.type,u=c.droppableId,p=x_((function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}}),[e.draggableId,e.index,d,u]),g=e.children,h=e.draggableId,m=e.isEnabled,f=e.shouldRespectForcePress,b=e.canDragInteractiveElements,j=e.isClone,y=e.mapped,O=e.dropAnimationFinished;hS(),uT(),j||gS(x_((function(){return{descriptor:p,registry:l,getDraggableRef:i,canDragInteractiveElements:b,shouldRespectForcePress:f,isEnabled:m}}),[p,l,i,b,f,m]));var v=x_((function(){return m?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":r,draggable:!1,onDragStart:mS}:null}),[r,o,h,m]),x=__((function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&O()}),[O,y]),_=x_((function(){var e=pS(y),t="DRAGGING"===y.type&&y.dropping?x:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":r,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:v}}),[r,v,h,y,x,n]),C=x_((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return g(_,y.snapshot,C)}));function xS(e){return eS(rS).isUsingCloneFor!==e.draggableId||e.isClone?i.a.createElement(vS,e):null}function _S(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),a=Boolean(e.shouldRespectForcePress);return i.a.createElement(xS,Object(c_.a)({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}var CS=function(e,t){return e===t.droppable.type},kS=function(e,t){return t.draggables[e.draggable.id]},wS={updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}};var TS={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||B_(!1),document.body}},SS=Object(b.d)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Object(c_.a)({},e,{shouldAnimatePlaceholder:!1}),n=Object(R_.a)((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),a=Object(R_.a)((function(a,i,s,r,o,l){var c=o.descriptor.id;if(o.descriptor.droppableId===a){var d=l?{render:l,dragging:n(o.descriptor)}:null,u={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!1,snapshot:u,useClone:d}}if(!i)return t;if(!r)return e;var p={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(n,i){var s=i.droppableId,r=i.type,o=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var c=n.critical;if(!CS(r,c))return t;var d=kS(c,n.dimensions),u=rk(n.impact)===s;return a(s,o,u,u,d,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!CS(r,p.critical))return t;var g=kS(p.critical,n.dimensions);return a(s,o,bS(p.result)===s,rk(p.impact)===s,g,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var h=n.completed;if(!CS(r,h.critical))return t;var m=rk(h.impact)===s,f=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),b=h.critical.droppable.id===s;return m?f?e:t:b?e:t}return t}}),wS,null,{context:iT,pure:!0,areStatePropsEqual:fS})((function(e){var t=Object(a.useContext)(dT);t||B_(!1);var n=t.contextId,s=t.isMovementAllowed,r=Object(a.useRef)(null),o=Object(a.useRef)(null),l=e.children,c=e.droppableId,d=e.type,u=e.mode,p=e.direction,g=e.ignoreContainerClipping,h=e.isDropDisabled,m=e.isCombineEnabled,f=e.snapshot,b=e.useClone,j=e.updateViewportMaxScroll,y=e.getContainerForClone,O=__((function(){return r.current}),[]),v=__((function(e){r.current=e}),[]),x=(__((function(){return o.current}),[]),__((function(e){o.current=e}),[]));pT();var _=__((function(){s()&&j({maxScroll:mw()})}),[s,j]);!function(e){var t=Object(a.useRef)(null),n=eS(dT),i=cT("droppable"),s=n.registry,r=n.marshal,o=hT(e),l=x_((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=Object(a.useRef)(l),d=x_((function(){return Object(R_.a)((function(e,n){t.current||B_(!1);var a={x:e,y:n};r.updateDroppableScroll(l.id,a)}))}),[l.id,r]),u=__((function(){var e=t.current;return e&&e.env.closestScrollable?KT(e.env.closestScrollable):J_}),[]),p=__((function(){var e=u();d(e.x,e.y)}),[u,d]),g=x_((function(){return P_(p)}),[p]),h=__((function(){var e=t.current,n=tS(e);e&&n||B_(!1),e.scrollOptions.shouldPublishImmediately?p():g()}),[g,p]),m=__((function(e,a){t.current&&B_(!1);var i=o.current,s=i.getDroppableRef();s||B_(!1);var r=YT(s),c={ref:s,descriptor:l,env:r,scrollOptions:a};t.current=c;var d=QT({ref:s,descriptor:l,env:r,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),u=r.closestScrollable;return u&&(u.setAttribute(Kw.contextId,n.contextId),u.addEventListener("scroll",h,ZT(c.scrollOptions))),d}),[n.contextId,l,h,o]),f=__((function(){var e=t.current,n=tS(e);return e&&n||B_(!1),KT(n)}),[]),b=__((function(){var e=t.current;e||B_(!1);var n=tS(e);t.current=null,n&&(g.cancel(),n.removeAttribute(Kw.contextId),n.removeEventListener("scroll",h,ZT(e.scrollOptions)))}),[h,g]),j=__((function(e){var n=t.current;n||B_(!1);var a=tS(n);a||B_(!1),a.scrollTop+=e.y,a.scrollLeft+=e.x}),[]),y=x_((function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:f,dragStopped:b,scroll:j}}),[b,m,f,j]),O=x_((function(){return{uniqueId:i,descriptor:l,callbacks:y}}),[y,l,i]);Qw((function(){return c.current=O.descriptor,s.droppable.register(O),function(){t.current&&b(),s.droppable.unregister(O)}}),[y,l,b,O,r,s.droppable]),Qw((function(){t.current&&r.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,r]),Qw((function(){t.current&&r.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,r])}({droppableId:c,type:d,mode:u,direction:p,isDropDisabled:h,isCombineEnabled:m,ignoreContainerClipping:g,getDroppableRef:O});var C=i.a.createElement(oS,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,a=e.data,s=e.animate;return i.a.createElement(sS,{placeholder:a,onClose:t,innerRef:x,animate:s,contextId:n,onTransitionEnd:_})})),k=x_((function(){return{innerRef:v,placeholder:C,droppableProps:{"data-rbd-droppable-id":c,"data-rbd-droppable-context-id":n}}}),[n,c,C,v]),w=b?b.dragging.draggableId:null,T=x_((function(){return{droppableId:c,type:d,isUsingCloneFor:w}}),[c,w,d]);return i.a.createElement(rS.Provider,{value:T},l(k,f),function(){if(!b)return null;var e=b.dragging,t=b.render,n=i.a.createElement(xS,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,a){return t(n,a,e)}));return jn.a.createPortal(n,y())}())}));SS.defaultProps=TS;var ES=n("hyLW"),IS=n.n(ES);const MS=r.default.li.withConfig({displayName:"DraggableRule__Rule",componentId:"sc-1efpz86-0"})(["display:grid;grid-template-columns:auto 1fr 142px;grid-column-gap:12px;padding:14px 20px 18px;border:1px solid ",";border-radius:4px;transition:",";background:rgba(255,255,255,0.9);",";& + &{margin-top:8px;}&:hover{border-color:",";cursor:pointer;}&:focus:not(:active){box-shadow:0 0 0 2px ",";}"],({isDragging:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-3"),Object(o.transitions)({duration:.2,properties:["border","box-shadow"]}),({isDragging:e})=>e&&o.shadow[8],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")),DS=r.default.div.withConfig({displayName:"DraggableRule__DraggableHandle",componentId:"sc-1efpz86-1"})(["display:flex;align-items:center;"]),AS=r.default.div.withConfig({displayName:"DraggableRule__RuleTitle",componentId:"sc-1efpz86-2"})(["display:flex;align-items:center;width:100%;height:100%;"]),NS=Object(r.default)(V.jc).withConfig({displayName:"DraggableRule__RuleName",componentId:"sc-1efpz86-3"})(["max-width:720px;width:auto;",";"],o.Subtitles["subtitle-03"]),RS=r.default.div.withConfig({displayName:"DraggableRule__RuleActions",componentId:"sc-1efpz86-4"})(["display:flex;align-items:center;justify-content:flex-end;width:100%;"]),PS=Object(r.default)(o.Toggle).withConfig({displayName:"DraggableRule__RuleStatusToggle",componentId:"sc-1efpz86-5"})(["margin-right:8px;"]),LS=Object(r.default)(o.Lozenge).withConfig({displayName:"DraggableRule__RuleStatusLozengeOff",componentId:"sc-1efpz86-6"})(["margin-left:8px;"]),FS=r.default.div.withConfig({displayName:"DraggableRule__RuleConditions",componentId:"sc-1efpz86-7"})(["display:flex;align-items:flex-start;grid-column:1 / span 2;grid-row:2;padding-top:16px;"]),US=r.default.div.withConfig({displayName:"DraggableRule__RuleConditionsContainer",componentId:"sc-1efpz86-8"})(["margin-top:-1px;padding-left:8px;"]),$S=r.default.span.withConfig({displayName:"DraggableRule__RuleConditionText",componentId:"sc-1efpz86-9"})(["display:inline-flex;align-items:center;margin:0 8px;font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-9")),BS=r.default.span.withConfig({displayName:"DraggableRule__RuleConditionNameOperatorText",componentId:"sc-1efpz86-10"})([""]),VS=Object(r.default)(V.jc).withConfig({displayName:"DraggableRule__RuleConditionValueText",componentId:"sc-1efpz86-11"})(["margin-left:4px;max-width:320px;"]),zS=r.default.div.withConfig({displayName:"DraggableRule__RuleConditionGroupContainer",componentId:"sc-1efpz86-12"})(["display:inline-flex;align-items:center;vertical-align:middle;&:first-child{","{margin-left:0;}}"],$S),HS=Object(r.default)($S).withConfig({displayName:"DraggableRule__RuleConsequentText",componentId:"sc-1efpz86-13"})(["margin-right:8px;"]),qS=r.default.div.withConfig({displayName:"DraggableRule__RuleConsequent",componentId:"sc-1efpz86-14"})(["grid-column:1 / span 2;grid-row:3;padding-top:8px;"]),GS=Object(r.default)(V.Xb).withConfig({displayName:"DraggableRule__PriorityText",componentId:"sc-1efpz86-15"})(["margin-left:8px;"]),WS=r.default.div.withConfig({displayName:"DraggableRule__RuleError",componentId:"sc-1efpz86-16"})(["grid-column:1 / span 3;grid-row:4;padding-top:16px;"]),KS={assignmentRules:{tooltip:"desk.settings.assignmentRules.list.dragHandle.tooltipContent",consequentTo:"desk.settings.assignmentRules.list.consequent.to"},priorityRules:{tooltip:"desk.settings.priorityRules.list.dragHandle.tooltipContent",consequentTo:"desk.settings.priorityRules.list.consequent.to"}},YS=Object(a.memo)(({match:e,condition:t,isFirst:n})=>{const i=Object(E.a)(),s=e===dx.h.AND,r=s?46:39,{key:l,type:c,name:d,operator:u,value:p}=t,g=Object(a.useCallback)(()=>{const e=c!==dx.f.NUMBER||u!==dx.d.Is&&u!==dx.d.IsNot?"":"_for_number",t=`${u}${e}`;return i.formatMessage({id:dx.e[t]})},[i,u,c]),h=p?` ${(e=>l===dx.z.key&&dx.C[e]?i.formatMessage({id:dx.C[e]}):c===dx.f.NUMBER?isNaN(parseInt(e,10))?e:IS()(e).format({thousandSeparated:!0,mantissa:0}):e)(p)}`:"";return Object(W.jsxs)(zS,{children:[!n&&Object(W.jsx)(V.nb,{width:r,textSize:11,textColor:Object(o.cssVariables)("neutral-5"),textSidePadding:4,hrColor:Object(o.cssVariables)("neutral-5"),children:i.formatMessage({id:s?"desk.settings.ticketRules.list.condition.match.all":"desk.settings.ticketRules.list.condition.match.any"})}),Object(W.jsxs)($S,{children:[Object(W.jsxs)(BS,{children:[`${d} ${g()}`," "]}),Object(W.jsx)(VS,{children:""!==h&&i.formatMessage({id:"desk.settings.ticketRules.list.condition.value"},{conditionValue:h})})]})]})});var QS=Object(r.default)($y.a).withConfig({displayName:"DraggableRule___StyledDeskBotAvatar",componentId:"sc-1efpz86-17"})(["margin-left:4px !important;margin-right:4px;"]);const JS=Object(a.memo)(({rule:e,agentsMap:t,provided:n,snapshot:i,isActionDisabled:s,onEdit:r,onDelete:l,onUpdateStatus:c})=>{var d,u,p,g,h,m,b,j,y,O,v,x;const _=Object(E.a)(),C=Sx(),{conditional:{match:k,conditions:w}}=e,T=e.status===dx.i.ON,S=Object(a.useCallback)((t,n)=>{n.stopPropagation(),c(e.id,e.name,t)},[c,e.id,e.name]),I=Object(a.useCallback)(()=>{s||r(e.id)},[s,r,e.id]),M=Object(a.useMemo)(()=>[{label:_.formatMessage({id:"desk.settings.ticketRules.list.overflowMenu.edit"}),disabled:s,onClick:()=>{r(e.id)}},{label:_.formatMessage({id:"desk.settings.ticketRules.list.overflowMenu.delete"}),disabled:s,onClick:()=>{l(e.id,e.name)}}],[_,s,l,r,e.id,e.name]),D=KS[C.intlKeyByType];return Object(W.jsxs)(MS,{role:"listitem",ref:n.innerRef,...n.draggableProps,isDragging:i.isDragging,style:{...n.draggableProps.style},onClick:I,children:[Object(W.jsx)(DS,{...n.dragHandleProps,role:"gridcell",children:Object(W.jsx)(o.Tooltip,{portalId:"portal_tooltip",placement:"right",content:_.formatMessage({id:D.tooltip}),tooltipContentStyle:"max-width: 300px; padding: 8px 16px; font-weight: 500",children:Object(W.jsx)(o.Icon,{size:20,icon:"drag-handle",color:Object(o.cssVariables)("neutral-6")})})}),Object(W.jsxs)(AS,{role:"gridcell",children:[Object(W.jsx)(NS,{children:e.name}),!T&&Object(W.jsx)(LS,{variant:o.LozengeVariant.Light,color:"neutral",children:_.formatMessage({id:"desk.settings.ticketRules.list.ruleStatus.off"})})]}),Object(W.jsxs)(RS,{role:"gridcell",children:[Object(W.jsx)(PS,{checked:T,disabled:s,onClick:S}),Object(W.jsx)(o.OverflowMenu,{items:M,stopClickEventPropagation:!0,popperProps:{positionFixed:!0}})]}),Object(W.jsxs)(FS,{role:"gridcell",children:[Object(W.jsx)(V.d,{text:_.formatMessage({id:"desk.settings.ticketRules.list.if"}),size:"small",minWidth:44}),Object(W.jsx)(US,{children:w.map((t,n)=>Object(W.jsx)(YS,{match:k,condition:t,isFirst:0===n},`${t.key}-${t.value}-${e.order}-${n}`))})]}),Object(W.jsxs)(qS,{role:"gridcell",children:[Object(W.jsx)(V.d,{text:_.formatMessage({id:"desk.settings.ticketRules.list.then"}),size:"small",minWidth:44}),C.type===dx.j.ASSIGNMENT&&Object(W.jsx)(HS,{children:_.formatMessage({id:D.consequentTo},{assignmentTarget:e.conditional.consequent.type===dx.g.GROUP?null==(d=e.conditional.consequent)||null==(u=d._group)?void 0:u.name:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(QS,{size:16,type:o.AvatarType.Bot,profileID:(null==(p=e.conditional.consequent)||null==(g=p._agent)?void 0:g.name)||"",imageUrl:null==(h=t.get(null==(m=e.conditional.consequent)||null==(b=m._agent)?void 0:b.value))?void 0:h.photoThumbnailUrl}),null==(j=e.conditional.consequent)||null==(y=j._agent)?void 0:y.name]})})}),C.type===dx.j.PRIORITY&&Object(W.jsx)(HS,{children:_.formatMessage({id:D.consequentTo},{priority:[f.gc.URGENT,f.gc.HIGH,f.gc.MEDIUM,f.gc.LOW].includes(null==(O=e.conditional.consequent)||null==(v=O._priority)?void 0:v.value)?Object(W.jsx)(GS,{priority:null==(x=e.conditional.consequent)?void 0:x._priority.value,showLabel:!0}):""})})]}),e.error&&Object(W.jsx)(WS,{role:"gridcell",children:Object(W.jsx)(o.InlineNotification,{type:"error",message:_.formatMessage({id:"desk.settings.ticketRules.list.error.broken"})})})]})}),XS=r.default.ol.withConfig({displayName:"TicketRuleList__RuleDropZone",componentId:"sc-1t6e80b-0"})([""]),ZS=Object(a.memo)(({rules:e,isActionDisabled:t,onEdit:n,onDelete:i,onUpdateStatus:s,onReorder:r})=>{const o=Object(E.a)(),{pid:l,region:c}=Object(L.a)(),[{data:d},u]=Object(P.g)(e=>D.g.fetchAgents(l,c,{offset:0,limit:20,id:e}),[l,c]),p=Object(a.useMemo)(()=>{const e=new Map;return null==d||d.data.results.forEach(t=>{e.set(t.id,t)}),e},[d]);Object(a.useEffect)(()=>{const t=e.reduce((e,t)=>{if(t.conditional.consequent.type===dx.g.GROUP_WITH_BOT_AGENT){const n=t.conditional.consequent;e.push(n._agent.value)}return e},[]);u(t)},[u,e]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(V.nb,{children:o.formatMessage({id:"desk.settings.ticketRules.list.order.description"})}),Object(W.jsx)(BT,{onDragEnd:e=>{e.destination&&r({startIndex:e.source.index+1,endIndex:e.destination.index+1})},children:Object(W.jsx)(SS,{droppableId:"ticketRulesDroppable",children:a=>Object(W.jsx)(XS,{...a.droppableProps,ref:a.innerRef,children:e.map((e,a)=>Object(W.jsx)(_S,{draggableId:e.id.toString(),index:a,children:(a,r)=>Object(W.jsx)(JS,{rule:e,agentsMap:p,provided:a,snapshot:r,isActionDisabled:t,onEdit:n,onDelete:i,onUpdateStatus:s})},e.id))})})})]})}),eE=r.default.div.withConfig({displayName:"TicketRule__Wrapper",componentId:"pif1rq-0"})(["display:grid;grid-template-rows:auto 1fr;grid-auto-flow:row;grid-gap:26px;"]),tE=r.default.div.withConfig({displayName:"TicketRule__OrderUpdateActions",componentId:"pif1rq-1"})(["display:flex;align-items:center;justify-content:flex-end;position:fixed;bottom:0;left:0;z-index:100;padding:0 24px;width:1024px;height:64px;border-top:1px solid ",";transform:translate( ","px,","px );transition:transform 0.3s ",";background:",";"],Object(o.cssVariables)("neutral-3"),({isLNBCollapsed:e,offset:t})=>(e?320:480)+t,({isVisible:e})=>e?0:64,o.transitionDefault,Object(o.cssVariables)("neutral-1")),nE=Object(r.default)(o.Button).withConfig({displayName:"TicketRule__SaveButton",componentId:"pif1rq-2"})(["margin-left:8px;"]),aE=r.default.i.withConfig({displayName:"TicketRule__DescriptionLightText",componentId:"pif1rq-3"})(["font-style:normal;color:",";"],Object(o.cssVariables)("neutral-6")),iE=r.default.b.withConfig({displayName:"TicketRule__DescriptionLightBoldText",componentId:"pif1rq-4"})(["font-weight:500;color:",";"],Object(o.cssVariables)("neutral-6")),sE=Object(r.default)(z.a).withConfig({displayName:"TicketRule__NoRules",componentId:"pif1rq-5"})(["padding:149px 16px;"]);var rE=Object(r.default)(iy.a).withConfig({displayName:"TicketRule___StyledAppSettingPageHeader",componentId:"pif1rq-6"})(["* + ","{margin-top:24px;}"],e=>e._css),oE=Object(r.default)(o.Button).withConfig({displayName:"TicketRule___StyledButton",componentId:"pif1rq-7"})(["flex:none;margin-left:8px;"]);const lE=Object(a.memo)(()=>{const e=Object(E.a)(),t=Object(s.n)(),n=Object(s.k)(),{pid:i,region:r}=Object(L.a)(),{unsaved:l,setUnsaved:c}=Object(P.Z)(),d=Object(P.W)(),u=Object(V.Jc)(),p=Sx(),{getErrorMessage:g}=Object($.a)(),{isCollapsed:h}=Object(a.useContext)(S.a),[m,f]=Object(a.useState)([]),[b,j]=Object(a.useState)([]),[y,O]=Object(a.useState)(!1),v=b.some((e,t)=>{const n=ox()(m)[t];return n&&e.order!==n.order}),x=Object(a.useRef)(null),_=m.length>=20,C=Object(a.useCallback)(async()=>{O(!0);try{const{data:{results:e}}=await D.g.fetchTicketRules(i,r,{type:p.type,offset:0,limit:50}),t=e.map(e=>{if(p.type===dx.j.PRIORITY){if(p.type===dx.j.PRIORITY&&void 0===e.conditional.consequent._priority){const{type:t,...n}=e.conditional.consequent;return{...e,conditional:{...e.conditional,consequent:{type:t,_priority:{...n}}}}}return e}if(!e.conditional.consequent._group){const{type:t,...n}=e.conditional.consequent;return{...e,conditional:{...e.conditional,consequent:{type:t,_group:{...n}}}}}return e});f(t),j(e)}catch(e){o.toast.error({message:g(e)})}finally{O(!1)}},[p.type,g,i,r]),k=Object(a.useCallback)(async({id:t,status:n,name:a})=>{O(!0);try{return await D.g.updateTicketRule(i,r,{id:t,status:n}),o.toast.success({message:e.formatMessage({id:`desk.settings.ticketRules.toast.status${n===dx.i.ON?"On":"Off"}.success`},{ruleName:a})}),!0}catch(e){return o.toast.error({message:g(e)}),!1}finally{O(!1)}},[g,e,i,r]),w=Object(a.useCallback)(async t=>{O(!0);try{return await D.g.updateTicketRuleOrder(i,r,{type:p.type,orders:t}),o.toast.success({message:e.formatMessage({id:"desk.settings.ticketRules.toast.order.success"})}),!0}catch(e){return o.toast.error({message:g(e)}),!1}finally{O(!1)}},[p.type,g,e,i,r]),T=Object(a.useCallback)(async t=>{O(!0);try{return await D.g.deleteTicketRule(i,r,{id:t}),o.toast.success({message:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.toast.delete.success`})}),!0}catch(e){return o.toast.error({message:g(e)}),!1}finally{O(!1)}},[p.intlKeyByType,g,e,i,r]),I=Object(a.useCallback)(({startIndex:e,endIndex:t})=>{const n=e<t,a=m.map(a=>{if(a.order===e)return{...a,order:t};if(a.order===t)return{...a,order:n?t-1:t+1};if(i=a.order,n?i>e&&i<t:i<e&&i>t){const e=n?a.order-1:a.order+1;return{...a,order:e}}var i;return a});f(a)},[m]),M=Object(a.useCallback)(()=>{t&&n.push(`${t.url}/create`)},[n,t]),N=Object(a.useCallback)(e=>{t&&n.push(`${t.url}/${e}`)},[n,t]),R=Object(a.useCallback)((t,n)=>{d({dialogTypes:A.a.Delete,dialogProps:{title:e.formatMessage({id:"desk.settings.ticketRules.dialog.delete.title"},{ruleName:n}),description:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.dialog.delete.description`}),confirmText:e.formatMessage({id:"desk.settings.ticketRules.dialog.delete.button"}),cancelText:e.formatMessage({id:"desk.settings.ticketRules.dialog.cancel.button"}),onDelete:async e=>{e(!0),await T(t)&&C()}}})},[p.intlKeyByType,T,C,e,d]),F=Object(a.useCallback)((t,n,a)=>{d({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.settings.ticketRules.dialog.statusToggle.title"},{ruleStatus:a?e.formatMessage({id:"desk.settings.ticketRules.list.ruleStatus.turnOn"}):e.formatMessage({id:"desk.settings.ticketRules.list.ruleStatus.turnOff"}),ruleName:n}),description:a?e.formatMessage({id:`desk.settings.${p.intlKeyByType}.dialog.statusToggle.description.on`}):e.formatMessage({id:`desk.settings.${p.intlKeyByType}.dialog.statusToggle.description.off`}),confirmText:a?e.formatMessage({id:"desk.settings.ticketRules.list.ruleStatus.turnOn"}):e.formatMessage({id:"desk.settings.ticketRules.list.ruleStatus.turnOff"}),onConfirm:async e=>{e(!0),await k({id:t,status:a?dx.i.ON:dx.i.OFF,name:n})&&C()}}})},[p.intlKeyByType,C,e,d,k]);Object(a.useEffect)(()=>{const e=n.listen(e=>{const t=e.pathname.split("/");t[t.length-1]===p.pathname&&C()});return()=>{e()}},[p.pathname,C,n]),Object(a.useEffect)(()=>{C()},[C]),Object(a.useEffect)(()=>{var e,t;_?null==(t=x.current)||t.show():null==(e=x.current)||e.hide()},[_]),Object(a.useEffect)(()=>(c(v),()=>{c(!1)}),[v,c]);const U=Object(a.useMemo)(()=>Object(W.jsx)(sE,{icon:"rule",title:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.list.empty.header`}),description:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.list.empty.description`})}),[p.intlKeyByType,e]),B=Object(a.useMemo)(()=>Object(W.jsx)(ZS,{rules:ox()(m,"order"),isActionDisabled:v,onEdit:N,onDelete:R,onUpdateStatus:F,onReorder:I}),[R,N,I,F,v,m]);return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(rE,{_css:iy.a.Description,children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.pageTitle`})}),Object(W.jsx)(iy.a.Actions,{children:Object(W.jsx)(o.Tooltip,{ref:x,placement:"bottom-end",content:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.button.create.tooltip.max`}),disabled:y||!_,children:Object(W.jsx)(oE,{buttonType:"primary",icon:"plus",size:"small",disabled:y||_||v,onClick:M,children:e.formatMessage({id:"desk.settings.ticketRules.button.create"})})})}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:`desk.settings.${p.intlKeyByType}.description`},{i:e=>Object(W.jsx)(aE,{children:e}),b:e=>Object(W.jsx)(iE,{children:e}),break:Object(W.jsx)("br",{})})})]}),Object(W.jsx)(V.wc,{when:l}),Object(W.jsxs)(eE,{children:[y&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),m.length>0?B:U]}),Object(W.jsxs)(tE,{isVisible:v,isLNBCollapsed:h,offset:u-32,children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",disabled:!v||y,onClick:()=>{f(b)},children:e.formatMessage({id:"desk.settings.ticketRules.list.order.button.cancel"})}),Object(W.jsx)(nE,{buttonType:"primary",disabled:!v||y,onClick:async()=>{const e=m.map(({id:e,order:t})=>({id:e,order:t}));await w(e).then(e=>{e&&j(m)})},children:e.formatMessage({id:"desk.settings.ticketRules.list.order.button.save"})})]}),Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/create`,component:o_}),Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/:ruleId`,component:o_})]})]})}),cE=({defaultInputValue:e,onSubmit:t,onReset:n})=>{const i=Object(E.a)(),[s,r]=Object(a.useState)(e);return Object(W.jsx)("form",{onSubmit:e=>{e.preventDefault(),t(s)},children:Object(W.jsx)(o.InputText,{size:"small",value:s,onChange:e=>{r(e.currentTarget.value)},placeholder:i.formatMessage({id:"desk.settings.tags.searchPlaceholder"}),icons:[s?{key:"clear",size:"xsmall",icon:"close",type:"reset",onClick:()=>{r(""),n()}}:{key:"search",size:"xsmall",icon:"search",type:"submit"}]})})};var dE=n("79/T"),uE=n.n(dE);const pE=Object(r.default)(o.IconButton).attrs({buttonType:"secondary",size:"xsmall"}).withConfig({displayName:"TableRowButtons__TableRowIconButton",componentId:"xg3tpz-0"})(["&& button{&:not(:disabled):hover{background:",";}&:active,&:focus:active{background:",";}}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3")),gE=Object(r.default)(o.Button).withConfig({displayName:"TableRowButtons__TableRowButton",componentId:"xg3tpz-1"})(["",""],({buttonType:e})=>"tertiary"===e&&`\n    // make background color white (which is originally transparent)\n\n    &,\n    &:not(:disabled):hover {\n      background: white;\n    }\n\n    &:active,\n    &:focus:active {\n      background: ${Object(o.cssVariables)("purple-2")};\n    }\n`),hE=r.default.form.withConfig({displayName:"CreateTagForm__Form",componentId:"h3pkjp-0"})(["display:grid;grid-template-columns:1fr auto;grid-gap:8px;grid-auto-flow:column;align-items:start;width:100%;margin:-6px 0;input:focus{box-shadow:none;}"]),mE=r.default.div.withConfig({displayName:"CreateTagForm__Buttons",componentId:"h3pkjp-1"})(["display:grid;grid-template-columns:auto auto;grid-gap:4px;grid-auto-flow:column;align-items:center;height:32px;"]),fE=({onCancelButtonClick:e,onSubmit:t,isSubmitting:n,defaultValue:a,serverError:i})=>{const s=Object(E.a)(),{nameInputProps:r,handleSubmit:l,reset:c}=wi({defaultValue:a,serverError:i}),d=()=>{c(),e()};return Object(W.jsxs)(hE,{onSubmit:l(async({name:e})=>{e!==a?t(e):d()}),name:s.formatMessage({id:"desk.settings.tags.btn.createTag"}),children:[Object(W.jsx)(o.InputText,{...r,size:"small"}),Object(W.jsxs)(mE,{children:[Object(W.jsx)(pE,{type:"submit",icon:"done",title:s.formatMessage({id:"desk.settings.tags.createRow.btn.save"}),disabled:n,isLoading:n}),Object(W.jsx)(pE,{type:"button",icon:"rollback",title:s.formatMessage({id:"desk.settings.tags.createRow.btn.cancel"}),onClick:d})]})]})},bE=r.default.span.withConfig({displayName:"RealtimeCreatedAt__Timestamp",componentId:"sc-13k7qqy-0"})(["color:",";font-weight:500;"],Object(o.cssVariables)("green-5")),jE=()=>c()().format(f.B),yE=()=>{const[e,t]=Object(a.useState)(jE()),{startInterval:n}=Object(P.C)(()=>{t(jE())},1e3);return Object(a.useEffect)(()=>{n()},[n]),Object(W.jsx)(bE,{children:e})},OE=r.default.span.withConfig({displayName:"RecentlyCreatedAt__Highlighted",componentId:"sc-1b6iur9-0"})(["color:",";font-weight:500;"],Object(o.cssVariables)("green-5")),vE=e=>c()().diff(e,"minute")<=1,xE=({timestamp:e,children:t})=>{const n=Object(a.useMemo)(()=>c()(e),[e]),[i,s]=Object(a.useState)(vE(n)),{startInterval:r,stopInterval:o}=Object(P.C)(()=>{const e=vE(n);e!==i&&(s(e),e||o())},1e3);return Object(a.useEffect)(()=>{r()},[r]),i?Object(W.jsx)(OE,{children:t}):Object(W.jsx)(W.Fragment,{children:t})},_E=e=>{const{pid:t,region:n}=Object(L.a)(),{getErrorMessage:i}=Object($.a)();return Object(a.useCallback)(async a=>{if(!n)return;const{page:s,pageSize:r,order:o,status:l,query:c}=a;e({type:"FETCH_TAGS_START",payload:{tab:l}});try{const{data:a}=await Object(N.getProjectTags)(t,n,{limit:r,offset:(s-1)*r,order:o,status:l,q:c});e({type:"FETCH_TAGS_SUCCESS",payload:{tab:l,data:a}})}catch(t){e({type:"FETCH_TAGS_FAIL",payload:{tab:l,error:i(t)}})}},[e,i,t,n])},CE=(e,t)=>{switch(t.type){case"UPDATE_STATE_BY_QUERY_PARAMS":{const{queryParams:n,resetTheOtherTabToFirstPage:a}=t.payload;return{...e,query:n.q,selectedTab:n.status,tabs:e.tabs.map(e=>e.key===n.status?{...e,page:n.page,pageSize:n.pageSize,order:n.order}:a?{...e,page:1}:e)}}case"FETCH_TAGS_START":return{...e,tabs:e.tabs.map(e=>e.key===t.payload.tab?{...e,status:"fetching"}:e)};case"FETCH_TAGS_SUCCESS":return{...e,tabs:e.tabs.map(e=>e.key===t.payload.tab?{...e,status:"success",data:t.payload.data,error:null}:e),createTagRequest:{...e.createTagRequest,status:"idle"}};case"FETCH_TAGS_FAIL":return{...e,tabs:e.tabs.map(e=>e.key===t.payload.tab?{...e,status:"failed",error:t.payload.error}:e)};case"SET_ADD_MODE":return{...e,isAddMode:t.payload.isAddMode};case"CREATE_TAG_START":return{...e,createTagRequest:{...e.createTagRequest,status:"pending"}};case"CREATE_TAG_SUCCESS":return{...e,createTagRequest:{status:t.payload.status,newTag:t.payload.newTag,error:null}};case"CREATE_TAG_FAIL":return{...e,createTagRequest:{...e.createTagRequest,status:"idle",error:t.payload.error}};case"CREATE_TAG_CLEAR_ERROR":return{...e,createTagRequest:{...e.createTagRequest,error:null}};case"UPDATE_TAG":return{...e,tabs:e.tabs.map(e=>e.key===t.payload.tag.status?{...e,data:{...e.data,results:e.data.results.map(e=>e.id===t.payload.tag.id?t.payload.tag:e)}}:e)};default:return e}},kE=Object(a.createContext)(void 0),wE=Object(a.createContext)(void 0),TE=({value:e,children:t})=>Object(W.jsx)(wE.Provider,{value:e[0],children:Object(W.jsx)(kE.Provider,{value:e[1],children:t})}),SE=()=>Object(a.useContext)(kE),EE=()=>Object(a.useContext)(wE),IE=(e=!1)=>{const t=(()=>{const e=EE(),t=Object(a.useRef)(e);return Object(a.useEffect)(()=>{t.current=e}),t})(),n=SE(),i=_E(n);return Object(a.useCallback)(()=>{const{selectedTab:n,tabs:a,query:s}=t.current;if(e)return Promise.all(a.map(e=>i({...e,status:e.key,query:s})));const r=a.find(({key:e})=>e===n);return r?i({...r,status:n,query:s}):void 0},[i,t,e])};let ME;const DE=r.default.div.withConfig({displayName:"TicketTagNameCell__Container",componentId:"hu2221-0"})(["position:relative;display:flex;align-items:center;width:100%;height:32px;margin:-6px 0;"]),AE=r.default.div.withConfig({displayName:"TicketTagNameCell__RowActions",componentId:"hu2221-1"})(["position:absolute;top:0;right:0;display:grid;grid-gap:8px;grid-auto-flow:column;align-items:center;pointer-events:none;opacity:0;"]),NE=Object(r.createGlobalStyle)(ME||(ME=(e=>e)`
  tr:hover ${0} {
    opacity: 1;
    pointer-events: initial;
  }
`),AE),RE=(e,t)=>{switch(t.type){case"SET_EDIT_MODE":return{...e,isEditMode:t.payload.isEditMode};case"CLEAR_EDIT_REQUEST_ERROR":return{...e,editRequest:{...e.editRequest,error:null}};case"EDIT_REQUEST_START":return{...e,editRequest:{...e.editRequest,status:"pending"}};case"EDIT_REQUEST_SUCCESS":return{...e,isEditMode:!1,editRequest:{status:"idle",error:null}};case"EDIT_REQUEST_FAIL":return{...e,editRequest:{status:"idle",error:t.payload.error}};case"SET_RESTORE_REQUEST_STATUS":return{...e,restoreRequest:{status:t.payload.status}};default:return e}},PE=(e,t)=>{const n=Object(E.a)(),{pid:a,region:i}=Object(L.a)(),s=IE();return Object(P.W)({dialogTypes:A.a.Delete,dialogProps:{title:n.formatMessage({id:"desk.settings.tags.deleteDialog.title"},{tag:t}),description:n.formatMessage({id:"desk.settings.tags.deleteDialog.description"}),confirmText:n.formatMessage({id:"desk.settings.tags.deleteDialog.btn.delete"}),cancelText:n.formatMessage({id:"desk.settings.tags.deleteDialog.btn.cancel"}),size:"small",onDelete:async r=>{r(!0),await Object(N.deleteTag)(a,i,{id:e}).then(()=>{o.toast.success({message:n.formatMessage({id:"desk.settings.tags.noti.deleted"},{tag:t})}),s()})}}})},LE=({tag:e})=>{const t=Object(E.a)(),[n,i]=Object(a.useReducer)(RE,{isEditMode:!1,editRequest:{status:"idle",error:null},restoreRequest:{status:"idle"}}),s=((e,t)=>{const n=Object(E.a)(),{pid:a,region:i}=Object(L.a)(),s=IE(!0),r=PE(e,t);return Object(P.W)({dialogTypes:A.a.Delete,dialogProps:{title:n.formatMessage({id:"desk.settings.tags.archiveDialog.title"},{tag:t}),description:n.formatMessage({id:"desk.settings.tags.archiveDialog.description"}),confirmText:n.formatMessage({id:"desk.settings.tags.archiveDialog.btn.confirm"}),cancelText:n.formatMessage({id:"desk.settings.tags.archiveDialog.btn.cancel"}),size:"small",onDelete:async r=>{r(!0),await Object(N.updateTag)(a,i,{id:e,status:"ARCHIVE"}),o.toast.success({message:n.formatMessage({id:"desk.settings.tags.noti.archived"},{tag:t})}),s()},alternativeAction:{children:n.formatMessage({id:"desk.settings.tags.archiveDialog.btn.delete"}),icon:"delete",onClick:r}}})})(e.id,e.name),r=PE(e.id,e.name),l=((e,t)=>{const n=Object(E.a)(),i=Object(a.useRef)(e),{pid:s,region:r}=Object(L.a)(),l=IE(!0),{getErrorMessage:c}=Object($.a)();return Object(a.useEffect)(()=>{i.current=e}),Object(a.useCallback)(async(e,a)=>{if("pending"!==i.current.restoreRequest.status){t({type:"SET_RESTORE_REQUEST_STATUS",payload:{status:"pending"}});try{await Object(N.updateTag)(s,r,{id:e,status:"ACTIVE"}),o.toast.success({message:n.formatMessage({id:"desk.settings.tags.noti.restored"},{tag:a})}),l()}catch(e){var d;o.toast.error({message:"desk400122"===(null==e||null==(d=e.data)?void 0:d.code)?n.formatMessage({id:"desk.settings.tags.noti.error.maxActiveTags"}):c(e)})}finally{t({type:"SET_RESTORE_REQUEST_STATUS",payload:{status:"idle"}})}}},[t,c,n,s,r,l])})(n,i),c=((e,t)=>{const n=Object(a.useRef)(e),{pid:i,region:s}=Object(L.a)(),r=SE();return Object(a.useEffect)(()=>{n.current=e}),Object(a.useCallback)(async(e,a)=>{if("pending"!==n.current.editRequest.status){t({type:"EDIT_REQUEST_START"});try{const{data:n}=await Object(N.updateTag)(i,s,{id:e,name:a});r({type:"UPDATE_TAG",payload:{tag:n}}),t({type:"EDIT_REQUEST_SUCCESS"})}catch(e){t({type:"EDIT_REQUEST_FAIL",payload:{error:e}})}}},[t,r,i,s])})(n,i),{isEditMode:d,editRequest:{status:u,error:p}}=n,{id:g,name:h,status:m}=e,f=Object(a.useMemo)(()=>{switch(m){case"ACTIVE":return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(pE,{type:"button",icon:"edit",title:t.formatMessage({id:"desk.settings.tags.rowActions.btn.edit"}),onClick:()=>i({type:"SET_EDIT_MODE",payload:{isEditMode:!0}})}),Object(W.jsx)(gE,{type:"button",buttonType:"tertiary",size:"small",onClick:s,children:t.formatMessage({id:"desk.settings.tags.rowActions.btn.archive"})})]});case"ARCHIVE":return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(gE,{type:"button",buttonType:"tertiary",size:"small",onClick:()=>l(g,h),children:t.formatMessage({id:"desk.settings.tags.rowActions.btn.restore"})}),Object(W.jsx)(gE,{type:"button",buttonType:"danger",size:"small",onClick:r,children:t.formatMessage({id:"desk.settings.tags.rowActions.btn.delete"})})]});default:return null}},[s,r,g,t,h,l,m]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(NE,{}),d?Object(W.jsx)(fE,{defaultValue:h,onCancelButtonClick:()=>{i({type:"CLEAR_EDIT_REQUEST_ERROR"}),i({type:"SET_EDIT_MODE",payload:{isEditMode:!1}})},onSubmit:e=>c(g,e),isSubmitting:"pending"===u,serverError:p}):Object(W.jsxs)(DE,{children:[h,Object(W.jsx)(AE,{children:f})]})]})},FE=r.default.div.withConfig({displayName:"TicketTagTable__EmptyWrapper",componentId:"sc-1hcsqn7-0"})(["display:flex;justify-content:center;align-items:center;width:100%;padding-top:90px;padding-bottom:90px;"]),UE={ticketCount:0};var $E=Object(r.default)(ke.a).withConfig({displayName:"TicketTagTable___StyledDeskAgentAvatar",componentId:"sc-1hcsqn7-1"})(["margin-right:8px;"]),BE=Object(r.default)(V.Ub).withConfig({displayName:"TicketTagTable___StyledPaginator",componentId:"sc-1hcsqn7-2"})(["margin-left:auto;"]);const VE=({data:e,status:t,page:n,pageSize:i,order:s,query:r,updateParams:l,isAddMode:d,emptyView:u,onAddModeExit:p})=>{const g=Object(E.a)(),h=Object(b.g)(e=>e.desk.agent),m=(()=>{const{pid:e,region:t}=Object(L.a)(),n=SE();return Object(a.useCallback)(async a=>{n({type:"CREATE_TAG_START"});try{const{data:i}=await Object(N.createTag)(e,t,{name:a});n({type:"CREATE_TAG_SUCCESS",payload:{newTag:i,status:"reloading"}})}catch(e){n({type:"CREATE_TAG_FAIL",payload:{error:e}})}},[n,e,t])})(),{tabs:f,createTagRequest:{status:j,newTag:y,error:O}}=EE(),v=f.every(e=>0===e.data.count),x=Object(a.useMemo)(()=>[{dataIndex:"name",title:g.formatMessage({id:"desk.settings.tags.columns.name"}),sorter:!0,defaultSortOrder:{name:"ascend","-name":"descend"}[s],render:e=>e===UE?Object(W.jsx)(fE,{onCancelButtonClick:p,onSubmit:m,isSubmitting:"pending"===j,serverError:O}):Object(W.jsx)(LE,{tag:e})},{dataIndex:"ticketCount",title:g.formatMessage({id:"desk.settings.tags.columns.tickets"}),width:116,sorter:!0,defaultSortOrder:{ticket_count:"ascend","-ticket_count":"descend"}[s]},{dataIndex:"createdBy",title:g.formatMessage({id:"desk.settings.tags.columns.createdBy"}),render:e=>{const t=e===UE?h:e.createdBy;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($E,{profileID:t.email,imageUrl:t.photoThumbnailUrl,size:20}),t.displayName]})},width:171,sorter:!0,defaultSortOrder:{created_by:"ascend","-created_by":"descend"}[s]},{dataIndex:"createdAt",title:g.formatMessage({id:"desk.settings.tags.columns.createdOn"}),render:e=>{if(e===UE)return Object(W.jsx)(yE,{});const t=c()(e.createdAt).format("lll");return e.id===(null==y?void 0:y.id)?Object(W.jsx)(xE,{timestamp:e.createdAt,children:t}):t},width:163,sorter:!0,defaultSortOrder:{created_at:"ascend","-created_at":"descend"}[s]}],[O,j,h,g,y,p,s,m]),_=Object(a.useMemo)(()=>d?[UE,...e.results]:e.results,[e.results,d]),C=Object(a.useMemo)(()=>{if("success"===t||"failed"===t)return r?Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Large,icon:"no-search",title:g.formatMessage({id:"desk.settings.tags.search.emptyView.title"}),description:g.formatMessage({id:"desk.settings.tags.search.emptyView.description"},{query:r}),withoutMarginBottom:!0}):v?Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Large,icon:"no-data",title:g.formatMessage({id:"desk.settings.tags.emptyView.default.title"}),description:g.formatMessage({id:"desk.settings.tags.emptyView.default.description"}),withoutMarginBottom:!0}):u},[u,g,v,r,t]);return Object(W.jsx)(o.Table,{columns:x,dataSource:_,onSortByUpdated:(e,t)=>{null!=e&&l({order:`${"descend"===t?"-":""}${uE()(null==e?void 0:e.dataIndex)}`})},loading:"fetching"===t,showScrollbars:!0,emptyView:Object(W.jsx)(FE,{children:C}),footer:Object(W.jsx)(BE,{current:n,pageSize:i,total:e.count,onChange:(e,t)=>{p(),l({page:e,pageSize:t})},onItemsPerPageChange:(e,t)=>l({page:e,pageSize:t})})},`TicketTagTable_${s}`)},zE=Object(a.createContext)(void 0),HE=(e,t,n)=>{const{key:i,page:s,pageSize:r,order:o}=e,l=Object(a.useRef)(e),c=_E(n);Object(a.useEffect)(()=>{l.current=e}),Object(a.useEffect)(()=>{"fetching"!==l.current.status&&c({status:i,page:s,pageSize:r,order:o,query:t})},[c,i,o,s,r,t])};var qE=Object(r.default)(iy.b).withConfig({displayName:"TicketTags___StyledAppSettingsContainer",componentId:"sc-8woseo-0"})([""," + *{margin-top:4px;}> *:last-child{margin-top:24px;}"],iy.a),GE=Object(r.default)(o.Button).withConfig({displayName:"TicketTags___StyledButton",componentId:"sc-8woseo-1"})(["flex:none;margin-left:8px;"]);const WE=()=>{const e=Object(E.a)(),t=(()=>{const{page:e,pageSize:t,order:n,status:i,q:s,updateParams:r}=Object(B.a)({page:1,pageSize:10,order:"-created_at",status:"ACTIVE",q:""}),o=Object(a.useRef)(r);Object(a.useEffect)(()=>{o.current=r});const l=Object(a.useCallback)(e=>o.current(e),[]);return[Object(a.useMemo)(()=>({page:e,pageSize:t,order:n,status:i,q:s}),[n,e,t,s,i]),l]})(),[n,i]=t,s=(r={query:n.q,selectedTab:n.status,tabs:["ACTIVE","ARCHIVE"].map(e=>Object.assign({key:e,data:{results:[],count:0},status:"idle",error:null},n.status===e?{page:n.page,pageSize:n.pageSize,order:n.order}:{page:1,pageSize:10,order:"-created_at"})),isAddMode:!1,createTagRequest:{status:"idle",newTag:null,error:null}},Object(a.useReducer)(CE,r));var r;const[l,c]=s,d=Object(a.useRef)(l);Object(a.useEffect)(()=>{d.current=l},[l]),Object(a.useEffect)(()=>{const{query:e}=d.current;c({type:"UPDATE_STATE_BY_QUERY_PARAMS",payload:{queryParams:n,resetTheOtherTabToFirstPage:n.q!==e}})},[c,n]);const{isAddMode:u,query:p,selectedTab:g,tabs:h,createTagRequest:{newTag:m,status:f}}=l,[b,j]=h;HE(b,p,c),HE(j,p,c);const y=_E(c);Object(a.useEffect)(()=>{if(null==m)return;const{selectedTab:e,tabs:t,query:n}=d.current,a=t.find(e=>"ACTIVE"===e.key);"ACTIVE"!==e||"-created_at"!==(null==a?void 0:a.order)||1!==(null==a?void 0:a.page)||n?i({status:"ACTIVE",order:"-created_at",page:1,q:""}):y({...a,status:"ACTIVE",query:n}),c({type:"SET_ADD_MODE",payload:{isAddMode:!1}})},[m,y,d,i,c]);const O={query:p,updateParams:i,isAddMode:u,onAddModeExit:()=>{c({type:"CREATE_TAG_CLEAR_ERROR"}),c({type:"SET_ADD_MODE",payload:{isAddMode:!1}})}},v=Object(W.jsx)(VE,{...b,data:{...b.data,results:m&&"reloading"===f?[m,...b.data.results]:b.data.results},...O,emptyView:Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Large,icon:"no-data",title:e.formatMessage({id:"desk.settings.tags.emptyView.active.title"}),description:e.formatMessage({id:"desk.settings.tags.emptyView.active.description"}),withoutMarginBottom:!0})}),x=Object(W.jsx)(VE,{...j,...O,emptyView:Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Large,icon:"no-data",title:e.formatMessage({id:"desk.settings.tags.emptyView.archived.title"}),description:e.formatMessage({id:"desk.settings.tags.emptyView.archived.description"}),withoutMarginBottom:!0})}),_=Object(a.useCallback)(()=>{const{pageSize:e,order:t}=h[0];i({status:"ACTIVE",page:1,pageSize:e,order:t}),c({type:"SET_ADD_MODE",payload:{isAddMode:!0}})},[c,h,i]),C=Object(a.useCallback)((e,t)=>{const{page:n,pageSize:a,order:s}=h[e];i({status:t,page:n,pageSize:a,order:s}),c({type:"SET_ADD_MODE",payload:{isAddMode:!1}})},[c,h,i]);return Object(W.jsx)(zE.Provider,{value:t,children:Object(W.jsx)(TE,{value:s,children:Object(W.jsxs)(qE,{isTableView:!0,children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"desk.settings.tags.title"})}),Object(W.jsxs)(iy.a.Actions,{children:[Object(W.jsx)(cE,{defaultInputValue:p,onSubmit:e=>{(p||"")!==e.trim()&&i({q:e.trim(),page:1})},onReset:()=>i({q:"",page:1})}),Object(W.jsx)(GE,{buttonType:"primary",icon:"plus",size:"small",disabled:u,onClick:_,children:e.formatMessage({id:"desk.settings.tags.btn.createTag"})})]})]}),Object(W.jsx)(V.ec,{tabs:[{label:e.formatMessage({id:"desk.settings.tags.tabs.active"},{count:b.data.count}),value:"ACTIVE"},{label:e.formatMessage({id:"desk.settings.tags.tabs.archived"},{count:j.data.count}),value:"ARCHIVE"}],activeTab:Math.max(0,h.findIndex(e=>e.key===g)),handleTabClick:C,hasBorder:!1,styles:{tabMenus:"padding-top: 0;"}}),"ACTIVE"===g&&v,"ARCHIVE"===g&&x]})})})};var KE=n("Daba");const YE=Object(r.default)(V.Pb).withConfig({displayName:"agentGroups__SearchInput",componentId:"sc-1n0u0ua-0"})(["flex:none;"]),QE=r.default.b.withConfig({displayName:"agentGroups__AgentGroupName",componentId:"sc-1n0u0ua-1"})(["font-weight:500;"]),JE=Object(r.default)(o.Lozenge).withConfig({displayName:"agentGroups__DefaultTeamLozenge",componentId:"sc-1n0u0ua-2"})(["margin-left:8px;"]),XE=r.default.div.withConfig({displayName:"agentGroups__DescriptionWrapper",componentId:"sc-1n0u0ua-3"})(["width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),ZE=Object(r.default)(o.Tooltip).withConfig({displayName:"agentGroups__DescriptionTooltip",componentId:"sc-1n0u0ua-4"})(["max-width:100%;"]),eI=r.default.div.withConfig({displayName:"agentGroups__MemberCountColumnWrapper",componentId:"sc-1n0u0ua-5"})(["display:flex;align-items:center;& > svg{margin-right:6px;}"]),tI=Object(r.default)(V.D).withConfig({displayName:"agentGroups__CopyKeyButton",componentId:"sc-1n0u0ua-6"})(["margin:-3px 0;margin-left:4px;"]),nI=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"agentGroups__AgentTeamTable",componentId:"sc-1n0u0ua-7"})(["height:100%;border-right:0;border-left:0;border-bottom:0;"]);var aI=Object(r.default)(nI).withConfig({displayName:"agentGroups___StyledAgentTeamTable",componentId:"sc-1n0u0ua-8"})(["tr:not(:hover) ","{display:none;}"],tI);const iI=Object(r.default)(V.Ub).withConfig({displayName:"agentGroups__AgentGroupsPagination",componentId:"sc-1n0u0ua-9"})(["margin-left:auto;"]),sI=({intl:e,linkToAgentGroupDetail:t})=>[{dataIndex:"name",title:e.formatMessage({id:"desk.team.table.column.name"}),flex:1.8,sorter:!0,render:({id:n,name:a,key:i})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.Link,{variant:o.LinkVariant.Neutral,onClick:()=>{t(n)},children:Object(W.jsx)(QE,{children:a})}),Object(H.getIsDefaultTeam)(i)&&Object(W.jsx)(JE,{color:"neutral",children:e.formatMessage({id:"desk.team.lozenge.defaultTeam"})})]})},{dataIndex:"key",title:e.formatMessage({id:"desk.team.table.column.key"}),flex:1.3,sorter:!0,onCell:()=>({"data-test-id":"KeyCell"}),render:({key:e})=>e?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(V.jc,{tooltipDisplay:"inline-block",children:e}),Object(W.jsx)(tI,{size:"xsmall",copyableText:e})]}):f.Z},{dataIndex:"description",title:e.formatMessage({id:"desk.team.table.column.description"}),flex:3,sorter:!0,onCell:()=>({"data-test-id":"DescriptionCell"}),render:({description:e})=>e?Object(W.jsx)(ZE,{content:e,placement:"bottom",children:Object(W.jsx)(XE,{children:e})}):f.Z},{dataIndex:"memberCount",title:e.formatMessage({id:"desk.team.table.column.agents"}),flex:.8,sorter:!0,render:({memberCount:e})=>Object(W.jsxs)(eI,{children:[Object(W.jsx)(o.Icon,{icon:"user",size:16,color:Object(o.cssVariables)("neutral-6")}),e]})}];var rI=Object(r.default)(KE.a).withConfig({displayName:"agentGroups___StyledAppSettingPageHeader",componentId:"sc-1n0u0ua-10"})(["* + ","{margin-top:24px;}"],e=>e._css),oI=Object(r.default)(KE.a.Actions).withConfig({displayName:"agentGroups___StyledAppSettingPageHeaderActions",componentId:"sc-1n0u0ua-11"})(["& > * + *{margin-left:8px;}"]);const lI=()=>{const e=Object(E.a)(),t=Object(s.k)(),n=Object(b.f)(),i=Object(b.g)(e=>e.agentGroups),[l,c]=Object(a.useState)(f.a),{isPermitted:d}=Object(P.h)(),u=Object(a.useCallback)(e=>{e&&n(j.b.showDialogsRequest({dialogTypes:A.a.DeleteAgentGroup,dialogProps:{groupId:e.id,groupName:e.name}}))},[n]),p=e=>{t.push(`teams/form/${e}`)},g=Object(a.useCallback)(e=>{n(j.d.updateAgentGroupQuery({query:e||""}))},[n]),h=Object(a.useCallback)(()=>{""!==i.query&&n(j.d.fetchAgentGroupsRequest({offset:0,limit:f.a,query:""})),n(j.d.updateAgentGroupQuery({query:""}))},[i.query,n]),m=Object(a.useCallback)(e=>{n(j.d.fetchAgentGroupsRequest({offset:0,limit:f.a,query:e}))},[n]),y=e=>{p(e.id)},O=(e,t)=>{c(t),n(j.d.fetchAgentGroupsRequest({offset:(e-1)*t,limit:t,query:i.query}))};return Object(a.useEffect)(()=>(n(j.d.fetchAgentGroupsRequest({offset:0,limit:f.a})),()=>{n(j.d.resetAgentGroups())}),[n]),Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)(KE.b,{isTableView:!0,children:[Object(W.jsxs)(rI,{_css:KE.a.Description,children:[Object(W.jsx)(KE.a.Title,{children:e.formatMessage({id:"desk.team.setting.title"})}),Object(W.jsxs)(oI,{children:[Object(W.jsx)(YE,{handleChange:g,handleSearchClear:h,value:i.query,ph:e.formatMessage({id:"desk.team.setting.header.search.ph"}),handleSubmit:m,styles:{SearchInput:Object(r.css)(["width:224px;"])}}),d(["desk.admin"])&&Object(W.jsx)(pe.Link,{to:"teams/form",children:Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",children:e.formatMessage({id:"desk.team.setting.header.create.btn"})})})]}),Object(W.jsx)(KE.a.Description,{children:e.formatMessage({id:"desk.team.setting.description"})})]}),Object(W.jsx)(aI,{loading:i.isFetching,showScrollbars:!0,columns:sI({intl:e,linkToAgentGroupDetail:p}),rowActions:t=>[Object(W.jsx)(o.OverflowMenu,{items:Object(H.getIsDefaultTeam)(t.key)?[{label:e.formatMessage({id:"desk.team.edit.button"}),onClick:()=>y(t)}]:[{label:e.formatMessage({id:"desk.team.edit.button"}),onClick:()=>y(t)},{label:e.formatMessage({id:"desk.team.delete.button"}),onClick:()=>u(t)}],stopClickEventPropagation:!0},t.id)],dataSource:""===i.query?i.items.sort(H.sortToDefaultTeamFirst):i.items,emptyView:""!==i.query&&Object(W.jsx)(z.a,{icon:"no-search",title:e.formatMessage({id:"desk.team.table.body.noMatch.header"}),description:e.formatMessage({id:"desk.team.table.body.noMatch.description"},{query:i.query})}),footer:i.items.length>0&&Object(W.jsx)(iI,{current:i.pagination.page||1,total:i.pagination.count||0,pageSize:l,pageSizeOptions:[10,20,50,100],onChange:O,onItemsPerPageChange:O})})]})})},cI=r.default.li.withConfig({displayName:"AgentGroupMemberListItem__Item",componentId:"g13o9o-0"})(["display:flex;flex-direction:row;align-items:center;width:100%;padding:6px 16px;cursor:pointer;background:",";opacity:",";transform:translateX(",");transition:background 0.3s ",",opacity 0.3s ",",transform 0.3s ",";& + &{margin-top:1px;}&:hover{background:",";}"],({$isHighlighted:e})=>e?Object(o.cssVariables)("neutral-1"):"white",({$isSelected:e})=>e?0:1,({$isSelected:e})=>e?"50px":0,no.e,no.e,no.e,Object(o.cssVariables)("neutral-1")),dI=Object(r.default)(V.c).withConfig({displayName:"AgentGroupMemberListItem__AgentInfoItem",componentId:"g13o9o-1"})(["width:calc(100% - 84px);"]),uI=Object(a.forwardRef)(({agentGroupMember:e,query:t,isItemSelected:n,isHighlighted:a,index:i,downshiftHelpers:s},r)=>{const{getItemProps:o}=s;return Object(W.jsx)(cI,{ref:r,...o({key:e.id,item:e,index:i}),$isSelected:n,$isHighlighted:!!a,children:Object(W.jsx)(dI,{agent:e,query:t,shouldShowActivationStatus:!0})})}),pI=r.default.div.withConfig({displayName:"AgentGroupMemberDropdown__Container",componentId:"sc-1khcp5o-0"})(["",""],({$isBlock:e})=>e&&Object(r.css)(["button[aria-haspopup='true']{width:100%;}"])),gI=r.default.div.withConfig({displayName:"AgentGroupMemberDropdown__PopoverContainer",componentId:"sc-1khcp5o-1"})(["z-index:999;border-radius:2px;background:white;width:","px;overflow:hidden;",";"],({$width:e})=>e||320,o.elevation.popover),hI=r.default.ul.withConfig({displayName:"AgentGroupMemberDropdown__AgentSearchListContainer",componentId:"sc-1khcp5o-2"})([""]),mI=r.default.div.withConfig({displayName:"AgentGroupMemberDropdown__SearchInputWrapper",componentId:"sc-1khcp5o-3"})([""]),fI=r.default.div.withConfig({displayName:"AgentGroupMemberDropdown__SpinnerWrapper",componentId:"sc-1khcp5o-4"})(["padding:32px;text-align:center;line-height:0;> *{display:inline-block;}"]),bI=r.default.div.withConfig({displayName:"AgentGroupMemberDropdown__EmptyViewWrapper",componentId:"sc-1khcp5o-5"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100px;"," color:",";a,a:hover{font-weight:600;}"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-5")),jI=r.default.span.withConfig({displayName:"AgentGroupMemberDropdown__EmptyViewInvitationDescription",componentId:"sc-1khcp5o-6"})(["display:block;margin-bottom:4px;padding:0 24px;font-size:14px;font-weight:500;color:",";text-align:center;"],Object(o.cssVariables)("neutral-6")),yI=({isOpen:e,onClear:t,...n})=>{const i=Object(a.useRef)(null);return Object(a.useEffect)(()=>{var t;e||(null==(t=i.current)||t.blur())},[e]),Object(W.jsx)(o.InputText,{role:"search",...n,ref:i,icons:[{buttonType:"secondary",icon:n.value?"close":"search","data-test-id":n.value?"ClearSearchQueryButton":"SearchButton",onClick:()=>{var e;t(),null==(e=i.current)||e.focus()}}],"data-test-id":"AgentSearchInput"})},OI=(e,t)=>{switch(t.type){case pn.default.stateChangeTypes.clickItem:case pn.default.stateChangeTypes.keyDownEnter:return{...t,isOpen:!0};default:return t}};var vI=Object(r.default)(o.Link).withConfig({displayName:"AgentGroupMemberDropdown___StyledLink",componentId:"sc-1khcp5o-7"})(["font-size:14px;"]);const xI=i.a.memo(({className:e,selectedMembers:t,isBlock:n=!1,onChange:i})=>{var s,r;const l=Object(E.a)(),c=Object(a.useRef)(null),[d,u]=Object(a.useState)(""),[p,g]=Object(a.useState)(null!=(s=null==(r=c.current)?void 0:r.clientWidth)?s:0),[h,m]=Object(a.useState)({}),b=Object(P.L)(h),j=(e=>{const{pid:t,region:n}=Object(L.a)();return mj(e=>Object(N.fetchAgents)(t,n,{limit:30,offset:0,status:[f.c.ACTIVE,f.c.PENDING],query:e}),e)})(d),{items:y}=j,O=Object(P.S)(n?e=>{g(e.target.clientWidth)}:void 0);Object(a.useEffect)(()=>{0===y.filter(e=>t.every(t=>t.id!==e.id)).length&&j.hasNext&&j.loadMore(),b.current&&Object.keys(b.current).filter(e=>!!b.current[e]).filter(e=>!t.find(t=>t.id.toString()===e)).forEach(e=>{setTimeout(()=>{m({...b.current,[e]:!1})},300)})},[j,b,y,t]),Object(a.useEffect)(()=>{const e=y.reduce((e,t)=>(e[t.id]=!1,e),{});m(e)},[y]);const v=Object(a.useCallback)(e=>()=>{m({...h,[e.id]:!0}),setTimeout(()=>{i(e)},300)},[h,i]);return Object(W.jsx)(pn.default,{itemToString:()=>"Search team member",stateReducer:OI,onChange:e=>v(e)(),children:({getRootProps:a,getInputProps:i,getItemProps:s,isOpen:r,highlightedIndex:g,openMenu:m,closeMenu:b,selectItemAtIndex:v,setHighlightedIndex:x})=>{const{ref:_,...C}=a(void 0,{suppressRefError:!0}),{scrollBarRef:k,spinnerWrapperRef:w,isSearchResultsVisible:T,status:S,hasNext:E,loadMoreError:I,loadMore:M}=j,A=i({"aria-label":r?"Close menu":"Open menu",onFocus:m,onBlur:b}),N=T||""===d?y.map(({id:e,email:t,displayName:n,photoThumbnailUrl:a,agentType:i,tier:s,status:r,role:o,bot:l})=>{var c;return{id:e,email:t,displayName:n,photoThumbnailUrl:a,agentType:i,tier:s,status:r,role:o,botType:null!=(c=null==l?void 0:l.type)?c:null,autoRoutingEnabled:r===f.c.ACTIVE&&"AGENT"===o&&null==l,isReadyToActivate:i===f.h.BOT&&l?l.isReadyToActivate:null}}).filter(e=>t.every(t=>t.id!==e.id)):[];return Object(W.jsx)(un.c,{children:Object(W.jsxs)(pI,{...C,ref:e=>{_(e),O(e),c.current=e},className:e,$isBlock:n,children:[Object(W.jsx)(cn.a,{children:({ref:e})=>Object(W.jsx)(mI,{ref:e,children:Object(W.jsx)(yI,{...A,isOpen:r,placeholder:l.formatMessage({id:"desk.team.form.addAgents.placeholder"}),value:d,size:"medium",onChange:e=>{u(e.target.value)},onClear:()=>{u("")}})})}),r&&Object(W.jsx)(dn.a,{placement:"bottom-start",modifiers:{preventOverflow:{boundariesElement:"viewport"},offset:{offset:"0, 2"}},positionFixed:!0,children:({ref:e,style:n})=>Object(W.jsx)(gI,{ref:e,style:n,$width:p,children:Object(W.jsxs)(o.ScrollBar,{style:{maxHeight:312},ref:e=>{var t;k(null!=(t=null==e?void 0:e.node)?t:null)},children:[Object(W.jsx)(hI,{"data-test-id":"AgentSearchListContainer",children:N.map((e,t)=>Object(W.jsx)(uI,{agentGroupMember:e,query:d,index:t,isItemSelected:h[e.id]||!1,isHighlighted:g===t,downshiftHelpers:{setHighlightedIndex:x,selectItemAtIndex:v,getItemProps:s}},e.id))}),E&&N.length>0&&(I?Object(W.jsx)(hj,{isLoading:"loadmore-pending"===S,error:I,onRetry:M}):Object(W.jsx)(fI,{ref:w,children:Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-9")})})),!E&&0===N.length&&Object(W.jsx)(bI,{"data-test-id":"AgentSearchEmpty",children:y.length>0&&y.length===t.length&&""===d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(jI,{children:l.formatMessage({id:"desk.team.form.addAgents.empty.invite.description"})}),Object(W.jsx)(vI,{href:`${Object(D.i)()}/settings/members`,target:"_blank",iconProps:{icon:"users",size:16},children:l.formatMessage({id:"desk.team.form.addAgents.empty.invite"})})]}):l.formatMessage({id:"desk.team.form.addAgents.empty.noResults"})})]})})},N.length<7?"repaint":"render")]})})}})}),_I=r.default.div.withConfig({displayName:"SelectedAgentsTable__ContextualHelpTooltipContainer",componentId:"sc-919k4z-0"})(["display:flex;align-items:center;"]),CI=Object(r.default)(o.ContextualHelp).withConfig({displayName:"SelectedAgentsTable__ContextualHelpTooltip",componentId:"sc-919k4z-1"})(["display:inline-block;height:24px;"]),kI=r.default.span.withConfig({displayName:"SelectedAgentsTable__AutoRoutingEnabledTooltipText",componentId:"sc-919k4z-2"})(["display:inline-block;flex:1;font-size:14px;font-weight:400;line-height:1.43;text-align:left;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-7")),wI=r.default.div.withConfig({displayName:"SelectedAgentsTable__TableContainer",componentId:"sc-919k4z-3"})(["",";"],({isEmpty:e})=>e&&Object(r.css)(["tbody{border-bottom:0;}"])),TI=r.default.div.withConfig({displayName:"SelectedAgentsTable__EmptyContainer",componentId:"sc-919k4z-4"})(["display:flex;align-items:flex-end;justify-content:center;width:100%;height:100%;"]),SI=r.default.span.withConfig({displayName:"SelectedAgentsTable__EmptyText",componentId:"sc-919k4z-5"})(["display:block;font-size:14px;font-weight:500;line-height:1.43;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-3")),EI=r.default.div.withConfig({displayName:"SelectedAgentsTable__TableHeadStatusContainer",componentId:"sc-919k4z-6"})(["display:flex;align-items:center;"]),II=r.default.span.withConfig({displayName:"SelectedAgentsTable__TableHeadStatusText",componentId:"sc-919k4z-7"})(["display:inline-block;"]),MI=Object(r.default)(o.TooltipTargetIcon).withConfig({displayName:"SelectedAgentsTable__TableHeadStatusInfoIcon",componentId:"sc-919k4z-8"})(["display:inline-flex;"]),DI=r.default.div.withConfig({displayName:"SelectedAgentsTable__ToggleWrapper",componentId:"sc-919k4z-9"})(["display:flex;height:20px;"]),AI=Object(r.default)(o.Toggle).withConfig({displayName:"SelectedAgentsTable__AutoRoutingEnabledToggle",componentId:"sc-919k4z-10"})([":disabled{pointer-events:none;}"]);var NI=Object(r.default)(AI).withConfig({displayName:"SelectedAgentsTable___StyledAutoRoutingEnabledToggle",componentId:"sc-919k4z-11"})(["cursor:not-allowed;pointer-events:none;"]),RI=Object(r.default)("div").withConfig({displayName:"SelectedAgentsTable___StyledDiv",componentId:"sc-919k4z-12"})(["width:200px;"]),PI=Object(r.default)(o.Toggle).withConfig({displayName:"SelectedAgentsTable___StyledToggle",componentId:"sc-919k4z-13"})(["cursor:not-allowed;pointer-events:none;"]),LI=Object(r.default)(o.Tooltip).withConfig({displayName:"SelectedAgentsTable___StyledTooltip",componentId:"sc-919k4z-14"})(["line-height:0;"]);const FI=i.a.memo(({selectedAgents:e,isFetching:t,updateSelectedAgentStatus:n,handleAutoRoutingEnabledClick:i,handleRemoveSelectedAgentClick:s})=>{const l=Object(E.a)(),c=Object(P.W)(),d=Object(a.useRef)({}),u=e=>t=>{d.current[e]=t},p=e=>t=>{var n;t.stopPropagation(),null==(n=d.current[e])||n.show()},g=e=>t=>{var n;t.stopPropagation(),null==(n=d.current[e])||n.hide()},h=(e,t)=>{const a=[];if(e.status===f.c.PENDING){const t=e.agentType===f.h.BOT&&!e.isReadyToActivate;a.push({label:l.formatMessage({id:"desk.team.form.selectedAgents.actions.addPendingAgent"}),disabled:t,tooltip:t?{content:Object(W.jsx)(RI,{children:l.formatMessage({id:"desk.team.form.selectedAgents.actions.addPendingAgent.disabled.tooltipContent"})}),placement:"top",popperProps:{positionFixed:!0}}:void 0,onClick:()=>{(({id:e,status:t})=>{t===f.c.PENDING&&c({dialogTypes:A.a.AgentActivationStatusChange,dialogProps:{agentId:e,fromStatus:f.c.PENDING,toStatus:f.c.ACTIVE,onSuccess:e=>n({id:e.id,status:e.status,autoRoutingEnabled:"ADMIN"!==e.role&&e.agentType!==f.h.BOT})}})})(e)}})}return a.push({label:l.formatMessage({id:"desk.team.form.selectedAgents.actions.removeAgent"}),onClick:s(t)}),a};return Object(W.jsx)(wI,{isEmpty:0===e.length,"data-test-id":"SelectedAgentsTableContainer",children:Object(W.jsx)(o.Table,{rowKey:"id",dataSource:e,loading:t,columns:[{key:"agent",title:l.formatMessage({id:"desk.team.form.selectedAgents.th.agent"}),flex:2.25,render:e=>Object(W.jsx)(V.c,{agent:e})},{key:"route",title:Object(W.jsxs)(_I,{"data-test-id":"AutoRoutingEnabledTooltip",children:[l.formatMessage({id:"desk.team.form.selectedAgents.th.autoRoutingEnabled"}),Object(W.jsx)(CI,{content:Object(W.jsx)(kI,{children:l.formatMessage({id:"desk.team.form.selectedAgents.th.autoRoutingEnabled.tooltip"})}),tooltipContentStyle:Object(r.css)(["width:296px;word-break:break-word;"]),children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),flex:1,render:({id:e,status:t,autoRoutingEnabled:n,agentType:a},s)=>a===f.h.BOT?Object(W.jsx)(o.Tooltip,{trigger:o.TooltipTrigger.Manual,ref:u(e),placement:"top",portalId:"portal_popup",content:l.formatMessage({id:"desk.team.form.selectedAgents.status.bot.tooltip"}),variant:o.TooltipVariant.Dark,children:Object(W.jsx)(DI,{onMouseEnter:p(e),onMouseLeave:g(e),children:Object(W.jsx)(PI,{checked:n,disabled:!0})})}):t===f.c.PENDING?Object(W.jsx)(LI,{trigger:o.TooltipTrigger.Manual,ref:u(e),placement:"top",variant:o.TooltipVariant.Dark,portalId:"portal_popup",content:l.formatMessage({id:"desk.team.form.selectedAgents.status.pending.tooltip"}),children:Object(W.jsx)(DI,{onMouseEnter:p(e),onMouseLeave:g(e),children:Object(W.jsx)(NI,{checked:n,disabled:!0})})}):Object(W.jsx)(o.Toggle,{checked:n,onClick:i(s)})},{key:"status",title:Object(W.jsxs)(EI,{children:[Object(W.jsx)(II,{children:l.formatMessage({id:"desk.team.form.selectedAgents.th.status"})}),Object(W.jsx)(V.a,{wrapperHeight:24,children:Object(W.jsx)(MI,{icon:"info"})})]}),flex:1,render:({status:e})=>Object(W.jsx)(V.b,{status:e})},{key:"actions",width:"32px",render:(e,t)=>Object(W.jsx)(o.OverflowMenu,{items:h(e,t),iconButtonProps:{buttonType:"tertiary"},stopClickEventPropagation:!0,popperProps:{placement:"bottom-end",positionFixed:!0}},"viewsTicketActions")}],emptyView:Object(W.jsx)(TI,{children:Object(W.jsx)(SI,{children:l.formatMessage({id:"desk.team.form.selectedAgents.empty.noAgent"})})})})})}),UI=r.default.form.withConfig({displayName:"AgentGroupsDetail__FormContainer",componentId:"sc-1sujrrg-0"})(["display:flex;flex-direction:column;padding-bottom:36px;max-width:1024px;position:relative;"]),$I=r.default.p.withConfig({displayName:"AgentGroupsDetail__AssistiveText",componentId:"sc-1sujrrg-1"})(["margin-top:4px;",";color:",";"],o.Typography["caption-01"],Object(o.cssVariables)("neutral-6")),BI=r.default.div.withConfig({displayName:"AgentGroupsDetail__FormFooter",componentId:"sc-1sujrrg-2"})(["display:flex;justify-content:flex-end;margin-top:24px;button:first-child{margin-right:8px;}"]),VI=()=>{const e=Object(s.k)(),t=Object(s.n)(),n=Object(E.a)(),i=Object(P.c)(),{pid:r,region:l}=Object(L.a)(),c=Object(P.W)(),d=t&&t.params.id?parseInt(t.params.id):0,u=d>0,{formState:p,control:g,errors:h,watch:m,reset:f,register:b,getValues:j,setValue:y,handleSubmit:O}=Object(_i.d)({defaultValues:{name:"",key:"",description:"",agents:[]},mode:"onChange"}),v=m("agents"),[{data:x,status:_},C]=Object(P.g)(()=>Object(N.fetchAgentGroup)(r,l,{groupId:d}),[d,r,l]),[{status:k},w]=Object(P.g)(e=>Object(N.createAgentGroup)(r,l,e),[r,l]),[{status:T},S]=Object(P.g)(({name:e,agents:t,description:n})=>Object(N.updateAgentGroup)(r,l,{groupId:d,name:e,agents:t,description:n}),[d,r,l]),I=Object(a.useMemo)(()=>Object(H.debouncePromise)(async e=>{try{const{data:{result:t}}=await Object(N.checkAgentGroupNameDuplicate)(r,l,{name:e});return t||n.formatMessage({id:"desk.team.form.name.error.unique"})}catch(e){return Object(H.logException)(e),n.formatMessage({id:"desk.team.form.name.error.unique.serverError"})}},400),[n,r,l]),M=Object(a.useMemo)(()=>Object(H.debouncePromise)(async e=>{try{const{data:{result:t}}=await Object(N.checkAgentGroupKeyDuplicate)(r,l,{key:e});return t||n.formatMessage({id:"desk.team.form.key.error.unique"})}catch(e){return Object(H.logException)(e),n.formatMessage({id:"desk.team.form.key.error.unique.serverError"})}},400),[n,r,l]),D="loading"===_,R="loading"===k||"loading"===T,F=u&&x&&Object(H.getIsDefaultTeam)(x.data.key),U=Object(a.useCallback)(e=>h[e]?{hasError:!0,message:h[e].message||""}:void 0,[h]),$=Object(a.useCallback)(()=>{e.push(`/${i}/desk/settings/teams`)},[i,e]);Object(a.useEffect)(()=>{u&&C()},[C,u]),Object(a.useEffect)(()=>{if(x){const{name:e,key:t,description:n,members:a}=x.data;f({name:e,key:t,description:n,agents:a})}},[x,f,y]),Object(a.useEffect)(()=>{"success"!==k?"error"!==k?"success"!==T?"error"!==T||o.toast.error({message:n.formatMessage({id:"desk.team.form.toast.update.fail"})}):o.toast.success({message:n.formatMessage({id:"desk.team.form.toast.update.success"})}):o.toast.error({message:n.formatMessage({id:"desk.team.form.toast.create.fail"})}):o.toast.success({message:n.formatMessage({id:"desk.team.form.toast.create.success"})})},[k,$,n,T]),Object(a.useEffect)(()=>{p.isSubmitted&&p.isSubmitSuccessful&&$()},[p.isSubmitted,p.isSubmitSuccessful,$]);const B=Object(a.useCallback)(t=>{c({dialogTypes:A.a.DeleteAgentGroup,dialogProps:{groupId:d,groupName:t.name,onSuccess:e.goBack}})},[d,e,c]),z=Object(a.useCallback)(e=>{const{id:t,status:n,autoRoutingEnabled:a}=e,i=j("agents"),s=i.findIndex(({id:e})=>e===t);if(s>-1){const e=i[s];y("agents",[...i.slice(0,s),{...e,status:n,autoRoutingEnabled:a},...i.slice(s+1)],{shouldDirty:!0})}},[j,y]),q=Object(a.useCallback)(async({name:e,key:t,description:n})=>{const a=j("agents").map(({id:e,autoRoutingEnabled:t})=>({id:e,autoRoutingEnabled:t}));u?await S({name:e,agents:a,description:n}):await w({name:e,key:t,description:n,agents:a})},[w,j,u,S]),G=Object(a.useCallback)(e=>{const{value:t,onChange:n}=e;return Object(W.jsx)(xI,{selectedMembers:t,isBlock:!0,onChange:e=>{n([...t,e])}})},[]);return D?Object(W.jsx)(o.SpinnerFull,{}):Object(W.jsxs)(iy.b,{children:[R&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsx)(V.wc,{when:p.isDirty&&!p.isSubmitted}),Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:`/${i}/desk/settings/teams`}),Object(W.jsx)(iy.a.Title,{children:u?null==x?void 0:x.data.name:n.formatMessage({id:"desk.team.form.create.title"})}),Object(W.jsx)(iy.a.Actions,{children:!F&&u&&Object(W.jsx)("div",{"data-test-id":"DeleteAgentGroupMenuWrapper",children:Object(W.jsx)(o.OverflowMenu,{items:[{label:n.formatMessage({id:"desk.team.form.edit.overflowMenu.delete"}),onClick:()=>{x&&B(x.data)}}]})})})]}),Object(W.jsxs)(UI,{onSubmit:O(q),children:[Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(iy.i,{title:n.formatMessage({id:"desk.team.form.name.title"}),titleColumns:5,children:Object(W.jsx)(o.InputText,{ref:b({validate:{unique:e=>!p.dirtyFields.name||I(e),minLength:e=>e.trim().length>0||n.formatMessage({id:"desk.team.form.name.error.minimum"}),maxLength:e=>e.trim().length<=30||n.formatMessage({id:"desk.team.form.name.error.maximum"})}}),name:"name",placeholder:n.formatMessage({id:"desk.team.form.name.placeholder"}),error:U("name")})}),!F&&Object(W.jsxs)(iy.i,{title:n.formatMessage({id:"desk.team.form.key.title"}),titleColumns:5,children:[Object(W.jsx)("div",{"data-test-id":"KeyWrapper",children:Object(W.jsx)(o.InputText,{ref:b({validate:{unique:e=>!p.dirtyFields.key||M(e),minLength:e=>e.trim().length>0||n.formatMessage({id:"desk.team.form.key.error.minimum"}),maxLength:e=>e.trim().length<=30||n.formatMessage({id:"desk.team.form.key.error.maximum"}),start:e=>/^[a-z0-9]*$/.test(e.trim().charAt(0))||n.formatMessage({id:"desk.team.form.key.error.start"}),allowed:e=>/^[a-z0-9-]*$/.test(e.trim())||n.formatMessage({id:"desk.team.form.key.error.allowed"})}}),name:"key",placeholder:n.formatMessage({id:"desk.team.form.key.placeholder"}),readOnly:u,error:U("key")})}),Object(W.jsx)($I,{children:n.formatMessage({id:"desk.team.form.key.assistive"})})]}),Object(W.jsx)(iy.i,{title:n.formatMessage({id:"desk.team.form.description.title"}),titleColumns:5,children:Object(W.jsx)(o.InputText,{ref:b({validate:{maxLength:e=>e.trim().length<=120||n.formatMessage({id:"desk.team.form.description.error.maximum"})}}),name:"description",placeholder:n.formatMessage({id:"desk.team.form.description.placeholder"}),error:U("description")})}),Object(W.jsx)(iy.i,{titleColumns:5,title:n.formatMessage({id:"desk.team.form.addAgents.header.title"}),description:n.formatMessage({id:"desk.team.form.addAgents.header.description"}),children:Object(W.jsx)(_i.a,{control:g,name:"agents",render:G})}),Object(W.jsx)(iy.i,{titleColumns:5,title:n.formatMessage({id:"desk.team.form.selectedAgents.header.title"}),gridItemConfig:{subject:{alignSelf:"start"}},description:n.formatMessage({id:"desk.team.form.selectedAgents.header.description"}),children:Object(W.jsx)(FI,{selectedAgents:v,updateSelectedAgentStatus:z,isFetching:D,handleAutoRoutingEnabledClick:e=>()=>{const t=j("agents"),n=t[e];y("agents",[...t.slice(0,e),{...n,autoRoutingEnabled:!n.autoRoutingEnabled},...t.slice(e+1)],{shouldDirty:!0})},handleRemoveSelectedAgentClick:e=>()=>{const t=j("agents").slice(0);t.splice(e,1),y("agents",t,{shouldDirty:!0})}})})]}),Object(W.jsxs)(BI,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",type:"button",onClick:$,"data-test-id":"Cancel",children:n.formatMessage({id:"desk.team.form.cancel.button"})}),Object(W.jsx)(o.Button,{buttonType:"primary",type:"submit","data-test-id":"Save",children:n.formatMessage({id:"desk.team.form.save.button"})})]})]})]})},zI=({closeTicketWithoutConfirmation:e,isUpdating:t,updateProjectRequest:n})=>{const a=Object(E.a)();return Object(W.jsx)(iy.r,{"data-test-id":"SettingAllowAgentToCloseTicketToggle",title:a.formatMessage({id:"desk.settings.automation.allowAgentToCloseTicket.title"}),description:a.formatMessage({id:"desk.settings.automation.allowAgentToCloseTicket.desc"}),confirmDialogProps:{title:a.formatMessage({id:e?"desk.settings.automation.allowAgentToCloseTicket.dialog.title.off":"desk.settings.automation.allowAgentToCloseTicket.dialog.title.on"}),description:a.formatMessage({id:e?"desk.settings.automation.allowAgentToCloseTicket.dialog.desc.off":"desk.settings.automation.allowAgentToCloseTicket.dialog.desc.on"}),confirmText:a.formatMessage({id:e?"desk.settings.automation.allowAgentToCloseTicket.dialog.button.off.confirm":"desk.settings.automation.allowAgentToCloseTicket.dialog.button.on.confirm"}),cancelText:a.formatMessage({id:"desk.settings.automation.allowAgentToCloseTicket.dialog.button.cancel"}),onConfirm:()=>n({closeTicketWithoutConfirmation:!e})},checked:e,isFetching:t})};var HI=Object(r.default)("b").withConfig({displayName:"BulkTransferEnabled___StyledB",componentId:"blzfw6-0"})(["font-weight:600;"]);const qI=Object(a.memo)(({bulkTransferEnabled:e,isUpdating:t,updateProjectRequest:n})=>{const a=Object(E.a)();return Object(W.jsx)(iy.r,{"data-test-id":"SettingBulkTransferEnabledToggle",title:a.formatMessage({id:"desk.settings.automation.bulkTransferEnabled.title"}),titleColumns:6,description:a.formatMessage({id:"desk.settings.automation.bulkTransferEnabled.description"},{b:e=>Object(W.jsx)(HI,{children:e})}),confirmDialogProps:{title:a.formatMessage({id:e?"desk.settings.automation.bulkTransferEnabled.dialog.on2off.title":"desk.settings.automation.bulkTransferEnabled.dialog.off2on.title"}),description:a.formatMessage({id:e?"desk.settings.automation.bulkTransferEnabled.dialog.desc.on2off":"desk.settings.automation.bulkTransferEnabled.dialog.desc.off2on"}),confirmText:a.formatMessage({id:e?"desk.settings.automation.bulkTransferEnabled.dialog.on2off.button.confirm":"desk.settings.automation.bulkTransferEnabled.dialog.off2on.button.confirm"}),onConfirm:()=>n({bulkTransferEnabled:!e})},checked:e,isFetching:t})}),GI=r.default.div.withConfig({displayName:"Satisfaction__ToggleContainer",componentId:"sc-189mpsr-0"})(["display:flex;align-items:center;> button{min-width:40px;margin-right:24px;}"]),WI=r.default.div.withConfig({displayName:"Satisfaction__ToggleFooter",componentId:"sc-189mpsr-1"})(["margin-top:16px;border-top:1px solid ",";padding-top:16px;"],Object(o.cssVariables)("neutral-3")),KI=Object(a.memo)(({desk:e,setUnsaved:t,updateProjectRequest:n})=>{var i,s,r,l;const c=Object(E.a)(),{customerSatisfactionEnabled:d,customerSatisfactionMessage:u,customerSatisfactionRatedMessage:p}=e.project,{formState:g,control:h,errors:m,reset:f,register:b,watch:j,handleSubmit:y}=Object(_i.d)({mode:"onChange",defaultValues:{customerSatisfactionEnabled:d,customerSatisfactionMessage:u,customerSatisfactionRatedMessage:p}});return Object(a.useEffect)(()=>{t(g.isDirty)},[g.isDirty,t]),Object(W.jsx)(iy.i,{title:c.formatMessage({id:"desk.settings.automation.satisfaction.title"}),description:c.formatMessage({id:"desk.settings.automation.satisfaction.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},showActions:g.isDirty,actions:[{key:"cancel",type:"button",label:c.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>f()},{key:"save",type:"submit",label:c.formatMessage({id:"label.save"}),buttonType:"primary",isLoading:e.isUpdating,disabled:e.isUpdating||Object.keys(m).length>0,form:"satisfaction"}],children:Object(W.jsxs)("form",{id:"satisfaction",onSubmit:y(e=>{n({...e,onSuccess:()=>f(e)})}),children:[Object(W.jsx)(GI,{children:Object(W.jsx)(_i.a,{name:"customerSatisfactionEnabled",control:h,defaultValue:d,render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(o.Toggle,{ref:i,name:a,checked:n,onChange:e,onBlur:t})})}),Object(W.jsxs)(WI,{children:[Object(W.jsx)(o.InputTextarea,{ref:b({required:c.formatMessage({id:"desk.settings.automation.satisfaction.rating.error.required"})}),name:"customerSatisfactionMessage",label:c.formatMessage({id:"desk.settings.automation.satisfaction.rating.title"}),disabled:!j("customerSatisfactionEnabled"),error:{hasError:!!m.customerSatisfactionMessage,message:null!=(i=null==(s=m.customerSatisfactionMessage)?void 0:s.message)?i:""}}),Object(W.jsx)(o.InputTextarea,{ref:b({required:c.formatMessage({id:"desk.settings.automation.satisfaction.completion.error.required"})}),name:"customerSatisfactionRatedMessage",label:c.formatMessage({id:"desk.settings.automation.satisfaction.completion.title"}),disabled:!j("customerSatisfactionEnabled"),error:{hasError:!!m.customerSatisfactionRatedMessage,message:null!=(r=null==(l=m.customerSatisfactionRatedMessage)?void 0:l.message)?r:""}})]})]})})}),YI=r.default.span.withConfig({displayName:"HourMinuteInput__TimeText",componentId:"sc-1q81aqk-0"})(["display:inline-block;font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";margin-left:8px;padding-top:9px;transition:color 0.2s ",";&:not(:last-child){margin-right:24px;}"],({disabled:e})=>e?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-10"),o.transitionDefault),QI=r.default.div.withConfig({displayName:"HourMinuteInput__HourMinuteWrapper",componentId:"sc-1q81aqk-1"})(["display:flex;",""],({disabled:e})=>e&&Object(r.css)(["","{color:"," !important;}"],YI,Object(o.cssVariables)("neutral-5"))),JI=r.default.div.withConfig({displayName:"HourMinuteInput__InputWrapper",componentId:"sc-1q81aqk-2"})(["width:134px;"]),XI={hasError:!1,message:""},ZI=({minutes:e=0,maxHour:t=167,disabled:n=!1,onChange:i,error:s=!1})=>{const r=Object(E.a)(),l=Object(a.useRef)(e),[c,d]=Object(a.useState)(Math.floor(e/60)),[u,p]=Object(a.useState)(e%60),[g,h]=Object(a.useState)(XI),[m,f]=Object(a.useState)(XI);return Object(a.useEffect)(()=>{e===l.current&&(d(Math.floor(e/60)),p(e%60))},[e]),Object(a.useEffect)(()=>{s||(h(XI),f(XI))},[s]),Object(W.jsxs)(QI,{disabled:n,children:[Object(W.jsx)(JI,{children:Object(W.jsx)(o.InputText,{pattern:"[0-9]*",value:c,onChange:e=>{const n=parseInt(e.target.value,10)||0;d(n);const a=n>t;h(a?{hasError:!0,message:r.formatMessage({id:"desk.settings.automation.hourMinuteInput.error.hour"},{limit:t})}:XI),null==i||i(n,u,a||(null==m?void 0:m.hasError))},error:null!=g&&g.hasError?g:XI,"data-test-id":"HourInput",disabled:n})}),Object(W.jsx)(YI,{children:r.formatMessage({id:"desk.settings.automation.hourMinuteInput.lbl.hour"})}),Object(W.jsx)(JI,{children:Object(W.jsx)(o.InputText,{pattern:"[0-9]*",value:u,onChange:e=>{const t=parseInt(e.target.value,10)||0;p(t);const n=t>59;f(n?{hasError:!0,message:r.formatMessage({id:"desk.settings.automation.hourMinuteInput.error.minutes"})}:XI),null==i||i(c,t,n||(null==g?void 0:g.hasError))},error:null!=m&&m.hasError?m:XI,"data-test-id":"MinuteInput",disabled:n})}),Object(W.jsx)(YI,{children:r.formatMessage({id:"desk.settings.automation.hourMinuteInput.lbl.minute"})})]})},eM=Object(r.default)(V.qc).withConfig({displayName:"activeToIdle__StyledLozenge",componentId:"sc-74wqkg-0"})(["display:inline-block;margin:0 6px;"]),tM=r.default.div.withConfig({displayName:"activeToIdle__ToggleContainer",componentId:"sc-74wqkg-1"})(["display:flex;> button{min-width:40px;margin-top:10px;margin-right:24px;}"]),nM=Object(a.memo)(({activeToIdleEnabled:e,activeToIdleDuration:t,isUpdating:n,setUnsaved:i,updateProjectRequest:s})=>{const r=Object(E.a)(),[l,c]=Object(a.useState)(t),[d,u]=Object(a.useState)(!1),p=Object(o.useForm)({onSubmit:e=>{s({...e,onSuccess:p.onSuccess,activeToIdleDuration:l})}}),g=Object(o.useField)("activeToIdleEnabled",p,{defaultValue:e||!1,isControlled:!0}),h=Object(a.useCallback)(e=>{p.onSubmit(e)},[p]),m=[g.updatable,l!==t].some(e=>e);Object(a.useEffect)(()=>{i(m)},[i,m]);return Object(W.jsx)(iy.i,{title:Object(W.jsx)("div",{style:{marginTop:"8px"},children:Object(W.jsx)(ge.a,{id:"desk.settings.automation.changeTicketStatusDuration.title",values:{from:Object(W.jsx)(eM,{ticketStatus:f.jc.ACTIVE}),to:Object(W.jsx)(eM,{ticketStatus:f.jc.IDLE})}})}),showActions:m,actions:[{key:"activeToIdleDuration-cancel",label:r.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>{p.reset(),c(t),u(!1)}},{key:"activeToIdleDuration-save",label:r.formatMessage({id:"label.save"}),buttonType:"primary",onClick:h,isLoading:n,disabled:d||n}],gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsxs)(tM,{children:[Object(W.jsx)(o.Toggle,{checked:g.value,onChange:e=>{g.updateValue(e)}}),Object(W.jsx)(ZI,{minutes:l,onChange:(e,t,n)=>{c(60*e+t||1),u(n)},error:d,disabled:!g.value})]})})}),aM=Object(a.memo)(({automaticCloseAfterInquireEnabled:e,isUpdating:t,updateProjectRequest:n})=>{const a=Object(E.a)();return Object(W.jsx)(iy.r,{"data-test-id":"SettingCustomerConfirmToggle",title:a.formatMessage({id:"desk.settings.automation.customerConfirm.title"}),description:a.formatMessage({id:"desk.settings.automation.customerConfirm.description"}),titleColumns:6,confirmDialogProps:{title:a.formatMessage({id:e?"desk.settings.automation.customerConfirm.dialog.on2off.title":"desk.settings.automation.customerConfirm.dialog.off2on.title"}),description:a.formatMessage({id:e?"desk.settings.automation.customerConfirm.dialog.desc.on2off":"desk.settings.automation.customerConfirm.dialog.desc.off2on"}),confirmText:a.formatMessage({id:e?"desk.settings.automation.customerConfirm.dialog.on2off.button.confirm":"desk.settings.automation.customerConfirm.dialog.off2on.button.confirm"}),onConfirm:()=>n({automaticCloseAfterInquireEnabled:!e})},checked:e,isFetching:t})}),iM=Object(r.default)(V.qc).withConfig({displayName:"idleToClosed__StyledLozenge",componentId:"vly4fs-0"})(["display:inline-block;margin:0 6px;"]),sM=r.default.div.withConfig({displayName:"idleToClosed__ToggleContainer",componentId:"vly4fs-1"})(["display:flex;> button{min-width:40px;margin-top:10px;margin-right:24px;}"]),rM=r.default.div.withConfig({displayName:"idleToClosed__ToggleFooter",componentId:"vly4fs-2"})(["margin-top:16px;border-top:1px solid ",";padding-top:16px;"],Object(o.cssVariables)("neutral-3")),oM=Object(a.memo)(({isAutomaticCloseIdleEnabled:e,idleToCloseDuration:t,idleTicketAutomaticCloseMessage:n,isUpdating:i,setUnsaved:s,updateProjectRequest:r})=>{const l=Object(E.a)(),[c,d]=Object(a.useState)(t),[u,p]=Object(a.useState)(!1),g=Object(o.useForm)({onSubmit:e=>{r({...e,onSuccess:g.onSuccess,idleToCloseDuration:c})}}),h=Object(o.useField)("isAutomaticCloseIdleEnabled",g,{defaultValue:e||!1,isControlled:!0}),m=Object(o.useField)("idleTicketAutomaticCloseMessage",g,{defaultValue:n||"",validate:e=>e.trim()?"":l.formatMessage({id:"desk.settings.automation.idleToClosed.error.required"})}),b=Object(a.useCallback)(e=>{g.onSubmit(e)},[g]),j=[h.updatable,c!==t,m.updatable].includes(!0);Object(a.useEffect)(()=>{s(j)},[j,s]);return Object(W.jsxs)(Dy.c,{title:Object(W.jsx)("div",{style:{marginTop:"8px"},children:Object(W.jsx)(ge.a,{id:"desk.settings.automation.changeTicketStatusDuration.title",values:{from:Object(W.jsx)(iM,{ticketStatus:f.jc.IDLE}),to:Object(W.jsx)(iM,{ticketStatus:f.jc.CLOSED})}})}),gridItemConfig:{subject:{alignSelf:"start"}},showActions:j,actions:[{key:"idleToClosed-cancel",label:l.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>{g.reset(),d(t),p(!1)}},{key:"idleToClosed-save",label:l.formatMessage({id:"label.save"}),buttonType:"primary",onClick:b,isLoading:i,disabled:u||i}],children:[Object(W.jsxs)(sM,{children:[Object(W.jsx)(o.Toggle,{checked:h.value,onChange:e=>{h.updateValue(e)}}),Object(W.jsx)(ZI,{minutes:c,disabled:!h.value,onChange:(e,t,n)=>{d(60*e+t||1),p(n)},error:u})]}),Object(W.jsx)(rM,{children:Object(W.jsx)(o.InputTextarea,{ref:m.ref,name:m.name,defaultValue:m.value,error:m.error,disabled:!h.value,onChange:m.onChange})})]})});var lM;!function(e){e.ALL="all",e.TIER="tier"}(lM||(lM={}));const cM=r.default.form.withConfig({displayName:"liveTicketLimit__Form",componentId:"n12xlz-0"})(["display:flex;flex-direction:column;align-items:flex-start;"]),dM=r.default.div.withConfig({displayName:"liveTicketLimit__RadioWrapper",componentId:"n12xlz-1"})(["margin-bottom:8px;"]),uM=Object(r.default)(o.InputText).withConfig({displayName:"liveTicketLimit__Input",componentId:"n12xlz-2"})(["width:100%;padding-left:28px;input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type='number']{-moz-appearance:textfield;}"]);var pM=Object(r.default)(uM).withConfig({displayName:"liveTicketLimit___StyledInput",componentId:"n12xlz-3"})(["margin-bottom:8px;"]);const gM=Object(a.memo)(({liveTicketLimit:e,autoRoutingLimits:t,isUpdating:n,setUnsaved:i,updateProjectRequest:s,enableTierBasedRouting:r})=>{var l,c;const d=Object(E.a)(),u=null!=(l=t.EXPERT)?l:e,p=null!=(c=t.INTERMEDIATE)?c:e,{formState:g,errors:h,reset:m,register:f,watch:b,handleSubmit:j}=Object(_i.d)({mode:"onChange",defaultValues:{liveTicketLimit:e,expertTierTicketLimit:u,intermediateTierTicketLimit:p,routingBy:r?lM.TIER:lM.ALL}}),y=Object(a.useCallback)(e=>h[e]?{hasError:!0,message:h[e].message||""}:void 0,[h]),O={validate:{required:e=>e.trim().length>0||d.formatMessage({id:"desk.settings.automation.autoTicketRouting.error.required"})},pattern:{value:/^[0-9]*$/,message:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.error.number"})},valueAsNumber:!0};return Object(a.useEffect)(()=>{i(g.isDirty)},[g.isDirty,i]),Object(W.jsx)(iy.i,{title:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.title"}),titleColumns:6,description:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.description"}),showActions:g.isDirty,gridItemConfig:{subject:{alignSelf:"start"}},actions:[{key:"cancel",type:"button",label:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.button.cancel"}),buttonType:"tertiary",onClick:()=>m()},{key:"save",type:"submit",label:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.button.save"}),buttonType:"primary",isLoading:n,disabled:n||!g.isValid,form:"autoTicketRouting"}],children:Object(W.jsxs)(cM,{id:"autoTicketRouting",onSubmit:j(e=>{const t={autoRoutingLimits:e.routingBy===lM.TIER?{EXPERT:e.expertTierTicketLimit,INTERMEDIATE:e.intermediateTierTicketLimit}:void 0,liveTicketLimit:e.routingBy===lM.ALL?e.liveTicketLimit:void 0,enableTierBasedRouting:e.routingBy===lM.TIER};s({...t,onSuccess:()=>m(e)})}),children:[Object(W.jsx)(dM,{children:Object(W.jsx)(o.Radio,{ref:f,name:"routingBy",role:"radio",label:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.routingBy.all"}),value:"all"})}),b("routingBy")===lM.ALL&&Object(W.jsx)(pM,{"data-test-id":"LiveTicketLimitInput",ref:f(O),name:"liveTicketLimit",defaultValue:e,error:y("liveTicketLimit")}),Object(W.jsx)(dM,{children:Object(W.jsx)(o.Radio,{ref:f,name:"routingBy",role:"radio",label:d.formatMessage({id:"desk.settings.automation.autoTicketRouting.routingBy.tier"}),value:"tier"})}),b("routingBy")===lM.TIER&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(uM,{"data-test-id":"ExpertTierTicketLimitInput",ref:f(O),label:d.formatMessage({id:"desk.agent.tier.expert"}),name:"expertTierTicketLimit",defaultValue:u,error:y("expertTierTicketLimit")}),Object(W.jsx)(uM,{"data-test-id":"IntermediateTierTicketLimitInput",ref:f(O),label:d.formatMessage({id:"desk.agent.tier.intermediate"}),name:"intermediateTierTicketLimit",defaultValue:p,error:y("intermediateTierTicketLimit")})]})]})})}),hM=Object(r.default)(V.qc).withConfig({displayName:"manualAssignTransfer__InlineTicketStatusLozenge",componentId:"si0vi3-0"})(["display:inline;"]),mM=Object(a.memo)(({ticketTransferToMaxedOutAgentEnabled:e,isUpdating:t,updateProjectRequest:n})=>{const{title:a,description:i,confirmDialog:s}=(e=>{const t=Object(E.a)(),n={title:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.title"}),description:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.description"})};return e?{...n,confirmDialog:{title:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.on2off.title"}),description:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.desc.on2off"},{active:Object(W.jsx)(hM,{ticketStatus:f.jc.ACTIVE})}),confirmText:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.on2off.button.confirm"})}}:{...n,confirmDialog:{title:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.off2on.title"}),description:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.desc.off2on"},{active:Object(W.jsx)(hM,{ticketStatus:f.jc.ACTIVE})}),confirmText:t.formatMessage({id:"desk.settings.automation.manualAssignTransfer.dialog.off2on.button.confirm"})}}})(e);return Object(W.jsx)(iy.r,{title:a,titleColumns:6,description:i,confirmDialogProps:{title:s.title,description:s.description,confirmText:s.confirmText,onConfirm:()=>n({ticketTransferToMaxedOutAgentEnabled:!e})},checked:e,isFetching:t})}),fM=Object(r.default)(V.qc).withConfig({displayName:"wipToPending__StyledLozenge",componentId:"sc-5q87cw-0"})(["display:inline-block;margin:0 6px;"]),bM=r.default.div.withConfig({displayName:"wipToPending__ToggleContainer",componentId:"sc-5q87cw-1"})(["display:flex;> button{min-width:40px;margin-top:10px;margin-right:24px;}"]),jM=Object(a.memo)(({automaticWipToPendingEnabled:e,wipToPendingDuration:t,isUpdating:n,setUnsaved:i,updateProjectRequest:s})=>{const r=Object(E.a)(),[l,c]=Object(a.useState)(t),[d,u]=Object(a.useState)(!1),p=Object(o.useForm)({onSubmit:e=>{s({...e,onSuccess:p.onSuccess,wipToPendingDuration:l})}}),g=Object(o.useField)("automaticWipToPendingEnabled",p,{defaultValue:e,isControlled:!0}),h=Object(a.useCallback)(e=>{p.onSubmit(e)},[p]),m=[g.updatable,l!==t].includes(!0);return Object(a.useEffect)(()=>{i(m)},[m,i]),Object(W.jsx)(iy.i,{title:Object(W.jsx)("div",{style:{marginTop:"8px"},children:Object(W.jsx)(ge.a,{id:"desk.settings.automation.changeTicketStatusDuration.title",values:{from:Object(W.jsx)(fM,{ticketStatus:f.jc.WIP}),to:Object(W.jsx)(fM,{ticketStatus:f.jc.PENDING})}})}),showActions:m,actions:[{key:"wipToPending-cancel",label:r.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>{p.reset(),c(t),u(!1)}},{key:"wipToPending-save",label:r.formatMessage({id:"label.save"}),buttonType:"primary",onClick:h,isLoading:n,disabled:d||n}],children:Object(W.jsxs)(bM,{children:[Object(W.jsx)(o.Toggle,{checked:g.value,onChange:e=>{g.updateValue(e)}}),Object(W.jsx)(ZI,{minutes:l,disabled:!g.value,onChange:(e,t,n)=>{c(60*e+t||1),u(n)},error:d})]})})}),yM={updateProjectRequest:j.d.updateProjectRequest},OM=Object(b.d)(e=>({desk:e.desk}),yM)(({desk:e,updateProjectRequest:t,setUnsaved:n})=>{const a=Object(E.a)(),{isUpdating:i}=e,{liveTicketLimit:s,ticketTransferToMaxedOutAgentEnabled:r,bulkTransferEnabled:o,automaticCloseAfterInquireEnabled:l,activeToIdleEnabled:c,activeToIdleDuration:d,isAutomaticCloseIdleEnabled:u,idleToCloseDuration:p,idleTicketAutomaticCloseMessage:g,automaticWipToPendingEnabled:h,wipToPendingDuration:m,closeTicketWithoutConfirmation:f,autoRoutingLimits:b,enableTierBasedRouting:j}=e.project;return Object(W.jsxs)(KE.b,{children:[Object(W.jsx)(KE.a,{children:Object(W.jsx)(KE.a.Title,{children:a.formatMessage({id:"desk.settings.automation.title"})})}),Object(W.jsxs)(Dy.d,{children:[Object(W.jsx)(gM,{liveTicketLimit:s,isUpdating:i,setUnsaved:n,updateProjectRequest:t,autoRoutingLimits:b,enableTierBasedRouting:j}),Object(W.jsx)(mM,{ticketTransferToMaxedOutAgentEnabled:r,isUpdating:i,updateProjectRequest:t}),Object(W.jsx)(qI,{bulkTransferEnabled:o,isUpdating:i,updateProjectRequest:t}),Object(W.jsx)(zI,{closeTicketWithoutConfirmation:f,isUpdating:i,updateProjectRequest:t}),Object(W.jsx)(aM,{automaticCloseAfterInquireEnabled:l,isUpdating:i,updateProjectRequest:t}),Object(W.jsx)(KI,{desk:e,setUnsaved:n,updateProjectRequest:t})]}),Object(W.jsxs)(Dy.d,{children:[Object(W.jsx)(nM,{activeToIdleEnabled:c,activeToIdleDuration:d,isUpdating:i,setUnsaved:n,updateProjectRequest:t}),Object(W.jsx)(oM,{isAutomaticCloseIdleEnabled:u,idleToCloseDuration:p,idleTicketAutomaticCloseMessage:g,isUpdating:i,setUnsaved:n,updateProjectRequest:t}),Object(W.jsx)(jM,{automaticWipToPendingEnabled:h,wipToPendingDuration:m,isUpdating:i,setUnsaved:n,updateProjectRequest:t})]})]})}),vM={fetchApiTokensRequest:j.d.fetchApiTokensRequest,deleteApiTokenRequest:j.d.deleteApiTokenRequest,showDialogsRequest:j.b.showDialogsRequest},xM=r.default.div.withConfig({displayName:"credentials__Container",componentId:"m3jn1j-0"})(["position:relative;display:flex;flex-direction:column;height:100%;"]),_M=Object(r.default)(o.Button).withConfig({displayName:"credentials__GenerateButton",componentId:"m3jn1j-1"})(["margin-left:auto;"]),CM=Object(r.default)(o.IconButton).withConfig({displayName:"credentials__IconTableButton",componentId:"m3jn1j-2"})(["position:relative;z-index:10;margin:-6px 0;"]),kM=Object(r.default)(V.o).withConfig({displayName:"credentials__TableCard",componentId:"m3jn1j-3"})(["display:flex;flex-direction:column;width:100%;flex:1;min-height:0;padding:24px;padding-bottom:0;"]),wM=r.default.h3.withConfig({displayName:"credentials__TableTitle",componentId:"m3jn1j-4"})(["flex:none;font-size:16px;font-weight:500;line-height:20px;letter-spacing:-0.15px;color:",";margin-bottom:24px;"],Object(o.cssVariables)("neutral-10")),TM=Object(r.default)(o.Table).withConfig({displayName:"credentials__CredentialsTable",componentId:"m3jn1j-5"})(["flex:1;border-right:0;border-left:0;td{position:relative;overflow:visible;}"]),SM=Object(r.default)(V.Ub).withConfig({displayName:"credentials__Pagination",componentId:"m3jn1j-6"})(["margin-left:auto;"]);var EM=Object(r.default)(KE.b).withConfig({displayName:"credentials___StyledAppSettingsContainer",componentId:"m3jn1j-7"})(["padding-bottom:32px;"]);const IM=Object(a.memo)(({apiTokens:e,showDialogsRequest:t,fetchApiTokensRequest:n,deleteApiTokenRequest:i})=>{const s=Object(E.a)(),{page:o,pageSize:l,setPagination:d}=Object(P.Q)(1,20),u=(n,a)=>()=>{const{items:r}=e,o=1===r.length;t({dialogTypes:A.a.Delete,dialogProps:{title:s.formatMessage({id:"desk.settings.credentials.dialog.delete.title"},{keyName:a}),description:s.formatMessage({id:"desk.settings.credentials.dialog.delete.description"}),confirmText:s.formatMessage({id:"desk.settings.credentials.dialog.delete.button.confirm"}),cancelText:s.formatMessage({id:"desk.settings.credentials.dialog.delete.button.cancel"}),onDelete:()=>i({id:n,isLastItemOnPage:o})}})};return Object(a.useEffect)(()=>{n({offset:(o-1)*l,limit:l})},[n,o,l]),Object(W.jsxs)(EM,{isTableView:!0,children:[Object(W.jsxs)(KE.a,{children:[Object(W.jsx)(KE.a.Title,{children:s.formatMessage({id:"desk.settings.credentials.title"})}),Object(W.jsx)(KE.a.Actions,{children:Object(W.jsx)(_M,{buttonType:"primary",size:"small",icon:"plus",onClick:()=>{t({dialogTypes:A.a.CreateNewToken})},children:s.formatMessage({id:"desk.settings.credentials.button.generate"})})})]}),Object(W.jsx)(xM,{children:Object(W.jsxs)(kM,{children:[Object(W.jsx)(wM,{children:s.formatMessage({id:"desk.settings.credentials.header"})}),Object(W.jsx)(TM,{rowKey:"credentials-key",showScrollbars:!0,loading:e.isFetching,dataSource:e.items,columns:[{title:s.formatMessage({id:"desk.settings.credentials.table.th.name"}),dataIndex:"name",flex:2,sorter:!0},{title:s.formatMessage({id:"desk.settings.credentials.table.th.key"}),dataIndex:"token",flex:6,styles:Object(r.css)(["div{display:flex;align-items:center;margin:-6px 8px;}"]),render:({token:e})=>Object(W.jsxs)(W.Fragment,{children:[e,Object(W.jsx)(V.D,{copyableText:e})]})},{title:s.formatMessage({id:"desk.settings.credentials.table.th.created"}),dataIndex:"createdAt",flex:3,render:({createdAt:e})=>c()(e).format("lll")},{title:"",dataIndex:"id",sorter:!0,render:({id:e,name:t})=>Object(W.jsx)(CM,{size:"small",buttonType:"tertiary",icon:"delete",onClick:u(e,t)}),styles:Object(r.css)(["justify-content:flex-end;"])}],footer:Object(W.jsx)(SM,{current:o,total:e.pagination.count,pageSize:l,pageSizeOptions:[10,20,50,100],onChange:d,onItemsPerPageChange:(e,t)=>{d(1,t)}}),emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:s.formatMessage({id:"desk.settings.credentials.table.empty.title"}),description:Object(W.jsx)(ge.a,{id:"desk.settings.credentials.table.empty.desc",values:{break:Object(W.jsx)("br",{})}})})})]})})]})}),MM=Object(b.d)(e=>({apiTokens:e.desk.apiTokens}),vM)(IM),DM=r.default.div.withConfig({displayName:"CustomFields__Container",componentId:"kxo6nr-0"})(["position:relative;display:flex;flex-direction:column;height:100%;"]),AM=Object(r.default)(V.o).withConfig({displayName:"CustomFields__TableCard",componentId:"kxo6nr-1"})(["display:flex;flex-direction:column;width:100%;flex:1;min-height:0;padding:24px;padding-bottom:0;"]),NM=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"CustomFields__CustomFieldsTable",componentId:"kxo6nr-2"})(["height:100%;border-right:0;border-left:0;"]),RM=Object(r.default)(V.Ub).withConfig({displayName:"CustomFields__CustomFieldsPagination",componentId:"kxo6nr-3"})(["margin-left:auto;"]),PM=Object(a.memo)(({fields:e,fieldType:t,fetchFields:n,deleteField:i})=>{var r;const l=Object(E.a)(),d=Object(s.k)(),u=null==(r=Object(s.n)())?void 0:r.url,p=Object(P.W)(),{page:g,pageSize:h,setPagination:m}=Object(P.Q)(1,20);Object(a.useEffect)(()=>{n({offset:(g-1)*h,limit:h})},[n,g,h]);return Object(W.jsx)(DM,{children:Object(W.jsx)(AM,{children:Object(W.jsx)(NM,{className:"custom-field-table",rowKey:"id",dataSource:e.items,columns:[{title:l.formatMessage({id:"desk.customFields.list.column.label"}),dataIndex:"name",sorter:!0},{title:l.formatMessage({id:"desk.customFields.list.column.fieldKey"}),dataIndex:"key",sorter:!0},{title:l.formatMessage({id:"desk.customFields.list.column.type"}),dataIndex:"fieldType",sorter:!0,render:({fieldType:e})=>(e=>"STRING"===e?l.formatMessage({id:"desk.customFields.detail.field.fieldType.item.text"}):"INTEGER"===e?l.formatMessage({id:"desk.customFields.detail.field.fieldType.item.integer"}):"DROPDOWN"===e?l.formatMessage({id:"desk.customFields.detail.field.fieldType.item.dropdown"}):"LINK"===e?l.formatMessage({id:"desk.customFields.detail.field.fieldType.item.link"}):"")(e)},{title:l.formatMessage({id:"desk.customFields.list.column.lastUpdated"}),dataIndex:"updatedAt",sorter:!0,render:({updatedAt:e})=>c()(e).format("lll")}],rowActions:e=>{return[Object(W.jsx)(o.OverflowMenu,{items:[{label:l.formatMessage({id:"desk.customFields.customer.edit.button"}),onClick:(a=e.id,()=>{d.push(`${u}/${a}`)})},{label:l.formatMessage({id:"desk.customFields.customer.delete.button"}),onClick:(n=e,()=>{p({dialogTypes:A.a.Delete,dialogProps:{title:l.formatMessage({id:"desk.customFields.dialog.delete.title"},{fieldName:n.name}),description:"ticket"===t?l.formatMessage({id:"desk.ticketsFields.dialog.delete.description"}):l.formatMessage({id:"desk.customFields.dialog.delete.description"}),confirmText:l.formatMessage({id:"desk.dialogs.button.delete"}),cancelText:l.formatMessage({id:"desk.dialogs.button.cancel"}),onDelete:()=>i(n)}})})}],stopClickEventPropagation:!0},"customFieldsOverflow")];var n,a},onRow:e=>({onClick:()=>{d.push(`${u}/${e.id}`,{selectedRow:e})},style:{cursor:"pointer"}}),showScrollbars:!0,loading:e.isFetching,footer:Object(W.jsx)(RM,{current:g,total:e.total,pageSize:h,pageSizeOptions:[10,20,50,100],onChange:m,onItemsPerPageChange:(e,t)=>{m(1,t)}}),emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:"ticket"===t?l.formatMessage({id:"desk.settings.ticketFields.list.noResult.header"}):l.formatMessage({id:"desk.settings.customerFields.list.noResult.header"}),description:"ticket"===t?l.formatMessage({id:"desk.settings.ticketFields.list.noResult.desc"}):l.formatMessage({id:"desk.settings.customerFields.list.noResult.desc"})})})})})}),LM=Object(r.default)(o.Button).withConfig({displayName:"customerFields__AddFieldButton",componentId:"sc-1ktmq3t-0"})(["margin-left:auto;"]);var FM=Object(r.default)(KE.b).withConfig({displayName:"customerFields___StyledAppSettingsContainer",componentId:"sc-1ktmq3t-1"})(["padding-bottom:32px;"]),UM=Object(r.default)(KE.a).withConfig({displayName:"customerFields___StyledAppSettingPageHeader",componentId:"sc-1ktmq3t-2"})(["* + ","{margin-top:24px;}"],e=>e._css);const $M=()=>{const e=Object(E.a)(),t=Object(s.k)(),{customerFields:n}=Object(b.g)(e=>({customerFields:e.customerFields})),i=Object(b.f)(),r=Object(a.useCallback)(({offset:e,limit:t})=>{i(j.d.fetchCustomerFieldsRequest({offset:e,limit:t}))},[i]),o=Object(a.useCallback)(e=>{i(j.d.deleteCustomerFieldRequest(e))},[i]);return Object(W.jsxs)(FM,{isTableView:!0,children:[Object(W.jsxs)(UM,{_css:KE.a.Description,children:[Object(W.jsx)(KE.a.Title,{children:e.formatMessage({id:"desk.settings.customerFields.title"})}),Object(W.jsx)(KE.a.Actions,{children:Object(W.jsx)(LM,{buttonType:"primary",icon:"plus",size:"small",onClick:()=>t.push("customer-fields/create"),children:e.formatMessage({id:"desk.customFields.customer.settings.header.button.add"})})}),Object(W.jsx)(KE.a.Description,{children:e.formatMessage({id:"desk.customFields.customer.settings.header.description"})})]}),Object(W.jsx)(PM,{fields:n,fieldType:"customer",fetchFields:r,deleteField:o})]})};var BM=n("j+1e"),VM=n.n(BM);const zM=Object(r.default)(o.Icon).withConfig({displayName:"dragContainer__DragTargetIcon",componentId:"sc-1ccc3sd-0"})(["position:absolute;left:-32px;top:18px;"]),HM=Object(r.default)(o.IconButton).withConfig({displayName:"dragContainer__RemoveIconButton",componentId:"sc-1ccc3sd-1"})(["margin-left:8px;cursor:pointer;"]),qM=r.default.div.withConfig({displayName:"dragContainer__DropZone",componentId:"sc-1ccc3sd-2"})(["margin-top:8px;"]),GM=r.default.div.withConfig({displayName:"dragContainer__DraggableArea",componentId:"sc-1ccc3sd-3"})(["position:relative;display:flex;align-items:center;padding-top:8px;padding-bottom:8px;"]),WM=({options:{order:e,fields:t},addOption:n,changeOptionField:a,removeOption:i,reorderOptions:s})=>{const l=Object(E.a)(),c=e.length>1;return Object(W.jsxs)(BT,{onDragEnd:e=>{e.destination&&s({startIndex:e.source.index,endIndex:e.destination.index})},children:[Object(W.jsx)(SS,{droppableId:"droppable",children:n=>Object(W.jsxs)(qM,{...n.droppableProps,ref:n.innerRef,children:[e.map((n,s)=>Object(W.jsx)(_S,{draggableId:n,index:s,children:(l,d)=>{return Object(W.jsxs)(GM,{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,style:(d.isDragging,p=l.draggableProps.style,{userSelect:"none",outline:"none",...p}),children:[c&&Object(W.jsx)(zM,{icon:"drag-handle",size:20,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsx)(V.cb,{tabIndex:-1,type:"text",onChange:a(n),error:t[n].error,value:t[n].value,styles:(u=d.isDragging,{FORM_SET:Object(r.css)(["width:100%;"]),INPUT_TEXT:Object(r.css)(["",""],u&&Object(r.css)(["",";"],o.shadow[8]))}),"data-test-id":`CustomFieldDropdownOption-${e}`}),c&&Object(W.jsx)(HM,{icon:"close",iconSize:20,color:Object(o.cssVariables)("neutral-6"),onClick:i(s)})]});var u,p}},n)),n.placeholder]})}),Object(W.jsx)(o.Button,{variant:"ghost",buttonType:"primary",onClick:n,icon:Object(W.jsx)(o.Icon,{icon:"plus",size:20}),children:l.formatMessage({id:"desk.customFields.detail.field.addOption.button"})})]})};let KM;const YM=r.default.div.withConfig({displayName:"CustomFieldsDetail__ActionBeforeNode",componentId:"sc-1yszq3i-0"})([""]),{wideGridMediaQuery:QM}=Object(V.Hc)({wideGutterSize:24,narrowGutterSize:20,columns:8}),JM=Object(r.default)(iy.e).withConfig({displayName:"CustomFieldsDetail__SettingsSection",componentId:"sc-1yszq3i-1"})(["border:none;& + &{border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3")),XM=Object(r.default)(JM).withConfig({displayName:"CustomFieldsDetail__DropdownSection",componentId:"sc-1yszq3i-2"})(["border-bottom:2px solid ",";> div{display:flex;align-items:flex-start;}h6{padding-top:10px;}"],Object(o.cssVariables)("neutral-3")),ZM=r.default.div.withConfig({displayName:"CustomFieldsDetail__SettingsCardFooter",componentId:"sc-1yszq3i-3"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-end;width:100%;height:64px;background-color:",";overflow:hidden;padding:0 20px;border-bottom-left-radius:4px;border-bottom-right-radius:4px;"," > ","{margin-right:auto;}> button{min-width:96px;justify-content:center;}> button + button{margin-left:12px;}"],Object(o.cssVariables)("neutral-1"),QM(KM||(KM=(e=>e)`
  padding: 0 24px;
  `)),YM),eD=Object(r.default)(iy.g).withConfig({displayName:"CustomFieldsDetail__Container",componentId:"sc-1yszq3i-4"})(["margin-top:16px;border-radius:4px;border:1px solid ",";"],Object(o.cssVariables)("neutral-3")),tD=r.default.div.withConfig({displayName:"CustomFieldsDetail__LastUpdateBar",componentId:"sc-1yszq3i-5"})(["font-size:14px;color:",";"],Object(o.cssVariables)("neutral-6")),nD=Object(r.default)(o.OverflowMenu).withConfig({displayName:"CustomFieldsDetail__TitleOverflowMenu",componentId:"sc-1yszq3i-6"})(["margin-left:8px;"]),aD=r.default.div.withConfig({displayName:"CustomFieldsDetail__DropDownContainer",componentId:"sc-1yszq3i-7"})(["margin-top:16px;&::before{content:' ';display:block;width:100%;height:1px;background:",";}"],Object(o.cssVariables)("neutral-3")),iD=["STRING","INTEGER","DROPDOWN","LINK"],sD={ticket:"desk.customFields.detail.field.ticket.title",customer:"desk.customFields.detail.field.customer.title"},rD={STRING:"desk.customFields.detail.field.fieldType.item.text",INTEGER:"desk.customFields.detail.field.fieldType.item.integer",DROPDOWN:"desk.customFields.detail.field.fieldType.item.dropdown",LINK:"desk.customFields.detail.field.fieldType.item.link"},oD=i.a.memo(({name:e,customFields:t,editingFieldId:n,createField:i,updateField:r,deleteField:l,checkFieldKeyValidation:d,setCheckingStatusFieldKeyValidation:u})=>{const p=Object(E.a)(),g=Object(s.k)(),h=Object(P.W)(),m="number"==typeof n,f=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),{selectedCustomField:j}=t,y=iD[0],[O,v]=Object(a.useState)(y),[x,_]=Object(a.useState)(!1),[C,k]=Object(a.useState)({fields:{},order:[]}),w=Object(a.useRef)(!0),T=Object(a.useCallback)(()=>{const{order:e,fields:t}=C;return e.map(e=>t[e].value.trim())},[C]),S=Object(P.v)({onSubmit:e=>{const t=T();m?r({...e,id:null==j?void 0:j.id,readOnly:x,fieldType:O,options:"DROPDOWN"===O&&t}):i({...e,readOnly:x,fieldType:O,options:"DROPDOWN"===O&&t})}}),I=Object(P.u)("label",S,{defaultValue:"",placeholder:"",validate:e=>{const t=e.trim();return t?t.length>20?p.formatMessage({id:"desk.customFields.detail.field.label.error.maximum"}):"":p.formatMessage({id:"desk.customFields.detail.field.label.error.minimum"})}}),M=Object(P.u)("key",S,{defaultValue:"",placeholder:"",validate:e=>{const t=e.trim();return t?t.length>20?p.formatMessage({id:"desk.customFields.detail.field.key.error.maximum"}):/^[a-z0-9-]*$/.test(t)?/[a-z0-9]/.test(t.charAt(0))?"":p.formatMessage({id:"desk.customFields.detail.field.key.error.start"}):p.formatMessage({id:"desk.customFields.detail.field.key.error.allowed"}):p.formatMessage({id:"desk.customFields.detail.field.key.error.minimum"})}}),D=Object(P.u)("description",S,{defaultValue:"",placeholder:p.formatMessage({id:"desk.customFields.detail.ph.field.description"}),validate:e=>e.trim().length>200?p.formatMessage({id:"desk.customFields.detail.field.description.error.maximum"}):""}),N=`/${f}/desk/settings/${e}-fields`,R=Object(a.useCallback)(()=>g.push(N),[g,N]),L=Object(a.useCallback)(e=>()=>{_(e)},[]),F=Object(a.useCallback)(()=>{const{fields:e}=C,t={...e},n=Object.keys(e);n.forEach(a=>{""===e[a].value.trim()&&(1===n.length?t[a].error={hasError:!0,message:p.formatMessage({id:"desk.customFields.detail.field.dropdown.error.noOption"})}:t[a].error={hasError:!0,message:p.formatMessage({id:"desk.customFields.detail.field.dropdown.error.emptyOption"})})}),k({...C,fields:t})},[C,p]),U=Object(a.useCallback)(e=>{if(e.preventDefault(),"DROPDOWN"===O){const{fields:e}=C,t=T(),n=[...Object.values(e).map(e=>e.error.hasError),...t.map(e=>""===e.trim())].some(e=>e);F(),n||S.onSubmit()}else S.onSubmit()},[F,O,S,C,T]),$=Object(a.useCallback)(e=>{e.preventDefault(),R(),k({fields:{},order:[]})},[R]),B=ii()(e=>d({key:e}),150),z=Object(a.useCallback)(e=>{M.onChange(e),w.current&&(w.current=!1);const t=e.target.value.trim();M.validate&&""!==M.validate(t)||(u(!0),B(t))},[B,M,u]),H=Object(a.useCallback)(e=>{e.preventDefault();const t=`${String((new Date).getTime())}_${C.order.length}`,n={...C.fields};n[t]={value:"",error:{hasError:!1,message:""}},k({order:[...C.order,t],fields:n})},[C.fields,C.order]),q=Object(a.useCallback)(e=>()=>{const t=C.order[e],n={...C.fields};delete n[t];const a=Object.values(n).map(e=>e.value),i=Object.keys(n),s=VM()(a);delete s[""];const r=new Set;Object.values(s).forEach((e,t)=>{e>1&&r.add(Object.keys(s)[t])}),r.size>0?i.forEach(e=>{r.has(n[e].value)?n[e].error={hasError:!0,message:p.formatMessage({id:"desk.customFields.detail.field.dropdown.error.duplicated"})}:n[e].error={...n[e].error,hasError:!1}}):i.forEach(e=>{n[e].error={...n[e].error,hasError:!1}}),k({order:[...C.order.slice(0,e),...C.order.slice(e+1)],fields:n})},[C.fields,C.order,p]),G=Object(a.useCallback)(e=>t=>{const{value:n}=t.target;if(n.length>100)k({...C,fields:{...C.fields,[e]:{value:n,error:{hasError:!0,message:p.formatMessage({id:"desk.customFields.detail.field.dropdown.error.maximum"},{length:100-n.length})}}}});else{const t={...C.fields};t[e].value=n;const a=Object.values(t).map(e=>e.value),i=Object.keys(t),s=VM()(a);delete s[""];const r=new Set;Object.values(s).forEach((e,t)=>{e>1&&r.add(Object.keys(s)[t])}),r.size>0?i.forEach(e=>{r.has(t[e].value)?t[e].error={hasError:!0,message:p.formatMessage({id:"desk.customFields.detail.field.dropdown.error.duplicated"})}:t[e].error={...t[e].error,hasError:!1}}):i.forEach(e=>{t[e].error={...t[e].error,hasError:!1}}),k({...C,fields:t})}},[C,p]),K=Object(a.useCallback)(({startIndex:e,endIndex:t})=>{const n=[...C.order],[a]=n.splice(e,1);n.splice(t,0,a),k({...C,order:n})},[C]);Object(a.useEffect)(()=>{if(m)k(t.options);else{const e=`${String((new Date).getTime())}_${C.order.length}`,t={};t[e]={value:"",error:{hasError:!1,message:""}},k({order:[e],fields:t})}},[t.options,m]),Object(a.useEffect)(()=>{if(m&&j){const e=iD.find(e=>e===j.fieldType)||y;I.updateValue(j.name),M.updateValue(j.key),D.updateValue(j.description||""),v(e),_(j.readOnly)}},[j]),Object(a.useEffect)(()=>{const{keyValidation:e}=t;if(!w.current&&!e.isChecking){const t=M.validate&&M.validate(M.value)||"",n=""!==t;let a=M.error.message;n?a=t:e.isValid||(a=p.formatMessage({id:"desk.customFields.detail.field.key.error.unique"}));const i=!e.isValid||n;M.setValidationError({hasError:i,message:a})}},[t.keyValidation,M.value]);const Y=[{label:p.formatMessage({id:"desk.customFields.dialog.delete.button"}),onClick:()=>{h({dialogTypes:A.a.Delete,dialogProps:{title:p.formatMessage({id:"desk.customFields.dialog.delete.title"},{fieldName:null==j?void 0:j.name}),description:p.formatMessage({id:"desk.customFields.dialog.delete.description"}),cancelText:p.formatMessage({id:"desk.dialogs.button.cancel"}),confirmText:p.formatMessage({id:"desk.dialogs.button.delete"}),onDelete:()=>{j&&(l(j),R())}}})}}],Q=Object(a.useCallback)(e=>{v(e)},[]),J=Object(a.useMemo)(()=>Object(W.jsx)(JM,{title:Object(W.jsx)("label",{htmlFor:"custom-field-label-field",children:p.formatMessage({id:"desk.customFields.detail.field.label.title"})}),children:Object(W.jsx)(V.cb,{id:"custom-field-label-field",type:"text",innerRef:I.ref,name:I.name,value:I.value,placeholder:I.placeholder,disabled:!1,error:I.error,onChange:I.onChange,"data-test-id":"LabelInput"})}),[p,I.ref,I.name,I.value,I.placeholder,I.error,I.onChange]),X=Object(a.useMemo)(()=>Object(W.jsx)(JM,{title:Object(W.jsx)("label",{htmlFor:"custom-field-key-field",children:p.formatMessage({id:"desk.customFields.detail.field.key.title"})}),children:Object(W.jsx)(V.cb,{id:"custom-field-key-field",type:"text",innerRef:M.ref,name:M.name,value:M.value,placeholder:M.placeholder,disabled:m,error:M.error,onChange:z,assistiveText:p.formatMessage({id:"desk.customFields.detail.field.key.assistive"}),"data-test-id":"KeyInput"})}),[m,p,M.ref,M.name,M.value,M.placeholder,M.error,z]),Z=Object(a.useMemo)(()=>Object(W.jsx)(JM,{title:Object(W.jsx)("label",{htmlFor:"custom-field-description-field",children:p.formatMessage({id:"desk.customFields.detail.field.description.title"})}),children:Object(W.jsx)(V.cb,{id:"custom-field-description-field",type:"text",innerRef:D.ref,name:D.name,value:D.value,placeholder:D.placeholder,disabled:!1,error:D.error,onChange:D.onChange,"data-test-id":"DescriptionInput"})}),[p,D.ref,D.name,D.value,D.placeholder,D.error,D.onChange]),ee=Object(a.useCallback)(e=>p.formatMessage({id:rD[e]}),[p]),te=Object(a.useMemo)(()=>Object(W.jsxs)(XM,{title:p.formatMessage({id:"desk.customFields.detail.field.fieldType.title"}),children:[Object(W.jsx)(o.Dropdown,{width:"100%",items:iD,itemToString:ee,selectedItem:O,onChange:Q,useSearch:!1,disabled:m}),"DROPDOWN"===O&&Object(W.jsx)(aD,{children:Object(W.jsx)(WM,{options:C,addOption:H,changeOptionField:G,removeOption:q,reorderOptions:K})})]}),[p,ee,O,Q,m,C,H,G,q,K]),ne=Object(a.useMemo)(()=>Object(W.jsxs)(JM,{"data-test-id":"editPermissionTitleTest",title:p.formatMessage({id:"desk.customFields.detail.field.editPermission.title"}),children:[Object(W.jsx)("div",{children:Object(W.jsx)(V.vb,{name:"types",checked:!x,required:!0,onChange:L(!1),label:p.formatMessage({id:"desk.customFields.detail.field.editPermission.item.editable"})})}),Object(W.jsx)("div",{children:Object(W.jsx)(V.vb,{name:"types",checked:x,required:!0,onChange:L(!0),label:p.formatMessage({id:"desk.customFields.detail.field.editPermission.item.readonly"})})})]}),[L,p,x]);return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:N,"data-test-id":"BackButton"}),Object(W.jsx)(iy.a.Title,{children:m?j&&j.name||"":p.formatMessage({id:sD[e]})}),Object(W.jsx)(iy.a.Actions,{children:m&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(tD,{children:j&&p.formatMessage({id:"desk.customFields.detail.field.lastUpdated"},{time:c()(j.updatedAt).format("lll")})}),Object(W.jsx)(nD,{items:Y,iconButtonProps:{buttonType:"tertiary"}})]})})]}),Object(W.jsx)(eD,{children:Object(W.jsxs)("form",{onSubmit:U,children:[J,X,Z,te,ne,Object(W.jsxs)(ZM,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",onClick:$,"data-test-id":"CancelButton",children:p.formatMessage({id:"desk.customFields.detail.field.cancel.button"})},"cancel"),Object(W.jsx)(o.Button,{type:"submit",buttonType:"primary",size:"small","data-test-id":"SaveButton",children:p.formatMessage({id:"desk.customFields.detail.field.save.button"})},"save")]})]})})]})}),lD={createField:j.d.createCustomerFieldRequest,updateField:j.d.updateCustomerFieldRequest,deleteField:j.d.deleteCustomerFieldRequest,checkFieldKeyValidation:j.d.checkCustomerFieldKeyValidationRequest,setCheckingStatusFieldKeyValidation:j.d.setCheckingStatusCustomerFieldKeyValidation},cD=Object(b.d)(null,lD)(e=>{const{fieldId:t}=Object(s.m)(),n=Object(s.l)(),i=Object(b.f)(),r=Object(s.k)(),o=Object(P.V)(e=>e.customerFields),l=void 0===t?void 0:Number(t);return Object(a.useEffect)(()=>{var e;void 0===l||Number.isInteger(+l)?null!=(e=n.state)&&e.selectedRow?i(j.d.getCustomerFieldSuccess(n.state.selectedRow)):l&&i(j.d.getCustomerFieldRequest({id:+l})):r.replace("../customer-fields")},[i,l,t,r,n.state]),Object(W.jsx)(oD,{name:"customer",editingFieldId:l,customFields:o,...e})}),dD=Object(r.default)(o.Grid).withConfig({displayName:"WorkHours__WorkHoursGrid",componentId:"mvpect-0"})(["margin-top:12px;position:relative;display:",";"],({isEnabled:e})=>e?"grid":"none"),uD=Object(r.default)(o.GridItem).withConfig({displayName:"WorkHours__GridTopRow",componentId:"mvpect-1"})(["position:relative;margin-bottom:2px;height:56px;&:before{content:'';display:block;position:absolute;bottom:0;height:1px;background:",";}"],Object(o.cssVariables)("neutral-3")),pD=Object(r.default)(o.GridItem).withConfig({displayName:"WorkHours__GridMultipleHourItem",componentId:"mvpect-2"})(["",";"],({isMultipleHours:e})=>e&&"margin-top: -8px;"),gD=Object(r.default)(uD).withConfig({displayName:"WorkHours__GridToggleItem",componentId:"mvpect-3"})(["&:before{width:calc(100% + 16px);}"]),hD=Object(r.default)(uD).withConfig({displayName:"WorkHours__GridDropdownItem",componentId:"mvpect-4"})(["&:before{width:100%;}"]),mD=r.default.div.withConfig({displayName:"WorkHours__ToggleWrapper",componentId:"mvpect-5"})(["display:flex;align-items:center;height:40px;"]),fD=r.default.div.withConfig({displayName:"WorkHours__LeaveMessage",componentId:"mvpect-6"})(["padding-top:24px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),bD=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],jD=["Weekdays","Weekends"],yD={from:"09:00",to:"17:00"},OD=(()=>{const e=[];for(let t=0;t<=24;t++){const n=`${t<10?`0${t}`:t}`,a=String(t<13?t:t-12).padStart(2,"0"),i=`${n}:00`,s=`${n}:30`,r=`${a}:00 ${t<12||t>23?"AM":"PM"}`,o=`${a}:30 ${t<12||t>23?"AM":"PM"}`;e.push({value:i,label:r}),24!==t&&e.push({value:s,label:o})}return e})(),vD=OD.map(e=>e.value),xD=e=>OD.find(t=>t.value===e).label,_D=e=>Object(W.jsx)(o.Dropdown,{...e}),CD=i.a.memo(({project:e,isUpdating:t,setUnsaved:n})=>{const i=Object(E.a)(),s=Object(b.f)(),r=(e=>({operationHourEnabled:e.operationHourEnabled||!1,operationHourType:e.operationHourType||"WEEK",operationHourWeek:JSON.parse(e.operationHourWeek),operationHourDay:JSON.parse(e.operationHourDay),leaveMessage:e.leaveMessage||""}))(e),l=Object(a.useMemo)(()=>({WEEK:i.formatMessage({id:"desk.settings.general.workHour.dropdown.weekDays"}),DAY:i.formatMessage({id:"desk.settings.general.workHour.dropdown.workDays"})}),[i]),{register:c,errors:d,control:u,formState:p,watch:g,setValue:h,reset:m,handleSubmit:f}=Object(_i.d)({mode:"onChange",defaultValues:r}),y=e=>`operationHourDay.${e}.operationTimes`,O=e=>`operationHourWeek.${e}.operationTimes`,v=[Object(_i.c)({control:u,name:y("monday")}),Object(_i.c)({control:u,name:y("tuesday")}),Object(_i.c)({control:u,name:y("wednesday")}),Object(_i.c)({control:u,name:y("thursday")}),Object(_i.c)({control:u,name:y("friday")}),Object(_i.c)({control:u,name:y("saturday")}),Object(_i.c)({control:u,name:y("sunday")})],x=[Object(_i.c)({control:u,name:O("weekdays")}),Object(_i.c)({control:u,name:O("weekends")})],_=g("operationHourEnabled"),C=g("operationHourType"),k=g("operationHourDay"),w=g("operationHourWeek"),T=Object(a.useCallback)((e,t)=>{var n;return(null==(n=k[e].operationTimes)?void 0:n[t])||yD},[k]),S=Object(a.useCallback)((e,t)=>{var n;return(null==(n=w[e].operationTimes)?void 0:n[t])||yD},[w]),I=Object(a.useCallback)(e=>d[e]?{hasError:!0,message:d[e].message||""}:void 0,[d]),M=e=>Object.keys(e).some(t=>e[t].operationTimes.some(({from:e,to:t})=>null==e||null==t)),D=Object(a.useCallback)(e=>{p.isDirty&&(M(e.operationHourDay)||M(e.operationHourWeek)?o.toast.error({message:i.formatMessage({id:"desk.settings.general.workHour.save.error.invalid"})}):s(j.d.updateOperationHoursRequest({...e,onSuccess:e=>{const{operationHourEnabled:t,operationHourType:n,operationHourWeek:a,operationHourDay:s,leaveMessage:r}=e;o.toast.success({message:i.formatMessage({id:"desk.settings.general.workHour.message.update"})}),m({operationHourEnabled:t,operationHourType:n,operationHourWeek:JSON.parse(a),operationHourDay:JSON.parse(s),leaveMessage:r})}})))},[s,p.isDirty,i,m]),A=(e,t)=>()=>{e&&t({name:e})},N=(e,t)=>()=>{t(e)},R=(e,t)=>n=>{const{to:a}=k[e].operationTimes[t];n.localeCompare(a)>=0&&h(`operationHourDay.${e}.operationTimes[${t}].to`,null)},P=(e,t)=>n=>{const{to:a}=w[e].operationTimes[t];n.localeCompare(a)>=0&&h(`operationHourWeek.${e}.operationTimes[${t}].to`,null)},L=Object(a.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),m()},[m]);Object(a.useEffect)(()=>{n(p.isDirty)},[p.isDirty,n]);const F=t||!_;return Object(W.jsxs)(iy.i,{title:i.formatMessage({id:"desk.settings.general.workHour.title"}),description:i.formatMessage({id:"desk.settings.general.workHour.desc"}),gap:["0px","32px"],gridItemConfig:{subject:{alignSelf:"start"}},showActions:p.isDirty,actions:[{key:"work-hours-cancel",label:i.formatMessage({id:"desk.settings.general.workHour.button.cancel"}),type:"button",buttonType:"tertiary",onClick:L},{key:"work-hours-save",label:i.formatMessage({id:"desk.settings.general.workHour.button.save"}),type:"submit",buttonType:"primary",isLoading:t,disabled:t,onClick:f(D)}],extra:Object(W.jsx)(fD,{children:Object(W.jsxs)(o.Grid,{children:[Object(W.jsxs)(o.GridItem,{colSpan:6,children:[Object(W.jsx)(iy.q,{children:i.formatMessage({id:"desk.settings.general.workHour.autoReply.title"})}),Object(W.jsx)(iy.h,{children:i.formatMessage({id:"desk.settings.general.workHour.autoReply.desc"})})]}),Object(W.jsx)(o.GridItem,{colSpan:6,children:Object(W.jsx)(o.InputTextarea,{ref:c({required:i.formatMessage({id:"desk.settings.general.workHour.autoReply.error.required"})}),name:"leaveMessage",error:I("leaveMessage"),disabled:t})})]})}),children:[Object(W.jsxs)(dD,{gap:["12px","16px"],isEnabled:!0,children:[Object(W.jsx)(gD,{colSpan:3,alignSelf:"center",children:Object(W.jsx)(mD,{children:Object(W.jsx)(_i.a,{control:u,name:"operationHourEnabled",render:({onChange:e,onBlur:n,value:a,name:i,ref:s})=>Object(W.jsx)(o.Toggle,{ref:s,name:i,checked:a,onChange:e,onBlur:n,disabled:t})})})}),Object(W.jsx)(hD,{colSpan:9,children:Object(W.jsx)(_i.a,{control:u,name:"operationHourType",render:({onChange:e,value:t})=>Object(W.jsx)(_D,{selectedItem:t,onChange:e,items:["WEEK","DAY"],itemToString:e=>l[e],itemToElement:e=>l[e],width:"100%",disabled:F})})})]}),Object(W.jsx)(dD,{gap:["12px","8px"],isEnabled:"DAY"===C,children:v.map((e,t)=>{const{fields:n,append:a,remove:s}=e,r=bD[t].toLowerCase(),l=k[r].enabled;return n.map((e,t)=>{const c=t>0,{from:d,to:p}=T(r,t);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.GridItem,{colSpan:3,alignSelf:"center",children:0===t&&Object(W.jsx)(_i.a,{control:u,name:`operationHourDay.${r}.enabled`,defaultValue:l,render:({onChange:e,value:t,ref:n})=>Object(W.jsx)(o.Checkbox,{ref:n,name:`operationHourDay.${r}.enabled`,label:i.formatMessage({id:`desk.settings.general.workHour.days.${r}`}),disabled:F,checked:t,onChange:t=>{e(t.target.checked)}})})},`${e.id}.enabled`),Object(W.jsx)(pD,{colSpan:4,isMultipleHours:c,children:Object(W.jsx)(_i.a,{control:u,name:`${y(r)}[${t}].from`,defaultValue:e.from||yD.from,render:({onChange:e,value:n})=>Object(W.jsx)(o.Dropdown,{selectedItem:n,onChange:e,items:vD,itemToString:xD,itemToElement:xD,isItemDisabled:e=>"24:00"===e,disabled:F||!l,width:"100%",onItemSelected:R(r,t)})})},`${e.id}.from`),Object(W.jsx)(pD,{colSpan:4,isMultipleHours:c,children:Object(W.jsx)(_i.a,{control:u,name:`${y(r)}[${t}].to`,defaultValue:e.to||yD.to,render:({onChange:e,value:t})=>Object(W.jsx)(o.Dropdown,{selectedItem:t,onChange:e,placeholder:i.formatMessage({id:"desk.settings.general.workHour.dropdown.hour.placeholder"}),items:vD,itemToString:xD,itemToElement:xD,isItemDisabled:e=>d.localeCompare(e)>=0,hasError:null==p||d.localeCompare(p)>=0,disabled:F||!l,width:"100%"})})},`${e.id}.to`),Object(W.jsxs)(pD,{colSpan:1,alignSelf:"center",isMultipleHours:c,children:[0===t&&1===n.length&&l&&Object(W.jsx)(o.IconButton,{icon:"plus-circle",size:"small",buttonType:"primary",onClick:A(e.id,a),disabled:F}),t>0&&l&&Object(W.jsx)(o.IconButton,{icon:"remove",size:"small",buttonType:"tertiary",onClick:N(t,s),disabled:F})]},`${e.id}.button`)]})})})}),Object(W.jsx)(dD,{gap:["12px","8px"],isEnabled:"WEEK"===C,children:x.map((e,t)=>{const{fields:n}=e,a=jD[t].toLowerCase(),s=w[a].enabled;return n.map((e,t)=>{const n=t>0,{from:r,to:l}=S(a,t);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.GridItem,{colSpan:4,alignSelf:"center",children:Object(W.jsx)(_i.a,{control:u,name:`operationHourWeek.${a}.enabled`,defaultValue:s,render:({onChange:e,value:t,ref:n})=>Object(W.jsx)(o.Checkbox,{ref:n,name:`operationHourWeek.${a}.enabled`,label:i.formatMessage({id:`desk.settings.general.workHour.weeks.${a}`}),disabled:F,checked:t,onChange:t=>{e(t.target.checked)}})})},`${e.id}.enabled`),Object(W.jsx)(pD,{colSpan:4,isMultipleHours:n,children:Object(W.jsx)(_i.a,{control:u,name:`${O(a)}[${t}].from`,defaultValue:e.from||"09:00",render:({onChange:e,value:n})=>Object(W.jsx)(o.Dropdown,{selectedItem:n,onChange:e,items:vD,itemToString:xD,itemToElement:xD,isItemDisabled:e=>"24:00"===e,width:"100%",disabled:F||!s,onItemSelected:P(a,t)})})},`${e.id}.from`),Object(W.jsx)(pD,{colSpan:4,isMultipleHours:n,children:Object(W.jsx)(_i.a,{control:u,name:`${O(a)}[${t}].to`,defaultValue:e.to||yD.to,render:({onChange:e,value:t})=>Object(W.jsx)(o.Dropdown,{selectedItem:t,onChange:e,placeholder:i.formatMessage({id:"desk.settings.general.workHour.dropdown.hour.placeholder"}),items:vD,itemToString:xD,itemToElement:xD,isItemDisabled:e=>r.localeCompare(e)>=0,hasError:null==l||r.localeCompare(l)>=0,width:"100%",disabled:F||!s})})},`${e.id}.to`)]})})})})]})});var kD=n("1rFH");let wD;!function(e){e.AFTER_SEND_MESSAGE="AFTER_SEND_MESSAGE",e.AFTER_READ_MESSAGE="AFTER_READ_MESSAGE"}(wD||(wD={}));var TD=Object(r.default)("b").withConfig({displayName:"markAsReadType___StyledB",componentId:"tax8v8-0"})(["font-weight:600;"]);const SD=i.a.memo(({markAsReadType:e,isUpdating:t,setUnsaved:n,updateProjectRequest:i})=>{const s=Object(E.a)(),r=Object(o.useForm)({onSubmit:({markAsReadType:e})=>{i({markAsReadType:e,onSuccess:r.onSuccess})}}),l=Object(o.useField)("markAsReadType",r,{defaultValue:e,isControlled:!0});return Object(a.useEffect)(()=>{n(l.updatable)},[l.updatable]),Object(W.jsx)(kD.a,{title:s.formatMessage({id:"desk.settings.markAsReadType.title"}),description:s.formatMessage({id:"desk.settings.markAsReadType.desc"},{b:e=>Object(W.jsx)(TD,{children:e})}),radioItems:[{label:s.formatMessage({id:"desk.settings.markAsReadType.lbl.send"}),value:wD.AFTER_SEND_MESSAGE},{label:s.formatMessage({id:"desk.settings.markAsReadType.lbl.read"}),value:wD.AFTER_READ_MESSAGE}],form:r,field:l,isFetching:t})}),ED=({proactiveChatEnabled:e,isUpdating:t,updateProjectRequest:n})=>{const a=Object(E.a)();return Object(W.jsx)(iy.r,{title:a.formatMessage({id:"desk.settings.proactiveChat.title"}),description:a.formatMessage({id:"desk.settings.proactiveChat.desc"}),checked:e,confirmDialogProps:{title:e?a.formatMessage({id:"desk.settings.proactiveChat.dialog.title.on2off"}):a.formatMessage({id:"desk.settings.proactiveChat.dialog.title.off2on"}),description:e?a.formatMessage({id:"desk.settings.proactiveChat.dialog.desc.on2off"}):a.formatMessage({id:"desk.settings.proactiveChat.dialog.desc.off2on"}),confirmText:e?a.formatMessage({id:"desk.settings.proactiveChat.dialog.on2off"}):a.formatMessage({id:"desk.settings.proactiveChat.dialog.off2on"}),onConfirm:()=>n({proactiveChatEnabled:!e})},isFetching:t})},ID=i.a.memo(({transferEnabled:e,isUpdating:t,updateProjectRequest:n})=>{const a=Object(E.a)();return Object(W.jsx)(iy.r,{title:a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.title"}),description:a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.desc"}),checked:e,confirmDialogProps:{title:e?a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.prevent.title"}):a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.allow.title"}),description:e?a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.desc.prevent"}):a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.desc.allow"}),confirmText:e?a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.turnOff"}):a.formatMessage({id:"desk.settings.general.ticketTransferByAgent.dialog.turnOn"}),onConfirm:()=>n({transferEnabled:!e})},isFetching:t})}),MD=f.dc.map(({label:e,value:t})=>({value:t,label:e,node:e})),DD=({timezone:e,isUpdating:t,updateProjectRequest:n,setUnsaved:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(""),c=MD.find(t=>t.value===e)||MD[0],d=Object(o.useForm)({onSubmit:({deskTimezone:e})=>{n({timezone:e.value,onSuccess:d.onSuccess})}}),u=Object(o.useField)("deskTimezone",d,{defaultValue:c,isControlled:!0});return Object(a.useEffect)(()=>{i(u.updatable)},[u.updatable]),Object(W.jsx)(iy.o,{title:s.formatMessage({id:"desk.settings.general.timezone.title"}),description:s.formatMessage({id:"desk.settings.general.timezone.desc"}),form:d,field:u,useSearch:!0,onSearchChange:e=>{l(e)},items:MD.filter(e=>e.label.toLowerCase().includes(r.toLowerCase())),isFetching:t,itemHeight:32})},AD={updateProjectRequest:j.d.updateProjectRequest},ND=Object(b.d)(e=>({desk:e.desk,organization:e.organizations.current}),AD)(({desk:e,setUnsaved:t,updateProjectRequest:n})=>{const a=Object(E.a)(),i={timezone:(s=e.project).timezone||c.a.tz.guess(),transferEnabled:s.transferEnabled,markAsReadType:s.markAsReadType};var s;return Object(W.jsxs)(KE.b,{children:[Object(W.jsx)(KE.a,{children:Object(W.jsx)(KE.a.Title,{children:a.formatMessage({id:"desk.settings.general.title"})})}),Object(W.jsx)(DD,{timezone:i.timezone,isUpdating:e.isUpdating,setUnsaved:t,updateProjectRequest:n}),Object(W.jsx)(CD,{project:e.project,isUpdating:e.isUpdating,setUnsaved:t}),Object(W.jsx)(ID,{transferEnabled:i.transferEnabled,isUpdating:e.isUpdating,updateProjectRequest:n}),Object(W.jsx)(SD,{markAsReadType:i.markAsReadType,isUpdating:e.isUpdating,setUnsaved:t,updateProjectRequest:n}),Object(W.jsx)(ED,{proactiveChatEnabled:e.project.proactiveChatEnabled,isUpdating:e.isUpdating,updateProjectRequest:n})]})}),{nodeEnv:RD}=Object({NODE_ENV:"production",BUILD_MODE:"production",GATE_URL:"https://gate.sendbird.com"}),PD=e=>T.d.includes(e)||"development"===RD,{nodeEnv:LD}=Object({NODE_ENV:"production",BUILD_MODE:"production",GATE_URL:"https://gate.sendbird.com"}),FD=e=>T.b.includes(e)||"development"===LD,UD=e=>T.e.includes(e)||"development"===LD,$D=e=>T.o.includes(e)||"development"===LD;var BD=n("pol2"),VD=n.n(BD),zD=n("kGJw"),HD=n.n(zD),qD=n("UcQH"),GD=n("oh6S");const WD=r.default.div.withConfig({displayName:"IntegrationWhatsApp__IntegrationHeader",componentId:"sc-1t98nk8-0"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;border-radius:4px;background:",";padding:24px;> div:first-child{display:flex;}"],Object(o.cssVariables)("neutral-2")),KD=r.default.div.withConfig({displayName:"IntegrationWhatsApp__IntegrationDescription",componentId:"sc-1t98nk8-1"})(["display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:24px;> h4{",";color:",";}> p{",";color:",";}"],o.Headings["heading-03"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),YD=r.default.hr.withConfig({displayName:"IntegrationWhatsApp__FormDivider",componentId:"sc-1t98nk8-2"})(["margin:24px 0;border-width:0;background-color:",";height:1px;"],Object(o.cssVariables)("neutral-3")),QD=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactInputContainer",componentId:"sc-1t98nk8-3"})(["margin-top:16px;"]),JD=r.default.div.withConfig({displayName:"IntegrationWhatsApp__FormLabel",componentId:"sc-1t98nk8-4"})(["display:flex;align-items:center;position:relative;"]),XD=r.default.div.withConfig({displayName:"IntegrationWhatsApp__VerificationFooter",componentId:"sc-1t98nk8-5"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-top:12px;margin-bottom:-8px;"]),ZD=r.default.span.withConfig({displayName:"IntegrationWhatsApp__VerificationStatusDot",componentId:"sc-1t98nk8-6"})(["margin-right:8px;border-radius:50%;width:8px;height:8px;"]),eA=r.default.span.withConfig({displayName:"IntegrationWhatsApp__VerificationStatusText",componentId:"sc-1t98nk8-7"})(["font-size:14px;line-height:1.43;letter-spacing:-0.1px;"]),tA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__VerificationStatusWrapper",componentId:"sc-1t98nk8-8"})(["",";"],({isVerified:e})=>e?Object(r.css)(["","{background-color:",";}","{color:",";}"],ZD,Object(o.cssVariables)("green-5"),eA,Object(o.cssVariables)("green-5")):Object(r.css)(["","{background-color:",";}","{color:",";}"],ZD,Object(o.cssVariables)("red-5"),eA,Object(o.cssVariables)("red-5"))),nA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactInputLabel",componentId:"sc-1t98nk8-9"})(["display:flex;align-items:center;transition:0.2s ",";transition-property:height,color;height:12px;color:",";font-size:12px;font-weight:500;"],o.transitionDefault,Object(o.cssVariables)("neutral-10")),aA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactInput",componentId:"sc-1t98nk8-10"})(["display:grid;position:relative;grid-template-columns:200px 1fr;grid-column-gap:8px;"]),iA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactCountry",componentId:"sc-1t98nk8-11"})(["position:relative;display:flex;flex-direction:column;"]),sA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactCountryName",componentId:"sc-1t98nk8-12"})(["max-width:112px;overflow:hidden;text-overflow:ellipsis;"]),rA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactCountryDialCode",componentId:"sc-1t98nk8-13"})(["font-size:12px;line-height:16px;color:",";"],Object(o.cssVariables)("neutral-7")),oA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__ContactDialogCodePrefix",componentId:"sc-1t98nk8-14"})(["position:absolute;left:224px;height:40px;display:flex;align-items:center;",";"],o.Headings["heading-01"]),lA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__Footer",componentId:"sc-1t98nk8-15"})(["display:flex;flex-direction:row;justify-content:flex-end;margin-top:24px;button + button{margin-left:8px;}"]),cA=r.default.div.withConfig({displayName:"IntegrationWhatsApp__FormFieldsWrapper",componentId:"sc-1t98nk8-16"})(["",""],({isLoading:e})=>e&&Object(r.css)(["display:flex;align-items:center;justify-content:center;"])),dA=Object(r.default)(cA).withConfig({displayName:"IntegrationWhatsApp__VerificationFieldsWrapper",componentId:"sc-1t98nk8-17"})(["min-height:206px;"]),uA=Object(r.default)(cA).withConfig({displayName:"IntegrationWhatsApp__OtherFieldsWrapper",componentId:"sc-1t98nk8-18"})(["min-height:138px;"]),pA=({hasError:e,country:t})=>Object(r.css)([""," ",""],e&&Object(r.css)(["border-color:",";"],Object(o.cssVariables)("red-5")),t&&Object(r.css)(["padding-left:","px;"],Object(GD.h)(VD.a.getCountryCodeForRegionCode(t.code))));var gA=Object(r.default)(o.Link).withConfig({displayName:"IntegrationWhatsApp___StyledLink",componentId:"sc-1t98nk8-19"})(["margin-left:8px;"]),hA=Object(r.default)(iy.j).withConfig({displayName:"IntegrationWhatsApp___StyledSettingsGridGroup",componentId:"sc-1t98nk8-20"})(["margin-bottom:24px;"]),mA=Object(r.default)(o.InlineNotification).withConfig({displayName:"IntegrationWhatsApp___StyledInlineNotification",componentId:"sc-1t98nk8-21"})(["margin-bottom:16px;"]),fA=Object(r.default)(o.InlineNotification).withConfig({displayName:"IntegrationWhatsApp___StyledInlineNotification2",componentId:"sc-1t98nk8-22"})(["margin-bottom:16px;"]);const bA=()=>{var e,t,n;const i=Object(E.a)(),r=Object(s.k)(),l=Object(s.l)(),c=Object(s.n)(),d=Object(F.a)(),{pid:u,region:p}=Object(L.a)(),g=Object(P.c)(),{getErrorMessage:h}=Object($.a)(),m=Object(a.useRef)(null),f=Object(a.useRef)(!1),b=Object(a.useRef)(null),[j,y]=Object(a.useState)(null),[O,v]=Object(a.useState)(!1),[x,_]=Object(a.useState)(!1),[C,k]=Object(a.useState)(!1),[w,T]=Object(a.useState)(null),[S,I]=Object(a.useState)(!1),[M,D]=Object(a.useState)(),[R,U]=Object(a.useState)(""),B=Object(_i.d)({defaultValues:{signatureSecret:"",whatsappNumber:""}}),V=Object(_i.d)({defaultValues:{apiKey:"",apiSecret:"",applicationId:""}}),z=`https://desk-api-${g}.sendbird.com/whatsapp/webhook`,H=!O&&(!j||V.formState.isDirty),q=C&&B.formState.isDirty,G=Object(a.useCallback)(()=>{r.push(`/${g}/desk/settings/integration`)},[g,r]),K=Object(a.useCallback)(()=>{d({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:i.formatMessage({id:"desk.settings.integration.whatsapp.form.dialog.confirmationDialog.title"}),description:i.formatMessage({id:"desk.settings.integration.whatsapp.form.dialog.confirmationDialog.desc"}),negativeButtonProps:{text:i.formatMessage({id:"desk.settings.integration.whatsapp.form.dialog.confirmationDialog.btn.cancel"})},positiveButtonProps:{text:i.formatMessage({id:"desk.settings.integration.whatsapp.form.dialog.confirmationDialog.btn.submit"}),onClick:G}}})},[G,i,d]),Y=Object(a.useCallback)(()=>{V.formState.isDirty||B.formState.isDirty?K():G()},[G,B.formState.isDirty,K,V.formState.isDirty]),Q=Object(a.useCallback)(async e=>{try{_(!0);const{signatureSecret:t,whatsappNumber:n}=e,a=new VD.a(n,null==M?void 0:M.code),{data:s}=await Object(N.createNexmoAccount)(u,p,{...V.getValues(),signatureSecret:t,whatsappNumber:a.getNumber().substring(1)});if(j?o.toast.success({message:i.formatMessage({id:"desk.settings.integration.whatsapp.toast.success.changeWBA"})}):o.toast.success({message:i.formatMessage({id:"desk.settings.integration.whatsapp.toast.success.addWBA"})}),s){const{apiKey:e,apiSecret:n,applicationId:i}=s;y(s),V.reset({apiKey:e,apiSecret:n,applicationId:i}),B.reset({signatureSecret:t,whatsappNumber:a.getNumber("significant")},{errors:!1}),window.history.pushState({},"",`${l.pathname}/${s.id}`)}}catch(e){o.toast.error({message:h(e)})}finally{_(!1)}},[null==M?void 0:M.code,h,i,l.pathname,j,B,u,p,V]);Object(a.useEffect)(()=>{if(null!=c&&c.params&&null!=c.params.id&&!f.current){(async()=>{try{f.current=!0,v(!0);const{data:e}=await Object(N.getNexmoAccountDetail)(u,p,{id:Number(c.params.id)});if(null!=e){const{apiKey:t,apiSecret:n,applicationId:a,signatureSecret:i,whatsappNumber:s}=e,r=new VD.a(`+${s}`);V.reset({apiKey:t,apiSecret:n,applicationId:a}),B.reset({signatureSecret:i,whatsappNumber:r.getNumber("significant")});const o=qD.a.find(e=>e.code===r.getRegionCode());return o&&D(o),y(e),void(!C&&k(!0))}}catch(e){r.push(`/${g}/desk/settings/integration`),o.toast.error({message:i.formatMessage({id:"desk.settings.integration.whatsapp.toast.error.retrieve"})})}finally{v(!1)}})()}},[c,j,C,r,g,i,V,B,u,p]),Object(a.useEffect)(()=>{C&&V.formState.isDirty?k(!1):xs()(b.current,V.getValues())&&(k(!0),T(null))},[C,V]),Object(a.useEffect)(()=>{!H&&T(null)},[H]);const J=!Object.values(V.watch()).every(e=>""!==e)||!V.formState.isDirty;return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:`/${g}/desk/settings/integration`,onClick:e=>{e.preventDefault(),Y()},"data-test-id":"BackButton"}),Object(W.jsx)(iy.a.Title,{children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.title"})}),Object(W.jsx)(iy.a.Actions,{children:!!j&&Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"tertiary",variant:"ghost",icon:"delete",onClick:()=>{j&&d({dialogTypes:A.a.DeleteNexmoAccount,dialogProps:{id:j.id}})},"data-test-id":"DeleteButton",children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.header.btn.uninstall"})})})]}),Object(W.jsx)(WD,{children:Object(W.jsxs)("div",{children:[Object(W.jsx)(o.Icon,{icon:"whatsapp-colored",size:60}),Object(W.jsxs)(KD,{children:[Object(W.jsx)("h4",{children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.header.title"})}),Object(W.jsxs)("p",{children:[i.formatMessage({id:"desk.settings.integration.whatsapp.form.header.desc"}),Object(W.jsx)(gA,{href:"https://www.notion.so/sendbirddesk/Upcoming-Whatsapp-Business-Account-integration-fb44867f9ee8410fa4518eed297c66f5",target:"_blank",iconProps:{icon:"open-in-new",size:16},children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.header.guideLink"})})]})]})]})}),Object(W.jsx)(hA,{children:Object(W.jsxs)(iy.i,{title:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.title"}),description:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(o.InputText,{value:z,name:"inboundWebhookURL",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.lbl.inbound"}),labelHelperText:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.tooltip.inbound"}),readOnly:!0,icons:[{icon:"copy",title:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.inbound.btn.copy.tooltip"}),"data-test-id":"InboundWebhookURLCopyButton",onClick:()=>{vi()(z),o.toast.success({message:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.status.copy.success"})})}}],"data-test-id":"InboundWebhookURL"}),Object(W.jsx)(o.InputText,{value:z,name:"statusWebhookURL",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.lbl.status"}),labelHelperText:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.tooltip.status"}),readOnly:!0,icons:[{icon:"copy",title:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.status.btn.copy.tooltip"}),"data-test-id":"StatusWebhookURLCopyButton",onClick:()=>{vi()(z),o.toast.success({message:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.webhook.inbound.copy.success"})})}}],"data-test-id":"StatusWebhookURL"})]})}),Object(W.jsx)(iy.j,{children:Object(W.jsxs)(iy.i,{title:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.account.title"}),description:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.account.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(dA,{isLoading:O,children:O?Object(W.jsx)(o.Spinner,{}):Object(W.jsxs)("form",{id:"verificationForm",onSubmit:V.handleSubmit(async e=>{try{I(!0);const{data:t}=await Object(N.verifyNexmoApp)(u,p,e);t.verify&&(k(!0),T(null),b.current=e,V.reset(e),o.toast.success({message:i.formatMessage({id:"desk.settings.integration.whatsapp.toast.success.verification"})}))}catch(t){if(k(!1),t&&t.data&&t.data.code){let n;switch(t.data.code){case"desk400123":n=i.formatMessage({id:"desk.settings.integration.whatsapp.form.inline.error.alreadySub"});break;case"desk400124":n=i.formatMessage({id:"desk.settings.integration.whatsapp.form.inline.error.alreadySubOtherProject"});break;case"desk400125":n=i.formatMessage({id:"desk.settings.integration.whatsapp.form.inline.error.verificationFailed"})}return void T({message:n,values:e})}o.toast.error({message:i.formatMessage({id:"desk.settings.integration.whatsapp.card.error.unexpected"})}),T({message:null,values:e})}finally{I(!1)}}),"data-test-id":"VerificationForm",children:[w&&null!=w.message&&Object(W.jsx)(mA,{type:"error",message:w.message,"data-test-id":"VerificationFormErrorInlineNotificatiion"}),Object(W.jsx)(o.InputText,{ref:V.register({required:!0}),name:"apiKey",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.lbl.apiKey"}),"data-test-id":"ApiKeyFieldInput"}),Object(W.jsx)(o.InputText,{ref:V.register({required:!0}),name:"apiSecret",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.lbl.apiSecret"}),"data-test-id":"ApiSecretFieldInput"}),Object(W.jsx)(o.InputText,{ref:V.register({required:!0}),name:"applicationId",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.lbl.appId"}),readOnly:!!j,"data-test-id":"AppIdFieldInput"}),H&&Object(W.jsxs)(XD,{children:[Object(W.jsxs)(tA,{isVerified:C,children:[Object(W.jsx)(ZD,{}),Object(W.jsx)(eA,{children:C?i.formatMessage({id:"desk.settings.integration.whatsapp.form.verificationStatus.verified"}):i.formatMessage({id:"desk.settings.integration.whatsapp.form.verificationStatus.unverified"})})]}),Object(W.jsx)(o.Button,{type:"submit",form:"verificationForm",buttonType:"primary",variant:"ghost",icon:"done",disabled:J,isLoading:S,"data-test-id":"VerifySubmitButton",children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.btn.verify"})})]})]})}),Object(W.jsx)(YD,{}),Object(W.jsx)(uA,{isLoading:O,children:O?Object(W.jsx)(o.Spinner,{}):Object(W.jsxs)("form",{id:"othersForm",onSubmit:B.handleSubmit(Q),"data-test-id":"OthersForm",children:[!La()(B.errors)&&Object(W.jsx)(fA,{type:"error",message:null!=(e=null==(t=B.errors.whatsappNumber)?void 0:t.message)?e:null==(n=B.errors.signatureSecret)?void 0:n.message}),Object(W.jsx)(o.InputText,{ref:B.register({required:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.signatureSecret.error.required"})}),name:"signatureSecret",label:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.lbl.signatureSecret"}),"data-test-id":"SignatureSecretFieldInput"}),Object(W.jsxs)(QD,{children:[Object(W.jsxs)(JD,{children:[Object(W.jsx)(nA,{children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.lbl.phoneNumber"})}),Object(W.jsx)(o.Tooltip,{content:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.phoneNumber.tooltip"}),placement:"top",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})]}),Object(W.jsxs)(aA,{children:[Object(W.jsx)(o.Dropdown,{selectedItem:M,onItemSelected:e=>{var t;e&&(D(e),null==(t=m.current)||t.focus())},items:qD.a.filter(e=>!R||e.name.match(new RegExp(HD()(R),"ig"))),itemToString:e=>e.name,itemToElement:e=>e?Object(W.jsxs)(iA,{children:[Object(W.jsx)(sA,{children:e.name}),Object(W.jsxs)(rA,{children:["+",VD.a.getCountryCodeForRegionCode(e.code)]})]}):"",useSearch:!0,onSearchChange:U,width:"200px",placeholder:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.phoneNumber.ph.countrySelector"}),itemHeight:48,disabled:!!j}),Object(W.jsx)(o.InputText,{ref:e=>{B.register(e,{validate:e=>new VD.a(e,null==M?void 0:M.code).isValid()||i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.phoneNumber.error.invalid"})}),m.current=e},name:"whatsappNumber",readOnly:!M||!!j,styles:pA({country:M,hasError:void 0!==B.errors.whatsappNumber}),"data-test-id":"PhoneNumberFieldInput"}),M&&Object(W.jsxs)(oA,{children:["+",VD.a.getCountryCodeForRegionCode(M.code)]})]})]})]})})]})}),Object(W.jsxs)(lA,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",onClick:Y,children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.account.btn.cancel"})}),Object(W.jsx)(o.Button,{buttonType:"primary",form:"othersForm",type:"submit",disabled:!q,isLoading:x,children:i.formatMessage({id:"desk.settings.integration.whatsapp.form.field.account.btn.submit"})})]})]})};var jA=n("G4qV");const yA=r.default.div.withConfig({displayName:"components__ContentWrapper",componentId:"sc-1hgnwdf-0"})(["width:848px;",""],({isGrid:e=!1})=>e&&"\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-gap: 32px;\n  "),OA=r.default.div.withConfig({displayName:"components__IntegrationHeader",componentId:"sc-1hgnwdf-1"})(["position:relative;grid-column:span 5;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;border:1px solid ",";padding:24px;margin-top:24px;margin-bottom:16px;border-radius:4px;.SocialMediaIcon{margin-bottom:16px;}.SocialMediaName{"," width:100%;color:",";margin-bottom:8px;}.SocialMediaDescription{"," width:70%;color:",";}.IntegratedMark{position:absolute;top:24px;right:24px;}.CardAction{margin-left:-12px;}"],Object(o.cssVariables)("neutral-3"),o.Subtitles["subtitle-03"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),vA=r.default.table.withConfig({displayName:"components__IntegrationTable",componentId:"sc-1hgnwdf-2"})(["width:100%;border-collapse:collapse;border-spacing:0;tbody tr:hover{background-color:",";}tr{display:flex;flex-direction:row;align-items:center;border-bottom:1px solid "," !important;}th{font-size:13px;line-height:16px;color:",";font-weight:600;text-align:left;padding:16px;}td{display:flex;flex-direction:row;align-items:center;"," color:",";padding:8px 16px;}.IntegrationTable__column--pageName{flex:1;a{margin-left:8px;}}.IntegrationTable__column--settings{flex:3;}"],Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),xA=Object(r.default)(yA).withConfig({displayName:"components__IntegrationEditWrapper",componentId:"sc-1hgnwdf-3"})([".IntegrationFacebookEdit__card,.IntegrationTwitterEdit__card{margin-top:24px;","{background-color:transparent;}}"],iy.f),_A=r.default.div.withConfig({displayName:"integrationPicture__ThumbnailContainer",componentId:"f3wrjd-0"})(["display:flex;justify-content:center;align-items:center;width:32px;height:32px;border-radius:8px;overflow:hidden;background:",";"],Object(o.cssVariables)("bg-3")),CA=({thumbnail:e})=>Object(W.jsx)(_A,{children:e?Object(W.jsx)("img",{src:e.url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):Object(W.jsx)(o.Icon,{icon:"link",size:24,color:Object(o.cssVariables)("neutral-5")})}),kA=r.default.div.withConfig({displayName:"integrationStatusItem__Container",componentId:"sc-1g0l2us-0"})(["display:flex;flex-direction:row;align-items:center;color:",";"," margin-right:16px;:last-of-type{margin-right:auto;}}"],Object(o.cssVariables)("neutral-5"),e=>e.isEnabled&&`color: ${Object(o.cssVariables)("neutral-10")};`),wA=Object(r.default)(o.Icon).withConfig({displayName:"integrationStatusItem__StatusIcon",componentId:"sc-1g0l2us-1"})(["margin-right:4px;"]),TA=({label:e,isEnabled:t})=>{const n=Object(E.a)();return Object(W.jsxs)(kA,{isEnabled:t,children:[t?Object(W.jsx)(wA,{icon:"done",size:16,color:Object(o.cssVariables)("green-5"),assistiveText:n.formatMessage({id:"desk.settings.integration.list.lbl.enabled"})}):Object(W.jsx)(wA,{icon:"close",size:16,color:Object(o.cssVariables)("neutral-5"),assistiveText:n.formatMessage({id:"desk.settings.integration.list.lbl.disabled"})})," ",e]})},SA=Object(jA.a)(e=>e.integrations.facebookPages,e=>e.integrations.isAddingFacebookPages,e=>e.integrations.isUnsubscribingFacebookPage,(e,t,n)=>({facebookPages:e,isAddingFacebookPages:t,isUnsubscribingFacebookPage:n}));var EA=Object(r.default)(o.IconButton).withConfig({displayName:"facebook___StyledIconButton",componentId:"b2mfar-0"})(["margin-left:auto;"]);const IA=({match:e,onAddPageButtonClick:t})=>{const n=Object(E.a)(),i=Object(s.k)(),r=Object(b.f)(),{facebookPages:l,isAddingFacebookPages:c,isUnsubscribingFacebookPage:d}=Object(b.g)(SA),u=Object(a.useRef)(!1);Object(a.useEffect)(()=>{0===l.length&&(u.current?i.replace(e.url.substring(0,e.url.lastIndexOf("/"))):(u.current=!0,r(j.d.facebookActivePagesRequest())))},[l,r,i,e.url]),Object(a.useEffect)(()=>()=>{u.current=!1},[]);const p=Object(a.useCallback)(e=>()=>{i.push(e)},[i]),g=e=>{const t=l.find(t=>t.id===Number(e.currentTarget.dataset.id)),{pageName:a}=e.currentTarget.dataset;t&&r(j.b.showDialogsRequest({dialogTypes:A.a.Confirm,dialogProps:{title:n.formatMessage({id:"desk.settings.integration.removeAlert.facebook.title"},{pageName:a}),description:n.formatMessage({id:"desk.settings.integration.removeAlert.facebook.body"}),confirmText:n.formatMessage({id:"desk.settings.integration.removeAlert.btn.remove"}),cancelText:n.formatMessage({id:"desk.settings.integration.removeAlert.btn.cancel"}),onConfirm:()=>{r(j.d.facebookUnsubscribeRequest({facebookPage:t}))}}}))};return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(KE.a,{children:[Object(W.jsx)(KE.a.BackButton,{href:e.url.substring(0,e.url.lastIndexOf("/"))}),Object(W.jsx)(KE.a.Title,{children:n.formatMessage({id:"desk.settings.integration.facebook.title"})})]}),Object(W.jsxs)(yA,{children:[Object(W.jsxs)(OA,{children:[Object(W.jsx)(o.Icon,{className:"SocialMediaIcon",icon:"facebook-colored",size:24}),Object(W.jsx)("h4",{className:"SocialMediaName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.facebook.title"})}),Object(W.jsx)("p",{className:"SocialMediaDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.facebook.description"})}),Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",icon:"plus",onClick:t,disabled:c,isLoading:c,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.facebook.btn.add"})})]}),Object(W.jsxs)(vA,{children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{className:"IntegrationTable__column--pageName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.facebook.column.lbl.pages"})}),Object(W.jsx)("th",{className:"IntegrationTable__column--settings",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.facebook.column.lbl.permissions"})})]})}),Object(W.jsx)("tbody",{children:l.map(t=>Object(W.jsxs)("tr",{children:[Object(W.jsxs)("td",{className:"IntegrationTable__column--pageName",children:[Object(W.jsx)(CA,{thumbnail:t.picture?{url:t.picture.url,name:t.name}:void 0}),Object(W.jsx)("a",{href:`https://facebook.com/${t.pageId}`,target:"_blank",children:t.name})]}),Object(W.jsxs)("td",{className:"IntegrationTable__column--settings",children:[Object(W.jsx)(TA,{isEnabled:t.isFeedEnabled,label:n.formatMessage({id:"desk.settings.integration.list.facebook.lbl.post"})}),Object(W.jsx)(TA,{isEnabled:t.isConversationEnabled,label:n.formatMessage({id:"desk.settings.integration.list.facebook.lbl.messages"})}),Object(W.jsx)(EA,{buttonType:"secondary",size:"small",title:n.formatMessage({id:"desk.settings.integration.list.button.tooltip.edit"}),icon:"edit",onClick:p(`${e.url}/${t.id}`)}),Object(W.jsx)(o.IconButton,{buttonType:"secondary",size:"small",title:n.formatMessage({id:"desk.settings.integration.list.button.tooltip.delete"}),icon:"remove","data-id":t.id,name:t.name,"data-page-name":t.name,onClick:g,disabled:d})]})]},t.id))})]})]})]})},MA=({match:e})=>{const t=Object(E.a)(),n=Object(s.k)(),i=Object(b.f)(),r=Object(a.useRef)(!1),{facebookPages:o,isUpdatingFacebookPageSettings:l,fetchFacebookActivePages:{isFetching:c}}=Object(b.g)(e=>e.integrations);Object(a.useEffect)(()=>(r.current||0!==o.length||(i(j.d.facebookActivePagesRequest()),r.current=!0),()=>{r.current=!1}),[o,i]);const d=Object(a.useCallback)(e=>()=>{n.push(e)},[n]),u=o.find(t=>t.id===Number(e.params.id)),p=Object(a.useMemo)(()=>u?{isConversationEnabled:u.isConversationEnabled,isFeedEnabled:u.isFeedEnabled}:{isConversationEnabled:!1,isFeedEnabled:!1},[u]),[g,h]=Object(a.useState)(p);Object(a.useEffect)(()=>{h(p)},[p]);const m=Object(a.useCallback)(e=>{const{name:t,checked:n}=e.target;switch(t){case"isConversationEnabled":case"isFeedEnabled":h(e=>({...e,[t]:n}));break;default:return}},[]);if(!u)return null;const f=e.url.substring(0,e.url.lastIndexOf("/"));return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:f}),Object(W.jsx)(iy.a.Title,{children:u.name})]}),Object(W.jsx)(xA,{children:Object(W.jsxs)(iy.g,{className:"IntegrationFacebookEdit__card",children:[Object(W.jsx)(iy.e,{title:t.formatMessage({id:"desk.settings.integration.edit.facebook.header.posts"}),description:t.formatMessage({id:"desk.settings.integration.edit.facebook.body.posts"}),stretchLabel:{width:384,wideWidth:384},children:Object(W.jsx)(V.wb,{name:"isFeedEnabled",checked:g.isFeedEnabled,disabled:c,onChange:m})}),Object(W.jsx)(iy.e,{title:t.formatMessage({id:"desk.settings.integration.edit.facebook.header.messages"}),description:t.formatMessage({id:"desk.settings.integration.edit.facebook.body.messages"}),stretchLabel:{width:384,wideWidth:384},showActions:!0,actions:[{key:"cancel",label:t.formatMessage({id:"desk.settings.integration.edit.btn.cancel"}),buttonType:"tertiary",onClick:d(f)},{key:"save",label:t.formatMessage({id:"desk.settings.integration.edit.btn.save"}),buttonType:"primary",disabled:c||l,isLoading:l,onClick:()=>{u&&i(j.d.facebookUpdatePageSettingsRequest({facebookPage:{...u,...g}}))}}],children:Object(W.jsx)(V.wb,{name:"isConversationEnabled",checked:g.isConversationEnabled,disabled:c,onChange:m})})]})})]})},DA=r.default.div.withConfig({displayName:"iframeApp__IntegrationHeader",componentId:"sc-186m7qr-0"})(["display:flex;justify-content:space-between;align-items:center;background:",";border-radius:4px;padding:24px;& > div:first-child{display:flex;}"],Object(o.cssVariables)("neutral-2")),AA=r.default.div.withConfig({displayName:"iframeApp__IntegrationDescription",componentId:"sc-186m7qr-1"})(["display:flex;justify-content:center;align-items:flex-start;flex-direction:column;margin-left:24px;& > h4{",";color:",";}& > p{",";color:",";}"],o.Headings["heading-03"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),NA=Object(r.default)(iy.i).withConfig({displayName:"iframeApp__SettingsSection",componentId:"sc-186m7qr-2"})(["border:none;"]),RA=Object(r.default)(iy.j).withConfig({displayName:"iframeApp__Container",componentId:"sc-186m7qr-3"})(["margin-top:16px;border-radius:4px;border:1px solid ",";"," + ","{border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3"),NA,NA,Object(o.cssVariables)("neutral-3")),PA=r.default.p.withConfig({displayName:"iframeApp__SecretKeyMessage",componentId:"sc-186m7qr-4"})(["display:flex;align-items:center;height:40px;",";color:",";"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-6")),LA=r.default.div.withConfig({displayName:"iframeApp__SettingFooter",componentId:"sc-186m7qr-5"})(["display:flex;justify-content:flex-end;margin-top:24px;button + button{margin-left:8px;}"]);var FA=Object(r.default)("b").withConfig({displayName:"iframeApp___StyledB",componentId:"sc-186m7qr-6"})(["font-weight:600;"]);const UA=Object(a.memo)(()=>{var e;const t=Object(E.a)(),n=Object(s.k)(),i=Object(s.n)(),r=Object(P.W)(),{getErrorMessage:l}=Object($.a)(),{register:c,handleSubmit:d,setValue:u,errors:p,trigger:g}=Object(_i.d)(),{iframeAppDetail:h,createIframeApp:m,updateIframeAppDetail:b,toggleIframeApp:j,uninstallIframeApp:y,isFetching:O,isUpdating:v,isCreating:x,isToggling:_}=Object(P.z)(),C=!(O||v||x||_)&&(!(void 0!==h)||(null==h?void 0:h.isEnabled)),k=null!=(e=null==i?void 0:i.url.substring(0,i.url.lastIndexOf("/")))?e:"",w=Object(a.useCallback)(()=>{r({dialogTypes:A.a.Uninstall,dialogProps:{size:"small",title:t.formatMessage({id:"desk.settings.integration.iframe.dialog.uninstall.title"}),description:t.formatMessage({id:"desk.settings.integration.iframe.dialog.uninstall.desc"},{div:()=>Object(W.jsx)("br",{}),b:e=>Object(W.jsx)(FA,{children:e})}),confirmText:t.formatMessage({id:"desk.settings.integration.iframe.dialog.uninstall.btn.uninstall"}),cancelText:t.formatMessage({id:"desk.settings.integration.iframe.dialog.uninstall.btn.cancel"}),placeholder:t.formatMessage({id:"desk.settings.integration.iframe.dialog.uninstall.placeholder"},{verifyText:"DELETE"}),verifyText:"DELETE",onUninstall:async()=>{try{await y(),n.push(k)}catch(e){o.toast.error({message:l(e)})}}}})},[k,l,n,t,r,y]),T=Object(a.useCallback)(e=>()=>{g(e)},[g]),S=Object(a.useCallback)(e=>{h?b({...e,width:Number(e.width)}):m({...e,width:Number(e.width)})},[m,h,b]),I=Object(a.useCallback)(e=>{var t;return p[e]?{hasError:!0,message:String(null==(t=p[e])?void 0:t.message)||""}:void 0},[p]),M=Object(a.useCallback)(e=>()=>{vi()(e),o.toast.success({message:t.formatMessage({id:"desk.settings.integration.iframe.toast.success.copiedSecretKey"})})},[t]);return Object(a.useEffect)(()=>{h&&[{name:"title",value:h.title},{name:"url",value:h.url},{name:"width",value:h.width}].forEach(({name:e,value:t})=>u(e,t))},[h,u]),Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:k}),Object(W.jsx)(iy.a.Title,{children:t.formatMessage({id:"desk.settings.integration.iframe.form.header"})}),Object(W.jsx)(iy.a.Actions,{children:h&&Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"tertiary",variant:"ghost",icon:"delete",onClick:w,"data-test-id":"DeleteButton",children:t.formatMessage({id:"desk.settings.integration.iframe.form.btn.uninstall"})})})]}),Object(W.jsxs)(DA,{children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(o.Icon,{icon:"iframe-colored",size:60}),Object(W.jsxs)(AA,{children:[Object(W.jsx)("h4",{children:t.formatMessage({id:"desk.settings.integration.iframe.title"})}),Object(W.jsx)("p",{children:t.formatMessage({id:"desk.settings.integration.iframe.desc"})})]})]}),h&&Object(W.jsx)(o.Toggle,{"data-test-id":"ToggleButton",checked:h.isEnabled,onChange:j})]}),Object(W.jsxs)("form",{onSubmit:d(S),children:[Object(W.jsxs)(RA,{children:[Object(W.jsx)(NA,{title:t.formatMessage({id:"desk.settings.integration.iframe.form.secretKey.lbl"}),description:t.formatMessage({id:"desk.settings.integration.iframe.form.secretKey.desc"}),children:h?Object(W.jsx)(o.InputText,{name:"secretKey","data-test-id":"SecretKeyInput",readOnly:!0,icons:[{icon:"copy",title:t.formatMessage({id:"desk.settings.integration.iframe.form.secretKey.copy"}),onClick:M(h.secretKey)}],disabled:!h.isEnabled,defaultValue:h.secretKey}):Object(W.jsx)(PA,{"data-test-id":"SecretKeyMessage",children:t.formatMessage({id:"desk.settings.integration.iframe.form.secretKey.placeholder"})})}),Object(W.jsx)(NA,{title:t.formatMessage({id:"desk.settings.integration.iframe.form.title.lbl"}),children:Object(W.jsx)(o.InputText,{name:"title","data-test-id":"TitleInput",ref:c({required:{value:!0,message:t.formatMessage({id:"desk.settings.integration.iframe.form.title.error.empty"})},maxLength:{value:25,message:t.formatMessage({id:"desk.settings.integration.iframe.form.title.error.maxLength"})}}),disabled:!C,onChange:T("title"),error:I("title")})}),Object(W.jsx)(NA,{title:t.formatMessage({id:"desk.settings.integration.iframe.form.url.lbl"}),description:t.formatMessage({id:"desk.settings.integration.iframe.form.url.desc"}),children:Object(W.jsx)(o.InputText,{name:"url","data-test-id":"UrlInput",ref:c({required:{value:!0,message:t.formatMessage({id:"desk.settings.integration.iframe.form.url.error.empty"})},maxLength:{value:190,message:t.formatMessage({id:"desk.settings.integration.iframe.form.url.error.maxLength"})},pattern:{value:f.oc,message:t.formatMessage({id:"desk.settings.integration.iframe.form.url.error.invalid"})}}),disabled:!C,placeholder:t.formatMessage({id:"desk.settings.integration.iframe.form.url.placeholder"}),onChange:T("url"),error:I("url")})}),Object(W.jsx)(NA,{title:t.formatMessage({id:"desk.settings.integration.iframe.form.width.lbl"}),description:t.formatMessage({id:"desk.settings.integration.iframe.form.width.desc"},{min:288,max:800}),children:Object(W.jsx)(o.InputText,{name:"width","data-test-id":"WidthInput",type:"number",ref:c({required:{value:!0,message:t.formatMessage({id:"desk.settings.integration.iframe.form.width.error.invalid"})},min:{value:288,message:t.formatMessage({id:"desk.settings.integration.iframe.form.width.error.invalid"})},max:{value:800,message:t.formatMessage({id:"desk.settings.integration.iframe.form.width.error.invalid"})}}),disabled:!C,defaultValue:f.C,onChange:T("width"),error:I("width")})})]}),Object(W.jsxs)(LA,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",type:"button",onClick:()=>{n.push(k)},children:t.formatMessage({id:"desk.settings.integration.iframe.form.btn.cancel"})}),Object(W.jsx)(o.Button,{buttonType:"primary",type:"submit",disabled:!La()(p),isLoading:v||x,children:t.formatMessage({id:"desk.settings.integration.iframe.form.btn.save"})})]})]})]})});var $A=Object(r.default)(o.IconButton).withConfig({displayName:"instagram___StyledIconButton",componentId:"sc-1hoc7y6-0"})(["margin-left:auto;"]);const BA=({match:e,onAddAccountButtonClick:t})=>{const n=Object(E.a)(),i=Object(a.useRef)(!1),r=Object(s.k)(),l=Object(b.f)(),{instagramReducer:{state:{instagramAccounts:c,isFetchingInstagramAccounts:d},actions:{fetchInstagramAccounts:u,patchInstagramAccountRequest:p}}}=Object(a.useContext)(uf);Object(a.useEffect)(()=>{0===c.length&&(i.current?r.replace(e.url.substring(0,e.url.lastIndexOf("/"))):(i.current=!0,u()))},[c,r,e.url,u]),Object(a.useEffect)(()=>()=>{i.current=!1},[]);const g=e=>{const t=c.find(t=>t.id===Number(e.currentTarget.dataset.id)),{name:a}=e.currentTarget;t&&l(j.b.showDialogsRequest({dialogTypes:A.a.Confirm,dialogProps:{title:n.formatMessage({id:"desk.settings.integration.removeAlert.instagram.title"},{accountName:a}),description:n.formatMessage({id:"desk.settings.integration.removeAlert.instagram.body"}),confirmText:n.formatMessage({id:"desk.settings.integration.removeAlert.btn.remove"}),cancelText:n.formatMessage({id:"desk.settings.integration.removeAlert.btn.cancel"}),onConfirm:()=>{p({instagramUserId:t.id,status:"INACTIVE",onSuccess:u})}}}))};return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:e.url.substring(0,e.url.lastIndexOf("/"))}),Object(W.jsx)(iy.a.Title,{children:n.formatMessage({id:"desk.settings.integration.instagram.title"})})]}),Object(W.jsxs)(yA,{children:[Object(W.jsxs)(OA,{children:[Object(W.jsx)(o.Icon,{className:"SocialMediaIcon",icon:"instagram-colored",size:24}),Object(W.jsx)("h4",{className:"SocialMediaName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.instagram.title"})}),Object(W.jsx)("p",{className:"SocialMediaDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.instagram.description"})}),Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",icon:"plus",onClick:t,disabled:d,isLoading:d,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.instagram.btn.add"})})]}),Object(W.jsxs)(vA,{children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{className:"IntegrationTable__column--pageName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.instagram.column.lbl.accounts"})}),Object(W.jsx)("th",{className:"IntegrationTable__column--settings",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.instagram.column.lbl.permissions"})})]})}),Object(W.jsx)("tbody",{children:c.filter(({status:e})=>"ACTIVE"===e).map(({id:t,username:a,profilePictureUrl:i,isCommentEnabled:s})=>Object(W.jsxs)("tr",{children:[Object(W.jsxs)("td",{className:"IntegrationTable__column--pageName",children:[Object(W.jsx)(CA,{thumbnail:i?{url:i,name:a}:void 0}),Object(W.jsxs)("a",{href:`https://instagram.com/${a}`,target:"_blank",children:["@",a]})]}),Object(W.jsxs)("td",{className:"IntegrationTable__column--settings",children:[Object(W.jsx)(TA,{isEnabled:s,label:n.formatMessage({id:"desk.settings.integration.list.instagram.lbl.comments"})}),Object(W.jsx)($A,{buttonType:"secondary",size:"small",title:n.formatMessage({id:"desk.settings.integration.list.button.tooltip.edit"}),icon:"edit",onClick:()=>r.push(`${e.url}/${t}`)}),Object(W.jsx)(o.IconButton,{buttonType:"secondary",size:"small",title:n.formatMessage({id:"desk.settings.integration.list.button.tooltip.delete"}),icon:"remove","data-id":t,name:a,onClick:g,disabled:d,isLoading:d})]})]},t))})]})]})]})},VA=({match:e})=>{const t=Object(s.k)(),{instagramReducer:{state:{instagramAccounts:n,isFetchingInstagramAccounts:i},actions:{fetchInstagramAccounts:r,patchInstagramAccountRequest:l}}}=Object(a.useContext)(uf),c=Object(E.a)(),d=Object(a.useRef)(!1),u=n.find(t=>t.id===Number(e.params.id)),p=e.url.substring(0,e.url.lastIndexOf("/")),g=Object(o.useForm)({onSubmit:async({isCommentEnabled:e})=>{u&&await l({instagramUserId:u.id,isCommentEnabled:e,onSuccess:()=>{t.push(p)}})}}),h=Object(o.useField)("isCommentEnabled",g,{defaultValue:u&&u.isCommentEnabled||!1,isControlled:!0}),m=Object(a.useCallback)(e=>()=>{t.push(e)},[t]);return Object(a.useEffect)(()=>{u&&h.updateValue(u.isCommentEnabled||!1)},[u]),Object(a.useEffect)(()=>{0===n.length&&(d.current?t.replace(e.url.substring(0,e.url.lastIndexOf("/"))):(d.current=!0,r()))},[n,t,e.url,r]),u?Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:p}),Object(W.jsx)(iy.a.Title,{children:`@${u.username}`})]}),Object(W.jsx)(xA,{children:Object(W.jsx)(iy.g,{className:"IntegrationCommentEdit__card",children:Object(W.jsx)(iy.e,{title:c.formatMessage({id:"desk.settings.integration.edit.instagram.header.comments"}),description:c.formatMessage({id:"desk.settings.integration.edit.instagram.body.comments"}),stretchLabel:{width:384,wideWidth:384},showActions:!0,actions:[{key:"cancel",label:c.formatMessage({id:"desk.settings.integration.edit.btn.cancel"}),buttonType:"tertiary",onClick:m(p)},{key:"save",label:c.formatMessage({id:"desk.settings.integration.edit.btn.save"}),buttonType:"primary",disabled:i,isLoading:i,onClick:e=>{g.onSubmit(e)}}],children:Object(W.jsx)(o.Toggle,{name:h.name,checked:h.value,onChange:h.updateValue})})})})]}):null},zA=r.default.div.withConfig({displayName:"overview__IntegrationCard",componentId:"sc-1y4tirx-0"})(["position:relative;grid-column:span 5;border:1px solid ",";padding:24px;border-radius:4px;.IntegrationCardIcon{margin-bottom:16px;}.IntegrationCardName{display:flex;align-items:center;"," color:",";margin-bottom:8px;","{margin-left:8px;}}.IntegrationCardDescription{"," color:",";margin-bottom:16px;}.IntegratedMark{position:absolute;top:24px;right:24px;}.CardAction{margin-left:-12px;}"],Object(o.cssVariables)("neutral-3"),o.Subtitles["subtitle-03"],Object(o.cssVariables)("neutral-10"),o.Lozenge,o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),HA=Object(r.default)(o.InlineNotification).withConfig({displayName:"overview__ErrorNotification",componentId:"sc-1y4tirx-1"})(["margin:0 -20px -20px -20px;"]),qA=i.a.memo(({handleAddFacebookPageClick:e})=>{const t=Object(E.a)(),n=Object(b.f)(),i=Object(s.k)(),r=Object(s.n)(),{facebookPages:l,isAddingFacebookPages:c,fetchFacebookActivePages:{isFetching:d,error:u}}=Object(b.g)(e=>e.integrations),p=Object(a.useCallback)(()=>{n(j.d.facebookActivePagesRequest())},[n]);Object(a.useEffect)(()=>{p()},[p]);const g=Object(a.useCallback)(()=>{i.push(`${null==r?void 0:r.url}/facebook`)},[i,r]),h=l.length>0?Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",onClick:g,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.facebook.btn.manage",values:{count:l.length}})}):Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",icon:"plus",onClick:e,disabled:c||d,isLoading:c||d,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.facebook.btn.add"})});return Object(W.jsxs)(zA,{children:[Object(W.jsx)(o.Icon,{className:"IntegrationCardIcon",icon:"facebook-colored",size:24}),Object(W.jsx)("h4",{className:"IntegrationCardName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.facebook.title"})}),l.length>0&&Object(W.jsx)(o.Icon,{className:"IntegratedMark",icon:"success",size:20,color:Object(o.cssVariables)("green-5")}),Object(W.jsx)("p",{className:"IntegrationCardDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.facebook.lbl.description"})}),u?Object(W.jsx)(HA,{type:"error",message:u,action:{label:t.formatMessage({id:"desk.settings.integration.btn.retry"}),onClick:()=>{p()}}}):h]})}),GA=i.a.memo(({handleAddTwitterAccountClick:e})=>{var t;const n=Object(E.a)(),i=Object(s.k)(),r=Object(s.n)(),l=Object(s.l)(),c=null!=(t=null==r?void 0:r.url)?t:"",{twitterReducer:{state:{twitterUsers:d,isFetchingTwitterUsers:u,isFetchingSubscribeTwitter:p,isFetchingTwitterOauthToken:g,fetchTwitterUsersError:h},actions:{fetchTwitterUsers:m,subscribeTwitterRequest:f}}}=Object(a.useContext)(uf),b=Object(a.useCallback)(()=>{i.push(`${c}/twitter`)},[i,c]);Object(a.useEffect)(()=>{m()},[m]),Object(a.useEffect)(()=>{const{oauth_token:e,oauth_verifier:t}=Wt.a.parse(l.search.slice(1));e&&t&&f({oauth_token:e,oauth_verifier:t}).then(()=>{o.toast.success({message:n.formatMessage({id:"desk.settings.integration.twitter.noti.add.success"})}),i.push(`${c}/twitter`)}).catch(e=>{Object(mi.a)(e),i.replace(l.pathname.replace(l.search,""))})},[n,l.pathname,l.search,i,f,c]);const j=d.length>0?Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",onClick:b,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.twitter.btn.manage",values:{count:d.length}})}):Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",icon:"plus",onClick:e(l.pathname),disabled:u||p||g,isLoading:u||p||g,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.twitter.btn.add"})});return Object(W.jsxs)(zA,{children:[Object(W.jsx)(o.Icon,{className:"IntegrationCardIcon",icon:"twitter-colored",size:24}),Object(W.jsx)("h4",{className:"IntegrationCardName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.twitter.title"})}),d.length>0&&Object(W.jsx)(o.Icon,{className:"IntegratedMark",icon:"success",size:20,color:Object(o.cssVariables)("green-5")}),Object(W.jsx)("p",{className:"IntegrationCardDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.twitter.lbl.description"})}),h?Object(W.jsx)(HA,{type:"error",message:h,action:{label:n.formatMessage({id:"desk.settings.integration.btn.retry"}),onClick:()=>{m()}}}):j]})}),WA=i.a.memo(({handleAddInstagramClick:e})=>{const t=Object(E.a)(),n=Object(s.n)(),i=Object(s.k)(),r=Object(a.useCallback)(()=>{i.push(`${null==n?void 0:n.url}/instagram`)},[i,n]),{instagramReducer:{state:{instagramAccounts:l,isFetchingInstagramAccounts:c,isPatchingInstagramAccounts:d,fetchInstagramAccountsError:u},actions:{fetchInstagramAccounts:p}}}=Object(a.useContext)(uf);Object(a.useEffect)(()=>{p()},[p]);const g=l.filter(e=>"ACTIVE"===e.status),h=g.length>0?Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",onClick:r,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.instagram.btn.manage",values:{count:l.length}})}):Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",icon:"plus",onClick:e,disabled:c||d,isLoading:c||d,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.instagram.btn.add"})});return Object(W.jsxs)(zA,{children:[Object(W.jsx)(o.Icon,{className:"IntegrationCardIcon",icon:"instagram-colored",size:24}),Object(W.jsx)("h4",{className:"IntegrationCardName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.instagram.title"})}),g.length>0&&Object(W.jsx)(o.Icon,{className:"IntegratedMark",icon:"success",size:20,color:Object(o.cssVariables)("green-5")}),Object(W.jsx)("p",{className:"IntegrationCardDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.instagram.lbl.description"})}),u?Object(W.jsx)(HA,{type:"error",message:u,action:{label:t.formatMessage({id:"desk.settings.integration.btn.retry"}),onClick:()=>{p()}}}):h]})}),KA=()=>{var e;const t=Object(E.a)(),{pid:n,region:i}=Object(L.a)(),r=Object(s.k)(),l=Object(P.c)(),[{status:c,data:d},u]=Object(P.g)(()=>Object(N.getProjectNexmoAccounts)(n,i,{offset:0,limit:1}),[n,i]),p=(null!=(e=null==d?void 0:d.data.count)?e:0)>0,g=Object(a.useCallback)(()=>{"success"===c&&null!=(null==d?void 0:d.data)&&p?r.push(`/${l}/desk/settings/integration/whatsapp/${d.data.results[0].id}`):r.push(`/${l}/desk/settings/integration/whatsapp`)},[l,p,r,d,c]);Object(a.useEffect)(()=>{u()},[u]);const h=Object(a.useMemo)(()=>"error"===c?Object(W.jsx)(HA,{type:"error",message:t.formatMessage({id:"desk.settings.integration.whatsapp.card.error.unexpected"}),action:{label:t.formatMessage({id:"desk.settings.integration.whatsapp.card.error.btn.retry"}),onClick:u}}):"success"===c&&p?Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",onClick:g,children:t.formatMessage({id:"desk.settings.integration.whatsapp.card.btn.manage"})}):Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",icon:"plus",onClick:g,disabled:"init"===c||"loading"===c,isLoading:"init"===c||"loading"===c,children:t.formatMessage({id:"desk.settings.integration.whatsapp.card.btn.add"})}),[c,p,g,t,u]);return Object(W.jsxs)(zA,{children:[Object(W.jsx)(o.Icon,{className:"IntegrationCardIcon",icon:"whatsapp-colored",size:24}),Object(W.jsx)("h4",{className:"IntegrationCardName",children:t.formatMessage({id:"desk.settings.integration.whatsapp.card.title"})}),"success"===c&&p&&Object(W.jsx)(o.Icon,{className:"IntegratedMark",icon:"success",size:20,color:Object(o.cssVariables)("green-5")}),Object(W.jsx)("p",{className:"IntegrationCardDescription",children:t.formatMessage({id:"desk.settings.integration.whatsapp.card.desc"})}),h]})},YA=i.a.memo(({onIframeButtonClick:e})=>{const t=Object(E.a)(),{isInstalled:n,error:i,load:s,isFetching:r,isEnabled:l}=Object(P.y)(),c=Object(a.useMemo)(()=>Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",variant:"ghost",icon:n?"settings":"plus",onClick:e,isLoading:r,children:Object(W.jsx)(ge.a,{id:n?"desk.settings.integration.iframe.btn.settings":"desk.settings.integration.iframe.btn.install"})}),[e,r,n]);return Object(W.jsxs)(zA,{children:[Object(W.jsx)(o.Icon,{className:"IntegrationCardIcon",icon:"iframe-colored",size:24}),Object(W.jsxs)("h4",{className:"IntegrationCardName",children:[t.formatMessage({id:"desk.settings.integration.iframe.title"}),n&&!l&&Object(W.jsx)(o.Lozenge,{color:"neutral",children:t.formatMessage({id:"desk.settings.integration.iframe.badge.disabled"})})]}),n&&Object(W.jsx)(o.Icon,{className:"IntegratedMark",icon:"success",size:20,color:Object(o.cssVariables)("green-5")}),Object(W.jsx)("p",{className:"IntegrationCardDescription",children:t.formatMessage({id:"desk.settings.integration.iframe.desc"})}),i?Object(W.jsx)(HA,{type:"error",message:t.formatMessage({id:"desk.settings.integration.iframe.error.notification"}),action:{label:t.formatMessage({id:"desk.settings.integration.iframe.error.btn.retry"}),onClick:s}}):c]})});var QA;!function(e){e.ALL="all",e.SOCIAL="social",e.APPS="apps"}(QA||(QA={}));const JA=[QA.ALL,QA.SOCIAL,QA.APPS];var XA=Object(r.default)(iy.b).withConfig({displayName:"overview___StyledAppSettingsContainer",componentId:"sc-1y4tirx-2"})([""," + *{margin-top:0;}"],iy.a),ZA=Object(r.default)(V.ec).withConfig({displayName:"overview___StyledTabMenu",componentId:"sc-1y4tirx-3"})(["margin-bottom:24px;"]);const eN=({handleAddFacebookPageClick:e,handleAddTwitterAccountClick:t,handleAddInstagramClick:n,onIframeButtonClick:i})=>{const s=Object(E.a)(),r=Object(b.g)(e=>e.organizations.current.uid),o=(FD(r)||UD(r))&&PD(r),{tab:l,updateParams:c}=Object(B.a)({tab:o?QA.ALL:void 0},{tab:e=>JA.filter(()=>o).some(t=>t===e)}),d=l?JA.indexOf(l):0,u=Object(a.useCallback)(e=>{var t;c({tab:null!=(t=JA[e])?t:QA.ALL})},[c]),p=Object(a.useMemo)(()=>{const a=[FD(r)&&Object(W.jsx)(qA,{handleAddFacebookPageClick:e},"facebook"),FD(r)&&Object(W.jsx)(GA,{handleAddTwitterAccountClick:t},"twitter"),UD(r)&&Object(W.jsx)(WA,{handleAddInstagramClick:n},"instagram"),$D(r)&&Object(W.jsx)(KA,{},"whatsapp")],s=[PD(r)&&Object(W.jsx)(YA,{onIframeButtonClick:i},"iframe")],o=[...a,...s];switch(l){case QA.SOCIAL:return a;case QA.APPS:return s;case QA.ALL:default:return o}},[e,i,n,t,l,r]);return Object(W.jsxs)(XA,{children:[Object(W.jsx)(iy.a,{children:Object(W.jsx)(iy.a.Title,{children:s.formatMessage({id:"desk.settings.integration.title"})})}),o&&Object(W.jsx)(ZA,{tabs:[{label:s.formatMessage({id:"desk.settings.integration.tab.all"}),value:"ALL"},{label:s.formatMessage({id:"desk.settings.integration.tab.social"}),value:"SOCIAL"},{label:s.formatMessage({id:"desk.settings.integration.tab.apps"}),value:"APPS"}],activeTab:d,hasBorder:!1,handleTabClick:u}),Object(W.jsx)(yA,{isGrid:!0,children:p})]})};n("p532");var tN=Object(r.default)(o.IconButton).withConfig({displayName:"twitter___StyledIconButton",componentId:"sc-1m9j51h-0"})(["margin-left:auto;"]);const nN=({location:e,match:t,onAddAccountButtonClick:n})=>{const i=Object(E.a)(),r=Object(s.k)(),l=Object(a.useRef)(!1),c=Object(b.f)(),{twitterReducer:{state:{twitterUsers:d,isFetchingSubscribeTwitter:u,isFetchingTwitterOauthToken:p,pendingUnsubscribeTwitterIDs:g},actions:{fetchTwitterUsers:h,subscribeTwitterRequest:m,removeTwitterAccount:f}}}=Object(a.useContext)(uf);Object(a.useEffect)(()=>{0===d.length&&(l.current?r.replace(t.url.substring(0,t.url.lastIndexOf("/"))):(l.current=!0,h()))},[d,r,t.url,h]),Object(a.useEffect)(()=>{const{oauth_token:t,oauth_verifier:n}=Wt.a.parse(e.search.slice(1));t&&n&&m({oauth_token:t,oauth_verifier:n}).then(()=>{o.toast.success({message:i.formatMessage({id:"desk.settings.integration.twitter.noti.add.success"})})}).catch(e=>{Object(mi.a)(e)}).finally(()=>{r.replace(e.pathname.replace(e.search,""))})},[e.pathname,e.search,r,m,i]),Object(a.useEffect)(()=>()=>{l.current=!1},[]);const y=e=>{const t=Number(e.currentTarget.dataset.id),n=d.find(e=>e.id===t),a=e.currentTarget.dataset.screenName;var s;n&&(s={dialogTypes:A.a.Confirm,dialogProps:{title:i.formatMessage({id:"desk.settings.integration.removeAlert.twitter.title"},{accountName:`@${a}`}),description:i.formatMessage({id:"desk.settings.integration.removeAlert.twitter.body"}),confirmText:i.formatMessage({id:"desk.settings.integration.removeAlert.btn.remove"}),onConfirm:async()=>{if(Number.isNaN(t))h();else try{await f(t),o.toast.success({message:i.formatMessage({id:"desk.settings.integration.twitter.noti.remove.success"})})}catch(e){Object(mi.a)(e)}}}},c(j.b.showDialogsRequest(s)))};return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:t.url.substring(0,t.url.lastIndexOf("/"))}),Object(W.jsx)(iy.a.Title,{children:i.formatMessage({id:"desk.settings.integration.twitter.title"})})]}),Object(W.jsxs)(yA,{children:[Object(W.jsxs)(OA,{children:[Object(W.jsx)(o.Icon,{className:"SocialMediaIcon",icon:"twitter-colored",size:24}),Object(W.jsx)("h4",{className:"SocialMediaName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.twitter.title"})}),Object(W.jsx)("p",{className:"SocialMediaDescription",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.twitter.description"})}),Object(W.jsx)(o.Button,{className:"CardAction",buttonType:"primary",icon:"plus",onClick:n(e.pathname),disabled:u||p,isLoading:u||p,children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.twitter.btn.add"})})]}),Object(W.jsxs)(vA,{children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("th",{className:"IntegrationTable__column--pageName",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.twitter.column.lbl.accounts"})}),Object(W.jsx)("th",{className:"IntegrationTable__column--settings",children:Object(W.jsx)(ge.a,{id:"desk.settings.integration.list.twitter.column.lbl.permissions"})})]})}),Object(W.jsx)("tbody",{children:d.map(({id:e,profileImageUrl:n,screenName:a,isDirectMessageEventEnabled:s,isStatusEnabled:l})=>Object(W.jsxs)("tr",{children:[Object(W.jsxs)("td",{className:"IntegrationTable__column--pageName",children:[Object(W.jsx)(CA,{thumbnail:n?{url:n,name:a}:void 0}),Object(W.jsxs)("a",{href:`https://twitter.com/${a}`,target:"_blank",children:["@",a]})]}),Object(W.jsxs)("td",{className:"IntegrationTable__column--settings",children:[Object(W.jsx)(TA,{isEnabled:l,label:i.formatMessage({id:"desk.settings.integration.list.twitter.lbl.tweets"})}),Object(W.jsx)(TA,{isEnabled:s,label:i.formatMessage({id:"desk.settings.integration.list.twitter.lbl.messages"})}),Object(W.jsx)(tN,{buttonType:"secondary",size:"small",title:i.formatMessage({id:"desk.settings.integration.list.button.tooltip.edit"}),icon:"edit",onClick:()=>r.push(`${t.url}/${e}`)}),Object(W.jsx)(o.IconButton,{buttonType:"secondary",size:"small",title:i.formatMessage({id:"desk.settings.integration.list.button.tooltip.delete"}),icon:"remove","data-id":e,"data-screen-name":a,onClick:y,disabled:g.includes(e),isLoading:g.includes(e)})]})]},e))})]})]})]})},aN=({match:e})=>{const t=Object(E.a)(),n=Object(s.k)(),{getErrorMessage:i}=Object($.a)(),r=Object(a.useRef)(!1),{twitterReducer:{state:{twitterUsers:l,isFetchingTwitterUsers:c,isPatchingTwitterUser:d},actions:{fetchTwitterUsers:u,patchTwitterAccount:p}}}=Object(a.useContext)(uf);Object(a.useEffect)(()=>{0===l.length&&(r.current?n.replace(e.url.substring(0,e.url.lastIndexOf("/"))):(r.current=!0,u()))},[l,n,e.url,u]);const g=Object(a.useCallback)(e=>()=>{n.push(e)},[n]),h=l.find(t=>t.id===Number(e.params.id)),[m,f]=Object(a.useState)({isDirectMessageEventEnabled:h&&h.isDirectMessageEventEnabled||!1,isStatusEnabled:h&&h.isStatusEnabled||!1});Object(a.useEffect)(()=>{f({isDirectMessageEventEnabled:h&&h.isDirectMessageEventEnabled||!1,isStatusEnabled:h&&h.isStatusEnabled||!1})},[h]);const b=Object(a.useCallback)(e=>{const{name:t,checked:n}=e.target;switch(t){case"isDirectMessageEventEnabled":case"isStatusEnabled":f(e=>({...e,[t]:n}));break;default:return}},[]),j=e.url.substring(0,e.url.lastIndexOf("/"));return h?Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:j}),Object(W.jsx)(iy.a.Title,{children:`@${h.screenName}`})]}),Object(W.jsx)(xA,{children:Object(W.jsxs)(iy.g,{className:"IntegrationTwitterEdit__card",children:[Object(W.jsx)(iy.e,{title:t.formatMessage({id:"desk.settings.integration.edit.twitter.header.tweets"}),description:t.formatMessage({id:"desk.settings.integration.edit.twitter.body.tweets"}),stretchLabel:{width:384,wideWidth:384},children:Object(W.jsx)(V.wb,{name:"isStatusEnabled",checked:m.isStatusEnabled,disabled:c,onChange:b})}),Object(W.jsx)(iy.e,{title:t.formatMessage({id:"desk.settings.integration.edit.twitter.header.messages"}),description:t.formatMessage({id:"desk.settings.integration.edit.twitter.body.messages"}),stretchLabel:{width:384,wideWidth:384},showActions:!0,actions:[{key:"cancel",label:t.formatMessage({id:"desk.settings.integration.edit.btn.cancel"}),buttonType:"tertiary",onClick:g(j)},{key:"save",label:t.formatMessage({id:"desk.settings.integration.edit.btn.save"}),buttonType:"primary",disabled:c||d,isLoading:c||d,onClick:async()=>{if(h)try{await p(h.id,m),o.toast.success({message:t.formatMessage({id:"desk.settings.integration.twitter.noti.update.success"})}),n.push(j)}catch(e){o.toast.error({message:i(e)})}}}],children:Object(W.jsx)(V.wb,{name:"isDirectMessageEventEnabled",checked:m.isDirectMessageEventEnabled,disabled:c,onChange:b})})]})})]}):null},iN=({match:e})=>{const t=Object(E.a)(),n=Object(s.k)(),i=Object(b.f)(),r=Object(b.g)(e=>e.organizations.current.uid),{twitterReducer:{actions:{authenticateTwitter:o}},instagramReducer:{actions:{addInstagramAccountsRequest:l}}}=Object(a.useContext)(uf);Object(a.useEffect)(()=>{window.fbAsyncInit=function(){FB.init({appId:"2164147677164087",cookie:!0,xfbml:!0,version:"v4.0"})},function(e,t,n){if(e.getElementById(n))return;const a=e.getElementsByTagName(t)[0];let i=a;i=e.createElement(t),i.id=n,i.async=!0,i.defer=!0,i.crossOrigin="anonymous",i.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(i,a)}(document,"script","facebook-jssdk")},[]);const c=t=>{t&&t.preventDefault(),FB.login(t=>{"connected"===t.status&&i(j.d.facebookAddPagesRequest({accessToken:t.authResponse.accessToken,onSuccessNavigateTo:`${e.url}/facebook`}))},{scope:"email,pages_manage_metadata,pages_messaging,read_page_mailboxes,publish_pages"})},d=e=>async t=>{t&&t.preventDefault();try{await o(e)}catch(e){Object(mi.a)(e)}},u=a=>{a&&a.preventDefault(),FB.login(a=>{"connected"===a.status&&l({accessToken:a.authResponse.accessToken,onSuccessNavigateTo:`${e.url}/instagram`,onError:a=>{const{title:s,description:r,isNegativeButtonHidden:o,positiveButtonProps:l}=(()=>{switch(a){case"desk400107":return{title:t.formatMessage({id:"desk.settings.integration.instagram.error.link.fb.title"}),description:t.formatMessage({id:"desk.settings.integration.instagram.error.link.fb.description"}),isNegativeButtonHidden:!1,positiveButtonProps:{text:t.formatMessage({id:"desk.settings.integration.instagram.error.link.fb.button"}),onClick:()=>{window.open("https://help.instagram.com/399237934150902","_blank")}}};case"desk400108":return{title:t.formatMessage({id:"desk.settings.integration.instagram.error.add.fb.title"}),description:t.formatMessage({id:"desk.settings.integration.instagram.error.add.fb.description"}),isNegativeButtonHidden:!1,positiveButtonProps:{text:t.formatMessage({id:"desk.settings.integration.instagram.error.add.fb.button"}),onClick:()=>{n.push(`${e.url}/facebook`)}}};case"desk400111":return{title:t.formatMessage({id:"desk.settings.integration.instagram.error.rate.limit.title"}),description:t.formatMessage({id:"desk.settings.integration.instagram.error.rate.limit.description"}),isNegativeButtonHidden:!0,positiveButtonProps:{text:t.formatMessage({id:"desk.settings.integration.instagram.error.rate.limit.button"})}};default:return{title:"",description:""}}})();s&&r&&i(j.b.showDialogsRequest({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:s,description:r,isNegativeButtonHidden:o,positiveButtonProps:l}}))}})},{scope:"email,instagram_basic,pages_show_list,instagram_manage_comments"})},p=Object(a.useCallback)(()=>{n.push(`${e.url}/iframe`)},[n,e.url]);return Object(W.jsxs)(s.g,{children:[FD(r)&&[Object(W.jsx)(s.d,{path:`${e.url}/facebook/:id`,component:MA},"facebookDetail"),Object(W.jsx)(s.d,{path:`${e.url}/facebook`,render:e=>Object(W.jsx)(IA,{...e,onAddPageButtonClick:c})},"facebook"),Object(W.jsx)(s.d,{path:`${e.url}/twitter/:id`,component:aN},"twitterDetail"),Object(W.jsx)(s.d,{path:`${e.url}/twitter`,render:e=>Object(W.jsx)(nN,{...e,onAddAccountButtonClick:d})},"twitter")],UD(r)&&[Object(W.jsx)(s.d,{path:`${e.url}/instagram/:id`,component:VA},"instagramDetail"),Object(W.jsx)(s.d,{path:`${e.url}/instagram`,render:e=>Object(W.jsx)(BA,{...e,onAddAccountButtonClick:u})},"instagram")],$D(r)&&Object(W.jsx)(s.d,{path:`${e.url}/whatsapp/:id?`,component:bA},"whatsappDetail"),PD(r)&&Object(W.jsx)(s.d,{path:`${e.url}/iframe`,component:UA}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/`,render:e=>Object(W.jsx)(eN,{...e,handleAddFacebookPageClick:c,handleAddTwitterAccountClick:d,handleAddInstagramClick:u,onIframeButtonClick:p})}),Object(W.jsx)(s.c,{to:`${e.url}`})]})},sN=r.default.div.withConfig({displayName:"quickReplies__Container",componentId:"i6wvxa-0"})(["position:relative;display:flex;flex-direction:column;height:100%;"]),rN=Object(r.default)(o.Button).withConfig({displayName:"quickReplies__AddQuickReplyButton",componentId:"i6wvxa-1"})(["margin-left:auto;"]),oN=Object(r.default)(o.InputText).withConfig({displayName:"quickReplies__SearchInput",componentId:"i6wvxa-2"})(["width:216px;"]),lN=r.default.div.withConfig({displayName:"quickReplies__TableContent",componentId:"i6wvxa-3"})(["display:flex;flex:1;width:100%;min-height:0;padding-bottom:0;"]),cN=r.default.span.withConfig({displayName:"quickReplies__TextShorten",componentId:"i6wvxa-4"})(["display:inline-block;width:98%;max-width:98%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),dN=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"quickReplies__QuickReplyTable",componentId:"i6wvxa-5"})(["width:100%;height:100%;"]),uN=Object(r.default)(pe.Link).withConfig({displayName:"quickReplies__QuickReplyTitle",componentId:"i6wvxa-6"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";width:100%;"],Object(o.cssVariables)("neutral-10")),pN=Object(r.default)(V.Ub).withConfig({displayName:"quickReplies__QuickReplyPagination",componentId:"i6wvxa-7"})(["margin-left:auto;"]);var gN=Object(r.default)(iy.a).withConfig({displayName:"quickReplies___StyledAppSettingPageHeader",componentId:"i6wvxa-8"})(["& + *{margin-top:32px;}* + ","{margin-top:2px;}"],e=>e._css);const hN=i.a.memo(({match:e})=>{w();const{isPermitted:t}=Object(P.h)(),n=t(["desk.admin"]),i=Object(E.a)(),r=Object(s.k)(),{page:l,pageSize:d,setPagination:u}=Object(P.Q)(1,20),{getErrorMessage:p}=Object($.a)(),g=Object(_o.a)(),h=Object(b.g)(e=>e.desk.project.pid),m=Object(b.g)(e=>{var t,n;return null!=(t=null==(n=e.applicationState.data)?void 0:n.region)?t:""}),y=Object(b.f)(),[O,v]=Object(a.useState)(0),[x,_]=Object(a.useState)([]),[C,k]=Object(a.useState)(!1),[T,S]=Object(a.useState)(!1),[I,M]=Object(a.useState)(void 0),N=Object(a.useMemo)(()=>n?[f.Pb.ALL,f.Pb.GROUP,f.Pb.AGENT]:[f.Pb.AGENT],[n]),R=async({offset:e,limit:t,q:n})=>{k(!0);try{const{data:a}=await D.g.fetchQuickReplies(h,m,{offset:e,limit:t,q:n,availableType:N});_(a.results),v(a.count),k(!1)}catch(e){o.toast.error({message:p(e)}),k(!1)}},L=Object(o.useForm)({onSubmit:async({query:e})=>{""===e?(S(!1),M(void 0)):M(e),1===l?R({offset:0,limit:d,q:e}):u(1,d)}}),F=Object(o.useField)("query",L,{defaultValue:"",placeholder:i.formatMessage({id:"desk.settings.quickReplies.ph.search"})});Object(a.useEffect)(()=>{R({offset:(l-1)*d,limit:d,q:F.getValue()})},[l,d]);const U=t=>()=>{r.push(`${e.url}/${t}/duplicate`)},B=e=>()=>{var t;t={dialogTypes:A.a.Delete,dialogProps:{title:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.title"}),description:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.desc"}),confirmText:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.confirm"}),cancelText:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.cancel"}),onDelete:async()=>{await(async(e,t)=>{S(!1),M(void 0),k(!0);try{await D.g.deleteQuickReply(h,m,{id:e.id}),k(!1),R({offset:(l-1)*d,limit:d,q:t})}catch(e){o.toast.error({message:p(e)}),k(!1)}})(e,F.value),o.toast.success({message:i.formatMessage({id:"desk.settings.quickReplies.detail.toast.success.delete"})})}}},y(j.b.showDialogsRequest(t))},H=Object(a.useMemo)(()=>[{title:i.formatMessage({id:"desk.settings.quickReplies.th.title"}),dataIndex:"name",flex:2,sorter:!0,render:({id:t,name:n})=>Object(W.jsx)(uN,{dir:g,to:`${e.url}/${t}/edit`,children:n})},{title:i.formatMessage({id:"desk.settings.quickReplies.th.message"}),dataIndex:"message",flex:4,sorter:!0,render:({message:e})=>Object(W.jsx)(cN,{dir:g,children:e})},{title:i.formatMessage({id:"desk.settings.quickReplies.th.updatedAt"}),dataIndex:"updatedAt",flex:2,sorter:!0,render:({updatedAt:e})=>c()(e).format("lll")}],[g,i,e.url]);return n&&!H.some(e=>"availableType"===e.dataIndex)&&H.splice(2,0,{title:i.formatMessage({id:"desk.settings.quickReplies.th.availability"}),dataIndex:"availableType",flex:1,sorter:!0,render:({availableType:e,groups:t})=>{switch(e){case f.Pb.GROUP:return i.formatMessage({id:"desk.settings.quickReplies.td.availability.teams"},{teams:t.length});case f.Pb.AGENT:return i.formatMessage({id:"desk.settings.quickReplies.td.availability.myself"});default:return i.formatMessage({id:"desk.settings.quickReplies.td.availability.allAgents"})}}}),Object(W.jsx)(iy.b,{isTableView:!0,children:Object(W.jsxs)(sN,{children:[Object(W.jsxs)(gN,{_css:iy.a.Description,children:[Object(W.jsx)(iy.a.Title,{children:"Quick replies"}),Object(W.jsx)(iy.a.Actions,{children:Object(W.jsx)(rN,{buttonType:"primary",size:"small",icon:"plus",onClick:()=>{r.push(`${e.url}/create`)},children:i.formatMessage({id:"desk.settings.quickReplies.button.add"})})}),Object(W.jsx)(iy.a.Description,{$textOnly:!0,children:i.formatMessage({id:"desk.settings.quickReplies.desc"})})]}),Object(W.jsx)(V.gc,{children:Object(W.jsx)(oN,{size:"small",ref:F.ref,name:F.name,placeholder:F.placeholder,icons:F.getValue().trim().length>0?[{icon:"close",size:"xsmall",disabled:C,onClick:async()=>{S(!1),M(void 0),await F.reset(),1===l?R({offset:0,limit:d}):u(1,d)}}]:[{icon:"search",size:"xsmall",disabled:C,isLoading:C,onClick:e=>{S(!0),L.onSubmit(e)}}],onChange:F.onChange,onKeyDown:e=>{"Enter"===e.key&&(e&&e.preventDefault(),S(!0),L.onSubmit(e))}})}),Object(W.jsx)(lN,{"data-test-id":"QuickReplyTable",children:Object(W.jsx)(dN,{rowKey:"id",loading:C,dataSource:x,showScrollbars:!0,columns:H,rowActions:t=>{return[Object(W.jsx)(o.OverflowMenu,{items:[{label:i.formatMessage({id:"desk.settings.quickReplies.label.edit"}),onClick:(n=t.id,()=>{r.push(`${e.url}/${n}/edit`)})},{label:i.formatMessage({id:"desk.settings.quickReplies.label.duplicate"}),onClick:U(t.id)},{label:i.formatMessage({id:"desk.settings.quickReplies.label.delete"}),onClick:B(t)}],stopClickEventPropagation:!0},"quickRepliesOverflow")];var n},footer:Object(W.jsx)(pN,{current:l,total:O,pageSize:d,pageSizeOptions:[10,20,50,100],onChange:u,onItemsPerPageChange:(e,t)=>{u(1,t)}}),emptyView:T?Object(W.jsx)(z.a,{icon:"no-search",title:i.formatMessage({id:"desk.settings.quickReplies.noMatch.title"}),description:i.formatMessage({id:"desk.settings.quickReplies.noMatch.desc"},{query:I})}):Object(W.jsx)(z.a,{icon:"no-data",title:i.formatMessage({id:"desk.settings.quickReplies.noResult.title"}),description:i.formatMessage({id:"desk.settings.quickReplies.noResult.desc"},{break:Object(W.jsx)("br",{})})})})})]})})});var mN,fN=n("JRnr");!function(e){e.ORIGINAL="ORIGINAL",e.PREVIEW="PREVIEW"}(mN||(mN={}));const bN=r.default.div.withConfig({displayName:"quickRepliesEditor__Container",componentId:"x4ihoh-0"})(["position:relative;z-index:1;padding:0 16px 12px;min-height:200px;border-radius:4px;border-width:1px;border-style:solid;border-color:",";box-shadow:",";transition:0.2s ",";transition-property:color,background,border,box-shadow;will-change:color,background,border,box-shadow;&:focus{border-color:",";box-shadow:0 0 0 1px ",";}#caret{display:inline-block;width:1px;height:18px;background:",";}"],e=>e.isFocused?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-3"),e=>e.isFocused?`0 0 0 1px ${Object(o.cssVariables)("purple-7")}`:"none",o.transitionDefault,Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")),jN=r.default.div.withConfig({displayName:"quickRepliesEditor__EditorFunctions",componentId:"x4ihoh-1"})(["display:flex;align-items:center;"]),yN=r.default.ul.withConfig({displayName:"quickRepliesEditor__EditorTabs",componentId:"x4ihoh-2"})(["display:flex;flex:1;"]),ON=Object(r.default)(o.Lozenge).withConfig({displayName:"quickRepliesEditor__EditorTag",componentId:"x4ihoh-3"})(["display:inline-block;font-family:'Roboto Mono',monospace;color:"," !important;"],Object(o.cssVariables)("neutral-10")),vN=r.default.li.withConfig({displayName:"quickRepliesEditor__EditorTab",componentId:"x4ihoh-4"})(["position:relative;display:flex;align-items:center;margin-right:24px;height:40px;font-size:14px;font-weight:600;line-height:1.43;letter-spacing:-0.1px;color:",";cursor:pointer;&:before{content:'';display:block;position:absolute;right:0;left:0;bottom:0;width:100%;height:2px;background:",";opacity:",";transform:scale(",");transition:0.2s ",";transition-property:opacity,transform;}"],e=>e.isActive?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-7"),Object(o.cssVariables)("purple-7"),e=>e.isActive?1:0,e=>e.isActive?1:0,o.transitionDefault),xN=r.default.div.withConfig({displayName:"quickRepliesEditor__EditorPropertyTag",componentId:"x4ihoh-5"})(["flex:none;position:relative;z-index:40;height:40px;transform:translateX(8px) translateY(4px);"]),_N=Object(r.css)(["margin:0;padding:0;min-height:136px;font-size:14px;line-height:1.5;letter-spacing:-0.1px;color:",";background:none;outline:0;word-wrap:break-word;white-space:pre-wrap;"],Object(o.cssVariables)("neutral-10")),CN=r.default.div.withConfig({displayName:"quickRepliesEditor__EditorContainer",componentId:"x4ihoh-6"})(["position:relative;margin-top:12px;"]),kN=Object(r.default)(V.B).withConfig({displayName:"quickRepliesEditor__Editable",componentId:"x4ihoh-7"})(["position:relative;z-index:30;"]),wN=r.default.div.withConfig({displayName:"quickRepliesEditor__Viewer",componentId:"x4ihoh-8"})([""," position:absolute;top:0;left:0;z-index:10;width:100%;opacity:",";transition:opacity 0.3s ",";"],_N,e=>e.isShow?1:0,o.transitionDefault),TN=[{label:`{${ri.TICKET_NAME}}`,nodeLabel:"Ticket name",value:ri.TICKET_NAME},{label:`{${ri.CUSTOMER_DISPLAY_NAME}}`,nodeLabel:"Customer name",value:ri.CUSTOMER_DISPLAY_NAME},{label:`{${ri.AGENT_DISPLAY_NAME}}`,nodeLabel:"Agent name",value:ri.AGENT_DISPLAY_NAME}],SN=i.a.memo(({editorRef:e,editableText:t})=>{var n;const i=Object(E.a)(),s=Object(_o.a)(),[l,c]=Object(a.useState)(!1),[d,u]=Object(a.useState)(mN.ORIGINAL),[p,g]=Object(a.useState)(""),[h,m]=Object(a.useState)(!1),[f,b]=Object(a.useState)(-1),j=Object(a.useRef)(null),y=Object(a.useRef)(null),O=Object(a.useRef)(null),v=Object(sO.a)({ref:y,exceptionRefs:[O],isExceptionsPreventOutsideClickEvent:!0,onOutsideClick:()=>{c(!1),u(mN.PREVIEW),m(!1),b(-1)}}),x=()=>{if(window.getSelection){const e=window.getSelection();e&&e.getRangeAt&&e.rangeCount&&(j.current=e.getRangeAt(0))}},_=e=>"{"===p||!p||e.value.toLowerCase().includes(p.slice(1).toLowerCase()),C=t=>()=>{var n;t===mN.ORIGINAL?null==(n=e.current)||n.focus():c(!1);t!==d&&u(t)},k=()=>{var t;null==(t=e.current)||t.focus()};Object(a.useEffect)(()=>{"{"===p||0===p.indexOf("{")&&TN.find(e=>e.value.toLowerCase().includes(p.toLowerCase().slice(1)))?m(!0):h&&0!==p.indexOf("{")&&m(!1)},[p]),Object(a.useEffect)(()=>{e.current&&e.current.setText(t)},[t]);const w=d===mN.ORIGINAL,T=d===mN.PREVIEW;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(iO,{isOpen:h,searchQuery:p.slice(1),highlightedIndex:f,itemContainerRef:O,items:TN,itemToElement:e=>Object(W.jsx)(ON,{color:"neutral",children:e.nodeLabel}),onItemFilter:_,onItemClick:e=>t=>{t&&t.preventDefault(),hi({range:j.current,replaceValue:e.label,searchQuery:p}),m(!1)}}),Object(W.jsxs)(bN,{id:"QuickReplyEditorContainer",ref:y,isFocused:l,children:[Object(W.jsxs)(jN,{children:[Object(W.jsxs)(yN,{children:[Object(W.jsx)(vN,{isActive:d===mN.ORIGINAL,onClick:C(mN.ORIGINAL),children:i.formatMessage({id:"desk.settings.quickReplies.detail.tab.write"})}),Object(W.jsx)(vN,{isActive:T,onClick:C(mN.PREVIEW),children:i.formatMessage({id:"desk.settings.quickReplies.detail.tab.preview"})})]}),Object(W.jsx)(xN,{children:Object(W.jsx)(o.Dropdown,{variant:"inline",showArrow:!1,placement:"bottom-end",disabled:T,selectedItem:{label:"",nodeLabel:"",value:ri.NONE},items:TN,itemToElement:e=>Object(W.jsx)(ON,{color:"neutral",children:e.nodeLabel}),toggleRenderer:()=>Object(W.jsx)(o.Tooltip,{placement:"top-end",content:i.formatMessage({id:"desk.settings.quickReplies.detail.tooltip.propertyTags"}),portalId:"QuickReplyEditorContainer",children:Object(W.jsx)(o.IconButton,{icon:"metadata",buttonType:"primary",size:"small",disabled:T,onClick:k})}),onItemSelected:e=>{j.current&&e&&oi(j.current,e.label)}})})]}),Object(W.jsxs)(CN,{children:[Object(W.jsx)(kN,{dir:s,ref:e,placeholder:" ",isEnterKeySubmit:!1,isStopDefaultKeyDownEvent:h,autoFocus:!1,onFocus:()=>{v.subscribe(),c(!0),u(mN.ORIGINAL),x()},onBlur:()=>{v.unsubscribe()},onKeyDown:e=>{if(e&&e.stopPropagation(),h&&["ArrowUp","ArrowDown","Enter","Escape"].includes(e.key)){e&&e.preventDefault();const t=TN.filter(_),n=t[f],a=t.length-1;switch(e.key){case"ArrowUp":b(f-1<0?a:f-1);break;case"ArrowDown":b(f+1>a?0:f+1);break;case"Enter":n&&hi({range:j.current,replaceValue:n.label,searchQuery:p}),m(!1),b(-1);break;case"Escape":m(!1),b(-1)}}else x()},onKeyUp:t=>{t&&t.stopPropagation(),x(),g(gi(e,"{")||"")},styles:Object(r.css)([""," opacity:",";transition:opacity 0.3s ",";"],_N,w?1:0,o.transitionDefault)}),Object(W.jsx)(wN,{dir:s,isShow:T,children:Object(W.jsx)(ui,{text:(null==(n=e.current)?void 0:n.getText())||"",values:{ticketName:Object(W.jsx)(ON,{color:"neutral",children:li.name}),customerName:Object(W.jsx)(ON,{color:"neutral",children:ci.displayName}),agentName:Object(W.jsx)(ON,{color:"neutral",children:di.displayName})}})})]})]})]})}),EN=r.default.div.withConfig({displayName:"quickRepliesDetail__LastUpdateBar",componentId:"sc-3cozch-0"})(["font-size:14px;color:",";"],Object(o.cssVariables)("neutral-6")),IN=Object(r.default)(o.OverflowMenu).withConfig({displayName:"quickRepliesDetail__TitleOverflowMenu",componentId:"sc-3cozch-1"})(["margin-left:8px;"]),MN=Object(r.default)(iy.j).withConfig({displayName:"quickRepliesDetail__FormGroup",componentId:"sc-3cozch-2"})(["margin-top:24px;"]),DN=r.default.div.withConfig({displayName:"quickRepliesDetail__RadioList",componentId:"sc-3cozch-3"})(["display:flex;flex-direction:column;align-items:flex-start;& > * + *{margin-top:8px;}"]),AN=r.default.span.withConfig({displayName:"quickRepliesDetail__AvailableForText",componentId:"sc-3cozch-4"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),NN=r.default.span.withConfig({displayName:"quickRepliesDetail__GroupOptionPlaceholder",componentId:"sc-3cozch-5"})(["display:flex;align-items:center;padding-left:8px;height:30px;font-size:14px;font-weight:500;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-6")),RN=r.default.div.withConfig({displayName:"quickRepliesDetail__ButtonGroup",componentId:"sc-3cozch-6"})(["display:flex;align-items:center;justify-content:flex-end;margin-top:16px;button + button{margin-left:8px;}"]);var PN=Object(r.default)(iy.a).withConfig({displayName:"quickRepliesDetail___StyledAppSettingPageHeader",componentId:"sc-3cozch-7"})(["","{display:block;overflow:hidden;text-overflow:ellipsis;}","{flex:none;}"],e=>e._css,e=>e._css2);const LN=Object(a.memo)(({match:e})=>{w();const{isPermitted:t}=Object(P.h)(),n=t(["desk.agent"]),i=Object(E.a)(),{getErrorMessage:r}=Object($.a)(),{appID:l,pid:d,region:u,agentId:p}=Object(b.g)(e=>{var t,n,a,i;return{appID:null!=(t=null==(n=e.applicationState.data)?void 0:n.app_id)?t:"",pid:e.desk.project.pid,region:null!=(a=null==(i=e.applicationState.data)?void 0:i.region)?a:"",agentId:e.desk.agent.id}}),g=Object(_o.a)(),h=Object(b.f)(),m=Object(s.k)(),{quickReplyId:j,duplicateQuickReplyId:y}=e.params,O=n?f.Pb.AGENT:f.Pb.ALL,[v,x]=Object(a.useState)(void 0),[_,C]=Object(a.useState)(!1),[k,T]=Object(a.useState)(O),[S,I]=Object(a.useState)([]),[M,N]=Object(a.useState)([]),[R,L]=Object(a.useState)(!1),F=k===f.Pb.GROUP?S.map(e=>parseInt(e.value,10)):void 0,U=Object(a.useRef)(null),B=k===f.Pb.AGENT?p:void 0,V=!!j,z=!!y,H=Object(a.useCallback)(()=>m.push(`/${l}/desk/settings/quick-replies`),[l,m]),q=Object(a.useCallback)(async({id:e})=>{try{const{data:t}=await D.g.fetchQuickReply(d,u,{id:e});x(t),I(t.groups.map(e=>({value:e.id.toString(),label:e.name}))),T(t.availableType)}catch(e){o.toast.error({message:r(e)})}finally{C(!1)}},[r,d,u]),G=Object(a.useCallback)(async()=>{L(!0);try{const{data:{results:e}}=await D.g.fetchAgentGroups(d,u,{offset:0,limit:100});N(e)}catch(e){o.toast.error({message:r(e)})}finally{L(!1)}},[r,d,u]),K=Object(a.useCallback)(async({id:e,name:t,message:n})=>{C(!0);try{await D.g.updateQuickReply(d,u,{id:e,availableAgent:B,availableType:k,group:F,name:t,message:n}),o.toast.success({message:i.formatMessage({id:"desk.settings.quickReplies.detail.toast.success.update"})}),H()}catch(e){o.toast.error({message:r(e)})}finally{C(!1)}},[B,k,r,H,i,d,u,F]),Y=Object(a.useCallback)(async({name:e,message:t})=>{C(!0);try{await D.g.createQuickReply(d,u,{name:e,message:t,availableAgent:B,availableType:k,group:F}),o.toast.success({message:i.formatMessage({id:"desk.settings.quickReplies.detail.toast.success.create"})}),H()}catch(e){o.toast.error({message:r(e)})}finally{C(!1)}},[B,k,r,H,i,d,u,F]),Q=Object(a.useCallback)(async e=>{C(!0);try{await D.g.deleteQuickReply(d,u,{id:e.id}),o.toast.success({message:i.formatMessage({id:"desk.settings.quickReplies.detail.toast.success.delete"})}),H()}catch(e){o.toast.error({message:r(e)})}finally{C(!1)}},[r,H,i,d,u]),J=Object(o.useForm)({onSubmit:({name:e})=>{const t=U.current?U.current.getText():"";t.trim().length<=0||(j?K({id:parseInt(j),name:e,message:t}):Y({name:e,message:t}))}}),X=Object(o.useField)("name",J,{defaultValue:(()=>{const e=v?v.name:"";return V?e:z?`${e} (Copy)`:""})(),validate:e=>e.trim().length<=0?i.formatMessage({id:"desk.settings.quickReplies.detail.name.error.minLength"}):e.trim().length>100?i.formatMessage({id:"desk.settings.quickReplies.detail.name.error.maxLength"}):""});Object(a.useEffect)(()=>{G()},[k,G]),Object(a.useEffect)(()=>{j&&q({id:parseInt(j)}),y&&q({id:parseInt(y)})},[j,y,q]);const Z=[{label:i.formatMessage({id:"desk.settings.quickReplies.label.duplicate"}),onClick:()=>{m.push(`/${l}/desk/settings/quick-replies/${j}/duplicate`)}},{label:i.formatMessage({id:"desk.settings.quickReplies.label.delete"}),onClick:()=>{var e;e={dialogTypes:A.a.Delete,dialogProps:{title:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.title"}),description:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.desc"}),confirmText:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.confirm"}),cancelText:i.formatMessage({id:"desk.settings.quickReplies.detail.delete.cancel"}),onDelete:async()=>{v&&await Q(v)}}},h({type:fN.n.SHOW_DIALOGS_REQUEST,payload:e})}}],ee=e=>{T(e.target.value)};return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(PN,{_css:iy.a.Title,_css2:iy.a.Actions,children:[Object(W.jsx)(iy.a.BackButton,{href:`/${l}/desk/settings/quick-replies`}),Object(W.jsx)(iy.a.Title,{children:(()=>{const e=v&&v.name||"";return V?e:z?i.formatMessage({id:"desk.settings.quickReplies.detail.title.duplicate"}):i.formatMessage({id:"desk.settings.quickReplies.detail.title.new"})})()}),V&&Object(W.jsxs)(iy.a.Actions,{children:[Object(W.jsx)(EN,{children:v&&`${i.formatMessage({id:"desk.settings.quickReplies.detail.lastUpdated"})} ${c()(v.updatedAt).format("lll")}`}),Object(W.jsx)(IN,{items:Z,iconButtonProps:{buttonType:"tertiary"}})]})]}),Object(W.jsxs)(MN,{children:[Object(W.jsx)(iy.i,{title:i.formatMessage({id:"desk.settings.quickReplies.detail.name.title"}),titleColumns:4,gridItemConfig:{subject:{alignSelf:X.error?"start":"center"}},children:Object(W.jsx)(o.InputText,{dir:g,ref:X.ref,name:X.name,placeholder:i.formatMessage({id:"desk.settings.quickReplies.detail.name.placeholder"}),error:X.error,tabIndex:0,autoFocus:!0,onChange:X.onChange,disabled:_})}),Object(W.jsx)(iy.i,{title:i.formatMessage({id:"desk.settings.quickReplies.detail.message.title"}),titleColumns:4,gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(SN,{editorRef:U,editableText:v?v.message:""})}),Object(W.jsx)(iy.i,{title:i.formatMessage({id:"desk.settings.quickReplies.detail.availableFor.title"}),titleColumns:4,gridItemConfig:{subject:{alignSelf:"start"}},children:n?Object(W.jsx)(AN,{children:i.formatMessage({id:"desk.settings.quickReplies.detail.availableFor.label.myself"})}):Object(W.jsxs)(DN,{children:[Object(W.jsx)(o.Radio,{name:"availableType",label:i.formatMessage({id:"desk.settings.quickReplies.detail.availableFor.label.allAgents"}),value:f.Pb.ALL,checked:k===f.Pb.ALL,onChange:ee}),Object(W.jsx)(o.Radio,{name:"availableType",label:i.formatMessage({id:"desk.settings.quickReplies.detail.availableFor.label.onlyToSpecificTeams"}),value:f.Pb.GROUP,checked:k===f.Pb.GROUP,onChange:ee}),k===f.Pb.GROUP&&Object(W.jsx)(o.TreeSelect,{treeData:M.map(e=>({value:e.id.toString(),label:e.name})),selectedNodes:S,disabled:R,toggleRenderer:0===S.length?()=>Object(W.jsx)(NN,{children:i.formatMessage({id:"desk.settings.quickReplies.detail.teams.placeholder"})}):void 0,onSelect:e=>{I(e)}}),Object(W.jsx)(o.Radio,{name:"availableType",label:i.formatMessage({id:"desk.settings.quickReplies.detail.availableFor.label.myself"}),value:f.Pb.AGENT,checked:k===f.Pb.AGENT,onChange:ee})]})})]}),Object(W.jsxs)(RN,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",onClick:H,children:i.formatMessage({id:"desk.settings.quickReplies.detail.button.cancel"})}),Object(W.jsx)(o.Button,{buttonType:"primary",onClick:e=>{J.onSubmit(e)},children:V||z?i.formatMessage({id:"desk.settings.quickReplies.detail.button.save"}):i.formatMessage({id:"desk.settings.quickReplies.detail.button.add"})})]})]})}),FN=r.default.div.withConfig({displayName:"SettingSystemMessage__TooltipHeader",componentId:"sc-1a3qixp-0"})([""," color:",";margin-bottom:4px;"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),UN={by_agent_name:{labelKey:"desk.settings.systemMessages.propertyTag.byAgent",value:"by_agent_name"},from_agent_name:{labelKey:"desk.settings.systemMessages.propertyTag.fromAgent",value:"from_agent_name"},to_agent_name:{labelKey:"desk.settings.systemMessages.propertyTag.toAgent",value:"to_agent_name"},from_team_name:{labelKey:"desk.settings.systemMessages.propertyTag.fromTeam",value:"from_team_name"},to_team_name:{labelKey:"desk.settings.systemMessages.propertyTag.toTeam",value:"to_team_name"},memo:{labelKey:"desk.settings.systemMessages.propertyTag.notes",value:"memo"},priority:{labelKey:"desk.settings.systemMessages.propertyTag.priority",value:"priority"},ticket_close_notes:{labelKey:"desk.settings.systemMessages.propertyTag.ticketCloseNotes",value:"ticket_close_notes"},ticket_transfer_notes:{labelKey:"desk.settings.systemMessages.propertyTag.ticketTransferNotes",value:"ticket_transfer_notes"}};var $N=Object(r.default)("b").withConfig({displayName:"SettingSystemMessage___StyledB",componentId:"sc-1a3qixp-1"})(["font-weight:600;"]);const BN=i.a.memo(({title:e,systemMessageKey:t,description:n,propertyTags:i,defaultValue:s,placeholder:r,onSave:l,onCancel:c,disabled:d})=>{const u=Object(E.a)(),p=Object(a.useRef)(null),[g,h]=Object(a.useState)(!1),[m,f]=Object(a.useState)(),{pid:j,region:y}=Object(b.g)(e=>{var t;return{pid:e.desk.project.pid,region:(null==(t=e.applicationState.data)?void 0:t.region)||""}}),[{status:O,data:v,error:x},_]=Object(P.g)(e=>D.g.updateSystemMessage(j,y,{[t]:e}),[]);Object(P.s)(x&&u.formatMessage({id:"desk.settings.systemMessages.toast.update.failed"}));const C=Object(a.useMemo)(()=>{if(i&&Object.keys(i).length>0)return Object.values(i).reduce((e,t)=>{const{labelKey:n,value:a}=UN[t];return e.push({label:u.formatMessage({id:n}),value:a}),e},[])},[u,i]),k=Object(a.useCallback)(()=>{var e,t;const n=null!=(e=null==(t=p.current)?void 0:t.getText())?e:"";_(n)},[_]),w=Object(a.useCallback)(()=>{var e;null==(e=p.current)||e.setText(s),null==c||c()},[c,s,p]),T=Object(a.useCallback)(e=>{h(e!==s),""===e.trim()?f(u.formatMessage({id:"desk.settings.systemMessages.input.error.empty"})):f(void 0)},[s,u]);return Object(a.useEffect)(()=>{"success"===O&&o.toast.success({message:u.formatMessage({id:"desk.settings.systemMessages.toast.update.success"})})},[u,O]),Object(a.useEffect)(()=>{null!=v&&v.data&&"success"===O&&(null==l||l(v.data))},[v,l,O]),Object(a.useEffect)(()=>{var e,t;const n=null!=(e=null==(t=p.current)?void 0:t.getText())?e:"";h(n!==s)},[s]),Object(W.jsx)(iy.i,{title:e,description:n,gridItemConfig:{subject:{alignSelf:"start"}},showActions:g,actions:[{key:"cancel",label:u.formatMessage({id:"desk.settings.systemMessages.btn.actions.cancel"}),buttonType:"tertiary",onClick:w},{key:"save",label:u.formatMessage({id:"desk.settings.systemMessages.btn.actions.save"}),buttonType:"primary",onClick:k,isLoading:"loading"===O,disabled:"loading"===O||d||!!m}],children:Object(W.jsx)(xO,{editorRef:p,defaultText:s,propertyTags:C,propertyTagTooltip:u.formatMessage({id:"desk.settings.systemMessages.btn.propertyTag.tooltip"}),contextualTooltip:Object(W.jsxs)("div",{children:[Object(W.jsx)(FN,{children:u.formatMessage({id:"desk.settings.systemMessages.contextualTooltip.title"})}),Object(W.jsx)("div",{children:u.formatMessage({id:"desk.settings.systemMessages.contextualTooltip.desc"},{b:e=>Object(W.jsx)($N,{children:e}),break:Object(W.jsx)("br",{})})})]}),placeholder:r,disabled:"loading"===O||d,onChange:T,error:m})})}),VN=r.default.b.withConfig({displayName:"TicketAssignmentSystemMessages__Bold",componentId:"sc-1ryi2dh-0"})(["font-weight:600;"]),zN=i.a.memo(({defaultMessages:e={},values:t={},onSave:n})=>{var a,i,s,r,o,l,c,d,u,p,g,h,m,b,j,y,O,v,x,_,C,k,w,T,S,I,M,D;const A=Object(E.a)(),N=[{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.assignedToAgentBySystem"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.ASSIGNED_BY_SYSTEM,defaultValue:null!=(a=t[f.fc.ASSIGNED_BY_SYSTEM])?a:"",placeholder:null!=(i=null==(s=e[f.fc.ASSIGNED_BY_SYSTEM])?void 0:s.message)?i:"",propertyTags:null==(r=e[f.fc.ASSIGNED_BY_SYSTEM])?void 0:r.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.assignedToAgentByAgent"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.ASSIGNED_BY_AGENT,defaultValue:null!=(o=t[f.fc.ASSIGNED_BY_AGENT])?o:"",placeholder:null!=(l=null==(c=e[f.fc.ASSIGNED_BY_AGENT])?void 0:c.message)?l:"",propertyTags:null==(d=e[f.fc.ASSIGNED_BY_AGENT])?void 0:d.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.assignedToTeamByAgent"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.GROUP_ASSIGNED_BY_AGENT,defaultValue:null!=(u=t[f.fc.GROUP_ASSIGNED_BY_AGENT])?u:"",placeholder:null!=(p=null==(g=e[f.fc.GROUP_ASSIGNED_BY_AGENT])?void 0:g.message)?p:"",propertyTags:null==(h=e[f.fc.GROUP_ASSIGNED_BY_AGENT])?void 0:h.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.dismissedToTeamByAgent"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.GROUP_UNASSIGNED_BY_AGENT,defaultValue:null!=(m=t[f.fc.GROUP_UNASSIGNED_BY_AGENT])?m:"",placeholder:null!=(b=null==(j=e[f.fc.GROUP_UNASSIGNED_BY_AGENT])?void 0:j.message)?b:"",propertyTags:null==(y=e[f.fc.GROUP_UNASSIGNED_BY_AGENT])?void 0:y.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.transferredToTeamByAgent"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.GROUP_TRANSFERRED_BY_AGENT,defaultValue:null!=(O=t[f.fc.GROUP_TRANSFERRED_BY_AGENT])?O:"",placeholder:null!=(v=null==(x=e[f.fc.GROUP_TRANSFERRED_BY_AGENT])?void 0:x.message)?v:"",propertyTags:null==(_=e[f.fc.GROUP_TRANSFERRED_BY_AGENT])?void 0:_.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.transferredAgentToAgentByAgent"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.TRANSFERRED_BY_AGENT,defaultValue:null!=(C=t[f.fc.TRANSFERRED_BY_AGENT])?C:"",placeholder:null!=(k=null==(w=e[f.fc.TRANSFERRED_BY_AGENT])?void 0:w.message)?k:"",propertyTags:null==(T=e[f.fc.TRANSFERRED_BY_AGENT])?void 0:T.parameters},{title:A.formatMessage({id:"desk.settings.systemMessages.ticketAssignment.transferredToTeamByPlatformAPI"},{b:e=>Object(W.jsx)(VN,{children:e})}),systemMessageKey:f.fc.GROUP_TRANSFERRED_BY_PLATFORM_API,defaultValue:null!=(S=t[f.fc.GROUP_TRANSFERRED_BY_PLATFORM_API])?S:"",placeholder:null!=(I=null==(M=e[f.fc.GROUP_TRANSFERRED_BY_PLATFORM_API])?void 0:M.message)?I:"",propertyTags:null==(D=e[f.fc.GROUP_TRANSFERRED_BY_PLATFORM_API])?void 0:D.parameters}];return Object(W.jsx)(iy.j,{children:N.map(e=>Object(W.jsx)(BN,{onSave:n,...e},`${e.systemMessageKey}_${e.defaultValue}`))})}),HN=r.default.b.withConfig({displayName:"TicketPrioritySystemMessages__Bold",componentId:"sc-3q53a-0"})(["font-weight:600;"]),qN=i.a.memo(({defaultMessages:e={},values:t={},onSave:n})=>{var a,i,s,r,o,l,c,d,u,p,g,h;const m=Object(E.a)(),b=[{title:m.formatMessage({id:"desk.settings.systemMessages.ticketPriority.changedByAgent"},{b:e=>Object(W.jsx)(HN,{children:e})}),systemMessageKey:f.hc.UPDATE_PRIORITY_BY_AGENT,defaultValue:null!=(a=t[f.hc.UPDATE_PRIORITY_BY_AGENT])?a:"",placeholder:null!=(i=null==(s=e[f.hc.UPDATE_PRIORITY_BY_AGENT])?void 0:s.message)?i:"",propertyTags:null==(r=e[f.hc.UPDATE_PRIORITY_BY_AGENT])?void 0:r.parameters},{title:m.formatMessage({id:"desk.settings.systemMessages.ticketPriority.changedByCustomer"},{b:e=>Object(W.jsx)(HN,{children:e})}),systemMessageKey:f.hc.UPDATE_PRIORITY_BY_CUSTOMER,defaultValue:null!=(o=t[f.hc.UPDATE_PRIORITY_BY_CUSTOMER])?o:"",placeholder:null!=(l=null==(c=e[f.hc.UPDATE_PRIORITY_BY_CUSTOMER])?void 0:c.message)?l:"",propertyTags:null==(d=e[f.hc.UPDATE_PRIORITY_BY_CUSTOMER])?void 0:d.parameters},{title:m.formatMessage({id:"desk.settings.systemMessages.ticketPriority.changedByPlatformAPI"},{b:e=>Object(W.jsx)(HN,{children:e})}),systemMessageKey:f.hc.UPDATE_PRIORITY_BY_PLATFORM_API,defaultValue:null!=(u=t[f.hc.UPDATE_PRIORITY_BY_PLATFORM_API])?u:"",placeholder:null!=(p=null==(g=e[f.hc.UPDATE_PRIORITY_BY_PLATFORM_API])?void 0:g.message)?p:"",propertyTags:null==(h=e[f.hc.UPDATE_PRIORITY_BY_PLATFORM_API])?void 0:h.parameters}];return Object(W.jsx)(iy.j,{children:b.map(e=>Object(W.jsx)(BN,{onSave:n,...e},`${e.systemMessageKey}_${e.defaultValue}`))})}),GN=Object(r.default)(V.qc).withConfig({displayName:"TicketStatusSystemMessages__StyledLozenge",componentId:"mcabai-0"})(["display:inline-block;"]),WN=i.a.memo(({defaultMessages:e={},values:t={},onSave:n})=>{const i=Object(E.a)(),s=Object(a.useMemo)(()=>{var n,a,s,r,o,l,c,d,u,p,g,h,m,b,j,y,O,v,x,_,C,k,w,T,S,E,I,M,D,A,N,R,P,L,F,U,$,B,V,z,H,q,G,K,Y,Q,J,X,Z,ee,te,ne;return[{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.activeToIdleBySystem"},{active:Object(W.jsx)(GN,{ticketStatus:f.jc.ACTIVE}),idle:Object(W.jsx)(GN,{ticketStatus:f.jc.IDLE})}),systemMessageKey:f.kc.ACTIVE_TO_IDLE_BY_SYSTEM,defaultValue:null!=(n=t[f.kc.ACTIVE_TO_IDLE_BY_SYSTEM])?n:"",placeholder:null!=(a=null==(s=e[f.kc.ACTIVE_TO_IDLE_BY_SYSTEM])?void 0:s.message)?a:"",propertyTags:null==(r=e[f.kc.ACTIVE_TO_IDLE_BY_SYSTEM])?void 0:r.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.activeToIdleByAgent"},{active:Object(W.jsx)(GN,{ticketStatus:f.jc.ACTIVE}),idle:Object(W.jsx)(GN,{ticketStatus:f.jc.IDLE})}),systemMessageKey:f.kc.ACTIVE_TO_IDLE_BY_AGENT,defaultValue:null!=(o=t[f.kc.ACTIVE_TO_IDLE_BY_AGENT])?o:"",placeholder:null!=(l=null==(c=e[f.kc.ACTIVE_TO_IDLE_BY_AGENT])?void 0:c.message)?l:"",propertyTags:null==(d=e[f.kc.ACTIVE_TO_IDLE_BY_AGENT])?void 0:d.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.toWipByAgent"},{wip:Object(W.jsx)(GN,{ticketStatus:f.jc.WIP})}),systemMessageKey:f.kc.WIP_BY_AGENT,defaultValue:null!=(u=t[f.kc.WIP_BY_AGENT])?u:"",placeholder:null!=(p=null==(g=e[f.kc.WIP_BY_AGENT])?void 0:g.message)?p:"",propertyTags:null==(h=e[f.kc.WIP_BY_AGENT])?void 0:h.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.wipToPending"},{wip:Object(W.jsx)(GN,{ticketStatus:f.jc.WIP}),pending:Object(W.jsx)(GN,{ticketStatus:f.jc.PENDING})}),systemMessageKey:f.kc.WIP_TO_PENDING_BY_SYSTEM,defaultValue:null!=(m=t[f.kc.WIP_TO_PENDING_BY_SYSTEM])?m:"",placeholder:null!=(b=null==(j=e[f.kc.WIP_TO_PENDING_BY_SYSTEM])?void 0:j.message)?b:"",propertyTags:null==(y=e[f.kc.WIP_TO_PENDING_BY_SYSTEM])?void 0:y.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.idleToActiveByAgent"},{idle:Object(W.jsx)(GN,{ticketStatus:f.jc.IDLE}),active:Object(W.jsx)(GN,{ticketStatus:f.jc.ACTIVE})}),systemMessageKey:f.kc.IDLE_TO_ACTIVE_BY_AGENT,defaultValue:null!=(O=t[f.kc.IDLE_TO_ACTIVE_BY_AGENT])?O:"",placeholder:null!=(v=null==(x=e[f.kc.IDLE_TO_ACTIVE_BY_AGENT])?void 0:x.message)?v:"",propertyTags:null==(_=e[f.kc.IDLE_TO_ACTIVE_BY_AGENT])?void 0:_.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.idleToActiveByCustomer"},{idle:Object(W.jsx)(GN,{ticketStatus:f.jc.IDLE}),active:Object(W.jsx)(GN,{ticketStatus:f.jc.ACTIVE})}),systemMessageKey:f.kc.IDLE_TO_ACTIVE_BY_CUSTOMER,defaultValue:null!=(C=t[f.kc.IDLE_TO_ACTIVE_BY_CUSTOMER])?C:"",placeholder:null!=(k=null==(w=e[f.kc.IDLE_TO_ACTIVE_BY_CUSTOMER])?void 0:w.message)?k:"",propertyTags:null==(T=e[f.kc.IDLE_TO_ACTIVE_BY_CUSTOMER])?void 0:T.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.idleToActiveBySystem"},{idle:Object(W.jsx)(GN,{ticketStatus:f.jc.IDLE}),active:Object(W.jsx)(GN,{ticketStatus:f.jc.ACTIVE})}),systemMessageKey:f.kc.IDLE_TO_ACTIVE_BY_SYSTEM,defaultValue:null!=(S=t[f.kc.IDLE_TO_ACTIVE_BY_SYSTEM])?S:"",placeholder:null!=(E=null==(I=e[f.kc.IDLE_TO_ACTIVE_BY_SYSTEM])?void 0:I.message)?E:"",propertyTags:null==(M=e[f.kc.IDLE_TO_ACTIVE_BY_SYSTEM])?void 0:M.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.closedByAgent"},{closed:Object(W.jsx)(GN,{ticketStatus:f.jc.CLOSED})}),systemMessageKey:f.kc.CLOSED_BY_AGENT,defaultValue:null!=(D=t[f.kc.CLOSED_BY_AGENT])?D:"",placeholder:null!=(A=null==(N=e[f.kc.CLOSED_BY_AGENT])?void 0:N.message)?A:"",propertyTags:null==(R=e[f.kc.CLOSED_BY_AGENT])?void 0:R.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.closedByCustomer"},{closed:Object(W.jsx)(GN,{ticketStatus:f.jc.CLOSED})}),systemMessageKey:f.kc.CLOSED_BY_CUSTOMER,defaultValue:null!=(P=t[f.kc.CLOSED_BY_CUSTOMER])?P:"",placeholder:null!=(L=null==(F=e[f.kc.CLOSED_BY_CUSTOMER])?void 0:F.message)?L:"",propertyTags:null==(U=e[f.kc.CLOSED_BY_CUSTOMER])?void 0:U.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.closedByPlatform"},{closed:Object(W.jsx)(GN,{ticketStatus:f.jc.CLOSED})}),systemMessageKey:f.kc.CLOSED_BY_PLATFORM_API,defaultValue:null!=($=t[f.kc.CLOSED_BY_PLATFORM_API])?$:"",placeholder:null!=(B=null==(V=e[f.kc.CLOSED_BY_PLATFORM_API])?void 0:V.message)?B:"",propertyTags:null==(z=e[f.kc.CLOSED_BY_PLATFORM_API])?void 0:z.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.closedBySystem"},{closed:Object(W.jsx)(GN,{ticketStatus:f.jc.CLOSED})}),systemMessageKey:f.kc.CLOSED_BY_SYSTEM,defaultValue:null!=(H=t[f.kc.CLOSED_BY_SYSTEM])?H:"",placeholder:null!=(q=null==(G=e[f.kc.CLOSED_BY_SYSTEM])?void 0:G.message)?q:"",propertyTags:null==(K=e[f.kc.CLOSED_BY_SYSTEM])?void 0:K.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.reopenedByAgent"}),systemMessageKey:f.kc.REOPENED_BY_AGENT,defaultValue:null!=(Y=t[f.kc.REOPENED_BY_AGENT])?Y:"",placeholder:null!=(Q=null==(J=e[f.kc.REOPENED_BY_AGENT])?void 0:J.message)?Q:"",propertyTags:null==(X=e[f.kc.REOPENED_BY_AGENT])?void 0:X.parameters},{title:i.formatMessage({id:"desk.settings.systemMessages.ticketStatus.reopenedByCustomer"}),systemMessageKey:f.kc.REOPENED_BY_CUSTOMER,defaultValue:null!=(Z=t[f.kc.REOPENED_BY_CUSTOMER])?Z:"",placeholder:null!=(ee=null==(te=e[f.kc.REOPENED_BY_CUSTOMER])?void 0:te.message)?ee:"",propertyTags:null==(ne=e[f.kc.REOPENED_BY_CUSTOMER])?void 0:ne.parameters}]},[e,i,t]);return Object(W.jsx)(iy.j,{children:s.map(e=>Object(W.jsx)(BN,{onSave:n,...e},`${e.systemMessageKey}_${e.defaultValue}`))})}),KN=r.default.div.withConfig({displayName:"systemMessages__Container",componentId:"s5c0e8-0"})(["position:relative;display:flex;flex-direction:column;height:100%;"]);var YN=Object(r.default)(V.ec).withConfig({displayName:"systemMessages___StyledTabMenu",componentId:"s5c0e8-1"})(["margin-bottom:24px;padding:0;"]);const QN=()=>{const e=Object(E.a)(),t=Object(s.n)(),n=Object(s.k)(),{pid:i,region:r}=Object(b.g)(e=>{var t;return{pid:e.desk.project.pid,region:(null==(t=e.applicationState.data)?void 0:t.region)||""}}),[o,l]=Object(a.useState)(),[c,d]=Object(P.g)(()=>D.g.fetchSystemMessages(i,r),[i,r]),[u,p]=Object(P.g)(()=>D.g.fetchDefaultSystemMessages(i,r),[i,r]);Object(a.useEffect)(()=>{d(),p()},[p,d]),Object(a.useEffect)(()=>{var e;l(null==(e=c.data)?void 0:e.data)},[c.data]),Object(P.s)(c.error),Object(P.s)(u.error);const g=Object(a.useMemo)(()=>location.pathname.startsWith(`${null==t?void 0:t.url}/ticket_status`)?0:location.pathname.startsWith(`${null==t?void 0:t.url}/ticket_assignment`)?1:location.pathname.startsWith(`${null==t?void 0:t.url}/ticket_priority`)?2:0,[t]),h=Object(a.useCallback)(e=>{switch(e){case 1:return n.push(`${null==t?void 0:t.url}/ticket_assignment`);case 2:return n.push(`${null==t?void 0:t.url}/ticket_priority`);case 0:default:return n.push(`${null==t?void 0:t.url}/ticket_status`)}},[n,t]),m=Object(a.useCallback)(e=>{l(e)},[]);return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"desk.settings.systemMessages.title"})}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:"desk.settings.systemMessages.desc"})})]}),Object(W.jsx)(YN,{tabs:[{label:e.formatMessage({id:"desk.settings.systemMessages.tab.ticketStatus"}),value:"ticketStatus"},{label:e.formatMessage({id:"desk.settings.systemMessages.tab.ticketAssignment"}),value:"ticketAssignment"},{label:e.formatMessage({id:"desk.settings.systemMessages.tab.ticketPriority"}),value:"ticketPriority"}],activeTab:g,handleTabClick:h,hasBorder:!1}),Object(W.jsx)(KN,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/ticket_status`,exact:!0,render:()=>{var e;return Object(W.jsx)(WN,{defaultMessages:null==(e=u.data)?void 0:e.data,values:o,onSave:m,disabled:"loading"===u.status||"loading"===c.status})}}),Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/ticket_assignment`,exact:!0,render:()=>{var e;return Object(W.jsx)(zN,{defaultMessages:null==(e=u.data)?void 0:e.data,values:o,onSave:m,disabled:"loading"===u.status||"loading"===c.status})}}),Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/ticket_priority`,exact:!0,render:()=>{var e;return Object(W.jsx)(qN,{defaultMessages:null==(e=u.data)?void 0:e.data,values:o,onSave:m,disabled:"loading"===u.status||"loading"===c.status})}}),Object(W.jsx)(s.c,{to:`${null==t?void 0:t.url}/ticket_status`})]})})]})},JN=Object(r.default)(o.Button).withConfig({displayName:"ticketFields__AddFieldButton",componentId:"p6menb-0"})(["margin-left:auto;"]);var XN=Object(r.default)(KE.b).withConfig({displayName:"ticketFields___StyledAppSettingsContainer",componentId:"p6menb-1"})(["padding-bottom:32px;"]),ZN=Object(r.default)(KE.a).withConfig({displayName:"ticketFields___StyledAppSettingPageHeader",componentId:"p6menb-2"})(["* + ","{margin-top:24px;}"],e=>e._css);const eR=Object(a.memo)(()=>{const e=Object(E.a)(),t=Object(s.k)(),{ticketFields:n}=Object(b.g)(e=>({ticketFields:e.ticketFields})),i=Object(b.f)(),r=Object(a.useCallback)(({offset:e,limit:t})=>{i(j.d.fetchTicketFieldsRequest({offset:e,limit:t}))},[i]),o=Object(a.useCallback)(e=>{i(j.d.deleteTicketFieldRequest(e))},[i]);return Object(W.jsxs)(XN,{isTableView:!0,children:[Object(W.jsxs)(ZN,{_css:KE.a.Description,children:[Object(W.jsx)(KE.a.Title,{children:e.formatMessage({id:"desk.settings.ticketFields.title"})}),Object(W.jsx)(KE.a.Actions,{children:Object(W.jsx)(JN,{buttonType:"primary",icon:"plus",size:"small",onClick:()=>{t.push("ticket-fields/create")},children:e.formatMessage({id:"desk.customFields.ticket.settings.header.button.add"})})}),Object(W.jsx)(KE.a.Description,{$textOnly:!0,children:e.formatMessage({id:"desk.customFields.ticket.settings.header.description"})})]}),Object(W.jsx)(PM,{fields:n,fieldType:"ticket",fetchFields:r,deleteField:o})]})}),tR={createField:j.d.createTicketFieldRequest,updateField:j.d.updateTicketFieldRequest,deleteField:j.d.deleteTicketFieldRequest,checkFieldKeyValidation:j.d.checkTicketFieldKeyValidationRequest,setCheckingStatusFieldKeyValidation:j.d.setCheckingStatusTicketFieldKeyValidation},nR=Object(b.d)(null,tR)(e=>{const{fieldId:t}=Object(s.m)(),n=Object(s.l)(),i=Object(b.f)(),r=Object(s.k)(),o=Object(P.V)(e=>e.ticketFields),l=void 0===t?void 0:Number(t);return Object(a.useEffect)(()=>{var e;void 0===l||Number.isInteger(+l)?null!=(e=n.state)&&e.selectedRow?i(j.d.getTicketFieldSuccess(n.state.selectedRow)):l&&i(j.d.getTicketFieldRequest({id:+l})):r.replace("../ticket-fields")},[i,l,t,r,n.state]),Object(W.jsx)(oD,{name:"ticket",editingFieldId:l,customFields:o,...e})}),aR=Object(a.memo)(({awayMessage:e,isUpdating:t,setUnsaved:n,updateProjectRequest:i})=>{const s=Object(P.W)(),r=Object(E.a)(),l=Object(b.g)(e=>e.desk.project),c=Object(o.useForm)({onSubmit:({awayMessage:e})=>{i({awayMessage:e,onSuccess:c.onSuccess})}}),d=Object(o.useField)("awayMessage",c,{defaultValue:e,validate:e=>e.trim()?"":r.formatMessage({id:"desk.settings.triggers.awayMessage.error.required"})}),u=Object(o.useField)("enabled",c,{defaultValue:l.awayMessageEnabled,isControlled:!0});Object(a.useEffect)(()=>{n(d.updatable)},[d.updatable,n]);const p=Object(a.useCallback)(e=>{s({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:e?"desk.settings.triggers.awayMessage.confirmDialog.off2on.title":"desk.settings.triggers.awayMessage.confirmDialog.on2off.title"}),description:r.formatMessage({id:e?"desk.settings.triggers.awayMessage.confirmDialog.off2on.desc":"desk.settings.triggers.awayMessage.confirmDialog.on2off.desc"}),confirmText:r.formatMessage({id:e?"desk.settings.triggers.awayMessage.confirmDialog.off2on.button.confirm":"desk.settings.triggers.awayMessage.confirmDialog.on2off.button.confirm"}),cancelText:r.formatMessage({id:e?"desk.settings.triggers.awayMessage.confirmDialog.off2on.button.cancel":"desk.settings.triggers.awayMessage.confirmDialog.on2off.button.cancel"}),onConfirm:()=>{i({awayMessageEnabled:e}),u.updateValue(e)}}})},[r,s,u,i]);return Object(W.jsx)(iy.p,{title:r.formatMessage({id:"desk.settings.triggers.awayMessage.title"}),description:r.formatMessage({id:"desk.settings.triggers.awayMessage.desc"}),form:c,field:d,gridItemConfig:{subject:{alignSelf:"start"}},isFetching:t,toggleField:u,onToggleChange:p,saveText:r.formatMessage({id:"desk.settings.triggers.actions.save"}),cancelText:r.formatMessage({id:"desk.settings.triggers.actions.cancel"})})}),iR=Object(a.memo)(({closeMessage:e,isUpdating:t,setUnsaved:n,updateProjectRequest:i})=>{const s=Object(P.W)(),r=Object(E.a)(),l=Object(b.g)(e=>e.desk.project),c=Object(o.useForm)({onSubmit:({closeMessage:e})=>{i({closeMessage:e,onSuccess:c.onSuccess})}}),d=Object(o.useField)("closeMessage",c,{defaultValue:e,validate:e=>e.trim()?"":r.formatMessage({id:"desk.settings.triggers.defaultCloseMessage.error.required"})}),u=Object(o.useField)("enabled",c,{defaultValue:l.closeMessageEnabled,isControlled:!0});Object(a.useEffect)(()=>{n(d.updatable)},[d.updatable,n]);const p=Object(a.useCallback)(e=>{s({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:e?"desk.settings.triggers.defaultCloseMessage.confirmDialog.off2on.title":"desk.settings.triggers.defaultCloseMessage.confirmDialog.on2off.title"}),description:r.formatMessage({id:e?"desk.settings.triggers.defaultCloseMessage.confirmDialog.off2on.desc":"desk.settings.triggers.defaultCloseMessage.confirmDialog.on2off.desc"}),confirmText:r.formatMessage({id:e?"desk.settings.triggers.defaultCloseMessage.confirmDialog.off2on.button.confirm":"desk.settings.triggers.defaultCloseMessage.confirmDialog.on2off.button.confirm"}),cancelText:r.formatMessage({id:e?"desk.settings.triggers.defaultCloseMessage.confirmDialog.off2on.button.cancel":"desk.settings.triggers.defaultCloseMessage.confirmDialog.on2off.button.cancel"}),onConfirm:()=>{i({closeMessageEnabled:e}),u.updateValue(e)}}})},[r,s,u,i]);return Object(W.jsx)(iy.p,{title:r.formatMessage({id:"desk.settings.triggers.defaultCloseMessage.title"}),description:r.formatMessage({id:"desk.settings.triggers.defaultCloseMessage.desc"}),form:c,field:d,gridItemConfig:{subject:{alignSelf:"start"}},isFetching:t,toggleField:u,onToggleChange:p,saveText:r.formatMessage({id:"desk.settings.triggers.actions.save"}),cancelText:r.formatMessage({id:"desk.settings.triggers.actions.cancel"})})}),sR=r.default.div.withConfig({displayName:"delayMessage__ToggleContainer",componentId:"sc-1q2xn2q-0"})(["margin-bottom:16px;"]),rR=r.default.div.withConfig({displayName:"delayMessage__DelayTime",componentId:"sc-1q2xn2q-1"})(["display:flex;align-items:center;padding-bottom:16px;font-size:14px;line-height:1.43;color:",";border-bottom:1px solid ",";cursor:",";> div{width:131px;}"],({disabled:e})=>e?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-3"),({disabled:e})=>e&&"default"),oR=r.default.div.withConfig({displayName:"delayMessage__DelayMessageBody",componentId:"sc-1q2xn2q-2"})(["margin-top:16px;"]);var lR=Object(r.default)("span").withConfig({displayName:"delayMessage___StyledSpan",componentId:"sc-1q2xn2q-3"})(["width:8px;"]);const cR=Object(a.memo)(({delayMessage:e,delayMessageTime:t,isUpdating:n,setUnsaved:i,updateProjectRequest:s})=>{const r=Object(P.W)(),l=Object(E.a)(),c=Object(b.g)(e=>e.desk.project),d=Object(o.useForm)({onSubmit:({delayMessage:e,delayMessageTime:t})=>{s({delayMessage:e,delayMessageTime:t,onSuccess:d.onSuccess})}}),u=Object(o.useField)("delayMessageTime",d,{defaultValue:t.toString(),validate:e=>e.trim()?/^[0-9]*$/g.test(e.trim())?"":l.formatMessage({id:"desk.settings.triggers.delayMessage.seconds.error.onlyNumbers"}):l.formatMessage({id:"desk.settings.triggers.delayMessage.seconds.error.required"})}),p=Object(o.useField)("delayMessage",d,{defaultValue:e,validate:e=>e.trim()?"":l.formatMessage({id:"desk.settings.triggers.delayMessage.message.error.required"})}),g=Object(o.useField)("enabled",d,{defaultValue:c.delayMessageEnabled,isControlled:!0}),h=Object(a.useCallback)(e=>{r({dialogTypes:A.a.Confirm,dialogProps:{title:l.formatMessage({id:e?"desk.settings.triggers.delayMessage.confirmDialog.off2on.title":"desk.settings.triggers.delayMessage.confirmDialog.on2off.title"}),description:l.formatMessage({id:e?"desk.settings.triggers.delayMessage.confirmDialog.off2on.desc":"desk.settings.triggers.delayMessage.confirmDialog.on2off.desc"}),confirmText:l.formatMessage({id:e?"desk.settings.triggers.delayMessage.confirmDialog.off2on.button.confirm":"desk.settings.triggers.delayMessage.confirmDialog.on2off.button.confirm"}),cancelText:l.formatMessage({id:e?"desk.settings.triggers.delayMessage.confirmDialog.off2on.button.cancel":"desk.settings.triggers.delayMessage.confirmDialog.on2off.button.cancel"}),onConfirm:()=>{s({delayMessageEnabled:e}),null==g||g.updateValue(e)}}})},[l,r,g,s]),m=[u.updatable,p.updatable];return Object(a.useEffect)(()=>{i(m.some(e=>e))},[i,m]),Object(W.jsxs)(iy.i,{title:l.formatMessage({id:"desk.settings.triggers.delayMessage.title"}),description:l.formatMessage({id:"desk.settings.triggers.delayMessage.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},showActions:m.some(e=>e),actions:[{key:"delay-message-cancel",label:l.formatMessage({id:"desk.settings.triggers.actions.cancel"}),buttonType:"tertiary",onClick:d.reset},{key:"delay-message-save",label:l.formatMessage({id:"desk.settings.triggers.actions.save"}),buttonType:"primary",onClick:e=>{d.onSubmit(e)},isLoading:n,disabled:n||u.error.hasError||p.error.hasError}],children:[Object(W.jsx)(sR,{children:Object(W.jsx)(o.Toggle,{checked:g.value,onChange:h})}),Object(W.jsx)(rR,{"data-test-id":"DelayTime",disabled:!g.value,children:l.formatMessage({id:"desk.settings.triggers.delayMessage.periodInput"},{input:Object(W.jsx)(o.InputText,{"data-test-id":"InputText",ref:u.ref,name:u.name,error:u.error,onChange:u.onChange,disabled:!g.value}),space:Object(W.jsx)(lR,{})})}),Object(W.jsx)(oR,{"data-test-id":"DelayMessageContainer",children:Object(W.jsx)(o.InputTextarea,{"data-test-id":"InputTextarea",ref:p.ref,name:p.name,error:p.error,onChange:p.onChange,disabled:!g.value})})]})}),dR=r.default.div.withConfig({displayName:"inqueryMessage__ExtraMessages",componentId:"dqj5ec-0"})(["padding-top:24px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),uR=Object(a.memo)(({inquireCloseMessage:e,inquireCloseConfirmedMessage:t,inquireCloseDeclinedMessage:n,isUpdating:i,setUnsaved:s,updateProjectRequest:r})=>{const l=Object(E.a)(),c=Object(o.useForm)({onSubmit:({inquireCloseMessage:e,inquireCloseConfirmedMessage:t,inquireCloseDeclinedMessage:n})=>{r({inquireCloseMessage:e,inquireCloseConfirmedMessage:t,inquireCloseDeclinedMessage:n,onSuccess:c.onSuccess})}}),d=Object(o.useField)("inquireCloseMessage",c,{defaultValue:e,validate:e=>e.trim()?"":l.formatMessage({id:"desk.settings.triggers.inqueryMessage.closeMessage.error.required"})}),u=Object(o.useField)("inquireCloseConfirmedMessage",c,{defaultValue:t,validate:e=>e.trim()?"":l.formatMessage({id:"desk.settings.triggers.inqueryMessage.replace.error.positiveRequired"})}),p=Object(o.useField)("inquireCloseDeclinedMessage",c,{defaultValue:n,validate:e=>e.trim()?"":l.formatMessage({id:"desk.settings.triggers.inqueryMessage.replace.error.negativeRequired"})}),g=d.updatable||u.updatable||p.updatable;return Object(a.useEffect)(()=>{s(g)},[s,g]),Object(W.jsx)(iy.p,{title:l.formatMessage({id:"desk.settings.triggers.inqueryMessage.title"}),description:l.formatMessage({id:"desk.settings.triggers.inqueryMessage.desc"}),form:c,field:d,showActions:g,gap:["0px","32px"],gridItemConfig:{subject:{alignSelf:"start"}},saveText:l.formatMessage({id:"desk.settings.triggers.actions.save"}),cancelText:l.formatMessage({id:"desk.settings.triggers.actions.cancel"}),isFetching:i,extra:Object(W.jsx)(dR,{children:Object(W.jsxs)(o.Grid,{children:[Object(W.jsx)(o.GridItem,{colSpan:6,children:Object(W.jsx)(iy.q,{children:l.formatMessage({id:"desk.settings.triggers.inqueryMessage.replace.title"})})}),Object(W.jsxs)(o.GridItem,{colSpan:6,children:[Object(W.jsx)(o.InputTextarea,{ref:u.ref,name:u.name,label:l.formatMessage({id:"desk.settings.triggers.inqueryMessage.replace.label.positive"}),error:u.error,disabled:i,onChange:u.onChange}),Object(W.jsx)(o.InputTextarea,{ref:p.ref,name:p.name,label:l.formatMessage({id:"desk.settings.triggers.inqueryMessage.replace.label.negative"}),error:p.error,disabled:i,onChange:p.onChange})]})]})})})}),pR=Object(a.memo)(({welcomeMessage:e,isUpdating:t,setUnsaved:n,updateProjectRequest:i})=>{const s=Object(P.W)(),r=Object(E.a)(),l=Object(b.g)(e=>e.desk.project),c=Object(o.useForm)({onSubmit:({welcomeMessage:e})=>{i({welcomeMessage:e,onSuccess:c.onSuccess})}}),d=Object(o.useField)("welcomeMessage",c,{defaultValue:e,validate:e=>e.trim()?"":r.formatMessage({id:"desk.settings.triggers.welcomeMessage.error.required"})}),u=Object(o.useField)("enabled",c,{defaultValue:l.welcomeMessageEnabled,isControlled:!0});Object(a.useEffect)(()=>{n(d.updatable)},[d.updatable,n]);const p=Object(a.useCallback)(e=>{s({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:e?"desk.settings.triggers.welcomeMessage.confirmDialog.off2on.title":"desk.settings.triggers.welcomeMessage.confirmDialog.on2off.title"}),description:r.formatMessage({id:e?"desk.settings.triggers.welcomeMessage.confirmDialog.off2on.desc":"desk.settings.triggers.welcomeMessage.confirmDialog.on2off.desc"}),confirmText:r.formatMessage({id:e?"desk.settings.triggers.welcomeMessage.confirmDialog.off2on.button.confirm":"desk.settings.triggers.welcomeMessage.confirmDialog.on2off.button.confirm"}),cancelText:r.formatMessage({id:e?"desk.settings.triggers.welcomeMessage.confirmDialog.off2on.button.cancel":"desk.settings.triggers.welcomeMessage.confirmDialog.on2off.button.cancel"}),onConfirm:()=>{i({welcomeMessageEnabled:e}),u.updateValue(e)}}})},[r,s,u,i]);return Object(W.jsx)(iy.p,{title:r.formatMessage({id:"desk.settings.triggers.welcomeMessage.title"}),description:r.formatMessage({id:"desk.settings.triggers.welcomeMessage.desc"}),form:c,field:d,gridItemConfig:{subject:{alignSelf:"start"}},isFetching:t,toggleField:u,onToggleChange:p,saveText:r.formatMessage({id:"desk.settings.triggers.actions.save"}),cancelText:r.formatMessage({id:"desk.settings.triggers.actions.cancel"})})}),gR={updateProjectRequest:j.d.updateProjectRequest},hR=Object(b.d)(e=>({desk:e.desk,organization:e.organizations.current}),gR)(({desk:e,setUnsaved:t,updateProjectRequest:n})=>{const a=Object(E.a)(),{isUpdating:i}=e,s={welcomeMessage:(r=e.project).welcomeMessage||"",awayMessage:r.awayMessage||"",delayMessage:r.delayMessage||"",delayMessageTime:r.delayMessageTime||0,inquireCloseMessage:r.inquireCloseMessage||"",inquireCloseConfirmedMessage:r.inquireCloseConfirmedMessage||"",inquireCloseDeclinedMessage:r.inquireCloseDeclinedMessage||"",closeMessage:r.closeMessage||"",idleTicketAutomaticCloseMessage:r.idleTicketAutomaticCloseMessage||""};var r;return Object(W.jsxs)(KE.b,{children:[Object(W.jsx)(KE.a,{children:Object(W.jsx)(KE.a.Title,{children:a.formatMessage({id:"desk.settings.triggers.title"})})}),Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(pR,{welcomeMessage:s.welcomeMessage,isUpdating:i,setUnsaved:t,updateProjectRequest:n}),Object(W.jsx)(aR,{awayMessage:s.awayMessage,isUpdating:i,setUnsaved:t,updateProjectRequest:n}),Object(W.jsx)(cR,{delayMessage:s.delayMessage,delayMessageTime:s.delayMessageTime,isUpdating:i,setUnsaved:t,updateProjectRequest:n}),Object(W.jsx)(iR,{closeMessage:s.closeMessage,isUpdating:i,setUnsaved:t,updateProjectRequest:n})]}),Object(W.jsx)(uR,{inquireCloseMessage:s.inquireCloseMessage,inquireCloseConfirmedMessage:s.inquireCloseConfirmedMessage,inquireCloseDeclinedMessage:s.inquireCloseDeclinedMessage,isUpdating:i,setUnsaved:t,updateProjectRequest:n})]})}),mR={fetchWebhooksRequest:j.d.fetchWebhooksRequest,showDialogsRequest:j.b.showDialogsRequest},fR=r.default.div.withConfig({displayName:"webhooks__Container",componentId:"sc-1j7mdda-0"})(["position:relative;display:flex;flex-direction:column;height:100%;"]),bR=Object(r.default)(o.Button).withConfig({displayName:"webhooks__AddWebhookButton",componentId:"sc-1j7mdda-1"})(["margin-left:auto;"]),jR=Object(r.default)(V.o).withConfig({displayName:"webhooks__TableCard",componentId:"sc-1j7mdda-2"})(["width:100%;flex:1;min-height:0;padding:24px;"]),yR=Object(r.default)(o.IconButton).withConfig({displayName:"webhooks__IconTableButton",componentId:"sc-1j7mdda-3"})(["position:relative;z-index:10;margin:-6px 0;"]),OR=Object(r.default)(o.Table).withConfig({displayName:"webhooks__WebhooksTable",componentId:"sc-1j7mdda-4"})(["border-right:0;border-left:0;height:100%;td{position:relative;overflow:visible;}"]);var vR=Object(r.default)(KE.b).withConfig({displayName:"webhooks___StyledAppSettingsContainer",componentId:"sc-1j7mdda-5"})(["padding-bottom:32px;"]);const xR=Object(a.memo)(({webhooks:e,showDialogsRequest:t,fetchWebhooksRequest:n})=>{const i=Object(E.a)(),s=(e,n)=>()=>{t({dialogTypes:A.a.EditWebhook,dialogProps:{id:e,endpointUrl:n}})},o=(e,n)=>()=>{t({dialogTypes:A.a.DeleteWebhook,dialogProps:{id:e,endpointUrl:n}})};return Object(a.useEffect)(()=>{n()},[n]),Object(W.jsxs)(vR,{isTableView:!0,children:[Object(W.jsxs)(KE.a,{children:[Object(W.jsx)(KE.a.Title,{children:i.formatMessage({id:"desk.settings.webhooks.title"})}),Object(W.jsx)(KE.a.Actions,{children:Object(W.jsx)(bR,{buttonType:"primary",size:"small",icon:"plus",onClick:()=>{t({dialogTypes:A.a.AddWebhook})},children:i.formatMessage({id:"desk.settings.webhooks.button.add"})})}),Object(W.jsx)(KE.a.Description,{$textOnly:!0,children:i.formatMessage({id:"desk.settings.webhooks.desc"},{a:e=>Object(W.jsx)("a",{href:"https://sendbird.com/docs/desk/v1/platform-api/guides/webhooks",target:"_blank",children:e})})})]}),Object(W.jsx)(fR,{children:Object(W.jsx)(jR,{children:Object(W.jsx)(OR,{className:"webhooks-table",rowKey:"webhooks-key",showScrollbars:!0,loading:e.isFetching,dataSource:e.webhooks,columns:[{title:i.formatMessage({id:"desk.settings.webhooks.table.th.url"}),dataIndex:"endpointUrl",flex:8,sorter:!0},{dataIndex:"id",sorter:!0,render:({id:e,endpointUrl:t})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(yR,{size:"small",buttonType:"tertiary",icon:"edit",onClick:s(e,t)}),Object(W.jsx)(yR,{size:"small",buttonType:"tertiary",icon:"delete",onClick:o(e,t)})]}),styles:Object(r.css)(["justify-content:flex-end;"])}],emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:i.formatMessage({id:"desk.settings.webhooks.table.empty.title"}),description:Object(W.jsx)(ge.a,{id:"desk.settings.webhooks.table.empty.desc",values:{break:Object(W.jsx)("br",{})}})})})})})]})}),_R=Object(b.d)(e=>({webhooks:e.webhooks}),mR)(xR);var CR=Object(r.default)(iy.c).withConfig({displayName:"settings___StyledAppSettingsLayout",componentId:"kallu1-0"})(["height:100%;"]);const kR=({match:e})=>{w();const{isDeskConnected:t,isDeskAuthenticated:n}=Object(P.V)(e=>({isDeskConnected:e.desk.connected,isDeskAuthenticated:e.desk.authenticated}));return Object(W.jsx)(CR,{preventScrollToTopPages:[`${e.url}/assignment_rules`,`${e.url}/priority_rules`],children:({setUnsaved:a})=>n?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/general`,render:e=>Object(W.jsx)(ND,{setUnsaved:a,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/automation`,render:e=>Object(W.jsx)(OM,{setUnsaved:a,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/triggers`,render:e=>Object(W.jsx)(hR,{setUnsaved:a,...e})}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/bots`,component:My}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/bots/create`,component:Pv}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/bots/:botId/edit`,component:Pv}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/bots/:botId/duplicate`,component:Pv}),Object(W.jsx)(s.d,{path:`${e.url}/system_messages`,component:QN}),Object(W.jsx)(s.d,{path:`${e.url}/assignment_rules`,component:lE}),Object(W.jsx)(s.d,{path:`${e.url}/priority_rules`,component:lE}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/quick-replies`,component:hN}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/quick-replies/create`,component:LN}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/quick-replies/:quickReplyId/edit`,component:LN}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/quick-replies/:duplicateQuickReplyId/duplicate`,component:LN}),Object(W.jsx)(s.d,{path:`${e.url}/tags`,component:WE}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/teams`,component:lI}),Object(W.jsx)(s.d,{exact:!0,path:`${e.url}/teams/form`,component:VI}),Object(W.jsx)(s.d,{path:`${e.url}/teams/form/:id`,component:VI}),Object(W.jsx)(s.d,{path:`${e.url}/customer-fields`,exact:!0,component:$M}),Object(W.jsx)(s.d,{path:`${e.url}/customer-fields/create`,exact:!0,component:cD}),Object(W.jsx)(s.d,{path:`${e.url}/customer-fields/:fieldId`,exact:!0,component:cD}),Object(W.jsx)(s.d,{path:`${e.url}/ticket-fields`,exact:!0,component:eR}),Object(W.jsx)(s.d,{path:`${e.url}/ticket-fields/create`,exact:!0,component:nR}),Object(W.jsx)(s.d,{path:`${e.url}/ticket-fields/:fieldId`,exact:!0,component:nR}),Object(W.jsx)(u.d,{path:`${e.url}/security`,allowedPredefinedRoles:[f.Hb.OWNER],component:sx}),Object(W.jsx)(s.d,{path:`${e.url}/credentials`,component:MM}),Object(W.jsx)(s.d,{path:`${e.url}/webhooks`,component:_R}),Object(W.jsx)(s.d,{path:`${e.url}/integration`,component:iN}),Object(W.jsx)(s.c,{to:`${e.url}/general`})]}),!t&&Object(W.jsx)(V.cc,{transparent:!0}),Object(W.jsx)(Xv,{})]}):Object(W.jsx)(V.cc,{transparent:!0})})},wR=r.default.div.withConfig({displayName:"ChartError__ErrorContainer",componentId:"z8i3i1-0"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%;"]),TR=r.default.p.withConfig({displayName:"ChartError__ErrorMessage",componentId:"z8i3i1-1"})([""," color:",";margin-bottom:16px;"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7")),SR=Object(a.memo)(({error:e,onRetry:t})=>{const n=Object(E.a)();return Object(W.jsxs)(wR,{"data-test-id":"ErrorContainer",children:[Object(W.jsx)(TR,{children:e}),Object(W.jsx)(o.Button,{buttonType:"tertiary",icon:"refresh",size:"small",onClick:t,children:n.formatMessage({id:"desk.statistics.button.retry"})})]})}),ER=e=>Number.isInteger(e)?e:null,IR=({value:e})=>e?Number.parseFloat(e).toFixed(2):"0",MR=i.a.memo(({datasets:e=[],selectedDateRange:t=""})=>{const n=Object(a.useCallback)(e=>Object(W.jsxs)(W.Fragment,{children:[t,Object(W.jsx)("br",{}),e.label]}),[t]),i={scales:{xAxes:[{type:"time",time:{unit:"hour",tooltipFormat:"H:mm",displayFormats:{hour:"H:mm"}},gridLines:{display:!1,drawBorder:!1},ticks:{autoSkip:!0,maxTicksLimit:8,maxRotation:0,minRotation:0,fontColor:Object(o.cssColors)("neutral-10"),fontFamily:o.typeface.system,fontSize:11},offset:!0}],yAxes:[{gridLines:{color:Object(o.cssColors)("neutral-2"),display:!0,drawBorder:!1},type:"linear",ticks:{beginAtZero:!0,maxTicksLimit:6,min:0,callback:ER,fontColor:Object(o.cssColors)("neutral-10"),fontFamily:o.typeface.system,fontSize:11,padding:10}}]}};return Object(W.jsx)(fb.a,{height:"225px",datasets:e.map(e=>({categoryPercentage:.6,maxBarThickness:6,...e})),options:i,tooltipXLabelFormatter:n,tooltipValueFormatter:IR,noPadding:!0})}),DR=i.a.memo(({datasets:e=[],tooltipValueFormatter:t,useArea:n=!1,chartOptions:a})=>Object(W.jsx)(fb.k,{height:"225px",datasets:e,options:{...a,scales:{...null==a?void 0:a.scales,xAxes:[{time:{unit:"day",tooltipFormat:"ll",displayFormats:{day:"MMM Do"}}}]}},tooltipValueFormatter:t,noPadding:!0,useArea:n||1===e.length})),{background:AR,hover:NR}=Object(mb.d)({dataSize:5}),RR=r.default.section.withConfig({displayName:"StatsAgentsChartView__GridRow",componentId:"u7u5nb-0"})(["display:grid;grid-gap:32px 24px;align-items:center;grid-template-columns:repeat(6,1fr);grid-auto-flow:row;padding:0 0 32px;"]),PR=Object(r.default)(RR).withConfig({displayName:"StatsAgentsChartView__GridContainer",componentId:"u7u5nb-1"})([""]),LR=r.default.h4.withConfig({displayName:"StatsAgentsChartView__GridItemTitle",componentId:"u7u5nb-2"})(["display:flex;align-items:center;font-size:16px;font-weight:600;line-height:24px;letter-spacing:-0.3px;color:",";"],Object(o.cssVariables)("neutral-10")),FR=r.default.div.withConfig({displayName:"StatsAgentsChartView__ChartGridItem",componentId:"u7u5nb-3"})(["grid-column:span 2;position:relative;align-self:start;border:1px solid ",";padding:26px 24px;border-radius:4px;height:378px;.summary{display:flex;flex-direction:row;align-items:baseline;margin-top:20px;margin-bottom:16px;height:24px;&__title{font-size:14px;color:",";}&__value{font-size:24px;font-weight:600;line-height:1;letter-spacing:-0.7px;color:",";margin-left:8px;&:empty::after{display:inline-block;content:' ';font-size:24px;line-height:1;}}}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("purple-7")),UR=r.default.div.withConfig({displayName:"StatsAgentsChartView__HourlyStatusGridItem",componentId:"u7u5nb-4"})(["grid-column:span 4;position:relative;padding:26px 24px;border:1px solid ",";border-radius:4px;height:100%;"],Object(o.cssVariables)("neutral-3")),$R=r.default.div.withConfig({displayName:"StatsAgentsChartView__SpinnerContainer",componentId:"u7u5nb-5"})(["display:flex;align-items:center;justify-content:center;height:100%;"]),BR=r.default.div.withConfig({displayName:"StatsAgentsChartView__DailyStatusTrackingGridItem",componentId:"u7u5nb-6"})(["grid-column:span 6;position:relative;border:1px solid ",";border-radius:4px;padding:24px;.service-hours__label{color:",";}.service-hours__value{margin-left:8px;margin-right:16px;color:",";span + span{margin-left:12px;}}.date-picker-wrapper{display:flex;flex-direction:row;align-items:center;font-size:14px;line-height:20px;}.daily-durations{display:flex;flex-direction:row;align-items:center;margin-top:16px;&__label{display:flex;align-items:center;"," color:",";margin-right:8px;&:not(:first-of-type){margin-left:24px;}}&__value{"," color:",";}}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-7"),o.Subtitles["subtitle-03"],Object(o.cssVariables)("neutral-10")),VR=r.default.div.withConfig({displayName:"StatsAgentsChartView__DailyStatusHeader",componentId:"u7u5nb-7"})(["display:flex;justify-content:space-between;align-items:center;"]),zR=r.default.span.withConfig({displayName:"StatsAgentsChartView__Dot",componentId:"u7u5nb-8"})(["width:8px;height:8px;border-radius:50%;background:",";margin-right:6px;"],e=>e.color),HR=Object(r.default)(Ce).withConfig({displayName:"StatsAgentsChartView__StyledAgentConnectionDiagram",componentId:"u7u5nb-9"})(["width:100%;height:60px;margin-top:12px;"]),qR=r.default.hr.withConfig({displayName:"StatsAgentsChartView__WorkingHourLine",componentId:"u7u5nb-10"})(["display:inline-block;margin-right:8px;border:none;border-top:2px dashed ",";background-color:white;width:24px;height:1px;vertical-align:middle;color:white;"],({color:e})=>e),GR=Object(a.memo)(({agentId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(void 0),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),b=Object(a.useCallback)(async()=>{try{if(d(!0),e){const{data:a}=await Object(N.fetchAgentStatTicketCounts)(g,h,{id:e,start_date:t,end_date:n,channel_type:i});l(a)}else{const{data:e}=await Object(N.fetchStatsTicketCounts)(g,h,{start_date:t,end_date:n,channel_type:i});l({labels:e.labels,totalCount:e.closedTickets.reduce((e,t)=>e+t,0),numberOfTickets:e.closedTickets})}p(null)}catch(e){p(m(e))}finally{d(!1)}},[e,i,n,m,g,h,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>r?[{data:r.labels.map((e,t)=>({x:e,y:r.numberOfTickets[t]}))}]:[{data:[]}],[r]),y=Object(a.useMemo)(()=>u?Object(W.jsx)(SR,{error:u,onRetry:b}):r?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.closed"})}),Object(W.jsx)("span",{className:"summary__value",children:r.totalCount})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}}})})]}):null,[r,s,u,j,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(LR,{children:[s.formatMessage({id:"desk.statistics.agents.chart.closedTickets"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.agents.chart.closedTickets.tooltip"})})]}),c?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),WR=Object(a.memo)(({agentId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{if(g(!0),e){const{data:a}=await Object(N.fetchAgentStatAssignmentCounts)(r,l,{id:e,start_date:t,end_date:n,channel_type:i});u(a)}else{const{data:e}=await Object(N.fetchStatsAssignmentCounts)(r,l,{start_date:t,end_date:n,channel_type:i});u({labels:e.labels,numberOfAssignments:e.results,totalCount:e.results.reduce((e,t)=>e+t,0)})}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.labels.map((e,t)=>({x:e,y:d.numberOfAssignments[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.assigned"})}),Object(W.jsx)("span",{className:"summary__value",children:d.totalCount})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}}})})]}):null,[d,j,h,b,s]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(LR,{children:[s.formatMessage({id:"desk.statistics.agents.chart.assignments"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.agents.chart.assignments.tooltip"})})]}),p?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),KR=Object(a.memo)(({agentId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{if(g(!0),e){const{data:a}=await Object(N.fetchAgentStatTicketResponseTimes)(r,l,{id:e,start_date:t,end_date:n,channel_type:i});u(a)}else{const{data:e}=await Object(N.fetchStatsTicketResponseTimes)(r,l,{start_date:t,end_date:n,channel_type:i});u(e)}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.labels.map((e,t)=>({x:e,y:d.responseTimes[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.average"})}),Object(W.jsx)("span",{className:"summary__value",children:p?"":Object(H.renderTimestring)(d.average)})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}],yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(e)}}]}},tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),noPadding:!0})})]}):null,[j,h,b,d,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(LR,{children:[s.formatMessage({id:"desk.statistics.agents.chart.firstResponseTime"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.agents.chart.firstResponseTime.tooltip"})})]}),p?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),YR=Object(a.memo)(({agentId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)(void 0),[g,h]=Object(a.useState)(!1),[m,b]=Object(a.useState)(null),j=Object(a.useCallback)(async()=>{try{if(h(!0),e){const{data:a}=await Object(N.fetchAgentStatHourlyClosedTickets)(r,l,{id:e,start_date:t,end_date:n,channel_type:i});p(a)}else{const{data:e}=await Object(N.fetchHourlyAverageTicketCounts)(r,l,{start_date:t,end_date:n,channel_type:i});p(e)}b(null)}catch(e){b(d(e))}finally{h(!1)}},[e,i,n,d,r,l,t]);Object(a.useEffect)(()=>{j()},[j]);const y=Object(a.useMemo)(()=>{if(!u)return[{data:[]}];const e=Array(24).fill(0).map((e,n)=>c()(t).set("hour",n).set("minute",0).set("second",0).tz("UTC").valueOf());return[{label:"",data:u.hourlyClosedTicketCount.map((t,n)=>({x:e[n],y:t}))}]},[u,t]),O=Object(a.useMemo)(()=>m?Object(W.jsx)(SR,{error:m,onRetry:j}):u?Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(fb.g,{children:Object(W.jsx)(MR,{datasets:y,selectedDateRange:`${c()(t,f.nb).format(f.x)} - ${c()(n,f.nb).format(f.x)}`})})}):null,[u,m,y,t,n,j]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(LR,{children:[s.formatMessage({id:"desk.statistics.agents.chart.closedTicketsHourly"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.agents.chart.closedTicketsHourly.tooltip"})})]}),g?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),QR=Object(a.memo)(({agentId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),f=Object(a.useCallback)(async()=>{try{if(g(!0),e){const{data:a}=await Object(N.fetchAgentStatCSAT)(r,l,{id:e,start_date:t,end_date:n,channel_type:i});u(a)}else{const{data:e}=await Object(N.fetchCSAT)(r,l,{start_date:t,end_date:n,channel_type:i});u(e)}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{f()},[f]);const b=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.customerSatisfactionScoreCounts.map((e,t)=>e*(t+1)).reduce((e,t)=>e+t,0))?e:0},[d]),j=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.customerSatisfactionScoreCounts.reduce((e,t)=>e+t,0))?e:0},[d]),y=Object(a.useMemo)(()=>j>0?b/j:0,[j,b]),O=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:f}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:p?"":Object(W.jsx)(fb.b,{value:y})}),Object(W.jsx)(fb.i,{labels:d.labels.map(e=>"1"===e?s.formatMessage({id:`desk.monitoring.csat.${e}star`}):s.formatMessage({id:`desk.monitoring.csat.${e}stars`})).reverse(),values:[...d.customerSatisfactionScoreCounts].reverse(),colors:{backgroundColors:AR,hoverBorderColors:NR},tooltip:{items:[{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responses"})},{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responsesPercentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.filter((e,t)=>!n.includes(t)).reduce((e,t)=>e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.top"}),centerLabelBottom:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.bottom"})},"desk_stats_chart_agent_csat")]}):null,[d,y,h,f,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(LR,{children:[s.formatMessage({id:"desk.statistics.agents.chart.csat"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.agents.chart.csat.tooltip"})})]}),p?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),JR=Object(a.memo)(({agentId:e,statusDate:t,updateParams:n})=>{const i=Object(E.a)(),{operationHourDay:s}=Object(P.V)(e=>({operationHourDay:e.desk.project.operationHourDay})),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:d}=Object($.a)(),{x:u}=Object(P.p)(),p=Object(a.useRef)(null),[g,h]=Object(a.useState)(0),[m,b]=Object(a.useState)(!1),[j,y]=Object(a.useState)(void 0),[O,v]=Object(a.useState)(void 0),[x,_]=Object(a.useState)(null),C=Object(a.useMemo)(()=>c()(t,f.nb),[t]),k=Object(a.useCallback)(async()=>{try{b(!0);const[n,a]=await Promise.all([Object(N.fetchAgentStatConnectionLogsTime)(r,l,{id:e,start_date:t,end_date:t}),Object(N.fetchAgentStatConnectionLogs)(r,l,{id:e,date:t})]);y(n.data),v([a.data.previousConnectionLog,...a.data.connectionLogs]),_(null)}catch(e){_(d(e))}finally{b(!1)}},[r,l,e,t,d]);Object(a.useEffect)(()=>{k()},[k]);const w=Object(a.useCallback)(e=>{n({statusDate:e.format(f.nb)})},[n]),T=Object(a.useMemo)(()=>JSON.parse(s),[s]),S=Object(a.useCallback)(e=>{const t=e.isoWeekday();return T[["","monday","tuesday","wednesday","thursday","friday","saturday","sunday"][t]]},[T]),I=Object(a.useMemo)(()=>{const e=e=>c()(e,"HH:mm").format("LTS"),{enabled:t,operationTimes:n}=S(C);return t?n.map(({from:t,to:n},a)=>Object(W.jsxs)("span",{children:[Object(W.jsx)(qR,{color:Object(H.getWorkingHourVerticalLineColor)(a)}),`${e(t)} - ${e(n)}`]},`${t}-${n}`)):"Closed"},[S,C]);Object(a.useLayoutEffect)(()=>{p.current&&h(p.current.clientWidth)},[]),Object(a.useEffect)(()=>{p.current&&h(p.current.clientWidth)},[u]);const M=Object(a.useMemo)(()=>x?Object(W.jsx)(SR,{error:x,onRetry:k}):j&&O?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("dl",{className:"daily-durations",children:[Object(W.jsxs)("dt",{className:"daily-durations__label",children:[Object(W.jsx)(zR,{color:Object(o.cssVariables)("green-5")}),i.formatMessage({id:"desk.statistics.agents.detail.lbl.online"})]}),Object(W.jsx)("dd",{className:"daily-durations__value daily-durations__value--online",children:Object(H.renderTimestring)(j.ONLINE)}),Object(W.jsxs)("dt",{className:"daily-durations__label",children:[Object(W.jsx)(zR,{color:Object(o.cssVariables)("orange-5")}),i.formatMessage({id:"desk.statistics.agents.detail.lbl.away"})]}),Object(W.jsx)("dd",{className:"daily-durations__value daily-durations__value--away",children:Object(H.renderTimestring)(j.AWAY)})]}),Object(W.jsx)(HR,{date:t,connectionLogs:null!=O?O:[],detailed:!0,serviceHours:S(C),width:g})]}):null,[O,j,g,x,k,S,i,C,t]);return Object(W.jsxs)(BR,{ref:p,children:[Object(W.jsxs)(VR,{children:[Object(W.jsx)(LR,{children:i.formatMessage({id:"desk.statistics.agents.chart.dailyStatusTracking"})}),Object(W.jsxs)("div",{className:"date-picker-wrapper",children:[Object(W.jsx)("span",{className:"service-hours__label",children:i.formatMessage({id:"desk.statistics.agents.detail.lbl.workingHours"})}),Object(W.jsx)("span",{className:"service-hours__value",children:I}),Object(W.jsx)(o.SingleDatePicker,{date:C,onChange:w,maxDate:c()(),placement:"top-end",size:"small"})]})]}),Object(W.jsx)("div",{style:{height:"100px"},children:m?Object(W.jsx)($R,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):M})]})}),XR=Object(a.memo)(({startDate:e,endDate:t,agentId:n,channelTypes:a,statusDate:i,updateParams:s})=>Object(W.jsx)("div",{"data-test-id":"DeskStatsAgent",children:Object(W.jsxs)(PR,{children:[Object(W.jsx)(FR,{children:Object(W.jsx)(GR,{agentId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(FR,{children:Object(W.jsx)(WR,{agentId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(FR,{children:Object(W.jsx)(KR,{agentId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(UR,{children:Object(W.jsx)(YR,{agentId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(FR,{children:Object(W.jsx)(QR,{agentId:n,startDate:e,endDate:t,channelTypes:a})}),n&&Object(W.jsx)(JR,{agentId:n,statusDate:i,updateParams:s})]})})),ZR=r.default.div.withConfig({displayName:"StatsAgentsTableView__TableHeader",componentId:"eyykub-0"})(["display:flex;align-items:center;justify-content:center;svg{margin-left:4px;}"]),eP=Object(r.default)(V.Ub).withConfig({displayName:"StatsAgentsTableView__StyledPaginator",componentId:"eyykub-1"})(["margin-left:auto;"]),tP=r.default.span.withConfig({displayName:"StatsAgentsTableView__Percentage",componentId:"eyykub-2"})(["color:",";margin-left:5px;"],Object(o.cssVariables)("neutral-7")),nP=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"StatsAgentsTableView__AgentStatsTable",componentId:"eyykub-3"})(["flex:1;"]),aP=({page:e,pageSize:t,updateParams:n,agentsData:i,isFetching:s,sortBy:l,sortOrder:c})=>{var d;const u=Object(E.a)(),p=null==i?void 0:i.results.map(({agent:e,...t})=>({...t,id:e.id,name:e.displayName,photoThumbnailUrl:e.photoThumbnailUrl,email:e.email})),g=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),h=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),m=Object(a.useCallback)((e,t)=>{e&&t&&n({sortBy:e.key,sortOrder:null!=t?t:f.Tb.DESCEND})},[n]),b=Object(a.useCallback)(e=>l===e?c:void 0,[l,c]);return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(nP,{rowKey:"id",columns:[{key:f.Yb.NAME,dataIndex:"name",title:u.formatMessage({id:"desk.statistics.agents.table.name"}),defaultSortOrder:b(f.Yb.NAME),sorter:!0,flex:2,render:e=>Object(W.jsxs)(o.Link,{variant:o.LinkVariant.Neutral,useReactRouter:!0,href:`?view=chart&agent=${e.id}`,children:[Object(W.jsx)(ke.a,{profileID:e.email,imageUrl:e.photoThumbnailUrl||void 0,size:32}),e.name]}),styles:Object(r.css)(["","{margin:-6px 0;margin-right:12px;}"],ke.a)},{key:f.Yb.ASSIGNMENTS,dataIndex:"numberOfAssignments",title:Object(W.jsxs)(ZR,{children:[u.formatMessage({id:"desk.statistics.agents.table.assignments"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.agents.table.assignments.tooltip"}),placement:"top"})]}),sorter:!0,defaultSortOrder:b(f.Yb.ASSIGNMENTS),render:({numberOfAssignments:e})=>e?Object(W.jsxs)(W.Fragment,{children:[IS()(e).format({thousandSeparated:!0,mantissa:0}),Object(W.jsxs)(tP,{children:["(",IS()(null!=i&&i.assignmentsTotalCount?Number(e)/(null==i?void 0:i.assignmentsTotalCount):0).format("0.000%"),")"]})]}):f.Z},{key:f.Yb.ASSIGNED_TICKETS,dataIndex:"numberOfAssignedTickets",title:Object(W.jsxs)(ZR,{children:[u.formatMessage({id:"desk.statistics.agents.table.receivedTickets"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.agents.table.receivedTickets.tooltip"}),placement:"top"})]}),defaultSortOrder:b(f.Yb.ASSIGNED_TICKETS),sorter:!0},{key:f.Yb.CLOSED_TICKETS,dataIndex:"numberOfClosedTickets",title:Object(W.jsxs)(ZR,{children:[u.formatMessage({id:"desk.statistics.agents.table.ticketClosed"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.agents.table.ticketClosed.tooltip"}),placement:"top"})]}),defaultSortOrder:b(f.Yb.CLOSED_TICKETS),sorter:!0},{key:f.Yb.CSAT,dataIndex:"averageCustomerSatisfactionScore",title:Object(W.jsxs)(ZR,{children:[u.formatMessage({id:"desk.statistics.agents.table.csat"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.agents.table.csat.tooltip"}),placement:"top"})]}),sorter:!0,defaultSortOrder:b(f.Yb.CSAT),render:({averageCustomerSatisfactionScore:e})=>Object(W.jsx)(V.lc,{score:e})},{key:f.Yb.RESPONSE_TIME,dataIndex:"averageResponseTime",title:Object(W.jsxs)(ZR,{children:[u.formatMessage({id:"desk.statistics.agents.table.firstResponseTime"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.agents.table.firstResponseTime.tooltip"}),placement:"top"})]}),defaultSortOrder:b(f.Yb.RESPONSE_TIME),sorter:!0,render:({averageResponseTime:e})=>e?Object(H.renderTimestring)(e):f.Z}],dataSource:p,loading:s,showScrollbars:!0,onSortByUpdated:m,emptyView:Object(W.jsx)(z.a,{icon:"no-data",title:u.formatMessage({id:"desk.statistics.agents.table.noItem"}),description:u.formatMessage({id:"desk.statistics.agents.table.noItem.desc"})}),footer:Object(W.jsx)(eP,{current:e,total:null!=(d=null==i?void 0:i.count)?d:0,pageSize:t,pageSizeOptions:f.E,onChange:g,onItemsPerPageChange:h})})})},iP=r.default.span.withConfig({displayName:"BotsSearchDropdown__BotName",componentId:"xkm0u-0"})(["width:100%;display:flex;align-items:center;font-size:14px;font-weight:500;color:",";line-height:1.14;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],Object(o.cssVariables)("neutral-10")),sP=r.default.div.withConfig({displayName:"BotsSearchDropdown__DropdownItemWrapper",componentId:"xkm0u-1"})(["display:flex;align-items:center;width:100%;height:32px;& > div,& > svg{display:flex;flex-direction:column;justify-content:center;margin-right:8px;font-size:12px;overflow-x:hidden;}","{color:",";& > div{max-width:calc(100% - 20px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}}& > svg{margin-left:6px;margin-right:6px;}"],iP,({isSelected:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10")),rP=r.default.div.withConfig({displayName:"BotsSearchDropdown__DropdownToggleWrapper",componentId:"xkm0u-2"})(["display:flex;align-items:center;padding:",";max-width:",";min-width:96px;",";svg{transition:fill 0.2s ",";","}"],({variant:e})=>"inline"===e?0:"0 4px 0 16px",({isToggleFullWidth:e})=>e?"calc(100% - 48px)":"190px",o.Subtitles["subtitle-01"],o.transitionDefault,({isOpen:e})=>e&&`fill: ${Object(o.cssVariables)("purple-7")};`),oP=r.default.div.withConfig({displayName:"BotsSearchDropdown__ToggleBot",componentId:"xkm0u-3"})(["display:flex;flex-direction:row;width:100%;"]),lP=Object(r.default)(V.jc).withConfig({displayName:"BotsSearchDropdown__ToggleBotName",componentId:"xkm0u-4"})(["max-width:",";"],({isToggleFullWidth:e})=>e?"100%":"120px");var cP=Object(r.default)(lP).withConfig({displayName:"BotsSearchDropdown___StyledToggleBotName",componentId:"xkm0u-5"})(["",""],e=>e._css);const dP=r.default.div.withConfig({displayName:"BotsSearchDropdown__EmptyViewWrapper",componentId:"xkm0u-6"})(["display:flex;align-items:center;justify-content:center;height:206px;",";color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-5")),uP=i.a.memo(({selectedItem:e,placeholder:t,textWhenAllBotsSelected:n,isToggleFullWidth:i,isOpen:s})=>{var r;const l=Object(E.a)(),[c,d]=Object(a.useState)(null),[u,p]=Object(a.useState)(null!=(r=null==e?void 0:e.name)?r:f.Z),g=-1===(null==e?void 0:e.id),h=Object(a.useCallback)(()=>{var a;if(e)return g?(d(null),void p(n||l.formatMessage({id:"desk.botSelect.dropdown.item.allBots"}))):(d(Object(W.jsx)(o.Avatar,{size:20,profileID:e.id,imageUrl:e.photoUrl,type:o.AvatarType.Bot,status:null==(a=e.agent.connection)?void 0:a.toLowerCase()})),void p(e.name));d(Object(W.jsx)(o.Icon,{icon:"user-avatar",size:20,color:!s&&Object(o.cssVariables)("neutral-6")||void 0})),p(t||l.formatMessage({id:"desk.botSelect.dropdown.item.placeholder"}))},[l,g,s,t,e,n]);return Object(a.useEffect)(()=>{h()},[h]),Object(W.jsxs)(oP,{"data-test-id":"SelectedBot",children:[c,Object(W.jsx)(cP,{testId:"SelectedBotName",tooltipDisplay:"inline-block",isToggleFullWidth:i,_css:g?void 0:"margin-left: 8px;",children:u})]})});var pP=Object(r.default)(o.Dropdown).withConfig({displayName:"BotsSearchDropdown___StyledDropdown",componentId:"xkm0u-7"})(["width:",";& + ul{width:",";}div li:hover{svg{fill:",";}}"],e=>e._css2,e=>e._css3,e=>e._css4);const gP=i.a.memo(({selectedBotId:e,placeholder:t,textWhenAllBotsSelected:n,isToggleFullWidth:i,isAllBotOptionAvailable:s,dropdownProps:r,onItemSelected:l,botStatuses:c,disabled:d=!1,contextualHelpContent:u})=>{const p=Object(E.a)(),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),[b,j]=Object(a.useState)(null),[y,O]=Object(a.useState)(!1),[v,x]=Object(a.useState)([]),[_,C]=Object(a.useState)(!1),k=Object(a.useRef)(v),w=Object(a.useRef)(0),T=Object(a.useRef)(0),S=Object(a.useRef)(""),I=Object(a.useRef)(()=>{}),M=Object(a.useRef)(null),D=T.current>v.length,A=Object(P.o)(),R={id:-1,name:p.formatMessage({id:"desk.botSelect.dropdown.item.allBots"}),status:"ACTIVE",photoUrl:"",project:0},F=e=>{if(e){var t;const{current:n}=M;n&&n.disconnect(),M.current=new IntersectionObserver(e=>{const[t]=e;t&&t.isIntersecting&&I.current()},{root:null==(t=e.parentNode)?void 0:t.parentElement}),M.current.observe(e)}},U=Object(a.useCallback)(async({offset:e})=>{C(!0);try{const{data:{results:t,count:n}}=await Object(N.fetchDeskBots)(g,h,{offset:e,limit:f.qb,order:"-created_at",status:c});O(0===t.length),0===e?x(t):e!==w.current&&x(rf()(k.current,t,"id")),w.current=e,T.current=n}catch(e){const t=m(e);o.toast.error({message:t}),Object(q.a)({error:t,context:{error:e}})}finally{C(!1)}},[c,m,g,h]),B=Object(a.useMemo)(()=>fd()(()=>{D&&U({offset:1===v.length?0:v.length})},200),[v.length,U,D]),z=Object(a.useCallback)(async({botId:e})=>{C(!0);try{const{data:t}=await Object(N.fetchDeskBot)(g,h,{id:e});j(t)}catch(e){const t=m(e);o.toast.error({message:t}),Object(q.a)({error:t,context:{error:e}})}},[m,g,h]),H=Object(a.useCallback)(e=>{e&&(j(e),l(e))},[l]),G=Object(a.useCallback)(e=>()=>{e?x([]):U({offset:0})},[U]);Object(a.useEffect)(()=>{!s||y||v.some(e=>-1===e.id)||x([R,...v])},[v,R,A.email,A.id,s,y]),Object(a.useEffect)(()=>{if(s&&!e||null===e)j(R);else{if(e){const t=v.find(t=>t.id===e)||null;return j(t),void(t||z({botId:e}))}b||j(null)}},[e]),Object(a.useEffect)(()=>{k.current=v},[v]),Object(a.useEffect)(()=>{I.current=()=>{B()}},[v,B]),Object(a.useEffect)(()=>{U({offset:0})},[U]);const K=!d;return Object(W.jsx)(o.ContextualHelp,{content:u,placement:"bottom",disabled:K,children:Object(W.jsx)(pP,{size:"small",variant:"inline",placement:"bottom-start",...r,selectedItem:b,onItemSelected:H,items:v,isItemDisabled:e=>e.id===(null==b?void 0:b.id),disabled:d,itemToString:e=>`${e.id}`,itemToElement:e=>{var t,a;const i=-1===e.id,s=(null==b?void 0:b.id)===e.id;return Object(W.jsxs)(sP,{ref:v[v.length-1].id===e.id&&D?F:void 0,isSelected:s,children:[!i&&Object(W.jsx)(o.Avatar,{size:"medium",profileID:e.id,imageUrl:e.photoUrl||void 0,type:o.AvatarType.Bot,status:null==(t=e.agent)||null==(a=t.connection)?void 0:a.toLowerCase()}),Object(W.jsx)(iP,{"data-test-id":"BotOptionName",children:i?n||p.formatMessage({id:"desk.botSelect.dropdown.item.allBots"}):Object(W.jsx)(V.jc,{children:Object(W.jsx)(V.lb,{highlightedText:S.current,content:e.name,isWrapper:!1})})})]})},emptyView:Object(W.jsx)(dP,{children:_?Object(W.jsx)(o.Spinner,{}):Object(W.jsx)(o.EmptyState,{size:o.EmptyStateSize.Small,icon:"bot",title:p.formatMessage({id:"desk.botSelect.dropdown.noResult"}),description:"",withoutMarginBottom:!0})}),toggleRenderer:({selectedItem:e,isOpen:a})=>Object(W.jsx)(rP,{isOpen:a,variant:null==r?void 0:r.variant,isToggleFullWidth:i,onClick:G(a),children:Object(W.jsx)(uP,{selectedItem:null!=e?e:void 0,isOpen:a,textWhenAllBotsSelected:v.length>0?n:p.formatMessage({id:"desk.botSelect.dropdown.item.noItem"}),placeholder:t,isToggleFullWidth:i})}),_css2:i?"100%":"auto",_css3:(null==r?void 0:r.width)||"190px",_css4:"default"===(null==r?void 0:r.variant)?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10")})})}),hP=r.default.div.withConfig({displayName:"StatsFilter__Container",componentId:"zaal1f-0"})(["display:flex;justify-content:space-between;flex-direction:row;margin-top:24px;margin-bottom:32px;"]),mP=r.default.div.withConfig({displayName:"StatsFilter__NotificationWrapper",componentId:"zaal1f-1"})(["margin-bottom:24px;"]),fP=r.default.div.withConfig({displayName:"StatsFilter__Filters",componentId:"zaal1f-2"})(["display:flex;align-items:flex-start;& > div{margin-right:4px;}"]),bP=r.default.div.withConfig({displayName:"StatsFilter__ButtonContainer",componentId:"zaal1f-3"})(["display:flex;align-items:center;"]),jP=r.default.div.withConfig({displayName:"StatsFilter__ViewButtons",componentId:"zaal1f-4"})(["margin-right:16px;& > button{margin-right:4px;}"]);var yP=Object(r.default)(V.mc).withConfig({displayName:"StatsFilter___StyledTicketChannelTypesFilter",componentId:"zaal1f-5"})(["max-width:208px;"]);const OP=({startDate:e,endDate:t,selectedAgentId:n,selectedGroupId:i,selectedBotId:s,showAgents:r=!1,showTeams:l=!1,showBots:d=!1,viewType:u,channelTypes:p,updateParams:g,exportReports:h})=>{const m=Object(E.a)(),b=Object(P.W)(),[j,y]=Object(a.useState)(!1),O=Object(a.useMemo)(()=>e?c()(e,f.nb):void 0,[e]),v=Object(a.useMemo)(()=>t?c()(t,f.nb):void 0,[t]),x=Object(a.useCallback)(e=>{g({agent:e.id<0?void 0:e.id,page:1})},[g]),_=Object(a.useCallback)(e=>{g({team:e.id<0?void 0:e.id,page:1})},[g]),k=Object(a.useCallback)(e=>{g({bot:e.id<0?void 0:e.id,page:1})},[g]),w=Object(a.useCallback)((e,t)=>{t&&(g({startDate:t.startDate.format(f.nb),endDate:t.endDate.format(f.nb)}),Math.abs(t.startDate.diff(t.endDate,"days"))>92&&o.toast.warning({message:C.d}))},[g]),T=Object(a.useCallback)(()=>{h&&b({dialogTypes:A.a.ReportsExport,dialogProps:{channelTypes:p,reports:h,onSuccess:()=>{y(!0)}}})},[p,h,b]),S=Object(a.useCallback)(e=>{g({channelTypes:e})},[g]),I=Object(a.useCallback)(()=>{y(!1)},[]),M=Object(a.useCallback)(()=>{g({view:"table",page:1,pageSize:f.qb},!0)},[g]),D=Object(a.useCallback)(()=>{g({view:"chart",page:void 0,pageSize:void 0},!0)},[g]),N=Object(a.useMemo)(()=>{const e=c()();if(!O||!v)return o.DateRangePickerValue.AllDates;if(0===e.diff(v,"days"))switch(v.diff(O,"days")){case 0:return o.DateRangePickerValue.Today;case 6:return o.DateRangePickerValue.Last7Days;case 13:return o.DateRangePickerValue.Last14Days;case 29:return o.DateRangePickerValue.Last30Days;case 89:return o.DateRangePickerValue.Last90Days;default:return o.DateRangePickerValue.Custom}return 1===e.diff(v,"days")&&0===v.diff(O,"days")?o.DateRangePickerValue.Yesterday:o.DateRangePickerValue.Custom},[v,O]),R=Object(a.useMemo)(()=>{const e=!h,t=Object(W.jsx)(o.Button,{size:"small",buttonType:"secondary",icon:"export",onClick:T,disabled:e,children:m.formatMessage({id:"desk.statistics.header.export.button"})}),n=r?"desk.statistics.header.export.button.disabled.agents":l?"desk.statistics.header.export.button.disabled.teams":d?"desk.statistics.header.export.button.disabled.bots":void 0;if(n&&e){const e=m.formatMessage({id:n});return Object(W.jsx)(o.Tooltip,{content:e,placement:"bottom",children:t})}return t},[h,T,m,r,d,l]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(hP,{children:[Object(W.jsxs)(fP,{"data-test-id":"FilterContainer",children:[Object(W.jsx)(V.Kb,{dateRange:O&&v?{startDate:O,endDate:v}:void 0,value:N,onChange:w,maxDate:c()(),maximumNights:92,size:"small",dropdownProps:{tooltipProps:{placement:"top-start"}}}),r&&Object(W.jsx)(Qt.a,{selectedAgentId:null!=n?n:void 0,dropdownProps:{variant:"default",placement:"bottom-start"},agentActivationStatus:[f.c.ACTIVE,f.c.INACTIVE,f.c.DELETED,f.c.PERMISSION_DENIED],onItemSelected:x,isAllAgentOptionAvailable:!0}),l&&Object(W.jsx)(Ji.a,{selectedAgentGroupId:null!=i?i:void 0,onItemSelected:_,dropdownProps:{variant:"default",placement:"bottom-start"},isAllTeamOptionAvailable:!0}),d&&Object(W.jsx)(gP,{selectedBotId:null!=s?s:void 0,onItemSelected:k,dropdownProps:{variant:"default",placement:"bottom-start"},botStatuses:[f.c.ACTIVE,f.c.INACTIVE,f.c.DELETED],isAllBotOptionAvailable:!0}),Object(W.jsx)(yP,{channelTypes:p,onSelect:S})]}),Object(W.jsxs)(bP,{children:[u&&Object(W.jsxs)(jP,{children:[Object(W.jsx)(o.IconButton,{icon:"table-view",buttonType:"table"===u?"primary":"secondary",size:"small","aria-pressed":"table"===u,title:m.formatMessage({id:"desk.statistics.filter.btn.tableView.tooltip"}),onClick:M}),Object(W.jsx)(o.IconButton,{icon:"chart-view",buttonType:"chart"===u?"primary":"secondary",size:"small","aria-pressed":"chart"===u,title:m.formatMessage({id:"desk.statistics.filter.btn.chartView.tooltip"}),onClick:D})]}),R]})]}),j&&Object(W.jsx)(mP,{children:Object(W.jsx)(o.InlineNotification,{type:"info",message:m.formatMessage({id:"desk.dataExport.notification.dataExport.start"},{link:Object(W.jsx)(pe.Link,{to:"../data_exports",children:m.formatMessage({id:"desk.dataExport.title"})})}),onClose:I})})]})},vP=c()(),xP=r.default.div.withConfig({displayName:"StatsAgents__StyledAgentsStats",componentId:"sc-1ljsd7f-0"})(["",""],e=>e.isTableView&&Object(r.css)(["display:flex;flex-direction:column;flex:1;overflow-y:auto;"])),_P={page:1,pageSize:f.qb,view:"table",startDate:vP.clone().subtract(13,"days").format(f.nb),endDate:vP.clone().format(f.nb),sortBy:f.Yb.ASSIGNMENTS,sortOrder:f.Tb.DESCEND,agent:null,channelTypes:[],statusDate:vP.clone().format(f.nb)},CP=Object(a.memo)(()=>{const e=Object(E.a)(),[t,n]=Object(a.useState)(void 0),[i,s]=Object(a.useState)(!1),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),d=Object(B.a)(_P,{page:(e,t)=>"table"===t.view&&Ft(e),pageSize:(e,t)=>"table"===t.view&&Ut(e),view:e=>"table"===e||"chart"===e,startDate:(e,t)=>$t(e,t.endDate),endDate:(e,t)=>Bt(e,t.startDate),channelTypes:e=>Vt(e),sortBy:e=>zt(Object.values(f.Yb),e),sortOrder:e=>Ht(e),statusDate:e=>qt(e)}),{page:u,pageSize:p,view:g,updateParams:h,startDate:m,endDate:b,agent:j,channelTypes:y,sortBy:O,sortOrder:v,statusDate:x}=d,_=isNaN(Number(j))?void 0:Number(j),C=Object(a.useMemo)(()=>Kt(y),[y]),k=Object(a.useCallback)(async()=>{try{s(!0);const{data:e}=await Object(N.fetchStatsByAgents)(r,l,{start_date:m,end_date:b,channel_type:C,limit:p,offset:(u-1)*p,agent:null!=j?j:void 0,order:Object(H.getSorterParams)(O,v)});n(e)}catch(e){o.toast.error({message:c(e)})}finally{s(!1)}},[j,C,b,c,u,p,r,l,O,v,m]);Object(a.useEffect)(()=>{k()},[k]);const w=Object(a.useMemo)(()=>"chart"===g?j?[{name:e.formatMessage({id:"desk.statistics.agents.chart.assignments"}),filename:`sendbird_desk_reports_agent_${j}_assignments`,exportAPI:N.exportAgentAssignments,apiPayload:{agent:j}},{name:e.formatMessage({id:"desk.statistics.agents.chart.firstResponseTime"}),filename:`sendbird_desk_reports_agent_${j}_response_times`,exportAPI:N.exportAgentFirstResponseTime,apiPayload:{agent:j}},{name:e.formatMessage({id:"desk.statistics.agents.chart.closedTickets"}),filename:`sendbird_desk_reports_agent_${j}_closed_tickets`,exportAPI:N.exportAgentClosedTickets,apiPayload:{agent:j}},{name:e.formatMessage({id:"desk.statistics.agents.chart.closedTicketsHourly"}),filename:`sendbird_desk_reports_agent_${j}_hourly_closed_tickets`,exportAPI:N.exportAgentAvgHourlyClosedTickets,apiPayload:{agent:j}},{name:e.formatMessage({id:"desk.statistics.agents.chart.csat"}),filename:`sendbird_desk_reports_agent_${j}_csat`,exportAPI:N.exportAgentCSAT,apiPayload:{agent:j}},{name:e.formatMessage({id:"desk.statistics.agents.chart.dailyStatusTracking"}),filename:`sendbird_desk_reports_agent_${j}_daily_status_tracking`,exportAPI:N.exportAgentDailyConnectionStatus,apiPayload:{agent:j}}]:void 0:[{name:e.formatMessage({id:"desk.reports.export.customType.agentPerformance"}),filename:"sendbird_desk_reports_agents_performance",exportAPI:N.exportAgentPerformance}],[j,e,g]),T=Object(a.useMemo)(()=>g&&"table"!==g?Object(W.jsx)(XR,{agentId:_,startDate:m,endDate:b,statusDate:x,channelTypes:C,updateParams:h}):Object(W.jsx)(aP,{page:u,pageSize:p,updateParams:h,agentsData:t,isFetching:i,sortBy:O,sortOrder:v}),[g,u,p,h,t,i,O,v,_,m,b,x,C]);return Object(W.jsxs)(xP,{isTableView:"table"===g,children:[Object(W.jsx)(OP,{channelTypes:C,startDate:m,endDate:b,viewType:g,showAgents:!0,updateParams:h,selectedAgentId:_,exportReports:w}),T]})});var kP=n("Eagf");const{background:wP,hover:TP}=Object(mb.d)({dataSize:5}),SP=r.default.section.withConfig({displayName:"StatsBotsChartView__GridRow",componentId:"sc-165yujq-0"})(["display:grid;grid-gap:32px 24px;align-items:center;grid-template-columns:repeat(6,1fr);grid-auto-flow:row;padding:0 0 32px;"]),EP=Object(r.default)(SP).withConfig({displayName:"StatsBotsChartView__GridContainer",componentId:"sc-165yujq-1"})([""]),IP=r.default.h4.withConfig({displayName:"StatsBotsChartView__GridItemTitle",componentId:"sc-165yujq-2"})(["display:flex;align-items:center;font-size:16px;font-weight:600;line-height:24px;letter-spacing:-0.3px;color:",";"],Object(o.cssVariables)("neutral-10")),MP=r.default.div.withConfig({displayName:"StatsBotsChartView__ChartGridItem",componentId:"sc-165yujq-3"})(["grid-column:span 3;position:relative;align-self:start;border:1px solid ",";padding:26px 24px;border-radius:4px;height:378px;.summary{display:flex;flex-direction:row;align-items:baseline;margin-top:20px;margin-bottom:16px;height:24px;&__title{font-size:14px;color:",";}&__value{font-size:24px;font-weight:600;line-height:1;letter-spacing:-0.7px;color:",";margin-left:8px;&:empty::after{display:inline-block;content:' ';font-size:24px;line-height:1;}}}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("purple-7")),DP=r.default.div.withConfig({displayName:"StatsBotsChartView__SpinnerContainer",componentId:"sc-165yujq-4"})(["display:flex;align-items:center;justify-content:center;height:100%;"]),AP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(void 0),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),b=Object(a.useCallback)(async()=>{try{if(d(!0),e){const a={id:e,start_date:t,end_date:n,channel_type:i},s={...a,...Object(kP.a)(t,n)},r=[Object(N.fetchStatsBotClosedTicketCounts)(g,h,a),Object(N.fetchStatsBotClosedTicketCounts)(g,h,s)],o=await Promise.all(r),[c,d]=o.map(e=>e.data);l({current:c,previous:d})}else{const e={start_date:t,end_date:n,channel_type:i,is_bot_only:!0},a={...e,...Object(kP.a)(t,n)},s=[Object(N.fetchStatsClosedTicketCounts)(g,h,e),Object(N.fetchStatsClosedTicketCounts)(g,h,a)],r=await Promise.all(s),[o,c]=r.map(e=>e.data);l({current:{labels:o.labels,results:o.results,totalCount:o.results.reduce((e,t)=>e+t,0)},previous:{labels:c.labels,results:c.results,totalCount:c.results.reduce((e,t)=>e+t,0)}})}p(null)}catch(e){p(m(e))}finally{d(!1)}},[e,i,n,m,g,h,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>r?[{data:r.current.labels.map((e,t)=>({x:e,y:r.current.results[t]}))}]:[{data:[]}],[r]),y=Object(a.useMemo)(()=>u?Object(W.jsx)(SR,{error:u,onRetry:b}):r?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:Object(W.jsx)(fb.d,{value:r.current.totalCount,previousValue:r.previous.totalCount,testId:"ResolutionTimeValue"})})}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}},useArea:!0})})]}):null,[r,u,j,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.closedTickets"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.closedTickets.tooltip"})})]}),c?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),NP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{if(g(!0),e){const a={id:e,start_date:t,end_date:n,channel_type:i},s={...a,...Object(kP.a)(t,n)},o=[Object(N.fetchStatsBotTicketClosingRates)(r,l,a),Object(N.fetchStatsBotTicketClosingRates)(r,l,s)],c=await Promise.all(o),[d,p]=c.map(e=>e.data);u({current:d,previous:p})}else{const e={start_date:t,end_date:n,channel_type:i,is_bot_only:!0},a={...e,...Object(kP.a)(t,n)},s=[Object(N.fetchStatsAssignmentClosingRates)(r,l,e),Object(N.fetchStatsAssignmentClosingRates)(r,l,a)],o=await Promise.all(s),[c,d]=o.map(e=>e.data);u({current:c,previous:d})}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.current.labels.map((e,t)=>({x:e,y:100*d.current.results[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:Object(W.jsx)(fb.d,{value:d.current.average,previousValue:d.previous.average,format:"0.0%",testId:"ResolutionTimeValue"})})}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}},useArea:!0})})]}):null,[d,j,h,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.closedAssignmentRate"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.closedAssignmentRate.tooltip"})})]}),p?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),RP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{if(g(!0),e){const a={id:e,start_date:t,end_date:n,channel_type:i},s={...a,...Object(kP.a)(t,n)},o=[Object(N.fetchStatsBotAssignmentCounts)(r,l,a),Object(N.fetchStatsBotAssignmentCounts)(r,l,s)],c=await Promise.all(o),[d,p]=c.map(e=>e.data);u({current:d,previous:p})}else{const e={start_date:t,end_date:n,channel_type:i,is_bot_only:!0},a={...e,...Object(kP.a)(t,n)},s=[Object(N.fetchStatsAssignmentCounts)(r,l,e),Object(N.fetchStatsAssignmentCounts)(r,l,a)],o=await Promise.all(s),[c,d]=o.map(e=>e.data);u({current:{labels:c.labels,results:c.results,totalCount:c.results.reduce((e,t)=>e+t,0)},previous:{labels:d.labels,results:d.results,totalCount:d.results.reduce((e,t)=>e+t,0)}})}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.current.labels.map((e,t)=>({x:e,y:d.current.results[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:!p&&Object(W.jsx)(fb.d,{value:d.current.totalCount,previousValue:d.previous.totalCount,testId:"ResolutionTimeValue"})})}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}},noPadding:!0,useArea:!0})})]}):null,[j,h,b,d,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.assignments"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.assignments.tooltip"})})]}),p?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),PP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{if(g(!0),e){const a={id:e,start_date:t,end_date:n,channel_type:i},s={...a,...Object(kP.a)(t,n)},o=[Object(N.fetchStatsBotClosingTime)(r,l,a),Object(N.fetchStatsBotClosingTime)(r,l,s)],c=await Promise.all(o),[d,p]=c.map(e=>e.data);u({current:d,previous:p})}else{const e={start_date:t,end_date:n,channel_type:i,is_bot_only:!0},a={...e,...Object(kP.a)(t,n)},s=[Object(N.fetchStatsClosingAssignedTimes)(r,l,e),Object(N.fetchStatsClosingAssignedTimes)(r,l,a)],o=await Promise.all(s),[c,d]=o.map(e=>e.data);u({current:c,previous:d})}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{label:"",data:d.current.results.map((e,t)=>({x:d.current.labels[t],y:e}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:!p&&Object(W.jsx)(fb.d,{value:d.current.average,previousValue:d.previous.average,format:H.renderTimestring,testId:"ResolutionTimeValue"})})}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}],yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(e)}}]}},tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),useArea:!0})})]}):null,[h,d,j,p,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.closingTime"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.closingTime.tooltip"})})]}),p?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),LP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(void 0),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),b=Object(a.useCallback)(async()=>{try{if(d(!0),e){const a={id:e,start_date:t,end_date:n,channel_type:i},s={...a,...Object(kP.a)(t,n)},r=[Object(N.fetchStatsBotHandoverTime)(g,h,a),Object(N.fetchStatsBotHandoverTime)(g,h,s)],o=await Promise.all(r),[c,d]=o.map(e=>e.data);l({current:c,previous:d})}else{const e={start_date:t,end_date:n,channel_type:i,is_bot_only:!0},a={...e,...Object(kP.a)(t,n)},s=[Object(N.fetchStatsHandoverAssignedTimes)(g,h,e),Object(N.fetchStatsHandoverAssignedTimes)(g,h,a)],r=await Promise.all(s),[o,c]=r.map(e=>e.data);l({current:o,previous:c})}p(null)}catch(e){p(m(e))}finally{d(!1)}},[e,i,n,m,g,h,t]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>r?[{data:r.current.labels.map((e,t)=>({x:e,y:r.current.results[t]}))}]:[{data:[]}],[r]),y=Object(a.useMemo)(()=>u?Object(W.jsx)(SR,{error:u,onRetry:b}):r?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:!c&&Object(W.jsx)(fb.d,{value:r.current.average,previousValue:r.previous.average,format:H.renderTimestring,testId:"ResolutionTimeValue"})})}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}],yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(e)}}]}},tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),useArea:!0})})]}):null,[r,u,j,c,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.handover"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.handover.tooltip"})})]}),c?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),FP=Object(a.memo)(({botId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),f=Object(a.useCallback)(async()=>{try{if(g(!0),e){const{data:a}=await Object(N.fetchStatsBotCSAT)(r,l,{id:e,start_date:t,end_date:n,channel_type:i});u(a)}else{const{data:e}=await Object(N.fetchCSAT)(r,l,{start_date:t,end_date:n,channel_type:i,is_bot_only:!0});u({...e,results:e.customerSatisfactionScoreCounts})}m(null)}catch(e){m(c(e))}finally{g(!1)}},[e,i,n,c,r,l,t]);Object(a.useEffect)(()=>{f()},[f]);const b=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.results.map((e,t)=>e*(t+1)).reduce((e,t)=>e+t,0))?e:0},[d]),j=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.results.reduce((e,t)=>e+t,0))?e:0},[null==d?void 0:d.results]),y=Object(a.useMemo)(()=>j>0?b/j:0,[j,b]),O=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:f}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:p?"":Object(W.jsx)(fb.b,{value:y})}),Object(W.jsx)(fb.i,{labels:d.labels.map(e=>"1"===e?s.formatMessage({id:`desk.monitoring.csat.${e}star`}):s.formatMessage({id:`desk.monitoring.csat.${e}stars`})).reverse(),values:[...d.results].reverse(),colors:{backgroundColors:wP,hoverBorderColors:TP},tooltip:{items:[{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responses"})},{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responsesPercentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.filter((e,t)=>!n.includes(t)).reduce((e,t)=>e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.top"}),centerLabelBottom:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.bottom"})},"desk_stats_chart_agent_csat")]}):null,[d,y,h,f,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(IP,{children:[s.formatMessage({id:"desk.statistics.bots.chart.csat"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.bots.chart.csat.tooltip"})})]}),p?Object(W.jsx)(DP,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),UP=Object(a.memo)(({startDate:e,endDate:t,botId:n,channelTypes:a})=>Object(W.jsx)("div",{"data-test-id":"DeskStatsBot",children:Object(W.jsxs)(EP,{children:[Object(W.jsx)(MP,{children:Object(W.jsx)(AP,{botId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(MP,{children:Object(W.jsx)(NP,{botId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(MP,{children:Object(W.jsx)(RP,{botId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(MP,{children:Object(W.jsx)(PP,{botId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(MP,{children:Object(W.jsx)(LP,{botId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(MP,{children:Object(W.jsx)(FP,{botId:n,startDate:e,endDate:t,channelTypes:a})})]})})),$P=r.default.div.withConfig({displayName:"StatsBotsTableView__TableHeader",componentId:"esn3ev-0"})(["display:flex;align-items:center;justify-content:center;svg{margin-left:4px;}"]),BP=Object(r.default)(o.Avatar).withConfig({displayName:"StatsBotsTableView__BotAvatar",componentId:"esn3ev-1"})(["margin:-6px 0;margin-right:12px;"]),VP=Object(r.default)(V.Ub).withConfig({displayName:"StatsBotsTableView__StyledPaginator",componentId:"esn3ev-2"})(["margin-left:auto;"]),zP=r.default.span.withConfig({displayName:"StatsBotsTableView__Percentage",componentId:"esn3ev-3"})(["color:",";margin-left:5px;"],Object(o.cssVariables)("neutral-7")),HP=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"StatsBotsTableView__BotStatsTable",componentId:"esn3ev-4"})(["flex:1;"]),qP=Object(a.memo)(({page:e,pageSize:t,updateParams:n,botsData:i,isFetching:s,sortBy:r,sortOrder:l})=>{var c,d;const u=Object(E.a)(),p=null!=(c=null==i?void 0:i.results.map(e=>({...e,id:e.agent__bot__id,name:e.agent__bot__name,photoUrl:e.bot.photoUrl})))?c:[],g=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),h=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),m=Object(a.useCallback)((e,t)=>{e&&t&&n({sortBy:e.key,sortOrder:null!=t?t:f.Tb.DESCEND})},[n]),b=Object(a.useCallback)(e=>r===e?l:void 0,[r,l]);return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(HP,{rowKey:"id",columns:[{key:G.G.NAME,dataIndex:"name",title:u.formatMessage({id:"desk.statistics.bots.table.name"}),defaultSortOrder:b(G.G.NAME),sorter:!0,flex:3,render:e=>Object(W.jsxs)(o.Link,{variant:o.LinkVariant.Neutral,useReactRouter:!0,href:`?view=chart&bot=${e.bot.id}`,children:[Object(W.jsx)(BP,{profileID:e.id,imageUrl:e.photoUrl||void 0,type:o.AvatarType.Bot,size:32}),e.name]})},{key:G.G.ASSIGNMENTS,dataIndex:"numberOfAssignments",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.assignments"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.assignments.tooltip"}),placement:"top"})]}),sorter:!0,flex:2,defaultSortOrder:b(G.G.ASSIGNMENTS),render:({numberOfAssignments:e})=>e?Object(W.jsxs)(W.Fragment,{children:[IS()(e).format({thousandSeparated:!0,mantissa:0}),Object(W.jsxs)(zP,{children:["(",IS()(null!=i&&i.assignmentsTotalCount?Number(e)/(null==i?void 0:i.assignmentsTotalCount):0).format("0.000%"),")"]})]}):f.Z},{key:G.G.CLOSED_TICKETS,dataIndex:"numberOfClosedTickets",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.closedTickets"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.closedTickets.tooltip"}),placement:"top"})]}),flex:2,defaultSortOrder:b(G.G.CLOSED_TICKETS),sorter:!0},{key:G.G.CLOSING_RATE,dataIndex:"averageAssignmentClosingRate",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.closedAssignmentRate"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.closedAssignmentRate.tooltip"}),placement:"top"})]}),flex:2,defaultSortOrder:b(G.G.CLOSING_RATE),sorter:!0},{key:G.G.CLOSING_TIME,dataIndex:"averageClosingAssignedTime",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.closingTime"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.closingTime.tooltip"}),placement:"top"})]}),flex:2,sorter:!0,defaultSortOrder:b(G.G.CLOSING_TIME),render:({averageClosingAssignedTime:e})=>e?Object(H.renderTimestring)(e):f.Z},{key:G.G.HANDOVER,dataIndex:"averageHandoverAssignedTime",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.handover"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.handover.tooltip"}),placement:"top"})]}),flex:2,defaultSortOrder:b(G.G.HANDOVER),sorter:!0,render:({averageHandoverAssignedTime:e})=>e?Object(H.renderTimestring)(e):f.Z},{key:G.G.CSAT,dataIndex:"averageCustomerSatisfactionScore",title:Object(W.jsxs)($P,{children:[u.formatMessage({id:"desk.statistics.bots.table.csat"}),Object(W.jsx)(V.qb,{content:u.formatMessage({id:"desk.statistics.bots.table.csat.tooltip"}),placement:"top"})]}),flex:2,defaultSortOrder:b(G.G.CSAT),sorter:!0,render:({averageCustomerSatisfactionScore:e})=>Object(W.jsx)(V.lc,{score:e})}],dataSource:p,loading:s,showScrollbars:!0,onSortByUpdated:m,emptyView:Object(W.jsx)(z.a,{icon:"reports-filled",title:u.formatMessage({id:"desk.statistics.bots.table.noItem"}),description:u.formatMessage({id:"desk.statistics.bots.table.noItem.desc"})}),footer:Object(W.jsx)(VP,{current:e,total:null!=(d=null==i?void 0:i.count)?d:0,pageSize:t,pageSizeOptions:f.E,onChange:g,onItemsPerPageChange:h})})})}),GP=c()(),WP=r.default.div.withConfig({displayName:"StatsBots__StyledAgentsStats",componentId:"uuq442-0"})(["",""],e=>e.isTableView&&Object(r.css)(["display:flex;flex-direction:column;flex:1;overflow-y:auto;"])),KP={page:1,pageSize:f.qb,view:"table",startDate:GP.clone().subtract(13,"days").format(f.nb),endDate:GP.clone().format(f.nb),sortBy:G.G.ASSIGNMENTS,sortOrder:f.Tb.DESCEND,bot:null,channelTypes:[],statusDate:GP.clone().format(f.nb)},YP=Object(a.memo)(()=>{var e;const t=Object(E.a)(),[n,i]=Object(a.useState)(void 0),[s,r]=Object(a.useState)(!1),{pid:l,region:c}=Object(L.a)(),{getErrorMessage:d}=Object($.a)(),u=Object(B.a)(KP,{page:(e,t)=>"table"===t.view&&Ft(e),pageSize:(e,t)=>"table"===t.view&&Ut(e),view:e=>"table"===e||"chart"===e,startDate:(e,t)=>$t(e,t.endDate),endDate:(e,t)=>Bt(e,t.startDate),channelTypes:e=>Vt(e),sortBy:e=>zt(Object.values(G.G),e),sortOrder:e=>Ht(e),statusDate:e=>qt(e)}),{page:p,pageSize:g,view:h,updateParams:m,startDate:f,endDate:b,bot:j,channelTypes:y,sortBy:O,sortOrder:v}=u,x=Object(a.useMemo)(()=>Kt(y),[y]),_=Object(a.useCallback)(async()=>{try{r(!0);const{data:e}=await Object(N.fetchStatsByBots)(l,c,{start_date:f,end_date:b,channel_type:x,limit:g,offset:(p-1)*g,order:Object(H.getSorterParams)(O,v),bot:null!=j?j:void 0});i(e)}catch(e){o.toast.error({message:d(e)})}finally{r(!1)}},[j,x,b,d,p,g,l,c,O,v,f]);Object(a.useEffect)(()=>{_()},[_]);const C=Object(a.useMemo)(()=>"chart"===h?j?[{name:t.formatMessage({id:"desk.statistics.bots.chart.closedTickets"}),filename:`sendbird_desk_reports_bot_${j}_closedTickets`,exportAPI:N.exportBotCloseTickets,apiPayload:{bot:j}},{name:t.formatMessage({id:"desk.statistics.bots.chart.closedAssignmentRate"}),filename:`sendbird_desk_reports_bot_${j}_ticketClosingRate`,exportAPI:N.exportBotClosingRates,apiPayload:{bot:j}},{name:t.formatMessage({id:"desk.statistics.bots.chart.assignments"}),filename:`sendbird_desk_reports_bot_${j}_receivedTickets`,exportAPI:N.exportBotAssignments,apiPayload:{bot:j}},{name:t.formatMessage({id:"desk.statistics.bots.chart.closingTime"}),filename:`sendbird_desk_reports_bot_${j}_avgClosingTime`,exportAPI:N.exportBotAvgTimeToClosing,apiPayload:{bot:j}},{name:t.formatMessage({id:"desk.statistics.bots.chart.handover"}),filename:`sendbird_desk_reports_bot_${j}_avgHandover`,exportAPI:N.exportBotAvgTimeToHandover,apiPayload:{bot:j}},{name:t.formatMessage({id:"desk.statistics.bots.chart.csat"}),filename:`sendbird_desk_reports_bot_${j}_csat`,exportAPI:N.exportBotCSAT,apiPayload:{bot:j}}]:void 0:[{name:t.formatMessage({id:"desk.reports.export.customType.botPerformance"}),filename:"sendbird_desk_reports_bots_performance",exportAPI:N.exportBotPerformance}],[j,t,h]),k=Object(a.useMemo)(()=>h&&"table"!==h?Object(W.jsx)(UP,{botId:null!=j?j:void 0,startDate:f,endDate:b,channelTypes:x}):Object(W.jsx)(qP,{page:p,pageSize:g,updateParams:m,botsData:n,isFetching:s,sortBy:O,sortOrder:v}),[j,n,x,b,s,p,g,O,v,f,m,h]);return Object(W.jsxs)(WP,{isTableView:"table"===h,children:[Object(W.jsx)(OP,{channelTypes:x,startDate:f,endDate:b,viewType:h,showBots:!0,updateParams:m,selectedBotId:null!=(e=Number(j))?e:void 0,exportReports:C}),k]})}),{background:QP,hover:JP,size:XP}=Object(mb.d)({dataSize:6}),ZP=r.default.div.withConfig({displayName:"StatsOverviewCharts__Stats",componentId:"sc-12m2phh-0"})(["position:relative;",",","{height:100%;}","{justify-content:space-between;height:370px;> div{max-height:265px;}}"],V.o,V.p,V.p),eL=r.default.div.withConfig({displayName:"StatsOverviewCharts__SpinnerContainer",componentId:"sc-12m2phh-1"})(["display:flex;align-items:center;justify-content:center;height:100%;"]),tL=(e,t)=>({total:e[t].reduce((e,t)=>e+t,0),statistics:e.labels.map((n,a)=>({x:n,y:e[t][a]}))}),nL=({startDate:e,endDate:t,channelTypes:n})=>{const a=c()(e,f.nb).startOf("day").diff(c()(t,f.nb).clone().add(1,"day").startOf("day"));return{start_date:c()(e,f.nb).add(a,"milliseconds").format(f.nb),end_date:c()(t,f.nb).add(a,"milliseconds").format(f.nb),channel_type:n}},aL=(e,t)=>c()(t,f.nb).add(1,"day").diff(c()(e,f.nb),"days"),iL=Object(a.memo)(({pid:e,region:t,params:{startDate:n,endDate:i,channelTypes:s},tooltipBoundariesElementRef:r})=>{var l;const c=Object(E.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)(!1),[g,h]=Object(a.useState)(void 0),[m,f]=Object(a.useState)(void 0),[b,j]=Object(a.useState)(null),y=Object(a.useCallback)(async()=>{try{p(!0);const a={start_date:n,end_date:i,channel_type:s},r=nL({startDate:n,endDate:i,channelTypes:s}),o=[Object(N.fetchStatsTicketCounts)(e,t,a),Object(N.fetchStatsTicketCounts)(e,t,r)],l=await Promise.all(o),[c,d]=l.map(e=>e.data);h({current:tL(c,"closedTickets"),previous:tL(d,"closedTickets")}),f({current:tL(c,"openTickets"),previous:tL(d,"openTickets")}),j(null)}catch(e){j(d(e))}finally{p(!1)}},[s,i,d,e,t,n]);Object(a.useEffect)(()=>{y()},[y]);const O=Object(a.useMemo)(()=>aL(n,i),[i,n]),v=Object(a.useMemo)(()=>b?Object(W.jsx)(SR,{error:b,onRetry:y}):g&&m?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(fb.f,{style:{marginBottom:"35px"},children:[Object(W.jsx)(fb.d,{label:c.formatMessage({id:"desk.statistics.overview.tickets.lbl.created"}),value:null==m?void 0:m.current.total,previousValue:null==m?void 0:m.previous.total,tooltipMessage:c.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:O}),format:"0,0",testId:"CreatedTicketsValue"}),Object(W.jsx)(fb.d,{label:c.formatMessage({id:"desk.statistics.overview.tickets.lbl.closed"}),value:null==g?void 0:g.current.total,previousValue:null==g?void 0:g.previous.total,tooltipMessage:c.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:O}),format:"0,0",color:Object(o.cssVariables)("blue-5"),testId:"ClosedTicketsValue"})]}),Object(W.jsx)(DR,{datasets:[{label:c.formatMessage({id:"desk.statistics.overview.tickets.lbl.created"}),data:null==m?void 0:m.current.statistics},{label:c.formatMessage({id:"desk.statistics.overview.tickets.lbl.closed"}),data:null==g?void 0:g.current.statistics}]},"desk_stats_chart_tickets")]}):null,[g,O,b,y,c,m]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[c.formatMessage({id:"desk.statistics.overview.header.tickets"}),Object(W.jsx)(V.C,{content:c.formatMessage({id:"desk.statistics.overview.tickets.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(l=null==r?void 0:r.current)?l:void 0}}}})]}),u?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):v]})})}),sL=Object(a.memo)(({pid:e,region:t,params:{startDate:n,endDate:i,channelTypes:s},tooltipBoundariesElementRef:r})=>{var l;const d=Object(E.a)(),{getErrorMessage:u}=Object($.a)(),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),[b,j]=Object(a.useState)(void 0),[y,O]=Object(a.useState)(void 0),v=Object(a.useCallback)(async()=>{try{g(!0);const a={start_date:n,end_date:i,channel_type:s},r=nL({startDate:n,endDate:i,channelTypes:s}),o=[Object(N.fetchHourlyAverageTicketCounts)(e,t,a),Object(N.fetchHourlyAverageTicketCounts)(e,t,r)],l=await Promise.all(o),[d,u]=l.map(e=>e.data),p=Array(24).fill(0).map((e,t)=>c()(n,f.nb).set("hour",t).set("minute",0).set("second",0).tz("UTC").valueOf());j({current:{total:d.hourlyTicketCount.reduce((e,t)=>e+t,0),statistics:d.hourlyTicketCount.map((e,t)=>({x:p[t],y:e}))},previous:{total:u.hourlyTicketCount.reduce((e,t)=>e+t,0),statistics:u.hourlyTicketCount.map((e,t)=>({x:p[t],y:e}))}}),O({current:{total:d.hourlyClosedTicketCount.reduce((e,t)=>e+t,0),statistics:d.hourlyClosedTicketCount.map((e,t)=>({x:p[t],y:e}))},previous:{total:u.hourlyClosedTicketCount.reduce((e,t)=>e+t,0),statistics:u.hourlyClosedTicketCount.map((e,t)=>({x:p[t],y:e}))}}),m(null)}catch(e){m(u(e))}finally{g(!1)}},[s,i,u,e,t,n]);Object(a.useEffect)(()=>{v()},[v]);const x=Object(a.useMemo)(()=>aL(n,i),[i,n]),_=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:v}):null!=b&&b.current&&null!=y&&y.current?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(fb.f,{style:{marginBottom:"33px"},children:[Object(W.jsx)(fb.d,{label:d.formatMessage({id:"desk.statistics.overview.hourlyTicket.lbl.new"}),format:"0,0.00",value:null==b?void 0:b.current.total,previousValue:null==b?void 0:b.previous.total,tooltipMessage:d.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:x})}),Object(W.jsx)(fb.d,{label:d.formatMessage({id:"desk.statistics.overview.hourlyTicket.lbl.closed"}),format:"0,0.00",value:null==y?void 0:y.current.total,previousValue:null==y?void 0:y.previous.total,tooltipMessage:d.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:x}),color:Object(o.cssVariables)("blue-5")})]}),Object(W.jsx)(MR,{datasets:[{label:d.formatMessage({id:"desk.statistics.overview.hourlyTicket.lbl.new"}),data:null==b?void 0:b.current.statistics},{label:d.formatMessage({id:"desk.statistics.overview.hourlyTicket.lbl.closed"}),data:null==y?void 0:y.current.statistics}],selectedDateRange:`${c()(n,f.nb).format(f.x)} - ${c()(i,f.nb).format(f.x)}`})]}):null,[y,x,i,h,v,d,b,n]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[d.formatMessage({id:"desk.statistics.overview.header.hourlyTicket"}),Object(W.jsx)(V.C,{content:d.formatMessage({id:"desk.statistics.overview.hourlyTicket.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(l=null==r?void 0:r.current)?l:void 0}}}})]}),p?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):_]})})}),rL=Object(a.memo)(({pid:e,region:t,params:{startDate:n,endDate:i,channelTypes:s},tooltipBoundariesElementRef:r})=>{var l;const c=Object(E.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)(!1),[g,h]=Object(a.useState)(null),[m,f]=Object(a.useState)(void 0),[b,j]=Object(a.useState)(void 0),y=Object(a.useCallback)(async()=>{try{p(!0);const a={start_date:n,end_date:i,channel_type:s},r=nL({startDate:n,endDate:i,channelTypes:s}),o=[Object(N.fetchStatsTicketMessageCounts)(e,t,a),Object(N.fetchStatsTicketMessageCounts)(e,t,r)],l=await Promise.all(o),[c,d]=l.map(e=>e.data);f({current:{total:c.agentMessageCounts.reduce((e,t)=>e+t,0),statistics:c.labels.map((e,t)=>({x:e,y:c.agentMessageCounts[t]}))},previous:{total:d.agentMessageCounts.reduce((e,t)=>e+t,0),statistics:d.labels.map((e,t)=>({x:e,y:d.agentMessageCounts[t]}))}}),j({current:{total:c.customerMessageCounts.reduce((e,t)=>e+t,0),statistics:c.labels.map((e,t)=>({x:e,y:c.customerMessageCounts[t]}))},previous:{total:d.customerMessageCounts.reduce((e,t)=>e+t,0),statistics:d.labels.map((e,t)=>({x:e,y:d.customerMessageCounts[t]}))}}),h(null)}catch(e){h(d(e))}finally{p(!1)}},[s,i,d,e,t,n]);Object(a.useEffect)(()=>{y()},[y]);const O=Object(a.useMemo)(()=>aL(n,i),[i,n]),v=Object(a.useMemo)(()=>{var e,t,n,a,i,s;return g?Object(W.jsx)(SR,{error:g,onRetry:y}):m&&b?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(fb.f,{style:{marginBottom:"35px"},children:[Object(W.jsx)(fb.d,{label:c.formatMessage({id:"desk.statistics.overview.messageCount.lbl.agent"}),value:null!=(e=null==m?void 0:m.current.total)?e:0,previousValue:null!=(t=null==m?void 0:m.previous.total)?t:0,tooltipMessage:c.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:O}),format:"0,0",testId:"MessagesFromAgentsValue"}),Object(W.jsx)(fb.d,{label:c.formatMessage({id:"desk.statistics.overview.messageCount.lbl.customer"}),value:null!=(n=null==b?void 0:b.current.total)?n:0,previousValue:null!=(a=null==b?void 0:b.previous.total)?a:0,tooltipMessage:c.formatMessage({id:"desk.statistics.overview.chart.compareTooltip"},{days:O}),format:"0,0",color:Object(o.cssVariables)("blue-5"),testId:"MessagesFromCustomersValue"}),Object(W.jsx)(fb.e,{value:(null!=(i=null==m?void 0:m.current.total)?i:0)+(null!=(s=null==b?void 0:b.current.total)?s:0)})]}),Object(W.jsx)(DR,{datasets:[{label:c.formatMessage({id:"desk.statistics.overview.messageCount.lbl.agent"}),data:null==m?void 0:m.current.statistics},{label:c.formatMessage({id:"desk.statistics.overview.messageCount.lbl.customer"}),data:null==b?void 0:b.current.statistics}]},"desk_stats_chart_message_count")," "]}):null},[m,b,O,g,y,c]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[c.formatMessage({id:"desk.statistics.overview.header.messageCount"}),Object(W.jsx)(V.C,{content:c.formatMessage({id:"desk.statistics.overview.messageCount.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(l=null==r?void 0:r.current)?l:void 0}}}})]}),u?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):v]})})}),oL=Object(a.memo)(({pid:e,region:t,params:n,tooltipBoundariesElementRef:i})=>{var s;const r=Object(E.a)(),{getErrorMessage:l}=Object($.a)(),[d,u]=Object(a.useState)(!1),[p,g]=Object(a.useState)(null),[h,m]=Object(a.useState)(void 0),{startDate:b,endDate:j}=n,y=Object(a.useCallback)(async()=>{try{u(!0);const a=(await Object(N.fetchHourlyAverageMessageCounts)(e,t,{start_date:n.startDate,end_date:n.endDate,channel_type:n.channelTypes})).data,i=Array(24).fill(0).map((e,t)=>c()(b,f.nb).set("hour",t).set("minute",0).set("second",0).tz("UTC").valueOf());m({agent:a.agentHourlyMessageCount.map((e,t)=>({x:i[t],y:e})),customer:a.customerHourlyMessageCount.map((e,t)=>({x:i[t],y:e}))}),g(null)}catch(e){g(l(e))}finally{u(!1)}},[l,n.channelTypes,n.endDate,n.startDate,e,t,b]);Object(a.useEffect)(()=>{y()},[y]);const O=Object(a.useMemo)(()=>p?Object(W.jsx)(SR,{error:p,onRetry:y}):h?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(fb.f,{style:{marginBottom:"33px"},children:[Object(W.jsx)(fb.d,{label:r.formatMessage({id:"desk.statistics.overview.hourlyIncoming.lbl.agent"})}),Object(W.jsx)(fb.d,{label:r.formatMessage({id:"desk.statistics.overview.hourlyIncoming.lbl.customer"}),color:Object(o.cssVariables)("blue-5")})]}),Object(W.jsx)(MR,{datasets:[{label:r.formatMessage({id:"desk.statistics.overview.hourlyIncoming.lbl.agent"}),data:null==h?void 0:h.agent},{label:r.formatMessage({id:"desk.statistics.overview.hourlyIncoming.lbl.customer"}),data:null==h?void 0:h.customer}],selectedDateRange:`${c()(b,f.nb).format(f.x)} - ${c()(j,f.nb).format(f.x)}`})]}):null,[j,p,y,h,r,b]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[r.formatMessage({id:"desk.statistics.overview.header.hourlyIncoming"}),Object(W.jsx)(V.C,{content:r.formatMessage({id:"desk.statistics.overview.hourlyIncoming.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(s=null==i?void 0:i.current)?s:void 0}}}})]}),d?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})})}),lL=Object(a.memo)(({pid:e,region:t,params:n,tooltipBoundariesElementRef:i})=>{var s;const r=Object(E.a)(),{getErrorMessage:l}=Object($.a)(),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(void 0),m=Object(a.useCallback)(async()=>{try{d(!0);const a=(await Object(N.fetchStatsTicketResponseTimes)(e,t,{start_date:n.startDate,end_date:n.endDate,channel_type:n.channelTypes})).data;h({average:a.average,statistics:a.labels.map((e,t)=>({x:e,y:a.responseTimes[t]}))}),p(null)}catch(e){p(l(e))}finally{d(!1)}},[l,n.channelTypes,n.endDate,n.startDate,e,t]);Object(a.useEffect)(()=>{m()},[m]);const f=Object(a.useMemo)(()=>{var e;return u?Object(W.jsx)(SR,{error:u,onRetry:m}):g?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:Object(W.jsx)(fb.d,{value:null!=(e=null==g?void 0:g.average)?e:0,format:H.renderTimestring,testId:"FirstResponseTimeValue"})}),Object(W.jsx)(DR,{datasets:[{label:r.formatMessage({id:"desk.statistics.overview.responseTime.lbl.average"}),data:null==g?void 0:g.statistics}],tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),chartOptions:{scales:{yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(null!=e?e:0)}}]}}},"desk_stats_chart_tickets")]}):null},[u,m,r,g]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[r.formatMessage({id:"desk.statistics.overview.header.firstResponseTime"}),Object(W.jsx)(V.C,{content:r.formatMessage({id:"desk.statistics.overview.firstResponseTime.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(s=null==i?void 0:i.current)?s:void 0}}}})]}),c?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):f]})})}),cL=Object(a.memo)(({pid:e,region:t,params:n,tooltipBoundariesElementRef:i})=>{var s;const r=Object(E.a)(),{getErrorMessage:l}=Object($.a)(),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(void 0),m=Object(a.useCallback)(async()=>{try{d(!0);const a=(await Object(N.fetchStatsTicketDurationTimes)(e,t,{start_date:n.startDate,end_date:n.endDate,channel_type:n.channelTypes})).data;h({average:a.average,statistics:a.labels.map((e,t)=>({x:e,y:a.durationTimes[t]}))}),p(null)}catch(e){p(l(e))}finally{d(!1)}},[l,n.channelTypes,n.endDate,n.startDate,e,t]);Object(a.useEffect)(()=>{m()},[m]);const f=Object(a.useMemo)(()=>{var e;return u?Object(W.jsx)(SR,{error:u,onRetry:m}):g?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(fb.f,{style:{marginBottom:"33px"},children:Object(W.jsx)(fb.d,{value:null!=(e=null==g?void 0:g.average)?e:0,format:H.renderTimestring,testId:"ResolutionTimeValue"})}),Object(W.jsx)(DR,{datasets:[{label:r.formatMessage({id:"desk.statistics.overview.ticketLifetime.lbl.average"}),data:null==g?void 0:g.statistics}],tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),chartOptions:{scales:{yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(null!=e?e:0)}}]}}},"desk_stats_chart_tickets")]}):null},[g,u,m,r]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[r.formatMessage({id:"desk.statistics.overview.header.resolutionTime"}),Object(W.jsx)(V.C,{content:r.formatMessage({id:"desk.statistics.overview.resolutionTime.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(s=null==i?void 0:i.current)?s:void 0}}}})]}),c?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):f]})})}),dL=Object(a.memo)(({pid:e,region:t,params:n,tooltipBoundariesElementRef:i})=>{var s;const r=Object(E.a)(),{getErrorMessage:l}=Object($.a)(),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(void 0),m=Object(a.useCallback)(async()=>{try{d(!0);const a=(await Object(N.fetchCSAT)(e,t,{start_date:n.startDate,end_date:n.endDate,channel_type:n.channelTypes})).data,i=a.customerSatisfactionScoreCounts.map((e,t)=>e*(t+1)).reduce((e,t)=>e+t,0),s=a.customerSatisfactionScoreCounts.reduce((e,t)=>e+t,0),o=i>0?i/s:0;h({responseRate:a.responseRate,labels:[r.formatMessage({id:"desk.monitoring.csat.5stars"}),r.formatMessage({id:"desk.monitoring.csat.4stars"}),r.formatMessage({id:"desk.monitoring.csat.3stars"}),r.formatMessage({id:"desk.monitoring.csat.2stars"}),r.formatMessage({id:"desk.monitoring.csat.1star"})],values:[...a.customerSatisfactionScoreCounts].reverse(),average:o}),p(null)}catch(e){p(l(e))}finally{d(!1)}},[l,r,n.channelTypes,n.endDate,n.startDate,e,t]);Object(a.useEffect)(()=>{m()},[m]);const f=Object(a.useMemo)(()=>{var e,t,n;return u?Object(W.jsx)(SR,{error:u,onRetry:m}):g?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(fb.f,{style:{marginBottom:"16px"},children:Object(W.jsx)(fb.b,{value:null!=(e=null==g?void 0:g.average)?e:0})}),Object(W.jsx)(fb.i,{labels:null!=(t=null==g?void 0:g.labels)?t:[""],values:null!=(n=null==g?void 0:g.values)?n:[0],colors:{backgroundColors:QP,hoverBorderColors:JP},tooltip:{items:[{label:r.formatMessage({id:"desk.statistics.overview.csat.lbl.responses"})},{label:r.formatMessage({id:"desk.statistics.overview.csat.lbl.responsesPercentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.reduce((e,t,a)=>n.includes(a)?e:e+t,0)*100)}%`,color:Object(o.cssColors)("neutral-10")}]},centerLabelTop:r.formatMessage({id:"desk.statistics.overview.csat.lbl.total.top"}),centerLabelBottom:r.formatMessage({id:"desk.statistics.overview.csat.lbl.total.bottom"})},"desk_stats_chart_csat")]}):null},[g,u,m,r]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[r.formatMessage({id:"desk.statistics.overview.header.csat"}),Object(W.jsx)(V.C,{content:r.formatMessage({id:"desk.statistics.overview.csat.desc.tooltip"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(s=null==i?void 0:i.current)?s:void 0}}}})]}),c?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):f]})})}),uL={CLOSED_BY_CUSTOMER:"desk.statistics.overview.closedStatuses.lbl.customer",CLOSED_BY_AGENT:"desk.statistics.overview.closedStatuses.lbl.agent",CLOSED_BY_ADMIN:"desk.statistics.overview.closedStatuses.lbl.admin",CLOSED_BY_SYSTEM:"desk.statistics.overview.closedStatuses.lbl.system",CLOSED_BY_PLATFORM_API:"desk.statistics.overview.closedStatuses.lbl.platform",CLOSED_BUT_NOT_DEFINED:"desk.statistics.overview.closedStatuses.lbl.undefined"},pL=Object(a.memo)(({pid:e,region:t,params:n,tooltipBoundariesElementRef:i})=>{var s;const r=Object(E.a)(),{getErrorMessage:l}=Object($.a)(),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(void 0),m=Object(a.useCallback)(async()=>{try{d(!0);const a=(await Object(N.fetchClosedStatuses)(e,t,{start_date:n.startDate,end_date:n.endDate,channel_type:n.channelTypes})).data;h(a.closeStatusCounts.reduce((e,t)=>(e.labels[Object(H.getClosedStatusesIndex)(t.closeStatus)]=r.formatMessage({id:uL[t.closeStatus]}),e.values[Object(H.getClosedStatusesIndex)(t.closeStatus)]=t.counts,e),{labels:new Array(XP),values:new Array(XP)})),p(null)}catch(e){p(l(e))}finally{d(!1)}},[l,r,n.channelTypes,n.endDate,n.startDate,e,t]);Object(a.useEffect)(()=>{m()},[m]);const f=Object(a.useMemo)(()=>{var e,t;return u?Object(W.jsx)(SR,{error:u,onRetry:m}):g?Object(W.jsx)(fb.i,{labels:null!=(e=null==g?void 0:g.labels)?e:[""],values:null!=(t=null==g?void 0:g.values)?t:[0],colors:{backgroundColors:QP,hoverBorderColors:JP},tooltip:{items:[{label:r.formatMessage({id:"desk.statistics.overview.closedStatuses.tooltip.responses"})},{label:r.formatMessage({id:"desk.statistics.overview.closedStatuses.tooltip.percentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.reduce((e,t,a)=>n.includes(a)?e:e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:r.formatMessage({id:"desk.statistics.overview.closedStatuses.center.lbl.top"}),centerLabelBottom:r.formatMessage({id:"desk.statistics.overview.closedStatuses.center.lbl.bottom"})},"desk_stats_chart_closedStatuses"):null},[g,u,m,r]);return Object(W.jsx)(V.o,{children:Object(W.jsxs)(V.p,{children:[Object(W.jsxs)(fb.c,{children:[r.formatMessage({id:"desk.statistics.overview.header.closedStatuses"}),Object(W.jsx)(V.C,{content:r.formatMessage({id:"desk.statistics.overview.header.closedStatuses.desc"}),popperProps:{modifiers:{preventOverflow:{boundariesElement:null!=(s=null==i?void 0:i.current)?s:void 0}}}})]}),c?Object(W.jsx)(eL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):f]})})}),gL=r.default.div.withConfig({displayName:"StatsOverview__StyledStatsOverview",componentId:"j7moi7-0"})(["padding-bottom:40px;"]),hL=Object(r.default)(o.GridItem).attrs({colSpan:6}).withConfig({displayName:"StatsOverview__ChartGridItem",componentId:"j7moi7-1"})([""]),mL=c()(),fL={startDate:mL.clone().subtract(13,"days").format(f.nb),endDate:mL.clone().format(f.nb),channelTypes:[]},bL=()=>{const e=Object(E.a)(),t=Object(a.useRef)(null),{pid:n,region:i}=Object(L.a)(),s=Object(B.a)(fL,{startDate:(e,t)=>$t(e,t.endDate),endDate:(e,t)=>Bt(e,t.startDate),channelTypes:e=>Vt(e)}),{startDate:r,endDate:l,channelTypes:c,updateParams:d}=s,u=Object(a.useMemo)(()=>Kt(c),[c]),p=Object(a.useMemo)(()=>[{name:e.formatMessage({id:"desk.statistics.overview.header.tickets"}),filename:"sendbird_desk_reports_ticket_counts",exportAPI:N.exportTicketCount},{name:e.formatMessage({id:"desk.statistics.overview.header.hourlyTicket"}),filename:"sendbird_desk_reports_hourly_average_ticket_counts",exportAPI:N.exportAvgHourlyTicketCount},{name:e.formatMessage({id:"desk.statistics.overview.header.messageCount"}),filename:"sendbird_desk_reports_ticket_message_counts",exportAPI:N.exportMessageCount},{name:e.formatMessage({id:"desk.statistics.overview.header.hourlyIncoming"}),filename:"sendbird_desk_reports_hourly_average_message_counts",exportAPI:N.exportAvgHourlyMessageCount},{name:e.formatMessage({id:"desk.statistics.overview.header.firstResponseTime"}),filename:"sendbird_desk_reports_ticket_response_times",exportAPI:N.exportAvgFirstResponseTime},{name:e.formatMessage({id:"desk.statistics.overview.header.resolutionTime"}),filename:"sendbird_desk_reports_ticket_duration_times",exportAPI:N.exportAvgResolutionTime},{name:e.formatMessage({id:"desk.statistics.overview.header.csat"}),filename:"report_project_customer_satisfaction_scores",exportAPI:N.exportCSAT}],[e]),g=Object(a.useMemo)(()=>({pid:n,region:i,params:{startDate:r,endDate:l,channelTypes:u},tooltipBoundariesElementRef:t}),[u,l,n,i,r]);return Object(W.jsxs)(gL,{ref:t,children:[Object(W.jsx)(OP,{channelTypes:u,startDate:r,endDate:l,updateParams:d,exportReports:p}),Object(W.jsx)(ZP,{"data-test-id":"DeskStats",children:Object(W.jsxs)(o.Grid,{children:[Object(W.jsx)(hL,{children:Object(W.jsx)(iL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(sL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(rL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(oL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(lL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(cL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(dL,{...g})}),Object(W.jsx)(hL,{children:Object(W.jsx)(pL,{...g})})]})})]})},{background:jL,hover:yL}=Object(mb.d)({dataSize:5}),OL=r.default.section.withConfig({displayName:"StatsTeamsChartView__GridRow",componentId:"kbshfm-0"})(["display:grid;grid-gap:32px 24px;align-items:center;grid-template-columns:repeat(6,1fr);grid-auto-flow:row;padding:0 0 32px;"]),vL=Object(r.default)(OL).withConfig({displayName:"StatsTeamsChartView__GridContainer",componentId:"kbshfm-1"})([""]),xL=r.default.h4.withConfig({displayName:"StatsTeamsChartView__GridItemTitle",componentId:"kbshfm-2"})(["display:flex;align-items:center;font-size:16px;font-weight:600;line-height:24px;letter-spacing:-0.3px;color:",";"],Object(o.cssVariables)("neutral-10")),_L=r.default.div.withConfig({displayName:"StatsTeamsChartView__ChartGridItem",componentId:"kbshfm-3"})(["grid-column:span 2;position:relative;align-self:start;border:1px solid ",";padding:26px 24px;border-radius:4px;height:100%;height:378px;.summary{display:flex;flex-direction:row;align-items:baseline;margin-top:20px;margin-bottom:16px;height:24px;&__title{font-size:14px;color:",";}&__value{font-size:24px;font-weight:600;line-height:1;letter-spacing:-0.7px;color:",";margin-left:8px;&:empty::after{display:inline-block;content:' ';font-size:24px;line-height:1;}}}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("purple-7")),CL=r.default.div.withConfig({displayName:"StatsTeamsChartView__HourlyStatusGridItem",componentId:"kbshfm-4"})(["grid-column:span 4;position:relative;padding:26px 24px;border:1px solid ",";border-radius:4px;height:100%;"],Object(o.cssVariables)("neutral-3")),kL=r.default.div.withConfig({displayName:"StatsTeamsChartView__SpinnerContainer",componentId:"kbshfm-5"})(["display:flex;align-items:center;justify-content:center;height:100%;"]),wL=Object(a.memo)(({startDate:e,endDate:t,channelTypes:n,teamId:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(void 0),[c,d]=Object(a.useState)(!1),[u,p]=Object(a.useState)(null),{pid:g,region:h}=Object(L.a)(),{getErrorMessage:m}=Object($.a)(),b=Object(a.useCallback)(async()=>{try{d(!0);const{data:a}=await Object(N.fetchStatsTicketCounts)(g,h,{start_date:e,end_date:t,channel_type:n,group:i});l(a),p(null)}catch(e){p(m(e))}finally{d(!1)}},[g,h,e,t,n,i,m]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>r?[{data:r.labels.map((e,t)=>({x:e,y:r.closedTickets[t]}))}]:[{data:[]}],[r]),y=Object(a.useMemo)(()=>{var e;return null!=(e=null==r?void 0:r.closedTickets.reduce((e,t)=>e+t,0))?e:0},[r]),O=Object(a.useMemo)(()=>u?Object(W.jsx)(SR,{error:u,onRetry:b}):r?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.closed"})}),Object(W.jsx)("span",{className:"summary__value",children:y})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,noPadding:!0,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}]}}})})]}):null,[r,s,y,u,j,b]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(xL,{children:[s.formatMessage({id:"desk.statistics.teams.chart.closedTickets"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.teams.chart.closedTickets.tooltip"})})]}),c?Object(W.jsx)(kL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),TL=Object(a.memo)(({teamId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{g(!0);const{data:a}=await Object(N.fetchStatsTicketResponseTimes)(r,l,{group:e,start_date:t,end_date:n,channel_type:i});u(a),m(null)}catch(e){m(c(e))}finally{g(!1)}},[r,l,e,t,n,i,c]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.labels.map((e,t)=>({x:e,y:d.responseTimes[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.average"})}),Object(W.jsx)("span",{className:"summary__value",children:p?"":Object(H.renderTimestring)(d.average)})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}],yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(e)}}]}},tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),noPadding:!0})})]}):null,[j,h,b,d,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(xL,{children:[s.formatMessage({id:"desk.statistics.teams.chart.firstResponseTime"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.teams.chart.firstResponseTime.tooltip"})})]}),p?Object(W.jsx)(kL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),SL=Object(a.memo)(({teamId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),b=Object(a.useCallback)(async()=>{try{g(!0);const{data:a}=await Object(N.fetchStatsTicketDurationTimes)(r,l,{group:e,start_date:t,end_date:n,channel_type:i});u(a),m(null)}catch(e){m(c(e))}finally{g(!1)}},[r,l,e,t,n,i,c]);Object(a.useEffect)(()=>{b()},[b]);const j=Object(a.useMemo)(()=>d?[{data:d.labels.map((e,t)=>({x:e,y:d.durationTimes[t]}))}]:[{data:[]}],[d]),y=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:b}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("p",{className:"summary",children:[Object(W.jsx)("span",{className:"summary__title",children:s.formatMessage({id:"desk.statistics.agents.detail.lbl.average"})}),Object(W.jsx)("span",{className:"summary__value",children:p?"":Object(H.renderTimestring)(d.average)})]}),Object(W.jsx)(fb.g,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:j,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A,displayFormats:{day:"MMM Do"}}}],yAxes:[{ticks:{callback:e=>Object(H.renderTimestring)(e)}}]}},tooltipValueFormatter:({value:e})=>Object(H.renderTimestring)(null!=e?e:0),noPadding:!0})})]}):null,[d,j,h,b,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(xL,{children:[s.formatMessage({id:"desk.statistics.teams.chart.resolutionTime"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.teams.chart.resolutionTime.tooltip"})})]}),p?Object(W.jsx)(kL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):y]})}),EL=Object(a.memo)(({teamId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:d}=Object($.a)(),[u,p]=Object(a.useState)(void 0),[g,h]=Object(a.useState)(!1),[m,b]=Object(a.useState)(null),j=Object(a.useCallback)(async()=>{try{h(!0);const{data:a}=await Object(N.fetchHourlyAverageTicketCounts)(r,l,{group:e,start_date:t,end_date:n,channel_type:i});p(a),b(null)}catch(e){b(d(e))}finally{h(!1)}},[r,l,e,t,n,i,d]);Object(a.useEffect)(()=>{j()},[j]);const y=Object(a.useMemo)(()=>{if(!u)return[{data:[]}];const e=Array(24).fill(0).map((e,n)=>c()(t).set("hour",n).set("minute",0).set("second",0).tz("UTC").valueOf());return[{label:"",data:u.hourlyClosedTicketCount.map((t,n)=>({x:e[n],y:t}))}]},[u,t]),O=Object(a.useMemo)(()=>m?Object(W.jsx)(SR,{error:m,onRetry:j}):u?Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(fb.g,{children:Object(W.jsx)(MR,{datasets:y,selectedDateRange:`${c()(t,f.nb).format(f.x)} - ${c()(n,f.nb).format(f.x)}`})})}):null,[u,m,y,t,n,j]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(xL,{children:[s.formatMessage({id:"desk.statistics.teams.chart.closedTicketsPerHour"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.teams.chart.closedTicketsPerHour.tooltip"})})]}),g?Object(W.jsx)(kL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),IL=Object(a.memo)(({teamId:e,startDate:t,endDate:n,channelTypes:i})=>{const s=Object(E.a)(),{pid:r,region:l}=Object(L.a)(),{getErrorMessage:c}=Object($.a)(),[d,u]=Object(a.useState)(void 0),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)(null),f=Object(a.useCallback)(async()=>{try{g(!0);const{data:a}=await Object(N.fetchCSAT)(r,l,{group:e,start_date:t,end_date:n,channel_type:i});u(a),m(null)}catch(e){m(c(e))}finally{g(!1)}},[r,l,e,t,n,i,c]);Object(a.useEffect)(()=>{f()},[f]);const b=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.customerSatisfactionScoreCounts.map((e,t)=>e*(t+1)).reduce((e,t)=>e+t,0))?e:0},[d]),j=Object(a.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.customerSatisfactionScoreCounts.reduce((e,t)=>e+t,0))?e:0},[d]),y=Object(a.useMemo)(()=>b>0?b/j:0,[j,b]),O=Object(a.useMemo)(()=>h?Object(W.jsx)(SR,{error:h,onRetry:f}):d?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{className:"summary",children:p?"":Object(W.jsx)(fb.b,{value:y})}),Object(W.jsx)(fb.i,{labels:d.labels.map(e=>"1"===e?s.formatMessage({id:`desk.monitoring.csat.${e}star`}):s.formatMessage({id:`desk.monitoring.csat.${e}stars`})).reverse(),values:[...d.customerSatisfactionScoreCounts].reverse(),colors:{backgroundColors:jL,hoverBorderColors:yL},tooltip:{items:[{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responses"})},{label:s.formatMessage({id:"desk.statistics.overview.csat.lbl.responsesPercentage"}),valueFormatter:(e,t,n)=>`${Math.floor(e/t.filter((e,t)=>!n.includes(t)).reduce((e,t)=>e+t,0)*100)}%`,color:Object(o.cssVariables)("neutral-10")}]},centerLabelTop:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.top"}),centerLabelBottom:s.formatMessage({id:"desk.statistics.overview.csat.lbl.total.bottom"})},"desk_stats_chart_agent_csat")]}):null,[d,y,h,f,s,p]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(xL,{children:[s.formatMessage({id:"desk.statistics.teams.chart.csat"}),Object(W.jsx)(V.C,{content:s.formatMessage({id:"desk.statistics.teams.chart.csat.tooltip"})})]}),p?Object(W.jsx)(kL,{"data-test-id":"SpinnerContainer",children:Object(W.jsx)(o.Spinner,{})}):O]})}),ML=Object(a.memo)(({startDate:e,endDate:t,teamId:n,channelTypes:a})=>Object(W.jsx)("div",{"data-test-id":"DeskStatsAgent",children:Object(W.jsxs)(vL,{children:[Object(W.jsx)(_L,{children:Object(W.jsx)(wL,{teamId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(_L,{children:Object(W.jsx)(TL,{teamId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(_L,{children:Object(W.jsx)(SL,{teamId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(CL,{children:Object(W.jsx)(EL,{teamId:n,startDate:e,endDate:t,channelTypes:a})}),Object(W.jsx)(_L,{children:Object(W.jsx)(IL,{teamId:n,startDate:e,endDate:t,channelTypes:a})})]})})),DL=r.default.div.withConfig({displayName:"StatsTeamsTableView__TableHeader",componentId:"l5v2za-0"})(["display:flex;align-items:center;justify-content:center;svg{margin-left:4px;}"]),AL=Object(r.default)(V.Ub).withConfig({displayName:"StatsTeamsTableView__StyledPaginator",componentId:"l5v2za-1"})(["margin-left:auto;"]),NL=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"StatsTeamsTableView__TeamStatsTable",componentId:"l5v2za-2"})(["flex:1;"]),RL=({page:e,pageSize:t,updateParams:n,items:i,count:s,isFetching:r,sortOrder:l,sortBy:c})=>{const d=Object(E.a)(),u=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),p=Object(a.useCallback)((e,t)=>{n({page:e,pageSize:t})},[n]),g=Object(a.useCallback)((e,t)=>{e&&t&&n({sortBy:e.key,sortOrder:null!=t?t:f.Tb.DESCEND})},[n]),h=Object(a.useCallback)(e=>c===e?l:void 0,[c,l]);return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(NL,{rowKey:"id",columns:[{key:f.Zb.NAME,dataIndex:"groupName",title:d.formatMessage({id:"desk.statistics.teams.table.name"}),defaultSortOrder:h(f.Zb.NAME),sorter:!0,render:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Neutral,useReactRouter:!0,href:`?view=chart&team=${e.groupId}`,children:e.groupName})},{key:f.Zb.ASSIGNED_TICKETS,dataIndex:"groupAssignedTickets",title:Object(W.jsxs)(DL,{children:[d.formatMessage({id:"desk.statistics.teams.table.receivedTickets"}),Object(W.jsx)(V.qb,{content:d.formatMessage({id:"desk.statistics.teams.table.receivedTickets.tooltip"}),placement:"top"})]}),defaultSortOrder:h(f.Zb.ASSIGNED_TICKETS),sorter:!0,render:({groupAssignedTickets:e})=>IS()(e).format("0,0")},{key:f.Zb.CLOSED_TICKETS,dataIndex:"closedTicket",title:Object(W.jsxs)(DL,{children:[d.formatMessage({id:"desk.statistics.teams.table.closedTickets"}),Object(W.jsx)(V.qb,{content:d.formatMessage({id:"desk.statistics.teams.table.closedTickets.tooltip"}),placement:"top"})]}),defaultSortOrder:h(f.Zb.CLOSED_TICKETS),sorter:!0,render:({closedTicket:e})=>IS()(e).format("0,0")},{key:f.Zb.CSAT,dataIndex:"avgCustomerSatisfactionScore",title:Object(W.jsxs)(DL,{children:[d.formatMessage({id:"desk.statistics.teams.table.csat"}),Object(W.jsx)(V.qb,{content:d.formatMessage({id:"desk.statistics.teams.table.csat.tooltip"}),placement:"top"})]}),defaultSortOrder:h(f.Zb.CSAT),sorter:!0,render:({avgCustomerSatisfactionScore:e})=>Object(W.jsx)(V.lc,{score:e})},{key:f.Zb.RESPONSE_TIME,dataIndex:"avgResponseTime",title:Object(W.jsxs)(DL,{children:[d.formatMessage({id:"desk.statistics.teams.table.firstResponseTime"}),Object(W.jsx)(V.qb,{content:d.formatMessage({id:"desk.statistics.teams.table.firstResponseTime.tooltip"}),placement:"top"})]}),defaultSortOrder:h(f.Zb.RESPONSE_TIME),sorter:!0,render:({avgResponseTime:e})=>e?Object(H.renderTimestring)(e):f.Z},{key:f.Zb.RESOLUTION_TIME,dataIndex:"avgResolutionTime",title:Object(W.jsxs)(DL,{children:[d.formatMessage({id:"desk.statistics.teams.table.resolutionTime"}),Object(W.jsx)(V.qb,{content:d.formatMessage({id:"desk.statistics.teams.table.resolutionTime.tooltip"}),placement:"top"})]}),defaultSortOrder:h(f.Zb.RESOLUTION_TIME),sorter:!0,render:({avgResolutionTime:e})=>e?Object(H.renderTimestring)(e):f.Z}],dataSource:i,loading:r,showScrollbars:!0,onSortByUpdated:g,footer:Object(W.jsx)(AL,{current:e,total:s,pageSize:t,pageSizeOptions:f.E,onChange:u,onItemsPerPageChange:p})})})},PL=c()(),LL=r.default.div.withConfig({displayName:"StatsTeams__StyledTeamsStats",componentId:"kwh3ve-0"})(["",""],e=>e.isTableView&&Object(r.css)(["display:flex;flex-direction:column;flex:1;overflow-y:auto;"])),FL={page:1,pageSize:f.qb,view:"table",startDate:PL.clone().subtract(13,"days").format(f.nb),endDate:PL.clone().format(f.nb),sortBy:f.Zb.ASSIGNED_TICKETS,sortOrder:f.Tb.DESCEND,team:-1,channelTypes:[]},UL=Object(a.memo)(()=>{const e=Object(E.a)(),[t,n]=Object(a.useState)([]),[i,s]=Object(a.useState)(0),[r,l]=Object(a.useState)(!1),{pid:c,region:d}=Object(L.a)(),{getErrorMessage:u}=Object($.a)(),p=Object(B.a)(FL,{page:(e,t)=>"table"===t.view&&Ft(e),pageSize:(e,t)=>"table"===t.view&&Ut(e),view:e=>"table"===e||"chart"===e,startDate:(e,t)=>$t(e,t.endDate),endDate:(e,t)=>Bt(e,t.startDate),channelTypes:e=>Vt(e),sortBy:e=>zt(Object.values(f.Zb),e),sortOrder:e=>Ht(e)}),{page:g,pageSize:h,view:m,updateParams:b,startDate:j,endDate:y,channelTypes:O,team:v,sortBy:x,sortOrder:_}=p,C="number"==typeof v&&v>0?v:void 0,k=Object(a.useMemo)(()=>Kt(O),[O]),w=Object(a.useCallback)(async()=>{try{l(!0);const{data:e}=await Object(N.fetchStatsByTeams)(c,d,{start_date:j,end_date:y,limit:h,offset:(g-1)*h,channel_type:k,group:C,order:Object(H.getSorterParams)(x,_)});n(e.results),s(e.count)}catch(e){o.toast.error({message:u(e)})}finally{l(!1)}},[k,y,g,h,c,d,x,_,j,C]);Object(a.useEffect)(()=>{w()},[w]);const T=Object(a.useMemo)(()=>{if("chart"===m){if(!C)return;return[{name:e.formatMessage({id:"desk.statistics.teams.chart.closedTickets"}),filename:`sendbird_desk_reports_teams_${C}_closed_tickets`,exportAPI:N.exportTeamCloseTickets,apiPayload:{group:C}},{name:e.formatMessage({id:"desk.statistics.teams.chart.firstResponseTime"}),filename:`sendbird_desk_reports_teams_${C}_avg_first_response_time`,exportAPI:N.exportTeamAvgFirstResponseTime,apiPayload:{group:C}},{name:e.formatMessage({id:"desk.statistics.teams.chart.resolutionTime"}),filename:`sendbird_desk_reports_teams_${C}_avg_first_resolution_time`,exportAPI:N.exportTeamAvgFirstResolutionTime,apiPayload:{group:C}},{name:e.formatMessage({id:"desk.statistics.teams.chart.closedTicketsPerHour"}),filename:`sendbird_desk_reports_teams_${C}_avg_hourly_closed_tickets`,exportAPI:N.exportTeamAvgHourlyClosedTickets,apiPayload:{group:C}},{name:e.formatMessage({id:"desk.statistics.teams.chart.csat"}),filename:`sendbird_desk_reports_teams_${C}_csat`,exportAPI:N.exportTeamCSAT,apiPayload:{group:C}}]}return[{name:e.formatMessage({id:"desk.reports.export.customType.teamPerformance"}),filename:"sendbird_desk_reports_teams_performance",exportAPI:N.exportTeamPerformance}]},[e,C,m]),S=Object(a.useMemo)(()=>m&&"table"!==m?Object(W.jsx)(ML,{teamId:C,startDate:j,endDate:y,channelTypes:k}):Object(W.jsx)(RL,{page:g,pageSize:h,updateParams:b,items:t,count:i,isFetching:r,sortBy:x,sortOrder:_}),[k,y,r,g,h,x,_,j,i,C,t,b,m]);return Object(W.jsxs)(LL,{isTableView:"table"===m,children:[Object(W.jsx)(OP,{channelTypes:k,selectedGroupId:C,startDate:j,endDate:y,showTeams:!0,viewType:m,updateParams:b,exportReports:T}),S]})}),$L=Object(r.default)(V.Rb).withConfig({displayName:"statistics__StyledStatistics",componentId:"pmgikv-0"})(["",";display:flex;flex-direction:column;height:100%;"],Object(no.d)()),BL=Object(a.memo)(()=>{const e=Object(E.a)(),t=Object(s.k)(),n=Object(s.l)(),i=Object(s.n)(),r=Object(a.useMemo)(()=>n.pathname.startsWith(`${null==i?void 0:i.url}/overview`)?0:n.pathname.startsWith(`${null==i?void 0:i.url}/agents`)?1:n.pathname.startsWith(`${null==i?void 0:i.url}/teams`)?2:n.pathname.startsWith(`${null==i?void 0:i.url}/bots`)?3:0,[n.pathname,i]),o=Object(a.useCallback)(e=>{switch(e){case 0:return t.push(`${null==i?void 0:i.url}/overview`);case 1:return t.push(`${null==i?void 0:i.url}/agents`);case 2:return t.push(`${null==i?void 0:i.url}/teams`);case 3:return t.push(`${null==i?void 0:i.url}/bots`);default:return t.push(`${null==i?void 0:i.url}/overview`)}},[t,i]);return Object(W.jsxs)($L,{children:[Object(W.jsx)(V.Sb,{children:Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"desk.statistics.title"})})}),Object(W.jsx)(V.ec,{tabs:[{label:e.formatMessage({id:"desk.statistics.tab.overview"}),value:"OVERVIEW"},{label:e.formatMessage({id:"desk.statistics.tab.agents"}),value:"AGENTS"},{label:e.formatMessage({id:"desk.statistics.tab.teams"}),value:"TEAMS"},{label:e.formatMessage({id:"desk.statistics.tab.bots"}),value:"BOTS"}],activeTab:r,handleTabClick:o}),Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${null==i?void 0:i.url}/overview`,component:bL}),Object(W.jsx)(s.d,{path:`${null==i?void 0:i.url}/agents`,component:CP}),Object(W.jsx)(s.d,{path:`${null==i?void 0:i.url}/teams`,component:UL}),Object(W.jsx)(s.d,{path:`${null==i?void 0:i.url}/bots`,component:YP}),Object(W.jsx)(s.c,{to:`${null==i?void 0:i.url}/overview`})]})]})}),VL=r.default.div.withConfig({displayName:"ticketDetailBody__NotificationWrapper",componentId:"sc-3ukc9h-0"})(["width:100%;position:absolute;bottom:48px;padding:0 16px;"]),zL=r.default.div.withConfig({displayName:"ticketDetailBody__MessagesWrapper",componentId:"sc-3ukc9h-1"})(["position:relative;flex:1;min-height:0;"]),HL=i.a.memo(({ticket:e,isShownExportNotification:t,setIsShownExportNotification:n})=>{const i=Object(E.a)(),s=Object(b.f)(),{pid:l,region:c}=Object(L.a)(),d=Object(b.g)(e=>e.ticketDetail.initialOrNextFetchedTimestamp),u=Object(b.g)(e=>Object(Ua.m)(e)),p=Object(b.g)(e=>e.ticketDetail.isFetchingMessages),{getErrorMessage:g}=Object($.a)(),{ChatThreadGridItem:h,InformationSidebarGridItem:m}=Object(a.useContext)(Hn),{updateTicketInList:y}=Object(a.useContext)(Uc),O=so({ticket:e}),{id:v,channelType:x,channelUrl:_}=e,C=Object(a.useRef)(),k=Object(a.useRef)(null),w=Object(a.useRef)({ticketMessages:u,isFetchingMessages:p}),T=Object(a.useRef)(null),S=Object(a.useCallback)(e=>{C.current=e},[]),I=Object(P.U)({messageCount:u.length,scrollTo:Object(a.useCallback)(e=>{k.current&&k.current.scrollTo(e)},[])});Object(a.useEffect)(()=>{w.current={ticketMessages:u,isFetchingMessages:p}},[p,u]);const{apiMessages:M=[],socialTicketMessages:D=[]}=Object(a.useMemo)(()=>"SENDBIRD"===e.channelType||"SENDBIRD_JAVASCRIPT"===e.channelType||"SENDBIRD_IOS"===e.channelType||"SENDBIRD_ANDROID"===e.channelType?{apiMessages:u}:{socialTicketMessages:u},[e.channelType,u]),A=Object(a.useCallback)(({socialTicketMessages:t,isPrev:n})=>{const a=n?0:t.length-1,i=t.length>0;switch(e.channelType){case"INSTAGRAM_COMMENT":return i?t[a].instagramComment.timestamp:0;default:return i?t[a].timestamp:0}},[e.channelType]),R=Object(a.useCallback)(()=>{const{isFetchingMessages:t,ticketMessages:n}=w.current;if(!t)switch(I(k.current&&k.current.findFirstMessageNode()),e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":{const t=n;return void s(j.d.fetchTicketDetailMessagesRequest({ticketId:e.id,channelType:e.channelType,types:"prev",channelUrl:e.channelUrl,messageTs:t.length>0?t[0].created_at:0,prevLimit:50,nextLimit:0,presignedFileUrl:O}))}case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":{const t=n;return void s(j.d.fetchTicketDetailMessagesRequest({channelType:e.channelType,types:"prev",ticketId:e.id,messageTs:A({socialTicketMessages:t,isPrev:!0}),prevLimit:50,nextLimit:0,presignedFileUrl:O}))}default:throw new Error(`Undefined TicketChannelType: ${e.channelType}`)}},[s,A,O,I,e.channelType,e.channelUrl,e.id]),F=Object(a.useCallback)(()=>{switch(e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":s(j.d.fetchTicketDetailMessagesRequest({ticketId:e.id,channelType:e.channelType,types:"next",channelUrl:e.channelUrl,messageTs:M.length>0?M[M.length-1].created_at:0,prevLimit:0,nextLimit:50,presignedFileUrl:O}));break;case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":s(j.d.fetchTicketDetailMessagesRequest({channelType:e.channelType,types:"next",ticketId:e.id,messageTs:A({socialTicketMessages:D,isPrev:!1}),prevLimit:0,nextLimit:50,presignedFileUrl:O}));break;default:throw new Error(`Undefined TicketChannelType: ${e.channelType}`)}s(j.d.fetchTicketDetailHeaderRequest(e.id))},[e.channelType,e.id,e.channelUrl,s,M,O,A,D]),U=Object(a.useCallback)(async t=>{const n=M.find(e=>e.message_id===t);if(n){const t={...n,is_removed:!0};s(j.d.updateTicketDetailSendbirdAPIMessage(t));try{const{data:t}=await Object(N.fetchTicket)(l,c,{ticketId:e.id});y(t)}catch(e){o.toast.error({message:g(e)})}}},[M,s,g,l,c,e.id,y]);Object(P.C)(e.status2===f.jc.CLOSED?void 0:F,5e3),Object(a.useEffect)(()=>{switch(x){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":return void s(j.d.fetchTicketDetailMessagesRequest({ticketId:v,channelType:x,types:"initial",channelUrl:_,messageTs:(new Date).valueOf(),prevLimit:50,nextLimit:0,presignedFileUrl:O}));case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":return void s(j.d.fetchTicketDetailMessagesRequest({ticketId:v,channelType:x,types:"initial",messageTs:(new Date).valueOf(),prevLimit:50,nextLimit:0,presignedFileUrl:O}));default:throw new Error(`Undefined TicketChannelType: ${x}`)}},[v,x,_,s,O]);const B=Object(a.useMemo)(()=>{switch(e.channelType){case"SENDBIRD_JAVASCRIPT":case"SENDBIRD_IOS":case"SENDBIRD_ANDROID":case"SENDBIRD":return Object(W.jsx)(tc,{ref:k,ticket:e,messagesMode:f.Q.PLATFORM_API,messages:M,initialOrNextFetchedTimestamp:d,fetchMessagesPrev:R,onDeleteMessage:U});case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":case"INSTAGRAM_COMMENT":case"WHATSAPP_MESSAGE":return Object(W.jsx)(Cc,{ref:k,origin:"detail",ticket:e,messages:D,fetchMessagesPrev:R,initialOrNextFetchedTimestamp:d});default:throw new Error(`Undefined TicketChannelType: ${e.channelType}`)}},[M,R,U,d,D,e]),V=Object(a.useCallback)(()=>{n(!1)},[n]);return Object(W.jsx)(Mo.Provider,{value:T.current||void 0,children:Object(W.jsxs)(fo.Provider,{value:{ref:C,updateRef:S},children:[Object(W.jsxs)(h,{styles:Object(r.css)(["display:flex;flex-direction:column;position:relative;z-index:0;overflow:hidden;"]),children:[Object(W.jsx)(za,{}),Object(W.jsx)(zL,{ref:T,children:B}),t&&Object(W.jsx)(VL,{children:Object(W.jsx)(o.InlineNotification,{type:"info",message:i.formatMessage({id:"desk.dataExport.notification.dataExport.start"},{link:Object(W.jsx)(pe.Link,{to:"../data_exports",children:i.formatMessage({id:"desk.dataExport.title"})})}),onClose:V})})]}),Object(W.jsx)(m,{children:Object(W.jsx)(ed,{hasLinkToDetail:!0,ticket:e})})]})})}),qL={showDialogsRequest:j.b.showDialogsRequest,fetchTicketDetailTicketRequest:j.d.fetchTicketDetailTicketRequest,moveTicketToIdleRequest:j.d.moveTicketToIdleRequest,resetTicketDetail:j.d.resetTicketDetail},GL=r.default.div.withConfig({displayName:"ticketDetail__TicketDetailBodyPlaceholder",componentId:"pj2is4-0"})(["background-color:white;grid-row:top / bottom;grid-column:chat-thread-start / iframe-sidebar;"]),WL=i.a.memo(({ticketId:e,desk:t,project:n,isFetching:i,isFetchingMessages:s,ticket:r,fetchTicketDetailTicketRequest:l,moveTicketToIdleRequest:c,resetTicketDetail:d,showDialogsRequest:u,isShownExportNotification:p,setIsShownExportNotification:g})=>{var h,m;const f=Object(E.a)(),y=Object(b.f)(),{updateTicketInList:O}=Object(a.useContext)(Uc);Object(a.useEffect)(()=>(l(Number(e)),()=>{d()}),[l,d,e]);const v=Object(a.useRef)();Object(a.useEffect)(()=>{v.current=r},[r]);const x=Object(a.useCallback)(({action:e,agent:t,group:n})=>{if(v.current)switch(e){case"TRANSFER_TO_AGENT":case"ASSIGN_TO_AGENT":{const n="TRANSFER_TO_AGENT"===e?"TRANSFER":"ASSIGN",a="TRANSFER_TO_AGENT"===e?e=>{v.current&&(O(v.current,{recentAssignment:e}),o.toast.success({message:Object(W.jsx)($a.a,{action:$a.b.TRANSFERRED_TO_AGENT,ticketChannelName:v.current.channelName})}))}:e=>{O(e),o.toast.success({message:Object(W.jsx)($a.a,{action:$a.b.ASSIGNED,ticketChannelName:e.channelName})})};return void u({dialogTypes:A.a.AssignTransferTicketToAgent,dialogProps:{mode:n,ticket:v.current,agent:t,origin:"detail",onSuccess:a}})}case"CLOSE_TICKET":return void u({dialogTypes:A.a.CloseTicket,dialogProps:{ticket:v.current,origin:"detail",onSuccess:e=>{O(e),o.toast.success({message:Object(W.jsx)($a.a,{action:$a.b.CLOSED,ticketChannelName:e.channelName})})}}});case"MOVE_TO_IN_PROGRESS":return void u({dialogTypes:A.a.Confirm,dialogProps:{title:f.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.inProgress"}),description:f.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.inProgress.descForNoRedirecting"},{b:e=>Object(W.jsx)("b",{children:e}),tickets:f.formatMessage({id:"desk.tickets.header.title"}),yours:f.formatMessage({id:"desk.tickets.header.title.conversation"})}),confirmText:f.formatMessage({id:"desk.dialogs.button.ok"}),cancelText:f.formatMessage({id:"desk.dialogs.button.cancel"}),onConfirm:()=>{v.current&&y(j.d.moveTicketToWIPRequest(v.current))}}});case"MOVE_TO_IDLE":return void u({dialogTypes:A.a.Confirm,dialogProps:{title:f.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle"}),description:"",confirmText:f.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.confirm"}),cancelText:f.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.cancel"}),onConfirm:()=>{v.current&&c({ticket:v.current,origin:"detail",onSuccess:e=>{v.current&&O(v.current,{recentAssignment:e})}})}}});case"REOPEN_TICKET":return void u({dialogTypes:A.a.ReopenTicket,dialogProps:{ticket:v.current,onSuccess:e=>{O(e)}}});case"ASSIGN_TICKET_TO_MYSELF":return void u({dialogTypes:A.a.Confirm,dialogProps:{title:f.formatMessage({id:"desk.assignTicketToMyself.dialog.title"}),description:f.formatMessage({id:"desk.assignTicketToMyself.dialog.description"}),confirmText:f.formatMessage({id:"desk.assignTicketToMyself.dialog.button.confirm"}),cancelText:f.formatMessage({id:"desk.assignTicketToMyself.dialog.button.cancel"}),onConfirm:()=>{v.current&&y(j.d.assignTicketToMyselfRequest(v.current))}}});case"TRANSFER_TO_GROUP":return void u({dialogTypes:A.a.AssignTransferTicketToGroup,dialogProps:{mode:"TRANSFER",ticket:v.current,group:n,origin:"detail",onSuccess:e=>{O(e)}}});case"EXPORT_TICKET":return void u({dialogTypes:A.a.ExportTicket,dialogProps:{ticketID:v.current.id,onSuccess:()=>{g(!0)}}});default:return}},[y,f,c,g,u,O]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ps,{isFetching:i,project:n,agent:t.agent,ticket:r,handleActionChange:x},null!=(h=null==r?void 0:r.id)?h:""),s?Object(W.jsx)(V.cc,{transparent:!0}):"",r?Object(W.jsx)(HL,{ticket:r,isShownExportNotification:p,setIsShownExportNotification:g}):Object(W.jsx)(GL,{}),Object(W.jsx)(ni,{ticketId:null!=(m=Number(e))?m:void 0})]})}),KL=Object(b.d)((e,t)=>{const{isFetching:n,isFetchingMessages:a,ticket:i}=e.ticketDetail;return{desk:e.desk,project:e.desk.project,isFetching:n,isFetchingMessages:a,ticket:i,...t}},qL)(WL),YL=Object(a.createContext)(void 0),QL=({children:e})=>{const{pid:t,region:n}=Object(L.a)(),{getErrorMessage:i}=Object($.a)(),[s,r]=Object(a.useState)("init"),l=Object(P.L)(s),c=Object(a.useRef)(0),[d,u]=Object(a.useState)([]),p=d.length<c.current,g=Object(a.useCallback)(async(e=0)=>{if("loading"!==l.current){r("loading");try{const{data:{results:a,count:i}}=await Object(N.getProjectTags)(t,n,{limit:20,offset:e});c.current=i,u(e=>e.concat(a))}catch(e){o.toast.error({message:i(e)})}finally{r("idle")}}},[i,l,t,n]),h=Object(a.useCallback)(()=>{p&&g(d.length)},[p,g,d.length]);return Object(a.useEffect)(()=>{g()},[g]),Object(W.jsx)(YL.Provider,{value:{status:s,tags:d,loadMoreTags:h,hasNext:p},children:e})},JL=r.default.div.withConfig({displayName:"TicketTagMultiSelectDropdown__ToggleContent",componentId:"sc-173k5os-0"})(["height:30px;",";line-height:30px;text-align:left;margin-left:8px;margin-right:4px;"],o.Subtitles["subtitle-01"]),XL=r.default.div.withConfig({displayName:"TicketTagMultiSelectDropdown__PrefixItemWrapper",componentId:"sc-173k5os-1"})(["padding:6px 0;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),ZL=r.default.div.withConfig({displayName:"TicketTagMultiSelectDropdown__AllTagsMenuItem",componentId:"sc-173k5os-2"})(["display:flex;align-items:center;justify-content:space-between;min-width:208px;height:32px;padding:0 16px;",";color:",";cursor:pointer;&:hover,&:focus{background:",";}"],o.Subtitles["subtitle-01"],({checked:e})=>e?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-1")),eF=({id:e,name:t})=>({key:String(e),label:t,value:String(e)}),tF=({tag:e,treeData:t})=>String(e.id)===t.value;var nF=Object(r.default)("div").withConfig({displayName:"TicketTagMultiSelectDropdown___StyledDiv",componentId:"sc-173k5os-3"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]);const aF=Object(a.forwardRef)(({children:e,tooltipPortalId:t},n)=>{const[i,s]=Object(a.useState)(!1);return Object(W.jsx)(o.Tooltip,{content:e,tooltipContentStyle:"word-break: break-word;",trigger:i?o.TooltipTrigger.Hover:o.TooltipTrigger.Manual,portalId:t,children:Object(W.jsx)(nF,{ref:e=>{s(!!e&&e.scrollWidth>e.clientWidth),n&&("function"==typeof n?n(e):n.current=e)},children:e})})});var iF=Object(r.default)(o.TreeSelect).withConfig({displayName:"TicketTagMultiSelectDropdown___StyledTreeSelect",componentId:"sc-173k5os-4"})(["",""],e=>e._css);const sF=({maxWidth:e,selectedItems:t,onChange:n,disabled:i,className:s,tooltipPortalId:l="TicketTagMultiSelectDropdownTooltip"})=>{const c=Object(E.a)(),{tags:d,status:u,loadMoreTags:p,hasNext:g}=Object(a.useContext)(YL),h="loading"===u,m=Object(a.useRef)(null),f=Object(a.useRef)(null),b=i||h&&0===d.length,j=Object(a.useMemo)(()=>d.map(eF),[d]),y=Object(P.L)(()=>{var e,t;g?h||p():null==(e=f.current)||null==(t=e.observer)||t.disconnect()}),O=Object(a.useMemo)(()=>j.filter(e=>t.some(t=>tF({tag:t,treeData:e}))),[t,j]),v=Object(a.useCallback)(e=>{n(d.filter(t=>e.some(e=>tF({tag:t,treeData:e}))))},[d,n]),x=0===t.length,_=Object(a.useMemo)(()=>Object(W.jsx)(XL,{children:Object(W.jsxs)(ZL,{checked:x,onClick:()=>{x||n([])},children:[c.formatMessage({id:"desk.tickets.filter.tag.allTags"}),x&&Object(W.jsx)(o.Icon,{icon:"done",size:20,color:Object(o.cssVariables)("purple-7")})]})}),[c,x,n]),C=Object(a.useMemo)(()=>x?()=>Object(W.jsx)(JL,{children:c.formatMessage({id:"desk.tickets.filter.tag.allTags"})}):void 0,[c,x]),k=e=>{var t;const n=null==(t=f.current)?void 0:t.observer;n&&m.current!==e&&(m.current&&n.unobserve(m.current),e&&n.observe(e),m.current=e)};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(iF,{menuRef:e=>{var t;if((null==(t=f.current)?void 0:t.menu)!==e){var n,a;if(null==(n=f.current)||null==(a=n.observer)||a.disconnect(),null==e)return void(f.current=null);const t=new IntersectionObserver(([e])=>{e.isIntersecting&&y.current()},{root:e});m.current&&t.observe(m.current),f.current={menu:e,observer:t}}},className:s,disabled:b,treeData:j,width:null==e?"100%":void 0,selectedNodes:O,selectedNodeMaxWidth:144,onSelect:v,toggleRenderer:C,nodeToElement:({label:e,key:t})=>{var n;const a=t===(null==(n=j[j.length-5])?void 0:n.key);return Object(W.jsx)(aF,{ref:a?k:void 0,tooltipPortalId:l,children:e})},prefixItem:_,_css:null==e?void 0:Object(r.css)(["max-width:","px;[role='option']{max-width:","px;}"],e,e)}),Object(W.jsx)("div",{id:l})]})},rF=r.default.p.withConfig({displayName:"contractedTicketFilter__Header",componentId:"sc-21z2qt-0"})(["font-size:14px;font-weight:600;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),oF=r.default.p.withConfig({displayName:"contractedTicketFilter__FilterTitle",componentId:"sc-21z2qt-1"})(["margin-top:22px;margin-bottom:6px;",";color:",";"],o.Typography["label-02"],Object(o.cssVariables)("neutral-7")),lF=r.default.div.withConfig({displayName:"contractedTicketFilter__FilteredItem",componentId:"sc-21z2qt-2"})(["display:flex;align-items:center;width:100%;font-size:14px;font-weight:500;line-height:1.43;color:",";transition:color 0.3s ",";"],e=>e.isFilterOpen?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10"),o.transitionDefault),cF=r.default.div.withConfig({displayName:"contractedTicketFilter__FilterLabelWrapper",componentId:"sc-21z2qt-3"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;height:32px;padding:4px 20px;",""],e=>e.isSelectedItem?Object(r.css)(["background:",";"],Object(o.cssVariables)("neutral-1")):""),dF=r.default.span.withConfig({displayName:"contractedTicketFilter__FilterLabel",componentId:"sc-21z2qt-4"})(["font-size:14px;font-weight:500;line-height:1.14;color:",";"],e=>e.isSelectedItem?Object(o.cssVariables)("purple-7"):Object(o.cssVariables)("neutral-10")),uF=Object(r.default)(o.Button).withConfig({displayName:"contractedTicketFilter__UpdateButton",componentId:"sc-21z2qt-5"})(["flex:none;margin-top:32px;margin-bottom:16px;"]),pF=Object(r.css)(["height:32px;display:flex;flex-direction:row;padding:6px 8px 6px 12px;align-items:center;height:32px;border:1px solid ",";border-radius:4px;outline:none;transition:0.3s ",";"," &:hover{border-color:",";> div{color:",";}}"],Object(o.cssVariables)("neutral-3"),o.transitionDefault,e=>e.isOpen?Object(r.css)(["background:",";border-color:",";color:",";"],Object(o.cssVariables)("purple-2"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")):"",Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")),gF=r.default.div.withConfig({displayName:"contractedTicketFilter__CTLChannelTypeFilterWrapper",componentId:"sc-21z2qt-6"})(["& > div{width:100%;}"]),hF=[{label:"All tickets",value:f.jc.ALL},{label:"Pending",value:f.jc.PENDING},{label:"Active",value:f.jc.ACTIVE},{label:"Idle",value:f.jc.IDLE},{label:"In progress",value:f.jc.WIP},{label:"Closed",value:f.jc.CLOSED}],mF=i.a.memo(({currentStatus:e,selectStatus:t,isFilterOpen:n,handleFilterOpen:a})=>{const i=Object(E.a)(),s=hF.find(t=>t.value===e);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(oF,{children:i.formatMessage({id:"desk.tickets.filter.status"})}),Object(W.jsx)(V.Y,{placement:"bottom-start",items:hF.map(n=>{const a=n.value===e;return{label:Object(W.jsxs)(cF,{isSelectedItem:a,children:[Object(W.jsx)(dF,{isSelectedItem:a,children:i.formatMessage({id:`desk.tickets.filter.status.${n.value}`})}),a?Object(W.jsx)(o.Icon,{icon:"done",size:16,color:Object(o.cssVariables)("purple-6")}):""]},n.value),onClick:()=>{t(n.value)}}}),target:Object(W.jsx)(lF,{isFilterOpen:n,children:i.formatMessage({id:`desk.tickets.filter.status.${null==s?void 0:s.value}`})}),showArrow:!0,onOpen:a({filterName:"status",isOpen:!0}),onClose:a({filterName:"status",isOpen:!1}),styles:{DropdownTarget:pF,DropdownItem:Object(r.css)(["padding:0;&:hover{background:",";}> div{width:100%;}"],Object(o.cssVariables)("neutral-1"))}})]})}),fF=({currentAssignee:e,selectAssignee:t})=>{const n=Object(E.a)();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(oF,{children:n.formatMessage({id:"desk.tickets.filter.assignee"})}),Object(W.jsx)(Dj,{isBlock:!0,selectedItem:(null==e?void 0:e.agent)||(null==e?void 0:e.team)||null,onChange:(e,n)=>{t(null!=e?"agent"!==n?{team:e}:{agent:e}:void 0)}})]})},bF=i.a.memo(({currentChannelTypes:e,selectChannelType:t})=>{const n=Object(E.a)();return Object(W.jsxs)(gF,{children:[Object(W.jsx)(oF,{children:n.formatMessage({id:"desk.tickets.filter.channelType"})}),Object(W.jsx)(V.mc,{channelTypes:e,width:"100%",onSelect:e=>{t(e)}})]})}),jF=({currentDate:e,selectDate:t})=>{const n=Object(E.a)();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(oF,{children:n.formatMessage({id:"desk.tickets.filter.date"})}),Object(W.jsx)(V.Kb,{placement:"bottom-start",value:(null==e?void 0:e.value)||o.DateRangePickerValue.AllDates,dateRange:null==e?void 0:e.range,onChange:(e,n)=>{n&&t({range:n,value:e})},fullWidth:!0,maximumNights:92,size:"small",dayPickerProps:{positionFixed:!0,modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}}})]})};var yF=Object(r.default)(o.IconButton).withConfig({displayName:"contractedTicketFilter___StyledIconButton",componentId:"sc-21z2qt-7"})(["transform:translateX(8px);"]),OF=Object(r.default)(o.ScrollBar).withConfig({displayName:"contractedTicketFilter___StyledScrollBar",componentId:"sc-21z2qt-8"})(["display:flex;position:relative;flex-direction:column;padding:4px 16px;"]);const vF=({handleClose:e})=>{const{TicketSidebarHeaderGridItem:t,TicketSidebarFooterlessBodyGridItem:n}=Object(a.useContext)(Hn),{assignee:i,channelTypes:s,dateRange:o,ticketStatus:l,tags:c,priority:d,setTags:u,setPriority:p,setChannelTypes:g,setAssignee:h,setTicketStatus:m,setDateRange:f}=Object(a.useContext)(Uc),[b,j]=Object(a.useState)(!1),[y,O]=Object(a.useState)(!1),[v,x]=Object(a.useState)(l),[_,C]=Object(a.useState)(i),[k,w]=Object(a.useState)(s),[T,S]=Object(a.useState)(c),[I,M]=Object(a.useState)(d),[D,A]=Object(a.useState)(o),N=Object(E.a)(),R=({filterName:e,isOpen:t})=>()=>{switch(e){case"status":j(t);break;case"date":O(t)}};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(t,{styles:Object(r.css)(["z-index:1000;position:relative;display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:0 16px;"]),children:[Object(W.jsx)(rF,{children:N.formatMessage({id:"desk.tickets.contractedTicketList.filter.title"})}),Object(W.jsx)(yF,{icon:"close",buttonType:"secondary",size:"small",onClick:e})]}),Object(W.jsx)(n,{styles:"z-index: 1000;",children:Object(W.jsxs)(OF,{children:[Object(W.jsx)(mF,{currentStatus:v,selectStatus:x,isFilterOpen:b,handleFilterOpen:R}),Object(W.jsx)(bF,{currentChannelTypes:k,selectChannelType:w}),Object(W.jsx)(fF,{currentAssignee:_,selectAssignee:C}),Object(W.jsx)(oF,{children:N.formatMessage({id:"desk.tickets.filter.priority"})}),Object(W.jsx)(Rj,{selectedItem:I,onChange:M,width:"100%"}),Object(W.jsx)(oF,{children:N.formatMessage({id:"desk.tickets.filter.tag"})}),Object(W.jsx)(sF,{selectedItems:T,onChange:S}),Object(W.jsx)(jF,{currentDate:D,selectDate:A,isFilterOpen:y,handleFilterOpen:R}),Object(W.jsx)(uF,{buttonType:"primary",size:"small",onClick:()=>{m(v),g(k),h(_),f(D),u(T),p(I),e()},children:N.formatMessage({id:"desk.tickets.contractedTicketList.filter.btn.apply"})})]})})]})},xF=Object(r.default)(Tl.a).withConfig({displayName:"contractedTicketItem__ProfileImage",componentId:"ujmubm-0"})(["flex:none;margin-right:12px;"]),_F=r.default.div.withConfig({displayName:"contractedTicketItem__TicketInformation",componentId:"ujmubm-1"})(["width:100%;display:flex;flex-direction:column;"]),CF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketTop",componentId:"ujmubm-2"})(["display:flex;"]),kF=r.default.div.withConfig({displayName:"contractedTicketItem__AdditionalInformation",componentId:"ujmubm-3"})(["min-width:40px;display:flex;justify-content:space-between;align-items:flex-end;flex-direction:column;font-size:14px;"]),wF=r.default.div.withConfig({displayName:"contractedTicketItem__BasicInformation",componentId:"ujmubm-4"})(["display:flex;justify-content:space-between;flex-direction:column;flex:1;min-width:0;padding-right:16px;"]),TF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketName",componentId:"ujmubm-5"})(["max-width:248px;flex:1;display:flex;align-items:center;"]),SF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketNameText",componentId:"ujmubm-6"})(["font-size:14px;line-height:20px;font-weight:500;color:",";flex:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;"],Object(o.cssVariables)("neutral-10")),EF=r.default.div.withConfig({displayName:"contractedTicketItem__SocialIcon",componentId:"ujmubm-7"})(["width:16px;margin-right:8px;"]),IF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketCustomer",componentId:"ujmubm-8"})(["display:flex;align-items:center;font-size:12px;line-height:16px;color:",";height:20px;"],Object(o.cssVariables)("neutral-7")),MF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketBottom",componentId:"ujmubm-9"})(["display:flex;flex-direction:row;align-items:baseline;width:100%;max-width:100%;margin-top:6px;"]),DF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketLastMessage",componentId:"ujmubm-10"})(["flex:1;font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";margin-right:12px;min-width:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;"],({$isRemoved:e})=>Object(o.cssVariables)(e?"neutral-6":"neutral-10")),AF=r.default.div.withConfig({displayName:"contractedTicketItem__LastUpdatedAt",componentId:"ujmubm-11"})(["display:flex;align-items:center;flex:none;height:20px;font-size:12px;line-height:16px;color:",";"],Object(o.cssVariables)("neutral-7")),NF=r.default.div.withConfig({displayName:"contractedTicketItem__TicketAction",componentId:"ujmubm-12"})(["position:absolute;top:12px;right:16px;"]),RF=r.default.div.withConfig({displayName:"contractedTicketItem__AssigneeName",componentId:"ujmubm-13"})(["font-size:12px;"]),PF=r.default.div.withConfig({displayName:"contractedTicketItem__SelectedItem",componentId:"ujmubm-14"})(["display:flex;flex-direction:column;justify-content:center;height:20px;"]),LF=r.default.div.withConfig({displayName:"contractedTicketItem__StyledContractedTicketItem",componentId:"ujmubm-15"})(["position:relative;display:flex;flex-direction:column;align-items:flex-start;max-width:100%;height:88px;padding:12px 16px 10px;border-bottom:1px solid ",";transition:0.2s ",";transition-property:background-color,box-shadow;&:hover{cursor:pointer;background-color:",";}",";&:last-child{border-bottom:none;}"],Object(o.cssVariables)("neutral-3"),o.transitionDefault,Object(o.cssVariables)("neutral-2"),e=>e.isActive&&Object(r.css)(["background-color:",";box-shadow:inset 2px 0 ",",0 -1px 0 0 ",";border-bottom:0;"," svg{fill:",";}","{color:",";font-weight:600;}"],Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("neutral-1"),TF,Object(o.cssVariables)("purple-7"),SF,Object(o.cssVariables)("purple-7"))),FF=r.default.div.withConfig({displayName:"contractedTicketItem__PriorityWrapper",componentId:"ujmubm-16"})(["display:flex;align-items:center;height:20px;font-size:12px;"]),UF=r.default.div.withConfig({displayName:"contractedTicketItem__CSATContainer",componentId:"ujmubm-17"})(["display:flex;align-items:center;font-size:14px;"]),$F=Object(r.default)(o.Icon).withConfig({displayName:"contractedTicketItem__Star",componentId:"ujmubm-18"})(["margin-right:4px;"]),BF=({ticket:e,isActive:t=!1,handleTicketClick:n,handleTicketItemActionChange:i,selectedFilter:s})=>{var r;const l=Object(E.a)(),c=Object(a.useRef)(null),[d,u]=Object(a.useState)(!1),p=Object(a.useMemo)(()=>{const t=[],n=[{label:l.formatMessage({id:"desk.tickets.action.lbl.exportToCSV"}),onClick:()=>{i({action:"EXPORT_TICKET",ticket:e})}},{label:l.formatMessage({id:"desk.tickets.action.lbl.copyUrl"}),onClick:()=>{vi()(Object(H.getTicketURL)(e.id,!0)),o.toast.success({message:l.formatMessage({id:"desk.tickets.action.lbl.copyUrl.success"})})}}];return e.status2===f.jc.CLOSED?t.push({label:l.formatMessage({id:"label.reopenTicket"}),onClick:()=>{i({action:"REOPEN_TICKET",ticket:e})}}):(e.recentAssignment?t.push({label:l.formatMessage({id:"desk.tickets.action.transfer.lbl.toAgent"}),onClick:()=>{i({action:"TRANSFER_TO_AGENT",ticket:e})}}):t.push({label:l.formatMessage({id:"desk.tickets.action.assign.lbl.toAgent"}),onClick:()=>{i({action:"ASSIGN_TO_AGENT",ticket:e})}}),e.group&&t.push({label:l.formatMessage({id:"desk.tickets.action.group.lbl.transferToGroup"}),onClick:()=>{i({action:"TRANSFER_TO_GROUP",ticket:e})}}),t.push(o.OverflowMenu.divider),e.status2!==f.jc.ACTIVE&&e.status2!==f.jc.IDLE||t.push({label:l.formatMessage({id:"label.closeTicket"}),onClick:()=>{i({action:"CLOSE_TICKET",ticket:e})}})),[...t,...n]},[i,l,e]),g=(()=>{switch(e.channelType){case"FACEBOOK_CONVERSATION":case"FACEBOOK_FEED":return Object(W.jsx)(o.Icon,{icon:"facebook",size:16,color:Object(o.cssVariables)("neutral-6")});case"TWITTER_DIRECT_MESSAGE_EVENT":case"TWITTER_STATUS":return Object(W.jsx)(o.Icon,{icon:"twitter",size:16,color:Object(o.cssVariables)("neutral-6")});case"INSTAGRAM_COMMENT":return Object(W.jsx)(o.Icon,{icon:"instagram",size:16,color:Object(o.cssVariables)("neutral-6")});case"WHATSAPP_MESSAGE":return Object(W.jsx)(o.Icon,{icon:"whatsapp",size:16,color:Object(o.cssVariables)("neutral-7")});default:return null}})(),h=Object(a.useMemo)(()=>e.lastMessageIsRemoved?l.formatMessage({id:"desk.conversation.ticketList.lastMessage.deleted"}):e.lastMessage,[l,e.lastMessage,e.lastMessageIsRemoved]),m=Object(a.useCallback)(()=>{u(!0)},[]),b=Object(a.useCallback)(()=>{u(!1)},[]),j=Object(a.useMemo)(()=>{var t;switch(s){case G.L.PRIORITY:return Object(W.jsx)(FF,{children:Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0})});case G.L.CSAT:return e.customerSatisfactionScore?Object(W.jsxs)(UF,{children:[Object(W.jsx)($F,{icon:"star-filled",size:12,color:Object(o.cssVariables)("yellow-5")},"base_star"),Object(W.jsx)("div",{children:e.customerSatisfactionScore})]}):f.Z;case G.L.ASSIGNEE:return null!=(t=e.recentAssignment)&&t.agent?Object(W.jsx)(RF,{children:e.recentAssignment.agent.displayName}):Object(W.jsx)("span",{children:f.Z});case G.L.TEAM:return e.group?Object(W.jsx)(o.Tag,{maxWidth:120,children:e.group.name}):Object(W.jsx)("span",{children:f.Z});default:return null}},[s,e]),y=Object(lh.a)();return Object(W.jsx)(LF,{ref:c,onMouseLeave:b,onMouseOver:m,isActive:t,onClick:n(e),children:Object(W.jsxs)(_F,{children:[Object(W.jsxs)(CF,{children:[Object(W.jsx)(xF,{size:"xmedium",profileID:e.customer.id,imageUrl:e.customer.photoThumbnailUrl||`${f.n}/desk/thumbnail-member-0${Object(H.getRandomNumber)(e.channelUrl,3)}.svg`}),Object(W.jsxs)(wF,{children:[Object(W.jsxs)(TF,{children:[g?Object(W.jsx)(EF,{children:g}):"",Object(W.jsx)(SF,{title:e.channelName,children:e.channelName})]}),Object(W.jsx)(IF,{children:e.customer.displayName})]}),Object(W.jsx)(kF,{children:d?Object(W.jsx)(NF,{children:Object(W.jsx)(o.OverflowMenu,{items:p,stopClickEventPropagation:!0,popperProps:{modifiers:{flip:{boundariesElement:(null==(r=c.current)?void 0:r.parentElement)||void 0}}}})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(AF,{children:e.lastMessageAt&&y(new Date(e.lastMessageAt),{withoutSuffix:!0})}),Object(W.jsx)(PF,{children:j})]})})]}),Object(W.jsxs)(MF,{children:[Object(W.jsx)(DF,{$isRemoved:e.lastMessageIsRemoved,children:h}),Object(W.jsx)(V.qc,{ticketStatus:e.status2})]})]})})},VF=r.default.div.withConfig({displayName:"contractedTicketList__CTLHeaderContainer",componentId:"qh9p38-0"})(["display:flex;flex:1;align-items:center;position:relative;height:100%;"]),zF=r.default.div.withConfig({displayName:"contractedTicketList__CTLBackFilter",componentId:"qh9p38-1"})(["display:flex;align-items:center;"]),HF=r.default.div.withConfig({displayName:"contractedTicketList__CTLRefresh",componentId:"qh9p38-2"})(["padding-right:8px;"]),qF=r.default.div.withConfig({displayName:"contractedTicketList__CTLRefreshWrapper",componentId:"qh9p38-3"})(["display:flex;justify-content:flex-end;border-radius:4px;"]),GF=r.default.div.withConfig({displayName:"contractedTicketList__CTLFilter",componentId:"qh9p38-4"})(["display:flex;flex:1;justify-content:flex-end;margin-right:8px;"]),WF=Object(r.default)(o.IconButton).withConfig({displayName:"contractedTicketList__CTLFilterWrapper",componentId:"qh9p38-5"})([""]),KF=r.default.div.withConfig({displayName:"contractedTicketList__Sorter",componentId:"qh9p38-6"})(["display:flex;align-items:center;height:40px;margin-left:-8px;border-bottom:1px solid ",";padding:0 16px;button[type='button']{& > div{font-weight:500;}}"],Object(o.cssVariables)("neutral-3")),YF=r.default.div.withConfig({displayName:"contractedTicketList__SortIndicatorWrapper",componentId:"qh9p38-7"})(["cursor:pointer;"]),QF=r.default.div.withConfig({displayName:"contractedTicketList__HeaderDropdown",componentId:"qh9p38-8"})(["button[type='button']{& > div{font-size:16px;font-weight:600;}}"]),JF=Object(r.default)(o.IconButton).withConfig({displayName:"contractedTicketList__LeftArrow",componentId:"qh9p38-9"})([""]),XF=r.default.div.withConfig({displayName:"contractedTicketList__TicketSearchWrapper",componentId:"qh9p38-10"})(["display:flex;align-items:center;position:absolute;top:0;right:0;left:0;bottom:0;z-index:40;height:100%;padding-top:12px;background:white;"]),ZF={setTicketsRefreshAutomatic:j.d.setTicketsRefreshAutomatic,setTicketsRefreshAutomaticItem:j.d.setTicketsRefreshAutomaticItem},eU=Object(b.d)(e=>({currentTicketId:e.ticketDetail.ticket&&e.ticketDetail.ticket.id,refresh:e.tickets.refresh}),ZF)(({currentTicketId:e,refresh:t,initialSearchQuery:n,setTicketsRefreshAutomatic:i,setTicketsRefreshAutomaticItem:l,onSearch:c,onResetSearch:d,handleRefresh:u,handleTicketClick:p,handleTicketItemActionChange:g})=>{const{ticketSorter:h,setTicketSorter:m,tickets:b,isFetching:j,pagination:y,ticketCount:O,ticketStatus:v,isSearchMode:x,isSearched:_,searchQuery:C,setTicketStatus:k,setPagination:w,setSearchQuery:T,setIsSearchMode:S,resetSearch:I}=Object(a.useContext)(Uc),M=Object(E.a)(),D=Object(s.k)(),A=Object(s.n)(),N=Object(s.l)(),R=Object(a.useRef)(null),P=Object(a.useRef)(null),[L,F]=Object(a.useState)(!1),[U,$]=Object(a.useState)([]),B=Object(a.useMemo)(()=>[{label:M.formatMessage({id:"label.status"}),value:f.ic.STATUS},{label:M.formatMessage({id:"label.priority"}),value:f.ic.PRIORITY},{label:M.formatMessage({id:"label.subject"}),value:f.ic.SUBJECT},{label:M.formatMessage({id:"label.customer"}),value:f.ic.CUSTOMER},{label:M.formatMessage({id:"label.team"}),value:f.ic.TEAM},{label:M.formatMessage({id:"label.assignee"}),value:f.ic.ASSIGNEE},{label:M.formatMessage({id:"label.csat"}),value:f.ic.CSAT},{label:M.formatMessage({id:"label.created"}),value:f.ic.CREATED}],[M]),H=Object(a.useMemo)(()=>[{label:M.formatMessage({id:"desk.tickets.filter.status.ALL"}),value:f.jc.ALL},{label:M.formatMessage({id:"desk.tickets.filter.status.PENDING"}),value:f.jc.PENDING},{label:M.formatMessage({id:"desk.tickets.filter.status.ACTIVE"}),value:f.jc.ACTIVE},{label:M.formatMessage({id:"desk.tickets.filter.status.IDLE"}),value:f.jc.IDLE},{label:M.formatMessage({id:"desk.tickets.filter.status.WORK_IN_PROGRESS"}),value:f.jc.WIP},{label:M.formatMessage({id:"desk.tickets.filter.status.CLOSED"}),value:f.jc.CLOSED}],[M]);Object(a.useEffect)(()=>{var e;null==(e=R.current)||e.scrollToTop()},[b]);const q=Object(a.useCallback)(()=>B.find(e=>e.value===h.sortBy),[h,B]),K=Object(a.useCallback)(()=>H.find(e=>e.value===v),[v,H]),Y=Object(a.useCallback)(e=>{e&&m({sortBy:e.value,order:G.E.ASCEND})},[m]),Q=Object(a.useCallback)(e=>{e&&k(e.value)},[k]),J=Object(a.useCallback)(()=>{I(),A&&D.push(`${A.path.replace("/:ticketId","")}`)},[I,A,D]),X=Object(a.useCallback)(e=>()=>{F(e)},[]),Z=Object(a.useCallback)(()=>{m({sortBy:h.sortBy,order:h.order===G.E.ASCEND?G.E.DESCEND:G.E.ASCEND})},[h,m]),ee=Object(a.useCallback)(e=>()=>{S(e)},[S]),te=Object(a.useCallback)(e=>{i(e)},[i]),ne=Object(a.useCallback)(e=>{l(e)},[l]),ae=Object(a.useMemo)(()=>b.map((t,n)=>Object(W.jsx)(BF,{ticket:t,isActive:t.id===e,handleTicketClick:p,handleTicketItemActionChange:g,selectedFilter:h.sortBy},`tid_${n}`)),[b,h.sortBy,e,p,g]),ie=Object(a.useCallback)(()=>_?"string"==typeof U?M.formatMessage({id:"desk.tickets.search.manual.noMatch.description"},{query:U}):1===U.length?M.formatMessage({id:"desk.tickets.search.singleFilter.noMatch.description"}):M.formatMessage({id:"desk.tickets.search.multiFilters.noMatch.description"}):M.formatMessage({id:"desk.tickets.ticketList.search.empty.desc"}),[U,M,_]),se=Object(a.useMemo)(()=>x?_?Object(W.jsx)(z.a,{icon:"tickets",title:M.formatMessage({id:"desk.tickets.search.noMatch.title"}),description:ie()}):Object(W.jsx)(z.a,{icon:"tickets",title:M.formatMessage({id:"desk.tickets.search.title"}),description:M.formatMessage({id:"desk.tickets.search.description"},{break:Object(W.jsx)("br",{})})}):Object(W.jsx)(z.a,{icon:"tickets",title:M.formatMessage({id:"desk.tickets.contractedTicketList.list.empty.title"}),description:M.formatMessage({id:"desk.tickets.contractedTicketList.list.empty.desc"},{break:Object(W.jsx)("br",{})})}),[ie,M,x,_]),re=Object(a.useCallback)((e,t)=>{w({offset:0,limit:t,page:e})},[w]),oe=Object(a.useCallback)((e,t)=>{w({offset:(1===e?0:e-1)*t,limit:t,page:e})},[w]),le=()=>{var e;S(!0),null==(e=P.current)||e.focus()},ce=()=>{S(!1),d(),I()},de=e=>{if("Enter"===e.key){const t=e.currentTarget.value.trim();T(t)}},ue=()=>{d(),I()};return Object(a.useEffect)(()=>{if(""!==N.search){const{q:e}=Wt.a.parse(N.search,{ignoreQueryPrefix:!0}),t=Wt.a.parse(e);Object.keys(t).some(e=>f.pb.test(e.trim()))?$(Object.values(t)):$(e)}},[N.search]),Object(W.jsx)(Hn.Consumer,{children:({TicketSidebarHeaderGridItem:e,TicketSidebarBodyGridItem:a,TicketSidebarFooterGridItem:i})=>Object(W.jsxs)(W.Fragment,{children:[L&&Object(W.jsx)(vF,{handleClose:X(!1)}),Object(W.jsx)(e,{styles:Object(r.css)(["padding:0 8px;"]),children:Object(W.jsxs)(VF,{children:[Object(W.jsx)(zF,{children:Object(W.jsx)(JF,{icon:"arrow-left",size:"small",buttonType:"secondary",onClick:J})}),Object(W.jsx)(QF,{children:Object(W.jsx)(o.Dropdown,{placement:"bottom-start",size:"small",variant:"inline",items:H,itemToString:e=>e.label,itemToElement:e=>e.label,selectedItem:K(),onItemSelected:Q})}),Object(W.jsx)(HF,{children:Object(W.jsx)(qF,{children:Object(W.jsx)(V.f,{defaultIsAutoRefreshEnabled:t.isAutomatic,selectedInterval:t.automaticItem,onRefreshTriggered:u,onIsAutoRefreshActiveChange:te,onSelectedIntervalChange:ne})})}),Object(W.jsx)(GF,{children:Object(W.jsx)(WF,{icon:"filter",type:"button",buttonType:"secondary",size:"small",onClick:X(!0),disabled:x})}),x?Object(W.jsx)(XF,{children:Object(W.jsx)(Ta,{placeholder:M.formatMessage({id:"desk.tickets.search.placeholder.collapsed"}),showResetButton:C.length>0,inputType:Zn.Inline,initialSearchQuery:n,backButtonProps:{icon:"list-back",onClick:ce},onClick:ee(!0),onSearch:c,onKeyDown:de,onResetButtonClick:ue})}):Object(W.jsx)(o.IconButton,{icon:"search",buttonType:"secondary",size:"small",onClick:le})]})}),Object(W.jsxs)(a,{styles:Object(r.css)(["position:relative;display:flex;flex-direction:column;"]),children:[j?Object(W.jsx)(V.cc,{transparent:!0}):"",Object(W.jsxs)(KF,{children:[Object(W.jsx)(o.Dropdown,{placement:"bottom-start",variant:"inline",items:B,size:"small",itemToString:e=>e.label,itemToElement:e=>e.label,selectedItem:q(),onItemSelected:Y}),Object(W.jsx)(YF,{onClick:Z,children:Object(W.jsx)(o.SortOrderIndicator,{order:h.order})})]}),Object(W.jsx)(o.ScrollBar,{ref:R,children:b.length>0?ae:se})]}),Object(W.jsx)(i,{styles:Object(r.css)(["display:flex;justify-content:flex-end;padding:15px;"]),children:Object(W.jsx)(V.Ub,{current:y.page,total:O,pageSize:y.limit,pageSizeOptions:[10,20,50,100],onChange:oe,onItemsPerPageChange:re,isHiddenPerPage:!0})})]})})}),tU=r.default.div.withConfig({displayName:"ticketFilters__FilterWrapper",componentId:"sc-10dqsjz-0"})(["margin-right:4px;"]),nU=r.default.div.withConfig({displayName:"ticketFilters__Divider",componentId:"sc-10dqsjz-1"})(["width:1px;height:32px;background:",";margin:0 8px;"],Object(o.cssVariables)("neutral-3")),aU=r.default.div.withConfig({displayName:"ticketFilters__TicketFiltersContainer",componentId:"sc-10dqsjz-2"})(["display:flex;align-items:flex-start;position:relative;min-height:64px;padding-top:8px;background:white;"]),iU=()=>{const e=Object(E.a)(),t=[{label:e.formatMessage({id:"desk.tickets.filter.status.ALL"}),value:f.jc.ALL},{label:e.formatMessage({id:"desk.tickets.filter.status.PENDING"}),value:f.jc.PENDING},{label:e.formatMessage({id:"desk.tickets.filter.status.ACTIVE"}),value:f.jc.ACTIVE},{label:e.formatMessage({id:"desk.tickets.filter.status.IDLE"}),value:f.jc.IDLE},{label:e.formatMessage({id:"desk.tickets.filter.status.WORK_IN_PROGRESS"}),value:f.jc.WIP},{label:e.formatMessage({id:"desk.tickets.filter.status.CLOSED"}),value:f.jc.CLOSED}],{ticketStatus:n,setTicketStatus:i,isFetching:s}=Object(a.useContext)(Uc),r=Object(a.useMemo)(()=>t.find(e=>e.value===n)||t[0],[t,n]),l=Object(a.useCallback)(e=>{e&&i(e.value)},[i]);return Object(W.jsx)(o.Dropdown,{placement:"bottom-start",items:t,selectedItem:r,size:"small",itemToString:e=>e.label,onItemSelected:l,disabled:s})},sU=i.a.memo(()=>{const{assignee:e,setAssignee:t,isFetching:n}=Object(a.useContext)(Uc);return Object(W.jsx)(tU,{"data-test-id":"TicketAssigneeFilter",children:Object(W.jsx)(Dj,{disabled:n,selectedItem:(null==e?void 0:e.agent)||(null==e?void 0:e.team)||null,onChange:(e,n)=>{t(null!=e?"agent"!==n?{team:e}:{agent:e}:void 0)}})})}),rU=()=>{const{dateRange:e,setDateRange:t,isFetching:n}=Object(a.useContext)(Uc),i=Object(a.useCallback)((e,n)=>{const a=e===o.DateRangePickerValue.AllDates;t(n&&!a?{range:n,value:e}:void 0)},[t]);return Object(W.jsx)(tU,{"data-test-id":"TicketDateFilter",children:Object(W.jsx)(V.Kb,{value:(null==e?void 0:e.value)||o.DateRangePickerValue.AllDates,dateRange:null==e?void 0:e.range,onChange:i,maxDate:c()(),disabled:n,size:"small"})})};var oU=Object(r.default)(V.mc).withConfig({displayName:"ticketFilters___StyledTicketChannelTypesFilter",componentId:"sc-10dqsjz-3"})(["max-width:208px;"]);const lU=()=>{const{channelTypes:e,setChannelTypes:t,isFetching:n}=Object(a.useContext)(Uc),i=Object(a.useCallback)(e=>{t(e)},[t]);return Object(W.jsx)(tU,{"data-test-id":"ChannelFilter",children:Object(W.jsx)(oU,{channelTypes:e,onSelect:i,disabled:n})})},cU=()=>{const{tags:e,setTags:t,isFetching:n}=Object(a.useContext)(Uc);return Object(W.jsx)(tU,{"data-test-id":"TicketTagFilter",children:Object(W.jsx)(sF,{selectedItems:e,onChange:t,disabled:n,maxWidth:208})})},dU=()=>{const{priority:e,setPriority:t,isFetching:n}=Object(a.useContext)(Uc);return Object(W.jsx)(tU,{children:Object(W.jsx)(Rj,{selectedItem:e,onChange:t,disabled:n})})},uU=()=>Object(a.useMemo)(()=>Object(W.jsxs)(aU,{children:[Object(W.jsx)(iU,{}),Object(W.jsx)(nU,{}),Object(W.jsx)(sU,{}),Object(W.jsx)(dU,{}),Object(W.jsx)(lU,{}),Object(W.jsx)(rU,{}),Object(W.jsx)(cU,{})]}),[]),pU=Object(r.default)(V.Ub).withConfig({displayName:"ticketsList__TicketListPagination",componentId:"qyaqx9-0"})(["margin-left:auto;"]),gU=Object(r.default)(e=>Object(o.Table)(e)).withConfig({displayName:"ticketsList__TicketListTable",componentId:"qyaqx9-1"})(["flex:1;border:0;"]),hU=({timezone:e,handleActionChange:t})=>{const n=Object(E.a)(),{tickets:i,pagination:l,setPagination:d,ticketCount:u,isFetching:p,isSearchMode:g,ticketSorter:h,setTicketSorter:m,isSearched:b}=Object(a.useContext)(Uc),j=Object(s.l)(),y=Object(P.c)(),[O,v]=Object(a.useState)([]),x=Object(a.useCallback)((e,t)=>{e&&t&&m({sortBy:e.key,order:t})},[m]),_=Object(a.useCallback)(e=>h.sortBy===e?h.order:void 0,[h]),C=(e,n)=>{setTimeout(()=>{t({action:e,ticket:n})},150)};return Object(a.useEffect)(()=>{if(""!==j.search){const{q:e}=Wt.a.parse(j.search,{ignoreQueryPrefix:!0}),t=Wt.a.parse(e);Object.keys(t).some(e=>f.pb.test(e.trim()))?v(Object.values(t)):v(e)}},[j.search]),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(gU,{rowKey:"id",columns:[{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.status"}),key:f.ic.STATUS,dataIndex:"status",render:e=>Object(W.jsx)(V.qc,{ticketStatus:e.status2}),width:"100px",sorter:!0,defaultSortOrder:_(f.ic.STATUS)},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.priority"}),key:f.ic.PRIORITY,dataIndex:"priority",render:e=>Object(W.jsx)(V.Xb,{priority:e.priority,showLabel:!0}),width:"100px",sorter:!0,defaultSortOrder:_(f.ic.PRIORITY)},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.subject"}),key:f.ic.SUBJECT,dataIndex:"channelName",width:"25%",sorter:!0,defaultSortOrder:_(f.ic.SUBJECT),render:e=>Object(W.jsx)(V.rc,{ticket:e,subjectLinkTo:`/${y}/desk/tickets/${e.id}${j.search}`})},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.customer"}),key:f.ic.CUSTOMER,dataIndex:"customer",render:e=>Object(W.jsx)(V.nc,{ticket:e}),width:"15%"},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.team"}),key:f.ic.TEAM,dataIndex:"team",render:e=>e.group?Object(W.jsx)(o.Tag,{maxWidth:120,children:e.group.name}):Object(W.jsx)("span",{children:f.Z}),width:"140px"},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.agent"}),key:f.ic.ASSIGNEE,dataIndex:"id",render:e=>{var t;return Object(W.jsx)(V.kc,{agent:null==(t=e.recentAssignment)?void 0:t.agent})},width:"15%",sorter:!1,defaultSortOrder:_(f.ic.ASSIGNEE)},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.csat"}),key:f.ic.CSAT,dataIndex:"customerSatisfactionScore",styles:Object(r.css)(["min-width:80px;"]),render:({customerSatisfactionScore:e})=>Object(W.jsx)(V.lc,{score:e,styles:Object(r.css)(["font-weight:500;line-height:1.43;letter-spacing:-0.3px;"])}),sorter:!0,defaultSortOrder:_(f.ic.CSAT)},{title:n.formatMessage({id:"desk.tickets.ticketList.table.column.lbl.created"}),key:f.ic.CREATED,dataIndex:"createdAt",render:({createdAt:t})=>c.a.tz(t,e).format("lll"),width:"20%",sorter:!0,defaultSortOrder:_(f.ic.CREATED)}],dataSource:i,loading:p,footer:Object(W.jsx)(pU,{current:l.page,total:u,pageSize:l.limit,pageSizeOptions:[10,20,50,100],onChange:(e,t)=>{d({offset:(1===e?0:e-1)*t,limit:t,page:e})},onItemsPerPageChange:(e,t)=>{d({offset:0,limit:t,page:e})}}),emptyView:g?Object(W.jsx)(z.a,{icon:b?"no-search":"tickets",title:n.formatMessage({id:b?"desk.tickets.ticketList.searched.empty.title":"desk.tickets.ticketList.search.empty.title"}),description:b?"string"==typeof O?n.formatMessage({id:"desk.tickets.search.manual.noMatch.description"},{query:O}):1===O.length?n.formatMessage({id:"desk.tickets.search.singleFilter.noMatch.description"}):n.formatMessage({id:"desk.tickets.search.multiFilters.noMatch.description"}):n.formatMessage({id:"desk.tickets.ticketList.search.empty.desc"})}):Object(W.jsx)(z.a,{icon:"tickets",title:n.formatMessage({id:"desk.tickets.ticketList.list.empty.title"}),description:n.formatMessage({id:"desk.tickets.ticketList.list.empty.desc"})}),showScrollbars:!0,onSortByUpdated:x,rowActions:e=>{let t;return e.status===f.jc.CLOSED?t=[{label:n.formatMessage({id:"label.reopenTicket"}),onClick:()=>{C("REOPEN_TICKET",e)}}]:(t=e.recentAssignment?[{label:n.formatMessage({id:"desk.tickets.action.transfer.lbl.toAgent"}),onClick:()=>{C("TRANSFER_TO_AGENT",e)}}]:[{label:n.formatMessage({id:"label.assignToAgent"}),onClick:()=>{C("ASSIGN_TO_AGENT",e)}}],e.group&&t.push({label:n.formatMessage({id:"desk.tickets.action.group.lbl.transferToGroup"}),onClick:()=>{C("TRANSFER_TO_GROUP",e)}}),e.recentAssignment&&"ASSIGNED"===e.status&&"NOT_RESPONSED"===e.recentAssignment.status&&t.push({label:n.formatMessage({id:"desk.tickets.action.moveToIdle"}),onClick:()=>{C("MOVE_TO_IDLE",e)}}),t.push(o.OverflowMenu.divider),"UNASSIGNED"!==e.status&&t.push({label:n.formatMessage({id:"label.closeTicket"}),onClick:()=>{C("CLOSE_TICKET",e)}})),t.push({label:n.formatMessage({id:"desk.tickets.action.lbl.exportToCSV"}),onClick:()=>{C("EXPORT_TICKET",e)}}),t.push({label:n.formatMessage({id:"desk.tickets.action.lbl.copyUrl"}),onClick:()=>{vi()(Object(H.getTicketURL)(e.id,!0)),o.toast.success({message:n.formatMessage({id:"desk.tickets.action.lbl.copyUrl.success"})})}}),[Object(W.jsx)(o.OverflowMenu,{items:t,iconButtonProps:{buttonType:"tertiary"},stopClickEventPropagation:!0},"ticketsActions")]}})})},mU=({onClick:e})=>{const t=Object(E.a)();return Object(W.jsx)(o.Button,{size:"small",buttonType:"secondary",icon:"export",onClick:e,children:t.formatMessage({id:"desk.tickets.header.export.button"})})},fU=r.default.div.withConfig({displayName:"ticketsWrapper__LeftContainer",componentId:"lsqrq-0"})(["display:flex;align-self:flex-start;align-items:center;"]),bU=r.default.div.withConfig({displayName:"ticketsWrapper__RightContainer",componentId:"lsqrq-1"})(["position:relative;display:flex;",""],({$isSearchMode:e})=>e?Object(r.css)(["width:100%;flex-direction:column;align-items:flex-start;"]):Object(r.css)(["width:initial;align-items:center;"])),jU=r.default.div.withConfig({displayName:"ticketsWrapper__PageHeader",componentId:"lsqrq-2"})(["position:relative;display:flex;justify-content:space-between;align-items:center;margin-top:26px;"]),yU=r.default.h1.withConfig({displayName:"ticketsWrapper__PageTitle",componentId:"lsqrq-3"})(["font-size:20px;line-height:1.4;letter-spacing:-0.25px;font-weight:600;color:",";margin:0;"],Object(o.cssVariables)("neutral-10")),OU=r.default.div.withConfig({displayName:"ticketsWrapper__SearchResult",componentId:"lsqrq-4"})(["margin-bottom:24px;color:",";",";"],Object(o.cssVariables)("neutral-10"),o.Headings["heading-02"]),vU=r.default.span.withConfig({displayName:"ticketsWrapper__SearchResultCount",componentId:"lsqrq-5"})(["margin-left:8px;vertical-align:initial;color:",";"],Object(o.cssVariables)("neutral-6")),xU=Object(r.default)(V.z).withConfig({displayName:"ticketsWrapper__StyledTicketsList",componentId:"lsqrq-6"})(["position:relative;display:flex;flex-direction:column;justify-content:stretch;height:100%;overflow-y:auto;"]),_U=r.default.div.withConfig({displayName:"ticketsWrapper__TicketsListContainer",componentId:"lsqrq-7"})(["display:flex;flex-direction:column;flex:1;min-height:0;margin-top:","px;"],e=>e.$isSearchMode?32:16),CU=Object(r.default)(Ta).withConfig({displayName:"ticketsWrapper__StyledTicketSearchInput",componentId:"lsqrq-8"})(["width:",";margin-right:8px;"],({$isSearchMode:e})=>e?"100%":"232px"),kU=Object(r.default)(o.IconButton).withConfig({displayName:"ticketsWrapper__LeftArrow",componentId:"lsqrq-9"})(["margin-right:8px;"]),wU=r.default.div.withConfig({displayName:"ticketsWrapper__NotificationWrapper",componentId:"lsqrq-10"})(["margin-top:24px;"]);var TU=Object(r.default)(V.f).withConfig({displayName:"ticketsWrapper___StyledAutoRefreshDropdown",componentId:"lsqrq-11"})(["margin-left:8px;"]);const SU=({isShownExportNotification:e,initialSearchQuery:t,setIsShownExportNotification:n,handleTicketItemActionChange:i,handleRefresh:s,onSearch:r,onResetSearch:l})=>{const c=Object(E.a)(),d=Object(b.f)(),u=Object(a.useRef)(null),{showDialogsRequest:p}=j.b,{isSearchMode:g,ticketCount:h,setIsSearchMode:m,resetSearch:f}=Object(a.useContext)(Uc),{timezone:y,refresh:O}=Object(b.g)(e=>({timezone:e.desk.project.timezone,refresh:e.tickets.refresh})),v=Object(a.useCallback)(e=>{d(j.d.setTicketsRefreshAutomatic(e))},[d]),x=Object(a.useCallback)(e=>{d(j.d.setTicketsRefreshAutomaticItem(e))},[d]),_=Object(a.useCallback)(()=>{d(p({dialogTypes:A.a.ExportTicketsInfo,dialogProps:{onSuccess:()=>{n(!0)}}}))},[d,n,p]),C=Object(a.useCallback)(()=>{m(!0)},[m]),k=Object(a.useCallback)(()=>{l(),f(),u.current&&(u.current.value="")},[l,f]),w=Object(a.useCallback)(()=>{n(!1)},[n]);return Object(W.jsxs)(xU,{children:[Object(W.jsxs)(jU,{children:[Object(W.jsx)(fU,{children:g?Object(W.jsx)(kU,{icon:"arrow-left",size:"small",buttonType:"secondary",onClick:()=>{m(!1),l(),f()}}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(yU,{children:c.formatMessage({id:"desk.tickets.header.title"})}),Object(W.jsx)(TU,{defaultIsAutoRefreshEnabled:O.isAutomatic,selectedInterval:O.automaticItem,onRefreshTriggered:s,onIsAutoRefreshActiveChange:v,onSelectedIntervalChange:x})]})}),Object(W.jsxs)(bU,{$isSearchMode:g,children:[Object(W.jsx)(CU,{placeholder:g?c.formatMessage({id:"desk.tickets.search.placeholder.expanded"}):c.formatMessage({id:"desk.tickets.search.placeholder.collapsed"}),$isSearchMode:g,initialSearchQuery:t,showBackButton:!1,onSearch:r,onResetButtonClick:k,onClick:C}),!g&&Object(W.jsx)(mU,{onClick:_})]})]}),e&&Object(W.jsx)(wU,{children:Object(W.jsx)(o.InlineNotification,{type:"info",message:c.formatMessage({id:"desk.dataExport.notification.dataExport.start"},{link:Object(W.jsx)(pe.Link,{to:"data_exports",children:c.formatMessage({id:"desk.dataExport.title"})})}),onClose:w})}),Object(W.jsxs)(_U,{$isSearchMode:g,children:[g?h>0&&Object(W.jsxs)(OU,{children:[c.formatMessage({id:"desk.tickets.header.searchResults"}),Object(W.jsx)(vU,{children:c.formatNumber(h)})]}):Object(W.jsx)(uU,{}),Object(W.jsx)(hU,{timezone:y,handleActionChange:i})]})]})},EU=(e,t)=>{if(null==e||null==t)return null==e==(null==t);const n=new Set([...e.map(e=>e.id),...t.map(e=>e.id)]).size;return n===e.length&&n===t.length},IU=()=>{const e=Object(E.a)(),t=Object(b.f)(),n=Object(s.n)(),i=Object(s.k)(),{q:r,updateParams:o,clearParams:l}=Object(B.a)({q:""}),{fetchTickets:c}=Object(P.X)(),{showDialogsRequest:d}=j.b,{moveTicketToIdleRequest:u}=j.d,{isFetching:p,ticketStatus:g,assignee:h,channelTypes:m,tags:f,priority:y,dateRange:O,searchQuery:v,currentSearchedType:x,pagination:_,ticketSorter:C,isSearchMode:k,setTickets:w,setSearchQuery:T,setIsSearchMode:S,setCurrentSearchedType:I,setIsFetching:M,setTicketCount:D,setPagination:N,getSorterParams:R,updateTicketInList:L}=Object(a.useContext)(Uc),{agent:F,team:U}=null!=h?h:{},$=Object(P.R)(g),V=Object(P.R)(F),z=Object(P.R)(U),H=Object(P.R)(m),q=Object(P.R)(f),G=Object(P.R)(O),K=Object(P.R)(y),Y=Object(P.L)([$!==g,V!==F,z!==U,!xs()(H,m),!EU(q,f),G!==O,K!==y].some(e=>e)),Q=Object(a.useRef)(k),J=Object(a.useRef)(p),[X,Z]=Object(a.useState)(!1);Object(a.useEffect)(()=>{Q.current=k},[k]),Object(a.useEffect)(()=>{J.current=p},[p]);const ee=Object(a.useCallback)(async()=>{if(Y.current)return N({offset:0,page:1,limit:_.limit});M(!0);try{const e=await c({offset:_.offset,limit:_.limit,order:R(C.sortBy,C.order),query:v,startDate:null==O?void 0:O.range.startDate,endDate:null==O?void 0:O.range.endDate,agentId:null==F?void 0:F.id,groupId:null==U?void 0:U.id,ticketStatus:g,channelTypes:m,tags:f.map(e=>e.id),priority:y,isSearchMode:Q.current});D((null==e?void 0:e.count)||0),w((null==e?void 0:e.results)||[])}catch(e){}M(!1)},[M,N,_,c,R,C.sortBy,C.order,v,O,F,U,g,m,f,y,D,w,Y]),te=e=>{if(N({page:1,offset:0,limit:_.limit}),"string"==typeof e)return T(e),I(ea.IntegratedSearch),void o({q:e});T(va(e)),I(ea.TagsSearch),o({q:xa(e)})},ne=()=>{l()};Object(a.useEffect)(()=>{ee()},[ee]),Object(a.useEffect)(()=>{Z(!1)},[i.location.pathname]),Object(a.useEffect)(()=>{const e=Wt.a.parse(location.search,{ignoreQueryPrefix:!0,parseArrays:!1});La()(e)||(S(!0),I(ea.TagsSearch),o({q:Wt.a.stringify(e.q)}))},[I,S]);const ae=Object(a.useCallback)(({action:n,ticket:a,agent:i})=>{switch(n){case"TRANSFER_TO_AGENT":t(d({dialogTypes:A.a.AssignTransferTicketToAgent,dialogProps:{mode:"TRANSFER",ticket:a,agent:i,origin:"tickets",onSuccess:e=>{L(a,{recentAssignment:e})}}}));break;case"ASSIGN_TO_AGENT":t(d({dialogTypes:A.a.AssignTransferTicketToAgent,dialogProps:{mode:"ASSIGN",ticket:a,agent:i,origin:"tickets",onSuccess:e=>{L(e)}}}));break;case"MOVE_TO_IDLE":t(d({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle"}),description:"",confirmText:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.confirm"}),cancelText:e.formatMessage({id:"desk.tickets.ticketHeader.dialog.title.idle.button.cancel"}),onConfirm:()=>{t(u({ticket:a,origin:"tickets",onSuccess:e=>{L(a,{recentAssignment:e})}}))}}}));break;case"CLOSE_TICKET":t(d({dialogTypes:A.a.CloseTicket,dialogProps:{ticket:a,origin:"tickets",onSuccess:e=>{L(e)}}}));break;case"REOPEN_TICKET":t(d({dialogTypes:A.a.ReopenTicket,dialogProps:{ticket:a,onSuccess:e=>{L(e)}}}));break;case"TRANSFER_TO_GROUP":t(d({dialogTypes:A.a.AssignTransferTicketToGroup,dialogProps:{mode:"TRANSFER",ticket:a,origin:"tickets",onSuccess:e=>{L(e)}}}));break;case"EXPORT_TICKET":t(d({dialogTypes:A.a.ExportTicket,dialogProps:{ticketID:a.id,onSuccess:()=>{Z(!0)}}}));break;default:return}},[t,e,u,d,L]),ie=Object(a.useCallback)(()=>{J.current||ee()},[ee]),se=null==n?void 0:n.url,re=Object(a.useCallback)(e=>()=>{se&&i.push(`${se}/${e.id}${location.search}`)},[i,se]),oe={value:r,type:x};return Object(W.jsx)(QL,{children:n&&Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${n.url}/:ticketId`,render:({match:e})=>Object(W.jsxs)(Gn,{children:[Object(W.jsx)(eU,{initialSearchQuery:oe,onSearch:te,onResetSearch:ne,handleRefresh:ie,handleTicketItemActionChange:ae,handleTicketClick:re}),Object(W.jsx)(KL,{ticketId:e.params.ticketId,isShownExportNotification:X,setIsShownExportNotification:Z})]})}),Object(W.jsx)(s.d,{path:`${n.url}`,render:()=>Object(W.jsx)(SU,{isShownExportNotification:X,initialSearchQuery:oe,onSearch:te,onResetSearch:ne,handleRefresh:ie,handleTicketItemActionChange:ae,setIsShownExportNotification:Z})})]})})};var MU=n("xFyg");const DU=r.default.div.withConfig({displayName:"collapsibleSide__Collapsable",componentId:"sc-7oi8dw-0"})(["position:absolute;top:0;left:0;bottom:0;z-index:",";"],({isCollapsed:e,isContentNodeZIndexHigher:t})=>e||t?10:40),AU=r.default.div.withConfig({displayName:"collapsibleSide__Content",componentId:"sc-7oi8dw-1"})(["position:relative;flex:1;z-index:30;margin-left:","px;transition:",";&::before{content:'';display:block;position:absolute;top:0;bottom:0;left:-1px;width:1px;height:100%;background:",";}"],({isCollapsed:e,collapsableWidth:t,collapsedWidthOffset:n})=>e?n||0:t,Object(o.transitions)({duration:.2,properties:["margin-left"]}),Object(o.cssVariables)("neutral-2")),NU=r.default.div.withConfig({displayName:"collapsibleSide__Container",componentId:"sc-7oi8dw-2"})(["display:flex;position:relative;height:100%;"]),RU=i.a.createContext({isCollapsed:!1,setIsCollapsed:e=>{}}),PU=i.a.forwardRef(({contentNode:e,collapsibleNode:t,collapsedWidthOffset:n,isContentNodeZIndexHigher:i=!0},s)=>{const[r,o]=Object(a.useState)(0),l=Object(a.useRef)(null),c=Object(a.useContext)(RU);return Object(a.useEffect)(()=>{o(l.current&&l.current.offsetWidth||0)},[o]),Object(W.jsxs)(NU,{children:[Object(W.jsx)(DU,{ref:l,isCollapsed:c.isCollapsed,isContentNodeZIndexHigher:i,children:t}),Object(W.jsx)(AU,{ref:s,isCollapsed:c.isCollapsed,collapsableWidth:r,collapsedWidthOffset:n,children:e})]})});var LU;let FU;!function(e){e.MISSED="missed"}(LU||(LU={})),function(e){e.SUBJECT="channel_name",e.CUSTOMER="customer__display_name",e.TEAM="group__name",e.AGENT="recent_assignment__agent__display_name",e.CLOSED_AT="closed_at"}(FU||(FU={}));const UU=r.default.div.withConfig({displayName:"views__Container",componentId:"g2lzfl-0"})(["display:flex;flex-direction:column;justify-content:stretch;position:relative;padding:0 32px;padding-top:24px;height:100%;background:white;"]),$U=Object(r.default)(o.SideMenu).withConfig({displayName:"views__ViewsSideMenu",componentId:"g2lzfl-1"})(["height:100%;opacity:",";transition:opacity 0.2s ",";"],e=>e.isCollapsed?0:1,o.transitionDefault),BU=Object(r.default)(V.Ub).withConfig({displayName:"views__ViewsPaginator",componentId:"g2lzfl-2"})(["margin-left:auto;"]),VU=Object(r.default)(o.Table).withConfig({displayName:"views__ViewsTable",componentId:"g2lzfl-3"})(["flex:1;border:0;"]),zU=r.default.div.withConfig({displayName:"views__TitleAction",componentId:"g2lzfl-4"})(["display:flex;align-items:center;"]),HU=r.default.div.withConfig({displayName:"views__NotificationWrapper",componentId:"g2lzfl-5"})(["margin-bottom:24px;"]),qU=Object(r.default)(o.IconButton).withConfig({displayName:"views__RefreshButton",componentId:"g2lzfl-6"})(["margin-right:16px;"]),GU=Object(r.default)(o.IconButton).withConfig({displayName:"views__CollapseToggleButton",componentId:"g2lzfl-7"})(["position:absolute;left:-42px;top:12px;transform:translateX(",");transition:transform 0.2s ",";"],({isCollapsed:e})=>e?"10px":0,o.transitionDefault),WU=Object(r.default)(o.TooltipTargetIcon).withConfig({displayName:"views__TitleTooltipIcon",componentId:"g2lzfl-8"})(["margin-left:2px;"]);var KU=Object(r.default)(V.Sb).withConfig({displayName:"views___StyledPageHeader",componentId:"g2lzfl-9"})(["& + *{margin-top:24px;}"]);const YU=Object(a.memo)(()=>{const e=Object(E.a)(),t=Object(P.W)(),{pid:n,region:i}=Object(L.a)(),{getErrorMessage:s}=Object($.a)(),{isCollapsed:r,setIsCollapsed:l}=(e=>{const[t,n]=Object(a.useState)(e||!1);return{isCollapsed:t,setIsCollapsed:n}})(),{page:d,pageSize:u,sortBy:p,sortOrder:g,updateParams:h}=Object(B.a)({page:1,pageSize:f.qb,sortBy:FU.CLOSED_AT,sortOrder:f.Tb.DESCEND}),[m,b]=Object(a.useState)(!1),[j,y]=Object(a.useState)(LU.MISSED),[O,v]=Object(a.useState)([]),[x,_]=Object(a.useState)(!1),[C,k]=Object(a.useState)(0),w=Object(a.useCallback)(async({limit:e,offset:t,sortBy:a,sortOrder:r})=>{const l=r===f.Tb.DESCEND?"-":"";_(!0);try{switch(j){case LU.MISSED:{const{data:{count:s,results:r}}=await((e,t="",{limit:n,offset:a,order:i})=>MU.a.get(`${Object(MU.d)(t)}/api/projects/missed_tickets/`,{params:{limit:n,offset:a,order:i},headers:{Authorization:`Token ${H.ClientStorage.get("deskApiToken")}`,pid:e}}))(n,i,{limit:e,offset:t,order:`${l}${a}`});v(r),k(s);break}default:_(!1)}}catch(e){o.toast.error({message:s(e)}),Object(q.a)(e)}finally{_(!1)}},[j,s,n,i]),T=Object(a.useCallback)((e,t)=>{e&&t&&h({sortBy:e.key,sortOrder:t})},[h]),S=Object(a.useCallback)((e,t)=>{h({page:e,pageSize:t})},[h]);Object(a.useEffect)(()=>{w({offset:u*(d-1),limit:u,sortBy:p,sortOrder:g})},[w,d,u,p,g]);const I=Object(a.useMemo)(()=>{const t=e=>e===p?g:void 0;switch(j){case LU.MISSED:return[{key:FU.SUBJECT,title:e.formatMessage({id:"desk.views.detail.missed.table.column.subject"}),dataIndex:"channelName",render:e=>Object(W.jsx)(V.rc,{ticket:e}),flex:2,sorter:!0,defaultSortOrder:t(FU.SUBJECT)},{key:FU.CUSTOMER,title:e.formatMessage({id:"desk.views.detail.missed.table.column.customer"}),dataIndex:"customer",render:e=>Object(W.jsx)(V.nc,{ticket:e}),sorter:!0,defaultSortOrder:t(FU.CUSTOMER)},{key:FU.TEAM,title:e.formatMessage({id:"desk.views.detail.missed.table.column.team"}),dataIndex:"group",render:e=>e.group?Object(W.jsx)(o.Tag,{maxWidth:120,children:e.group.name}):Object(W.jsx)(W.Fragment,{children:f.Z}),sorter:!0,defaultSortOrder:t(FU.TEAM)},{key:FU.AGENT,title:e.formatMessage({id:"desk.views.detail.missed.table.column.lastAssignee"}),dataIndex:"recentAssignment",render:e=>{var t;return Object(W.jsx)(V.kc,{agent:null==(t=e.recentAssignment)?void 0:t.agent})},sorter:!0,defaultSortOrder:t(FU.AGENT)},{title:e.formatMessage({id:"desk.views.detail.missed.table.column.closedAt"}),key:FU.CLOSED_AT,dataIndex:"closedAt",render:({closedAt:e})=>e?c()(e).format("lll"):f.Z,width:"20%",sorter:!0,defaultSortOrder:t(FU.CLOSED_AT)}];default:return[]}},[j,e,p,g]),M=Object(a.useCallback)(()=>{t({dialogTypes:A.a.ExportMissedTicket,dialogProps:{onSuccess:()=>{b(!0)}}})},[t]),D=Object(a.useCallback)(()=>{b(!1)},[b]);return Object(W.jsx)(RU.Provider,{value:{isCollapsed:r,setIsCollapsed:l},children:Object(W.jsx)(PU,{collapsedWidthOffset:31,collapsibleNode:Object(W.jsx)($U,{isCollapsed:r,title:e.formatMessage({id:"desk.views.title"}),titleAction:Object(W.jsx)(zU,{"data-test-id":"TitleActions",children:Object(W.jsx)(qU,{icon:"refresh",title:e.formatMessage({id:"desk.views.viewList.button.refresh.tooltip"}),tooltipPlacement:"bottom",buttonType:"tertiary",size:"small",isLoading:x,disabled:x,onClick:()=>{w({offset:u*(d-1),limit:u,sortBy:p,sortOrder:g})}})}),activeItemKey:j,items:[Object(o.createSideMenuItemWithCount)({key:LU.MISSED,label:e.formatMessage({id:"desk.views.viewList.missed.title"}),count:C,onClick:()=>y(LU.MISSED)})]}),contentNode:Object(W.jsxs)(UU,{children:[Object(W.jsx)(GU,{icon:r?"expand":"collapse",title:e.formatMessage({id:r?"desk.views.viewList.button.toggle.expand.tooltip":"desk.views.viewList.button.toggle.collapse.tooltip"}),tooltipPlacement:"bottom-start",buttonType:"tertiary",size:"small",iconSize:24,disabled:x,isCollapsed:r,onClick:()=>{l(!r)}}),Object(W.jsxs)(KU,{children:[Object(W.jsxs)(V.Sb.Title,{children:[e.formatMessage({id:"desk.views.detail.missed.title"}),Object(W.jsx)(o.Tooltip,{content:e.formatMessage({id:"desk.views.title.tooltip"}),placement:"right",children:Object(W.jsx)(WU,{icon:"info",size:16})})]}),Object(W.jsx)(V.Sb.Actions,{children:Object(W.jsx)(o.Button,{size:"small",buttonType:"secondary",icon:"export",onClick:M,children:e.formatMessage({id:"desk.views.detail.missed.export"})})})]}),m&&Object(W.jsx)(HU,{"data-test-id":"InlineNotification",children:Object(W.jsx)(o.InlineNotification,{type:"info",message:e.formatMessage({id:"desk.dataExport.notification.dataExport.start"},{link:Object(W.jsx)(pe.Link,{to:"data_exports",children:e.formatMessage({id:"desk.dataExport.title"})})}),onClose:D})}),Object(W.jsx)(VU,{rowKey:"id",dataSource:O,columns:I,loading:x,showScrollbars:!0,onSortByUpdated:T,rowActions:n=>{const a=[];return n.status2===f.jc.CLOSED&&a.push({label:e.formatMessage({id:"label.reopenTicket"}),onClick:()=>{t({dialogTypes:A.a.ReopenTicket,dialogProps:{ticket:n,onSuccess:()=>{w({offset:u*(d-1),limit:u,sortBy:p,sortOrder:g})}}})}}),[Object(W.jsx)(o.OverflowMenu,{items:a,iconButtonProps:{buttonType:"tertiary"},stopClickEventPropagation:!0},"viewsTicketActions")]},footer:Object(W.jsx)(BU,{current:d,total:C,pageSize:u,pageSizeOptions:f.E,onChange:S,onItemsPerPageChange:S}),emptyView:Object(W.jsx)(z.a,{icon:"tickets",title:e.formatMessage({id:"desk.views.detail.missed.table.empty.title"}),description:e.formatMessage({id:"desk.views.detail.missed.table.empty.description"})})})]})})})}),QU=({children:e})=>{const t=Object(b.f)(),{conversationTickets:n}=Object(a.useContext)(hd),{assignedTickets:i}=n.state,s=Object(a.useMemo)(()=>i.filter(e=>{var t;return(e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE)&&"IDLE"!==(null==(t=e.recentAssignment)?void 0:t.status)}).reduce((e,t)=>{var n;return e+((null==(n=t.recentAssignment)?void 0:n.unreadCount)||0)},0),[i]);return Object(a.useEffect)(()=>{t(j.b.updateLNBMenuItem({key:f.Gb.conversation,option:{badgeCount:0}}))},[s,t]),Object(W.jsxs)(R.b,{children:[e,Object(W.jsx)(qe,{})]})},JU={assignmentLogs:[],refresh:{isAutomatic:!1,automaticItem:{label:"10 Seconds",seconds:10}}},XU={state:JU,setState:()=>{},updateIsAutomatic:()=>{},updateAutomaticItem:()=>{}},ZU=(e,t)=>({...e,...t}),e$=r.default.div.withConfig({displayName:"DeskAgentApp__Container",componentId:"y7t3x8-0"})(["height:100%;padding-left:","px;"],o.LeftNavigationBar.collapsedWidth),t$=Object(a.createContext)(XU),n$=Object(r.default)(o.LeftNavigationBar).withConfig({displayName:"DeskAgentApp__DeskAgentLNB",componentId:"y7t3x8-1"})(["position:absolute;z-index:",";top:0;bottom:0;left:0;border-right:1px solid ",";transition:top ","s,width ","s;"],Ha.b.navigation,Object(o.cssVariables)("neutral-3"),f.Y,o.LeftNavigationBar.collapseAnimationDurationSecond),a$=({children:e})=>{const t=Object(E.a)(),n=Object(s.l)(),{isPermitted:i}=Object(P.h)(),r=(()=>{const[e,t]=Object(a.useReducer)(ZU,JU),n=Object(P.R)(e),i=Object(a.useCallback)(e=>{n&&t({refresh:{...n.refresh,isAutomatic:e}})},[n]),s=Object(a.useCallback)(e=>{n&&t({refresh:{...n.refresh,automaticItem:e}})},[n]);return Object(a.useMemo)(()=>({state:e,setState:t,updateIsAutomatic:i,updateAutomaticItem:s}),[e,t,i,s])})(),{conversationTickets:l}=Object(a.useContext)(hd),{assignedTickets:c}=l.state,{setIsCollapsed:d}=Object(a.useContext)(S.a),{organizationUID:u,appID:p}=Object(b.g)(e=>{var t;return{organizationUID:e.organizations.current.uid,appID:(null==(t=e.applicationState.data)?void 0:t.app_id)||""}}),g=u===T.n;Object(a.useEffect)(()=>{i(["desk.agent"])&&d(!0)},[i,d]);const h=Object(a.useCallback)(()=>c.length>0?c.filter(e=>{var t;return(e.status2===f.jc.ACTIVE||e.status2===f.jc.IDLE)&&"IDLE"!==(null==(t=e.recentAssignment)?void 0:t.status)}).reduce((e,t)=>{var n;return e+((null==(n=t.recentAssignment)?void 0:n.unreadCount)||0)},0):0,[c]),m=Object(a.useMemo)(()=>((e,t,n)=>({[f.e.tickets]:Object(o.createLeftNavigationBarItem)({key:f.e.tickets,label:e.formatMessage({id:"desk.lnb.forAgent.tickets"}),icon:"tickets-filled",href:`/${t}/desk/conversation`,useReactRouterLink:!0,badgeCount:n.ticketUnreadMessageCount}),[f.e.assignmentLogs]:Object(o.createLeftNavigationBarItem)({key:f.e.assignmentLogs,label:e.formatMessage({id:"desk.lnb.forAgent.assignmentLogs"}),icon:"archive-filled",href:`/${t}/desk/assignment_logs`,useReactRouterLink:!0}),[f.e.proactiveChat]:Object(o.createLeftNavigationBarItem)({key:f.e.proactiveChat,label:e.formatMessage({id:"desk.lnb.forAgent.proactiveChats"}),icon:"proactive-chat-filled",href:`/${t}/desk/proactive_chats`,useReactRouterLink:!0}),[f.e.customers]:Object(o.createLeftNavigationBarItem)({key:f.e.customers,label:e.formatMessage({id:"desk.lnb.forAgent.customers"}),icon:"customers-filled",href:`/${t}/desk/customers`,useReactRouterLink:!0}),LeftNavigationBarDivider:o.LeftNavigationBarDivider,[f.e.settings]:Object(o.createLeftNavigationBarItem)({key:f.e.settings,label:e.formatMessage({id:"desk.lnb.forAgent.settings"}),icon:"settings-filled",href:`/${t}/desk/settings`,useReactRouterLink:!0})}))(t,p,{ticketUnreadMessageCount:h()}),[p,h,t]),j=[m.tickets,m.assignmentLogs,m.proactiveChat,m.customers,m.settings],y=Object(a.useMemo)(()=>{const e=j.slice(0);return e.splice(e.length-1,0,m.LeftNavigationBarDivider),g&&e.splice(e.length-2,0,Object(o.createLeftNavigationBarItem)({key:f.Gb.monitor,label:"Monitoring",icon:"monitor-filled",href:`/${p}/desk/monitoring`,useReactRouterLink:!0})),e},[p,g,m.LeftNavigationBarDivider,j]),O=Object.values(j).find(e=>{const{href:t}=e;return t&&n.pathname.startsWith(t)});return Object(W.jsx)(t$.Provider,{value:r,children:Object(W.jsxs)(e$,{children:[Object(W.jsx)(n$,{isCollapsed:!0,activeKey:O&&O.key,items:y,isExpandCollapseButtonHidden:!0}),e]})})};let i$;!function(e){e.QuickReplies="quick_replies"}(i$||(i$={}));const s$=r.default.div.withConfig({displayName:"AgentSettingsLayout__Container",componentId:"gbngo4-0"})(["display:flex;flex-direction:row;position:relative;background-color:white;"]),r$=Object(r.default)(V.z).withConfig({displayName:"AgentSettingsLayout__ContentWrapper",componentId:"gbngo4-1"})(["height:100%;"]);var o$=Object(r.default)(({className:e,onMenuItemClick:t})=>{const n=Object(E.a)(),{agentMenus:i,activeAgentMenu:r}=(()=>{const e=Object(E.a)(),t=Object(s.l)(),n=Object(b.g)(e=>{var t;return(null==(t=e.applicationState.data)?void 0:t.app_id)||""}),i=Object(_.a)(),r=Object(a.useMemo)(()=>i?[{key:i$.QuickReplies,label:e.formatMessage({id:"desk.settings.quickReplies.title"}),href:`/${n}/desk/settings/quick-replies`}]:[],[n,e,i]);return Object(a.useMemo)(()=>{var e;const n=r.find(e=>t.pathname.startsWith(e.href)),a=!!n&&n.href===t.pathname,i=null==(e=r[0])?void 0:e.href;return{agentMenus:r,activeAgentMenu:n,isActiveMenuExactMatch:a,fallbackMenuPath:i}},[r,t.pathname])})(),l=Object(a.useMemo)(()=>{const e=e=>()=>{t(e)};return i.map(({key:t,label:n,href:a})=>Object(o.createSideMenuItemDefault)({key:t,label:n,onClick:e(a)}))},[i,t]);return Object(W.jsx)(o.SideMenu,{className:e,title:n.formatMessage({id:"desk.settings.title.forAgent"}),items:l,activeItemKey:r?r.key:void 0})}).withConfig({displayName:"AgentSettingsLayout___StyledAgentSettingsSideMenu",componentId:"gbngo4-2"})(["height:100%;"]),l$=Object(r.default)(o.ScrollBar).withConfig({displayName:"AgentSettingsLayout___StyledScrollBar",componentId:"gbngo4-3"})(["flex:1;width:auto;height:100%;"]);var c$=Object(r.default)(({className:e,children:t})=>{const n=Object(s.l)(),{unsaved:i,setUnsaved:r,pushTo:o}=Object(P.Z)(),l=Object(a.useRef)(null),{setIsSideMenuVisible:c}=Object(a.useContext)(S.a);return Object(a.useEffect)(()=>{var e;null==l||null==(e=l.current)||e.scrollTo(0,0)},[n.pathname]),Object(a.useEffect)(()=>(c(!0),()=>{c(!1)}),[c]),Object(W.jsxs)(s$,{className:e,children:[Object(W.jsx)(V.wc,{when:i}),Object(W.jsx)(o$,{onMenuItemClick:o}),Object(W.jsx)(l$,{ref:l,children:Object(W.jsx)(r$,{children:t({setUnsaved:r})})})]})}).withConfig({displayName:"agentSettings___StyledAgentSettingsLayout",componentId:"sc-1x9x8el-0"})(["height:100%;"]);const d$=Object(a.memo)(({match:e})=>{w();const t=Object(b.g)(e=>e.desk.connected),n=Object(b.g)(e=>e.desk.authenticated);return Object(W.jsx)(c$,{children:()=>n?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/quick-replies/create`,component:LN}),Object(W.jsx)(s.d,{path:`${e.url}/quick-replies/:quickReplyId/edit`,component:LN}),Object(W.jsx)(s.d,{path:`${e.url}/quick-replies/:duplicateQuickReplyId/duplicate`,component:LN}),Object(W.jsx)(s.d,{path:`${e.url}/quick-replies`,component:hN}),Object(W.jsx)(s.c,{to:`${e.url}/quick-replies`})]}),!t&&Object(W.jsx)(o.SpinnerFull,{transparent:!0})]}):Object(W.jsx)(o.SpinnerFull,{transparent:!0})})}),u$=()=>{const e=Object(b.f)(),{pid:t,region:n}=Object(L.a)(),{agent:i,authenticated:s,connected:r,openChannelUrl:o}=Object(P.V)(e=>{const{agent:t,authenticated:n,connected:a,project:i}=e.desk;return{agent:t,authenticated:n,connected:a,openChannelUrl:i.openChannelUrl}}),l=Object(a.useRef)();Object(a.useEffect)(()=>{if(o)return()=>{l.current=new Promise(t=>{window.dashboardSB.OpenChannel.getChannel(o).then(n=>{n.exit((a,i)=>i?(Object(q.a)({error:i,context:{channel:n}}),e(j.d.setDeskConnected(!1)),t()):(e(j.d.setDeskConnected(!1)),t()))}).catch(e=>{Object(q.a)({error:e,context:{channelUrl:o}}),t()})})}},[e,o]),Object(a.useEffect)(()=>{if(!o||!s||r)return;s&&!r&&(async()=>{await l.current;e(j.b.sbConnectRequest({userInformation:{userId:i.sendbirdId,accessToken:i.sendbirdAccessToken},onSuccess:()=>{e(j.d.setDeskConnected(!0)),(async()=>{try{const e=await window.dashboardSB.OpenChannel.getChannel(o);e.enter((a,i)=>{i?Object(q.a)({error:i,context:{channel:e}}):D.g.fetchTicketsCounts(t,n)})}catch(e){Object(q.a)({error:e,context:{channelUrl:o}})}})()}}))})()},[s,i,e,r,o,t,n])},p$=Object(a.memo)(()=>{const e=Object(s.n)(),t=(()=>{const[e,t]=Object(a.useReducer)(gd,ud),n=Object(a.useRef)(e);Object(a.useEffect)(()=>{n.current=e},[e]);const{pid:i,region:s}=Object(L.a)(),{getErrorMessage:r}=Object($.a)(),l=Object(a.useCallback)(n=>{e.filter.labelKey!==n.labelKey&&e.filter.value!==n.value&&t({filter:n})},[e.filter]),c=Object(a.useCallback)(n=>{e.sortType!==n&&t({sortType:n})},[e.sortType]),d=Object(a.useCallback)(({search:e,active:a,idle:i,wip:s,closed:r})=>{t({counts:{search:void 0!==e&&e>-1?e:n.current.counts.search,active:void 0!==a&&a>-1?a:n.current.counts.active,idle:void 0!==i&&i>-1?i:n.current.counts.idle,wip:void 0!==s&&s>-1?s:n.current.counts.wip,closed:void 0!==r&&r>-1?r:n.current.counts.closed}})},[]),u=Object(a.useCallback)(()=>{t({isSearchMode:!n.current.isSearchMode})},[]),p=Object(a.useCallback)(e=>{n.current.isSearchMode!==e&&t({isSearchMode:e})},[]),g=Object(a.useCallback)(e=>{t({isSearched:e})},[]),h=Object(a.useCallback)(e=>{t({searchQuery:e})},[]),m=Object(a.useCallback)(({page:e,pageSize:a})=>{t({currentPagination:{page:e||n.current.currentPagination.page,pageSize:a||n.current.currentPagination.pageSize}})},[]),b=async({tickets:e})=>(await Promise.all(e.filter(e=>("SENDBIRD"===e.channelType||"SENDBIRD_JAVASCRIPT"===e.channelType||"SENDBIRD_IOS"===e.channelType||"SENDBIRD_ANDROID"===e.channelType)&&e.status2!==f.jc.CLOSED).map(e=>new Promise(t=>{window.dashboardSB.GroupChannel.getChannel(e.channelUrl).then(t).catch(()=>t(void 0))})))).filter(e=>null!=e).reduce((e,t)=>(e[t.url]=t,e),{}),j=Object(a.useCallback)(async({tickets:e})=>{t({currentChannels:await b({tickets:e})})},[]),y=Object(a.useCallback)(({ticket:e})=>{od()(n.current.currentTickets,["id",e.id])||t({currentTickets:n.current.currentTickets.concat(e)}),od()(n.current.assignedTickets,["id",e.id])||t({assignedTickets:n.current.assignedTickets.concat(e)})},[]),O=Object(a.useCallback)(({ticket:e})=>{t({currentTickets:n.current.currentTickets.map(t=>t.id===e.id?e:t),assignedTickets:n.current.assignedTickets.map(t=>t.id===e.id?e:t)})},[]),v=Object(a.useCallback)(({assignment:e})=>{t({currentTickets:n.current.currentTickets.map(t=>t.id===e.assignedTicket?{...t,recentAssignment:e}:t),assignedTickets:n.current.assignedTickets.map(t=>t.id===e.assignedTicket?{...t,recentAssignment:e}:t)})},[]),x=Object(a.useCallback)(({ticket:e})=>{t({currentTickets:n.current.currentTickets.filter(t=>t.id!==e.id)})},[]),_=Object(a.useCallback)(()=>{t({currentTickets:[],currentPagination:{...n.current.currentPagination,page:1},counts:{...n.current.counts,search:0}})},[]),C=Object(a.useCallback)(async e=>{const a="number"==typeof e.offset&&e.offset>-1?e.offset:(n.current.currentPagination.page-1)*n.current.currentPagination.pageSize,l=e.limit||n.current.currentPagination.pageSize,c=e.sortType?pd(e.sortType):pd(n.current.sortType),d=e.filter&&e.filter.value||n.current.filter.value,u={limit:l,offset:a,status2:d===f.jc.ALL?[f.jc.ACTIVE,f.jc.IDLE,f.jc.PENDING,f.jc.WIP,f.jc.CLOSED]:d,order:c};e.agentId&&d!==f.jc.WIP&&(u.agent=e.agentId),t({isFetching:!0});try{const{data:a}=await Object(N.fetchTickets)(i,s,u),r=await b({tickets:a.results}),o=d===f.jc.WIP?"wip":d.toLowerCase();t({isFetching:!1,isSearched:!1,counts:{...n.current.counts,[o]:a.count},filter:e.filter||n.current.filter,sortType:e.sortType||n.current.sortType,currentTickets:e.isLoadMore?cd()([...n.current.currentTickets,...a.results],"id"):a.results,currentChannels:e.isLoadMore?Object.assign(n.current.currentTickets,r):r})}catch(e){t({isFetching:!1,isSearched:!1}),o.toast.error({message:r(e)})}},[r,i,s]),k=Object(a.useCallback)(e=>{const n={isSearchMode:!0,isSearched:!0,...null==e?void 0:e.shouldReset};t(Object.keys(n).reduce((e,t)=>n[t]?{...e,[t]:ud[t]}:e,{searchQuery:"",searchedTickets:[]}))},[]),w=Object(a.useCallback)(async({limit:e,offset:a=0,query:l,isLoadMore:c,ticketType:d})=>{const u="number"==typeof a&&a>-1?a:(n.current.currentPagination.page-1)*n.current.currentPagination.pageSize,p={limit:e||n.current.currentPagination.pageSize,offset:u,order:"-created_at",q:l,status2:[f.jc.ACTIVE,f.jc.IDLE,f.jc.PENDING,f.jc.WIP,f.jc.CLOSED],ticket_type:d};t({isFetching:!0});try{const{data:e}=await Object(N.fetchTickets)(i,s,p),a=await b({tickets:e.results});t({counts:{...n.current.counts,search:e.count},searchQuery:l,isFetching:!1,isSearched:!0,searchedTickets:c?[...n.current.searchedTickets,...e.results]:e.results,currentChannels:c?Object.assign(n.current.searchedTickets,a):a})}catch(e){t({isFetching:!1,isSearched:!1}),o.toast.error({message:r(e)})}},[r,i,s]),T=Object(a.useCallback)(async({limit:e=0,offset:n=0,agentId:a})=>{try{const{data:r}=await Object(N.fetchTickets)(i,s,{limit:e,offset:n,order:"created_at",agent:a,status2:[f.jc.ACTIVE,f.jc.IDLE]});t({isFetching:!1,assignedTickets:r.results})}catch(e){t({isFetching:!1}),o.toast.error({message:r(e)})}},[r,i,s]),S=Object(a.useCallback)(async({agentId:e})=>{try{const{data:{active:a,idle:r}}=await Object(N.fetchAgentTicketCounts)(i,s,{agentId:e});t({counts:{...n.current.counts,active:a,idle:r}})}catch(e){o.toast.error({message:r(e)})}},[r,i,s]);return Object(a.useMemo)(()=>({state:e,setState:t,toggleIsSearchMode:u,updateIsSearchMode:p,updateIsSearched:g,updateSearchQuery:h,updateFilter:l,updateSortType:c,updateCounts:d,updateCurrentPagination:m,initCurrentChannels:j,addTickets:y,updateTickets:O,updateTicketsAssignment:v,removeFromCurrentTickets:x,resetCurrentTickets:_,fetchCurrentTickets:C,resetSearch:k,fetchSearchTickets:w,fetchAssignedTickets:T,fetchAssignedTicketsCounts:S}),[e,t,u,p,g,h,l,c,d,m,j,y,O,v,x,_,C,k,w,T,S])})(),{updateCounts:n,fetchAssignedTicketsCounts:i}=t;w(),u$(),(e=>{const t=Object(P.Y)(e=>e.desk.agent.id),n=Object(P.Y)(e=>e.desk.project.openChannelUrl),i=Object(P.L)(n),s=Object(b.f)(),{updateCounts:r,fetchAssignedTicketsCounts:o}=e;Object(a.useEffect)(()=>{const e=new window.dashboardSB.ChannelHandler;return e.onMessageReceived=(e,n)=>{if(e.isOpenChannel()&&e.url===i.current)try{const e=JSON.parse(n.message);"AGENT_TICKET_COUNTS"===e.type&&e.agents.includes(t)&&o({agentId:t}),"TICKET_WIP_COUNT"===e.type&&r({wip:e.count})}catch(e){Object(q.a)({error:e,context:{message:n}})}},window.dashboardSB.addChannelHandler("TICKET_COUNTS_HANDLER",e),()=>{window.dashboardSB.removeChannelHandler("TICKET_COUNTS_HANDLER")}},[t,s,o,i,r])})({updateCounts:n,fetchAssignedTicketsCounts:i});const{isPermitted:r}=Object(P.h)(),{setIsCollapsed:l}=Object(a.useContext)(S.a),d=Object(b.f)(),{pid:u,region:p}=Object(L.a)(),{organizationUID:g,timezone:h,connected:y}=Object(P.V)(e=>({organizationUID:e.organizations.current.uid,timezone:e.desk.project.timezone,connected:e.desk.connected})),O=g===T.n;Object(a.useEffect)(()=>{c.a.tz.setDefault(h),d(j.d.initializeDateFilters())},[h,d]),Object(a.useEffect)(()=>{r(["desk.agent"])&&l(!0)},[r,l]);const v=Object(a.useContext)(m.a),x=()=>Object(W.jsx)($c,{children:Object(W.jsx)(IU,{})}),_=Object(a.useMemo)(()=>r(["desk.admin"])?Object(W.jsx)(QU,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/tickets`,render:x}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/conversation/:ticketId`,component:lm}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/conversation`,component:lm}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/views`,component:YU}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/assignment_logs`,component:Ra}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/proactive_chats`,component:ay}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/agents`,component:Ct}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/customers`,component:Ff}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/data_exports`,component:pb}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/monitoring`,component:tj}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/reports`,component:BL}),Object(W.jsx)(s.d,{path:null==e?void 0:e.url,render:()=>Object(W.jsx)(s.c,{to:`${null==e?void 0:e.url}/tickets`})}),Object(W.jsx)(s.c,{from:`${null==e?void 0:e.url}/teams`,to:`${null==e?void 0:e.url}/settings/teams`})]})}):r(["desk.agent"])?Object(W.jsx)(a$,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/tickets/:ticketId`,render:t=>{const n=_a(Kn.TicketID,t.match.params.ticketId);return Object(W.jsx)(s.c,{to:`${null==e?void 0:e.url}/conversation/${t.match.params.ticketId}?${n}`})}}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/conversation/:ticketId`,component:lm}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/conversation`,component:lm}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/assignment_logs`,component:Ra}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/customers`,component:Ff}),O&&Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/monitoring`,component:tj}),Object(W.jsx)(s.d,{path:`${null==e?void 0:e.url}/proactive_chats`,component:ay}),Object(W.jsx)(s.d,{path:null==e?void 0:e.url,render:()=>Object(W.jsx)(s.c,{to:`${null==e?void 0:e.url}/conversation`})})]})}):void 0,[r,O,e]),C=Object(s.n)(`${null==e?void 0:e.url}/settings`);return C?Object(W.jsxs)(pf,{pid:u,region:p,children:[r(["desk.agent"])&&Object(W.jsx)(a$,{children:Object(W.jsx)(d$,{match:C})}),r(["desk.admin"])&&Object(W.jsx)(QU,{children:Object(W.jsx)(kR,{match:C})})]}):e&&y?Object(W.jsx)(pf,{pid:u,region:p,children:Object(W.jsx)(hd.Provider,{value:{conversationTickets:t},children:_})}):Object(W.jsx)(V.cc,{style:{height:`calc(100vh - ${v}px)`}})});var g$=n("KqxG");let h$,m$,f$,b$;!function(e){e[e.none=0]="none",e[e.pass=1]="pass",e[e.block=2]="block",e[e.replace=3]="replace"}(h$||(h$={})),function(e){e[e.none=0]="none",e[e.asterisks=1]="asterisks",e[e.block=2]="block"}(m$||(m$={})),function(e){e[e.none=0]="none",e[e.normal=1]="normal",e[e.strict=2]="strict"}(f$||(f$={})),function(e){e[e.noAction=0]="noAction",e[e.mute=1]="mute",e[e.kick=2]="kick",e[e.ban=3]="ban"}(b$||(b$={}));const j$={domain_filter:{domains:[],type:h$.none},profanity_filter:{keywords:"",regex_filters:[],type:m$.none},max_message_length:-1,display_past_message:!1,text_moderation:{languages:[],requestedAttributes:{TOXICITY:[]},moderationLevel:0,doNotStore:!0},image_moderation:{type:f$.none,soft_block:!1,limits:{adult:0,spoof:0,medical:0,violence:0,racy:0},check_urls:!1},allow_links:!1,user_messages_per_channel_duration:1,user_messages_per_channel:-1,profanity_triggered_moderation:{count:0,duration:1,action:b$.noAction},message_retention_hours:2400},y$=Object(a.createContext)({state:{settingsGlobal:j$,status:"init",error:null,updateRequest:{status:"init",error:null}},reloadSettingsGlobal:()=>{},updateSettingsGlobal:()=>{}}),O$=({children:e})=>{const t=Object(P.c)(),n=Object(E.a)(),[i,s]=Object(a.useState)(j$),[{status:r,error:l},c]=Object(P.g)(async()=>{const{data:e}=await Object(g$.fetchSettingsGlobal)({appId:t});s(e)},[t]),[d,u]=Object(a.useState)({status:"init",error:null}),p=Object(a.useCallback)(async(e,a)=>{u(e=>({...e,status:"loading"}));try{const i=await Object(g$.updateSettingsGlobal)({appId:t,payload:e});return null==a||null==a.onSuccess||a.onSuccess(),s(i.data),u(e=>({...e,status:"success",error:null})),null!=a&&a.showSuccessToast&&o.toast.success({message:n.formatMessage({id:"chat.settings.channelSettings.noti.updated"})}),i.data}catch(e){const t=Object(mi.b)(e);if(u(e=>({...e,status:"error",error:t})),null!=a&&a.throwError)throw e;o.toast.error({message:t})}},[t,n]);Object(a.useEffect)(()=>{c()},[c]);const g=Object(a.useMemo)(()=>({state:{status:r,error:l&&Object(mi.b)(l),settingsGlobal:i,updateRequest:{status:d.status,error:d.error}},reloadSettingsGlobal:c,updateSettingsGlobal:p}),[l,c,i,r,p,d.error,d.status]);return Object(W.jsx)(y$.Provider,{value:g,children:e})},v$=()=>Object(a.useContext)(y$),x$=Object(a.lazy)(()=>n.e(55).then(n.bind(null,"L+Hn"))),_$=Object(a.lazy)(()=>Promise.all([n.e(1),n.e(5),n.e(10),n.e(32)]).then(n.bind(null,"loFo"))),C$=Object(a.lazy)(()=>Promise.all([n.e(18),n.e(48)]).then(n.bind(null,"irt8"))),k$=Object(a.lazy)(()=>Promise.all([n.e(1),n.e(5),n.e(8),n.e(10),n.e(27)]).then(n.bind(null,"zIt0"))),w$=Object(a.lazy)(()=>Promise.all([n.e(9),n.e(10),n.e(18),n.e(29)]).then(n.bind(null,"8ajO"))),T$=Object(a.lazy)(()=>Promise.all([n.e(8),n.e(51)]).then(n.bind(null,"uAHb"))),S$=Object(a.lazy)(()=>Promise.all([n.e(11),n.e(8),n.e(9),n.e(12),n.e(31)]).then(n.bind(null,"oTmJ"))),E$=e=>Array.isArray(e)?e[0]:e;var I$=()=>{var e;const t=Object(P.c)(),n=null==(e=Object(s.n)())?void 0:e.url,i=Object(P.F)(),r=Object(P.i)(),l=Object(P.G)();if(!t)return Object(W.jsx)(o.SpinnerFull,{});if(i){const e=[l&&{path:[`${n}/studio`,`${n}/studio/:tab`],exact:!0,component:S$},{path:`${n}/direct-calls`,component:_$,exact:!0},{path:`${n}/direct-calls/:callId`,component:C$},{path:`${n}/group-calls`,component:k$,exact:!0},{path:`${n}/group-calls/:roomId`,component:w$},{path:`${n}/settings`,component:T$}].filter(e=>!!e),[t]=e;return Object(W.jsx)(a.Suspense,{fallback:null,children:Object(W.jsxs)(s.g,{children:[e.map(e=>Object(W.jsx)(s.d,{...e},E$(e.path))),Object(W.jsx)(s.c,{to:E$(t.path)})]})})}return Object(W.jsx)(a.Suspense,{fallback:null,children:Object(W.jsxs)(s.g,{children:[r&&Object(W.jsx)(s.d,{component:x$}),Object(W.jsx)(s.c,{to:t?`/${t}`:"/"})]})})},M$=n("IAWx"),D$=n("ZZnW");const A$=({metricType:e,timeDimension:t="daily",dateRange:n,segments:i=""})=>{var s;const r=Object(a.useRef)({statistics:[],total:0,average:0,channelCustomTypeData:{},messageCustomTypeData:{}}),{legacyDateRange:o,activeDateRange:l}=Object(M$.b)(e,n),c=Object(M$.c)({dateRange:o,timeDimension:t}),{status:d,state:u}=((e,t,n="daily")=>{const i=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),[{data:s,status:r},o]=Object(P.g)(async()=>""!==t?await Object(js.fetchStatisticsLegacy)({appId:i,metricType:e,timeDimension:"active_users"===e||"active_channels"===e?n:"",params:t}):Promise.resolve({data:{statistics:[]}}),[i,e,t,n]);return Object(a.useEffect)(()=>{o()},[o]),{status:r,state:s,reload:o}})(Object(D$.b)(e,i),c,t),p=Object(M$.a)({metricType:e,dateRange:l,timeDimension:t,segments:i}),{status:g,data:h}=(e=>{const t=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),[{data:n,status:i},s]=Object(P.g)(async()=>{if(""!==e){let n=await Object(js.fetchStatistics)({appId:t,params:e});const a=n.data;for(;n.data.next;)n=await Object(js.fetchStatistics)({appId:t,params:`${e}&token=${n.data.next}`}),a.values=a.values.concat(n.data.values);return a}return Promise.resolve({values:[]})},[t,e]);return Object(a.useEffect)(()=>{s()},[s]),{status:i,data:n,reload:s}})(p),[m,f]=Object(a.useState)(null);Object(a.useEffect)(()=>{"success"===g&&f(Date.now())},[g]);const j={legacy:o?null==u?void 0:u.data.statistics:[],active:l&&null!=(s=null==h?void 0:h.values)?s:[]},y=Object(P.R)(j);if(!xs()(y,j)&&"loading"!==g&&"loading"!==d){const e=Object(M$.d)(n.startDate,n.endDate,"daily"===t?"days":"months");r.current=Object(D$.a)(j,e,i)}return Object(a.useMemo)(()=>({isLoading:"loading"===g||"loading"===d,data:r.current,fetchedAt:m}),[m,g,d])},N$=["4ED4A015-33AF-4232-B688-D85C3467A71E","D37B2724-256E-4364-A133-B51340CADE12","12D52DA8-441A-4936-8014-FB7FF0235189","00D61803-A570-4D77-B842-1F1631F18EA0","6BD594DD-4ABF-44D4-89DA-87B0328A9B60","D1861F9D-FE4A-4E95-8D36-1B66A8BCF119","E9CCC065-88F3-4304-9172-C8FA8F2588B1","2F72AECC-E721-4447-BDC2-39086FC0E976","88CA8C74-5A5F-4A67-ABCA-C23D24C33C37","DCECA434-A3C6-4164-8A99-D4F6C8A199EA","4E1B1B91-F548-4DBF-9245-B23E9824158F","0D1078A2-03F8-4091-B733-0D6D8F0E946F","F3185317-00CB-4B92-8394-D2E3A7F0A53C"];var R$=n("TD4Q");const P$=r.default.div.withConfig({displayName:"AnalyticsDetail__StyledAnalyticsDetail",componentId:"xf2r8b-0"})(["padding-bottom:40px;","{flex:1;box-shadow:none;","{padding:0 8px;}","{","{height:40px;background:white;border-radius:0;border:none;border-bottom:1px solid ",";","{color:",";font-weight:600;text-transform:none;padding-right:8px;white-space:pre-wrap;word-break:break-all;}}}","{","{height:35px;","{"," color:",";}}}}.aaDatePicker{margin-left:8px;}"],V.fc,V.Yb,V.hb,V.Yb,Object(o.cssVariables)("neutral-3"),V.w,Object(o.cssVariables)("neutral-10"),V.j,V.Yb,V.w,o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),L$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetricTitle",componentId:"xf2r8b-1"})(["",";color:",";margin-bottom:12px;> div:first-child{max-width:200px;overflow:hidden;text-overflow:ellipsis;}"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),F$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetricValue",componentId:"xf2r8b-2"})([""," font-weight:600;color:",";"],o.Headings["heading-05"],({color:e})=>e),U$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetric",componentId:"xf2r8b-3"})(["padding:16px;position:relative;border:1px solid ",";border-left:none;height:128px;&:first-child{width:176px;border-left:1px solid ",";border-top-left-radius:4px;border-bottom-left-radius:4px;}",";&:focus{outline:none;}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3"),e=>e.isLast?Object(r.css)(["border-top-right-radius:4px;border-bottom-right-radius:4px;"]):""),$$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetricControls",componentId:"xf2r8b-4"})(["display:flex;align-items:center;justify-content:flex-end;height:48px;"]),B$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetrics",componentId:"xf2r8b-5"})(["position:relative;display:grid;grid-template-columns:175px 1fr 1fr 1fr 1fr 1fr;margin-top:12px;"]),V$=r.default.div.withConfig({displayName:"AnalyticsDetail__DetailMetricLabel",componentId:"xf2r8b-6"})([""," color:",";"," + &{padding-top:6px;}& + &{margin-top:12px;}"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7"),L$),z$=Object(r.default)(o.IconButton).withConfig({displayName:"AnalyticsDetail__MetricControl",componentId:"xf2r8b-7"})([""]),H$=r.default.div.withConfig({displayName:"AnalyticsDetail__ChartHeader",componentId:"xf2r8b-8"})(["display:flex;align-items:center;height:47px;padding:0;border-top:1px solid ",";border-bottom:1px solid ",";& > div + div{margin-left:8px;}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3")),q$={label:"Selected date",value:""},G$={[f.Ub.created_channels]:[{value:f.Wb.custom_channel_type,label:"Custom channel types"}],[f.Ub.messages]:[{value:f.Wb.custom_message_type,label:"Custom message types"},{value:f.Wb.custom_channel_type,label:"Custom channel types"},{value:`${f.Wb.custom_channel_type},${f.Wb.custom_message_type}`,label:"Both custom message & channel types"}]},W$={label:"All message types",value:""},K$={label:"All channel types",value:""},Y$=[f.Ub.created_channels,f.Ub.messages],Q$=[f.Ub.active_channels,f.Ub.message_senders,f.Ub.message_viewers],J$=Object.keys(f.Xb),X$=e=>IS()(e).format({thousandSeparated:!0,mantissa:0});var Z$=Object(r.default)(V.Sb).withConfig({displayName:"AnalyticsDetail___StyledPageHeader",componentId:"xf2r8b-9"})(["& + *{margin-top:24px;}","{display:flex;flex-direction:row;align-items:baseline;justify-content:space-between;margin-top:12px;color:inherit;",";}"],e=>e._css,e=>e._css2);const eB=()=>{const e=Object(E.a)(),t=Object(b.f)(),n=Object(s.n)(),{metricType:i}=null==n?void 0:n.params,{getMetricMessages:l}=Object(R$.a)(),d=l(i),[u,p]=Object(a.useState)(q$),[g,h]=Object(a.useState)(K$),[m,y]=Object(a.useState)(W$),[O,v]=Object(a.useState)(1),[x,_]=Object(a.useState)(f.Xb.daily),[C,k]=Object(a.useState)(o.DateRangePickerValue.Last14Days),[w,T]=Object(a.useState)({startDate:c()().subtract(14,"day"),endDate:c()()}),{isLoading:S,data:I,fetchedAt:M}=A$({metricType:i,timeDimension:x,dateRange:w,segments:u.value}),D=(t,{startDate:n,endDate:a})=>{n.isBefore(M$.e)&&a.diff(n,"days")>92?o.toast.warning({message:e.formatMessage({id:"chat.analyticsDetail.errors.92days"})}):(k(t),T({startDate:n,endDate:a}),h(K$),y(W$))},N=({start:t,end:n})=>{t.isBefore(M$.e)&&n.diff(t,"months")>12?o.toast.warning({message:e.formatMessage({id:"chat.analyticsDetail.errors.12months"})}):(k(o.DateRangePickerValue.Custom),T({startDate:t,endDate:n}))},R=e=>{h(e),y(W$),v(1)},P=e=>{y(e),v(1)},L=i===f.Ub.messages&&u.value===f.Wb.custom_message_type,F=(i===f.Ub.messages||i===f.Ub.created_channels)&&u.value===f.Wb.custom_channel_type,U=f.Ub.messages&&"custom_channel_type,custom_message_type"===u.value,$=L||F||U,B=Object(a.useCallback)(()=>S?[]:g.value&&m.value?ox()(I.channelCustomTypeData[g.value].messageCustomTypeData[m.value],"x"):g.value?ox()(I.channelCustomTypeData[g.value].statistics,"x"):m.value?ox()(I.messageCustomTypeData[m.value].statistics,"x"):ox()(I.statistics,"x"),[g.value,I.channelCustomTypeData,I.messageCustomTypeData,I.statistics,S,m.value]),z=[];z.push({label:hb()(null==d?void 0:d.unit),total:X$(I.total),average:X$(I.average)}),(F||U)&&Object.keys(I.channelCustomTypeData).forEach(e=>{const{statistics:t}=I.channelCustomTypeData[e],n=t.map(e=>e.y).reduce((e,t)=>e+t,0);z.push({label:e,total:X$(n),average:X$(n/t.length||0)})}),L&&Object.keys(I.messageCustomTypeData).forEach(e=>{const{statistics:t}=I.messageCustomTypeData[e],n=t.map(e=>e.y).reduce((e,t)=>e+t,0);z.push({label:e,total:X$(n),average:X$(n/t.length||0)})}),U&&g.value&&Object.keys(I.channelCustomTypeData[g.value].messageCustomTypeData).forEach(e=>{const t=I.channelCustomTypeData[g.value].messageCustomTypeData[e],n=t.map(e=>e.y).reduce((e,t)=>e+t,0);z.push({label:e,total:X$(n),average:X$(n/t.length||0)})});const q=O>1,G=z.length/5>O;return Object(W.jsxs)(P$,{children:[Object(W.jsxs)(Z$,{_css:V.Sb.Description,_css2:o.Subtitles["subtitle-01"],children:[Object(W.jsx)(V.Sb.BackButton,{href:"../analytics"}),Object(W.jsx)(V.Sb.Title,{children:null==d?void 0:d.header}),Object(W.jsxs)(V.Sb.Actions,{children:[Q$.includes(i)&&Object(W.jsx)(o.Dropdown,{size:"small",selectedItem:x,items:J$,itemToString:e=>hb()(e),onChange:Object(H.onDropdownChangeIgnoreNull)(e=>{_(e)})}),(()=>{switch(x){case f.Xb.daily:return Object(W.jsx)(o.DateRangePicker,{size:"small",value:C,dateRange:w,onChange:D,minimumNights:7,maximumNights:92,dropdownProps:{size:"small",tooltipProps:{placement:"bottom"},className:"aaDatePicker"}});case f.Xb.monthly:return Object(W.jsx)(V.Nb,{start:w.startDate,end:w.endDate,onChange:N,targetStyles:Object(r.css)(["margin-left:8px;"])});default:return null}})(),Object(W.jsx)(o.Button,{buttonType:"secondary",size:"small",icon:"download",onClick:()=>{t(j.b.showDialogsRequest({dialogTypes:A.a.AnalyticsExport,dialogProps:{metricType:i,...w}}))},styles:"margin-left: 8px;",children:"Export"})]}),Object(W.jsxs)(V.Sb.Description,{children:[Object(W.jsx)("p",{children:null==d?void 0:d.detail}),Object(W.jsx)(V.xb,{timestamp:M})]})]}),Y$.includes(i)&&Object(W.jsxs)(H$,{children:[Object(W.jsx)(o.Dropdown,{size:"small",variant:"inline",selectedItem:u,items:[q$,...G$[i]],itemToString:e=>e.label,onChange:Object(H.onDropdownChangeIgnoreNull)(e=>{p(e),h(K$),y(W$),v(1)})}),F&&Object(W.jsx)(o.Dropdown,{size:"small",variant:"inline",selectedItem:g,initialSelectedItem:K$,items:[K$,...Object.keys(I.channelCustomTypeData).map(e=>({value:e,label:e}))],itemToString:e=>e.label,onChange:Object(H.onDropdownChangeIgnoreNull)(R)}),L&&Object(W.jsx)(o.Dropdown,{size:"small",variant:"inline",selectedItem:m,initialSelectedItem:W$,items:[W$,...Object.keys(I.messageCustomTypeData).map(e=>({value:e,label:e}))],itemToString:e=>e.label,onChange:Object(H.onDropdownChangeIgnoreNull)(P)}),U&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.Dropdown,{size:"small",variant:"inline",selectedItem:g,initialSelectedItem:K$,items:[K$,...Object.keys(I.channelCustomTypeData).map(e=>({value:e,label:e}))],itemToString:e=>e.label,onChange:Object(H.onDropdownChangeIgnoreNull)(R)}),Object(W.jsx)(o.Dropdown,{size:"small",variant:"inline",selectedItem:m,initialSelectedItem:W$,items:[W$,...""===g.value?[]:Object.keys(I.channelCustomTypeData[g.value].messageCustomTypeData).map(e=>({value:e,label:e}))],itemToString:e=>e.label,onChange:Object(H.onDropdownChangeIgnoreNull)(P)})]}),$&&Object(W.jsx)(o.Tooltip,{placement:"bottom",popperProps:{modifiers:{offset:{offset:"0, 12"}}},content:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.ContextualHelpContent.Header,{children:"SENDBIRD:DEFAULT"}),Object(W.jsx)(o.ContextualHelpContent.Body,{children:e.formatMessage({id:"chat.analyticsDetail.tooltip.sendbirdDefault"})}),Object(W.jsx)(o.ContextualHelpContent.Header,{children:"SENDBIRD:AUTO_EVENT_MESSAGE"}),Object(W.jsx)(o.ContextualHelpContent.Body,{style:{whiteSpace:"pre-wrap"},children:e.formatMessage({id:"chat.analyticsDetail.tooltip.sendbirdAutoEventMessage"})})]}),tooltipContentStyle:Object(r.css)(["word-break:break-all;"]),children:Object(W.jsx)(o.IconButton,{buttonType:"tertiary",icon:"info",size:"xsmall"})})]}),Object(W.jsxs)(W.Fragment,{children:[S&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsx)(fb.k,{height:"375px",useArea:!0,datasets:[{label:null==d?void 0:d.header,data:B()}],options:{scales:{xAxes:[{time:{unit:x===f.Xb.daily?"day":"month",tooltipFormat:(()=>{switch(x){case f.Xb.monthly:return f.vb;case f.Xb.daily:default:return f.A}})()}}]}}},`aaDetailChart_${i}`),Object(W.jsxs)(B$,{children:[Object(W.jsxs)(U$,{children:[Object(W.jsx)(L$,{children:" "}),Object(W.jsx)(V$,{children:e.formatMessage({id:"chat.analyticsDetail.label.total"})}),Object(W.jsx)(V$,{children:e.formatMessage({id:"chat.analyticsDetail.label.average"})})]}),z.slice(5*(O-1+0),5*O).map((e,t)=>Object(W.jsxs)(U$,{isFirst:0===t,isLast:t===z.length-1,children:[Object(W.jsx)(L$,{children:Object(W.jsx)(o.Tooltip,{content:e.label,popperProps:{modifiers:{offset:{offset:"0, 12"}}},placement:"top",tooltipContentStyle:Object(r.css)(["word-break:break-all;"]),children:e.label})}),Object(W.jsx)(F$,{color:Object(o.cssVariables)("purple-8"),children:e.total}),Object(W.jsx)(F$,{color:Object(o.cssVariables)("purple-4"),children:e.average})]},`detailMetric_${e.label}_${t}`))]}),Object(W.jsx)($$,{children:z.length>5&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(z$,{icon:"chevron-left",buttonType:"secondary",size:"small",onClick:()=>{q&&v(O-1)},disabled:!q}),Object(W.jsx)(z$,{icon:"chevron-right",buttonType:"secondary",size:"small",onClick:()=>{G&&v(O+1)},disabled:!G})]})}),Object(W.jsxs)(V.fc,{children:[Object(W.jsx)(V.hb,{children:Object(W.jsxs)(V.Yb,{children:[Object(W.jsx)(V.w,{flex:"125px",children:e.formatMessage({id:"chat.analyticsDetail.label.date"})}),Object(W.jsx)(V.w,{children:hb()(null==d?void 0:d.unit)}),(F||U)&&Object.keys(I.channelCustomTypeData).map((e,t)=>Object(W.jsx)(V.w,{children:e},`messageCustomTypeHeader_${e}_${t}`)),L&&Object.keys(I.messageCustomTypeData).map((e,t)=>Object(W.jsx)(V.w,{children:e},`messageCustomTypeHeader_${e}_${t}`)),U&&g.value&&Object.keys(I.channelCustomTypeData[g.value].messageCustomTypeData).map((e,t)=>Object(W.jsx)(V.w,{children:e},`messageCustomTypeHeader_${e}_${t}`))]})}),Object(W.jsx)(V.j,{children:I.statistics.map((e,t)=>Object(W.jsxs)(V.Yb,{children:[Object(W.jsx)(V.w,{flex:"125px",children:c()(e.x).format(f.nb)}),Object(W.jsx)(V.w,{children:X$(e.y)}),(F||U)&&Object.keys(I.channelCustomTypeData).map(e=>Object(W.jsx)(V.w,{children:X$(I.channelCustomTypeData[e].statistics[t].y)},`channelCustomType${e}`)),L&&Object.keys(I.messageCustomTypeData).map(e=>Object(W.jsx)(V.w,{children:X$(I.messageCustomTypeData[e].statistics[t].y)},`messageCustomType${e}`)),U&&g.value&&Object.keys(I.channelCustomTypeData[g.value].messageCustomTypeData).map(e=>Object(W.jsx)(V.w,{children:X$(I.channelCustomTypeData[g.value].messageCustomTypeData[e][t].y)},`messageNchannelCustomType${e}`))]},`detail_table_stats_${g||m}${t}`))})]})]})]})},tB=Object(a.createContext)(()=>{}),nB=r.default.div.withConfig({displayName:"overviewStatisticsItem__ChartSeries",componentId:"sc-1rfxloe-0"})(["font-size:16px;line-height:20px;font-weight:600;letter-spacing:-0.25px;color:",";margin-bottom:8px;display:flex;align-items:center;cursor:pointer;"],Object(o.cssVariables)("neutral-10")),aB=r.default.div.withConfig({displayName:"overviewStatisticsItem__ChartValue",componentId:"sc-1rfxloe-1"})([""," color:",";"],o.Headings["heading-06"],Object(o.cssVariables)("purple-7")),iB=r.default.div.withConfig({displayName:"overviewStatisticsItem__ViewDetail",componentId:"sc-1rfxloe-2"})(["display:flex;justify-content:center;align-items:center;margin-top:2px;margin-left:8px;&:hover{cursor:pointer;}"]),sB=r.default.div.withConfig({displayName:"overviewStatisticsItem__ChartWrapper",componentId:"sc-1rfxloe-3"})(["margin-top:10px;& > div{margin:0 -20px;}"]),rB=r.default.div.withConfig({displayName:"overviewStatisticsItem__SpinnerWrapper",componentId:"sc-1rfxloe-4"})(["width:100%;height:332px;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(255,255,255,0.4);"]),oB=({dateRange:e,metricType:t})=>{const n=Object(s.k)(),i=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),{isLoading:r,data:l,fetchedAt:c}=A$({metricType:t,timeDimension:"daily",dateRange:e}),{getMetricMessages:d}=Object(R$.a)(),u=d(t),p=Object(a.useContext)(tB);Object(a.useEffect)(()=>{p(c)},[c,p]);const g=Object(a.useCallback)(()=>{n.push(`/${i}/analytics/${t}`)},[i,n,t]);return Object(W.jsx)(o.GridItem,{colSpan:4,children:r?Object(W.jsx)(rB,{children:Object(W.jsx)(o.Spinner,{})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(nB,{onClick:g,children:[null==u?void 0:u.header,Object(W.jsx)(iB,{children:Object(W.jsx)(o.Icon,{icon:"chevron-right",size:20})})]}),Object(W.jsx)(aB,{children:IS()(t===f.Ub.messages_per_user||t===f.Vb.channel_member?l.average:l.total).format({thousandSeparated:!0,mantissa:0})}),Object(W.jsx)(sB,{children:Object(W.jsx)(fb.k,{height:"200px",datasets:[{label:null==u?void 0:u.header,data:ox()(l.statistics,"x")}],useArea:!0},null==u?void 0:u.header)})]})},"chartItem_testing")},lB=r.default.div.withConfig({displayName:"overview__StyledAnalyticsOverview",componentId:"z06p0e-0"})(["padding-bottom:40px;"]),cB=r.default.div.withConfig({displayName:"overview__ChartSectionTitle",componentId:"z06p0e-1"})(["display:flex;align-items:center;font-size:16px;font-weight:600;line-height:20px;letter-spacing:-0.15px;color:",";margin-bottom:10px;"],Object(o.cssVariables)("neutral-10")),dB=Object(r.default)(V.o).withConfig({displayName:"overview__ChartCard",componentId:"z06p0e-2"})(["padding:34px 40px;margin-bottom:32px;"]);var uB=Object(r.default)(V.Sb).withConfig({displayName:"overview___StyledPageHeader",componentId:"z06p0e-3"})(["& + *{margin-top:24px;}","{margin-top:12px;> *{justify-content:flex-end;}}"],e=>e._css);const pB=()=>{const e=Object(E.a)(),t=Object(b.f)(),n=Object(b.g)(e=>e.applicationState.data),[i,s]=Object(a.useState)(o.DateRangePickerValue.Last14Days),[l,d]=Object(a.useState)({startDate:c()().subtract(13,"day"),endDate:c()()}),[u,p]=Object(a.useState)(null),g=(h=(null==n?void 0:n.app_id)||"",N$.includes(h));var h;const m=Object(a.useMemo)(()=>({channels:[{header:e.formatMessage({id:"chat.analytics.created_channels.header"}),description:e.formatMessage({id:"chat.analytics.created_channels.description"})},{header:e.formatMessage({id:"chat.analytics.active_channels.header"}),description:e.formatMessage({id:"chat.analytics.active_channels.description"})},...g?[{header:e.formatMessage({id:"chat.analytics.channel_member.header"}),description:e.formatMessage({id:"chat.analytics.channel_member.description"})}]:[]],messages:[{header:e.formatMessage({id:"chat.analytics.messages.header"}),description:e.formatMessage({id:"chat.analytics.messages.description"})},{header:e.formatMessage({id:"chat.analytics.messages_per_user.header"}),description:e.formatMessage({id:"chat.analytics.messages_per_user.description"})}],users:[{header:e.formatMessage({id:"chat.analytics.created_users.header"}),description:e.formatMessage({id:"chat.analytics.created_users.description"})},{header:e.formatMessage({id:"chat.analytics.message_senders.header"}),description:e.formatMessage({id:"chat.analytics.message_senders.description"})},{header:e.formatMessage({id:"chat.analytics.message_viewers.header"}),description:e.formatMessage({id:"chat.analytics.message_viewers.description"})},{header:e.formatMessage({id:"chat.analytics.deactivated_users.header"}),description:e.formatMessage({id:"chat.analytics.deactivated_users.description"})},{header:e.formatMessage({id:"chat.analytics.deleted_users.header"}),description:e.formatMessage({id:"chat.analytics.deleted_users.description"})}]}),[e,g]);return Object(W.jsx)(tB.Provider,{value:p,children:Object(W.jsxs)(lB,{children:[Object(W.jsxs)(uB,{_css:V.Sb.Description,children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"chat.analytics.title"})}),Object(W.jsxs)(V.Sb.Actions,{children:[Object(W.jsx)(o.DateRangePicker,{size:"small",value:i,dateRange:l,onChange:(e,t)=>{s(e),d({startDate:t.startDate,endDate:t.endDate})},minimumNights:7,maximumNights:186,placement:"bottom"}),Object(W.jsx)(o.Button,{buttonType:"secondary",size:"small",icon:"export",onClick:()=>{t(j.b.showDialogsRequest({dialogTypes:A.a.AnalyticsExport,dialogProps:{...l}}))},styles:"margin-left: 8px; padding-right: 16px;",children:"Export"})]}),Object(W.jsx)(V.Sb.Description,{children:Object(W.jsx)(V.xb,{timestamp:u})})]}),Object(W.jsxs)(cB,{children:[e.formatMessage({id:"chat.analytics.types.users"})," ",Object(W.jsx)(V.tc,{contentWidth:"512px",placement:"right",offset:"0, 16",target:Object(W.jsx)(o.IconButton,{buttonType:"tertiary",size:"xsmall",icon:"info"}),items:m.users,targetStyle:Object(r.css)(["margin-left:4px;"])})]}),Object(W.jsx)(dB,{children:Object(W.jsxs)(o.Grid,{gap:28,children:[Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.created_users}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.message_senders}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.message_viewers}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.deactivated_users}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.deleted_users})]})}),Object(W.jsxs)(cB,{children:[e.formatMessage({id:"chat.analytics.types.channels"})," ",Object(W.jsx)(V.tc,{contentWidth:"512px",placement:"right",offset:"0, 16",target:Object(W.jsx)(o.IconButton,{buttonType:"tertiary",size:"xsmall",icon:"info"}),items:m.channels,targetStyle:Object(r.css)(["margin-left:4px;"])})]}),Object(W.jsx)(dB,{children:Object(W.jsxs)(o.Grid,{gap:28,children:[Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.created_channels}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.active_channels}),g&&Object(W.jsx)(oB,{dateRange:l,metricType:f.Vb.channel_member})]})}),Object(W.jsxs)(cB,{children:[e.formatMessage({id:"chat.analytics.types.messages"})," ",Object(W.jsx)(V.tc,{contentWidth:"411px",placement:"right",offset:"0, 16",target:Object(W.jsx)(o.IconButton,{buttonType:"tertiary",size:"xsmall",icon:"info"}),items:m.messages,targetStyle:Object(r.css)(["margin-left:4px;"])})]}),Object(W.jsx)(dB,{children:Object(W.jsxs)(o.Grid,{gap:28,children:[Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.messages}),Object(W.jsx)(oB,{dateRange:l,metricType:f.Ub.messages_per_user})]})})]})})};var gB=n("J/PD"),hB=n.n(gB);const mB=hB()({my_channels:"sender_all_channels",target_channels:"target_channels",target_users_include_in:"target_users_included_channels",target_users_exactly_in:"target_users_only_channels"}),fB=hB()({all:"all",distinct:"distinct",nondistinct:"non_distinct"}),bB=e=>mB[e],jB=e=>fB[e],yB=(e,t)=>{if("v1.0"===t){const{accum_open_counts:t,accum_open_rates:n,...a}=e;return{...a,cumulative_open_counts:t,cumulative_open_rates:n}}return e},OB=(e,t)=>{var n,a,i,s;const r=Number(null!=(n=null==e||null==(a=e.data)?void 0:a.code)?n:-1),o=String(null!=(i=null==e||null==(s=e.data)?void 0:s.message)?i:"");return 400111===r&&o.includes("scheduled_at must not be before current time")?t.formatMessage({id:"chat.announcements.scheduleErrors.pastScheduledAt"}):400920===r&&o.includes("Announcement status should be 'scheduled' to be edited.")?t.formatMessage({id:"chat.announcements.editAnnouncement.cannotSaveChangesDialog.alreadyStarted"}):400111===r&&["Out of time range. cease_at can’t be earlier than scheduled_at if announcement schedule is within 1 day.","schedule has to be resumed at least once between 'resume_at' and 'end_at'"].some(e=>o.includes(e))?t.formatMessage({id:"chat.announcements.scheduleErrors.doNotDisturbDuringRunningHours"}):void 0},vB=()=>Object(b.g)(e=>{const t=e.applicationState.data;return t?(e=>e.attrs.announcement_version)(t):void 0});class xB extends Error{}const _B=Object(a.createContext)(void 0),CB=Object(a.createContext)(void 0),kB=({id:e,children:t,onAnnouncementUpdated:n})=>{const i=Object(E.a)(),s=Object(P.c)(),r=vB(),l=(e=>{const t=Object(P.c)(),n=vB(),i=Object(E.a)(),s=Object(a.useCallback)(async(e,n)=>{try{const{data:a}=await Object(js.updateAnnouncement)({appId:t,id:e,payload:{action:n}});return a}catch(e){var a;const{code:t,message:n=""}=null!=(a=null==e?void 0:e.data)?a:{},s=n.match(/Announcement status has to be ([a-z\-]+) to perform action "([a-z]+)". \(Current status: ([a-z\-]+)\)/);if(400920===t&&s){const[,,e,t]=s;if("cancel"===e)throw new xB(i.formatMessage({id:"canceled"===t?"chat.announcements.detail.action.cancel.error.alreadyCanceled":"chat.announcements.detail.action.cancel.error.alreadyStarted"}));throw new xB(n)}throw e}},[t,i]);return Object(a.useCallback)(async(a,i)=>{const r=(()=>{switch(i){case"pause":case"resume":if("v1.0"!==n)return s(a,i);break;case"cancel":return"v1.0"===n?(async()=>{const{data:e}=await Object(js.cancelAnnouncement_LEGACY)({appId:t,eventId:a});return e})():s(a,"v1.5"===n?"remove":"cancel");case"stop":return"v1.0"===n?(async()=>{const{data:e}=await Object(js.abortAnnouncement_LEGACY)({appId:t,eventId:a});return e})():s(a,"v1.5"===n?"cancel":"stop")}})();if(null==r)return;const o=await r;return e(o),o},[n,t,s,e])})(n),[c,d]=Object(a.useReducer)((e,t)=>{switch(t.type){case"START_FETCHING":return{...e,isLoading:!0,isLoadingStats:!0};case"SET_ITEM":return{...e,item:t.payload.item,isWaitingToResume:"boolean"==typeof t.payload.isWaitingToResume?t.payload.isWaitingToResume:e.isWaitingToResume,error:null};case"FETCHING_ITEM_FAILED":return{...e,error:t.payload.error};case"FETCHING_ITEM_SETTLED":return{...e,isLoading:!1};case"SET_STATS":return{...e,stats:t.payload.stats,statsLoadError:null,statsLoadTimestamp:t.payload.timestamp};case"FETCHING_STATS_FAILED":return{...e,statsLoadError:t.payload.error};case"FETCHING_STATS_SETTLED":return{...e,isLoadingStats:!1};case"UPDATE_ITEM_START":return{...e,updateStatus:"pending"};case"UPDATE_ITEM_SUCCESS":return{...e,updateStatus:"done"};case"UPDATE_ITEM_RESET_STATUS":case"UPDATE_ITEM_FAIL":return{...e,updateStatus:"idle"};default:return e}},{item:null,isLoading:!1,updateStatus:"idle",error:null,stats:null,isLoadingStats:!1,statsLoadError:null,statsLoadTimestamp:null,isWaitingToResume:!1}),u=(()=>{const e=Object(E.a)(),t=Object(P.W)();return n=>t({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:e.formatMessage({id:"chat.announcements.editAnnouncement.cannotSaveChangesDialog.title"}),description:n,positiveButtonProps:{text:e.formatMessage({id:"chat.announcements.editAnnouncement.cannotSaveChangesDialog.btn.ok"})},isNegativeButtonHidden:!0}})})(),p=Object(a.useCallback)(async()=>{if(r){d({type:"START_FETCHING"});try{const{data:t}=await Object(js.fetchAnnouncement)({appId:s,eventId:e});d({type:"SET_ITEM",payload:{item:t}})}catch(e){d({type:"FETCHING_ITEM_FAILED",payload:{error:Object(mi.b)(e)}})}finally{d({type:"FETCHING_ITEM_SETTLED"})}try{const{data:t}=await Object(js.fetchAnnouncementOpenRate)({appId:s,eventId:e});d({type:"SET_STATS",payload:{stats:yB(t,r),timestamp:Date.now()}})}catch(e){d({type:"FETCHING_STATS_FAILED",payload:{error:Object(mi.b)(e)}})}finally{d({type:"FETCHING_STATS_SETTLED"})}}},[r,s,e]);Object(a.useEffect)(()=>{p()},[p]),Object(a.useEffect)(()=>{let t=-1,a=!1;const i=async()=>{const{data:r}=await Object(js.fetchAnnouncement)({appId:s,eventId:e});if(!a){const e="scheduled"===r.status;d({type:"SET_ITEM",payload:{item:r,isWaitingToResume:e}}),n(r),e&&(t=window.setTimeout(i,5e3))}};return c.isWaitingToResume&&(t=window.setTimeout(i,5e3)),()=>{a=!0,window.clearTimeout(t)}},[s,e,n,c.isWaitingToResume]);const g=Object(a.useCallback)(async t=>{d({type:"UPDATE_ITEM_START"});try{const{data:a}=await Object(js.updateAnnouncement)({appId:s,id:e,payload:t});return Object(b.c)(()=>{d({type:"SET_ITEM",payload:{item:a}}),d({type:"UPDATE_ITEM_SUCCESS"}),n(a)}),!0}catch(e){d({type:"UPDATE_ITEM_FAIL"});const t=OB(e,i);return t?u(t):o.toast.error({message:Object(mi.b)(e)}),!1}},[s,e,i,n,u]),h=Object(a.useCallback)(async()=>{const t=await l(e,"cancel");t&&d({type:"SET_ITEM",payload:{item:t}})},[e,l]),m=Object(a.useCallback)(async()=>{const t=await l(e,"stop");t&&d({type:"SET_ITEM",payload:{item:t}})},[e,l]),f=Object(a.useCallback)(async()=>{const t=await l(e,"pause");return t&&d({type:"SET_ITEM",payload:{item:t}}),t},[e,l]),j=Object(a.useCallback)(async()=>{const t=await l(e,"resume");return t&&d({type:"SET_ITEM",payload:{item:t,isWaitingToResume:"scheduled"===t.status}}),t},[e,l]),y=Object(a.useCallback)(async()=>d({type:"UPDATE_ITEM_RESET_STATUS"}),[]),O=Object(a.useMemo)(()=>({cancel:h,stop:m,pause:f,resume:j,edit:g,reload:p,resetUpdateStatus:y}),[h,g,p,f,y,j,m]);return Object(W.jsx)(_B.Provider,{value:Object(a.useMemo)(()=>({id:e,...c}),[e,c]),children:Object(W.jsx)(CB.Provider,{value:O,children:t})})},wB=()=>Object(a.useContext)(_B),TB=()=>Object(a.useContext)(CB),SB=e=>{const t=Object(E.a)(),n=vB();return Object(a.useMemo)(()=>{const a=e?{scheduled:t.formatMessage({id:"chat.announcements.detail.info.status.description.scheduled"}),canceled:t.formatMessage({id:"chat.announcements.detail.info.status.description.canceled"}),running:t.formatMessage({id:"chat.announcements.detail.info.status.description.running"}),stopped:t.formatMessage({id:"chat.announcements.detail.info.status.description.stopped"}),paused:t.formatMessage({id:"chat.announcements.detail.info.status.description.paused"}),"on-hold":t.formatMessage({id:"chat.announcements.detail.info.status.description.onHold"},{b:e=>Object(W.jsx)("b",{children:e})}),completed:t.formatMessage({id:"chat.announcements.detail.info.status.description.completed"}),incompleted:t.formatMessage({id:"chat.announcements.detail.info.status.description.incompleted"},{b:e=>Object(W.jsx)("b",{children:e})})}:{scheduled:t.formatMessage({id:"chat.announcements.status.scheduled.description"}),canceled:t.formatMessage({id:"chat.announcements.status.canceled.description"}),running:t.formatMessage({id:"chat.announcements.status.running.description"}),stopped:t.formatMessage({id:"chat.announcements.status.stopped.description"}),paused:t.formatMessage({id:"chat.announcements.status.paused.description"}),"on-hold":t.formatMessage({id:"chat.announcements.status.onHold.description"},{b:e=>Object(W.jsx)("b",{children:e})}),completed:t.formatMessage({id:"chat.announcements.status.completed.description"}),incompleted:t.formatMessage({id:"chat.announcements.status.incompleted.description"})},i={...a,removed:a.canceled,aborted:a.stopped,done:a.completed};return"v1.5"===n?{...i,removed:i.canceled,canceled:i.stopped}:i},[n,t,e])},EB=()=>{const e=vB(),t=(()=>{const e=Object(E.a)();return Object(a.useMemo)(()=>({scheduled:e.formatMessage({id:"chat.announcements.status.scheduled"}),canceled:e.formatMessage({id:"chat.announcements.status.canceled"}),running:e.formatMessage({id:"chat.announcements.status.running"}),stopped:e.formatMessage({id:"chat.announcements.status.stopped"}),paused:e.formatMessage({id:"chat.announcements.status.paused"}),"on-hold":e.formatMessage({id:"chat.announcements.status.onHold"}),completed:e.formatMessage({id:"chat.announcements.status.completed"}),incompleted:e.formatMessage({id:"chat.announcements.status.incompleted"}),aborted:e.formatMessage({id:"chat.announcements.status.aborted"}),done:e.formatMessage({id:"chat.announcements.status.done"}),removed:e.formatMessage({id:"chat.announcements.status.removed"})}),[e])})(),n=SB();return"v1.0"===e?[[t.scheduled,n.scheduled],[t.canceled,n.canceled],[t.running,n.running],[t.aborted,n.stopped],[t.done,n.completed]]:"v1.5"===e?[[t.scheduled,n.scheduled],[t.removed,n.canceled],[t.running,n.running],[t.canceled,n.stopped],[t.paused,n.paused],[t.completed,n.completed],[t.incompleted,n.incompleted]]:[[t.scheduled,n.scheduled],[t.canceled,n.canceled],[t.running,n.running],[t.stopped,n.stopped],[t.paused,n.paused],[t["on-hold"],n["on-hold"]],[t.completed,n.completed],[t.incompleted,n.incompleted]]},IB={scheduled:"blue",running:"purple",canceled:"neutral",aborted:"neutral",done:"green"},MB={scheduled:"blue",removed:"neutral",running:"purple",canceled:"neutral",paused:"orange",completed:"green",incompleted:"green"},DB={running:"purple",scheduled:"blue",paused:"orange","on-hold":"orange",completed:"green",incompleted:"green",canceled:"neutral",stopped:"neutral"},AB=({status:e,tooltipPlacement:t="bottom",disableTooltip:n})=>{const a=vB(),i=SB(),s="v1.0"===a&&IB[e]||"v1.5"===a&&MB[e]||"v1.6"===a&&DB[e]||"neutral",l=Object(W.jsx)(o.Lozenge,{color:s,children:e});return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,disabled:n,content:i[e],placement:t,portalId:"portal_popup",tooltipContentStyle:Object(r.css)(["width:256px;b{font-weight:600;}"]),children:l})},NB=Object(a.createContext)(c.a.tz.guess()),RB=Object(a.createContext)(()=>{}),PB=({children:e})=>{const[t,n]=Object(a.useState)(H.ClientStorage.get("announcementTimezone")||c.a.tz.guess()),i=Object(a.useCallback)(e=>{n(e),H.ClientStorage.set("announcementTimezone",e)},[]);return Object(W.jsx)(NB.Provider,{value:t,children:Object(W.jsx)(RB.Provider,{value:i,children:e})})},LB=()=>Object(a.useContext)(NB),UB=r.default.div.withConfig({displayName:"EllipsizedText__Container",componentId:"k5oa0u-0"})([""]),$B=({content:e,showMoreDialogTitle:t})=>{const n=Object(E.a)(),i=Object(a.useRef)(null),[s,r]=Object(a.useState)(""),l=Object(P.W)({dialogTypes:A.a.AnnouncementDataDisplay,dialogProps:{title:t,content:e}});return Object(a.useEffect)(()=>{if(null==i.current)return;const{current:t}=i;if(t.scrollHeight<=60)return;const{textContent:a}=e.split("").reduce(({scrollHeight:e,textContent:a,isFinal:i},s)=>{if(i)return{scrollHeight:e,textContent:a,isFinal:i};const r=a+s;t.textContent=`${r}... `;const o=document.createElement("span");return o.textContent=n.formatMessage({id:"chat.announcements.detail.info.btn.more"}),o.setAttribute("style","font-weight: 500; vertical-align: baseline;"),t.append(o),t.scrollHeight>60&&e<=60?{scrollHeight:e,textContent:a,isFinal:!0}:{scrollHeight:t.scrollHeight,textContent:r,isFinal:!1}},{scrollHeight:0,textContent:"",isFinal:!1});r(a)},[n,e]),e?Object(W.jsx)(UB,{ref:i,children:s?Object(W.jsxs)(W.Fragment,{children:[s,"..."," ",Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,role:"button",onClick:l,children:n.formatMessage({id:"chat.announcements.detail.info.btn.more"})})]}):e}):null},BB=(e,t,n)=>"v1.0"===n?((e,t)=>{switch(t){case"message":return{...e.announcement,content:e.announcement.message};case"target_at":return e.mode;case"target_channel_type":return e.target_distinct;case"unique_id":return e.event_id;case"completed_at":return e.done_at;case"announcement_group":return e.group;case"create_channel_options":return e.channel_creation_options;default:return e[t]}})(e,t):"announcement_group"===t&&n?((e,t)=>({"v1.0":e.group,"v1.5":e.custom_type,"v1.6":e.announcement_group}[t]))(e,n):e[t],VB="ALL_STATUS",zB=[{key:"sender_all_channels",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.senderAllChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.senderAllChannelsDescription"},{key:"target_channels",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetChannelsDescription"},{key:"target_users_included_channels",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersIncludedChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersIncludedChannelsDescription"},{key:"target_users_only_channels",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersOnlyChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersOnlyChannelsDescription"},{key:"my_channels",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.senderAllChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.senderAllChannelsDescription"},{key:"target_users_include_in",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersIncludedChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersIncludedChannelsDescription"},{key:"target_users_exactly_in",labelIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersOnlyChannels",descriptionIntlKey:"chat.announcements.createAnnouncement.fields.targetAt_lbl.targetUsersOnlyChannelsDescription"}],HB=[{key:"distinct",labelIntlKey:"chat.announcements.targetChannelType.distinct",descriptionIntlKey:"chat.announcements.targetChannelType.distinctDescription"},{key:"non_distinct",labelIntlKey:"chat.announcements.targetChannelType.nonDistinct",descriptionIntlKey:"chat.announcements.targetChannelType.nonDistinctDescription"},{key:"all",labelIntlKey:"chat.announcements.targetChannelType.all",descriptionIntlKey:"chat.announcements.targetChannelType.allDescription"}],qB=e=>IS()(e).format({thousandSeparated:!0}),GB=e=>`${IS()(100*e).format("0,0.00")}%`,WB=(e,t)=>e?c.a.tz(e,"HHmm","UTC").tz(t).format("HH:mm"):f.Z,KB=(e,t,n=f.B)=>`${c()(e).tz(t).format(`${n} [(UTC]Z`)}, ${t})`,YB=(e,t)=>{const n=e.map(e=>e.join(",")).join("\n"),a=new Blob([n],{type:"text/csv"}),i=document.createElement("a");i.setAttribute("href",window.URL.createObjectURL(a)),i.setAttribute("download",`${t}.csv`),document.body.appendChild(i),i.click()},QB=(e,t)=>{YB([["user_id","channel_url","has_opened"],...t.map(({user_id:e,channel_url:t,has_opened:n})=>[e,t,Number(n)])],`announcement_open_status_${e}`)},JB=()=>{const e=Object(E.a)(),t=vB()||"";return Object(a.useMemo)(()=>({announcementGroup:{"v1.0":"Group Name","v1.5":"Custom type","v1.6":e.formatMessage({id:"chat.announcements.detail.info.announcementGroup.label"})}[t],completedAt:{"v1.0":"Done on","v1.5":e.formatMessage({id:"chat.announcements.detail.info.completedAt.label"}),"v1.6":e.formatMessage({id:"chat.announcements.detail.info.completedAt.label"})}[t]}),[e,t])},XB=r.default.div.withConfig({displayName:"AnnouncementDetailInfo__Container",componentId:"sc-1q4zqx0-0"})(["border:1px solid ",";border-radius:4px;"],Object(o.cssVariables)("neutral-3")),ZB=r.default.dl.withConfig({displayName:"AnnouncementDetailInfo__DList",componentId:"sc-1q4zqx0-1"})(["display:grid;grid-template-columns:180px 1fr;grid-gap:16px 40px;padding:24px;& + &{border-top:1px solid ",";}dt{",";color:",";}dd{",";color:",";&:empty::after{content:'","';}}& &{grid-gap:8px 24px;margin-top:16px;border-top:1px solid ",";padding:0;padding-top:16px;dt{font-weight:400;}}"],Object(o.cssVariables)("neutral-3"),o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-7"),f.Z,Object(o.cssVariables)("neutral-3")),eV={ADMM:"chat.announcements.detail.info.type.admm",BRDM:"chat.announcements.detail.info.type.admm",MESG:"chat.announcements.detail.info.type.mesg"},tV={non_distinct:"chat.announcements.targetChannelType.nonDistinct",distinct:"chat.announcements.targetChannelType.distinct",group_chat:"chat.announcements.targetChannelType.nonDistinct",group_dm:"chat.announcements.targetChannelType.distinct",new_only:"chat.announcements.targetChannelType.nonDistinct",existing_only:"chat.announcements.targetChannelType.distinct",all:"chat.announcements.targetChannelType.all"},nV=e=>e&&Object(W.jsx)(o.Tag,{children:e}),aV=Object(r.default)(o.Link).withConfig({displayName:"AnnouncementDetailInfo__LoadingLink",componentId:"sc-1q4zqx0-2"})(["",""],({isLoading:e})=>e&&Object(r.css)(["&::after{display:block;content:'';animation:loading 1.5s infinite;}@keyframes loading{0%{content:'';}25%{content:'.';}50%{content:'..';}75%{content:'...';}}"]));var iV=Object(r.default)(aV).withConfig({displayName:"AnnouncementDetailInfo___StyledLoadingLink",componentId:"sc-1q4zqx0-3"})(["margin-left:8px;"]),sV=Object(r.default)("dd").withConfig({displayName:"AnnouncementDetailInfo___StyledDd",componentId:"sc-1q4zqx0-4"})(["*{display:inline;vertical-align:baseline;}b{font-weight:500;}span{margin-left:8px;}"]);const rV=({announcement:e})=>{const t=Object(E.a)(),n=Object(P.c)(),i=LB(),s=vB(),r=JB(),l=SB(!0),c=Object(a.useCallback)(e=>{var n;const{labelIntlKey:a}=null!=(n=zB.find(t=>t.key===e))?n:{};return a?t.formatMessage({id:a}):e},[t]),d=Object(a.useCallback)(e=>e?KB(e,i):f.Z,[i]),[u,p,g,h,m,b]=["unique_id","message","cease_at","resume_at","end_at","target_at"].map(t=>BB(e,t,s)),j=BB(e,"create_channel_options",s),{isAvailable:y,isPreparingCSV:O,download:v}=((e,t)=>{var n;const[i,s]=Object(a.useState)({open_status:[],next:""}),[r,l]=Object(a.useState)(!1),c=Object(P.L)({data:i,isPreparingCSV:r});Object(a.useEffect)(()=>{(async()=>{try{const{data:n}=await Object(js.getAnnouncementOpenStatus)({appId:e,eventId:t,limit:1});s(n)}catch(e){}})()},[e,t]);const d=Object(a.useCallback)(async()=>{const{current:n}=c;if(n.isPreparingCSV)return;if(!n.data.next)return void QB(t,n.data.open_status);l(!0);const a=[...n.data.open_status];let i=n.data.next;try{for(;i;){const{data:n}=await Object(js.getAnnouncementOpenStatus)({appId:e,eventId:t,token:i,limit:100});a.push(...n.open_status),i=n.next}QB(t,a),s({open_status:a,next:""})}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{l(!1)}},[e,t,c]);return{isAvailable:(null!=(n=null==i?void 0:i.open_status.length)?n:0)>0,isPreparingCSV:r,download:d}})(n,u),x=b.startsWith("target_users");return Object(W.jsxs)(XB,{children:[Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.id"})}),Object(W.jsx)("dd",{children:u}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.status"})}),Object(W.jsxs)(sV,{children:[Object(W.jsx)(AB,{status:e.status,disableTooltip:!0})," ",Object(W.jsx)("span",{children:l[e.status]})]})]}),Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.type.label"})}),Object(W.jsx)("dd",{children:t.formatMessage({id:eV[p.type]})}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.senderId.label"})}),Object(W.jsx)("dd",{children:p.user_id}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.message.label"})}),Object(W.jsx)("dd",{children:Object(W.jsx)($B,{content:p.content,showMoreDialogTitle:t.formatMessage({id:"chat.announcements.detail.info.message.label"})})}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.messageData.label"})}),Object(W.jsx)("dd",{children:p.data&&Object(W.jsx)($B,{content:p.data,showMoreDialogTitle:t.formatMessage({id:"chat.announcements.detail.info.messageData.label"})})}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.messageCustomType.label"})}),Object(W.jsx)("dd",{children:nV(p.custom_type)}),Object(W.jsx)("dt",{children:r.announcementGroup}),Object(W.jsx)("dd",{children:nV(BB(e,"announcement_group",s))})]}),Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.targetAt.label"})}),Object(W.jsx)("dd",{children:c(b)}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.targetUserCount.label"})}),Object(W.jsxs)("dd",{children:[e.target_user_count<0?t.formatMessage({id:"chat.announcements.detail.info.targetCount.notApplicable"}):qB(e.target_user_count),y&&Object(W.jsx)(iV,{role:"button",disabled:O,isLoading:O,onClick:v,variant:o.LinkVariant.Inline,children:t.formatMessage({id:"chat.announcements.detail.info.targetUserCount.btn.downloadAnnouncementOpenStatus"})})]}),x&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.targetChannelType.label"})}),Object(W.jsx)("dd",{children:t.formatMessage({id:tV[BB(e,"target_channel_type",s)]})})]}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.targetChannelCount.label"})}),Object(W.jsx)("dd",{children:e.target_channel_count<0?t.formatMessage({id:"chat.announcements.detail.info.targetCount.notApplicable"}):qB(e.target_channel_count)}),x&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannel"})}),Object(W.jsx)("dd",{children:e.create_channel?Object(W.jsxs)(W.Fragment,{children:[t.formatMessage({id:"chat.announcements.detail.info.createChannel.true"}),Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.type"})}),Object(W.jsx)("dd",{children:j.distinct?t.formatMessage({id:"chat.announcements.targetChannelType.distinct"}):t.formatMessage({id:"chat.announcements.targetChannelType.nonDistinct"})}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.name"})}),Object(W.jsx)("dd",{children:j.name}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.coverImageUrl"})}),Object(W.jsx)("dd",{children:j.cover_url}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.customType"})}),Object(W.jsx)("dd",{children:nV(j.custom_type)}),Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.data"})}),Object(W.jsx)("dd",{children:j.data&&Object(W.jsx)($B,{content:j.data,showMoreDialogTitle:t.formatMessage({id:"chat.announcements.detail.info.createChannelOptions.data"})})})]})]}):t.formatMessage({id:"chat.announcements.detail.info.createChannel.false"})})]})]}),Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.scheduledAt.label"})}),Object(W.jsx)("dd",{children:d(e.scheduled_at)}),g&&h&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.ceaseAtResumeAt.label"})}),Object(W.jsxs)("dd",{children:[WB(g,i),"–",WB(h,i)]})]}),m&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.endAt.label"})}),Object(W.jsx)("dd",{children:d(m)})]}),Object(W.jsx)("dt",{children:r.completedAt}),Object(W.jsx)("dd",{children:d(BB(e,"completed_at",s))})]}),Object(W.jsxs)(ZB,{children:[Object(W.jsx)("dt",{children:t.formatMessage({id:"chat.announcements.detail.info.enablePush.label"})}),Object(W.jsx)("dd",{children:t.formatMessage({id:e.enable_push?"chat.announcements.item.enablePush.on":"chat.announcements.item.enablePush.off"})})]})]})};var oV=n("MO+k"),lV=n.n(oV);const cV=r.default.div.withConfig({displayName:"OpenRateChart__Container",componentId:"sc-1degw7f-0"})(["display:flex;flex-direction:column;align-items:stretch;width:100%;"]),dV=r.default.div.withConfig({displayName:"OpenRateChart__CanvasWrapper",componentId:"sc-1degw7f-1"})(["position:relative;height:","px;padding-left:40px;padding-right:24px;"],259),uV=r.default.div.withConfig({displayName:"OpenRateChart__YAxisScaleLabel",componentId:"sc-1degw7f-2"})(["position:absolute;transform:rotate(-90deg);transform-origin:top ",";top:","px;",";font-size:14px;line-height:20px;color:",";text-align:center;width:","px;user-select:none;"],({position:e})=>e,({position:e})=>"left"===e?252:0,({position:e})=>"left"===e?"left: 0":"right: 20px",Object(o.cssVariables)("neutral-10"),252),pV=r.default.div.withConfig({displayName:"OpenRateChart__XAxisScaleLabel",componentId:"sc-1degw7f-3"})(["margin-bottom:24px;user-select:none;",";text-align:center;color:",";"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),gV=r.default.div.withConfig({displayName:"OpenRateChart__Legend",componentId:"sc-1degw7f-4"})(["text-align:center;user-select:none;ul{display:inline-grid;grid-auto-flow:column;grid-gap:16px;margin:0 auto;list-style:none;li{position:relative;padding-left:16px;color:",";",";&::before{display:block;position:absolute;top:50%;left:0;margin-top:-4px;border-radius:4px;width:8px;height:8px;content:'';}&:first-child::before{background:",";}&:last-child::before{background:",";}}}"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("blue-5"));var hV;!function(e){e[e.OneDay=24]="OneDay",e[e.TwoDays=48]="TwoDays",e[e.FiveDays=120]="FiveDays",e[e.Week=168]="Week"}(hV||(hV={}));const mV={24:"chat.announcements.detail.statistics.period.oneDay",48:"chat.announcements.detail.statistics.period.twoDays",120:"chat.announcements.detail.statistics.period.fiveDays",168:"chat.announcements.detail.statistics.period.week"},fV=r.default.div.withConfig({displayName:"AnnouncementStatistics__Container",componentId:"tqbv2j-0"})(["border:1px solid ",";border-radius:4px;"],Object(o.cssVariables)("neutral-3")),bV=Object(r.default)(fV).withConfig({displayName:"AnnouncementStatistics__SummaryContainer",componentId:"tqbv2j-1"})(["display:grid;grid-template-columns:repeat(4,1fr);grid-gap:16px 0;align-items:stretch;height:56px;"]),jV=r.default.div.withConfig({displayName:"AnnouncementStatistics__Summary",componentId:"tqbv2j-2"})(["display:flex;justify-content:space-between;align-items:center;padding:0 24px;text-align:right;",";color:",";& + &{border-left:1px solid ",";}"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7"),Object(o.cssVariables)("neutral-3")),yV=r.default.div.withConfig({displayName:"AnnouncementStatistics__SummaryLabel",componentId:"tqbv2j-3"})(["",";color:",";"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-10")),OV=Object(r.default)(fV).withConfig({displayName:"AnnouncementStatistics__ChartContainer",componentId:"tqbv2j-4"})(["display:flex;flex-direction:row;flex-wrap:wrap;padding:24px;margin-top:16px;"]);var vV=Object(r.default)(o.Button).withConfig({displayName:"AnnouncementStatistics___StyledButton",componentId:"tqbv2j-5"})(["margin-left:auto;"]),xV=Object(r.default)(({hours:e,cumulativeOpenRates:t,openCounts:n,className:i})=>{var s,r;const l=Object(a.useRef)(null),c=Object(a.useRef)(),d=Object(a.useRef)(null),[u,p]=Object(a.useState)(),g=Object(E.a)(),h=Object(a.useMemo)(()=>({cumulativeOpenRate:t.slice(0,e),openCount:n.slice(0,e)}),[t,e,n]),m=Object(a.useCallback)((t,n)=>e<=48||t<24?g.formatMessage({id:n?"chat.announcements.detail.statistics.chart.xAxisLabel.hours":"chat.announcements.detail.statistics.chart.tooltip.hours"},{hours:t}):g.formatMessage({id:n?"chat.announcements.detail.statistics.chart.xAxisLabel.daysAndHours":"chat.announcements.detail.statistics.chart.tooltip.daysAndHours"},{days:Math.floor(t/24),hours:t%24}),[e,g]);return Object(a.useEffect)(()=>{if(null==l.current)return;const{current:t}=l,n=h.cumulativeOpenRate.map((e,t)=>m(t+1,!0)),a=[{label:g.formatMessage({id:"chat.announcements.detail.statistics.chartLegend.openCount"}),backgroundColor:Object(o.cssColors)("purple-7"),borderColor:Object(o.cssColors)("purple-7"),barThickness:e>120?3:6,data:h.openCount,type:"bar",yAxisID:"left-y-axis"},{label:g.formatMessage({id:"chat.announcements.detail.statistics.chartLegend.openRate"}),backgroundColor:"transparent",borderColor:Object(o.cssColors)("blue-5"),pointRadius:0,pointHoverRadius:4,pointHoverBorderWidth:2,pointHoverBorderColor:"white",pointBackgroundColor:Object(o.cssColors)("blue-5"),borderWidth:2,lineTension:0,borderCapStyle:"round",pointHitRadius:3,data:h.cumulativeOpenRate,yAxisID:"right-y-axis"}],i=[{offset:!0,ticks:{callback:24===e?e=>e:e<=48?(e,t)=>(t+1)%6==0?e:"":(e,t)=>(t+1)%12==0?e:"",maxRotation:0,autoSkip:!1,fontSize:11,fontColor:Object(o.cssColors)("neutral-7"),lineHeight:12/11},gridLines:{display:!1}}];if(c.current){const{current:e}=c;return e.data={labels:n,datasets:a},e.options.scales&&(e.options.scales.xAxes=i),void e.update()}const s=new lV.a(t,{type:"line",data:{labels:n,datasets:a},options:{maintainAspectRatio:!1,hover:{mode:"index",intersect:!1,animationDuration:0},tooltips:{enabled:!1,custom:e=>{p(e)},mode:"index",intersect:!1,position:"average"},legend:{display:!1},scales:{xAxes:i,yAxes:[{id:"left-y-axis",type:"linear",position:"left",ticks:{beginAtZero:!0,maxTicksLimit:5,precision:0,fontSize:11,fontColor:Object(o.cssColors)("neutral-7"),lineHeight:12/11},gridLines:{display:!1}},{id:"right-y-axis",type:"linear",position:"right",ticks:{max:1,min:0,fontSize:11,fontColor:Object(o.cssColors)("neutral-7"),lineHeight:12/11,stepSize:.25,callback:e=>`${100*parseFloat(e)}%`},gridLines:{display:!0,color:Object(sr.rgba)(Object(o.cssColors)("neutral-9"),.08),drawBorder:!1}}]}}});c.current=s,d.current&&(d.current.innerHTML=s.generateLegend())},[h.cumulativeOpenRate,h.openCount,m,e,g]),Object(W.jsxs)(cV,{children:[Object(W.jsxs)(dV,{className:i,children:[Object(W.jsx)("canvas",{ref:l}),Object(W.jsx)(uV,{position:"left",children:g.formatMessage({id:"chat.announcements.detail.statistics.chart.yAxisLabel.openCount"})}),u&&Object(W.jsx)(fb.h,{canvas:l.current,tooltip:u,datasets:null!=(s=null==(r=c.current)?void 0:r.data.datasets)?s:[],xLabelFormatter:({index:e})=>m((null!=e?e:0)+1),valueFormatter:({value:e,datasetIndex:t})=>0===t?IS()(e).format({thousandSeparated:!0}):IS()(e).format({output:"percent",mantissa:2}),colors:[Object(o.cssColors)("blue-5"),Object(o.cssColors)("purple-7")]}),Object(W.jsx)(uV,{position:"right",children:g.formatMessage({id:"chat.announcements.detail.statistics.chart.yAxisLabel.openRate"})})]}),Object(W.jsx)(pV,{children:g.formatMessage({id:"chat.announcements.detail.statistics.chart.xAxisLabel.title"})}),Object(W.jsx)(gV,{ref:d})]})}).withConfig({displayName:"AnnouncementStatistics___StyledOpenRateChart",componentId:"tqbv2j-6"})(["width:100%;margin-top:34px;",""],e=>e._css);const _V=({announcement:e,stats:t})=>{var n,i;const s=Object(E.a)(),r=vB(),[l,c]=Object(a.useState)(hV.OneDay);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(bV,{children:[Object(W.jsxs)(jV,{children:[Object(W.jsx)(yV,{children:s.formatMessage({id:"chat.announcements.detail.statistics.targetUserCount"})}),e&&qB(e.target_user_count)]}),Object(W.jsxs)(jV,{children:[Object(W.jsx)(yV,{children:s.formatMessage({id:"chat.announcements.detail.statistics.sentUserCount"})}),e&&qB(e.sent_user_count)]}),Object(W.jsxs)(jV,{children:[Object(W.jsx)(yV,{children:s.formatMessage({id:"chat.announcements.detail.statistics.openCount"})}),e&&qB(e.open_count)]}),Object(W.jsxs)(jV,{children:[Object(W.jsx)(yV,{children:s.formatMessage({id:"chat.announcements.detail.statistics.openRate"})}),e&&GB(e.open_rate)]})]}),Object(W.jsxs)(OV,{children:[Object(W.jsx)(o.Dropdown,{size:"small",selectedItem:l,onChange:Object(H.onDropdownChangeIgnoreNull)(c),items:[hV.OneDay,hV.TwoDays,hV.FiveDays,hV.Week],itemToString:e=>s.formatMessage({id:mV[e]})}),Object(W.jsx)(vV,{size:"small",buttonType:"secondary",icon:"export",onClick:()=>{if(null==t)return;const{open_counts:n,open_rates:a,cumulative_open_rates:i,cumulative_open_counts:s}=t,o=n.reduce((e,t,n)=>(e.push([n+1,t,s[n],a[n],i[n]]),e),[["hour","open_count","cumulative_open_count","open_rate","cumulative_open_rate"]]),l=e?BB(e,"unique_id",r):"";YB(o,`announcement_stats_${l}`)},disabled:null==t,children:s.formatMessage({id:"chat.announcements.detail.statistics.btn.export"})}),Object(W.jsx)(xV,{cumulativeOpenRates:null!=(n=null==t?void 0:t.cumulative_open_rates)?n:[],openCounts:null!=(i=null==t?void 0:t.open_counts)?i:[],hours:l,_css:null==t&&"pointer-events: none;"})]})]})};var CV=n("QbLZ"),kV=n.n(CV),wV=n("iCc5"),TV=n.n(wV),SV=n("FYw3"),EV=n.n(SV),IV=n("mRg0"),MV=n.n(IV);function DV(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var AV=n("LIAx"),NV=n.n(AV);function RV(e,t,n,a){var i=jn.a.unstable_batchedUpdates?function(e){jn.a.unstable_batchedUpdates(n,e)}:n;return NV()(e,t,i,a)}var PV=n("V7oC"),LV=n.n(PV),FV=function(e){function t(){var e,n,a,i;TV()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=a=EV()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.removeContainer=function(){a.container&&(jn.a.unmountComponentAtNode(a.container),a.container.parentNode.removeChild(a.container),a.container=null)},a.renderComponent=function(e,t){var n=a.props,i=n.visible,s=n.getComponent,r=n.forceRender,o=n.getContainer,l=n.parent;(i||l._component||r)&&(a.container||(a.container=o()),jn.a.unstable_renderSubtreeIntoContainer(l,s(e),a.container,(function(){t&&t.call(this)})))},i=n,EV()(a,i)}return MV()(t,e),LV()(t,[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}]),t}(i.a.Component);FV.propTypes={autoMount:Uu.a.bool,autoDestroy:Uu.a.bool,visible:Uu.a.bool,forceRender:Uu.a.bool,parent:Uu.a.any,getComponent:Uu.a.func.isRequired,getContainer:Uu.a.func.isRequired,children:Uu.a.func.isRequired},FV.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};var UV=FV,$V=function(e){function t(){return TV()(this,t),EV()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return MV()(t,e),LV()(t,[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(e){var t=this.props.didUpdate;t&&t(e)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?jn.a.createPortal(this.props.children,this._container):null}}]),t}(i.a.Component);$V.propTypes={getContainer:Uu.a.func.isRequired,children:Uu.a.node.isRequired,didUpdate:Uu.a.func};var BV=$V,VV=n("TSYQ"),zV=n.n(VV);function HV(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function qV(e,t){this[e]=t}var GV=void 0,WV={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function KV(){if(void 0!==GV)return GV;GV="";var e=document.createElement("p").style;for(var t in WV)t+"Transform"in e&&(GV=t);return GV}function YV(){return KV()?KV()+"TransitionProperty":"transitionProperty"}function QV(){return KV()?KV()+"Transform":"transform"}function JV(e,t){var n=YV();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function XV(e,t){var n=QV();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var ZV=/matrix\((.*)\)/,ez=/matrix3d\((.*)\)/;var tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nz=void 0;function az(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function iz(e,t,n){var a=n;if("object"!==(void 0===t?"undefined":tz(t)))return void 0!==a?("number"==typeof a&&(a+="px"),void(e.style[t]=a)):nz(e,t);for(var i in t)t.hasOwnProperty(i)&&iz(e,i,t[i])}function sz(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],a="scroll"+(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[a])&&(n=i.body[a])}return n}function rz(e){return sz(e)}function oz(e){return sz(e,!0)}function lz(e){var t=function(e){var t,n=void 0,a=void 0,i=e.ownerDocument,s=i.body,r=i&&i.documentElement;return n=(t=e.getBoundingClientRect()).left,a=t.top,{left:n-=r.clientLeft||s.clientLeft||0,top:a-=r.clientTop||s.clientTop||0}}(e),n=e.ownerDocument,a=n.defaultView||n.parentWindow;return t.left+=rz(a),t.top+=oz(a),t}function cz(e){return null!=e&&e==e.window}function dz(e){return cz(e)?e.document:9===e.nodeType?e:e.ownerDocument}var uz=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),pz=/^(top|right|bottom|left)$/,gz="left";function hz(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function mz(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function fz(e,t,n){"static"===iz(e,"position")&&(e.style.position="relative");var a=-999,i=-999,s=hz("left",n),r=hz("top",n),o=mz(s),l=mz(r);"left"!==s&&(a=999),"top"!==r&&(i=999);var c,d="",u=lz(e);("left"in t||"top"in t)&&(d=(c=e).style.transitionProperty||c.style[YV()]||"",JV(e,"none")),"left"in t&&(e.style[o]="",e.style[s]=a+"px"),"top"in t&&(e.style[l]="",e.style[r]=i+"px"),az(e);var p=lz(e),g={};for(var h in t)if(t.hasOwnProperty(h)){var m=hz(h,n),f="left"===h?a:i,b=u[h]-p[h];g[m]=m===h?f+b:f-b}iz(e,g),az(e),("left"in t||"top"in t)&&JV(e,d);var j={};for(var y in t)if(t.hasOwnProperty(y)){var O=hz(y,n),v=t[y]-u[y];j[O]=y===O?g[O]+v:g[O]-v}iz(e,j)}function bz(e,t){var n=lz(e),a=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(QV());if(n&&"none"!==n){var a=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(a[12]||a[4],0),y:parseFloat(a[13]||a[5],0)}}return{x:0,y:0}}(e),i={x:a.x,y:a.y};"left"in t&&(i.x=a.x+t.left-n.left),"top"in t&&(i.y=a.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),a=n.getPropertyValue("transform")||n.getPropertyValue(QV());if(a&&"none"!==a){var i=void 0,s=a.match(ZV);if(s)(i=(s=s[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,XV(e,"matrix("+i.join(",")+")");else(i=a.match(ez)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,XV(e,"matrix3d("+i.join(",")+")")}else XV(e,"translateX("+t.x+"px) translateY("+t.y+"px) translateZ(0)")}(e,i)}function jz(e,t){for(var n=0;n<e.length;n++)t(e[n])}function yz(e){return"border-box"===nz(e,"boxSizing")}"undefined"!=typeof window&&(nz=window.getComputedStyle?function(e,t,n){var a=n,i="",s=dz(e);return(a=a||s.defaultView.getComputedStyle(e,null))&&(i=a.getPropertyValue(t)||a[t]),i}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(uz.test(n)&&!pz.test(t)){var a=e.style,i=a[gz],s=e.runtimeStyle[gz];e.runtimeStyle[gz]=e.currentStyle[gz],a[gz]="fontSize"===t?"1em":n||0,n=a.pixelLeft+"px",a[gz]=i,e.runtimeStyle[gz]=s}return""===n?"auto":n});var Oz=["margin","border","padding"];function vz(e,t,n){var a={},i=e.style,s=void 0;for(s in t)t.hasOwnProperty(s)&&(a[s]=i[s],i[s]=t[s]);for(s in n.call(e),t)t.hasOwnProperty(s)&&(i[s]=a[s])}function xz(e,t,n){var a=0,i=void 0,s=void 0,r=void 0;for(s=0;s<t.length;s++)if(i=t[s])for(r=0;r<n.length;r++){var o=void 0;o="border"===i?""+i+n[r]+"Width":i+n[r],a+=parseFloat(nz(e,o))||0}return a}var _z={};function Cz(e,t,n){var a=n;if(cz(e))return"width"===t?_z.viewportWidth(e):_z.viewportHeight(e);if(9===e.nodeType)return"width"===t?_z.docWidth(e):_z.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],s="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,r=(nz(e),yz(e)),o=0;(null==s||s<=0)&&(s=void 0,(null==(o=nz(e,t))||Number(o)<0)&&(o=e.style[t]||0),o=parseFloat(o)||0),void 0===a&&(a=r?1:-1);var l=void 0!==s||r,c=s||o;return-1===a?l?c-xz(e,["border","padding"],i):o:l?1===a?c:c+(2===a?-xz(e,["border"],i):xz(e,["margin"],i)):o+xz(e,Oz.slice(a),i)}jz(["Width","Height"],(function(e){_z["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],_z["viewport"+e](n))},_z["viewport"+e]=function(t){var n="client"+e,a=t.document,i=a.body,s=a.documentElement[n];return"CSS1Compat"===a.compatMode&&s||i&&i[n]||s}}));var kz={position:"absolute",visibility:"hidden",display:"block"};function wz(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=void 0,i=t[0];return 0!==i.offsetWidth?a=Cz.apply(void 0,t):vz(i,kz,(function(){a=Cz.apply(void 0,t)})),a}function Tz(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}jz(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);_z["outer"+t]=function(t,n){return t&&wz(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];_z[e]=function(t,a){var i=a;if(void 0===i)return t&&wz(t,e,-1);if(t){nz(t);return yz(t)&&(i+=xz(t,["padding","border"],n)),iz(t,e,i)}}}));var Sz={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:dz,offset:function(e,t,n){if(void 0===t)return lz(e);!function(e,t,n){if(n.ignoreShake){var a=lz(e),i=a.left.toFixed(0),s=a.top.toFixed(0),r=t.left.toFixed(0),o=t.top.toFixed(0);if(i===r&&s===o)return}n.useCssRight||n.useCssBottom?fz(e,t,n):n.useCssTransform&&QV()in document.body.style?bz(e,t):fz(e,t,n)}(e,t,n||{})},isWindow:cz,each:jz,css:iz,clone:function(e){var t=void 0,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Tz,getWindowScrollLeft:function(e){return rz(e)},getWindowScrollTop:function(e){return oz(e)},merge:function(){for(var e={},t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var i=0;i<n.length;i++)Sz.mix(e,n[i]);return e},viewportWidth:0,viewportHeight:0};Tz(Sz,_z);var Ez=Sz;var Iz=function(e){if(Ez.isWindow(e)||9===e.nodeType)return null;var t=Ez.getDocument(e).body,n=void 0,a=Ez.css(e,"position");if(!("fixed"===a||"absolute"===a))return"html"===e.nodeName.toLowerCase()?null:e.parentNode;for(n=e.parentNode;n&&n!==t;n=n.parentNode)if("static"!==(a=Ez.css(n,"position")))return n;return null};var Mz=function(e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=Iz(e),a=Ez.getDocument(e),i=a.defaultView||a.parentWindow,s=a.body,r=a.documentElement;n;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===n.clientWidth||n===s||n===r||"visible"===Ez.css(n,"overflow")){if(n===s||n===r)break}else{var o=Ez.offset(n);o.left+=n.clientLeft,o.top+=n.clientTop,t.top=Math.max(t.top,o.top),t.right=Math.min(t.right,o.left+n.clientWidth),t.bottom=Math.min(t.bottom,o.top+n.clientHeight),t.left=Math.max(t.left,o.left)}n=Iz(n)}var l=null;Ez.isWindow(e)||9===e.nodeType||(l=e.style.position,"absolute"===Ez.css(e,"position")&&(e.style.position="fixed"));var c=Ez.getWindowScrollLeft(i),d=Ez.getWindowScrollTop(i),u=Ez.viewportWidth(i),p=Ez.viewportHeight(i),g=r.scrollWidth,h=r.scrollHeight,m=window.getComputedStyle(s);if("hidden"===m.overflowX&&(g=i.innerWidth),"hidden"===m.overflowY&&(h=i.innerHeight),e.style&&(e.style.position=l),function(e){if(Ez.isWindow(e)||9===e.nodeType)return!1;var t=Ez.getDocument(e).body,n=null;for(n=e.parentNode;n&&n!==t;n=n.parentNode){if("fixed"===Ez.css(n,"position"))return!0}return!1}(e))t.left=Math.max(t.left,c),t.top=Math.max(t.top,d),t.right=Math.min(t.right,c+u),t.bottom=Math.min(t.bottom,d+p);else{var f=Math.max(g,c+u);t.right=Math.min(t.right,f);var b=Math.max(h,d+p);t.bottom=Math.min(t.bottom,b)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null};var Dz=function(e,t,n,a){var i=Ez.clone(e),s={width:t.width,height:t.height};return a.adjustX&&i.left<n.left&&(i.left=n.left),a.resizeWidth&&i.left>=n.left&&i.left+s.width>n.right&&(s.width-=i.left+s.width-n.right),a.adjustX&&i.left+s.width>n.right&&(i.left=Math.max(n.right-s.width,n.left)),a.adjustY&&i.top<n.top&&(i.top=n.top),a.resizeHeight&&i.top>=n.top&&i.top+s.height>n.bottom&&(s.height-=i.top+s.height-n.bottom),a.adjustY&&i.top+s.height>n.bottom&&(i.top=Math.max(n.bottom-s.height,n.top)),Ez.mix(i,s)};var Az=function(e){var t=void 0,n=void 0,a=void 0;if(Ez.isWindow(e)||9===e.nodeType){var i=Ez.getWindow(e);t={left:Ez.getWindowScrollLeft(i),top:Ez.getWindowScrollTop(i)},n=Ez.viewportWidth(i),a=Ez.viewportHeight(i)}else t=Ez.offset(e),n=Ez.outerWidth(e),a=Ez.outerHeight(e);return t.width=n,t.height=a,t};var Nz=function(e,t){var n=t.charAt(0),a=t.charAt(1),i=e.width,s=e.height,r=e.left,o=e.top;return"c"===n?o+=s/2:"b"===n&&(o+=s),"c"===a?r+=i/2:"r"===a&&(r+=i),{left:r,top:o}};var Rz=function(e,t,n,a,i){var s=Nz(t,n[1]),r=Nz(e,n[0]),o=[r.left-s.left,r.top-s.top];return{left:e.left-o[0]+a[0]-i[0],top:e.top-o[1]+a[1]-i[1]}};function Pz(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Lz(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Fz(e,t,n){var a=[];return Ez.each(e,(function(e){a.push(e.replace(t,(function(e){return n[e]})))})),a}function Uz(e,t){return e[t]=-e[t],e}function $z(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Bz(e,t){e[0]=$z(e[0],t.width),e[1]=$z(e[1],t.height)}var Vz=function(e,t,n,a){var i=n.points,s=n.offset||[0,0],r=n.targetOffset||[0,0],o=n.overflow,l=n.source||e;s=[].concat(s),r=[].concat(r),o=o||{};var c={},d=0,u=Mz(l),p=Az(l);Bz(s,p),Bz(r,t);var g=Rz(p,t,i,s,r),h=Ez.merge(p,g);if(u&&(o.adjustX||o.adjustY)&&a){if(o.adjustX&&Pz(g,p,u)){var m=Fz(i,/[lr]/gi,{l:"r",r:"l"}),f=Uz(s,0),b=Uz(r,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(Rz(p,t,m,f,b),p,u)||(d=1,i=m,s=f,r=b)}if(o.adjustY&&Lz(g,p,u)){var j=Fz(i,/[tb]/gi,{t:"b",b:"t"}),y=Uz(s,1),O=Uz(r,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(Rz(p,t,j,y,O),p,u)||(d=1,i=j,s=y,r=O)}d&&(g=Rz(p,t,i,s,r),Ez.mix(h,g));var v=Pz(g,p,u),x=Lz(g,p,u);(v||x)&&(i=n.points,s=n.offset||[0,0],r=n.targetOffset||[0,0]),c.adjustX=o.adjustX&&v,c.adjustY=o.adjustY&&x,(c.adjustX||c.adjustY)&&(h=Dz(g,p,u,c))}return h.width!==p.width&&Ez.css(l,"width",Ez.width(l)+h.width-p.width),h.height!==p.height&&Ez.css(l,"height",Ez.height(l)+h.height-p.height),Ez.offset(l,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:s,targetOffset:r,overflow:c}};function zz(e,t,n){var a=n.target||t,i=Az(a),s=!function(e){var t=Mz(e),n=Az(e);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}(a);return Vz(e,i,n,s)}zz.__getOffsetParent=Iz,zz.__getVisibleRectForElement=Mz;var Hz=zz,qz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var Gz=function(e,t,n){var a=void 0,i=void 0,s=Ez.getDocument(e),r=s.defaultView||s.parentWindow,o=Ez.getWindowScrollLeft(r),l=Ez.getWindowScrollTop(r),c=Ez.viewportWidth(r),d=Ez.viewportHeight(r),u={left:a="pageX"in t?t.pageX:o+t.clientX,top:i="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},p=a>=0&&a<=o+c&&i>=0&&i<=l+d,g=[n.points[0],"cc"];return Vz(e,u,qz({},n,{points:g}),p)};function Wz(e){return e&&"object"==typeof e&&e.window===e}function Kz(e,t){var n=Math.floor(e),a=Math.floor(t);return Math.abs(n-a)<=1}function Yz(e,t){e!==document.activeElement&&DV(t,e)&&e.focus()}function Qz(e){return"function"==typeof e&&e?e():null}function Jz(e){return"object"==typeof e&&e?e:null}var Xz=function(e){function t(){var e,n,a,i;TV()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=a=EV()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.forceAlign=function(){var e=a.props,t=e.disabled,n=e.target,i=e.align,s=e.onAlign;if(!t&&n){var r=jn.a.findDOMNode(a),o=void 0,l=Qz(n),c=Jz(n),d=document.activeElement;l?o=Hz(r,l,i):c&&(o=Gz(r,c,i)),Yz(d,r),s&&s(r,o)}},i=n,EV()(a,i)}return MV()(t,e),LV()(t,[{key:"componentDidMount",value:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(e){var t,n,a=!1,i=this.props;if(!i.disabled){var s=jn.a.findDOMNode(this),r=s?s.getBoundingClientRect():null;if(e.disabled)a=!0;else{var o=Qz(e.target),l=Qz(i.target),c=Jz(e.target),d=Jz(i.target);Wz(o)&&Wz(l)?a=!1:(o!==l||o&&!l&&d||c&&d&&l||d&&!((t=c)===(n=d)||t&&n&&("pageX"in n&&"pageY"in n?t.pageX===n.pageX&&t.pageY===n.pageY:"clientX"in n&&"clientY"in n&&t.clientX===n.clientX&&t.clientY===n.clientY)))&&(a=!0);var u=this.sourceRect||{};a||!s||Kz(u.width,r.width)&&Kz(u.height,r.height)||(a=!0)}this.sourceRect=r}a&&this.forceAlign(),i.monitorWindowResize&&!i.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=function(e,t){var n=void 0;function a(){n&&(clearTimeout(n),n=null)}function i(){a(),n=setTimeout(e,t)}return i.clear=a,i}(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=RV(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.childrenProps,a=t.children,s=i.a.Children.only(a);if(n){var r={};return Object.keys(n).forEach((function(t){r[t]=e.props[n[t]]})),i.a.cloneElement(s,r)}return s}}]),t}(a.Component);Xz.propTypes={childrenProps:Uu.a.object,align:Uu.a.object.isRequired,target:Uu.a.oneOfType([Uu.a.func,Uu.a.shape({clientX:Uu.a.number,clientY:Uu.a.number,pageX:Uu.a.number,pageY:Uu.a.number})]),onAlign:Uu.a.func,monitorBufferTime:Uu.a.number,monitorWindowResize:Uu.a.bool,disabled:Uu.a.bool,children:Uu.a.any},Xz.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var Zz=Xz,eH=n("YEIV"),tH=n.n(eH);function nH(e){var t=[];return i.a.Children.forEach(e,(function(e){t.push(e)})),t}function aH(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function iH(e,t,n){var a=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(a)throw new Error("two child with same key for <rc-animate> children");a=e}})),a}var sH=n("EJiy"),rH=n.n(sH),oH={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},lH={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},cH=[],dH=[];function uH(e,t,n){e.addEventListener(t,n,!1)}function pH(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];for(var s in i)if(s in e){n.push(i[s]);break}}}"AnimationEvent"in window||(delete oH.animationstart.animation,delete lH.animationend.animation),"TransitionEvent"in window||(delete oH.transitionstart.transition,delete lH.transitionend.transition),t(oH,cH),t(lH,dH)}();var gH={startEvents:cH,addStartEventListener:function(e,t){0!==cH.length?cH.forEach((function(n){uH(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==cH.length&&cH.forEach((function(n){pH(e,n,t)}))},endEvents:dH,addEndEventListener:function(e,t){0!==dH.length?dH.forEach((function(n){uH(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==dH.length&&dH.forEach((function(n){pH(e,n,t)}))}},hH=n("PFWz"),mH=n.n(hH),fH=0!==gH.endEvents.length,bH=["Webkit","Moz","O","ms"],jH=["-webkit-","-moz-","-o-","ms-",""];function yH(e,t){for(var n=window.getComputedStyle(e,null),a="",i=0;i<jH.length&&!(a=n.getPropertyValue(jH[i]+t));i++);return a}function OH(e){if(fH){var t=parseFloat(yH(e,"transition-delay"))||0,n=parseFloat(yH(e,"transition-duration"))||0,a=parseFloat(yH(e,"animation-delay"))||0,i=parseFloat(yH(e,"animation-duration"))||0,s=Math.max(n+t,i+a);e.rcEndAnimTimeout=setTimeout((function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()}),1e3*s+200)}}function vH(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var xH=function(e,t,n){var a="object"===(void 0===t?"undefined":rH()(t)),i=a?t.name:t,s=a?t.active:t+"-active",r=n,o=void 0,l=void 0,c=mH()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(r=n.end,o=n.start,l=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),vH(e),c.remove(i),c.remove(s),gH.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,r&&r())},gH.addEndEventListener(e,e.rcEndListener),o&&o(),c.add(i),e.rcAnimTimeout=setTimeout((function(){e.rcAnimTimeout=null,c.add(s),l&&setTimeout(l,0),OH(e)}),30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};xH.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),vH(e),gH.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},gH.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout((function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,OH(e)}),0)},xH.setTransition=function(e,t,n){var a=t,i=n;void 0===n&&(i=a,a=""),a=a||"",bH.forEach((function(t){e.style[t+"Transition"+a]=i}))},xH.isCssAnimationSupported=fH;var _H=xH,CH={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},kH={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},wH=function(e){function t(){return TV()(this,t),EV()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return MV()(t,e),LV()(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){CH.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){CH.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){CH.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,a=jn.a.findDOMNode(this),i=this.props,s=i.transitionName,r="object"==typeof s;this.stop();var o=function(){n.stopper=null,t()};if((fH||!i.animation[e])&&s&&i[kH[e]]){var l=r?s[e]:s+"-"+e,c=l+"-active";r&&s[e+"Active"]&&(c=s[e+"Active"]),this.stopper=_H(a,{name:l,active:c},o)}else this.stopper=i.animation[e](a,o)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(i.a.Component);wH.propTypes={children:Uu.a.any};var TH=wH,SH="rc_animate_"+Date.now();function EH(e){var t=e.children;return i.a.isValidElement(t)&&!t.key?i.a.cloneElement(t,{key:SH}):t}function IH(){}var MH=function(e){function t(e){TV()(this,t);var n=EV()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return DH.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:nH(EH(e))},n.childrenRefs={},n}return MV()(t,e),LV()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=nH(EH(e)),a=this.props;a.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){t.stop(e)}));var s,r,o,l,c=a.showProp,d=this.currentlyAnimatingKeys,u=a.exclusive?nH(EH(a)):this.state.children,p=[];c?(u.forEach((function(e){var t=e&&aH(n,e.key),a=void 0;(a=t&&t.props[c]||!e.props[c]?t:i.a.cloneElement(t||e,tH()({},c,!0)))&&p.push(a)})),n.forEach((function(e){e&&aH(u,e.key)||p.push(e)}))):(s=n,r=[],o={},l=[],u.forEach((function(e){e&&aH(s,e.key)?l.length&&(o[e.key]=l,l=[]):l.push(e)})),s.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(o,e.key)&&(r=r.concat(o[e.key])),r.push(e)})),p=r=r.concat(l)),this.setState({children:p}),n.forEach((function(e){var n=e&&e.key;if(!e||!d[n]){var a=e&&aH(u,n);if(c){var i=e.props[c];if(a)!iH(u,n,c)&&i&&t.keysToEnter.push(n);else i&&t.keysToEnter.push(n)}else a||t.keysToEnter.push(n)}})),u.forEach((function(e){var a=e&&e.key;if(!e||!d[a]){var i=e&&aH(n,a);if(c){var s=e.props[c];if(i)!iH(n,a,c)&&s&&t.keysToLeave.push(a);else s&&t.keysToLeave.push(a)}else i||t.keysToLeave.push(a)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?iH(e,t,n):aH(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,a=null;n&&(a=n.map((function(n){if(null==n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return i.a.createElement(TH,{key:n.key,ref:function(t){e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)})));var s=t.component;if(s){var r=t;return"string"==typeof s&&(r=kV()({className:t.className,style:t.style},t.componentProps)),i.a.createElement(s,r,a)}return a[0]||null}}]),t}(i.a.Component);MH.isAnimate=!0,MH.propTypes={component:Uu.a.any,componentProps:Uu.a.object,animation:Uu.a.object,transitionName:Uu.a.oneOfType([Uu.a.string,Uu.a.object]),transitionEnter:Uu.a.bool,transitionAppear:Uu.a.bool,exclusive:Uu.a.bool,transitionLeave:Uu.a.bool,onEnd:Uu.a.func,onEnter:Uu.a.func,onLeave:Uu.a.func,onAppear:Uu.a.func,showProp:Uu.a.string,children:Uu.a.node},MH.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:IH,onEnter:IH,onLeave:IH,onAppear:IH};var DH=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var a=e.props;if(delete e.currentlyAnimatingKeys[t],!a.exclusive||a===e.nextProps){var i=nH(EH(a));e.isValidChildByKey(i,t)?"appear"===n?CH.allowAppearCallback(a)&&(a.onAppear(t),a.onEnd(t,!0)):CH.allowEnterCallback(a)&&(a.onEnter(t),a.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var a,i,s,r,o=nH(EH(n));if(e.isValidChildByKey(o,t))e.performEnter(t);else{var l=function(){CH.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};a=e.state.children,i=o,s=n.showProp,(r=a.length===i.length)&&a.forEach((function(e,t){var n=i[t];e&&n&&(e&&!n||!e&&n||e.key!==n.key||s&&e.props[s]!==n.props[s])&&(r=!1)})),r?l():e.setState({children:o},l)}}}},AH=MH,NH=n("jo6Y"),RH=n.n(NH),PH=function(e){function t(){return TV()(this,t),EV()(this,e.apply(this,arguments))}return MV()(t,e),t.prototype.shouldComponentUpdate=function(e){return e.hiddenClassName||e.visible},t.prototype.render=function(){var e=this.props,t=e.hiddenClassName,n=e.visible,a=RH()(e,["hiddenClassName","visible"]);return t||i.a.Children.count(a.children)>1?(!n&&t&&(a.className+=" "+t),i.a.createElement("div",a)):i.a.Children.only(a.children)},t}(a.Component);PH.propTypes={children:Uu.a.any,className:Uu.a.string,visible:Uu.a.bool,hiddenClassName:Uu.a.string};var LH=PH,FH=function(e){function t(){return TV()(this,t),EV()(this,e.apply(this,arguments))}return MV()(t,e),t.prototype.render=function(){var e=this.props,t=e.className;return e.visible||(t+=" "+e.hiddenClassName),i.a.createElement("div",{className:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,onTouchStart:e.onTouchStart,style:e.style},i.a.createElement(LH,{className:e.prefixCls+"-content",visible:e.visible},e.children))},t}(a.Component);FH.propTypes={hiddenClassName:Uu.a.string,className:Uu.a.string,prefixCls:Uu.a.string,onMouseEnter:Uu.a.func,onMouseLeave:Uu.a.func,onMouseDown:Uu.a.func,onTouchStart:Uu.a.func,children:Uu.a.any};var UH=FH,$H=function(e){function t(n){TV()(this,t);var a=EV()(this,e.call(this,n));return BH.call(a),a.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},a.savePopupRef=qV.bind(a,"popupInstance"),a.saveAlignRef=qV.bind(a,"alignInstance"),a}return MV()(t,e),t.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},t.prototype.componentDidUpdate=function(){this.setStretchSize()},t.prototype.getPopupDomNode=function(){return jn.a.findDOMNode(this.popupInstance)},t.prototype.getMaskTransitionName=function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},t.prototype.getTransitionName=function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t},t.prototype.getClassName=function(e){return this.props.prefixCls+" "+this.props.className+" "+e},t.prototype.getPopupElement=function(){var e=this,t=this.savePopupRef,n=this.state,a=n.stretchChecked,s=n.targetHeight,r=n.targetWidth,o=this.props,l=o.align,c=o.visible,d=o.prefixCls,u=o.style,p=o.getClassNameFromAlign,g=o.destroyPopupOnHide,h=o.stretch,m=o.children,f=o.onMouseEnter,b=o.onMouseLeave,j=o.onMouseDown,y=o.onTouchStart,O=this.getClassName(this.currentAlignClassName||p(l)),v=d+"-hidden";c||(this.currentAlignClassName=null);var x={};h&&(-1!==h.indexOf("height")?x.height=s:-1!==h.indexOf("minHeight")&&(x.minHeight=s),-1!==h.indexOf("width")?x.width=r:-1!==h.indexOf("minWidth")&&(x.minWidth=r),a||(x.visibility="hidden",setTimeout((function(){e.alignInstance&&e.alignInstance.forceAlign()}),0)));var _={className:O,prefixCls:d,ref:t,onMouseEnter:f,onMouseLeave:b,onMouseDown:j,onTouchStart:y,style:kV()({},x,u,this.getZIndexStyle())};return g?i.a.createElement(AH,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},c?i.a.createElement(Zz,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:l,onAlign:this.onAlign},i.a.createElement(UH,kV()({visible:!0},_),m)):null):i.a.createElement(AH,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},i.a.createElement(Zz,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:c,childrenProps:{visible:"xVisible"},disabled:!c,align:l,onAlign:this.onAlign},i.a.createElement(UH,kV()({hiddenClassName:v},_),m)))},t.prototype.getZIndexStyle=function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},t.prototype.getMaskElement=function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=i.a.createElement(LH,{style:this.getZIndexStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible}),n&&(t=i.a.createElement(AH,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t},t.prototype.render=function(){return i.a.createElement("div",null,this.getMaskElement(),this.getPopupElement())},t}(a.Component);$H.propTypes={visible:Uu.a.bool,style:Uu.a.object,getClassNameFromAlign:Uu.a.func,onAlign:Uu.a.func,getRootDomNode:Uu.a.func,align:Uu.a.any,destroyPopupOnHide:Uu.a.bool,className:Uu.a.string,prefixCls:Uu.a.string,onMouseEnter:Uu.a.func,onMouseLeave:Uu.a.func,onMouseDown:Uu.a.func,onTouchStart:Uu.a.func,stretch:Uu.a.string,children:Uu.a.node,point:Uu.a.shape({pageX:Uu.a.number,pageY:Uu.a.number})};var BH=function(){var e=this;this.onAlign=function(t,n){var a=e.props,i=a.getClassNameFromAlign(n);e.currentAlignClassName!==i&&(e.currentAlignClassName=i,t.className=e.getClassName(i)),a.onAlign(t,n)},this.setStretchSize=function(){var t=e.props,n=t.stretch,a=t.getRootDomNode,i=t.visible,s=e.state,r=s.stretchChecked,o=s.targetHeight,l=s.targetWidth;if(n&&i){var c=a();if(c){var d=c.offsetHeight,u=c.offsetWidth;o===d&&l===u&&r||e.setState({stretchChecked:!0,targetHeight:d,targetWidth:u})}}else r&&e.setState({stretchChecked:!1})},this.getTargetElement=function(){return e.props.getRootDomNode()},this.getAlignTarget=function(){var t=e.props.point;return t||e.getTargetElement}},VH=$H;function zH(){}var HH=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],qH=!!bn.createPortal,GH={rcTrigger:Uu.a.shape({onPopupMouseDown:Uu.a.func})},WH=function(e){function t(n){TV()(this,t);var a=EV()(this,e.call(this,n));KH.call(a);var i=void 0;return i="popupVisible"in n?!!n.popupVisible:!!n.defaultPopupVisible,a.prevPopupVisible=i,a.state={popupVisible:i},a}return MV()(t,e),t.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},t.prototype.componentWillMount=function(){var e=this;HH.forEach((function(t){e["fire"+t]=function(n){e.fireEvents(t,n)}}))},t.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},t.prototype.componentWillReceiveProps=function(e){var t=e.popupVisible;void 0!==t&&this.setState({popupVisible:t})},t.prototype.componentDidUpdate=function(e,t){var n=this.props,a=this.state;if(qH||this.renderComponent(null,(function(){t.popupVisible!==a.popupVisible&&n.afterPopupVisibleChange(a.popupVisible)})),this.prevPopupVisible=t.popupVisible,a.popupVisible){var i=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(i=n.getDocument(),this.clickOutsideHandler=RV(i,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(i=i||n.getDocument(),this.touchOutsideHandler=RV(i,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(i=i||n.getDocument(),this.contextMenuOutsideHandler1=RV(i,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=RV(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},t.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},t.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},t.prototype.getPopupAlign=function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,a=e.builtinPlacements;return t&&a?function(e,t,n){var a=e[t]||{};return kV()({},a,n)}(a,t,n):n},t.prototype.setPopupVisible=function(e,t){var n=this.props.alignPoint;this.clearDelayTimer(),this.state.popupVisible!==e&&("popupVisible"in this.props||this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)},t.prototype.delaySetPopupVisible=function(e,t,n){var a=this,i=1e3*t;if(this.clearDelayTimer(),i){var s=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=setTimeout((function(){a.setPopupVisible(e,s),a.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},t.prototype.createTwoChains=function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},t.prototype.isClickToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},t.prototype.isContextMenuToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")},t.prototype.isClickToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},t.prototype.isMouseEnterToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},t.prototype.isMouseLeaveToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},t.prototype.isFocusToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},t.prototype.isBlurToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},t.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},t.prototype.fireEvents=function(e,t){var n=this.props.children.props[e];n&&n(t);var a=this.props[e];a&&a(t)},t.prototype.close=function(){this.setPopupVisible(!1)},t.prototype.render=function(){var e=this,t=this.state.popupVisible,n=this.props,a=n.children,s=n.forceRender,r=n.alignPoint,o=n.className,l=i.a.Children.only(a),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,r&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var d=zV()(l&&l.props&&l.props.className,o);d&&(c.className=d);var u=i.a.cloneElement(l,c);if(!qH)return i.a.createElement(UV,{parent:this,visible:t,autoMount:!1,forceRender:s,getComponent:this.getComponent,getContainer:this.getContainer},(function(t){var n=t.renderComponent;return e.renderComponent=n,u}));var p=void 0;return(t||this._component||s)&&(p=i.a.createElement(BV,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[u,p]},t}(i.a.Component);WH.propTypes={children:Uu.a.any,action:Uu.a.oneOfType([Uu.a.string,Uu.a.arrayOf(Uu.a.string)]),showAction:Uu.a.any,hideAction:Uu.a.any,getPopupClassNameFromAlign:Uu.a.any,onPopupVisibleChange:Uu.a.func,afterPopupVisibleChange:Uu.a.func,popup:Uu.a.oneOfType([Uu.a.node,Uu.a.func]).isRequired,popupStyle:Uu.a.object,prefixCls:Uu.a.string,popupClassName:Uu.a.string,className:Uu.a.string,popupPlacement:Uu.a.string,builtinPlacements:Uu.a.object,popupTransitionName:Uu.a.oneOfType([Uu.a.string,Uu.a.object]),popupAnimation:Uu.a.any,mouseEnterDelay:Uu.a.number,mouseLeaveDelay:Uu.a.number,zIndex:Uu.a.number,focusDelay:Uu.a.number,blurDelay:Uu.a.number,getPopupContainer:Uu.a.func,getDocument:Uu.a.func,forceRender:Uu.a.bool,destroyPopupOnHide:Uu.a.bool,mask:Uu.a.bool,maskClosable:Uu.a.bool,onPopupAlign:Uu.a.func,popupAlign:Uu.a.object,popupVisible:Uu.a.bool,defaultPopupVisible:Uu.a.bool,maskTransitionName:Uu.a.oneOfType([Uu.a.string,Uu.a.object]),maskAnimation:Uu.a.string,stretch:Uu.a.string,alignPoint:Uu.a.bool},WH.contextTypes=GH,WH.childContextTypes=GH,WH.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:zH,afterPopupVisibleChange:zH,onPopupAlign:zH,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var KH=function(){var e=this;this.onMouseEnter=function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)},this.onMouseMove=function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)},this.onMouseLeave=function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){e.clearDelayTimer()},this.onPopupMouseLeave=function(t){t.relatedTarget&&!t.relatedTarget.setTimeout&&e._component&&e._component.getPopupDomNode&&DV(e._component.getPopupDomNode(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},this.onFocus=function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))},this.onMouseDown=function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()},this.onTouchStart=function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()},this.onBlur=function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)},this.onContextMenu=function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)},this.onContextMenuClose=function(){e.isContextMenuToShow()&&e.close()},this.onClick=function(t){if(e.fireEvents("onClick",t),e.focusTime){var n=void 0;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,t&&t.preventDefault&&t.preventDefault();var a=!e.state.popupVisible;(e.isClickToHide()&&!a||a&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)},this.onPopupMouseDown=function(){var t=e.context.rcTrigger,n=void 0===t?{}:t;e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=setTimeout((function(){e.hasPopupMouseDown=!1}),0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},this.onDocumentClick=function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target;DV(Object(bn.findDOMNode)(e),n)||e.hasPopupMouseDown||e.close()}},this.getRootDomNode=function(){return Object(bn.findDOMNode)(e)},this.getPopupClassNameFromAlign=function(t){var n=[],a=e.props,i=a.popupPlacement,s=a.builtinPlacements,r=a.prefixCls,o=a.alignPoint,l=a.getPopupClassNameFromAlign;return i&&s&&n.push(function(e,t,n,a){var i=n.points;for(var s in e)if(e.hasOwnProperty(s)&&HV(e[s].points,i,a))return t+"-placement-"+s;return""}(s,r,t,o)),l&&n.push(l(t)),n.join(" ")},this.getComponent=function(){var t=e.props,n=t.prefixCls,a=t.destroyPopupOnHide,s=t.popupClassName,r=t.action,o=t.onPopupAlign,l=t.popupAnimation,c=t.popupTransitionName,d=t.popupStyle,u=t.mask,p=t.maskAnimation,g=t.maskTransitionName,h=t.zIndex,m=t.popup,f=t.stretch,b=t.alignPoint,j=e.state,y=j.popupVisible,O=j.point,v=e.getPopupAlign(),x={};return e.isMouseEnterToShow()&&(x.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(x.onMouseLeave=e.onPopupMouseLeave),x.onMouseDown=e.onPopupMouseDown,x.onTouchStart=e.onPopupMouseDown,i.a.createElement(VH,kV()({prefixCls:n,destroyPopupOnHide:a,visible:y,point:b&&O,className:s,action:r,align:v,onAlign:o,animation:l,getClassNameFromAlign:e.getPopupClassNameFromAlign},x,{stretch:f,getRootDomNode:e.getRootDomNode,style:d,mask:u,zIndex:h,transitionName:c,maskAnimation:p,maskTransitionName:g,ref:e.savePopup}),"function"==typeof m?m():m)},this.getContainer=function(){var t=e.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(t.getPopupContainer?t.getPopupContainer(Object(bn.findDOMNode)(e)):t.getDocument().body).appendChild(n),n},this.setPoint=function(t){e.props.alignPoint&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})},this.handlePortalUpdate=function(){e.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)},this.savePopup=function(t){e._component=t}},YH=WH;function QH(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function JH(e){return(JH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZH(e,t){return(ZH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tq=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?XH(e):t}(this,JH(t).call(this,e)),eq(XH(n),"onInputChange",(function(e){var t=e.target.value;n.setState({str:t});var a=n.props,i=a.format,s=a.hourOptions,r=a.minuteOptions,o=a.secondOptions,l=a.disabledHours,c=a.disabledMinutes,d=a.disabledSeconds,u=a.onChange;if(t){var p=n.props.value,g=n.getProtoValue().clone(),h=pm()(t,i,!0);if(!h.isValid())return void n.setState({invalid:!0});if(g.hour(h.hour()).minute(h.minute()).second(h.second()),s.indexOf(g.hour())<0||r.indexOf(g.minute())<0||o.indexOf(g.second())<0)return void n.setState({invalid:!0});var m=l(),f=c(g.hour()),b=d(g.hour(),g.minute());if(m&&m.indexOf(g.hour())>=0||f&&f.indexOf(g.minute())>=0||b&&b.indexOf(g.second())>=0)return void n.setState({invalid:!0});if(p){if(p.hour()!==g.hour()||p.minute()!==g.minute()||p.second()!==g.second()){var j=p.clone();j.hour(g.hour()),j.minute(g.minute()),j.second(g.second()),u(j)}}else p!==g&&u(g)}else u(null);n.setState({invalid:!1})})),eq(XH(n),"onKeyDown",(function(e){var t=n.props,a=t.onEsc,i=t.onKeyDown;27===e.keyCode&&a(),i(e)}));var a=e.value,i=e.format;return n.state={str:a&&a.format(i)||"",invalid:!1},n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZH(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.props.focusOnOpen&&(window.requestAnimationFrame||window.setTimeout)((function(){e.refInput.focus(),e.refInput.select()}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,n=e.format;this.setState({str:t&&t.format(n)||"",invalid:!1})}},{key:"getProtoValue",value:function(){var e=this.props,t=e.value,n=e.defaultOpenValue;return t||n}},{key:"getInput",value:function(){var e=this,t=this.props,n=t.prefixCls,a=t.placeholder,s=t.inputReadOnly,r=this.state,o=r.invalid,l=r.str,c=o?"".concat(n,"-input-invalid"):"";return i.a.createElement("input",{className:zV()("".concat(n,"-input"),c),ref:function(t){e.refInput=t},onKeyDown:this.onKeyDown,value:l,placeholder:a,onChange:this.onInputChange,readOnly:!!s})}},{key:"render",value:function(){var e=this.props.prefixCls;return i.a.createElement("div",{className:"".concat(e,"-input-wrap")},this.getInput())}}])&&QH(n.prototype,a),s&&QH(n,s),t}(a.Component);eq(tq,"propTypes",{format:Uu.a.string,prefixCls:Uu.a.string,disabledDate:Uu.a.func,placeholder:Uu.a.string,clearText:Uu.a.string,value:Uu.a.object,inputReadOnly:Uu.a.bool,hourOptions:Uu.a.array,minuteOptions:Uu.a.array,secondOptions:Uu.a.array,disabledHours:Uu.a.func,disabledMinutes:Uu.a.func,disabledSeconds:Uu.a.func,onChange:Uu.a.func,onEsc:Uu.a.func,defaultOpenValue:Uu.a.object,currentSelectPanel:Uu.a.string,focusOnOpen:Uu.a.bool,onKeyDown:Uu.a.func,clearIcon:Uu.a.node}),eq(tq,"defaultProps",{inputReadOnly:!1});var nq=tq,aq=n("xEkU"),iq=n.n(aq);function sq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oq(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?cq(e):t}function lq(e){return(lq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dq(e,t){return(dq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pq=function(e){function t(){var e,n;sq(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return uq(cq(n=oq(this,(e=lq(t)).call.apply(e,[this].concat(i)))),"state",{active:!1}),uq(cq(n),"onSelect",(function(e){var t=n.props;(0,t.onSelect)(t.type,e)})),uq(cq(n),"handleMouseEnter",(function(e){var t=n.props.onMouseEnter;n.setState({active:!0}),t(e)})),uq(cq(n),"handleMouseLeave",(function(){n.setState({active:!1})})),uq(cq(n),"saveList",(function(e){n.list=e})),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dq(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.scrollToSelected(0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.selectedIndex;e.selectedIndex!==t&&this.scrollToSelected(120)}},{key:"getOptions",value:function(){var e=this,t=this.props,n=t.options,a=t.selectedIndex,s=t.prefixCls;return n.map((function(t,n){var r,o=zV()((uq(r={},"".concat(s,"-select-option-selected"),a===n),uq(r,"".concat(s,"-select-option-disabled"),t.disabled),r)),l=t.disabled?void 0:function(){e.onSelect(t.value)};return i.a.createElement("li",{role:"button",onClick:l,className:o,key:n,disabled:t.disabled},t.value)}))}},{key:"scrollToSelected",value:function(e){var t=this.props.selectedIndex,n=jn.a.findDOMNode(this),a=jn.a.findDOMNode(this.list);if(a){var i=t;i<0&&(i=0),function e(t,n,a){if(a<=0)iq()((function(){t.scrollTop=n}));else{var i=(n-t.scrollTop)/a*10;iq()((function(){t.scrollTop+=i,t.scrollTop!==n&&e(t,n,a-10)}))}}(n,a.children[i].offsetTop,e)}}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.options,a=this.state.active;if(0===n.length)return null;var s=zV()("".concat(t,"-select"),uq({},"".concat(t,"-select-active"),a));return i.a.createElement("div",{className:s,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.a.createElement("ul",{ref:this.saveList},this.getOptions()))}}])&&rq(n.prototype,a),s&&rq(n,s),t}(a.Component);uq(pq,"propTypes",{prefixCls:Uu.a.string,options:Uu.a.array,selectedIndex:Uu.a.number,type:Uu.a.string,onSelect:Uu.a.func,onMouseEnter:Uu.a.func});var gq=pq;function hq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fq(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?jq(e):t}function bq(e){return(bq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yq(e,t){return(yq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vq=function(e,t){var n="".concat(e);e<10&&(n="0".concat(e));var a=!1;return t&&t.indexOf(e)>=0&&(a=!0),{value:n,disabled:a}},xq=function(e){function t(){var e,n;hq(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return Oq(jq(n=fq(this,(e=bq(t)).call.apply(e,[this].concat(i)))),"onItemChange",(function(e,t){var a=n.props,i=a.onChange,s=a.defaultOpenValue,r=a.use12Hours,o=a.value,l=a.isAM,c=a.onAmPmChange,d=(o||s).clone();if("hour"===e)r?l?d.hour(+t%12):d.hour(+t%12+12):d.hour(+t);else if("minute"===e)d.minute(+t);else if("ampm"===e){var u=t.toUpperCase();r&&("PM"===u&&d.hour()<12&&d.hour(d.hour()%12+12),"AM"===u&&d.hour()>=12&&d.hour(d.hour()-12)),c(u)}else d.second(+t);i(d)})),Oq(jq(n),"onEnterSelectPanel",(function(e){(0,n.props.onCurrentSelectPanelChange)(e)})),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yq(e,t)}(t,e),n=t,(a=[{key:"getHourSelect",value:function(e){var t=this,n=this.props,a=n.prefixCls,s=n.hourOptions,r=n.disabledHours,o=n.showHour,l=n.use12Hours;if(!o)return null;var c,d,u=r();return l?(c=[12].concat(s.filter((function(e){return e<12&&e>0}))),d=e%12||12):(c=s,d=e),i.a.createElement(gq,{prefixCls:a,options:c.map((function(e){return vq(e,u)})),selectedIndex:c.indexOf(d),type:"hour",onSelect:this.onItemChange,onMouseEnter:function(){return t.onEnterSelectPanel("hour")}})}},{key:"getMinuteSelect",value:function(e){var t=this,n=this.props,a=n.prefixCls,s=n.minuteOptions,r=n.disabledMinutes,o=n.defaultOpenValue,l=n.showMinute,c=n.value;if(!l)return null;var d=r((c||o).hour());return i.a.createElement(gq,{prefixCls:a,options:s.map((function(e){return vq(e,d)})),selectedIndex:s.indexOf(e),type:"minute",onSelect:this.onItemChange,onMouseEnter:function(){return t.onEnterSelectPanel("minute")}})}},{key:"getSecondSelect",value:function(e){var t=this,n=this.props,a=n.prefixCls,s=n.secondOptions,r=n.disabledSeconds,o=n.showSecond,l=n.defaultOpenValue,c=n.value;if(!o)return null;var d=c||l,u=r(d.hour(),d.minute());return i.a.createElement(gq,{prefixCls:a,options:s.map((function(e){return vq(e,u)})),selectedIndex:s.indexOf(e),type:"second",onSelect:this.onItemChange,onMouseEnter:function(){return t.onEnterSelectPanel("second")}})}},{key:"getAMPMSelect",value:function(){var e=this,t=this.props,n=t.prefixCls,a=t.use12Hours,s=t.format,r=t.isAM;if(!a)return null;var o=["am","pm"].map((function(e){return s.match(/\sA/)?e.toUpperCase():e})).map((function(e){return{value:e}})),l=r?0:1;return i.a.createElement(gq,{prefixCls:n,options:o,selectedIndex:l,type:"ampm",onSelect:this.onItemChange,onMouseEnter:function(){return e.onEnterSelectPanel("ampm")}})}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.defaultOpenValue,a=e.value||n;return i.a.createElement("div",{className:"".concat(t,"-combobox")},this.getHourSelect(a.hour()),this.getMinuteSelect(a.minute()),this.getSecondSelect(a.second()),this.getAMPMSelect(a.hour()))}}])&&mq(n.prototype,a),s&&mq(n,s),t}(a.Component);Oq(xq,"propTypes",{format:Uu.a.string,defaultOpenValue:Uu.a.object,prefixCls:Uu.a.string,value:Uu.a.object,onChange:Uu.a.func,onAmPmChange:Uu.a.func,showHour:Uu.a.bool,showMinute:Uu.a.bool,showSecond:Uu.a.bool,hourOptions:Uu.a.array,minuteOptions:Uu.a.array,secondOptions:Uu.a.array,disabledHours:Uu.a.func,disabledMinutes:Uu.a.func,disabledSeconds:Uu.a.func,onCurrentSelectPanelChange:Uu.a.func,use12Hours:Uu.a.bool,isAM:Uu.a.bool});var _q=xq;function Cq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function kq(e){return(kq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tq(e,t){return(Tq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eq(){}function Iq(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=[],s=0;s<e;s+=a)(!t||t.indexOf(s)<0||!n)&&i.push(s);return i}var Mq=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?wq(e):t}(this,kq(t).call(this,e)),Sq(wq(n),"onChange",(function(e){var t=n.props.onChange;n.setState({value:e}),t(e)})),Sq(wq(n),"onAmPmChange",(function(e){(0,n.props.onAmPmChange)(e)})),Sq(wq(n),"onCurrentSelectPanelChange",(function(e){n.setState({currentSelectPanel:e})})),Sq(wq(n),"disabledHours",(function(){var e=n.props,t=e.use12Hours,a=(0,e.disabledHours)();return t&&Array.isArray(a)&&(a=n.isAM()?a.filter((function(e){return e<12})).map((function(e){return 0===e?12:e})):a.map((function(e){return 12===e?12:e-12}))),a})),n.state={value:e.value},n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tq(e,t)}(t,e),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){var t=e.value;t&&this.setState({value:t})}},{key:"close",value:function(){(0,this.props.onEsc)()}},{key:"isAM",value:function(){var e=this.props.defaultOpenValue,t=this.state.value||e;return t.hour()>=0&&t.hour()<12}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.className,a=e.placeholder,s=e.disabledMinutes,r=e.disabledSeconds,o=e.hideDisabledOptions,l=e.showHour,c=e.showMinute,d=e.showSecond,u=e.format,p=e.defaultOpenValue,g=e.clearText,h=e.onEsc,m=e.addon,f=e.use12Hours,b=e.focusOnOpen,j=e.onKeyDown,y=e.hourStep,O=e.minuteStep,v=e.secondStep,x=e.inputReadOnly,_=e.clearIcon,C=this.state,k=C.value,w=C.currentSelectPanel,T=this.disabledHours(),S=s(k?k.hour():null),E=r(k?k.hour():null,k?k.minute():null),I=Iq(24,T,o,y),M=Iq(60,S,o,O),D=Iq(60,E,o,v),A=function(e,t,n,a){var i=t.slice().sort((function(t,n){return Math.abs(e.hour()-t)-Math.abs(e.hour()-n)}))[0],s=n.slice().sort((function(t,n){return Math.abs(e.minute()-t)-Math.abs(e.minute()-n)}))[0],r=a.slice().sort((function(t,n){return Math.abs(e.second()-t)-Math.abs(e.second()-n)}))[0];return pm()("".concat(i,":").concat(s,":").concat(r),"HH:mm:ss")}(p,I,M,D);return i.a.createElement("div",{className:zV()(n,"".concat(t,"-inner"))},i.a.createElement(nq,{clearText:g,prefixCls:t,defaultOpenValue:A,value:k,currentSelectPanel:w,onEsc:h,format:u,placeholder:a,hourOptions:I,minuteOptions:M,secondOptions:D,disabledHours:this.disabledHours,disabledMinutes:s,disabledSeconds:r,onChange:this.onChange,focusOnOpen:b,onKeyDown:j,inputReadOnly:x,clearIcon:_}),i.a.createElement(_q,{prefixCls:t,value:k,defaultOpenValue:A,format:u,onChange:this.onChange,onAmPmChange:this.onAmPmChange,showHour:l,showMinute:c,showSecond:d,hourOptions:I,minuteOptions:M,secondOptions:D,disabledHours:this.disabledHours,disabledMinutes:s,disabledSeconds:r,onCurrentSelectPanelChange:this.onCurrentSelectPanelChange,use12Hours:f,isAM:this.isAM()}),m(this))}}])&&Cq(n.prototype,a),s&&Cq(n,s),t}(a.Component);Sq(Mq,"propTypes",{clearText:Uu.a.string,prefixCls:Uu.a.string,className:Uu.a.string,defaultOpenValue:Uu.a.object,value:Uu.a.object,placeholder:Uu.a.string,format:Uu.a.string,inputReadOnly:Uu.a.bool,disabledHours:Uu.a.func,disabledMinutes:Uu.a.func,disabledSeconds:Uu.a.func,hideDisabledOptions:Uu.a.bool,onChange:Uu.a.func,onAmPmChange:Uu.a.func,onEsc:Uu.a.func,showHour:Uu.a.bool,showMinute:Uu.a.bool,showSecond:Uu.a.bool,use12Hours:Uu.a.bool,hourStep:Uu.a.number,minuteStep:Uu.a.number,secondStep:Uu.a.number,addon:Uu.a.func,focusOnOpen:Uu.a.bool,onKeyDown:Uu.a.func,clearIcon:Uu.a.node}),Sq(Mq,"defaultProps",{prefixCls:"rc-time-picker-panel",onChange:Eq,disabledHours:Eq,disabledMinutes:Eq,disabledSeconds:Eq,defaultOpenValue:pm()(),use12Hours:!1,addon:Eq,onKeyDown:Eq,onAmPmChange:Eq,inputReadOnly:!1});var Dq=Mq,Aq={adjustX:1,adjustY:1},Nq=[0,0],Rq={bottomLeft:{points:["tl","tl"],overflow:Aq,offset:[0,-3],targetOffset:Nq},bottomRight:{points:["tr","tr"],overflow:Aq,offset:[0,-3],targetOffset:Nq},topRight:{points:["br","br"],overflow:Aq,offset:[0,3],targetOffset:Nq},topLeft:{points:["bl","bl"],overflow:Aq,offset:[0,3],targetOffset:Nq}};function Pq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lq(e){return(Lq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uq(e,t){return(Uq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bq(){}function Vq(e,t){this[e]=t}var zq=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Fq(e):t}(this,Lq(t).call(this,e)),$q(Fq(n),"onPanelChange",(function(e){n.setValue(e)})),$q(Fq(n),"onAmPmChange",(function(e){(0,n.props.onAmPmChange)(e)})),$q(Fq(n),"onClear",(function(e){e.stopPropagation(),n.setValue(null),n.setOpen(!1)})),$q(Fq(n),"onVisibleChange",(function(e){n.setOpen(e)})),$q(Fq(n),"onEsc",(function(){n.setOpen(!1),n.focus()})),$q(Fq(n),"onKeyDown",(function(e){40===e.keyCode&&n.setOpen(!0)})),n.saveInputRef=Vq.bind(Fq(n),"picker"),n.savePanelRef=Vq.bind(Fq(n),"panelInstance");var a=e.defaultOpen,i=e.defaultValue,s=e.open,r=void 0===s?a:s,o=e.value,l=void 0===o?i:o;return n.state={open:r,value:l},n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uq(e,t)}(t,e),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){var t=e.value,n=e.open;"value"in e&&this.setState({value:t}),void 0!==n&&this.setState({open:n})}},{key:"setValue",value:function(e){var t=this.props.onChange;"value"in this.props||this.setState({value:e}),t(e)}},{key:"getFormat",value:function(){var e=this.props,t=e.format,n=e.showHour,a=e.showMinute,i=e.showSecond,s=e.use12Hours;return t||(s?[n?"h":"",a?"mm":"",i?"ss":""].filter((function(e){return!!e})).join(":").concat(" a"):[n?"HH":"",a?"mm":"",i?"ss":""].filter((function(e){return!!e})).join(":"))}},{key:"getPanelElement",value:function(){var e=this.props,t=e.prefixCls,n=e.placeholder,a=e.disabledHours,s=e.disabledMinutes,r=e.disabledSeconds,o=e.hideDisabledOptions,l=e.inputReadOnly,c=e.showHour,d=e.showMinute,u=e.showSecond,p=e.defaultOpenValue,g=e.clearText,h=e.addon,m=e.use12Hours,f=e.focusOnOpen,b=e.onKeyDown,j=e.hourStep,y=e.minuteStep,O=e.secondStep,v=e.clearIcon,x=this.state.value;return i.a.createElement(Dq,{clearText:g,prefixCls:"".concat(t,"-panel"),ref:this.savePanelRef,value:x,inputReadOnly:l,onChange:this.onPanelChange,onAmPmChange:this.onAmPmChange,defaultOpenValue:p,showHour:c,showMinute:d,showSecond:u,onEsc:this.onEsc,format:this.getFormat(),placeholder:n,disabledHours:a,disabledMinutes:s,disabledSeconds:r,hideDisabledOptions:o,use12Hours:m,hourStep:j,minuteStep:y,secondStep:O,addon:h,focusOnOpen:f,onKeyDown:b,clearIcon:v})}},{key:"getPopupClassName",value:function(){var e=this.props,t=e.showHour,n=e.showMinute,a=e.showSecond,i=e.use12Hours,s=e.prefixCls,r=e.popupClassName,o=0;return t&&(o+=1),n&&(o+=1),a&&(o+=1),i&&(o+=1),zV()(r,$q({},"".concat(s,"-panel-narrow"),!(t&&n&&a||i)),"".concat(s,"-panel-column-").concat(o))}},{key:"setOpen",value:function(e){var t=this.props,n=t.onOpen,a=t.onClose;this.state.open!==e&&("open"in this.props||this.setState({open:e}),e?n({open:e}):a({open:e}))}},{key:"focus",value:function(){this.picker.focus()}},{key:"blur",value:function(){this.picker.blur()}},{key:"renderClearButton",value:function(){var e=this,t=this.state.value,n=this.props,a=n.prefixCls,s=n.allowEmpty,r=n.clearIcon,o=n.clearText,l=n.disabled;if(!s||!t||l)return null;if(i.a.isValidElement(r)){var c=(r.props||{}).onClick;return i.a.cloneElement(r,{onClick:function(){c&&c.apply(void 0,arguments),e.onClear.apply(e,arguments)}})}return i.a.createElement("a",{role:"button",className:"".concat(a,"-clear"),title:o,onClick:this.onClear,tabIndex:0},r||i.a.createElement("i",{className:"".concat(a,"-clear-icon")}))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.placeholder,a=e.placement,s=e.align,r=e.id,o=e.disabled,l=e.transitionName,c=e.style,d=e.className,u=e.getPopupContainer,p=e.name,g=e.autoComplete,h=e.onFocus,m=e.onBlur,f=e.autoFocus,b=e.inputReadOnly,j=e.inputIcon,y=e.popupStyle,O=this.state,v=O.open,x=O.value,_=this.getPopupClassName();return i.a.createElement(YH,{prefixCls:"".concat(t,"-panel"),popupClassName:_,popupStyle:y,popup:this.getPanelElement(),popupAlign:s,builtinPlacements:Rq,popupPlacement:a,action:o?[]:["click"],destroyPopupOnHide:!0,getPopupContainer:u,popupTransitionName:l,popupVisible:v,onPopupVisibleChange:this.onVisibleChange},i.a.createElement("span",{className:zV()(t,d),style:c},i.a.createElement("input",{className:"".concat(t,"-input"),ref:this.saveInputRef,type:"text",placeholder:n,name:p,onKeyDown:this.onKeyDown,disabled:o,value:x&&x.format(this.getFormat())||"",autoComplete:g,onFocus:h,onBlur:m,autoFocus:f,onChange:Bq,readOnly:!!b,id:r}),j||i.a.createElement("span",{className:"".concat(t,"-icon")}),this.renderClearButton()))}}])&&Pq(n.prototype,a),s&&Pq(n,s),t}(a.Component);$q(zq,"propTypes",{prefixCls:Uu.a.string,clearText:Uu.a.string,value:Uu.a.object,defaultOpenValue:Uu.a.object,inputReadOnly:Uu.a.bool,disabled:Uu.a.bool,allowEmpty:Uu.a.bool,defaultValue:Uu.a.object,open:Uu.a.bool,defaultOpen:Uu.a.bool,align:Uu.a.object,placement:Uu.a.any,transitionName:Uu.a.string,getPopupContainer:Uu.a.func,placeholder:Uu.a.string,format:Uu.a.string,showHour:Uu.a.bool,showMinute:Uu.a.bool,showSecond:Uu.a.bool,style:Uu.a.object,className:Uu.a.string,popupClassName:Uu.a.string,popupStyle:Uu.a.object,disabledHours:Uu.a.func,disabledMinutes:Uu.a.func,disabledSeconds:Uu.a.func,hideDisabledOptions:Uu.a.bool,onChange:Uu.a.func,onAmPmChange:Uu.a.func,onOpen:Uu.a.func,onClose:Uu.a.func,onFocus:Uu.a.func,onBlur:Uu.a.func,addon:Uu.a.func,name:Uu.a.string,autoComplete:Uu.a.string,use12Hours:Uu.a.bool,hourStep:Uu.a.number,minuteStep:Uu.a.number,secondStep:Uu.a.number,focusOnOpen:Uu.a.bool,onKeyDown:Uu.a.func,autoFocus:Uu.a.bool,id:Uu.a.string,inputIcon:Uu.a.node,clearIcon:Uu.a.node}),$q(zq,"defaultProps",{clearText:"clear",prefixCls:"rc-time-picker",defaultOpen:!1,inputReadOnly:!1,style:{},className:"",popupClassName:"",popupStyle:{},id:"",align:{},defaultOpenValue:pm()(),allowEmpty:!0,showHour:!0,showMinute:!0,showSecond:!0,disabledHours:Bq,disabledMinutes:Bq,disabledSeconds:Bq,hideDisabledOptions:!1,placement:"bottomLeft",onChange:Bq,onAmPmChange:Bq,onOpen:Bq,onClose:Bq,onFocus:Bq,onBlur:Bq,addon:Bq,use12Hours:!1,focusOnOpen:!1,onKeyDown:Bq});const Hq=r.default.div.withConfig({displayName:"timePicker__StyledTimePicker",componentId:"sc-1u1qn7a-0"})(["position:relative;cursor:pointer;.rc-time-picker{display:block;box-sizing:border-box;}.rc-time-picker *{box-sizing:border-box;}.rc-time-picker-input{width:100%;position:relative;display:inline-block;padding:0 16px;height:","px;cursor:pointer;font-size:14px;font-weight:500;line-height:1.5;color:",";background-color:#fff;background-image:none;border:1px solid ",";border-radius:4px;transition:border 0.2s cubic-bezier(0.645,0.045,0.355,1),background 0.2s cubic-bezier(0.645,0.045,0.355,1),box-shadow 0.2s cubic-bezier(0.645,0.045,0.355,1);"," &:hover{border-color:",";}&:focus{outline:0;}&:disabled{color:",";border-color:",";background:white;cursor:default;&::placeholder{color:",";}}}"],({size:e})=>"small"===e?32:40,Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-3"),({hasError:e})=>e&&`border-color: ${Object(o.cssVariables)("red-5")};`,Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("neutral-5"),Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-5")),qq=r.default.div.withConfig({displayName:"timePicker__IconTimePicker",componentId:"sc-1u1qn7a-1"})(["position:absolute;top:50%;margin-top:-10px;right:14px;",""],({disabled:e})=>e&&"\n    opacity: 0.3;\n    cursor: default;\n  ");var Gq=Object(r.default)(o.IconButton).withConfig({displayName:"timePicker___StyledIconButton",componentId:"sc-1u1qn7a-2"})(["position:absolute;top:50%;margin-top:-16px;right:6px;background-color:white;z-index:1;svg{fill:",";}"],e=>e._css);class Wq extends a.Component{constructor(...e){super(...e),this.generateOptions=(e,t,n=0)=>{const a=[];for(let i=0;i<e;i++){i<parseInt(t)+n&&a.push(i)}return a},this.isValid=e=>{if(null==e)return!1;const t=c.a.tz(c.a.tz.guess());return e.isAfter(t)},this.disableHours=()=>{let e=[];if(!this.isValid(this.props.time)&&this.props.blockPast){const t=c.a.tz(c.a.tz.guess()).hours();e=this.generateOptions(24,t)}return e},this.disableMinutes=()=>{let e=[];const{blockPast:t}=this.props,n=!this.isValid(this.props.time),a=c.a.tz(c.a.tz.guess()).minutes();return n&&t&&(e=this.generateOptions(60,a,0)),e},this.handleChange=e=>{this.props.onChange(e)}}render(){const{name:e,time:t,showSecond:n,placement:a,allowEmpty:i,minuteInterval:s,size:r,className:l,disabled:c=!1,hasError:d}=this.props;return Object(W.jsxs)(Hq,{className:l,size:r,hasError:d,children:[Object(W.jsx)(zq,{name:e,value:t,showSecond:n,minuteStep:s,placement:a,popupClassName:"sb-timepicker",onChange:this.handleChange,disabled:c,disabledHours:this.disableHours,disabledMinutes:this.disableMinutes,inputReadOnly:!0,allowEmpty:i,placeholder:f.Z,clearIcon:Object(W.jsx)(Gq,{icon:"close",buttonType:"secondary",size:"small",_css:Object(o.cssVariables)("neutral-9")})}),Object(W.jsx)(qq,{disabled:c,children:Object(W.jsx)(o.Icon,{icon:"time",size:20,color:Object(o.cssVariables)("neutral-9")})})]})}}Wq.defaultProps={time:null,minuteInterval:0,showSecond:!1,placement:"bottomLeft",allowEmpty:!0,size:"medium",disabled:!1};var Kq=Wq;const Yq=r.default.div.withConfig({displayName:"dateTimePicker__StyledDateTimePicker",componentId:"jost8j-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:8px;",""],({hasError:e})=>e&&Object(r.css)(["& > button{border-color:",";}"],Object(o.cssVariables)("red-5")));var Qq=Object(a.forwardRef)(({onChange:e,dateTime:t,disabled:n,timezone:i=c.a.tz.guess(),blockPastTime:s,minuteInterval:r=1,className:l,hasError:d,formatDate:u},p)=>{const g=Object(a.useRef)(null),h=Object(a.useMemo)(()=>t.clone().tz(i),[t,i]);Object(a.useImperativeHandle)(p,()=>{const e=()=>{var e;return null==(e=g.current)?void 0:e.querySelector("button")};return{focus:()=>{var t;return null==(t=e())?void 0:t.focus()},scrollIntoView:(...t)=>{var n;return null==(n=e())?void 0:n.scrollIntoView(...t)}}});return Object(W.jsxs)(Yq,{ref:g,className:l,hasError:d,children:[Object(W.jsx)(o.SingleDatePicker,{date:h,onChange:t=>{const n=h.hour(),a=h.minute(),i=h.clone().year(t.year()).month(t.month()).date(t.date()).hour(n).minute(a);null==e||e(i)},formatDate:u,placement:"bottom-start",popperProps:{modifiers:{flip:{boundariesElement:"scrollParent"}}}}),Object(W.jsx)(Kq,{time:h,onChange:t=>{const n=h.clone().hour(t.hour()).minute(t.minute());null==e||e(n)},placement:"bottomLeft",blockPast:s,minuteInterval:r,allowEmpty:!1,disabled:n,hasError:d})]})});const Jq=({placeholder:e,label:t,onChange:n,initialSelectedItem:i})=>{const s=Object(P.c)(),[r,l]=Object(a.useState)([]),c=Object(a.useRef)(null),d=Object(a.useRef)(null),u=Object(a.useRef)();Object(a.useEffect)(()=>{c.current=null},[s]);const p=Object(a.useCallback)(async e=>{var t;const n=null!=(t=c.current)?t:void 0;if(!d.current&&(e||n))try{d.current=Object(js.fetchAnnouncementGroups)({appId:s,limit:100,token:n});const{data:{announcement_groups:e,next:t}}=await d.current;l(t=>n?t.concat(e):e),c.current=t}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{d.current=null}},[s]);Object(a.useEffect)(()=>{p(!0)},[p]);return Object(W.jsx)(o.SearchSelectionDropdown,{placeholder:e,label:t,items:r,initialSelectedItem:i,isCreatable:!0,disableNoResultsView:!0,onChange:n,itemToElement:e=>Object(W.jsx)("div",{ref:e=>{var t;(null==e||null==(t=e.closest('[role="option"]'))?void 0:t.matches(":nth-last-child(3)"))&&(e=>{var t,n;if(null==e||!c.current)return null==(n=u.current)||n.disconnect(),void(u.current=void 0);null==(t=u.current)||t.disconnect();const a=new IntersectionObserver(([e])=>{e.isIntersecting&&p(!1)},{root:null==e?void 0:e.closest('ul[role="listbox"]')});u.current=a,a.observe(e)})(e)},children:e})})},Xq=r.default.div.attrs({role:"radiogroup"}).withConfig({displayName:"ChannelDistinctRadioGroup__Container",componentId:"sc-96os7l-0"})(["display:flex;flex-direction:column;align-items:flex-start;> * + *{margin-top:8px;}"]),Zq=r.default.label.withConfig({displayName:"ChannelDistinctRadioGroup__Label",componentId:"sc-96os7l-1"})(["display:grid;grid-template-columns:20px 1fr;grid-gap:8px;align-items:start;line-height:20px;color:",";font-size:14px;font-weight:500;> *:first-child{position:relative;top:1px;}"],Object(o.cssVariables)("neutral-10")),eG=r.default.dl.withConfig({displayName:"ChannelDistinctRadioGroup__DefinitionWrapper",componentId:"sc-96os7l-2"})(["dd{margin-top:4px;",";color:",";}"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),tG=({term:e,definition:t})=>Object(W.jsxs)(eG,{children:[Object(W.jsx)("dt",{children:e}),Object(W.jsx)("dd",{children:t})]}),nG=r.default.div.withConfig({displayName:"DoNotDisturbTimePicker__Container",componentId:"vxqqq-0"})(["display:grid;grid-template-columns:auto 1fr 1fr;grid-auto-flow:row;grid-gap:4px 16px;align-items:center;"]),aG=r.default.label.withConfig({displayName:"DoNotDisturbTimePicker__TimePickerLabel",componentId:"vxqqq-1"})(["display:flex;flex-direction:row;align-items:center;span{flex:none;font-size:12px;font-weight:500;line-height:1;}"]),iG=Object(r.default)(Kq).attrs({blockPast:!1,minuteInterval:1}).withConfig({displayName:"DoNotDisturbTimePicker__FullWidthTimePicker",componentId:"vxqqq-2"})(["width:100%;"]),sG=r.default.div.withConfig({displayName:"DoNotDisturbTimePicker__ErrorMessage",componentId:"vxqqq-3"})(["grid-column:2 / -1;font-size:12px;line-height:16px;color:",";"],Object(o.cssVariables)("red-5"));var rG=Object(r.default)("span").withConfig({displayName:"DoNotDisturbTimePicker___StyledSpan",componentId:"vxqqq-4"})(["margin-right:24px;"]),oG=Object(r.default)("span").withConfig({displayName:"DoNotDisturbTimePicker___StyledSpan2",componentId:"vxqqq-5"})(["margin-right:16px;"]);const lG=Object(a.forwardRef)(({className:e,onChange:t,error:n,timezone:i=c.a.tz.guess(),defaultValue:s},r)=>{var l,d;const u=Object(a.useRef)({ceaseAt:null,resumeAt:null}),[p,g]=Object(a.useState)(null!=(l=null==s?void 0:s.ceaseAt)?l:null),[h,m]=Object(a.useState)(null!=(d=null==s?void 0:s.resumeAt)?d:null),[f,b]=Object(a.useState)(!(null==s||!s.ceaseAt||null==s||!s.resumeAt)),j=Object(a.useRef)(),y=Object(a.useRef)(null),O=Object(E.a)();return Object(a.useEffect)(()=>{j.current=t},[t]),Object(a.useEffect)(()=>{const e=f?{ceaseAt:p,resumeAt:h}:{ceaseAt:null,resumeAt:null};xs()(u.current,e)||(u.current=e,null==j.current||j.current(e))},[f,h,p]),Object(a.useImperativeHandle)(r,()=>({focus:()=>{const{current:e}=y;if(e){const t=e.querySelector("input");null==t||t.focus()}}})),Object(W.jsxs)(nG,{className:e,ref:y,children:[Object(W.jsx)(o.Toggle,{checked:f,onChange:e=>{b(!!e)}}),Object(W.jsxs)(aG,{children:[Object(W.jsx)(rG,{children:O.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.ceaseAt"})}),Object(W.jsx)(iG,{name:"cease_at",disabled:!f,time:f?null==p?void 0:p.tz(i):null,onChange:g},f?"enabled":"disabled")]}),Object(W.jsxs)(aG,{children:[Object(W.jsx)(oG,{children:O.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.resumeAt"})}),Object(W.jsx)(iG,{name:"resume_at",disabled:!f,time:f?null==h?void 0:h.tz(i):null,onChange:m},f?"enabled":"disabled")]}),n&&Object(W.jsx)(sG,{children:n})]})}),cG=r.default.div.withConfig({displayName:"EndAtDateTimePicker__Container",componentId:"gi0jqk-0"})(["display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;"]),dG=r.default.div.withConfig({displayName:"EndAtDateTimePicker__ErrorMessage",componentId:"gi0jqk-1"})(["flex-basis:100%;font-size:12px;line-height:16px;color:",";margin-top:4px;margin-left:56px;"],Object(o.cssVariables)("red-5")),uG=Object(r.default)(dG).withConfig({displayName:"EndAtDateTimePicker__HelperText",componentId:"gi0jqk-2"})(["color:",";"],Object(o.cssVariables)("purple-7"));var pG=Object(r.default)("div").withConfig({displayName:"EndAtDateTimePicker___StyledDiv",componentId:"gi0jqk-3"})(["flex:1;display:grid;grid-template-columns:1fr 1fr;grid-gap:8px;padding-left:2px;pointer-events:none;& > *{margin-top:0 !important;}"]);const gG=()=>Object(W.jsxs)(pG,{children:[Object(W.jsx)(o.InputText,{icons:[{icon:"calendar"}],value:"—",disabled:!0}),Object(W.jsx)(o.InputText,{icons:[{icon:"time"}],value:"—",disabled:!0})]}),hG=e=>c()(e).add(30,"minute").second(0).millisecond(0);var mG=Object(r.default)(o.Toggle).withConfig({displayName:"EndAtDateTimePicker___StyledToggle",componentId:"gi0jqk-4"})(["margin-right:14px;"]),fG=Object(r.default)(Qq).withConfig({displayName:"EndAtDateTimePicker___StyledDateTimePicker",componentId:"gi0jqk-5"})(["flex:1;"]);const bG=Object(a.forwardRef)(({className:e,onChange:t,defaultValue:n,currentScheduledAtRef:i,error:s,timezone:r=c.a.tz.guess(),minuteInterval:o=1},l)=>{const d=Object(E.a)(),u=Object(a.useRef)(null),[p,g]=Object(a.useState)(!!n),[h,m]=Object(a.useState)(null!=n?n:null),b=Object(a.useRef)(),j=Object(a.useRef)(null);return Object(a.useEffect)(()=>{b.current=t},[t]),Object(a.useEffect)(()=>{const e=p?h:null;u.current!==e&&(u.current=e,null==b.current||b.current(e))},[p,h]),Object(a.useImperativeHandle)(l,()=>({focus:()=>{const{current:e}=j;if(e){const t=e.querySelector('button[aria-haspopup="listbox"]');null==t||t.focus()}}})),Object(W.jsxs)(cG,{className:e,ref:j,children:[Object(W.jsx)(mG,{checked:p,onChange:e=>{e&&null==h&&m(hG(i.current)),g(!!e)}}),p?Object(W.jsx)(fG,{blockPastTime:!1,minuteInterval:o,onChange:m,dateTime:null!=h?h:hG(i.current),formatDate:e=>e.format("MMMM D, YYYY"),timezone:r,disabled:!p,hasError:!!s}):Object(W.jsx)(gG,{}),s&&Object(W.jsx)(dG,{children:s}),!s&&h&&p&&Object(W.jsx)(uG,{"data-test-id":"HelperText",children:d.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.endAt.helperText"},{time:KB(h.clone(),r,f.B)})})]})}),jG=r.default.div.withConfig({displayName:"MessageTypeRadioOptions__RadioList",componentId:"sc-47y9rj-0"})(["display:flex;flex-direction:column;align-items:flex-start;& > * + *{margin-top:8px;}"]),yG=({value:e,onChange:t,disabled:n})=>{const a=Object(E.a)(),i=e=>{e.currentTarget.checked&&t(e.currentTarget.value)};return Object(W.jsxs)(jG,{children:[Object(W.jsx)(o.Radio,{name:"message.type",label:a.formatMessage({id:"chat.announcements.createAnnouncement.fields.type_lbl.mesg"}),value:"MESG",checked:"MESG"===e,onChange:i,disabled:n}),Object(W.jsx)(o.Radio,{name:"message.type",label:a.formatMessage({id:"chat.announcements.createAnnouncement.fields.type_lbl.brdm"}),value:"ADMM",checked:"BRDM"===e||"ADMM"===e,onChange:i,disabled:n})]})},OG=e=>({key:t,labelIntlKey:n,descriptionIntlKey:a})=>({key:t,label:e.formatMessage({id:n}),description:e.formatMessage({id:a})}),vG=["sender_all_channels","target_channels","target_users_included_channels","target_users_only_channels"],xG=r.default.dl.withConfig({displayName:"TargetAtDropdown__DropdownItemDefinition",componentId:"ktt7hc-0"})(["white-space:initial;dd{font-weight:400;}"]),_G=e=>{const t=Object(E.a)(),n=zB.map(OG(t)),a=e=>n.find(t=>t.key===e);return Object(W.jsx)(o.Dropdown,{items:vG,placeholder:t.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.targetAtPlaceholder"}),itemToString:e=>{var t,n;return null!=(t=null==(n=a(e))?void 0:n.label)?t:e},itemToElement:e=>{var t;const{label:n,description:i}=null!=(t=a(e))?t:{label:e,description:""};return Object(W.jsxs)(xG,{children:[Object(W.jsx)("dt",{children:n}),Object(W.jsx)("dd",{children:i})]})},...e})},CG=["distinct","non_distinct","all"],kG=r.default.div.withConfig({displayName:"TargetChannelTypeDropdown__Container",componentId:"sc-10bw19c-0"})([""]),wG=r.default.div.withConfig({displayName:"TargetChannelTypeDropdown__Label",componentId:"sc-10bw19c-1"})(["font-size:12px;line-height:1;font-weight:500;color:",";margin-bottom:6px;"],Object(o.cssVariables)("neutral-10")),TG=r.default.dl.withConfig({displayName:"TargetChannelTypeDropdown__DropdownItemDefinition",componentId:"sc-10bw19c-2"})(["white-space:initial;dd{font-weight:400;}"]),SG=e=>IS()(e).format({thousandSeparated:!0}),EG=r.default.div.withConfig({displayName:"TargetListTextarea__TargetCount",componentId:"sc-1hvoat7-0"})(["position:relative;font-weight:500;font-size:12px;line-height:16px;color:",";text-align:right;margin-top:4px;transition:margin-top 0.2s ",";&:not(:last-child){margin-bottom:16px;}i{font-style:initial;}"," ",""],Object(o.cssVariables)("neutral-7"),o.transitionDefault,({isErrorVisible:e})=>e&&Object(r.css)(["margin-top:-16px;"]),({isOverLimit:e})=>e&&Object(r.css)(["i{color:",";}"],Object(o.cssVariables)("red-5"))),IG=e=>e.trim().split(",").filter(e=>!!e).length,MG=Object(a.forwardRef)((e,t)=>{var n;const[i,s]=Object(a.useState)(0);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.InputTextarea,{ref:t,...e,onChange:e=>s(IG(e.target.value))}),Object(W.jsxs)(EG,{isOverLimit:i>1e4,isErrorVisible:!(null==(n=e.error)||!n.hasError),children:[Object(W.jsx)("i",{children:SG(i)})," / ",SG(1e4)]})]})}),DG=({initialSelectedItem:e,onChange:t,onItemSelected:n,useSearch:i=!0,...s})=>{var r;const[l,c]=Object(a.useState)(""),d=null!=(r=f.dc.find(t=>t.value===e))?r:f.dc[0],[u,p]=Object(a.useState)(d);return Object(W.jsx)(o.Dropdown,{...s,items:f.dc.filter(e=>e.label.toLowerCase().includes(l.toLowerCase())),itemToString:e=>e.label,selectedItem:u,initialSelectedItem:d,onChange:e=>{e&&(null==t||t(e.value))},onItemSelected:e=>{e&&(p(e),null==n||n(e.value))},useSearch:i,onSearchChange:c,itemHeight:32,modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!1},flip:{enabled:!1}}})},AG=r.default.h4.withConfig({displayName:"AnnouncementForm__GroupTitle",componentId:"sc-1s177k8-0"})(["",";color:",";margin-bottom:12px;"," + &{margin-top:32px;}"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7"),iy.j),NG=r.default.span.withConfig({displayName:"AnnouncementForm__GridCardTitleDimmed",componentId:"sc-1s177k8-1"})(["color:",";font-weight:400;vertical-align:baseline;margin-left:4px;"],Object(o.cssVariables)("neutral-6")),RG=r.default.span.withConfig({displayName:"AnnouncementForm__InputLabelDimmed",componentId:"sc-1s177k8-2"})(["color:",";margin-left:5px;"],Object(o.cssVariables)("neutral-6")),PG=r.default.div.withConfig({displayName:"AnnouncementForm__CreateChannelOptions",componentId:"sc-1s177k8-3"})(["margin-top:16px;border-radius:4px;background:",";padding:24px;h5{margin-bottom:24px;",";color:",";}"],Object(o.cssVariables)("neutral-1"),o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-10")),LG=r.default.div.withConfig({displayName:"AnnouncementForm__OptionFieldsContainer",componentId:"sc-1s177k8-4"})(["margin-top:16px;padding-top:22px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),FG=r.default.span.withConfig({displayName:"AnnouncementForm__ErrorMessage",componentId:"sc-1s177k8-5"})(["font-size:12px;line-height:16px;color:",";margin-top:4px;"],Object(o.cssVariables)("red-5")),UG=(e,t)=>{var n,a;return{hasError:!!e,message:null!=(n=null!=(a=null==e?void 0:e.message)?a:t)?n:""}},$G={message:{type:"MESG"},create_channel:!1,create_channel_options:{distinct:!0},enable_push:!0,scheduled_at:c()().second(0).millisecond(0),target_at:"sender_all_channels",target_channel_type:"distinct",announcement_group:"",cease_resume_at:{ceaseAt:null,resumeAt:null},end_at:null};var BG=Object(r.default)(({name:e,value:t=!0,onChange:n,className:a})=>{const i=Object(E.a)(),s=e=>{const t="distinct"===e.target.value;null==n||n(t)};return Object(W.jsxs)(Xq,{className:a,children:[Object(W.jsxs)(Zq,{children:[Object(W.jsx)(o.Radio,{onChange:s,name:e,value:"distinct",checked:t,"aria-label":i.formatMessage({id:"chat.announcements.targetChannelType.distinct"})}),Object(W.jsx)(tG,{term:i.formatMessage({id:"chat.announcements.targetChannelType.distinct"}),definition:i.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.distinct.definitions.distinct"})})]}),Object(W.jsxs)(Zq,{children:[Object(W.jsx)(o.Radio,{onChange:s,name:e,value:"non_distinct",checked:!t,"aria-label":i.formatMessage({id:"chat.announcements.targetChannelType.nonDistinct"})}),Object(W.jsx)(tG,{term:i.formatMessage({id:"chat.announcements.targetChannelType.nonDistinct"}),definition:i.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.distinct.definitions.nonDistinct"})})]})]})}).withConfig({displayName:"AnnouncementForm___StyledChannelDistinctRadioGroup",componentId:"sc-1s177k8-6"})(["margin-bottom:30px;"]),VG=Object(r.default)(({label:e,...t})=>{const n=Object(E.a)(),a=HB.map(OG(n)),i=e=>a.find(t=>t.key===e);return Object(W.jsxs)(kG,{children:[Object(W.jsx)(wG,{id:"TargetChannelTypeDropdownLabel",children:e}),Object(W.jsx)(o.Dropdown,{"aria-labelledby":"TargetChannelTypeDropdownLabel",items:CG,placeholder:n.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.targetChannelTypePlaceholder"}),itemToString:e=>{var t,n;return null!=(t=null==(n=i(e))?void 0:n.label)?t:e},itemToElement:e=>{var t;const{label:n,description:a}=null!=(t=i(e))?t:{label:e,description:""};return Object(W.jsxs)(TG,{children:[Object(W.jsx)("dt",{children:n}),Object(W.jsx)("dd",{children:a})]})},...t})]})}).withConfig({displayName:"AnnouncementForm___StyledTargetChannelTypeDropdown",componentId:"sc-1s177k8-7"})(["margin-bottom:24px;"]),zG=Object(r.default)(o.Checkbox).withConfig({displayName:"AnnouncementForm___StyledCheckbox",componentId:"sc-1s177k8-8"})(["margin-top:0;"]),HG=Object(r.default)(iy.i).withConfig({displayName:"AnnouncementForm___StyledSettingsGridCard",componentId:"sc-1s177k8-9"})(["padding:12px 0;line-height:0;"]);const qG=({onCancelButtonClick:e,onSubmit:t,defaultValues:n=$G,isEditing:i=!1,submitStatus:r})=>{var l;const c=Object(E.a)(),d=vB(),u=LB(),p=Object(a.useRef)(null),g=Object(a.useRef)(null),h=Object(a.useRef)(null),{register:m,handleSubmit:f,control:b,watch:j,errors:y,setValue:O,trigger:v,formState:x}=Object(_i.d)({defaultValues:{...n,timezone:u}}),{type:_}=j("message"),C=j("target_at"),k=j("create_channel"),w=j("scheduled_at"),T=j("timezone"),S=Object(P.L)(w),I=C.startsWith("target"),M=C.startsWith("target_users"),D=Ci(y.target_list);Object(a.useEffect)(()=>{"ADMM"===_&&O("target_at","target_channels")},[_,O]);const A=Object(a.useMemo)(()=>{var e;const t=Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.senderId"}),children:Object(W.jsx)(o.InputText,{name:"message.user_id","data-test-id":"SenderIdField",ref:m({required:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_error.senderIdRequired"})}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.senderIdPlaceholder"}),error:UG(null==(e=y.message)?void 0:e.user_id,c.formatMessage({id:"chat.announcements.createAnnouncement.fields_error.senderIdRequired"}))})});return"v1.0"===d?t:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.type"}),children:Object(W.jsx)(_i.a,{control:b,name:"message.type",render:({onChange:e,value:t})=>Object(W.jsx)(yG,{value:t,onChange:e,disabled:i&&"MESG"===_&&"target_channels"!==C})})}),"MESG"===_&&t]})},[d,b,y.message,c,i,_,m,C]),N=c.formatMessage({id:"target_channels"===C?"chat.announcements.createAnnouncement.fields.targets.placeholder_lbl.channelUrls":"chat.announcements.createAnnouncement.fields.targets.placeholder_lbl.userIds"}),R=Object(a.useMemo)(()=>k?Object(W.jsxs)(PG,{children:[Object(W.jsx)("h5",{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.title"})}),Object(W.jsx)(_i.a,{control:b,name:"create_channel_options.distinct",render:({onChange:e,value:t,name:n})=>Object(W.jsx)(BG,{name:n,value:t,onChange:e})}),Object(W.jsx)(o.InputText,{type:"text",name:"create_channel_options.name",ref:m,label:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.name"})," ",Object(W.jsx)(RG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.name.placeholder"}),"data-test-id":"CreateChannelOptionsNameField"}),Object(W.jsx)(o.InputText,{type:"text",name:"create_channel_options.cover_url",ref:m,label:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.coverUrl"})," ",Object(W.jsx)(RG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.coverUrl.placeholder"})}),Object(W.jsx)(o.InputText,{type:"text",name:"create_channel_options.custom_type",ref:m,label:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.customType"})," ",Object(W.jsx)(RG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.customType.placeholder"})}),Object(W.jsx)(o.InputText,{type:"text",name:"create_channel_options.data",ref:m,label:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.data"})," ",Object(W.jsx)(RG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannelOptions.data.placeholder"})})]}):null,[b,k,c,m]),L=Object(a.useMemo)(()=>{const e=Object(W.jsxs)(LG,{children:[!i&&Object(W.jsx)(MG,{label:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.targets"}),name:"target_list",ref:m({required:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.targets.error.required"}),validate:{maxTargetCount:e=>IG(e)<=1e4||c.formatMessage({id:"chat.announcements.createAnnouncement.fields.targets.error.tooManyTargets"})}}),error:D,placeholder:N}),M&&Object(W.jsxs)(W.Fragment,{children:[!i&&Object(W.jsx)(_i.a,{control:b,name:"target_channel_type",render:({onChange:e,value:t})=>Object(W.jsx)(VG,{label:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.targetChannelType"}),width:"100%",selectedItem:t,onChange:e})}),Object(W.jsx)(zG,{ref:m,name:"create_channel",label:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.createChannel"})}),R]})]});return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(AG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.sectionTitle.targetOptions"})}),Object(W.jsx)(iy.j,{"data-test-id":"TargetAtRow",children:Object(W.jsxs)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.targetAt"}),gridItemConfig:I?{subject:{alignSelf:"start"}}:void 0,children:[Object(W.jsx)(_i.a,{control:b,name:"target_at",render:({onChange:e,value:t})=>Object(W.jsx)(_G,{selectedItem:t,onChange:e,readOnly:i||"BRDM"===_||"ADMM"===_,width:"100%"})}),I&&e]})})]})},[c,m,D,N,M,b,R,I,i,_]);return Object(W.jsxs)("form",{onSubmit:f(async e=>{await v("scheduled_at")&&t(e)}),children:[Object(W.jsx)(s.b,{when:x.isDirty&&"done"!==r,message:c.formatMessage({id:"common.dialog.unsaved.desc"})}),Object(W.jsx)(AG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.sectionTitle.messageSettings"})}),Object(W.jsxs)(iy.j,{children:[A,Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.message"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(o.InputTextarea,{name:"message.content","data-test-id":"MessageField",placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messagePlaceholder"}),ref:m({required:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_error.messageRequired"})}),error:UG(null==(l=y.message)?void 0:l.content,c.formatMessage({id:"chat.announcements.createAnnouncement.fields_error.messageRequired"}))})}),Object(W.jsx)(iy.i,{title:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageData"})," ",Object(W.jsx)(NG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageDataDescription"}),children:Object(W.jsx)(o.InputTextarea,{name:"message.data",ref:m,"aria-label":c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageData"}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageDataPlaceholder"})})}),Object(W.jsx)(iy.i,{title:Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageCustomType"})," ",Object(W.jsx)(NG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageCustomTypeDescription"}),children:Object(W.jsx)(o.InputText,{type:"text",name:"message.custom_type",ref:m,"aria-label":c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageCustomType"}),placeholder:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.messageCustomTypePlaceholder"})})}),Object(W.jsx)(iy.i,{title:"v1.5"===d?"Custom type":Object(W.jsxs)(W.Fragment,{children:[c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.announcementGroup"})," ",Object(W.jsx)(NG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.fields.optionalFieldLabelDecorator"})})]}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.announcementGroupDescription"}),"data-test-id":"AnnouncementGroupRow",children:Object(W.jsx)(_i.a,{control:b,name:"announcement_group",render:({onChange:e})=>Object(W.jsx)(Jq,{onChange:e,initialSelectedItem:n.announcement_group,placeholder:"v1.5"===d?"Select or enter custom type":c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.announcementGroupPlaceholder"})})})})]}),L,Object(W.jsx)(AG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.sectionTitle.scheduleSettings"})}),Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.timezone"}),"data-test-id":"TimezoneRow",children:Object(W.jsx)(_i.a,{control:b,name:"timezone",render:({onChange:e})=>Object(W.jsx)(DG,{onChange:e,initialSelectedItem:u,width:"100%",listWidth:"100%"})})}),Object(W.jsxs)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.scheduleAt"}),"data-test-id":"ScheduledAtRow",children:[Object(W.jsx)(_i.a,{control:b,name:"scheduled_at",rules:{validate:e=>e.isSameOrAfter()||c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.scheduleAt.error.pastSchedule"})},onFocus:()=>{var e;null==(e=g.current)||e.focus()},render:({onChange:e,value:t})=>Object(W.jsx)(Qq,{ref:g,dateTime:t,blockPastTime:!1,onChange:e,formatDate:e=>e.format("MMMM D, YYYY"),timezone:T,hasError:!!y.scheduled_at})}),y.scheduled_at&&Object(W.jsx)(FG,{children:y.scheduled_at.message})]}),"v1.0"!==d&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.ceaseAtResumeAt"}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.ceaseAtResumeAtDescription"}),children:Object(W.jsx)(_i.a,{control:b,name:"cease_resume_at",rules:{validate:{bothCeaseAtAndResumeAtSpecified:({ceaseAt:e,resumeAt:t})=>!!e==!!t||c.formatMessage({id:"chat.announcements.createAnnouncement.fields_error.bothCeaseAtResumeAt"})}},onFocus:()=>{var e;null==(e=p.current)||e.focus()},render:({onChange:e})=>{var t,a,i;return Object(W.jsx)(lG,{ref:p,onChange:({ceaseAt:t,resumeAt:n})=>e({ceaseAt:t,resumeAt:n}),timezone:T,defaultValue:null!=(t=n.cease_resume_at)?t:void 0,error:null!=(a=null==(i=y.cease_resume_at)?void 0:i.message)?a:null})}})}),Object(W.jsx)(iy.i,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.endAt"}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.endAtDescription"}),"data-test-id":"EndAtRow",children:Object(W.jsx)(_i.a,{control:b,name:"end_at",rules:{validate:e=>{if(null==e)return!0;const t=j("scheduled_at");return e.isSameOrAfter(t.clone().add(30,"minute"))||c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.endAt.error.tooCloseToScheduledAt"})}},onFocus:()=>{var e;null==(e=h.current)||e.focus()},render:({name:e,onChange:t})=>{var a;return Object(W.jsx)(bG,{ref:h,onChange:n=>{t(n),v(e)},currentScheduledAtRef:S,defaultValue:n.end_at,timezone:T,error:null==(a=y.end_at)?void 0:a.message})}})})]})]}),Object(W.jsx)(AG,{children:c.formatMessage({id:"chat.announcements.createAnnouncement.sectionTitle.notifications"})}),Object(W.jsx)(iy.j,{children:Object(W.jsx)(HG,{title:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.enablePush"}),description:c.formatMessage({id:"chat.announcements.createAnnouncement.fields_lbl.enablePush.description"}),children:Object(W.jsx)(_i.a,{control:b,name:"enable_push",render:({onChange:e,onBlur:t,value:n,name:a,ref:i})=>Object(W.jsx)(o.Toggle,{ref:i,name:a,checked:n,onChange:e,onBlur:t})})})}),Object(W.jsxs)(iy.f,{isVisible:!0,theme:"transparent",children:[Object(W.jsx)(o.Button,{type:"button",buttonType:"tertiary",onClick:e,"data-test-id":"CancelButton",children:c.formatMessage({id:"chat.announcements.createAnnouncement_button.cancel"})},"cancel"),Object(W.jsx)(o.Button,{type:"submit",buttonType:"primary",isLoading:"pending"===r,disabled:"pending"===r,"data-test-id":"SubmitButton",children:c.formatMessage({id:i?"chat.announcements.editAnnouncement.btn.save":"chat.announcements.createAnnouncement_button.create"})},"save")]})]})},GG=Object(r.default)(V.Rb).withConfig({displayName:"EditAnnouncement__Container",componentId:"sc-1oa09zx-0"})(["max-width:1024px;margin-bottom:56px;"]),WG=e=>c.a.tz(e,"HHmm","UTC");var KG=Object(r.default)(V.Sb).withConfig({displayName:"EditAnnouncement___StyledPageHeader",componentId:"sc-1oa09zx-1"})(["& + *{margin-top:24px;}"]);const YG=()=>{const e=Object(E.a)(),t=Object(P.c)(),n=Object(s.k)(),i=vB(),{id:r,item:o,updateStatus:l}=wB(),{edit:d,resetUpdateStatus:u}=TB();Object(a.useEffect)(()=>{u()},[u]);const p=Object(a.useCallback)(e=>{var t;const{cease_resume_at:n}=e,{ceaseAt:a,resumeAt:s}=n||{ceaseAt:null,resumeAt:null},r={scheduled_at:e.scheduled_at.valueOf(),create_channel:e.create_channel,enable_push:e.enable_push};if("v1.0"===i)return{...r,announcement:{message_type:"MESG",user_id:e.message.user_id,message:e.message.content,data:e.message.data,custom_type:e.message.custom_type},channel_creation_options:e.create_channel_options,group:e.announcement_group};const o={create_channel_options:e.create_channel_options,message:e.message,cease_at:null==a?void 0:a.tz("UTC").format("HHmm"),resume_at:null==s?void 0:s.tz("UTC").format("HHmm"),end_at:null==(t=e.end_at)?void 0:t.valueOf()};return"v1.5"===i?{...r,...o,custom_type:e.announcement_group}:{...r,...o,announcement_group:e.announcement_group}},[i]),g=Object(a.useMemo)(()=>{if(null==o)return null;const e=()=>{t&&n.push(`/${t}/announcements/${r}`)},[a,s,u]=["cease_at","resume_at","end_at"].map(e=>BB(o,e,i));return Object(W.jsx)(qG,{isEditing:!0,submitStatus:l,onCancelButtonClick:e,defaultValues:{message:BB(o,"message",i),announcement_group:BB(o,"announcement_group",i),create_channel:o.create_channel,create_channel_options:BB(o,"create_channel_options",i),enable_push:o.enable_push,scheduled_at:c()(o.scheduled_at),target_at:BB(o,"target_at",i),target_channel_type:BB(o,"target_channel_type",i),cease_resume_at:{ceaseAt:a?WG(a):null,resumeAt:s?WG(s):null},end_at:u?c()(u):null},onSubmit:t=>{(async t=>{if("pending"===l)return;await d(t)&&e()})(p(t))}})},[i,t,d,p,n,r,o,l]);return Object(W.jsxs)(GG,{children:[Object(W.jsxs)(KG,{children:[Object(W.jsx)(V.Sb.BackButton,{href:`/${t}/announcements/${r}`}),Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"chat.announcements.editAnnouncement.title"})})]}),g]})},QG=r.default.div.withConfig({displayName:"AnnouncementDetail__GridLayout",componentId:"v8pntm-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;display:grid;grid-template-rows:56px 1fr;grid-gap:1px;background:",";> *{background:white;}"],Object(o.cssVariables)("neutral-3")),JG=r.default.div.withConfig({displayName:"AnnouncementDetail__Main",componentId:"v8pntm-1"})(["max-width:1024px;padding-bottom:56px;"]),XG=r.default.h2.withConfig({displayName:"AnnouncementDetail__TitleText",componentId:"v8pntm-2"})(["",";margin:0;margin-right:4px;max-width:460px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],o.Headings["heading-03"]),ZG=r.default.div.withConfig({displayName:"AnnouncementDetail__EmptyStatsView",componentId:"v8pntm-3"})(["display:flex;align-items:center;justify-content:center;text-align:center;background-color:",";border-radius:4px;height:56px;",";color:",";"],Object(o.cssVariables)("neutral-1"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),eW=r.default.div.withConfig({displayName:"AnnouncementDetail__AnimationFadeInOut",componentId:"v8pntm-4"})(["",";"],e=>e.running?Object(r.css)(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;animation-fill-mode:both;"],o.animationFadeInOut):null),tW=r.default.div.withConfig({displayName:"AnnouncementDetail__Actions",componentId:"v8pntm-5"})(["display:grid;grid-auto-flow:column;grid-gap:8px;"]),nW=Object(r.default)(o.Button).attrs({type:"button",size:"small"}).withConfig({displayName:"AnnouncementDetail__ActionButton",componentId:"v8pntm-6"})([""]),aW=r.default.h3.withConfig({displayName:"AnnouncementDetail__SectionTitle",componentId:"v8pntm-7"})(["",";color:",";margin-bottom:12px;&:not(:first-child){margin-top:32px;}"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7"));var iW=Object(r.default)(aW).withConfig({displayName:"AnnouncementDetail___StyledSectionTitle",componentId:"v8pntm-8"})(["display:flex;flex-direction:row;justify-content:space-between;"]);const sW=r.default.span.withConfig({displayName:"AnnouncementDetail__StatusText",componentId:"v8pntm-9"})(["",";color:",";text-align:right;"],o.Headings["heading-02"],Object(o.cssVariables)("neutral-7"));var rW=Object(r.default)(V.z).withConfig({displayName:"AnnouncementDetail___StyledContentContainer",componentId:"v8pntm-10"})(["display:flex;align-items:center;justify-content:center;width:100%;","{width:100%;}"],V.Sb),oW=Object(r.default)(V.D).withConfig({displayName:"AnnouncementDetail___StyledCopyButton",componentId:"v8pntm-11"})(["margin-right:8px;"]),lW=Object(r.default)(V.z).withConfig({displayName:"AnnouncementDetail___StyledContentContainer2",componentId:"v8pntm-12"})(["padding-top:32px;"]);const cW=()=>{var e;const t=Object(E.a)(),{id:n,item:i,stats:r,statsLoadTimestamp:l,updateStatus:d,isWaitingToResume:u}=wB(),{cancel:p,pause:g,resume:h,stop:m,reload:f}=TB(),b=LB(),{isPermitted:j}=Object(P.h)(),y=vB(),O=Object(P.W)(),v=Object(s.n)(),x=Object(s.k)(),{query:_}=x.location,C=(()=>{const e=Object(E.a)(),t=Object(P.W)();return Object(a.useCallback)((n,a)=>t({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:e.formatMessage({id:"chat.announcements.detail.dialogs.notEnoughTimeForEditDialog.title"}),description:e.formatMessage({id:"chat.announcements.detail.dialogs.notEnoughTimeForEditDialog.description"},{minutes:n}),positiveButtonProps:{text:e.formatMessage({id:"chat.announcements.detail.dialogs.notEnoughTimeForEditDialog.btn.confirm"}),onClick:a},negativeButtonProps:{text:e.formatMessage({id:"chat.announcements.detail.dialogs.notEnoughTimeForEditDialog.btn.cancel"})}}}),[e,t])})(),k="pending"===d,w=Object(a.useMemo)(()=>{if(null==i)return[];const e=Object(W.jsx)(nW,{buttonType:"tertiary",icon:"delete",disabled:k,isLoading:k,onClick:()=>{O({dialogTypes:A.a.Delete,dialogProps:{title:t.formatMessage({id:"chat.announcements.detail.dialogs.cancelDialog.title"}),description:t.formatMessage({id:"chat.announcements.detail.dialogs.cancelDialog.description"}),confirmText:t.formatMessage({id:"chat.announcements.detail.dialogs.cancelDialog.btn.confirm"}),cancelText:t.formatMessage({id:"chat.announcements.detail.dialogs.cancelDialog.btn.cancel"}),onDelete:async(e,t)=>{e(!0);try{await p()}catch(e){throw e instanceof xB&&(t(!0),f()),e}}}})},children:t.formatMessage({id:"chat.announcements.detail.action.cancel"})},"cancel"),n=Object(W.jsx)(pe.Link,{to:`${null==v?void 0:v.url}/edit`,onClick:e=>{const t=c()(i.scheduled_at).diff(c()(),"minute",!0);t<=10&&(e.preventDefault(),C(Math.max(1,Math.ceil(t)),()=>x.push(`${null==v?void 0:v.url}/edit`)))},children:Object(W.jsx)(nW,{buttonType:"secondary",icon:"edit",children:t.formatMessage({id:"chat.announcements.detail.action.edit"})},"edit")}),a=Object(W.jsx)(nW,{buttonType:"tertiary",icon:"remove",disabled:k,isLoading:k,onClick:()=>{O({dialogTypes:A.a.Delete,dialogProps:{title:t.formatMessage({id:"chat.announcements.detail.dialogs.stopDialog.title"}),description:t.formatMessage({id:"chat.announcements.detail.dialogs.stopDialog.description"}),confirmText:t.formatMessage({id:"chat.announcements.detail.dialogs.stopDialog.btn.confirm"}),cancelText:t.formatMessage({id:"chat.announcements.detail.dialogs.stopDialog.btn.cancel"}),onDelete:async(e,t)=>{e(!0);try{await m()}catch(e){throw e instanceof xB&&(t(!0),f()),e}}}})},children:t.formatMessage({id:"chat.announcements.detail.action.stop"})},"stop"),s=Object(W.jsx)(nW,{buttonType:"tertiary",icon:"pause",disabled:k,isLoading:k,onClick:()=>{O({dialogTypes:A.a.Confirm,dialogProps:{title:t.formatMessage({id:"chat.announcements.detail.dialogs.pauseDialog.title"}),description:t.formatMessage({id:"chat.announcements.detail.dialogs.pauseDialog.description"}),confirmText:t.formatMessage({id:"chat.announcements.detail.dialogs.pauseDialog.btn.confirm"}),onConfirm:async(e,t)=>{e(!0);try{await g()}catch(e){throw e instanceof xB&&(t(!0),f()),e}}}})},children:t.formatMessage({id:"chat.announcements.detail.action.pause"})},"pause"),r=Object(W.jsx)(nW,{buttonType:"tertiary",icon:"resume",disabled:k,isLoading:k,onClick:()=>{O({dialogTypes:A.a.Confirm,dialogProps:{title:t.formatMessage({id:"chat.announcements.detail.dialogs.resumeDialog.title"}),description:t.formatMessage({id:"chat.announcements.detail.dialogs.resumeDialog.description"}),confirmText:t.formatMessage({id:"chat.announcements.detail.dialogs.resumeDialog.btn.confirm"}),onConfirm:async(e,t)=>{try{e(!0),await h()}catch(e){throw e instanceof xB&&(t(!0),f()),e}}}})},children:t.formatMessage({id:"chat.announcements.detail.action.resume"})},"resume");return"scheduled"===i.status?[e,n]:"running"===i.status?"v1.0"===y?[a]:[s,a]:"paused"===i.status?[r]:[]},[i,y,p,x,t,k,v,g,f,h,O,C,m]),T="running"===(null==i?void 0:i.status),S=Object(a.useMemo)(()=>null==i?null:"scheduled"===i.status||"v1.5"===y&&"removed"===i.status||"v1.5"!==y&&"canceled"===i.status?Object(W.jsx)(ZG,{children:t.formatMessage({id:"chat.announcements.detail.statistics.noData"})}):Object(W.jsx)(_V,{announcement:i,stats:r}),[i,y,t,r]);return Object(W.jsxs)(QG,{children:[Object(W.jsx)(rW,{children:Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.BackButton,{href:`../announcements?status=${null!=(e=null==_?void 0:_.status)?e:""}`}),Object(W.jsxs)(V.Sb.Title,{children:[Object(W.jsx)(XG,{children:t.formatMessage({id:"chat.announcements.detail.title"},{uniqueId:n})}),Object(W.jsx)(oW,{copyableText:n,tooltipPlacement:"bottom"}),Object(W.jsx)(eW,{running:T,children:(null==i?void 0:i.status)&&Object(W.jsx)(AB,{status:i.status,tooltipPlacement:"bottom"})})]}),Object(W.jsx)(V.Sb.Actions,{children:Object(a.useMemo)(()=>u?Object(W.jsx)(sW,{children:t.formatMessage({id:"chat.announcements.detail.waitingToResume"})}):"on-hold"===(null==i?void 0:i.status)?Object(W.jsx)(sW,{children:t.formatMessage({id:"chat.announcements.detail.doNotDisturbFromTo"},{from:WB(null==i?void 0:i.cease_at,b),to:WB(null==i?void 0:i.resume_at,b)})}):j(["application.announcements.all"])&&Object(W.jsx)(tW,{"data-test-id":"Actions",children:w}),[w,i,t,j,u,b])})]})}),Object(W.jsx)(o.ScrollBar,{children:Object(W.jsx)(lW,{children:Object(W.jsxs)(JG,{children:[Object(W.jsxs)(iW,{children:[t.formatMessage({id:"chat.announcements.detail.statistics.title"}),Object(W.jsx)(V.xb,{timestamp:l,isTimeAgoHidden:!0})]}),S,Object(W.jsx)(aW,{children:t.formatMessage({id:"chat.announcements.detail.info.title"})}),i&&Object(W.jsx)(rV,{announcement:i})]})})})]})},dW=({onAnnouncementUpdated:e})=>{const t=Object(s.n)(),{eventId:n}=Object(s.m)();return null!=t&&t.url?Object(W.jsx)(kB,{id:n,onAnnouncementUpdated:e,children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${t.url}/edit`,component:YG}),Object(W.jsx)(s.d,{path:t.url,component:cW}),Object(W.jsx)(s.c,{to:t.url})]})}):Object(W.jsx)(s.c,{to:"/"})};var uW=Object(r.default)(o.Tag).withConfig({displayName:"VersionTag___StyledTag",componentId:"ohv7ot-0"})(["display:flex;"]);const pW=({value:e})=>{const t=LB();return Object(a.useMemo)(()=>{if(!e)return Object(W.jsx)(W.Fragment,{children:f.Z});const n=c()(e).tz(t);return Object(W.jsx)(W.Fragment,{children:n.format(f.B)})},[e,t])},gW=r.default.div.withConfig({displayName:"useTableColumns__AnimationFadeInOut",componentId:"sc-10ftbip-0"})(["",";"],e=>e.running?Object(r.css)(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;animation-fill-mode:both;"],o.animationFadeInOut):null),hW=Object(r.default)(o.Link).withConfig({displayName:"useTableColumns__UniqueIdLink",componentId:"sc-10ftbip-1"})(["word-break:break-all;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;"]),mW=r.default.span.withConfig({displayName:"useTableColumns__Message",componentId:"sc-10ftbip-2"})(["display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;"]),fW=r.default.dl.withConfig({displayName:"useTableColumns__StatusDefinitionList",componentId:"sc-10ftbip-3"})(["width:280px;margin-left:28px;",";color:",";"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),bW=r.default.div.withConfig({displayName:"useTableColumns__DefinitionListItem",componentId:"sc-10ftbip-4"})(["margin-bottom:4px;dt,dd{display:inline;}dt{position:relative;",";&::before{content:'•';",";position:absolute;top:0;left:-24px;}}dd{margin-bottom:4px;b{font-weight:600;}}"],o.Headings["heading-01"],o.Headings["heading-01"]),jW=Object(r.css)(["border-left:none;border-right:none;border-bottom:none;thead{flex:none;}tbody tr:last-child{border-bottom-width:1px;}th > span{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;[role='tooltip']{white-space:initial;}}tr:hover a{text-decoration:underline;}"]),yW=r.default.div.withConfig({displayName:"AnnouncementList__StyledAllStatus",componentId:"sc-79b9on-0"})(["",""],o.Subtitles["subtitle-01"]);var OW=Object(r.default)(V.Jb).withConfig({displayName:"AnnouncementList___StyledLoadMoreTable",componentId:"sc-79b9on-1"})(["",""],jW),vW=Object(r.default)(V.Sb).withConfig({displayName:"AnnouncementList___StyledPageHeader",componentId:"sc-79b9on-2"})(["* + ","{margin-top:16px;}"],e=>e._css),xW=Object(r.default)(e=>{const t=vB();return Object(W.jsxs)(uW,{...e,children:["V ",null==t?void 0:t.slice(1)]})}).withConfig({displayName:"AnnouncementList___StyledVersionTag",componentId:"sc-79b9on-3"})(["margin-left:8px;"]),_W=Object(r.default)("span").withConfig({displayName:"AnnouncementList___StyledSpan",componentId:"sc-79b9on-4"})(["position:absolute;overflow:hidden;width:0;height:0;"]),CW=Object(r.default)(DG).withConfig({displayName:"AnnouncementList___StyledTimezoneDropdown",componentId:"sc-79b9on-5"})(["margin-right:8px;"]);const kW=({items:e,isLoading:t,nextToken:n,onItemsUpdated:i,handleStatusFilter:l,status:c})=>{const d=Object(E.a)(),{isPermitted:u}=Object(P.h)(),p=Object(s.n)(),g=Object(P.c)(),h=vB(),m=(e=>{const t=Object(E.a)(),n=Object(s.k)(),a=vB(),i=JB();return[{title:t.formatMessage({id:"chat.announcements.list.table.column.uniqueId"}),dataIndex:"unique_id",render:t=>{const i=BB(t,"unique_id",a);return Object(W.jsx)(hW,{href:`${n.location.pathname}/${i}?status=${e}`,useReactRouter:!0,children:i})},styles:Object(r.css)(["flex:184px 1 1;max-width:400px;"])},{dataIndex:"scheduled_at",title:t.formatMessage({id:"chat.announcements.list.table.column.scheduledAt"}),render:({scheduled_at:e})=>Object(W.jsx)(pW,{value:e}),styles:Object(r.css)(["flex:144px 0 1;"])},{key:"message",title:t.formatMessage({id:"chat.announcements.list.table.column.message"}),render:e=>Object(W.jsx)(mW,{children:BB(e,"message",a).content}),styles:"flex: 256px 3 1;"},{title:"v1.0"===a?"Group":i.announcementGroup,key:"announcement_group",render:e=>{const t=BB(e,"announcement_group",a);return t?Object(W.jsx)(o.Tag,{children:t}):f.Z},styles:"flex: 144px 2 1;"},{dataIndex:"target_user_count",title:t.formatMessage({id:"chat.announcements.list.table.column.targetUserCount"}),render:({target_user_count:e})=>e<0?t.formatMessage({id:"chat.announcements.detail.info.targetCount.notApplicable"}):qB(e),styles:Object(r.css)(["flex:88px 0 1;"])},{dataIndex:"open_rate",title:t.formatMessage({id:"chat.announcements.list.table.column.openRate"}),render:({open_rate:e})=>GB(e),styles:Object(r.css)(["justify-content:flex-end;text-align:right;flex:80px 0 1;"])},{key:"completed_at",title:t.formatMessage({id:"chat.announcements.list.table.column.completedAt"}),render:e=>Object(W.jsx)(pW,{value:BB(e,"completed_at",a)}),styles:Object(r.css)(["flex:144px 0 1;"])},{dataIndex:"enable_push",title:t.formatMessage({id:"chat.announcements.list.table.column.enablePush"}),titleTooltip:{content:t.formatMessage({id:"chat.announcements.list.table.column.enablePush.tooltip"})},render:({enable_push:e})=>t.formatMessage({id:e?"chat.announcements.item.enablePush.on":"chat.announcements.item.enablePush.off"}),styles:Object(r.css)(["flex:136px 0 1;"])},{dataIndex:"status",title:t.formatMessage({id:"chat.announcements.list.table.column.status"}),titleTooltip:{placement:"bottom-end",content:Object(W.jsx)(fW,{children:EB().map(([e,t])=>Object(W.jsxs)(bW,{children:[Object(W.jsxs)("dt",{children:[e,": "]}),Object(W.jsxs)("dd",{children:[t,Object(W.jsx)("br",{})]})]},e))}),tooltipWidth:360},styles:Object(r.css)(["width:98px;flex:none;"]),render:({status:e})=>Object(W.jsx)(gW,{running:"running"===e,children:Object(W.jsx)(AB,{status:e,tooltipPlacement:"bottom-end"})})}]})(c),b=LB(),j=Object(a.useContext)(RB),[y,O]=Object(a.useState)(!1),v=Object(a.useCallback)(async()=>{O(!0);try{const{data:t}=await Object(js.fetchAnnouncements)({appId:g,limit:20,listToken:n,...c!==VB&&{status:c}});i({items:e.concat(t.announcements),nextToken:t.next})}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{O(!1)}},[g,e,n,i,c]),x=Object(a.useMemo)(()=>Object(W.jsx)(OW,{columns:m,rowStyles:()=>Object(r.css)(["&:not(:hover) a{color:"," !important;}"],Object(o.cssVariables)("neutral-10")),dataSource:e,loading:t,emptyView:Object(W.jsx)(z.a,{icon:"announcements",title:d.formatMessage({id:"chat.announcements.list.table.emptyView.title"}),description:d.formatMessage({id:"chat.announcements.list.table.emptyView.description"})}),hasNext:!t&&!!n,loadMoreButtonProps:{onClick:v,isLoading:y,disabled:y,"data-test-id":"LoadMoreButton"},showScrollbars:!0}),[m,d,t,y,e,v,n]);if(!h)return null;const _=(e,t)=>Object(W.jsx)("div",{style:{marginLeft:t?"16px":""},children:e===VB?Object(W.jsx)(yW,{children:d.formatMessage({id:"chat.announcements.filter.status.all"})}):Object(W.jsx)(o.Lozenge,{color:DB[e],children:e})});return Object(W.jsxs)(V.hc,{children:[Object(W.jsxs)(vW,{_css:V.Sb.Description,children:[Object(W.jsxs)(V.Sb.Title,{children:[d.formatMessage({id:"chat.announcements.list.title"}),Object(W.jsx)(xW,{})]}),Object(W.jsxs)(V.Sb.Actions,{children:[Object(W.jsxs)("label",{"data-test-id":"TimezoneDropdownWrapper",children:[Object(W.jsx)(_W,{children:"Timezone"}),Object(W.jsx)(CW,{size:"small",initialSelectedItem:b,onChange:j,listWidth:386})]}),u(["application.announcements.all"])&&Object(W.jsx)(pe.Link,{to:`${null==p?void 0:p.url}/create`,children:Object(W.jsx)(o.Button,{"data-test-id":"CreateAnnouncementButton",buttonType:"primary",size:"small",icon:"plus",children:d.formatMessage({id:"chat.announcements.list.btn.create"})})})]}),Object(W.jsx)(V.Sb.Description,{children:"v1.6"===h?d.formatMessage({id:"chat.announcements.list.description"}):d.formatMessage({id:"chat.announcements.list.description.legacyVersion"},{a:e=>Object(W.jsx)(o.Link,{href:"/settings/contact_us",useReactRouter:!0,variant:o.LinkVariant.Inline,children:e})})})]}),"v1.6"===h&&Object(W.jsx)("div",{"data-test-id":"pageHeaderFilter",children:Object(W.jsx)(o.Dropdown,{size:"small",selectedItem:c,items:[VB,...Object.keys(DB)],itemToElement:e=>_(e,!1),toggleRenderer:()=>_(c,!0),onChange:e=>{e&&l(e)}})}),x]})};var wW=n("d8FT"),TW=n.n(wW);const SW=r.default.dl.withConfig({displayName:"useConfirmScheduleDialog__ConfirmDialogInfoList",componentId:"sc-1fuxaav-0"})(["display:grid;grid-template-columns:92px 1fr;grid-gap:8px 16px;border-radius:4px;background-color:",";margin-top:16px;padding:16px;",";color:",";"],Object(o.cssVariables)("neutral-1"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),EW=r.default.dt.withConfig({displayName:"useConfirmScheduleDialog__ConfirmDialogInfoTitle",componentId:"sc-1fuxaav-1"})(["font-weight:500;"]),IW=r.default.dd.withConfig({displayName:"useConfirmScheduleDialog__ConfirmDialogInfoContent",componentId:"sc-1fuxaav-2"})([""]),MW=e=>{var t;return null==(t=f.dc.find(t=>t.value===e))?void 0:t.label},DW=e=>TW()(e,e=>"boolean"==typeof e||!!e),AW=Object(r.default)(V.Rb).withConfig({displayName:"CreateAnnouncement__Container",componentId:"c5xwbg-0"})(["max-width:1024px;margin-bottom:56px;"," + *{margin-top:24px;}"],V.Sb),NW=({reloadList:e})=>{const t=Object(E.a)(),n=Object(P.c)(),i=Object(b.f)(),r=Object(s.k)(),l=vB(),c=(()=>{const e=Object(E.a)(),t=Object(P.W)();return Object(a.useCallback)(({timezone:n,scheduledAt:a,ceaseAt:i,resumeAt:s,endAt:r,onConfirm:o})=>t({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.title"}),description:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.description"}),body:Object(W.jsxs)(SW,{children:[Object(W.jsx)(EW,{children:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.infoTitle.timezone"})}),Object(W.jsx)(IW,{children:MW(n)}),Object(W.jsx)(EW,{children:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.infoTitle.scheduledAt"})}),Object(W.jsx)(IW,{children:a.tz(n).format(f.y)}),i&&s&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(EW,{children:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.infoTitle.ceaseAtResumeAt"})}),Object(W.jsxs)(IW,{children:[i.tz(n).format("HH:mm")," - ",s.tz(n).format("HH:mm")]})]}),r&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(EW,{children:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.infoTitle.endAt"})}),Object(W.jsx)(IW,{children:r.tz(n).format(f.y)})]})]}),positiveButtonProps:{text:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.btn.create"}),onClick:o},negativeButtonProps:{text:e.formatMessage({id:"chat.announcements.createAnnouncement.confirmDialog.btn.cancel"})}}}),[e,t])})(),d=(()=>{const e=Object(E.a)(),t=Object(P.W)();return Object(a.useCallback)(n=>t({dialogTypes:A.a.Custom,dialogProps:{title:e.formatMessage({id:"chat.announcements.createAnnouncement.errorDialog.title"}),description:n,size:"small",isNegativeButtonHidden:!0,positiveButtonProps:{text:e.formatMessage({id:"chat.announcements.createAnnouncement.errorDialog.btn.ok"})}}}),[e,t])})(),[u,p]=Object(a.useState)("idle"),g=Object(a.useCallback)(()=>{r.push(`/${n}/announcements`)},[n,r]);Object(a.useEffect)(()=>{"done"===u&&g()},[i,g,u]);const h=Object(a.useCallback)(e=>{var t,n,a;const{ceaseAt:i,resumeAt:s}=null!=(t=e.cease_resume_at)?t:{ceaseAt:null,resumeAt:null},r=null==(n=e.target_list)?void 0:n.split(",").map(e=>e.trim()),o=e.create_channel_options&&DW(e.create_channel_options),c={enable_push:e.enable_push,create_channel:e.create_channel,scheduled_at:e.scheduled_at.valueOf()};if("v1.0"===l)return{...c,...DW({announcement:DW({message_type:"MESG",user_id:e.message.user_id,message:e.message.content,data:e.message.data,custom_type:e.message.custom_type}),group:e.announcement_group,mode:bB(e.target_at),targets:r,target_distinct:jB(e.target_channel_type),channel_creation_options:o})};const d={message:DW(e.message),target_at:e.target_at,target_list:r,target_channel_type:e.target_channel_type,create_channel_options:o,cease_at:null==i?void 0:i.tz("UTC").format("HHmm"),resume_at:null==s?void 0:s.tz("UTC").format("HHmm"),end_at:null==(a=e.end_at)?void 0:a.valueOf()};return"v1.5"===l?{...c,...DW({...d,custom_type:e.announcement_group})}:{...c,...DW({...d,announcement_group:e.announcement_group})}},[l]),m=Object(a.useCallback)(async a=>{if("pending"===u)return;const i=h(a);p("pending");try{await Object(js.createAnnouncement)({appId:n,payload:i}),p("done"),o.toast.success({message:t.formatMessage({id:"chat.announcements.createAnnouncement.noti.success"})}),e()}catch(e){p("idle");const n=OB(e,t);if(n)return void d(n);o.toast.error({message:Object(mi.b)(e)})}},[n,h,t,e,d,u]),j=Object(a.useCallback)(e=>{const{timezone:n,cease_resume_at:a,scheduled_at:i,end_at:s}=e,{ceaseAt:r,resumeAt:o}=a||{ceaseAt:null,resumeAt:null};c({timezone:n,scheduledAt:i,ceaseAt:r,resumeAt:o,endAt:s,onConfirm:()=>{i.isBefore()?setTimeout(()=>{d(t.formatMessage({id:"chat.announcements.scheduleErrors.pastScheduledAt"}))},0):m(e)}})},[c,t,m,d]);return Object(W.jsxs)(AW,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.BackButton,{href:"../announcements"}),Object(W.jsx)(V.Sb.Title,{children:t.formatMessage({id:"chat.announcements.createAnnouncement_title"})})]}),Object(W.jsx)(qG,{onCancelButtonClick:g,submitStatus:u,onSubmit:j})]})},RW=e=>e.unique_id||e.event_id,PW={status:"ALL_STATUS"};var LW=n("LPPQ"),FW=n("uiWU"),UW=Object(FW.a)(LW.a,3),$W=n("LA2Y"),BW=n("xZTq");var VW=Object(FW.a)((function(e){Object(dm.a)(1,arguments);var t=Object(cm.a)(e);return t.setSeconds(0,0),t}),1),zW=n("YS3K"),HW=n("7Vml"),qW=n("BqxD");const GW=r.default.div.withConfig({displayName:"ModerationToolHeader__Container",componentId:"bibq20-0"})(["display:flex;align-items:center;position:relative;height:64px;background-color:white;padding-left:16px;padding-right:12px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),WW=r.default.div.withConfig({displayName:"ModerationToolHeader__MTHeaderChannel",componentId:"bibq20-1"})(["display:flex;flex:1;flex-direction:row;align-items:center;min-width:0;"]),KW=r.default.div.withConfig({displayName:"ModerationToolHeader__MTChannelName",componentId:"bibq20-2"})(["display:-webkit-box;margin-left:12px;overflow:hidden;word-wrap:break-word;color:",";-webkit-box-orient:vertical;-webkit-line-clamp:2;",";"],Object(o.cssVariables)("neutral-10"),o.Headings["heading-02"]),YW=r.default.div.attrs({role:"separator"}).withConfig({displayName:"ModerationToolHeader__Separator",componentId:"bibq20-3"})(["margin-right:16px;margin-left:16px;background:",";width:1px;height:20px;"],Object(o.cssVariables)("neutral-3")),QW=r.default.div.withConfig({displayName:"ModerationToolHeader__MTHeaderMenu",componentId:"bibq20-4"})(["display:flex;align-items:center;justify-content:flex-end;padding:0 0 0 16px;> *:not(",") + *:not(","){margin-left:4px;}"],YW,YW),JW=({channel:e,children:{operatorFilter:t,textZoomButton:n,changeLayoutButton:a,previousChatButton:i}})=>{var s;const r=Object(E.a)();return Object(W.jsxs)(GW,{children:[Object(W.jsxs)(WW,{children:[Object(W.jsx)(o.Avatar,{type:o.AvatarType.Channel,size:32,imageUrl:null==e?void 0:e.cover_url,profileID:null!=(s=null==e?void 0:e.channel_url)?s:""}),Object(W.jsx)(KW,{"data-test-id":"ChannelName",children:(null==e?void 0:e.name)||r.formatMessage({id:"chat.channelList.emptyChannelNamePlaceholder"})})]}),Object(W.jsxs)(QW,{children:[n,i,t&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(YW,{}),t]}),Object(W.jsx)(YW,{}),a]})]})},XW=({isMenuOpen:e})=>{const t=Object(P.L)(e),n=Object(a.useRef)(null);Object(a.useEffect)(()=>{var t;e&&(null==(t=n.current)||t.hide())},[e]);const i=Object(a.useCallback)(()=>({ref:n,trigger:o.TooltipTrigger.Manual}),[]),s=Object(a.useCallback)(()=>({onMouseEnter:()=>{var e;t.current||(null==(e=n.current)||e.show())},onMouseLeave:()=>{var e;null==(e=n.current)||e.hide()}}),[t]);return Object(a.useMemo)(()=>({getTooltipProps:i,getButtonProps:s}),[s,i])};var ZW;!function(e){e.ShowSidebar="show_sidebar",e.HideSidebar="hide_sidebar"}(ZW||(ZW={}));const eK={[ZW.HideSidebar]:"layout-no-division",[ZW.ShowSidebar]:"layout-division"},tK=r.default.div.withConfig({displayName:"ChangeLayoutDropdown__Toggle",componentId:"sc-1vv2eyu-0"})(["align-items:center;border-radius:4px;color:",";display:flex;height:100%;padding-left:6px;padding-right:6px;&:hover{background-color:"," !important;}button[aria-pressed='true'] &{background-color:"," !important;}"],Object(o.cssVariables)("neutral-9"),Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("neutral-3")),nK=r.default.div.withConfig({displayName:"ChangeLayoutDropdown__DropdownItemContent",componentId:"sc-1vv2eyu-1"})(["display:flex;align-items:center;margin-right:28px;"]);var aK=Object(r.default)(o.Icon).withConfig({displayName:"ChangeLayoutDropdown___StyledIcon",componentId:"sc-1vv2eyu-2"})(["margin-right:8px;"]),iK=Object(r.default)("div").withConfig({displayName:"ChangeLayoutDropdown___StyledDiv",componentId:"sc-1vv2eyu-3"})(["ul li[role='option']{padding-right:16px !important;}"]),sK=Object(r.default)(o.Dropdown).withConfig({displayName:"ChangeLayoutDropdown___StyledDropdown",componentId:"sc-1vv2eyu-4"})(["min-width:0;border:0 !important;padding:0;"]),rK=Object(r.default)(o.Icon).withConfig({displayName:"ChangeLayoutDropdown___StyledIcon2",componentId:"sc-1vv2eyu-5"})(["margin-left:4px;"]);const oK=({isInformationSidebarHidden:e,onChange:t})=>{const n=Object(E.a)(),i=e?ZW.HideSidebar:ZW.ShowSidebar,[s,r]=Object(a.useState)(!1),{getTooltipProps:l,getButtonProps:c}=XW({isMenuOpen:s}),d=Object(a.useCallback)(e=>({[ZW.ShowSidebar]:n.formatMessage({id:"chat.channelDetail.header.btn.changeLayout.chatWithInformation"}),[ZW.HideSidebar]:n.formatMessage({id:"chat.channelDetail.header.btn.changeLayout.chatOnly"})}[e]),[n]);return Object(W.jsx)(iK,{children:Object(W.jsx)(sK,{size:"small",placement:"bottom-end",selectedItem:i,items:[ZW.ShowSidebar,ZW.HideSidebar],itemToString:d,itemToElement:e=>Object(W.jsxs)(nK,{children:[Object(W.jsx)(aK,{icon:eK[e],size:20,color:"currentColor"}),d(e)]}),tooltipProps:{...l(),variant:o.TooltipVariant.Dark,content:n.formatMessage({id:"chat.channelDetail.header.btn.changeLayout"}),placement:"bottom-end"},onChange:Object(H.onDropdownChangeIgnoreNull)(e=>{t(e===ZW.HideSidebar)}),toggleRenderer:()=>Object(W.jsxs)(tK,{...c(),"data-test-id":"ToggleSidebarButton",children:[Object(W.jsx)(o.Icon,{icon:eK[i],size:20,color:"currentColor"}),Object(W.jsx)(rK,{icon:"chevron-down",color:"currentColor",size:16})]}),showArrow:!1,stateReducer:(e,t)=>(null!=t.isOpen&&r(t.isOpen),t)})})},lK=r.default.label.withConfig({displayName:"OperatorFilter__OperatorFilterLabel",componentId:"jdbape-0"})(["",";margin-right:11px;"],o.Headings["heading-01"]),cK=["all","operator","nonoperator"],dK=({operatorFilter:e,onItemSelected:t})=>{const n=Object(E.a)(),{sessionStorage:a}=window,i=a.getItem("operatorFilter");return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(lK,{children:n.formatMessage({id:"chat.channelDetail.header.btn.operatorFilter"})}),Object(W.jsx)(o.Dropdown,{itemToString:e=>((e,t)=>cK.includes(t)?e.formatMessage({id:`chat.channelDetail.header.operatorFilter.item.${t}`}):t)(n,e),initialSelectedItem:i||e,items:cK,size:"small",onItemSelected:e=>{a.setItem("operatorFilter",e),t(e)}})]})},uK=[500,400,300,250,200,175,150,125,110,100,90,80,75,67,50,33],pK=Object(r.default)(o.IconButton).attrs({buttonType:"secondary",size:"xsmall",tooltipPlacement:"bottom"}).withConfig({displayName:"TextZoomButton__ZoomInOutButton",componentId:"uo2d64-0"})([""]),gK=r.default.div.withConfig({displayName:"TextZoomButton__Menu",componentId:"uo2d64-1"})(["display:flex;align-items:center;z-index:",";border-radius:4px;background:white;padding-right:12px;padding-left:16px;height:44px;color:",";",";",";"],o.ZIndexes.dropdownMenu,Object(o.cssVariables)("neutral-7"),o.Typography["label-02"],o.shadow[8]);var hK=Object(r.default)(o.Button).withConfig({displayName:"TextZoomButton___StyledButton",componentId:"uo2d64-2"})(["padding:0 6px;min-width:0;color:"," !important;&[aria-pressed='true']{background-color:"," !important;}"],e=>e._css,e=>e._css2),mK=Object(r.default)(o.Icon).withConfig({displayName:"TextZoomButton___StyledIcon",componentId:"uo2d64-3"})(["margin-left:4px;"]),fK=Object(r.default)("span").withConfig({displayName:"TextZoomButton___StyledSpan",componentId:"uo2d64-4"})(["margin-right:12px;"]);const bK=({className:e,value:t,onChange:n})=>{const[i,s]=Object(a.useState)(!1),r=Object(E.a)(),l=Object(a.useRef)(null),c=Object(a.useRef)(null),d=Object(a.useRef)(()=>{}),{getTooltipProps:u,getButtonProps:p}=XW({isMenuOpen:i}),{subscribe:g,unsubscribe:h}=Object(P.P)({ref:c,exceptionRefs:[l],isExceptionsPreventOutsideClickEvent:!0,onOutsideClick:()=>{s(!1)}});Object(a.useEffect)(()=>{if(i)return g(),()=>{h()}},[i,g,h]),Object(a.useEffect)(()=>{d.current()},[t]);const m=0===uK.indexOf(t),f=uK.indexOf(t)===uK.length-1,b=Object(a.useRef)(null);return Object(a.useEffect)(()=>{var e;i&&(null==(e=b.current)||e.hide())},[i]),Object(W.jsxs)(un.c,{children:[Object(W.jsx)(cn.a,{innerRef:l,children:({ref:t})=>Object(W.jsx)(o.Tooltip,{...u(),content:r.formatMessage({id:"chat.channelDetail.header.btn.zoom"}),variant:o.TooltipVariant.Dark,children:Object(W.jsxs)(hK,{...p(),ref:t,className:e,buttonType:"tertiary",variant:"ghost",size:"small","aria-label":r.formatMessage({id:"chat.channelDetail.header.btn.zoom"}),onClick:()=>{s(e=>!e)},"aria-pressed":i,_css:Object(o.cssVariables)("neutral-10"),_css2:Object(o.cssVariables)("neutral-3"),children:[Object(W.jsx)(o.Icon,{icon:"text-size",color:"currentColor",size:20}),Object(W.jsx)(mK,{icon:"chevron-down",color:"currentColor",size:16})]})})}),i&&Object(W.jsx)(dn.a,{placement:"bottom-end",positionFixed:!0,innerRef:c,children:({ref:e,style:a,scheduleUpdate:i})=>(d.current=i,Object(W.jsxs)(gK,{ref:e,style:a,children:[Object(W.jsx)(fK,{"data-test-id":"TextScale",children:r.formatNumber(t/100,{style:"percent"})}),Object(W.jsx)(pK,{icon:"sign-minus",title:r.formatMessage({id:"chat.channelDetail.header.btn.zoomOut"}),onClick:()=>{var e;return n(null!=(e=uK[uK.indexOf(t)+1])?e:100)},disabled:f}),Object(W.jsx)(pK,{icon:"plus",title:r.formatMessage({id:"chat.channelDetail.header.btn.zoomIn"}),onClick:()=>{var e;return n(null!=(e=uK[uK.indexOf(t)-1])?e:100)},disabled:m})]}))})]})},jK=r.default.div.withConfig({displayName:"components__MT",componentId:"sc-108d9tq-0"})(["position:relative;height:100%;display:flex;flex-direction:column;"]),yK=r.default.div.withConfig({displayName:"components__MTBody",componentId:"sc-108d9tq-1"})(["min-height:0;flex:1;display:flex;flex-direction:row-reverse;position:relative;"]),OK=r.default.div.withConfig({displayName:"components__MTChat",componentId:"sc-108d9tq-2"})(["display:flex;flex-direction:column;flex-grow:2;flex-shrink:0;flex-basis:0%;overflow:hidden;position:relative;background:white;"]),vK=r.default.ul.withConfig({displayName:"components__MTUsers",componentId:"sc-108d9tq-3"})(["padding:16px 0;list-style-type:none;"]),xK=r.default.aside.attrs({"data-test-id":"InformationSidebar"}).withConfig({displayName:"components__MTInfoSidebar",componentId:"sc-108d9tq-4"})(["background:white;border-left:1px solid ",";padding:0;flex-grow:0;flex-shrink:0;flex-basis:300px;max-width:300px;min-width:300px;position:relative;overflow:hidden;"],Object(o.cssVariables)("neutral-3")),_K=r.default.div.withConfig({displayName:"components__MTInfoSection",componentId:"sc-108d9tq-5"})(["position:absolute;top:0;right:0;bottom:0;left:0;background:white;transition:all 0.2s ",";",""],o.transitionDefault,({$isActive:e})=>!e&&Object(r.css)(["transform:translateX(300px);"])),CK=r.default.button.withConfig({displayName:"components__StyledMTInfoSectionToggle",componentId:"sc-108d9tq-6"})(["display:flex;position:relative;align-items:center;transition:background 0.2s ",";border:0;border-bottom:1px solid ",";background:transparent;padding:0 16px;width:100%;height:48px;text-align:left;outline:0;&:focus-visible{box-shadow:0 0 0 2px ",";}&:hover{cursor:pointer;background:",";}"],o.transitionDefault,Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("neutral-1")),kK=r.default.div.withConfig({displayName:"components__MTInfoSectionToggleText",componentId:"sc-108d9tq-7"})(["flex:1;",";color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10"));var wK=Object(r.default)("div").withConfig({displayName:"components___StyledDiv",componentId:"sc-108d9tq-8"})(["margin-left:12px;margin-right:8px;"]);const TK=Object(a.memo)(({label:e,badge:t,onClick:n})=>Object(W.jsxs)(CK,{onClick:n,children:[Object(W.jsx)(kK,{children:e}),t&&Object(W.jsx)(wK,{children:t}),Object(W.jsx)(o.Icon,{icon:"chevron-right",size:16,color:Object(o.cssVariables)("neutral-9")})]})),SK=r.default.div.withConfig({displayName:"components__MTInfoContent",componentId:"sc-108d9tq-9"})(["position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto;"]),EK=r.default.div.withConfig({displayName:"NewMessageAlert__Container",componentId:"sc-9lqt1x-0"})(["display:flex;transition:0.2s ",";border-radius:14px;background:",";width:fit-content;height:28px;overflow:hidden;&[hidden]{display:flex;opacity:0;transform:translateY(-8px);}> button{display:flex;align-items:center;border:0;background:inherit;cursor:pointer;height:100%;color:white;}> button:first-child{padding-right:8px;padding-left:12px;white-space:nowrap;",";svg{margin-right:4px;}}> button:last-child{padding:0 12px;&:hover{background:",";}&:active{background:",";}}"],o.transitionDefault,Object(o.cssVariables)("purple-7"),o.Typography["label-02"],Object(o.cssVariables)("purple-8"),Object(o.cssVariables)("purple-9")),IK=r.default.div.withConfig({displayName:"NewMessageAlert__NewMessageAlertWrapper",componentId:"sc-9lqt1x-1"})(["position:absolute;top:8px;left:50%;transform:translateX(-50%);z-index:",";"],300);var MK=({className:e,count:t,isHidden:n,onClick:i,onClose:s})=>{const r=Object(E.a)(),l=Object(a.useRef)(t);Object(a.useEffect)(()=>{t>0&&(l.current=t)},[t]);const c=t>0?t:l.current;return Object(W.jsxs)(EK,{hidden:n,className:e,children:[Object(W.jsxs)("button",{type:"button",onClick:i,children:[Object(W.jsx)(o.Icon,{size:12,icon:"arrow-down",color:"currentColor"}),c>99?r.formatMessage({id:"chat.moderation.newMessageAlert.newMessages.many"},{countGreaterThan:99}):r.formatMessage({id:"chat.moderation.newMessageAlert.newMessages"},{count:c})]}),Object(W.jsx)("button",{type:"button",onClick:s,children:Object(W.jsx)(o.Icon,{size:16,icon:"close",color:"currentColor"})})]})};const DK={warning:Object(W.jsx)(o.TooltipTargetIcon,{icon:"warning-filled",color:Object(o.cssVariables)("red-5"),role:"alert"}),error:Object(W.jsx)(o.TooltipTargetIcon,{icon:"error-filled",color:Object(o.cssVariables)("red-5"),role:"alert"})},AK=r.default.div.withConfig({displayName:"UserListCountBadge__Container",componentId:"sc-8s9x9s-0"})(["display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;cursor:initial;"]),NK=r.default.div.withConfig({displayName:"UserListCountBadge__Badge",componentId:"sc-8s9x9s-1"})(["border-radius:10px;padding:4px 8px;background:",";color:",";line-height:0;[role='progressbar']{margin:0 6px;}"],({$color:e})=>"red"===e?Object(o.cssVariables)("red-2"):Object(o.cssVariables)("neutral-2"),({$color:e})=>"red"===e?Object(o.cssVariables)("red-6"):Object(o.cssVariables)("neutral-7")),RK=r.default.span.withConfig({displayName:"UserListCountBadge__Count",componentId:"sc-8s9x9s-2"})(["line-height:12px;font-size:11px;font-weight:600;"]),PK=r.default.span.withConfig({displayName:"UserListCountBadge__CountWithMax",componentId:"sc-8s9x9s-3"})(["line-height:12px;letter-spacing:0.25;font-size:11px;font-weight:400;b{font-weight:600;color:",";}"],({$color:e})=>"red"===e?"inherit":Object(o.cssVariables)("neutral-9")),LK=({count:e=0,error:t,isLoading:n,className:i,showPlusSign:s,max:r})=>{const l=Object(E.a)(),c="object"==typeof t?Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:t.message,placement:"bottom-end",tooltipContentStyle:"max-width: 256px;",portalId:"portal_tooltip",popperProps:{modifiers:{offset:{offset:"21, 6"}}},children:DK[t.icon]}):null,d=n||!t?"neutral":"red",u=Object(a.useMemo)(()=>{if(n)return Object(W.jsx)(o.Spinner,{stroke:"currentColor",size:12});const t=l.formatNumber(e)+(s?"+":"");return r?Object(W.jsxs)(PK,{$color:d,children:[Object(W.jsx)("b",{children:t})," / ",l.formatNumber(r)]}):Object(W.jsx)(RK,{children:t})},[d,e,l,n,r,s]);return Object(W.jsxs)(AK,{className:i,onClick:e=>{e.stopPropagation()},children:[Object(W.jsx)(NK,{$color:d,children:u}),c]})},FK={isLoading:!1,isLoadingMore:!1,items:[],next:"",count:0,hasError:!1,isLoadMoreFailed:!1},UK=(e,t)=>{switch(t.type){case"START_RELOADING":return{...FK,isLoading:!0};case"RELOADING_SUCCESS":return{...e,isLoading:!1,...t.payload};case"RELOADING_FAILURE":return{...e,isLoading:!1,hasError:!0};case"START_LOAD_MORE":return{...e,isLoadingMore:!0};case"LOAD_MORE_SUCCESS":return{...e,isLoadingMore:!1,isLoadMoreFailed:!1,items:e.items.concat(t.payload.items),next:t.payload.next};case"LOAD_MORE_FAILURE":return{...e,isLoadingMore:!1,isLoadMoreFailed:!0};case"REMOVE_BANNED_USER":return{...e,items:e.items.filter(e=>e.user.user_id!==t.payload.userId)};default:return e}},$K=({channelUrl:e,channelType:t,pageSize:n=100})=>{const i=Object(P.c)(),[s,r]=Object(a.useReducer)(UK,FK),o=Object(a.useRef)([]),{isLoading:l,isLoadingMore:c,hasError:d,next:u,count:p,items:g,isLoadMoreFailed:h}=s,m=Object(P.L)(c),f=Object(a.useCallback)(async()=>{if(!e)return;o.current.forEach(e=>e.cancel()),r({type:"START_RELOADING"});const a=Object(js.fetchChannelBannedUsers)({appId:i,channelUrl:e,channelType:t,token:"",limit:n});o.current.push(a);try{const e=await a,{data:{banned_list:t,next:i}}=e;r({type:"RELOADING_SUCCESS",payload:{items:t,next:i,count:t.length<n?t.length:n+Number(!!i)}})}catch(e){r({type:"RELOADING_FAILURE"})}finally{o.current=o.current.filter(e=>e!==a)}},[i,t,e,n]);Object(a.useEffect)(()=>{f()},[f]);const b=Object(a.useCallback)(async()=>{if(!e||!u||m.current)return;r({type:"START_LOAD_MORE"});const a=Object(js.fetchChannelBannedUsers)({appId:i,channelUrl:e,channelType:t,token:u,limit:n});o.current.push(a);try{const e=await a;if(null==e)return;const{data:{banned_list:t,next:n}}=e;r({type:"LOAD_MORE_SUCCESS",payload:{items:t,next:n}})}catch(e){r({type:"LOAD_MORE_FAILURE"})}finally{o.current=o.current.filter(e=>e!==a)}},[i,t,e,m,u,n]),j=Object(a.useCallback)((e,t)=>{!t&&g.some(({user:t})=>t.user_id===e)&&r({type:"REMOVE_BANNED_USER",payload:{userId:e}})},[g]),y=Object(a.useMemo)(()=>Object(W.jsx)(LK,{count:Math.min(p,n),showPlusSign:!!u,isLoading:l}),[p,l,u,n]);return{state:{isLoading:l,isLoadingMore:c,hasError:d,next:u,count:p,items:g,isLoadMoreFailed:h},countBadge:y,loadMore:b,reload:f,handleUserBanStateChange:j}},BK={isLoading:!1,isLoadingMore:!1,users:[],next:"",count:0,hasError:!1,isLoadMoreFailed:!1},VK=(e,t)=>{switch(t.type){case"START_RELOADING":return{...BK,isLoading:!0};case"RELOADING_SUCCESS":return{...e,isLoading:!1,...t.payload};case"RELOADING_FAILURE":return{...e,isLoading:!1,hasError:!0};case"START_LOAD_MORE":return{...e,isLoadingMore:!0};case"LOAD_MORE_SUCCESS":return{...e,isLoadingMore:!1,isLoadMoreFailed:!1,users:e.users.concat(t.payload.users),next:t.payload.next};case"LOAD_MORE_FAILURE":return{...e,isLoadingMore:!1,isLoadMoreFailed:!0};case"REMOVE_USER":return{...e,users:e.users.filter(e=>e.user_id!==t.payload.userId)};default:return e}},zK=({channelUrl:e,channelType:t,pageSize:n=100})=>{const i=Object(P.c)(),[s,r]=Object(a.useReducer)(VK,BK),o=Object(a.useRef)([]),{isLoading:l,isLoadingMore:c,next:d,count:u,users:p}=s,g=Object(P.L)(c),h=Object(a.useCallback)(async()=>{if(!e)return;o.current.forEach(e=>e.cancel()),r({type:"START_RELOADING"});const a=Object(js.fetchChannelMutedUsers)({appId:i,channelUrl:e,token:"",limit:n,channelType:t});o.current.push(a);try{const e=await a,{data:{muted_list:t,next:i}}=e;r({type:"RELOADING_SUCCESS",payload:{users:t,next:i,count:t.length<n?t.length:n+Number(!!i)}})}catch(e){r({type:"RELOADING_FAILURE"})}finally{o.current=o.current.filter(e=>e!==a)}},[i,t,e,n]);Object(a.useEffect)(()=>{h()},[h]);const m=Object(a.useCallback)(async()=>{if(!e||!d||g.current)return;r({type:"START_LOAD_MORE"});const a=Object(js.fetchChannelMutedUsers)({appId:i,channelUrl:e,token:d,limit:n,channelType:t});o.current.push(a);try{const e=await a;if(null==e)return;const{data:{muted_list:t,next:n}}=e;r({type:"LOAD_MORE_SUCCESS",payload:{users:t,next:n}})}catch(e){r({type:"LOAD_MORE_FAILURE"})}finally{o.current=o.current.filter(e=>e!==a)}},[i,t,e,g,d,n]),f=Object(a.useCallback)((e,t)=>{!t&&p.some(t=>t.user_id===e)&&r({type:"REMOVE_USER",payload:{userId:e}})},[p]);return{state:s,countBadge:Object(a.useMemo)(()=>Object(W.jsx)(LK,{count:Math.min(n,u),showPlusSign:!!d,isLoading:l}),[u,l,d,n]),loadMore:m,reload:h,handleUserMuteStateChange:f}};var HK=({channelUrl:e,channelType:t})=>{const n=Object(P.Y)(e=>e.sendbird.isConnected),[{status:i,channel:s,error:r},o]=Object(a.useState)({status:"init"});return{loadSdkChannel:Object(a.useCallback)(async()=>{if(n)try{o({status:"loading"});const n=await("open_channels"===t?window.dashboardSB.OpenChannel.getChannel(e):window.dashboardSB.GroupChannel.getChannel(e));o({channel:n,status:"success"})}catch(e){o({channel:void 0,status:"fail",error:e})}},[t,e,n]),updateSdkChannel:Object(a.useCallback)(e=>{o({channel:e,status:"success"})},[]),status:i,channel:s,error:r}},qK=n("VZc+"),GK=n("Q+E5");const WK=()=>{const e=Object(qK.a)(),{isBroadcastChannelEnabled:t,maxMemberCount:n}={isBroadcastChannelEnabled:Object(P.Y)(e=>{var t;const n=null==(t=e.applicationState.data)?void 0:t.attrs;if(!n)return!1;const{allow_super_group_channel:a,allow_broadcast_channel:i}=n.acl;return a&&i}),maxMemberCount:Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.attrs.item_limit.broadcast_member_cnt})},{isSupergroupEnabled:i,supergroupMemberLimit:s}=Object(GK.a)();return Object(a.useCallback)(a=>a.is_exclusive&&t&&"number"==typeof n?n:a.is_super&&i?s:e,[n,e,t,i,s])};var KK=n("bHSY");const YK=Object(o.cssVariables)("green-5");var QK=n("twaH");const JK=Object(r.default)(o.ContextualHelpContent.Header).withConfig({displayName:"GroupChannelTypeTooltipContent__MemberCountTooltipHeader",componentId:"sc-1se2cs6-0"})(["display:flex;flex-direction:row;align-items:center;margin-bottom:4px;> *{margin-right:4px;}"]),XK=Object(a.memo)(()=>{const e=Object(E.a)(),{tooltipDefinition:t}=Object(QK.a)();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(JK,{style:{color:YK},children:[Object(W.jsx)(o.Icon,{size:20,icon:"teams",color:YK}),e.formatMessage({id:"chat.channelList.list.column.memberCount.tooltip.supergroup.header"})]}),Object(W.jsx)(o.ContextualHelpContent.Body,{children:t}),Object(W.jsxs)(JK,{children:[Object(W.jsx)(o.Icon,{size:20,icon:"user",color:Object(o.cssVariables)("neutral-6")}),e.formatMessage({id:"chat.channelList.list.column.memberCount.tooltip.group.header"})]}),Object(W.jsx)(o.ContextualHelpContent.Body,{children:e.formatMessage({id:"chat.channelList.list.column.memberCount.tooltip.group.body"})})]})}),ZK={single_subchannel:2e3,multiple_subchannels:{max_subchannel_participants:2e3,max_channel_participants:2e4}},eY={single_subchannel:5e3,multiple_subchannels:{max_subchannel_participants:3e3,max_channel_participants:6e4}},tY=()=>{const e=(()=>{const e=Object(P.V)(e=>La()(e.organizations.current)?[]:e.organizations.current.regions);return Object(a.useCallback)(t=>{var n,a;return null!=(n=null==(a=e[t])?void 0:a.type)?n:"SHARED"},[e])})(),t=Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.region}),n=Object(P.V)(e=>{const t=e.applicationState.data;if(null==t)return null;const{use_dynamic_partitioning_by_default:n}=null==t?void 0:t.attrs.open_channel,{dashboard_options:a}=(null==t?void 0:t.attrs.feature_control_by_gate.open_channel)||{};return{use_dynamic_partitioning_by_default:n,dashboard_options:a}}),i=t?e(t):null;return Object(a.useMemo)(()=>{if(null==n||!n.dashboard_options)return[];const{custom:e}=n.dashboard_options,t=[{key:"single_subchannel",max_subchannel_participants:"DEDICATED"===i?eY.single_subchannel:ZK.single_subchannel,max_channel_participants:"DEDICATED"===i?eY.single_subchannel:ZK.single_subchannel},{key:"multiple_subchannels",max_subchannel_participants:"DEDICATED"===i?eY.multiple_subchannels.max_subchannel_participants:ZK.multiple_subchannels.max_subchannel_participants,max_channel_participants:"DEDICATED"===i?eY.multiple_subchannels.max_channel_participants:ZK.multiple_subchannels.max_channel_participants}];return e.max_subchannel_participants>0&&e.max_channel_participants>0&&t.push({key:"custom",...e}),t},[i,n])},nY=()=>{const e=Object(P.V)(e=>{const t=e.applicationState.data;if(null==t)return null;const{use_dynamic_partitioning_by_default:n,max_participants_per_subchannel:a,max_total_participants:i}=null==t?void 0:t.attrs.open_channel;return{use_dynamic_partitioning_by_default:n,max_participants_per_subchannel:a,max_total_participants:i}}),t=tY(),n=Object(a.useMemo)(()=>{if(null==e||0===t.length)return;const{max_participants_per_subchannel:n,max_total_participants:a}=e,i=t.find(e=>"custom"===e.key);if(i&&i.max_subchannel_participants>0&&i.max_channel_participants>0&&n===i.max_subchannel_participants&&a===i.max_channel_participants)return"custom";const s=t.find(e=>"single_subchannel"===e.key);if(s&&n===s.max_subchannel_participants&&a===s.max_subchannel_participants)return"single_subchannel";const r=t.find(e=>"multiple_subchannels"===e.key);return r&&n===r.max_subchannel_participants&&a===r.max_channel_participants?"multiple_subchannels":void 0},[t,e]);if(null==e)return{isLoading:!0};const{max_participants_per_subchannel:i,max_total_participants:s}=e;return{isLoading:!1,isUsingDynamicPartitioning:e.use_dynamic_partitioning_by_default,maxParticipantsPerSubchannel:i,maxTotalParticipants:s,maxSubchannels:s/i,option:n}},aY={single_subchannel:"chat.openChannels.list.dynamicPartitioningOption.singleSubchannel",multiple_subchannels:"chat.openChannels.list.dynamicPartitioningOption.multipleSubchannels",custom:"chat.openChannels.list.dynamicPartitioningOption.custom"},iY={single_subchannel:"chat.openChannels.list.dynamicPartitioningOption.tooltip.singleSubchannel.desc",multiple_subchannels:"chat.openChannels.list.dynamicPartitioningOption.tooltip.multipleSubchannels.desc",custom:"chat.openChannels.list.dynamicPartitioningOption.tooltip.custom.desc"},sY=r.default.div.withConfig({displayName:"DynamicPartitioningTooltipIcon__TooltipContent",componentId:"qiksm-0"})(["dl{margin-bottom:24px;}dt{",";","{display:inline-block;margin-left:8px;}}dd,p{",";}dt + dd{margin-top:4px;}dd + dt{margin-top:12px;}"],o.Headings["heading-01"],o.Lozenge,o.Body["body-short-01"]),rY=({className:e,placement:t,popperProps:n})=>{const i=Object(E.a)(),s=tY(),{option:l}=nY(),c=Object(P.c)(),d=Object(a.useMemo)(()=>Object(W.jsxs)(sY,{children:[Object(W.jsx)("dl",{children:s.map(({key:e})=>Object(W.jsxs)(a.Fragment,{children:[Object(W.jsxs)("dt",{children:[i.formatMessage({id:aY[e]}),e===l&&Object(W.jsx)(o.Lozenge,{color:"purple",children:i.formatMessage({id:"chat.openChannels.list.dynamicPartitioningOption.tooltip.lozenge.inUse"})})]}),Object(W.jsx)("dd",{children:i.formatMessage({id:iY[e]})})]},e))}),Object(W.jsx)("p",{children:i.formatMessage({id:"chat.openChannels.list.dynamicPartitioningOption.tooltip.support"},{a:e=>Object(W.jsx)(V.yb,{href:`/${c}/settings/channels`,permissions:["application.settings.view","application.settings.all"],variant:o.LinkVariant.Inline,useReactRouter:!0,alertType:"dialog",children:e})})})]}),[c,l,i,s]);return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:d,className:e,placement:t,popperProps:n,tooltipContentStyle:Object(r.css)(["width:360px;"]),children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})};var oY=n("jICX");const lY=e=>{const t=Object(P.c)();return Object(W.jsx)(V.yb,{...e,permissions:["application.settings.view","application.settings.all"],variant:o.LinkVariant.Inline,href:`/${t}/settings/features`,useReactRouter:!0})},cY=e=>Object(W.jsx)(V.yb,{...e,permissions:["organization.general.view","organization.general.all"],variant:o.LinkVariant.Inline,href:"/settings/general",useReactRouter:!0}),dY=e=>Object(W.jsx)(V.yb,{...e,permissions:oY.a,variant:o.LinkVariant.Inline,href:"/settings/contact_us?category=sales_inquiry",useReactRouter:!0});var uY=n("4YET"),pY=n("8hhJ");const gY=r.default.div.withConfig({displayName:"ModerationToolsChannelInfo__Container",componentId:"sc-9h4ygp-0"})([""]),hY=r.default.section.withConfig({displayName:"ModerationToolsChannelInfo__Section",componentId:"sc-9h4ygp-1"})(["padding-bottom:16px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),mY=r.default.h5.withConfig({displayName:"ModerationToolsChannelInfo__Title",componentId:"sc-9h4ygp-2"})(["display:flex;align-items:center;height:48px;padding-left:16px;padding-right:12px;",";color:",";* + *{margin-left:8px;}"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),fY=r.default.dl.withConfig({displayName:"ModerationToolsChannelInfo__InformationList",componentId:"sc-9h4ygp-3"})(["display:grid;grid-template-columns:76px 1fr;grid-gap:12px 8px;align-items:start;padding:0 16px;margin-top:8px;font-size:14px;line-height:20px;"]),bY=r.default.dt.withConfig({displayName:"ModerationToolsChannelInfo__InformationLabel",componentId:"sc-9h4ygp-4"})(["display:flex;flex-direction:row;flex-wrap:wrap;grid-column:1 / span 1;align-items:center;word-break:break-word;color:",";hyphens:auto;",";"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]);var jY=Object(r.default)(bY).withConfig({displayName:"ModerationToolsChannelInfo___StyledInformationLabel3",componentId:"sc-9h4ygp-5"})(["display:block;"]),yY=Object(r.default)(bY).withConfig({displayName:"ModerationToolsChannelInfo___StyledInformationLabel2",componentId:"sc-9h4ygp-6"})(["display:block;"]),OY=Object(r.default)(bY).withConfig({displayName:"ModerationToolsChannelInfo___StyledInformationLabel",componentId:"sc-9h4ygp-7"})(["align-self:baseline;"]);const vY=r.default.dd.withConfig({displayName:"ModerationToolsChannelInfo__InformationDetail",componentId:"sc-9h4ygp-8"})(["grid-column:2 / span 1;"]);var xY=Object(r.default)(vY).withConfig({displayName:"ModerationToolsChannelInfo___StyledInformationDetail2",componentId:"sc-9h4ygp-9"})(["align-items:start;"]),_Y=Object(r.default)(vY).withConfig({displayName:"ModerationToolsChannelInfo___StyledInformationDetail",componentId:"sc-9h4ygp-10"})(["align-self:baseline;"]);const CY=r.default.div.withConfig({displayName:"ModerationToolsChannelInfo__SupergroupChannelType",componentId:"sc-9h4ygp-11"})(["display:flex;align-items:center;",""],({hasError:e})=>e&&Object(r.css)(["color:",";font-weight:600;"],Object(o.cssVariables)("red-5"))),kY=Object(r.default)(vY).withConfig({displayName:"ModerationToolsChannelInfo__URLWrapper",componentId:"sc-9h4ygp-12"})(["display:flex;span{flex:1;word-break:break-all;margin-right:4px;}"]),wY=r.default.b.withConfig({displayName:"ModerationToolsChannelInfo__Bold",componentId:"sc-9h4ygp-13"})(["font-weight:600;"]);var TY=Object(r.default)("span").withConfig({displayName:"ModerationToolsChannelInfo___StyledSpan",componentId:"sc-9h4ygp-14"})(["cursor:pointer;outline:0;transition:box-shadow 0.3s ",";&:hover{text-decoration:underline;}&:active{color:",";}&:focus{box-shadow:"," 0 0 0 2px;}"],o.transitionDefault,e=>e._css,e=>e._css2);const SY=({children:e})=>{const t=Object(E.a)(),n=Object(P.k)();return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Dark,content:t.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.url.clickToCopy"}),placement:"top",children:Object(W.jsx)(TY,{role:"button",onClick:()=>n(e),onKeyPress:t=>{"Enter"===t.key&&n(e)},tabIndex:-1,_css:Object(o.cssVariables)("purple-7"),_css2:Object(o.cssVariables)("purple-7"),children:e})})};var EY=Object(r.default)(rY).withConfig({displayName:"ModerationToolsChannelInfo___StyledDynamicPartitioningTooltipIcon",componentId:"sc-9h4ygp-15"})(["display:inline-flex;height:20px;vertical-align:top;align-items:center;"]),IY=Object(r.default)(V.qb).withConfig({displayName:"ModerationToolsChannelInfo___StyledInfoTooltip",componentId:"sc-9h4ygp-16"})(["align-items:center;display:inline-flex;height:20px;vertical-align:top;"]);const MY=({channel:e,channelType:t})=>{const n=Object(E.a)(),{isPermitted:i}=Object(P.h)(),s=i(["application.channels.openChannel.all","application.channels.groupChannel.all"]),r=i(["application.channels.openChannel.all","application.channels.openChannel.chat","application.channels.groupChannel.all","application.channels.groupChannel.chat"]),{channelTypeName:l}=Object(QK.a)(),{isSupergroupEnabled:d,isSupergroupSupportedByPlan:u,isSubscriptionLoaded:p}=Object(GK.a)(),g=Object(pY.c)(),{isUsingDynamicPartitioning:h,option:m}=nY(),y=Object(P.k)(),{isUpdating:O,setChannelFreeze:v}=(()=>{const[e,t]=Object(a.useState)(!1),n=Object(P.c)();return{isUpdating:e,setChannelFreeze:Object(a.useCallback)(async({channelType:e,channelUrl:a,freeze:i})=>{t(!0);try{const{data:s}=await Object(js.freezeChannel)({appId:n,freeze:i,channelUrl:a,channelType:e});return t(!1),s}catch(e){throw t(!1),e}},[n])}})(),x=Object(b.f)(),_=Object(P.W)(),C=Object(P.W)({dialogTypes:A.a.ChannelMetadata,dialogProps:{channel:e,channelType:t}}),k=n=>{_({dialogTypes:A.a.EditChannel,dialogProps:{channel:e,channelType:t,autoFocusFieldName:n}})},w=Object(qK.a)(),T=p&&!d,S="group_channels"===t&&e.member_count<=w;return Object(W.jsxs)(gY,{children:[Object(W.jsxs)(hY,{children:[Object(W.jsxs)(mY,{children:[Object(W.jsx)("span",{children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.title"})}),s&&Object(W.jsx)(o.Link,{role:"button",onClick:()=>k(),"data-test-id":"EditChannelButton",children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.btn.edit"})})]}),Object(W.jsxs)(fY,{children:[Object(W.jsx)(bY,{children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.createdAt"})}),Object(W.jsx)(vY,{children:c()(1e3*e.created_at).format(f.y)}),"group_channels"===t&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(OY,{children:[n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.isSuper"}),Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:Object(W.jsx)(XK,{}),tooltipContentStyle:"max-width: 256px;",placement:"bottom-end",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),Object(W.jsx)(_Y,{children:e.is_super?Object(W.jsxs)(CY,{hasError:T,children:[l,T&&Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:u?n.formatMessage({id:S?"chat.channelDetail.sidebar.channelInformation.list.isSuper.supergroup.tooltip.featureOff.default":"chat.channelDetail.sidebar.channelInformation.list.isSuper.supergroup.tooltip.featureOff.limitExceeded"},{a:e=>Object(W.jsx)(lY,{alertType:"dialog",children:e}),b:e=>Object(W.jsx)(wY,{children:e}),featureName:g}):n.formatMessage({id:S?"chat.channelDetail.sidebar.channelInformation.list.isSuper.supergroup.tooltip.notSupportedByCurrentPlan.default":"chat.channelDetail.sidebar.channelInformation.list.isSuper.supergroup.tooltip.notSupportedByCurrentPlan.limitExceeded"},{a:e=>Object(W.jsx)(dY,{alertType:"dialog",children:e})}),tooltipContentStyle:"max-width: 256px; font-weight: 400;",placement:"bottom",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"warning-filled",color:"currentColor","data-test-id":"SupergroupFeatureOffTooltipTarget"})})]}):n.formatMessage({id:"chat.groupChannels.channelTypeBasedOnIsSuper.no"})})]}),"open_channels"===t&&h&&m&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(yY,{children:[n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.subchannels"}),Object(W.jsx)(EY,{})]}),Object(W.jsx)(vY,{children:(e=>"single_subchannel"===e?n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.subchannels.single"}):"multiple_subchannels"===e?n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.subchannels.multiple"}):"custom"===e?n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.subchannels.custom"}):f.Z)(m)})]}),Object(W.jsx)(bY,{children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.url"})}),Object(W.jsxs)(kY,{children:[Object(W.jsx)(SY,{children:e.channel_url}),Object(W.jsx)(o.IconButton,{icon:"copy",size:"xsmall",buttonType:"tertiary",title:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.url.clickToCopy"}),onClick:()=>{y(e.channel_url)}})]}),Object(W.jsx)(bY,{children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.customType"})}),Object(W.jsx)(vY,{children:e.custom_type?Object(W.jsx)(o.Tag,{maxWidth:187,children:e.custom_type}):f.Z}),s&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(bY,{children:[n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.data"}),Object(W.jsx)(KK.a,{})]}),Object(W.jsx)(vY,{children:Object(W.jsx)(o.Link,{role:"button",onClick:()=>k("data"),children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.metadata.btn.edit"})})}),Object(W.jsx)(bY,{children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.metadata"})}),Object(W.jsx)(vY,{children:Object(W.jsx)(o.Link,{role:"button",onClick:C,children:n.formatMessage({id:"chat.channelDetail.sidebar.channelInformation.list.metadata.btn.edit"})})})]})]})]}),Object(W.jsxs)(hY,{children:[Object(W.jsx)(mY,{children:n.formatMessage({id:"chat.channelDetail.sidebar.manage.title"})}),Object(W.jsxs)(fY,{children:[Object(W.jsxs)(jY,{id:"freeze-channel-label",children:[n.formatMessage({id:"chat.channelDetail.sidebar.manage.freezeChannel"}),Object(W.jsx)(IY,{content:n.formatMessage({id:"chat.channelDetail.sidebar.manage.freezeChannel.tooltipContent"})})]}),Object(W.jsx)(xY,{children:Object(W.jsx)(o.Toggle,{checked:e.freeze,disabled:!r||O,onChange:n=>{(async n=>{if(!O)try{const a=await v({channelUrl:e.channel_url,freeze:n,channelType:t});Object(b.c)(()=>{Object(uY.b)(a)?(x(j.a.setCurrentOpenChannel(a)),x(j.a.updateOpenChannelInList(a))):Object(uY.a)(a)&&(x(j.a.setCurrentGroupChannel(a)),x(j.a.updateGroupChannelInList(a)))})}catch(e){o.toast.error({message:Object(mi.b)(e)})}})(n)},"aria-labelledby":"freeze-channel-label"})})]})]})]})},DY=r.default.div.withConfig({displayName:"UserListHeader__MTInfoSectionHeader",componentId:"sc-1ar9usg-0"})(["display:flex;flex:none;align-items:center;border-bottom:1px solid ",";padding-right:16px;padding-left:8px;height:48px;"],Object(o.cssVariables)("neutral-3")),AY=r.default.div.withConfig({displayName:"UserListHeader__MTInfoSectionTitle",componentId:"sc-1ar9usg-1"})(["flex:1;",";color:",";margin-left:4px;"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),NY=({children:e,badge:t,onBackButtonClick:n})=>Object(W.jsxs)(DY,{children:[Object(W.jsx)(o.IconButton,{icon:"arrow-left",buttonType:"secondary",size:"small",onClick:n,"aria-label":"Back"}),Object(W.jsx)(AY,{children:e}),t]}),RY=r.default.div.withConfig({displayName:"UserListItem__MTUser",componentId:"ji7huk-0"})(["transition:background 0.2s ",";height:36px;",";&:hover{cursor:pointer;background:",";}"],o.transitionDefault,o.Headings["heading-01"],Object(o.cssVariables)("neutral-2")),PY=r.default.div.withConfig({displayName:"UserListItem__MTUserConnection",componentId:"ji7huk-1"})(["flex:none;width:8px;height:8px;border-radius:50%;margin-right:8px;position:relative;overflow:hidden;",""],e=>{switch(e.$type){case"prohibited":return Object(r.css)(["width:10px;height:10px;background:transparent;border:1px solid ",";&:before{position:absolute;top:0;left:50%;transform:translateX(-50%) rotate(45deg);transform-origin:center;background:",";width:1px;height:100%;content:'';}"],Object(o.cssVariables)("red-5"),Object(o.cssVariables)("red-5"));case"online":return Object(r.css)(["background:",";"],Object(o.cssVariables)("green-5"));default:return Object(r.css)(["background:",";"],Object(o.cssVariables)("neutral-5"))}}),LY=r.default.div.withConfig({displayName:"UserListItem__MTUserContainer",componentId:"ji7huk-2"})(["display:flex;align-items:center;width:100%;height:100%;padding:0 16px;"]),FY=r.default.div.withConfig({displayName:"UserListItem__MTUserNameText",componentId:"ji7huk-3"})(["flex-grow:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]);var UY=Object(r.default)(_s).withConfig({displayName:"UserListItem___StyledOperatorIcon",componentId:"ji7huk-4"})(["line-height:0;margin-left:4px;"]);const $Y=({className:e})=>Object(W.jsx)(UY,{className:e,size:16,color:Object(o.cssVariables)("purple-7")});var BY=Object(a.forwardRef)(({connectionIndicatorType:e,isOperator:t=!1,children:n,...a},i)=>Object(W.jsx)(RY,{ref:i,...a,children:Object(W.jsxs)(LY,{children:[Object(W.jsx)(PY,{$type:e}),Object(W.jsx)(FY,{children:n}),t&&Object(W.jsx)($Y,{})]})})),VY=n("RNah"),zY=n.n(VY);var HY=n("JhOC");function qY(e,t){Object(dm.a)(2,arguments);var n=Object(cm.a)(e),a=Object(cm.a)(t);return n.getFullYear()-a.getFullYear()}function GY(e,t){Object(dm.a)(2,arguments);var n=Object(cm.a)(e),a=Object(cm.a)(t),i=Object(HY.a)(n,a),s=Math.abs(qY(n,a));n.setFullYear("1584"),a.setFullYear("1584");var r=Object(HY.a)(n,a)===-i,o=i*(s-r);return 0===o?0:o}var WY=n("AkX2"),KY=n("JCDJ");function YY(e){Object(dm.a)(1,arguments);var t=Object(cm.a)(e);return t.setHours(0,0,0,0),t}function QY(e,t){Object(dm.a)(2,arguments);var n=YY(e),a=YY(t),i=n.getTime()-Object(KY.a)(n),s=a.getTime()-Object(KY.a)(a);return Math.round((i-s)/864e5)}function JY(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function XY(e,t){Object(dm.a)(2,arguments);var n=Object(cm.a)(e),a=Object(cm.a)(t),i=JY(n,a),s=Math.abs(QY(n,a));n.setDate(n.getDate()-i*s);var r=JY(n,a)===-i,o=i*(s-r);return 0===o?0:o}var ZY=n("Orh4");function eQ(e,t){Object(dm.a)(2,arguments);var n=Object(ZY.a)(e,t)/36e5;return n>0?Math.floor(n):Math.ceil(n)}function tQ(e,t){Object(dm.a)(2,arguments);var n=Object(ZY.a)(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}var nQ=n("qVkf"),aQ=n("Se/U"),iQ=n("Xep9"),sQ=n("/h9T"),rQ=n("dLU1");function oQ(e,t){Object(dm.a)(2,arguments);var n=Object(sQ.a)(t);return Object(rQ.a)(e,-n)}function lQ(e,t){if(Object(dm.a)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n="years"in t?Object(sQ.a)(t.years):0,a="months"in t?Object(sQ.a)(t.months):0,i="weeks"in t?Object(sQ.a)(t.weeks):0,s="days"in t?Object(sQ.a)(t.days):0,r="hours"in t?Object(sQ.a)(t.hours):0,o="minutes"in t?Object(sQ.a)(t.minutes):0,l="seconds"in t?Object(sQ.a)(t.seconds):0,c=oQ(Object(cm.a)(e),a+12*n),d=Object(iQ.a)(c,s+7*i),u=o+60*r,p=l+60*u,g=1e3*p,h=new Date(d.getTime()-g);return h}const cQ=[{amount:86400,unit:"day"},{amount:3600,unit:"hour"},{amount:60,unit:"minute"},{amount:1,unit:"second"}],dQ=e=>{let t=Math.round(e/1e3);const[n,a,i,s]=cQ.map(({amount:e})=>{const n=Math.floor(t/e);return t%=e,n}),r=[a,i,s].map(e=>String(e).padStart(2,"0")).join(":");return n>0?`${n}d ${r}`:r};var uQ=({endAt:e,onEnd:t,...n})=>{const[i,s]=Object(a.useState)(Math.max(0,e-Date.now())),r=function(e){if(Object(dm.a)(1,arguments),"object"!=typeof e)throw new Error("Duration must be an object");var t=e.years,n=void 0===t?0:t,a=e.months,i=void 0===a?0:a,s=e.days,r=void 0===s?0:s,o=e.hours,l=void 0===o?0:o,c=e.minutes,d=void 0===c?0:c,u=e.seconds,p=void 0===u?0:u;return"P".concat(n,"Y").concat(i,"M").concat(r,"DT").concat(l,"H").concat(d,"M").concat(p,"S")}(function(e){var t=e.start,n=e.end;Object(dm.a)(1,arguments);var a=Object(cm.a)(t),i=Object(cm.a)(n);if(!Object(aQ.a)(a))throw new RangeError("Start Date is invalid");if(!Object(aQ.a)(i))throw new RangeError("End Date is invalid");var s={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},r=Object(HY.a)(a,i);s.years=Math.abs(GY(a,i));var o=lQ(a,{years:r*s.years});s.months=Math.abs(Object(WY.a)(o,i));var l=lQ(o,{months:r*s.months});s.days=Math.abs(XY(l,i));var c=lQ(l,{days:r*s.days});s.hours=Math.abs(eQ(c,i));var d=lQ(c,{hours:r*s.hours});s.minutes=Math.abs(tQ(d,i));var u=lQ(d,{minutes:r*s.minutes});return s.seconds=Math.abs(Object(nQ.a)(u,i)),s}({start:0,end:i})),o=Object(E.a)(),l=Object(a.useRef)(-1),c=Object(P.L)(t);return Object(a.useEffect)(()=>{const t=window.setInterval(()=>{s(Math.max(0,e-Date.now()))},1e3);return l.current=t,()=>{clearInterval(t)}},[e]),Object(a.useEffect)(()=>{i<=0&&clearInterval(l.current)},[c,i]),Object(a.useEffect)(()=>{if(i<1e3){const e=setTimeout(()=>{null==c.current||c.current()},i);return()=>{clearTimeout(e)}}},[i,c]),Object(W.jsx)("time",{dateTime:r,...n,children:i>31536e6?o.formatMessage({id:"chat.channelDetail.sidebar.userList.overNYears"},{years:Math.floor(i/31536e6)}):dQ(i)})};const pQ=r.default.dd.withConfig({displayName:"ProhibitedUserProfilePopup__Duration",componentId:"sc-1d42728-0"})(["position:relative;display:flex;flex-direction:column;color:",";",";b{"," margin-bottom:2px;}"],Object(o.cssVariables)("neutral-10"),o.Body["body-short-01"],o.Headings["heading-01"]),gQ=r.default.dd.withConfig({displayName:"ProhibitedUserProfilePopup__Comments",componentId:"sc-1d42728-1"})(["white-space:pre-line;background:",";padding:12px 16px;border-radius:4px;color:",";",";",""],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"],e=>e.isEmpty&&Object(r.css)(["background:transparent;padding:0;"])),hQ=r.default.div.withConfig({displayName:"ProhibitedUserProfilePopup__RemainingDuration",componentId:"sc-1d42728-2"})(["display:flex;position:absolute;top:-18px;right:0;align-items:center;line-height:1;color:",";font-size:12px;font-weight:500;> * + *{margin-left:4px;}"],Object(o.cssVariables)("red-5")),mQ=r.default.div.withConfig({displayName:"ProhibitedUserProfilePopup__PopupBody",componentId:"sc-1d42728-3"})(["border-top:1px solid ",";padding:24px 16px;max-height:280px;overflow-y:auto;dt{",";margin-bottom:6px;color:",";}dd + dt{margin-top:24px;}"],Object(o.cssVariables)("neutral-3"),o.Typography["label-02"],Object(o.cssVariables)("neutral-6"));var fQ=Object(r.default)("b").withConfig({displayName:"ProhibitedUserProfilePopup___StyledB",componentId:"sc-1d42728-4"})(["",""],e=>e._css);var bQ=({type:e,user:t,startAt:n,endAt:i,description:s})=>{const{closeProfilePopup:r,notifyChange:l}=Object(a.useContext)(Cs),c=Object(P.w)(),d=Object(E.a)(),u=Object(P.c)(),{unbanUser:p,unmuteUser:g}=er(),{userId:h,nickname:m,profileUrl:f,role:b}=t,[{data:j,status:y},O]=Object(P.g)(async()=>{const{data:e}=await Object(g$.fetchUser)({appId:u,userId:h});return e},[u,h]);Object(a.useEffect)(()=>{O()},[O]);const v=tr(t),{actions:x,isActionsDisabled:_}=Object(a.useMemo)(()=>{const n={deactivate:v,..."ban"===e?{ban:{current:!0,handler:()=>{p(t,()=>{l("ban",{userId:t.userId,isBanned:!1}),r()})}}}:{mute:{current:!0,handler:()=>{g(t,()=>{l("mute",{userId:t.userId,isMuted:!1}),r()})}}}};return"success"===y&&j?j.is_active?{actions:n,isActionsDisabled:!1}:{actions:void 0,isActionsDisabled:!1}:{actions:n,isActionsDisabled:!0}},[r,j,v,l,y,e,p,g,t]);return Object(W.jsxs)(Ss,{"data-test-id":"ProhibitedUserProfilePopup",children:[Object(W.jsx)(Xs,{userId:h,nickname:m,profileUrl:f,userRole:b}),Object(W.jsx)(mQ,{children:Object(W.jsxs)("dl",{children:[Object(W.jsx)("dt",{children:d.formatMessage({id:"ban"===e?"chat.components.userProfilePopup.banTime":"chat.components.userProfilePopup.muteTime"})}),Object(W.jsxs)(pQ,{children:[Object(W.jsx)(fQ,{"data-test-id":"FormattedDuration",_css:-1===i?`color: ${Object(o.cssVariables)("red-5")}`:void 0,children:i>-1?zY()(n,i):d.formatMessage({id:"chat.components.userProfilePopup.permanent"})}),Object(W.jsx)("span",{"data-test-id":"DurationStart",children:d.formatMessage({id:"chat.components.userProfilePopup.duration.from"},{date:c(n,{dateStyle:"medium",timeStyle:"medium"})})}),i>-1&&Object(W.jsx)("span",{"data-test-id":"DurationEnd",children:d.formatMessage({id:"chat.components.userProfilePopup.duration.to"},{date:c(i,{dateStyle:"medium",timeStyle:"medium"})})}),i>-1&&Object(W.jsxs)(hQ,{"data-test-id":"RemainingDuration",children:[Object(W.jsx)(o.Icon,{icon:"mute"===e?"mute-filled":"ban-filled",size:12,color:"currentColor",assistiveText:d.formatMessage({id:"chat.components.userProfilePopup.remainingTime"})}),Object(W.jsx)(uQ,{endAt:i})]})]}),Object(W.jsx)("dt",{children:d.formatMessage({id:"chat.components.userProfilePopup.comments"})}),Object(W.jsx)(gQ,{isEmpty:!s,"data-test-id":"Comments",children:s||d.formatMessage({id:"chat.components.userProfilePopup.comments.placeholder"})})]})}),x&&Object(W.jsx)(Es,{children:Object(W.jsx)(zs,{actions:x,disabled:_})}),Object(W.jsx)(Ts,{onClick:r})]})};const jQ=r.default.button.withConfig({displayName:"ProhibitedUserListButton",componentId:"sc-14cippa-0"})(["display:flex;flex-direction:column;justify-content:flex-start;border:0;background:transparent;cursor:pointer;padding:8px 24px;width:100%;&:hover{background:",";}"],Object(o.cssVariables)("neutral-2")),yQ=r.default.div.withConfig({displayName:"ProhibitedUserListButton__Nickname",componentId:"sc-14cippa-1"})(["",";color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),OQ=r.default.div.withConfig({displayName:"ProhibitedUserListButton__DetailRow",componentId:"sc-14cippa-2"})(["display:flex;margin-top:4px;line-height:1;color:",";font-size:12px;font-weight:500;padding-bottom:4px;> * + *{margin-left:4px;}"],Object(o.cssVariables)("red-5"));var vQ=Object.assign(jQ,{Nickname:yQ,DetailRow:OQ,Icon:({icon:e})=>{const t=Object(E.a)();return Object(W.jsx)(o.Icon,{color:"currentColor",icon:e,size:12,assistiveText:t.formatMessage({id:"chat.channelDetail.sidebar.userList.remainingTime"})})},EndAtText:({endAt:e,onEnd:t})=>{const n=Object(E.a)();return Object(W.jsx)("span",{children:-1===e?n.formatMessage({id:"chat.channelDetail.sidebar.userList.permanent"}):Object(W.jsx)(uQ,{endAt:e,onEnd:t})})}});var xQ=({handleUserBanStateChange:e})=>({user:t,start_at:n,end_at:a,description:i})=>{const{user_id:s,nickname:r}=t;return Object(W.jsx)(ws,{tag:"li",popupId:`banned-${s}`,popup:Object(W.jsx)(bQ,{type:"ban",user:Object(H.camelCaseKeys)(t),startAt:n,endAt:a,description:i}),children:({togglePopup:t})=>Object(W.jsxs)(vQ,{type:"button",onClick:t,children:[Object(W.jsx)(vQ.Nickname,{children:r}),Object(W.jsxs)(vQ.DetailRow,{children:[Object(W.jsx)(vQ.Icon,{icon:"ban-filled"}),Object(W.jsx)(vQ.EndAtText,{endAt:a,onEnd:()=>{e(s,!1)}})]})]})},s)};var _Q=({handleUserMuteStateChange:e})=>t=>{const{user_id:n,nickname:a,end_at:i,description:s,remaining_duration:r}=t;return Object(W.jsx)(ws,{tag:"li",popupId:`muted-${n}-${i}`,popup:Object(W.jsx)(bQ,{type:"mute",user:Object(H.camelCaseKeys)(t),startAt:i-r,endAt:i,description:s}),children:({togglePopup:t})=>Object(W.jsxs)(vQ,{type:"button",onClick:t,children:[Object(W.jsx)(vQ.Nickname,{children:a}),Object(W.jsxs)(vQ.DetailRow,{children:[Object(W.jsx)(vQ.Icon,{icon:"mute-filled"}),Object(W.jsx)(vQ.EndAtText,{endAt:i,onEnd:()=>{e(n,!1)}})]})]})},`${n}-${i}`)},CQ=n("9GiO");const kQ=({type:e,items:t,children:n,hasMore:i,handleLoadMore:s,isLoadMoreFailed:r,isLoadingMore:l,hasError:c,handleReload:d})=>{const u=Object(E.a)(),{scrollBarRef:p,spinnerWrapperRef:g}=Object(P.A)({handleLoadMore:s,hasMore:i,isLoadMoreFailed:r}),h=Object(a.useMemo)(()=>Object(W.jsx)(CQ.b,{onRetry:s,isRetrying:l,retryButtonLabel:u.formatMessage({id:"chat.groupChannels.info.error.loadMore.btn.retry"}),children:u.formatMessage({id:"chat.groupChannels.info.error.loadMore.title"})}),[s,u,l]),m=Object(a.useMemo)(()=>{const t=u.formatMessage({id:{members:"chat.groupChannels.info.members.error.failedToLoad.title",banned:"chat.groupChannels.info.banned.error.failedToLoad.title",muted:"chat.groupChannels.info.muted.error.failedToLoad.title"}[e]}),n=u.formatMessage({id:{members:"chat.groupChannels.info.members.error.failedToLoad.body",banned:"chat.groupChannels.info.banned.error.failedToLoad.body",muted:"chat.groupChannels.info.muted.error.failedToLoad.body"}[e]}),a={members:"user",banned:"ban",muted:"mute"}[e];return Object(W.jsx)(CQ.a,{icon:a,title:t,description:n,onRetry:d,retryButtonLabel:u.formatMessage({id:"chat.groupChannels.info.error.failedToLoad.btn.retry"})})},[d,u,e]);return Object(W.jsxs)(o.ScrollBar,{ref:e=>{var t;p(null!=(t=null==e?void 0:e.node)?t:null)},children:[Object(W.jsxs)(vK,{children:[t.map(n),i&&(r?h:Object(W.jsx)(CQ.c,{ref:g}))]}),c&&m]})},wQ=Object(r.default)(_K).withConfig({displayName:"GroupChannelInfo__Members",componentId:"fpb4f4-0"})(["display:flex;flex-direction:column;"]),TQ=i.a.memo(({channel:e,bannedUsers:t,mutedMembers:n,members:i})=>{const{state:s,loadMore:r,reload:l,countBadge:c,handleUserBanStateChange:d}=t,{state:u,loadMore:p,reload:g,countBadge:h,handleUserMuteStateChange:m}=n,{state:f,loadMore:b,reload:j}=i,[y,O]=Object(a.useState)("none"),v=Object(E.a)(),{closeProfilePopup:x}=Object(a.useContext)(Cs),_=Object(a.useCallback)(e=>()=>{switch(O(e),x(),e){case"members":j();break;case"banned":l();break;case"muted":g()}},[x,l,j,g]),C=WK()(e),k=Object(P.Y)(e=>e.groupChannels.isFetchingChannel),w=Object(a.useMemo)(()=>{const t=t=>Object(W.jsx)(LK,{count:e.member_count,max:C,isLoading:k,error:t});return e.member_count<C?t(void 0):e.member_count===C?t({icon:"warning",message:v.formatMessage({id:"chat.groupChannels.info.members.error.full"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"/settings/contact_us?category=sales_inquiry",useReactRouter:!0,children:e})})}):t(!0)},[e.member_count,v,k,C]);return Object(W.jsxs)(xK,{children:[Object(W.jsx)(SK,{children:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(MY,{channelType:"group_channels",channel:e}),Object(W.jsx)(TK,{label:v.formatMessage({id:"chat.groupChannels.info.members.title"}),badge:w,onClick:_("members")}),Object(W.jsx)(TK,{label:v.formatMessage({id:"chat.groupChannels.info.banned.title"}),badge:c,onClick:_("banned")}),Object(W.jsx)(TK,{label:v.formatMessage({id:"chat.groupChannels.info.muted.title"}),badge:h,onClick:_("muted")})]})}),Object(W.jsxs)(wQ,{$isActive:"members"===y,"data-test-id":"MemberList",children:[Object(W.jsx)(NY,{badge:w,onBackButtonClick:_("none"),children:v.formatMessage({id:"chat.groupChannels.info.members.title"})}),Object(W.jsx)(kQ,{items:f.users,type:"members",handleLoadMore:b,handleReload:j,hasError:f.hasError,hasMore:!!f.next,isLoadingMore:f.isLoadingMore,isLoadMoreFailed:f.isLoadMoreFailed,children:e=>Object(W.jsx)(ws,{tag:"li",popupId:`members-${e.user_id}`,popup:Object(W.jsx)(ir,{user:Object(H.camelCaseKeys)(e)}),children:({togglePopup:t})=>Object(W.jsx)(BY,{onClick:t,connectionIndicatorType:e.is_online?"online":"offline",isOperator:"operator"===e.role,children:e.nickname})},e.user_id)})]}),Object(W.jsxs)(wQ,{$isActive:"banned"===y,children:[Object(W.jsx)(NY,{badge:c,onBackButtonClick:_("none"),children:v.formatMessage({id:"chat.groupChannels.info.banned.title"})}),Object(W.jsx)(kQ,{items:s.items,type:"banned",handleLoadMore:r,handleReload:l,hasError:s.hasError,hasMore:!!s.next,isLoadingMore:s.isLoadingMore,isLoadMoreFailed:s.isLoadMoreFailed,children:xQ({handleUserBanStateChange:d})})]}),Object(W.jsxs)(wQ,{$isActive:"muted"===y,children:[Object(W.jsx)(NY,{badge:h,onBackButtonClick:_("none"),children:v.formatMessage({id:"chat.groupChannels.info.muted.title"})}),Object(W.jsx)(kQ,{items:u.users,type:"muted",handleLoadMore:p,handleReload:g,hasError:u.hasError,hasMore:!!u.next,isLoadingMore:u.isLoadingMore,isLoadMoreFailed:u.isLoadMoreFailed,children:_Q({handleUserMuteStateChange:m})})]})]})}),SQ=r.default.div.withConfig({displayName:"ModeratorActionButton__ModeratorNickname",componentId:"sc-120qfza-0"})(["flex:1;",";color:",";overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap;margin-left:8px;"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-10"));var EQ=Object(r.default)(SQ).withConfig({displayName:"ModeratorActionButton___StyledModeratorNickname",componentId:"sc-120qfza-1"})(["color:",";"],e=>e._css),IQ=Object(r.default)(o.Icon).withConfig({displayName:"ModeratorActionButton___StyledIcon",componentId:"sc-120qfza-2"})(["margin-left:4px;"]),MQ=Object(r.default)(o.Button).withConfig({displayName:"ModeratorActionButton___StyledButton",componentId:"sc-120qfza-3"})(["display:flex;flex-direction:row;align-items:center;width:184px;padding-left:8px;padding-right:4px;"]);const DQ=Object(a.forwardRef)(({className:e},t)=>{const n=Object(E.a)(),{sdkUser:a,isFetched:i}=Object(P.l)(),s=Object(P.W)(),r=Object(W.jsx)(IQ,{icon:"input-arrow-down",size:20,color:Object(o.cssVariables)("neutral-9")});return i?Object(W.jsx)(MQ,{className:e,onClick:()=>{s(a?{dialogTypes:A.a.UpdateSDKUser,dialogProps:{sdkUser:a}}:{dialogTypes:A.a.CreateSDKUser,dialogProps:{}})},buttonType:"primary",variant:"ghost",size:"small",ref:t,children:a?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(V.Zb,{userID:a.user_id,size:20,imageUrl:a.profile_url}),Object(W.jsx)(SQ,{children:a.nickname}),r]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.Icon,{icon:"avatar-dotted",size:20,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsx)(EQ,{_css:Object(o.cssVariables)("neutral-6"),children:n.formatMessage({id:"chat.moderationTool.btn.createModerator"})}),r]})}):null});var AQ=n("xK4F");const NQ="sendbirdPreservedModerationMessage";var RQ={clientStorageKey:NQ,get:()=>AQ.a.get(NQ)||"",set:e=>AQ.a.set(NQ,e),clear:()=>AQ.a.remove(NQ)};const{INPUT_MAX_HEIGHT:PQ}=qi,LQ=r.default.label.withConfig({displayName:"ChatInput__FileInput",componentId:"sc-150l179-0"})(["position:absolute;top:56px;right:16px;cursor:pointer;margin-bottom:0;input[type='file']{display:none;}"]),FQ=r.default.div.withConfig({displayName:"ChatInput__ChatInputExplanation",componentId:"sc-150l179-1"})(["position:absolute;top:3px;right:16px;"]),UQ=r.default.div.withConfig({displayName:"ChatInput__ChatInputSelectorItem",componentId:"sc-150l179-2"})(["cursor:pointer;display:flex;flex:none;align-items:center;justify-content:center;color:",";font-size:14px;font-weight:600;line-height:1.43;text-align:center;transition:all 0.2s ",";height:40px;margin-right:24px;border-bottom:2px solid transparent;&:hover{color:",";}",";"],Object(o.cssVariables)("neutral-7"),o.transitionDefault,Object(o.cssVariables)("purple-7"),e=>{if(e.isActive)return Object(r.css)(["color:",";border-bottom:2px solid ",";"],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7"))}),$Q=r.default.div.withConfig({displayName:"ChatInput__ChatInputSelectors",componentId:"sc-150l179-3"})(["position:relative;display:flex;height:40px;padding-left:16px;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-2")),BQ=r.default.div.withConfig({displayName:"ChatInput__ChatInputSDKUser",componentId:"sc-150l179-4"})(["position:absolute;top:0;right:64px;cursor:pointer;"]);var VQ=Object(r.default)(BQ).withConfig({displayName:"ChatInput___StyledChatInputSDKUser",componentId:"sc-150l179-5"})(["right:56px;top:3px;"]);const zQ=r.default.div.withConfig({displayName:"ChatInput__CEWrapper",componentId:"sc-150l179-6"})(["overflow:auto;max-height:","px;"],PQ),HQ=r.default.div.withConfig({displayName:"ChatInput__DisabledCover",componentId:"sc-150l179-7"})(["display:",";position:absolute;top:0;right:0;left:0;bottom:0;background:",";opacity:0.4;border-radius:4px;z-index:1;"],e=>e.isDisabled?"block":"none",Object(o.cssVariables)("neutral-1")),qQ=r.default.div.withConfig({displayName:"ChatInput__ChatInputSendPush",componentId:"sc-150l179-8"})(["display:flex;align-items:center;margin-right:56px;margin-left:auto;overflow:hidden;> label{color:",";font-weight:500;font-size:14px;line-height:20px;margin-left:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"],Object(o.cssVariables)("neutral-10"));var GQ=Object(r.default)("div").withConfig({displayName:"ChatInput___StyledDiv",componentId:"sc-150l179-9"})(["display:inline-flex;flex-direction:row;align-items:center;background:",";padding:6px 12px;border-radius:14px;color:",";"],e=>e._css,e=>e._css2),WQ=Object(r.default)(o.Icon).withConfig({displayName:"ChatInput___StyledIcon",componentId:"sc-150l179-10"})(["flex:none;"]),KQ=Object(r.default)("div").withConfig({displayName:"ChatInput___StyledDiv2",componentId:"sc-150l179-11"})(["margin-left:8px;",""],e=>e._css3);const YQ=Object(r.default)(({children:e,className:t})=>Object(W.jsxs)(GQ,{role:"status",className:t,_css:Object(o.cssVariables)("neutral-2"),_css2:Object(o.cssVariables)("neutral-7"),children:[Object(W.jsx)(WQ,{icon:"info-filled",color:Object(o.cssVariables)("neutral-6"),size:16}),Object(W.jsx)(KQ,{_css3:o.Typography["label-02"],children:e})]})).withConfig({displayName:"ChatInput__StyledRoundInlineNotification",componentId:"sc-150l179-12"})([""]);var QQ=Object(r.default)(YQ).withConfig({displayName:"ChatInput___StyledStyledRoundInlineNotification",componentId:"sc-150l179-13"})(["margin-left:16px;margin-right:16px;margin-bottom:8px;align-self:flex-start;"]);const JQ=r.default.div.withConfig({displayName:"ChatInput__StyledChatInput",componentId:"sc-150l179-14"})(["position:relative;border-radius:4px;overflow:hidden;background:",";box-shadow:0 1px 5px 0 rgba(33,34,66,0.12),0 0 1px 0 rgba(33,34,66,0.08),0 2px 1px 0 rgba(33,34,66,0.08);transition:background 0.2s ",";input[type='checkbox']:not(:checked){background-color:transparent;}","{background:",";transition:background 0.2s ",";}"],({$isSendingAdminMessage:e})=>e?Object(o.cssVariables)("yellow-2"):"white",o.transitionDefault,YQ,({$isSendingAdminMessage:e})=>e?Object(o.cssVariables)("yellow-4"):Object(o.cssVariables)("neutral-2"),o.transitionDefault);var XQ=Object(r.default)(DQ).withConfig({displayName:"ChatInput___StyledModeratorActionButton",componentId:"sc-150l179-15"})(["@media (max-width:1180px){display:none;}"]);const ZQ=({channelType:e,inputOption:t,setInputOption:n,handleSendPushChange:i,isUserMessageDisabled:s})=>{const r=!s,l=Object(a.useMemo)(()=>{const n=Object(W.jsxs)(qQ,{children:[Object(W.jsx)(o.Checkbox,{onChange:i,id:"moderation-tool-send-push"}),Object(W.jsx)("label",{htmlFor:"moderation-tool-send-push",children:"Send push notification"})]});return"user"===t?Object(W.jsx)(VQ,{children:Object(W.jsx)(XQ,{})}):"group_channels"===e?n:null},[e,i,t]);return Object(W.jsxs)($Q,{role:"tablist",children:[r&&Object(W.jsx)(UQ,{role:"tab",isActive:"user"===t,onClick:()=>n("user"),children:"User message"}),Object(W.jsx)(UQ,{role:"tab",isActive:"admin"===t,onClick:()=>n("admin"),children:"Admin message"}),l,Object(W.jsx)(FQ,{children:Object(W.jsx)(o.ContextualHelp,{tooltipContentStyle:"max-width: 360px;",content:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.ContextualHelpContent.Header,{children:"User message"}),Object(W.jsx)(o.ContextualHelpContent.Body,{children:"is a message sent to this channel on behalf of Dashboard Administrator."}),Object(W.jsx)(o.ContextualHelpContent.Header,{children:"Admin message"}),Object(W.jsx)(o.ContextualHelpContent.Body,{children:"is a message sent to this channel without a sender."})]}),trigger:o.TooltipTrigger.Click,children:Object(W.jsx)(o.IconButton,{icon:"info",size:"small",buttonType:"tertiary","data-test-id":"InfoButton"})})})]})},eJ=Object(a.memo)(({isUserMessageDisabled:e,isDisabled:t,channelType:n,onResizeTextInput:i,onSubmit:s,sendFileMessage:l,className:c})=>{const d=Object(E.a)(),u=Object(a.useRef)(null),p=Object(a.useRef)(null),[g,h]=Object(a.useState)("user"),[m,f]=Object(a.useState)(""),[b,j]=Object(a.useState)(!1),{isUsingDynamicPartitioning:y,maxSubchannels:O=0}=nY();Object(a.useEffect)(()=>{e&&h("admin")},[e]),Object(a.useEffect)(()=>{const e=RQ.get();var t;e&&(null==(t=u.current)||t.setText(e))},[]),Object(a.useEffect)(()=>{var e,n;t?null==(e=u.current)||e.blur():null==(n=u.current)||n.focus()},[t]);const v=Object(a.useCallback)(()=>{j(e=>!e)},[]);return Object(W.jsxs)(JQ,{className:c,"data-test-id":"ChatInput",$isSendingAdminMessage:"admin"===g,children:[Object(W.jsx)(V.wc,{when:""!==m.trim()}),Object(W.jsx)(HQ,{isDisabled:t}),Object(W.jsx)(ZQ,{isUserMessageDisabled:e,channelType:n,setInputOption:h,inputOption:g,handleSendPushChange:v}),Object(W.jsxs)(zQ,{children:[Object(W.jsx)(V.B,{ref:u,placeholder:"user"===g?C.cb:C.T,onResize:i,onSubmit:()=>{const e=u.current?u.current.getText():"";s({message:e,inputOption:g,sendPush:b})},onKeyUp:()=>{const e=u.current?u.current.getText():"";f(e)},styles:Object(r.css)([""," background:transparent;padding:16px;min-height:64px;font-size:",";"],"user"===g&&Object(r.css)(["margin-right:48px;"]),rr.fontSize),"aria-disabled":t}),"open_channels"===n&&y&&O>1&&Object(W.jsx)(QQ,{children:d.formatMessage({id:"chat.moderationTool.chatInput.operatorMessageSubchannelWarning"})}),"admin"!==g&&l?Object(W.jsxs)(LQ,{children:[Object(W.jsx)(o.IconButton,{icon:"attach",size:"small",buttonType:"tertiary",title:"Send file message",onClick:e=>{e.stopPropagation(),p.current&&p.current.click()}}),Object(W.jsx)("input",{ref:p,type:"file",onChange:l,"data-test-id":"FileInput"})]}):""]})]})}),tJ=r.default.button.withConfig({displayName:"ScrollToBottomButton__Button",componentId:"h0mqhk-0"})(["position:absolute;right:0;bottom:0;transition:0.2s;z-index:300;outline:0;border:1px solid ",";border-radius:50%;background-color:white;cursor:pointer;width:100%;height:100%;line-height:0;"," &:hover{background-color:",";}&:active{background-color:",";}&:not(:active):focus{box-shadow:0 0 0 2px ",";}"],Object(o.cssVariables)("neutral-3"),o.shadow[2],Object(o.cssVariables)("neutral-1"),Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("purple-7"));var nJ=Object(r.default)(o.Tooltip).withConfig({displayName:"ScrollToBottomButton___StyledTooltip",componentId:"h0mqhk-1"})(["position:absolute;right:16px;bottom:8px;width:40px;height:40px;"]);var aJ=({className:e,...t})=>{const n=Object(E.a)();return Object(W.jsx)(nJ,{content:n.formatMessage({id:"chat.channelDetail.btn.goToBottom"}),variant:o.TooltipVariant.Dark,placement:"top",className:e,children:Object(W.jsx)(tJ,{...t,children:Object(W.jsx)(o.Icon,{icon:"chevron-down",size:24,color:Object(o.cssVariables)("neutral-6")})})})};const iJ=r.default.div.withConfig({displayName:"ChannelFrozenStatusBar__Container",componentId:"r3gkrp-0"})(["user-select:none;display:flex;position:absolute;top:8px;right:8px;left:8px;align-items:center;justify-content:center;z-index:",";border-radius:4px;background-color:",";height:40px;text-align:center;color:white;pointer-events:none;",";"],o.ZIndexes.dropdownMenu-1,Object(sr.rgba)(Object(o.cssColors)("neutral-10"),.7),o.Subtitles["subtitle-01"]),sJ=()=>{const e=Object(E.a)();return Object(W.jsx)(iJ,{role:"status",children:e.formatMessage({id:"chat.channelDetail.message.channelFrozen"})})};var rJ=Object(a.createContext)(void 0);const oJ=[Tr.edit,Tr.delete,Tr.copyUrl];var lJ=()=>{const e=Object(P.Y)(e=>e.settings.isModeratorInfoInAdminMessage);return Object(a.useCallback)(({type:t,data:n})=>t===H.MessageType.admin&&e&&n?[Tr.showDataInformation,...oJ]:oJ,[e])};var cJ=()=>{const e=Object(P.Y)(e=>e.groupChannels.scrollLock),t=Object(b.f)();return[e,Object(a.useCallback)(e=>{t(j.a.toggleGroupChannelScrollLock(e))},[t])]};const dJ=e=>e.isGroupChannel();var uJ=({onSendSuccess:e}={})=>{const t=Object(P.c)(),n=Object(P.L)(e),i=Object(a.useCallback)((e,t)=>{o.toast.error({message:Object(mi.b)(e)}),t&&RQ.set(t)},[]),s=Object(a.useCallback)(()=>{RQ.clear(),null==n.current||n.current()},[n]),r=Object(a.useCallback)(({message:e,channel:t,onSuccess:n})=>{0===e.trim().length||dJ(t)&&"joined"!==t.myMemberState||t.sendUserMessage(e.trim(),(t,a)=>{a?i(a,e):(s(),null==n||n(t))})},[i,s]),l=Object(a.useCallback)(async({message:e,channelUrl:n,channelType:a,sendPush:r,onSuccess:l})=>{const c=e.trim();if(c)if(c.length>1e3)o.toast.warning({message:C.a});else try{await Object(js.sendAdminMessage)({appId:t,channelUrls:[n],channelType:a,message:c,sendPush:r}),s(),null==l||l()}catch(t){i(t,e)}},[t,i,s]),c=Object(a.useCallback)(({file:e,channel:t,onSuccess:n})=>{dJ(t)&&"joined"!==t.myMemberState||t.sendFileMessage(e,(e,t)=>{t?i(t):(s(),null==n||n(e))})},[i,s]);return Object(a.useMemo)(()=>({sendUserMessage:r,sendAdminMessage:l,sendFileMessage:c}),[l,c,r])};const pJ=r.default.div.withConfig({displayName:"GroupChannelMessages__ScrollElementWrapper",componentId:"nox62m-0"})(["position:relative;flex:1;min-height:0;"]),gJ=r.default.div.withConfig({displayName:"GroupChannelMessages__ScrollElement",componentId:"nox62m-1"})(["height:100%;overflow-y:auto;"]),hJ=r.default.div.withConfig({displayName:"GroupChannelMessages__ScrollElementStart",componentId:"nox62m-2"})([""]),mJ=r.default.div.withConfig({displayName:"GroupChannelMessages__ScrollElementEnd",componentId:"nox62m-3"})(["position:relative;margin-bottom:16px;> div{position:absolute;bottom:0;width:100%;z-index:-1;height:100px;}"]),fJ=Object(r.default)(eJ).withConfig({displayName:"GroupChannelMessages__StyledChatInput",componentId:"nox62m-4"})(["margin:16px;margin-top:0;flex:none;"]);var bJ=Object(r.default)("div").withConfig({displayName:"GroupChannelMessages___StyledDiv",componentId:"nox62m-5"})(["text-align:center;background:linear-gradient("," 1px,transparent 0);background-size:100% 50%;background-position:0 100%;background-repeat:repeat-x;margin:16px;"],e=>e._css),jJ=Object(r.default)("span").withConfig({displayName:"GroupChannelMessages___StyledSpan",componentId:"nox62m-6"})(["background:white;padding:4px 8px;line-height:16px;white-space:nowrap;color:",";font-size:12px;font-weight:600;"],e=>e._css2);const yJ=Object(a.forwardRef)(({children:e},t)=>Object(W.jsx)(bJ,{ref:t,_css:Object(o.cssVariables)("neutral-3"),children:Object(W.jsx)(jJ,{_css2:Object(o.cssVariables)("neutral-6"),children:e})}));var OJ=Object(a.forwardRef)(({channel:e,messageId:t,isLoadingSdkChannel:n,sdkChannel:i,onMessageDeleteSuccess:s,onMessageEditSuccess:r,didScrollToBottomToRecentMessage:o},l)=>{var d,u;const{channel_url:p}=e,g=Object(P.Y)(e=>e.sendbird.isConnected),h=Object(b.f)(),{isPermitted:m}=Object(P.h)(),[f,y]=cJ(),O=lJ(),v=Object(a.useRef)(null),x=Object(a.useRef)(null),_=Object(a.useRef)(null),C=Object(a.useRef)(),{scrollToBottom:k,scrollToBottomWithSetTimeout:w}=(e=>{const t=Object(a.useRef)(-1),n=Object(a.useCallback)(()=>{e.current&&e.current.scrollTo(0,e.current.scrollHeight)},[e]),i=Object(a.useCallback)(()=>{let a=0;const i=()=>{if(null==e.current)return;const{scrollTop:t,scrollHeight:s,clientHeight:r}=e.current;t+r<s&&n(),a<10&&(a+=1,window.setTimeout(i,100))};t.current=window.setTimeout(i,100)},[n,e]);return Object(a.useEffect)(()=>{}),{scrollToBottom:n,scrollToBottomWithSetTimeout:i}})(v),{state:{messages:T,status:S,requestParams:E,previousMessagesRequest:I,nextMessagesRequest:M,nextMessagesRequestParams:D,hasNextMessages:N},actions:{fetchLatestMessages:R,fetchNextMessages:L,fetchPreviousMessages:F}}=Object(a.useContext)(rJ);Object(a.useEffect)(()=>{h(j.c.fetchModeratorInfoADMMRequest())},[h]);const U=e=>{if(!e||!v.current)return;const{offsetTop:t,offsetHeight:n}=e,a=t-v.current.clientHeight/2+n/2;v.current.scrollTo(0,a)},$=m(["application.channels.groupChannel.all","application.channels.groupChannel.chat"]),B=!$||!n;Object(a.useEffect)(()=>{B&&"success"===S&&v.current&&(null!=E&&E.timestamp?U(_.current):null!=E&&E.messageId?U(x.current):v.current&&w())},[B,null==E?void 0:E.messageId,null==E?void 0:E.timestamp,S,w,y]),Object(a.useEffect)(()=>{"success"===I.status&&C.current&&(C.current(),C.current=void 0)},[I.status]);const z=null!=(d=Object(P.R)(T.length))?d:0,q=T.length>z,G=!f&&null!=(u=null==D?void 0:D.isAutoScrolling)&&u;Object(a.useEffect)(()=>{q&&G&&k()},[q,M.status,k,G]);const{editMessage:K,deleteMessage:Y,showDataInformation:Q,copyUrl:J}=(({channelUrl:e,onMessageEditSuccess:t,onMessageDeleteSuccess:n})=>{const i=Object(P.c)(),s=Object(P.W)(),r=Object(P.k)();return{editMessage:Object(a.useCallback)((n,a)=>{s({dialogTypes:A.a.EditMessage,dialogProps:{message:n,messageType:a,channelType:"group_channels",channelURL:e,onGroupChannelMessageEditSuccess:t}})},[e,t,s]),deleteMessage:Object(a.useCallback)(t=>{s({dialogTypes:A.a.DeleteMessage,dialogProps:{multiple:!1,messageId:String(t),channelType:"group_channels",channelURL:e,onDeleteMessage:()=>{null==n||n(t)}}})},[e,n,s]),showDataInformation:Object(a.useCallback)(e=>{s({dialogTypes:A.a.ModeratorInformation,dialogProps:{data:e}})},[s]),copyUrl:Object(a.useCallback)(t=>{r(`${window.location.origin}/${i}/group_channels/${e}/${t}`)},[i,e,r])}})({channelUrl:p,onMessageDeleteSuccess:s,onMessageEditSuccess:r}),{sentMessages:X,actions:{sendUserMessage:Z,sendAdminMessage:ee,sendFileMessage:te}}=(({messages:e,onSendSuccess:t})=>{const[n,i]=Object(a.useState)([]),s=uJ({onSendSuccess:t}),r=Object(a.useCallback)(({message:e,channel:t,onSuccess:n})=>{s.sendUserMessage({message:e,channel:t,onSuccess:e=>{null==n||n(e),i(t=>[...t,Ur(e)])}})},[s]),o=Object(a.useCallback)(async({message:e,channelUrl:t,sendPush:n,onSuccess:a})=>{s.sendAdminMessage({message:e,channelUrl:t,channelType:"group_channels",sendPush:n,onSuccess:a})},[s]),l=Object(a.useCallback)(({file:e,channel:t,onSuccess:n})=>{s.sendFileMessage({file:e,channel:t,onSuccess:e=>{null==n||n(e),i(t=>[...t,Ur(e)])}})},[s]);return{sentMessages:Object(a.useMemo)(()=>{const t=[...n];for(let n=e.length-1;n>=0;n-=1){const a=e[n],i=t.findIndex(e=>e.messageId===a.messageId);if(i>-1&&t.splice(i,1),0===t.length)break}return t.length<n.length?t:n},[e,n]),actions:{sendUserMessage:r,sendAdminMessage:o,sendFileMessage:l}}})({messages:T,onSendSuccess:()=>{L({isAutoScrolling:!0}),y(!1)}}),ne=Object(a.useMemo)(()=>{const e=null==E?void 0:E.timestamp;let n;const a=[];return[...T,...X].filter(e=>!Object(H.isEmpty)(e)).forEach((i,s)=>{var r,o;const{createdAt:l,messageId:d}=i,u=!n||Object(H.shouldRenderDateLine)({previousDate:n.createdAt,nextDate:l})?{timestamp:YY(l),element:Object(W.jsx)(Vr,{timestamp:l},`dateline_${s}`)}:null,p="number"==typeof e&&(null!=(r=null==(o=n)?void 0:o.created_at)?r:0)<e&&e<=l?{timestamp:e,element:Object(W.jsx)(yJ,{ref:_,children:c()(e).format("lll")},`previousChatTimeLine_${s}`)}:null;a.push(...[u,p].filter(e=>!!e).sort((e,t)=>e.timestamp-t.timestamp).map(e=>e.element)),a.push(Object(W.jsx)(Ar,{isEditable:m(["application.channels.groupChannel.all"]),message:i,isFocused:t===d,deleteMessage:Y,editMessage:K,copyUrl:J,showDataInformation:Q,onRefAttached:e=>{t===d&&(x.current=e)},messageMenus:O(i)},`group_channel_message_${d}`)),n=i}),a},[null==E?void 0:E.timestamp,T,X,m,t,Y,K,J,Q,O]),ae=Object(a.useRef)({}),ie=Object(a.useRef)({});return B?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(pJ,{children:[e.freeze&&Object(W.jsx)(sJ,{}),Object(W.jsxs)(gJ,{ref:e=>{"function"==typeof l?l(e):l&&(l.current=e),e!==v.current&&(v.current=e,(e=>{var t,n,a;if(!e)return;const i=new IntersectionObserver(([e])=>{0===ie.current.scrollLocker&&e.intersectionRatio>0&&e.intersectionRatio<1&&L({isAutoScrolling:!N}),1===ie.current.scrollLocker&&0===e.intersectionRatio&&y(!0),ie.current.scrollLocker=e.intersectionRatio},{root:e,threshold:0}),s=new IntersectionObserver(([e])=>{e.isIntersecting&&y(!1)},{root:e,threshold:1}),r=new IntersectionObserver(([t])=>{if(0===ie.current.previousMessageFetcher&&1===t.intersectionRatio){const n=e.scrollHeight;C.current=()=>{e.scrollTo({top:e.scrollHeight-n})};const{firstMessageId:a}=t.target.dataset;a&&F(Number(a))}ie.current.previousMessageFetcher=t.intersectionRatio},{root:e,rootMargin:"100px",threshold:[0,1]});null==(t=ae.current.scrollLocker)||t.disconnect(),null==(n=ae.current.scrollUnlocker)||n.disconnect(),null==(a=ae.current.previousMessageFetcher)||a.disconnect(),ae.current.scrollElementStart&&r.observe(ae.current.scrollElementStart),ae.current.scrollElementEnd&&(i.observe(ae.current.scrollElementEnd),s.observe(ae.current.scrollElementEnd)),ae.current={...ae.current,scrollLocker:i,scrollUnlocker:s,previousMessageFetcher:r}})(e))},"data-test-id":"GroupChannelMessagesScrollElement",children:[T.length>0&&"loading"!==I.status&&Object(W.jsx)(hJ,{"data-test-id":"ScrollElementStart","data-first-message-id":T[0].messageId,ref:e=>{var t;e&&(ae.current.scrollElementStart=e,null==(t=ae.current.previousMessageFetcher)||t.observe(e),ie.current.previousMessageFetcher=void 0)}}),ne,T.length>0&&Object(W.jsx)(mJ,{children:Object(W.jsx)("div",{ref:e=>{var t,n;e&&(ae.current.scrollElementEnd=e,null==(t=ae.current.scrollLocker)||t.observe(e),null==(n=ae.current.scrollUnlocker)||n.observe(e),ie.current.scrollLocker=void 0)}})})]}),!o&&Object(W.jsx)(aJ,{onClick:R})]}),$&&Object(W.jsx)(fJ,{channelType:"group_channels",isUserMessageDisabled:"joined"!==(null==i?void 0:i.myMemberState),isDisabled:!g,onSubmit:({inputOption:e,message:t,sendPush:n=!1})=>{switch(e){case"user":return void(i&&Z({message:t,channel:i}));case"admin":return void ee({message:t,channelUrl:p,sendPush:n});default:return}},sendFileMessage:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];e.target.value="",i&&n&&te({file:n,channel:i})}})]}):Object(W.jsxs)(pJ,{children:[Object(W.jsx)(V.cc,{})," "]})});const vJ={isLoading:!1,isLoadingMore:!1,users:[],next:"",hasError:!1,isLoadMoreFailed:!1},xJ=(e,t)=>{switch(t.type){case"START_RELOADING":return{...vJ,isLoading:!0};case"RELOADING_SUCCESS":return{...e,isLoading:!1,hasError:!1,...t.payload};case"RELOADING_FAILURE":return{...e,isLoading:!1,hasError:!0};case"START_LOAD_MORE":return{...e,isLoadingMore:!0};case"LOAD_MORE_SUCCESS":return{...e,isLoadingMore:!1,isLoadMoreFailed:!1,users:e.users.concat(t.payload.users),next:t.payload.next};case"LOAD_MORE_FAILURE":return{...e,isLoadingMore:!1,isLoadMoreFailed:!0};case"REMOVE_USER":return{...e,users:e.users.filter(e=>e.user_id!==t.payload.userId)};default:return e}};var _J,CJ=e=>{const t=Object(P.c)(),[n,i]=Object(a.useReducer)(xJ,vJ),s=Object(b.f)(),r=Object(a.useRef)([]),{isLoadingMore:o,next:l,users:c}=n,d=Object(P.L)(o),u=Object(a.useCallback)(async(n=!1)=>{if(!e)return;r.current.forEach(e=>e.cancel()),i({type:"START_RELOADING"}),n||s(j.a.fetchGroupChannelRequest(e));const a=Object(js.fetchGroupChannelsMembers)({appId:t,channelUrl:e,token:"",limit:100});r.current.push(a);try{const e=await a,{data:{members:t,next:n}}=e;i({type:"RELOADING_SUCCESS",payload:{users:t,next:n,count:t.length<100?t.length:100+Number(!!n)}})}catch(e){i({type:"RELOADING_FAILURE"})}finally{r.current=r.current.filter(e=>e!==a)}},[t,e,s]);Object(a.useEffect)(()=>{u(!0)},[u]);const p=Object(a.useCallback)(async()=>{if(!e||!l||d.current)return;i({type:"START_LOAD_MORE"});const n=Object(js.fetchGroupChannelsMembers)({appId:t,channelUrl:e,token:l,limit:100});r.current.push(n);try{const e=await n;if(null==e)return;const{data:{members:t,next:a}}=e;i({type:"LOAD_MORE_SUCCESS",payload:{users:t,next:a}})}catch(e){i({type:"LOAD_MORE_FAILURE"})}finally{r.current=r.current.filter(e=>e!==n)}},[t,e,d,l]),g=Object(a.useCallback)((e,t)=>{"banned"!==t&&"deactivated"!==t||!c.some(t=>t.user_id===e)||i({type:"REMOVE_USER",payload:{userId:e}})},[c]);return{state:n,loadMore:p,reload:u,handleMemberStateChange:g}};!function(e){e[e.FetchLatestMessagesStart=0]="FetchLatestMessagesStart",e[e.FetchLatestMessagesSuccess=1]="FetchLatestMessagesSuccess",e[e.FetchLatestMessagesFail=2]="FetchLatestMessagesFail",e[e.FetchPreviousMessagesStart=3]="FetchPreviousMessagesStart",e[e.FetchPreviousMessagesSuccess=4]="FetchPreviousMessagesSuccess",e[e.FetchPreviousMessagesFail=5]="FetchPreviousMessagesFail",e[e.FetchNextMessagesStart=6]="FetchNextMessagesStart",e[e.FetchNextMessagesSuccess=7]="FetchNextMessagesSuccess",e[e.FetchNextMessagesFail=8]="FetchNextMessagesFail",e[e.FetchMessagesAroundStart=9]="FetchMessagesAroundStart",e[e.FetchMessagesAroundSuccess=10]="FetchMessagesAroundSuccess",e[e.FetchMessagesAroundFail=11]="FetchMessagesAroundFail",e[e.DeleteMessage=12]="DeleteMessage",e[e.ReplaceMessage=13]="ReplaceMessage",e[e.AppendMessage=14]="AppendMessage"}(_J||(_J={}));const kJ=(e,t)=>{var n;switch(t.type){case _J.FetchLatestMessagesStart:return{...e,status:"loading"};case _J.FetchLatestMessagesSuccess:return{...e,status:"success",messages:t.messages,requestParams:void 0,hasPreviousMessages:t.hasPreviousMessages,hasNextMessages:!1,error:void 0};case _J.FetchLatestMessagesFail:return{...e,status:"fail",error:t.error};case _J.FetchPreviousMessagesStart:return{...e,previousMessagesRequest:{...e.previousMessagesRequest,status:"loading"}};case _J.FetchPreviousMessagesSuccess:return{...e,messages:[...t.messages,...e.messages],previousMessagesRequest:{status:"success",error:void 0},hasPreviousMessages:t.hasPreviousMessages};case _J.FetchPreviousMessagesFail:return{...e,previousMessagesRequest:{status:"fail",error:t.error}};case _J.FetchMessagesAroundStart:return{...e,status:"loading"};case _J.FetchMessagesAroundSuccess:return{...e,status:"success",messages:t.messages,requestParams:t.requestParams,hasPreviousMessages:t.hasPreviousMessages,hasNextMessages:t.hasNextMessages,error:void 0};case _J.FetchMessagesAroundFail:return{...e,status:"fail",error:t.error};case _J.FetchNextMessagesStart:return{...e,nextMessagesRequest:{...e.nextMessagesRequest,status:"loading"}};case _J.FetchNextMessagesSuccess:return{...e,messages:[...e.messages,...t.messages],hasNextMessages:t.hasNextMessages,nextMessagesRequestParams:t.nextMessagesRequestParams,nextMessagesRequest:{status:"success"}};case _J.FetchNextMessagesFail:return{...e,nextMessagesRequest:{status:"fail",error:t.error}};case _J.DeleteMessage:return{...e,messages:e.messages.filter(e=>e.messageId!==t.messageId)};case _J.ReplaceMessage:return{...e,messages:e.messages.map(e=>e.messageId===t.message.messageId?t.message:e)};case _J.AppendMessage:return{...e,messages:e.messages.concat(t.message?[t.message]:[]).concat(null!=(n=t.messages)?n:[])};default:return e}};var wJ=({channelUrl:e,operatorFilter:t})=>{const[n,i]=Object(a.useReducer)(kJ,{status:"init",previousMessagesRequest:{status:"init"},hasPreviousMessages:!1,hasNextMessages:!1,nextMessagesRequest:{status:"init"},messages:[]}),s=Object(P.c)(),r=Object(P.L)(n.messages),o=Object(a.useCallback)(async()=>{try{i({type:_J.FetchLatestMessagesStart});const{data:{messages:n}}=await Object(js.fetchGroupChannelsMessages)({appId:s,prevLimit:50,nextLimit:0,ts:Date.now(),operatorFilter:t,channelUrl:e,include:!0});n.length<50?i({type:_J.FetchLatestMessagesSuccess,hasPreviousMessages:!1,messages:n.map(Fr)}):i({type:_J.FetchLatestMessagesSuccess,hasPreviousMessages:!0,messages:n.slice(1).map(Fr)})}catch(e){i({type:_J.FetchLatestMessagesFail,error:e})}},[s,e,t]),l=Object(a.useCallback)(async n=>{const a="timestamp"in n?n.timestamp:void 0,r="messageId"in n?n.messageId:void 0;try{i({type:_J.FetchMessagesAroundStart});const{data:{messages:o}}=await Object(js.fetchGroupChannelsMessages)({appId:s,prevLimit:25,nextLimit:25,ts:a,messageId:r,operatorFilter:t,channelUrl:e,include:!0}),l=o.findIndex(e=>e.created_at>=(null!=a?a:0)),c=o.findIndex(e=>e.message_id===r);if(r&&-1===c)return void i({type:_J.FetchMessagesAroundSuccess,requestParams:n,hasPreviousMessages:!0,hasNextMessages:!0,messages:o.map(Fr)});const d=r?c:l,u=25===d,p=r?o.some(e=>e.message_id===r):o.some(e=>e.created_at===a),g=25===o.length-d-(p?1:0);u&&o.splice(0,1),g&&o.splice(o.length-1,1),i({type:_J.FetchMessagesAroundSuccess,requestParams:n,hasPreviousMessages:u,hasNextMessages:g,messages:o.map(Fr)})}catch(e){i({type:_J.FetchMessagesAroundFail,error:e})}},[s,e,t]),c=Object(P.L)(n.nextMessagesRequest.status),d=Object(a.useCallback)(async({isAutoScrolling:a})=>{const l=r.current;if(0===l.length)return void("success"!==n.status&&"fail"!==n.status||o());try{if("loading"===c.current)return;i({type:_J.FetchNextMessagesStart});const{data:{messages:n}}=await Object(js.fetchGroupChannelsMessages)({appId:s,prevLimit:0,nextLimit:50,messageId:l[l.length-1].messageId,operatorFilter:t,channelUrl:e,include:!1}),r=50===n.length;r&&n.splice(n.length-1,1),i({type:_J.FetchNextMessagesSuccess,messages:n.map(Fr),hasNextMessages:r,nextMessagesRequestParams:{isAutoScrolling:a}})}catch(e){i({type:_J.FetchNextMessagesFail,error:e})}},[s,e,o,r,c,t,n.status]),u=Object(P.L)(n.previousMessagesRequest.status),p=Object(a.useCallback)(async n=>{if(0!==r.current.length&&"loading"!==u.current)try{i({type:_J.FetchPreviousMessagesStart});const{data:{messages:a}}=await Object(js.fetchGroupChannelsMessages)({appId:s,prevLimit:50,nextLimit:0,messageId:n,operatorFilter:t,channelUrl:e,include:!1});a.length<50?i({type:_J.FetchPreviousMessagesSuccess,hasPreviousMessages:!1,messages:a.map(Fr)}):i({type:_J.FetchPreviousMessagesSuccess,hasPreviousMessages:!0,messages:a.slice(1).map(Fr)})}catch(e){i({type:_J.FetchPreviousMessagesFail,error:e})}},[s,e,r,t,u]),g=Object(a.useCallback)(e=>{i({type:_J.DeleteMessage,messageId:e})},[]),h=Object(a.useCallback)(e=>{i({type:_J.ReplaceMessage,message:e})},[]),m=Object(a.useCallback)(e=>{Array.isArray(e)?i({type:_J.AppendMessage,messages:e}):i({type:_J.AppendMessage,message:e})},[]);return{state:n,actions:Object(a.useMemo)(()=>({fetchLatestMessages:o,fetchNextMessages:d,fetchMessagesAround:l,fetchPreviousMessages:p,deleteMessage:g,replaceMessage:h,appendMessage:m}),[o,d,l,p,g,h,m])}};var TJ=()=>{const[e,t]=Object(a.useState)(!0);return Object(a.useEffect)(()=>{const e=()=>{t("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),e};var SJ=(e,t)=>{const n=Object(a.useRef)(-1),i=TJ(),s=Object(P.L)(t),r=Object(P.L)(e),o=Object(a.useRef)(!1),l=Object(a.useCallback)(()=>{n.current>-1&&(window.clearInterval(n.current),n.current=-1)},[]),c=Object(a.useCallback)(()=>{l(),s.current();const e=window.setInterval(()=>s.current(),1e3*r.current);n.current=e},[s,r,l]);return Object(a.useEffect)(()=>{i?o.current&&(c(),o.current=!1):n.current&&(o.current=!0,l())},[i,c,l]),{startPolling:c,stopPolling:l}};const EJ=r.default.div.withConfig({displayName:"GroupChannelDetail__StyledGroupChannels",componentId:"u0bxt6-0"})(["flex:1;min-width:0;"]);var IJ=Object(r.default)(EJ).withConfig({displayName:"GroupChannelDetail___StyledStyledGroupChannels",componentId:"u0bxt6-1"})(["",""],e=>e._css);const MJ=["all","operator","nonoperator"],DJ=window.sessionStorage.getItem("operatorFilter");var AJ=Object(r.default)(o.Icon).withConfig({displayName:"GroupChannelDetail___StyledIcon",componentId:"u0bxt6-2"})(["margin-right:6px;"]),NJ=Object(r.default)(OK).withConfig({displayName:"GroupChannelDetail___StyledMTChat",componentId:"u0bxt6-3"})(["",""],e=>e._css2);var RJ=({channelUrl:e})=>{var t;const n=Object(E.a)(),{messageId:i}=Object(s.m)(),l=CJ(e),c=zK({channelUrl:e,channelType:"group_channels"}),d=$K({channelUrl:e,channelType:"group_channels"}),u=Object(s.k)(),p=Object(qW.a)(),g=Object(P.c)(),h=Object(b.f)(),m=(()=>{const e=Object(P.W)();return t=>{e({dialogTypes:A.a.PreviousChat,dialogProps:t})}})(),f=Object(a.useRef)(null),[{zoomLevel:y,isInformationSidebarHidden:O,operatorFilter:v},x]=Object(a.useState)({zoomLevel:100,isInformationSidebarHidden:!1,operatorFilter:null!=(t=DJ)?t:MJ[0]}),{channel:_,isFetchingChannel:C}=Object(P.V)(e=>({channel:e.groupChannels.current,isFetchingChannel:e.groupChannels.isFetchingChannel})),k=Object(a.useMemo)(()=>{const e=Number(i);return Number.isNaN(e)?void 0:e},[i]),w=(()=>{const e=Object(qW.a)(),t=Object(P.V)(e=>e.groupChannels.current),{sdkUser:n,isFetched:i}=Object(P.l)();return Object(a.useMemo)(()=>{if(!i)return{result:"unknown",blockReason:null};if(!n)return{result:"blocked",blockReason:"moderator"};const a=null==t?void 0:t.custom_type;return e&&t&&(!a||a&&!n.allowed_channel_custom_types.includes(a))?{result:"blocked",blockReason:"allowed_channel_custom_types"}:{result:"allowed",blockReason:null}},[t,e,i,n])})();Object(a.useEffect)(()=>{if("blocked"===w.result){switch(w.blockReason){case"allowed_channel_custom_types":o.toast.warning({message:n.formatMessage({id:"chat.groupChannels.toast.noAccess"})});break;case"moderator":o.toast.warning({message:n.formatMessage({id:"chat.moderationTool.noti.setModeratorInformationFirst"})})}g?u.push(`/${g}/group_channels`):u.push("/")}},[g,w.blockReason,w.result,u,n]);const{loadSdkChannel:T,updateSdkChannel:S,status:I,channel:M,error:D}=HK({channelUrl:e,channelType:"group_channels"}),N="loading"===I||"init"===I,R=!!M;Object(a.useEffect)(()=>{"allowed"===w.result&&T()},[w.result,T]),Object(a.useEffect)(()=>{null!=D&&400108!==D.code&&800220!==D.code&&o.toast.error({message:Object(mi.b)(D)})},[D]),Object(a.useEffect)(()=>{"allowed"===w.result&&(h(j.a.resetGroupChannelsModerationData()),h(j.a.fetchGroupChannelRequest(e)))},[w.result,e,h]);const L=wJ({channelUrl:e,operatorFilter:v}),{actions:{fetchMessagesAround:F,fetchLatestMessages:U,fetchNextMessages:$,deleteMessage:B,replaceMessage:z,appendMessage:H},state:{error:q,previousMessagesRequest:G,nextMessagesRequest:K,hasNextMessages:Y}}=L;Object(P.s)(q),Object(P.s)(G.error),Object(P.s)(K.error),Object(a.useEffect)(()=>{"allowed"===w.result&&(k?F({messageId:k}):U())},[w.result,U,F,N,k]);const{addChangeListener:Q,removeChangeListener:J}=Object(a.useContext)(Cs);Object(a.useEffect)(()=>{const e=(e,t)=>{d.handleUserBanStateChange(e,t),l.handleMemberStateChange(e,t?"banned":"unbanned")},t=(e,t)=>{c.handleUserMuteStateChange(e,t),l.handleMemberStateChange(e,t?"muted":"unmuted")},n=e=>{l.handleMemberStateChange(e,"deactivated")};return Q("ban",e),Q("mute",t),Q("deactivate",n),()=>{J("ban",e),J("mute",t),J("deactivate",n)}},[Q,d,l,c,J]);const[X]=cJ(),[Z,ee]=Object(a.useState)(!1),te=!X&&!Y,{newMessageCount:ne,updateCount:ae,cancelPendingUpdate:ie}=(({operatorFilter:e,channelUrl:t,didScrollToBottomToRecentMessage:n})=>{const i=Object(P.c)(),s=Object(a.useRef)(-1),r=Object(a.useRef)(),[o,l]=Object(a.useState)(0);return Object(a.useLayoutEffect)(()=>{n?(s.current=-1,l(0)):s.current=Date.now()},[n]),{newMessageCount:o,updateCount:Object(a.useCallback)(async()=>{if(!(s.current<0))try{const n=Object(HW.g)({appId:i,channelUrl:t,include:!0,nextLimit:100,prevLimit:0,operatorFilter:e,ts:s.current});r.current=n.cancel;const a=await n;if(null==a)return;const{data:{messages:o}}=a;l(o.length)}catch(e){}},[i,t,e]),cancelPendingUpdate:Object(a.useCallback)(()=>{null==r.current||r.current()},[])}})({operatorFilter:v,channelUrl:e,didScrollToBottomToRecentMessage:te}),se=(({channelUrl:e,didScrollToBottomToRecentMessage:t,didUserHideNewMessageAlert:n})=>{const[i,s]=Object(a.useState)(0),r=Object(P.L)(i),o=Object(P.L)(n);return Object(a.useEffect)(()=>{t&&s(0)},[t]),Object(a.useEffect)(()=>{const n=new window.dashboardSB.ChannelHandler;n.onMessageReceived=n=>{n.isGroupChannel()&&n.url===e&&!t&&!o.current&&r.current<=99&&s(e=>e+1)};const a=`groupChannelHandler_${e}_newMessageCountUpdater`;return window.dashboardSB.addChannelHandler(a,n),()=>{window.dashboardSB.removeChannelHandler(a)}},[e,t,o,r]),i})({channelUrl:e,didScrollToBottomToRecentMessage:te,didUserHideNewMessageAlert:Z}),re=M?se:ne;Object(a.useEffect)(()=>{const t=t=>t.isGroupChannel()&&t.url===e,n=new window.dashboardSB.ChannelHandler;n.onMessageReceived=(e,n)=>{t(e)&&(Y||(H(Ur(n)),te&&f.current&&f.current.scrollTo(0,f.current.scrollHeight)))},n.onMessageUpdated=(e,n)=>{t(e)&&z(Ur(n))},n.onMessageDeleted=(e,n)=>{t(e)&&B(n)},n.onChannelChanged=e=>{t(e)&&S(e)};const a=`groupChannelHandler_${e}`;return window.dashboardSB.addChannelHandler(a,n),()=>{window.dashboardSB.removeChannelHandler(a)}},[H,e,B,Y,z,te,S]);const{startPolling:oe,stopPolling:le}=SJ(5,()=>{te?"loading"!==K.status&&$({isAutoScrolling:!0}):!Z&&ne<=99&&ae()});return Object(a.useEffect)(()=>{te&&(ee(!1),ie())},[ie,te]),Object(a.useEffect)(()=>(R||oe(),()=>{le()}),[R,oe,le]),Object(W.jsx)(IJ,{_css:O?Object(r.css)(["","{display:none;}","{padding-left:16px;padding-right:16px;}"],xK,OK):void 0,children:null==_?C&&Object(W.jsx)(V.cc,{}):Object(W.jsxs)(jK,{children:[Object(W.jsx)(JW,{channel:_,children:{operatorFilter:p&&Object(W.jsx)(dK,{operatorFilter:v,onItemSelected:e=>{e&&_&&x(t=>({...t,operatorFilter:e}))}}),textZoomButton:Object(W.jsx)(bK,{value:y,onChange:e=>x(t=>({...t,zoomLevel:e}))}),changeLayoutButton:Object(W.jsx)(oK,{isInformationSidebarHidden:O,onChange:e=>x(t=>({...t,isInformationSidebarHidden:e}))}),previousChatButton:p&&Object(W.jsxs)(o.Button,{buttonType:"secondary",variant:"ghost",size:"small",onClick:()=>{m({onApply:(e,t,n)=>{const a=Object(zW.flow)(UW(new Date,"yyyy-MM-dd"),Object($W.a)(t),Object(BW.a)(n),VW)(e);F({timestamp:a.valueOf()})}})},children:[Object(W.jsx)(AJ,{icon:"timeline",color:"currentColor",size:20}),n.formatMessage({id:"chat.channelDetail.header.btn.previousChat"})]})}}),Object(W.jsx)(yK,{children:_&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(TQ,{channel:_,mutedMembers:c,bannedUsers:d,members:l}),Object(W.jsx)(rJ.Provider,{value:L,children:Object(W.jsxs)(NJ,{_css2:or(y),children:[Object(W.jsx)(za,{}),Object(W.jsx)(IK,{children:Object(W.jsx)(MK,{count:re,isHidden:0===re||Z,onClick:U,onClose:()=>ee(!0)})}),Object(W.jsx)(OJ,{ref:f,messageId:k,onMessageDeleteSuccess:R?void 0:B,onMessageEditSuccess:R?void 0:z,channel:_,isLoadingSdkChannel:"init"===I||"loading"===I,sdkChannel:M,didScrollToBottomToRecentMessage:te},e)]})})]})})]})})},PJ=Object(r.default)(o.Tooltip).withConfig({displayName:"FreezeIcon___StyledTooltip",componentId:"qoihul-0"})(["flex:none;svg{fill:"," !important;}"],e=>e._css);const LJ=({className:e})=>{const t=Object(E.a)();return Object(W.jsx)(PJ,{className:e,variant:o.TooltipVariant.Dark,placement:"top",content:t.formatMessage({id:"chat.channelList.icon.freeze"}),_css:Object(o.cssVariables)("purple-7"),children:Object(W.jsx)(o.TooltipTargetIcon,{role:"img",icon:"freeze",size:16,color:Object(o.cssVariables)("purple-7"),"aria-label":t.formatMessage({id:"chat.channelList.icon.freeze"})})})};var FJ=Object(r.default)(o.Icon).withConfig({displayName:"UserCountIcon___StyledIcon",componentId:"sc-1xgh43-0"})(["display:block;"]);const UJ=Object(r.default)(({size:e,color:t="currentColor",isSupergroup:n=!1,className:a})=>{const i=Object(E.a)();return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Dark,content:n?i.formatMessage({id:"chat.channelList.list.column.memberCount.icon.supergroup"}):"",trigger:n?o.TooltipTrigger.Hover:o.TooltipTrigger.Manual,className:a,portalId:"portal_tooltip",children:Object(W.jsx)(FJ,{icon:n?"teams":"user",color:t,size:e})})}).withConfig({displayName:"UserCountIcon",componentId:"sc-1xgh43-1"})([""]);function $J(e,t){switch(t.type){case"HANDLE_CHECK_CHANGE":{const{checked:n,channel:a}=t.payload;return{...e,selectedChannels:n?[...e.selectedChannels,a]:e.selectedChannels.filter(e=>e.channel_url!==a.channel_url)}}case"SET_SELECTED_CHANNELS":return{...e,selectedChannels:t.payload};default:return e}}const BJ={selectedChannels:[]},VJ=Object(a.createContext)({channelType:"open_channels",selectedChannels:[],channels:[],next:"",isFetching:!0,isFetchingLoadMore:!1,search:{option:"",query:"",isSearching:!1,isSuccess:!1},current:null}),zJ=Object(a.createContext)(void 0),HJ=({channelType:e,children:t})=>{const n=Object(E.a)(),i=Object(P.W)(),r=Object(s.k)(),l=Object(b.f)(),c=Object(qW.a)(),d=Object(P.Y)(e=>{var t,n;return null!=(t=null==(n=e.moderations.sdkUser)?void 0:n.allowed_channel_custom_types)?t:[]}),{channels:u,search:p,current:g,next:h,isFetching:m,isFetchingLoadMore:f}=Object(P.V)(t=>{const{channels:n,search:a,current:i,next:s,isFetching:r,isFetchingLoadMore:o}="open_channels"===e?t.openChannels:t.groupChannels;return{channels:n,search:a,current:i,next:s,isFetching:r,isFetchingLoadMore:o}}),y=Object(P.Y)(e=>e.applicationState.data),[{selectedChannels:O},v]=Object(a.useReducer)($J,BJ),x=Object(a.useRef)(),_=Object(a.useMemo)(()=>"open_channels"===e?{fetchChannels:j.a.fetchOpenChannelsRequest,searchChannels:j.a.searchOpenChannelsRequest,resetChannels:j.a.resetOpenChannelsRequest,setSearchQuery:j.a.setOpenChannelSearchQuery,setSearchOption:j.a.setOpenChannelSearchOption,setSearchState:j.a.setOpenChannelSearchState,setSearchSuccess:j.a.setOpenChannelSearchSuccess}:{fetchChannels:j.a.fetchGroupChannelsRequest,searchChannels:j.a.searchGroupChannelsRequest,resetChannels:j.a.resetGroupChannelsRequest,setSearchQuery:j.a.setGroupChannelSearchQuery,setSearchOption:j.a.setGroupChannelSearchOption,setSearchState:j.a.setGroupChannelSearchState,setSearchSuccess:j.a.setGroupChannelSearchSuccess},[e]),C=Object(a.useCallback)(e=>{v({type:"SET_SELECTED_CHANNELS",payload:e})},[]),k=Object(a.useCallback)((e,t)=>{v({type:"HANDLE_CHECK_CHANGE",payload:{channel:e,checked:t}})},[]);Object(a.useEffect)(()=>()=>{l(_.resetChannels())},[l,_]),Object(a.useEffect)(()=>{C([])},[u,C]);const w=Object(a.useCallback)(()=>{l(_.fetchChannels({init:!0}))},[l,_]),T=Object(a.useCallback)(()=>{l(_.setSearchQuery(""))},[l,_]),S=Object(a.useCallback)(e=>{l(_.setSearchQuery(e))},[l,_]),I=Object(a.useCallback)(e=>{l(_.setSearchOption(e.key))},[l,_]),M=Object(a.useCallback)(()=>{p.query?l(_.searchChannels({option:p.option,query:p.query})):l(_.fetchChannels({init:!1}))},[l,_,p.option,p.query]),D=Object(a.useCallback)(({url:t,customType:a})=>{!c||"group_channels"!==e||a&&d.includes(a)?(null==g?void 0:g.channel_url)!==t&&("open_channels"===e&&l(j.a.updateOpenChannelsMessages({messages:[],preservedMessages:[]})),l(j.a.goToModeration({types:e,channelURL:t}))):o.toast.warning({message:n.formatMessage({id:"chat.groupChannels.toast.noAccess"})})},[g,l,n,c,d,e]),N=Object(a.useCallback)(()=>{if(null==y)return;const t=p.option&&p.query?`?${Wt.a.stringify({[p.option]:p.query})}`:"";r.push(`/${y.app_id}/${e}${t}`)},[y,e,r,p.option,p.query]);Object(a.useEffect)(()=>{x.current=e=>{const t=O.filter(t=>t.channel_url!==e.channel_url);C(t)}},[O,C]);const R=Object(a.useCallback)(t=>{i({dialogTypes:A.a.EditChannel,dialogProps:{channel:t,channelType:e}})},[e,i]),L=Object(a.useCallback)(t=>{i({dialogTypes:A.a.ChannelMetadata,dialogProps:{channel:t,channelType:e}})},[e,i]),F=Object(a.useCallback)(t=>{null!=y&&i({dialogTypes:A.a.AdminMessage,dialogProps:{plan:y.plan,channels:t,channelType:e,total:O.length,removeSelectedChannelRef:x}})},[y,O.length,e,i]),U=Object(a.useCallback)(t=>{i({dialogTypes:A.a.DeleteChannels,dialogProps:{channelType:e,completeDeleteChannels:e=>{null!=y&&(C([]),w(),g&&e.some(e=>e.channel_url===(null==g?void 0:g.channel_url))&&N())},channels:t,total:O.length,removeSelectedChannelRef:x}})},[y,g,w,N,O.length,C,e,i]),$=Object(a.useCallback)(e=>{l(_.setSearchState(e))},[l,_]),B=Object(a.useCallback)(e=>{l(_.setSearchSuccess(e))},[l,_]),V=Object(a.useCallback)(e=>{l(_.searchChannels(e))},[l,_]);return Object(W.jsx)(VJ.Provider,{value:{channelType:e,selectedChannels:O,channels:u,search:p,current:g,next:h,isFetching:m,isFetchingLoadMore:f},children:Object(W.jsx)(zJ.Provider,{value:{setSelectedChannels:C,handleChannelSelectionChange:k,fetchChannels:w,handleSearchClear:T,handleSearchQueryChange:S,handleSearchOptionChange:I,loadMoreChannels:M,navigateToChannel:D,navigateToList:N,editChannel:R,editChannelMetadata:L,sendAdminMessage:F,deleteChannels:U,setSearchState:$,searchChannels:V,setSearchSuccess:B},children:t})})},qJ=()=>Object(a.useContext)(VJ),GJ=()=>Object(a.useContext)(zJ),WJ=r.default.div.withConfig({displayName:"ContractedChannelListItem__ContractedChannelURL",componentId:"sc-2g4in4-0"})(["display:-webkit-box;width:100%;max-height:32px;overflow:hidden;word-break:break-all;color:",";-webkit-box-orient:vertical;-webkit-line-clamp:2;",";"],Object(o.cssVariables)("neutral-10"),o.Typography["caption-01"]),KJ=r.default.div.withConfig({displayName:"ContractedChannelListItem__ContractedChannelName",componentId:"sc-2g4in4-1"})(["",";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:",";"],o.Headings["heading-01"],Object(o.cssVariables)("neutral-10")),YJ=Object(r.default)(o.Avatar).attrs({type:o.AvatarType.Channel,size:20}).withConfig({displayName:"ContractedChannelListItem__ChannelCover",componentId:"sc-2g4in4-2"})([""]),QJ=r.default.time.withConfig({displayName:"ContractedChannelListItem__CreationTime",componentId:"sc-2g4in4-3"})(["position:relative;top:2px;flex:1 0;margin-left:16px;text-align:right;white-space:nowrap;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Typography["caption-01"]),JJ=r.default.div.withConfig({displayName:"ContractedChannelListItem__ChannelNameRow",componentId:"sc-2g4in4-4"})(["display:flex;align-items:flex-start;min-width:0;"]),XJ=r.default.div.withConfig({displayName:"ContractedChannelListItem__ContractedChannelUsers",componentId:"sc-2g4in4-5"})(["display:flex;align-items:center;line-height:16px;color:",";font-size:12px;font-weight:400;","{margin-right:4px;}",""],Object(o.cssVariables)("neutral-6"),UJ,({$isSupergroup:e})=>e&&Object(r.css)(["color:",";font-weight:600;"],YK)),ZJ=r.default.div.withConfig({displayName:"ContractedChannelListItem__ContractedChannelCheckbox",componentId:"sc-2g4in4-6"})(["display:flex;position:relative;transition:width 0.2s ",",opacity 0.2s ",";opacity:0;z-index:0;width:0;pointer-events:none;> *{margin-left:auto;}"],o.transitionDefault,o.transitionDefault),eX=r.default.div.withConfig({displayName:"ContractedChannelListItem__ContractedChannelContent",componentId:"sc-2g4in4-7"})(["display:flex;position:relative;flex:1;flex-direction:column;align-items:stretch;z-index:2;min-width:0;> * + ","{margin-top:4px;}> * + ","{margin-top:8px;}"],XJ,WJ),tX=Object(r.css)(["width:28px;opacity:1;z-index:1;pointer-events:all;"]),nX=r.default.li.withConfig({displayName:"ContractedChannelListItem__Container",componentId:"sc-2g4in4-8"})(["display:flex;transition:background 0.2s ",";border-bottom:1px solid ",";cursor:pointer;padding:12px 16px;padding-left:8px;&:hover{background:",";}",";"," "," > * + *{margin-left:8px;}"],o.transitionDefault,Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-1"),({$isActive:e})=>e&&Object(r.css)(["box-shadow:inset 2px 0 0 0 ",";background:",";",",","{color:",";}"],Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("neutral-2"),KJ,XJ,Object(o.cssVariables)("purple-7")),({$isEditable:e})=>e&&Object(r.css)([":hover{","{","}}"],ZJ,tX),({$checked:e,$isEditing:t})=>(e||t)&&Object(r.css)(["","{","}"],ZJ,tX));var aX=Object(r.default)(LJ).withConfig({displayName:"ContractedChannelListItem___StyledFreezeIcon",componentId:"sc-2g4in4-9"})(["position:relative;top:-2px;height:20px;vertical-align:top;margin-left:2px;"]);const iX=i.a.memo(({channel:e,onClick:t,onCheckClick:n,isActive:i,checked:s,isEditing:r,userCount:l})=>{const d=Object(E.a)(),{isPermitted:u}=Object(P.h)(),{handleChannelSelectionChange:p}=GJ(),g=Object(a.useCallback)(({target:t})=>{p(e,t.checked)},[e,p]),h=Object(a.useCallback)(()=>{var n;t({url:null!=(n=e.channel_url)?n:"",customType:e.custom_type})},[t,e]),m=c()(1e3*e.created_at),b=Boolean(e.is_super),j=Object(lh.a)();return Object(W.jsxs)(nX,{onClick:h,$isActive:i,$checked:s,$isEditing:r,$isEditable:u(["application.channels.openChannel.all","application.channels.groupChannel.all"]),children:[Object(W.jsx)(ZJ,{children:Object(W.jsx)(o.Checkbox,{checked:s,onChange:g,onClick:n})}),Object(W.jsx)(YJ,{profileID:e.channel_url,imageUrl:e.cover_url}),Object(W.jsxs)(eX,{children:[Object(W.jsxs)(JJ,{children:[Object(W.jsx)(KJ,{"aria-label":"Channel name",children:e.name||d.formatMessage({id:"chat.channelList.emptyChannelNamePlaceholder"})}),e.freeze&&Object(W.jsx)(aX,{}),Object(W.jsx)(QJ,{dateTime:m.toISOString(),title:m.format(f.y),children:j(m.valueOf())})]}),Object(W.jsxs)(XJ,{"aria-label":"Number of users",$isSupergroup:b,children:[Object(W.jsx)(UJ,{size:12,isSupergroup:b}),l]}),Object(W.jsx)(WJ,{"aria-label":"Channel URL",children:e.channel_url})]})]})});var sX=n("aAZC"),rX=n.n(sX);const oX=[{label:"name",suffix:" (contains)",key:f.Cb.nameContains,description:"Channel Name"},{label:"url",suffix:" (equals)",key:f.Cb.urlEquals,description:"Channel URL"},{label:"custom_type",suffix:" (equals)",key:f.Cb.customTypeEquals,description:"Custom Type"}],lX=[{label:"nickname",suffix:" (equals)",key:f.lb.nicknameEquals,description:"User Nickname"},{label:"user_id",suffix:" (equals)",key:f.lb.userIdEquals,description:"User ID"},{label:"url",suffix:" (equals)",key:f.lb.urlEquals,description:"Channel URL"},{label:"custom_type",suffix:" (equals)",key:f.lb.customTypeEquals,description:"Custom Type"},{label:"name",suffix:" (equals)",key:f.lb.nameEquals,description:"Channel Name"},{label:"name",suffix:" (startswith)",key:f.lb.nameStartswith,description:"Channel Name"},{label:"members_include_in",suffix:" (equals)",key:f.lb.membersIncludeIn,description:"Comma Separated User IDs"}],cX=()=>{const{channelType:e,search:{query:t,option:n}}=qJ();if(t){var a,i;const t="open_channels"===e?oX:lX,s=rX()(null!=(a=null==(i=t.find(e=>e.key===n))?void 0:i.description)?a:"query");return Object(W.jsx)(z.a,{icon:"channels",title:"Channel not found",description:`Please make sure the ${s} is correct`})}return"open_channels"===e?Object(W.jsx)(z.a,{icon:"channels",title:"Create your first channel",description:'Use the "Create channel" button above to get started'}):Object(W.jsx)(z.a,{icon:"channels",title:"You have no group channels",description:"Please wait for your users to start a conversation"})},dX=Object(r.default)(V.tc).withConfig({displayName:"ContractedChannelList__ContractedTooltip",componentId:"lf5c2x-0"})(["& + &{margin-left:6px;}"]),uX=Object(r.default)(o.IconButton).withConfig({displayName:"ContractedChannelList__BackButton",componentId:"lf5c2x-1"})(["svg{fill:",";}:hover{svg{fill:",";}}"],Object(o.cssVariables)("neutral-9"),Object(o.cssVariables)("neutral-9")),pX=r.default.div.withConfig({displayName:"ContractedChannelList__ContractedTitle",componentId:"lf5c2x-2"})(["font-size:16px;font-weight:600;line-height:1.5;letter-spacing:-0.2px;color:",";margin-left:8px;"],Object(o.cssVariables)("neutral-10")),gX=r.default.ul.withConfig({displayName:"ContractedChannelList__ContractedContainer",componentId:"lf5c2x-3"})(["flex:1;display:flex;flex-direction:column;padding:0;overflow:hidden;"]),hX=r.default.div.withConfig({displayName:"ContractedChannelList__ContractedCheckAll",componentId:"lf5c2x-4"})(["margin-right:8px;margin-left:10px;"]),mX=r.default.div.withConfig({displayName:"ContractedChannelList__CheckboxLabel",componentId:"lf5c2x-5"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";cursor:pointer;"],Object(o.cssVariables)("neutral-10")),fX=r.default.div.withConfig({displayName:"ContractedChannelList__ContractedSelectedCount",componentId:"lf5c2x-6"})(["font-size:14px;font-weight:500;color:",";margin-left:auto;padding-right:5px;",";"],Object(o.cssVariables)("purple-7"),e=>e.isCancel?"cursor: pointer;":""),bX=r.default.div.withConfig({displayName:"ContractedChannelList__StyledContracted",componentId:"lf5c2x-7"})(["width:319px;border-right:1px solid ",";"],Object(o.cssVariables)("neutral-3")),jX=r.default.div.withConfig({displayName:"ContractedChannelList__ContractedWrapper",componentId:"lf5c2x-8"})(["display:flex;flex-direction:column;align-items:stretch;height:100%;"]),yX=r.default.div.withConfig({displayName:"ContractedChannelList__ContractedHeader",componentId:"lf5c2x-9"})(["padding:0 11px 0 8px;display:flex;align-items:center;position:relative;height:64px;border-bottom:1px solid ",";"," + ","{margin-left:4px;}"],Object(o.cssVariables)("neutral-3"),hX,dX),OX=r.default.div.withConfig({displayName:"ContractedChannelList__SpinnerWrapper",componentId:"lf5c2x-10"})(["text-align:center;line-height:0;padding:32px;> *{display:inline-block;}"]),vX=e=>Object(uY.b)(e)?e.participant_count:Object(uY.a)(e)?e.member_count:0,xX=()=>{const e=Object(E.a)(),{channelType:t,selectedChannels:n,channels:i,current:s,next:l,search:c,isFetching:d}=qJ(),{setSelectedChannels:u,fetchChannels:p,searchChannels:g,setSearchSuccess:h,handleSearchClear:m,handleSearchQueryChange:f,handleSearchOptionChange:b,loadMoreChannels:j,navigateToChannel:y,navigateToList:O,editChannel:v,editChannelMetadata:x,sendAdminMessage:_,deleteChannels:C,setSearchState:k}=GJ(),{scrollBarRef:w,spinnerWrapperRef:T}=Object(P.A)({handleLoadMore:j,hasMore:!!l}),[S,I]=Object(a.useState)(n.length>0),M=n.length>0;Object(a.useEffect)(()=>{M&&!S&&I(!0)},[M,S]);const D=Object(a.useMemo)(()=>n.map(e=>e.channel_url),[n]),A=n.length,N=i.length>0&&A===i.length,R=A>0&&A<i.length,L=Object(a.useCallback)(e=>{e.stopPropagation()},[]),F=Object(a.useCallback)(()=>{u(M?[]:i)},[u,M,i]),U=Object(a.useRef)(null);Object(a.useEffect)(()=>{U.current=()=>{""===c.query&&(c.isSuccess&&p(),k(!1))}},[p,c.isSuccess,c.query,k]);const $=Object(a.useCallback)(()=>{0===A&&I(!1)},[A]),B="open_channels"===t?"Open channels":"Group channels",z="open_channels"===t?oX:lX,H=Object(a.useMemo)(()=>{const e=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(uX,{icon:"arrow-left",size:"small",buttonType:"primary",onClick:O}),Object(W.jsx)(pX,{children:B})]});return Object(W.jsxs)(W.Fragment,{children:[e,Object(W.jsx)(V.ac,{styles:{SearchInput:Object(r.css)(["margin-left:auto;",""],c.isSearching||""!==c.query?Object(r.css)(["position:absolute;left:40px;right:7px;&:focus{border:1px solid transparent;}"]):""),SearchIcon:Object(r.css)(["margin-left:auto;"])},isFetching:d,value:c.query,defaultOption:c.option?z.find(e=>e.key===c.option):z[0],options:z,handleFocus:()=>{k(!0)},handleBlur:()=>null==U.current?void 0:U.current(),handleDocumentClick:e=>{e&&""===c.query&&c.isSearching&&k(!1)},handleSearchClear:m,handleChange:f,handleSubmit:()=>{""!==c.query?g({option:c.option,query:c.query,init:!0}):""===c.query&&(p(),h(!1))},handleOptionChange:b,handleSearchClick:()=>{k(!0)},type:"inline",mode:c.isSearching||""!==c.query?"default":"icon",preventBlur:!0})]})},[O,B,c.isSearching,c.query,c.option,d,z,m,f,b,k,g,p,h]),q=[{label:e.formatMessage({id:"chat.channelList.list.bulkAction.editChannel"}),icon:"edit",enabled:1===n.length,hasAttached:!0,onClick:()=>v(n[0]),testId:"EditButton"},{label:e.formatMessage({id:"chat.channelList.list.bulkAction.editChannelMetadata"}),icon:"metadata",enabled:1===n.length,isAttached:!0,onClick:()=>x(n[0]),testId:"EditMetadataButton"},{label:e.formatMessage({id:"chat.channelList.list.bulkAction.sendAdminMessage"}),icon:"admin-message",enabled:n.length>0,onClick:()=>_(n),testId:"SendAdminMessageButton"},{label:e.formatMessage({id:"chat.channelList.list.bulkAction.deleteChannels"}),icon:"delete",enabled:n.length>0,onClick:()=>C(n),testId:"DeleteButton"}],G=cX();return Object(W.jsx)(bX,{"data-test-id":"ChannelList",children:Object(W.jsxs)(jX,{children:[Object(W.jsx)(yX,{children:S?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(hX,{children:Object(W.jsx)(o.Checkbox,{checked:N,indeterminate:R,onChange:F})}),0===A?Object(W.jsx)(mX,{onClick:F,children:"Select All"}):"",q.map(e=>e.enabled?Object(W.jsx)(dX,{tag:"span",target:Object(W.jsx)(o.IconButton,{icon:e.icon,size:"small",buttonType:"primary",onClick:e.onClick,"data-test-id":e.testId},`contracted_menu_item_${e.label}`),content:e.label,placement:"bottom",offset:"0, 8"}):""),Object(W.jsx)(fX,{onClick:$,isCancel:0===A,children:A>0?`${A} selected`:"Cancel"})]}):H}),Object(W.jsx)(gX,{children:Object(W.jsx)(o.ScrollBar,{ref:e=>{var t;w(null!=(t=null==e?void 0:e.node)?t:null)},children:i.length>0?Object(W.jsxs)(W.Fragment,{children:[i.map(e=>Object(W.jsx)(iX,{channel:e,onClick:y,onCheckClick:L,isActive:(null==s?void 0:s.channel_url)===e.channel_url,checked:D.includes(e.channel_url),isEditing:S,userCount:IS()(vX(e)).format({thousandSeparated:!0,mantissa:0})},`contracted_channels_${e.channel_url}`)),l&&Object(W.jsx)(OX,{ref:T,"data-test-id":"LoadMoreSpinner",children:Object(W.jsx)(o.Spinner,{size:24,stroke:Object(o.cssVariables)("neutral-9")})})]}):G})})]})})};let _X;!function(e){e.Loading="loading",e.Available="available",e.FeatureOff="feature_off",e.NotSupported="not_supported",e.V1OrgUnavailable="v1_org_unavailable"}(_X||(_X={}));const CX=e=>{const{isSelfService:t,isFeatureEnabled:n}=Object(P.h)(),{isLoading:a,currentSubscription:i}=Object(g.b)(),s=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.current_premium_features});return t?a||null==i?_X.Loading:null==i.plan?(Object(H.logException)({error:new Error("subscription.plan is null"),context:{currentSubscription:i}}),_X.NotSupported):i.plan.moderation_tools.enabled?n(f.u.ModerationTools)?_X.Available:_X.FeatureOff:_X.NotSupported:null==s?_X.Loading:"open_channels"===e&&s.moderation_open||"group_channels"===e&&s.moderation_group?_X.Available:_X.V1OrgUnavailable},kX=r.default.b.withConfig({displayName:"useCheckEnterChannelAvailability__Bold",componentId:"sc-15qh2zd-0"})(["font-weight:600;"]),wX=e=>{const t=Object(E.a)(),{sdkUser:n,isFetched:i}=Object(P.l)(),s=CX(e),r=i&&n,o=s===_X.Available&&r,l=Object(P.W)(),c=Object(b.f)(),d=(()=>{const e=Object(E.a)(),t=Object(P.W)({dialogTypes:A.a.CreateSDKUser,dialogProps:{}});return Object(P.W)({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:e.formatMessage({id:"chat.channelList.moderatorRequiredToEnterChannelDialog.title"}),description:e.formatMessage({id:"chat.channelList.moderatorRequiredToEnterChannelDialog.body"}),positiveButtonProps:{text:e.formatMessage({id:"chat.channelList.moderatorRequiredToEnterChannelDialog.btn.createModerator"}),onClick:()=>t(),preventClose:!0},isNegativeButtonHidden:!0}})})(),u=Object(a.useCallback)(({title:e,body:n})=>{l({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:e,description:n,positiveButtonProps:{text:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.btn.confirm"})},isNegativeButtonHidden:!0}})},[t,l]),p=Object(a.useCallback)(()=>c(j.b.hideDialogsRequest()),[c]);return Object(a.useCallback)(({onSuccess:e})=>{if(o)e();else switch(s){case _X.Available:d();break;case _X.FeatureOff:u({title:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.featureOff.title"}),body:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.featureOff.body"},{b:e=>Object(W.jsx)(kX,{children:e}),featuresettinglink:e=>Object(W.jsx)(lY,{onClick:p,children:e})})});break;case _X.NotSupported:u({title:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.notSupported.title"}),body:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.notSupported.body"},{b:e=>Object(W.jsx)(kX,{children:e}),planupgradelink:e=>Object(W.jsx)(cY,{onClick:p,children:e})})});break;case _X.V1OrgUnavailable:u({title:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.v1OrgUnavailable.title"}),body:t.formatMessage({id:"chat.channelList.cannotOpenChannelDialog.v1OrgUnavailable.body"},{b:e=>Object(W.jsx)(kX,{children:e}),contactsaleslink:e=>Object(W.jsx)(dY,{onClick:p,children:e})})})}},[o,p,s,t,u,d])},TX=r.default.div.withConfig({displayName:"useChannelListTableProps__UserCount",componentId:"axx25z-0"})(["display:flex;flex-direction:row;align-items:center;color:",";svg{margin-right:4px;}b{","}"],({$color:e=Object(o.cssVariables)("neutral-10")})=>e,o.Subtitles["subtitle-01"]),SX=r.default.div.withConfig({displayName:"useChannelListTableProps__ChannelNameGrid",componentId:"axx25z-1"})(["display:grid;grid-template-areas:'avatar name' 'avatar url';grid-template-rows:auto auto;grid-template-columns:auto 1fr;grid-column-gap:12px;align-items:center;max-width:100%;"]),EX=r.default.div.withConfig({displayName:"useChannelListTableProps__ChannelName",componentId:"axx25z-2"})(["display:flex;grid-area:name;min-width:0;color:",";> span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"],Object(o.cssVariables)("neutral-10")),IX=Object(r.default)(o.Link).withConfig({displayName:"useChannelListTableProps__ChannelNameLink",componentId:"axx25z-3"})(["width:100%;margin-top:-12px;margin-bottom:-12px;padding-top:12px;padding-bottom:12px;&:hover{text-decoration:none;","{transition:0.2s ",";color:",";text-decoration:underline;}}&:not(:active):focus{box-shadow:inset 0 0 0 2px ",";}"],EX,o.transitionDefault,Object(o.cssVariables)("purple-7"),Object(o.cssVariables)("purple-7")),MX=r.default.div.withConfig({displayName:"useChannelListTableProps__ChannelUrl",componentId:"axx25z-4"})(["grid-area:url;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Typography["caption-01"]);var DX=Object(r.default)("span").withConfig({displayName:"useChannelListTableProps___StyledSpan",componentId:"axx25z-5"})(["word-break:keep-all;"]);const AX=({timestampInMilliseconds:e})=>{const t=Object(a.useMemo)(()=>c()(e),[e]),n=Object(a.useMemo)(()=>{const e=t.format(f.y),n=e.split(/\s(at .*)/);if(n.length<2)return e;const[a,i]=n;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("span",{children:[a," "]}),Object(W.jsx)(DX,{children:i})]})},[t]);return Object(W.jsx)("time",{dateTime:t.toISOString(),children:n})};var NX=Object(r.default)("div").withConfig({displayName:"useChannelListTableProps___StyledDiv",componentId:"axx25z-6"})(["width:100%;min-width:0;"]);const RX=({children:e})=>{const[t,n]=Object(a.useState)(),i=Object(P.S)(e=>{n(e.contentRect.width)});return Object(W.jsx)(NX,{ref:i,children:Object(W.jsx)(o.Tag,{maxWidth:t,children:e})})};var PX=Object(r.default)(o.Avatar).withConfig({displayName:"useChannelListTableProps___StyledAvatar",componentId:"axx25z-7"})(["grid-area:avatar;"]),LX=Object(r.default)(LJ).withConfig({displayName:"useChannelListTableProps___StyledFreezeIcon",componentId:"axx25z-8"})(["position:relative;top:-2px;height:20px;vertical-align:top;margin-left:2px;"]);const FX=({channelType:e,onChannelClick:t,selectedChannels:n,onSelectedChannelsChange:i,dataSource:s,isLoading:l})=>{const c=Object(E.a)(),d=Object(P.c)(),u=(()=>{const{isPermitted:e}=Object(P.h)();return e(["application.channels.openChannel.all"])})(),p=(()=>{const{isPermitted:e}=Object(P.h)();return e(["application.channels.groupChannel.all"])})(),g="group_channels"===e,h=g?p:u,{maxTotalParticipants:m}=nY(),b=wX(e),{editChannel:j,editChannelMetadata:y,sendAdminMessage:O,deleteChannels:v}=GJ(),x=Object(a.useMemo)(()=>{const e={label:c.formatMessage({id:"chat.channelList.list.bulkAction.editChannel"}),icon:"edit",onClick:()=>j(n[0])},t={label:c.formatMessage({id:"chat.channelList.list.bulkAction.editChannelMetadata"}),icon:"metadata",onClick:()=>y(n[0])},a={label:c.formatMessage({id:"chat.channelList.list.bulkAction.sendAdminMessage"}),icon:"admin-message",onClick:()=>O(n)},i={label:c.formatMessage({id:"chat.channelList.list.bulkAction.deleteChannels"}),icon:"delete",onClick:()=>v(n)};return n.length>1?[a,i]:[e,t,a,i]},[v,j,y,c,n,O]),_=WK(),C=Object(a.useMemo)(()=>[{dataIndex:"name",title:c.formatMessage({id:"chat.channelList.list.column.name"}),render:n=>{const{cover_url:a,channel_url:i,name:s,freeze:r,custom_type:l}=n;return Object(W.jsx)(IX,{href:`/${d}/${e}/${i}`,onClick:e=>{e.preventDefault(),b({onSuccess:()=>t({url:i,customType:l})})},children:Object(W.jsxs)(SX,{children:[Object(W.jsx)(PX,{type:o.AvatarType.Channel,imageUrl:a,profileID:i,size:32}),Object(W.jsxs)(EX,{children:[Object(W.jsx)("span",{children:s||c.formatMessage({id:"chat.channelList.emptyChannelNamePlaceholder"})})," ",r&&Object(W.jsx)(LX,{})]}),Object(W.jsx)(MX,{children:i})]})})},styles:Object(r.css)(["margin-left:4px;"])},g?{dataIndex:"member_count",title:c.formatMessage({id:"chat.channelList.list.column.memberCount"}),titleTooltip:{content:Object(W.jsx)(XK,{})},render:e=>{const{member_count:t,is_super:n}=e,a=n?YK:Object(o.cssVariables)("neutral-10"),i=_(e);return Object(W.jsxs)(TX,{$color:a,children:[Object(W.jsx)(UJ,{isSupergroup:n,size:16}),Object(W.jsxs)("span",{children:[Object(W.jsx)("b",{children:c.formatNumber(t)})," ",i&&Object(W.jsxs)(W.Fragment,{children:["/ ",c.formatNumber(i)]})]})]})},styles:Object(r.css)(["width:8.38%;min-width:122px;flex:none;"])}:{dataIndex:"participant_count",title:c.formatMessage({id:"chat.channelList.list.column.participantCount"}),render:({participant_count:e})=>Object(W.jsxs)(TX,{children:[Object(W.jsx)(UJ,{size:16,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsxs)("span",{children:[Object(W.jsx)("b",{children:c.formatNumber(e)})," ",m&&Object(W.jsxs)(W.Fragment,{children:["/ ",c.formatNumber(m)]})]})]}),width:"10.67%"},(()=>{const e=g?"13.41%":"15.24%";return{dataIndex:"custom_type",title:c.formatMessage({id:"chat.channelList.list.column.customType"}),render:e=>e.custom_type?Object(W.jsx)(RX,{children:e.custom_type}):f.Z,width:e}})(),g&&{key:"last_message_at",title:c.formatMessage({id:"chat.channelList.list.column.lastMessageAt"}),render:e=>{var t;const n=null==(t=e.last_message)?void 0:t.created_at;return n?Object(W.jsx)(AX,{timestampInMilliseconds:n}):f.Z},width:"12.2%"},{dataIndex:"created_at",title:c.formatMessage({id:"chat.channelList.list.column.createdAt"}),render:({created_at:e})=>Object(W.jsx)(AX,{timestampInMilliseconds:1e3*e}),styles:Object(r.css)(["padding-right:48px;"]),width:g?"calc(12.2% + 48px)":"21.95%"}].filter(e=>!!e),[d,e,b,_,c,g,m,t]),k=cX();return{rowKey:"channel_url",showScrollbars:!0,rowSelection:h?{selectedRowKeys:n.map(e=>e.channel_url),onChange:(e,t)=>{i(t)},getCheckboxProps:()=>({onClick:e=>e.stopPropagation()})}:void 0,columns:C,dataSource:s,loading:l,rowActions:h?e=>[Object(W.jsx)(o.OverflowMenu,{items:[{label:c.formatMessage({id:"chat.channelList.list.rowAction.editChannel"}),onClick:()=>j(e)},{label:c.formatMessage({id:"chat.channelList.list.rowAction.editChannelMetadata"}),onClick:()=>y(e)},{label:c.formatMessage({id:"chat.channelList.list.rowAction.sendAdminMessage"}),onClick:()=>O([e])},{label:c.formatMessage({id:"chat.channelList.list.rowAction.deleteChannel"}),onClick:()=>v([e])}],stopClickEventPropagation:!0,popperProps:{positionFixed:!0,modifiers:{flip:{boundariesElement:"window"},preventOverflow:{boundariesElement:"window"}}}},"menu")]:void 0,emptyView:k,batchActions:x}},UX={open_channels:{[_X.NotSupported]:"chat.openChannels.list.featureAlert.notSupported",[_X.FeatureOff]:"chat.openChannels.list.featureAlert.featureOff",[_X.V1OrgUnavailable]:"chat.openChannels.list.featureAlert.v1OrgUnavailable"},group_channels:{[_X.NotSupported]:"chat.groupChannels.list.featureAlert.notSupported",[_X.FeatureOff]:"chat.groupChannels.list.featureAlert.featureOff",[_X.V1OrgUnavailable]:"chat.groupChannels.list.featureAlert.v1OrgUnavailable"}},$X=r.default.b.withConfig({displayName:"useFeatureAlert__Bold",componentId:"fi6iq4-0"})(["font-weight:600;"]),BX=e=>{const t=Object(E.a)(),n=CX(e);return Object(a.useMemo)(()=>{const a={b:e=>Object(W.jsx)($X,{children:e}),featuresettinglink:e=>Object(W.jsx)(lY,{children:e}),planupgradelink:e=>Object(W.jsx)(cY,{children:e}),contactsaleslink:e=>Object(W.jsx)(dY,{children:e})};switch(n){case _X.NotSupported:case _X.FeatureOff:case _X.V1OrgUnavailable:return i=t.formatMessage({id:UX[e][n]},a),Object(W.jsx)(o.InlineNotification,{message:i,type:"info"});default:return null}var i},[e,n,t])};var VX;!function(e){e.Show="True",e.DoNotShow="False"}(VX||(VX={}));const zX={nickname:void 0,userId:void 0,url:void 0,customType:void 0,name:void 0,nameStartswith:void 0,membersIncludeIn:void 0},HX=r.default.b.withConfig({displayName:"GroupChannelList__Bold",componentId:"ckxtsw-0"})(["font-weight:600;"]),qX=r.default.div.withConfig({displayName:"GroupChannelList__Filter",componentId:"ckxtsw-1"})(["display:flex;flex-direction:row;"]);var GX=Object(r.default)(o.Button).withConfig({displayName:"GroupChannelList___StyledButton",componentId:"ckxtsw-2"})(["margin-left:8px;"]),WX=Object(r.default)(V.Sb.Description).withConfig({displayName:"GroupChannelList___StyledPageHeaderDescription",componentId:"ckxtsw-3"})(["> * + *{margin-top:16px;}"]),KX=Object(r.default)(o.Dropdown).withConfig({displayName:"GroupChannelList___StyledDropdown",componentId:"ckxtsw-4"})(["margin-left:4px;"]),YX=Object(r.default)(V.Jb).withConfig({displayName:"GroupChannelList___StyledLoadMoreTable",componentId:"ckxtsw-5"})(["min-width:0;"]);const QX=()=>{const e=Object(E.a)(),{isPermitted:t}=Object(P.h)(),{sdkUser:n,isFetched:i}=Object(P.l)(),s=Object(b.f)(),l=Object(P.W)(),{selectedChannels:c,channels:d,search:u,isFetching:p,isFetchingLoadMore:g,next:h}=qJ(),m=Object(b.g)(e=>e.groupChannels.showEmptyChannels),{setSelectedChannels:y,fetchChannels:O,handleSearchClear:v,handleSearchQueryChange:x,handleSearchOptionChange:_,loadMoreChannels:C,navigateToChannel:k,setSearchState:w,searchChannels:T,setSearchSuccess:S}=GJ(),I=FX({channelType:"group_channels",onChannelClick:k,selectedChannels:c,onSelectedChannelsChange:y,dataSource:d,isLoading:p}),{nickname:M,userId:D,url:N,customType:R,name:L,nameStartswith:F,membersIncludeIn:U,updateParams:$,clearParams:z}=Object(B.a)(zX),H=Object(a.useMemo)(()=>{const[e,t]=[[f.lb.urlEquals,N],[f.lb.customTypeEquals,R],[f.lb.nameEquals,L],[f.lb.nameStartswith,F],[f.lb.userIdEquals,D],[f.lb.nicknameEquals,M],[f.lb.membersIncludeIn,U]].find(([,e])=>e)||[null,null];return e&&t?{option:e,query:t}:null},[R,U,L,F,M,N,D]);Object(a.useEffect)(()=>{H?T({...H,init:!0}):(O(),S(!1))},[H,O,T,m,S]);const q=Object(a.useRef)(lX.find(e=>e.key===(null==H?void 0:H.option))||lX[0]),G=Object(a.useCallback)(()=>{null!=n&&l({dialogTypes:A.a.CreateGroupChannel,dialogProps:{sdkUser:n,onSuccess:e=>{k({url:e.url,customType:e.customType}),O()}}})},[O,k,n,l]),K=CX("group_channels"),Y=null==n,Q=Object(a.useMemo)(()=>{const n=t(["application.channels.groupChannel.all"]),a=!n||K!==_X.Available||Y,s={b:e=>Object(W.jsx)(HX,{children:e}),planupgradelink:e=>Object(W.jsx)(cY,{alertType:"dialog",children:e}),contactsaleslink:e=>Object(W.jsx)(dY,{alertType:"dialog",children:e}),featuresettinglink:e=>Object(W.jsx)(lY,{alertType:"dialog",children:e})},r=(()=>{if(!a)return null;switch(K){case _X.NotSupported:return e.formatMessage({id:"chat.groupChannels.list.btn.createChannel.disabled.tooltip.notSupported"},s);case _X.V1OrgUnavailable:return e.formatMessage({id:"chat.groupChannels.list.btn.createChannel.disabled.tooltip.v1OrgUnavailable"},s)}return n?K===_X.FeatureOff?e.formatMessage({id:"chat.groupChannels.list.btn.createChannel.disabled.tooltip.featureOff"},s):i&&Y?e.formatMessage({id:"chat.channelList.list.tooltip.moderatorRequiredToCreateGroupChannel"}):null:e.formatMessage({id:"chat.channelList.btn.createChannel.disabled.tooltip.notPermitted"})})();return Object(W.jsxs)(W.Fragment,{children:[K===_X.Available&&Object(W.jsx)(DQ,{}),Object(W.jsx)(o.ContextualHelp,{content:r,placement:"bottom-end",trigger:a&&r?o.TooltipTrigger.Hover:o.TooltipTrigger.Manual,tooltipContentStyle:"max-width: 256px;",children:Object(W.jsx)(GX,{buttonType:"primary",icon:"plus",size:"small",disabled:a,onClick:G,children:e.formatMessage({id:"chat.channelList.btn.createChannel"})})})]})},[K,e,t,i,Y,G]),J=BX("group_channels");return Object(W.jsxs)(V.hc,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"chat.groupChannels.title"})}),Object(W.jsx)(V.Sb.Actions,{children:Q}),Object(W.jsxs)(WX,{children:[Object(W.jsx)("p",{children:e.formatMessage({id:"chat.groupChannels.list.description"})}),J]})]}),Object(W.jsxs)(qX,{children:[Object(W.jsx)(V.ac,{styles:{SearchInput:Object(r.css)(["width:450px;height:32px;@media (max-width:1440px){width:400px;}@media (max-width:1200px){width:300px;}"])},isFetching:p,value:u.query,defaultOption:q.current,options:lX,handleFocus:()=>{w(!0)},handleBlur:()=>{""===u.query&&(u.isSuccess&&O(),w(!1))},handleDocumentClick:e=>{e&&""===u.query&&u.isSearching&&w(!1)},handleSearchClear:()=>{v(),z()},handleChange:x,handleSubmit:(e,{key:t})=>{switch(t){case f.lb.urlEquals:$({...zX,url:e});break;case f.lb.customTypeEquals:$({...zX,customType:e});break;case f.lb.nameEquals:$({...zX,name:e});break;case f.lb.nameStartswith:$({...zX,nameStartswith:e});break;case f.lb.userIdEquals:$({...zX,userId:e});break;case f.lb.nicknameEquals:$({...zX,nickname:e});break;case f.lb.membersIncludeIn:$({...zX,membersIncludeIn:e});break;default:return}},handleOptionChange:_}),Object(W.jsx)(KX,{size:"small",selectedItem:m?VX.Show:VX.DoNotShow,items:[VX.Show,VX.DoNotShow],itemToString:t=>t===VX.Show?e.formatMessage({id:"chat.groupChannels.list.channelFilter.allChannels"}):e.formatMessage({id:"chat.groupChannels.list.channelFilter.channelsWithMessagesOnly"}),onChange:e=>{null!=e&&s(j.a.setGroupChannelShowEmptyChannels(e===VX.Show))}})]}),Object(W.jsx)(YX,{...I,hasNext:!!h,loadMoreButtonProps:{isLoading:g,onClick:C}})]})},JX=r.default.div.withConfig({displayName:"GroupChannels__StyledModerationTools",componentId:"p3mh7-0"})(["display:flex;min-width:960px;height:100%;"]);var XX=Object(a.memo)(({message:e,isModeratorInfoInAdminMessage:t,isConnected:n=!0,...i})=>{const{deleteMessage:s,editMessage:r,deleteMessageAndMuteSender:o}=i,{showDataInformation:l}=i,{isPermitted:c}=Object(P.h)(),d=Object(P.J)(),u=c(["application.channels.openChannel.all"])&&n,p=Object(a.useMemo)(()=>Ur(e),[e]);return Object(W.jsx)(Ar,{isEditable:u,message:p,deleteMessage:s,editMessage:r,deleteMessageAndMuteSender:o,showDataInformation:l,messageMenus:[(e=>e.isUserMessage()?H.MessageType.user:e.isFileMessage()?H.MessageType.file:H.MessageType.admin)(e)===H.MessageType.admin&&t&&e.data&&Tr.showDataInformation,Tr.edit,Tr.delete].filter(e=>Boolean(e)),showDeleteAndMuteAction:d})});const ZX={toggleOpenChannelScrollLock:j.a.toggleOpenChannelScrollLock,fetchModeratorInfoADMMRequest:j.c.fetchModeratorInfoADMMRequest};class eZ extends a.Component{constructor(...e){super(...e),this.scrollBar=Object(a.createRef)(),this.messageContainerRef=Object(a.createRef)(),this.getNextMessagesSuccessCallback=null,this.handleScroll=()=>{if(!this.scrollBar.current)return;const{scrollLock:e}=this.props,t=this.scrollBar.current.scrollTop+this.scrollBar.current.clientHeight,n=this.scrollBar.current.scrollHeight;if(n-t>10&&!e?this.props.toggleOpenChannelScrollLock(!0):n-t==0&&e&&this.props.toggleOpenChannelScrollLock(!1),0!==this.scrollBar.current.scrollTop)this.scrollBar.current.scrollTop===this.scrollBar.current.scrollHeight-this.scrollBar.current.clientHeight&&setTimeout(()=>{const e=this.props.messages[this.props.messages.length-1].messageId,t=this.messageContainerRef.current&&this.messageContainerRef.current.querySelector(`[data-message-id="${e}"]`);this.getNextMessagesSuccessCallback=()=>{t&&t.scrollIntoView(!1)},this.props.getNextMessages()},0);else{const e=this.props.messages.length>0?this.props.messages[0].messageId:void 0;this.props.fetchPrevMessages(t=>{if(0===t||void 0===e)return;const n=document.querySelector(`[data-message-id="${e}"]`);n&&(n.scrollIntoView(),this.scrollBar.current&&this.scrollBar.current.scrollBy(0,-33))})}},this.renderMessages=()=>{const{messages:e,editMessage:t,deleteMessage:n,deleteMessageAndMuteSender:a}=this.props;let i;const s=[];return e.forEach((e,r)=>{i?i&&i.createdAt&&e.createdAt&&Object(H.shouldRenderDateLine)({previousDate:i.createdAt,nextDate:e.createdAt})&&s.push(Object(W.jsx)(Vr,{timestamp:e.createdAt},`dateline_${r}`)):s.push(Object(W.jsx)(Vr,{timestamp:e.createdAt},`dateline_${r}`)),i=e,Object(H.isEmpty)(e)||s.push(Object(W.jsx)(XX,{editMessage:t,deleteMessage:n,deleteMessageAndMuteSender:a,showDataInformation:this.props.showDataInformation,message:e,isModeratorInfoInAdminMessage:this.props.isModeratorInfoInAdminMessage,isConnected:this.props.isConnected},`open_channel_message_${e.messageId}_${e.createdAt?e.createdAt:Object(H.uuid)()}`))}),s}}shouldComponentUpdate(e){return this.props.messages!==e.messages||this.props.scrollLock!==e.scrollLock||this.props.isModeratorInfoInAdminMessage!==e.isModeratorInfoInAdminMessage||this.props.isConnected!==e.isConnected}componentDidMount(){this.props.fetchModeratorInfoADMMRequest()}componentDidUpdate(e){e.messages!==this.props.messages&&this.getNextMessagesSuccessCallback&&(this.getNextMessagesSuccessCallback(),this.getNextMessagesSuccessCallback=null)}scrollToBottom(){this.scrollBar.current&&this.scrollBar.current.scrollToBottom()}render(){return Object(W.jsx)(o.ScrollBar,{ref:this.scrollBar,onScroll:this.handleScroll,children:Object(W.jsx)("div",{ref:this.messageContainerRef,children:this.renderMessages()})})}}const tZ=Object(b.d)(e=>({messages:e.openChannels.messages,isModeratorInfoInAdminMessage:e.settings.isModeratorInfoInAdminMessage,isConnected:e.sendbird.isConnected,scrollLock:e.openChannels.scrollLock}),ZX,null,{forwardRef:!0})(eZ),nZ=r.default.div.withConfig({displayName:"OpenChannelChat__ScrollElementWrapper",componentId:"sc-1sha2yc-0"})(["position:relative;flex:1;min-height:0;"]);var aZ=Object(r.default)(OK).withConfig({displayName:"OpenChannelChat___StyledMTChat",componentId:"sc-1sha2yc-1"})(["",""],e=>e._css),iZ=Object(r.default)(eJ).withConfig({displayName:"OpenChannelChat___StyledChatInput",componentId:"sc-1sha2yc-2"})(["margin:16px;margin-top:0;flex:none;"]);var sZ=({channel:e,zoomLevel:t})=>{const{channel_url:n}=e,i=Object(s.k)(),r=Object(E.a)(),l=Object(P.c)(),c=Object(b.f)(),d=Object(P.W)(),{isConnected:u,isEntered:p,isFetchingMessages:g,messages:h,preservedMessages:m,scrollLock:y}=Object(P.V)(e=>({isConnected:e.sendbird.isConnected,isEntered:e.openChannels.isEntered,isFetchingMessages:e.openChannels.isFetchingMessages,messages:e.openChannels.messages,preservedMessages:e.openChannels.preservedMessages,scrollLock:e.openChannels.scrollLock})),{loadSdkChannel:O,status:v,channel:x,error:_}=HK({channelUrl:n,channelType:"open_channels"});Object(a.useEffect)(()=>{O()},[O]),Object(P.s)(_);const{sdkUser:C}=Object(P.l)(),[k,w]=Object(a.useState)(0),[T,S]=Object(a.useState)(!1),I=Object(a.useRef)(),M=Object(a.useRef)(null),D=Object(P.L)(y),N=Object(P.L)(k);Object(a.useLayoutEffect)(()=>{y?S(!1):w(0)},[y]),Object(a.useEffect)(()=>{I.current&&(I.current(),I.current=void 0)},[h]);const R=Object(a.useCallback)(e=>{var t;y&&!e||(null==(t=M.current)||t.scrollToBottom())},[y]),L=Object(a.useCallback)(({newMessages:e,newPreservedMessages:t,types:n})=>{switch(n){case f.Ob.INITIAL:return c(j.a.updateOpenChannelsMessages({messages:e,preservedMessages:[]})),void(I.current=()=>R(!0));case f.Ob.PREV:{const t=e.concat(h),n=t.slice(0,f.tb);if(t.length>f.tb){let e=t.slice(f.tb,t.length);return e=e.concat(m),void c(j.a.updateOpenChannelsMessages({messages:n,preservedMessages:e}))}return void c(j.a.updateOpenChannelsMessages({messages:n}))}case f.Ob.NEXT:{const n=h.concat(e).slice(e.length);return void c(j.a.updateOpenChannelsMessages({messages:n,preservedMessages:t}))}case f.Ob.SENT:case f.Ob.RECEIVED:{if(n===f.Ob.SENT||"admin"===e[0].messageType){let t=h.concat(m).concat(e);return t.length>f.tb&&(t=t.slice(t.length-f.tb)),c(j.a.updateOpenChannelsMessages({messages:t,preservedMessages:[]})),void R(!0)}let t=h,a=void 0;return y?a=m.concat(e):(t=h.concat(m.concat(e)),a=[]),t.length>f.tb&&(t=t.slice(t.length-f.tb)),c(j.a.updateOpenChannelsMessages({messages:t,preservedMessages:a})),void R()}default:return}},[c,h,m,y,R]);Object(a.useEffect)(()=>{"fail"===v&&i.goBack()},[i,v]);const F=Object(a.useCallback)((e,t)=>{t?console.log(t):(L({newMessages:e.reverse(),types:f.Ob.INITIAL}),R(!0))},[L,R]),U=Object(P.L)(F),$=Object(a.useCallback)(()=>{if(!x)return;const e=x.createPreviousMessageListQuery();e.limit=50,e.reverse=!0,e.load((e,t)=>{U.current(e,t)})},[U,x]);Object(a.useEffect)(()=>{if("success"===v&&x&&C){(async()=>{try{x.operators.some(e=>e.userId===C.user_id)||await Object(js.updateOperators)({appId:l,channelUrl:n,userIds:[...x.operators.map(e=>e.userId),C.user_id]}),await H.SendbirdPromiseHelper.enterOpenChannel(x),c(j.a.setOpenChannelsIsEntered(!0))}catch(e){o.toast.error({message:Object(mi.b)(e)}),i.goBack()}})().then($)}},[c,v,x,C,$,l,n,i]);const B=Object(P.L)(L);Object(a.useEffect)(()=>{if(!u||!C)return;const e=new window.dashboardSB.ChannelHandler,t=e=>e.isOpenChannel()&&e.url===n;e.onMessageReceived=(e,n)=>{t(e)&&(B.current({newMessages:[n],types:f.Ob.RECEIVED}),D.current&&N.current<=99&&w(e=>e+1))},e.onMessageUpdated=(e,n)=>{t(e)&&c(j.a.updateOpenChannelsMessage(n))},e.onMessageDeleted=(e,n)=>{t(e)&&c(j.a.deleteOpenChannelsMessage(n))},e.onChannelChanged=e=>{if(t(e)){const t=Object(H.convertToJSONObject)(e);t.channel_url=e.url,t.created_at=e.createdAt/1e3,c(j.a.setCurrentOpenChannel(t))}};const a=`openChannelHandler_${n}`;return window.dashboardSB.addChannelHandler(a,e),()=>{window.dashboardSB.removeChannelHandler(a)}},[n,c,u,N,B,D,C]);const V=Object(a.useCallback)(async e=>{if(0===h.length||!x)return;const t=new window.dashboardSB.MessageListParams;t.isInclusive=!1,t.prevResultSize=50,t.nextResultSize=0,t.reverse=!1;try{const n=await x.getMessagesByMessageId(h[0].messageId,t);n.length>0&&B.current({newMessages:n,types:f.Ob.PREV}),e(h.length)}catch(e){}},[h,B,x]),z=Object(a.useCallback)(()=>{const e=m.length;if(e>0){let t,n;e>=50?(t=m.slice(0,50),n=m.slice(50,e)):(t=m,n=[]),L({newMessages:t,newPreservedMessages:n,types:f.Ob.NEXT})}},[m,L]),{sendAdminMessage:q,sendFileMessage:G,sendUserMessage:K}=uJ(),Y=Object(a.useCallback)((e,t)=>{d({dialogTypes:A.a.EditMessage,dialogProps:{message:e,messageType:t,channelType:"open_channels",channelURL:n}})},[n,d]),Q=Object(P.J)(),J=Object(a.useCallback)(e=>{Q?c(j.a.deleteMessageRequest({channelType:"open_channels",channelURL:n,messageId:e})):d({dialogTypes:A.a.DeleteMessage,dialogProps:{multiple:!1,messageId:String(e),channelType:"open_channels",channelURL:n}})},[n,c,Q,d]),X=Object(a.useCallback)(async e=>{if(e.sender&&C)try{await Object(js.deleteMessage)({appId:l,messageId:e.messageId,channelURL:n,channelType:"open_channels"});try{await(null==x?void 0:x.muteUserWithUserId(e.sender.userId,180,`${C.user_id} (${C.nickname})`))}catch(e){if(800220!==e.code)throw e}o.toast.success({message:r.formatMessage({id:"chat.channelDetail.message.noti.deleteAndMuteSuccess"})})}catch(e){o.toast.error({message:Object(mi.b)(e)})}},[l,n,r,x,C]),Z=Object(a.useCallback)(e=>{d({dialogTypes:A.a.ModeratorInformation,dialogProps:{data:e}})},[d]),{isPermitted:ee}=Object(P.h)();return Object(W.jsx)(aZ,{_css:or(t),children:p&&!g&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(za,{}),Object(W.jsxs)(nZ,{children:[Object(W.jsx)(IK,{children:Object(W.jsx)(MK,{count:k,isHidden:0===k||T,onClick:$,onClose:()=>S(!0)})}),e.freeze&&Object(W.jsx)(sJ,{}),Object(W.jsx)(tZ,{ref:e=>{M.current={scrollToBottom:()=>null==e?void 0:e.scrollToBottom()}},editMessage:Y,deleteMessage:J,deleteMessageAndMuteSender:X,showDataInformation:Z,fetchPrevMessages:V,getNextMessages:z},"open_channel_messages"),y&&Object(W.jsx)(aJ,{onClick:$})]}),ee(["application.channels.openChannel.all","application.channels.openChannel.chat","application.channels.groupChannel.all","application.channels.groupChannel.chat"])&&Object(W.jsx)(iZ,{isDisabled:!p||!u||!x,channelType:"open_channels",sendFileMessage:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];e.target.value="",x&&n&&G({file:n,channel:x,onSuccess:e=>{L({newMessages:[e],types:f.Ob.SENT})}})},onSubmit:({message:e,inputOption:t})=>{p&&x&&e.trim()&&("user"===t?K({channel:x,message:e,onSuccess:e=>{L({newMessages:[e],types:f.Ob.SENT})}}):"admin"===t&&q({message:e,channelUrl:n,channelType:"open_channels",onSuccess:()=>{R(!0)}}))}})]})})};const rZ=r.default.div.withConfig({displayName:"ParticipantList__EmptyViewWrapper",componentId:"sc-17z9mdv-0"})(["display:flex;position:absolute;top:48px;right:0;bottom:0;left:0;align-items:center;justify-content:center;overflow:hidden;"]),oZ=Object(r.default)(CQ.c).withConfig({displayName:"ParticipantList__SpinnerFull",componentId:"sc-17z9mdv-1"})(["position:absolute;top:0;left:0;right:0;bottom:0;background:white;"]),lZ=Object(r.default)(o.EmptyState).attrs({size:o.EmptyStateSize.Small}).withConfig({displayName:"ParticipantList__EmptyView",componentId:"sc-17z9mdv-2"})(["padding:32px;"]),cZ={participants:"user",banned:"ban",muted:"mute"},dZ={participants:{body:"chat.channelDetail.sidebar.openChannels.memberList.participants.empty.body",title:"chat.channelDetail.sidebar.openChannels.memberList.participants.empty.title"},muted:{body:"chat.channelDetail.sidebar.openChannels.memberList.muted.empty.body",title:"chat.channelDetail.sidebar.openChannels.memberList.muted.empty.title"},banned:{body:"chat.channelDetail.sidebar.openChannels.memberList.banned.empty.body",title:"chat.channelDetail.sidebar.openChannels.memberList.banned.empty.title"}},uZ={participants:"chat.channelDetail.sidebar.openChannels.memberList.participants.error.failedToLoad.title",banned:"chat.channelDetail.sidebar.openChannels.memberList.banned.error.failedToLoad.title",muted:"chat.channelDetail.sidebar.openChannels.memberList.muted.error.failedToLoad.title"};var pZ=Object(r.default)(o.ScrollBar).withConfig({displayName:"ParticipantList___StyledScrollBar",componentId:"sc-17z9mdv-3"})(["padding:16px;"]),gZ=Object(r.default)(vK).withConfig({displayName:"ParticipantList___StyledMTUsers",componentId:"sc-17z9mdv-4"})(["margin-left:-16px;margin-right:-16px;padding-top:8px;"]);const hZ=({type:e,isLoading:t,hasError:n,hasNext:i,isLoadingMore:s,isLoadMoreFailed:r,items:l,filterItems:c,children:d,handleLoadMore:u,handleReload:p})=>{const g=Object(E.a)(),[h,m]=Object(a.useState)(""),{scrollBarRef:f,spinnerWrapperRef:b}=Object(P.A)({handleLoadMore:u,hasMore:i,isLoadMoreFailed:r}),j=Object(a.useRef)(c);Object(a.useEffect)(()=>{j.current=c});const y=Object(a.useMemo)(()=>l.filter(e=>j.current({item:e,query:h})),[h,l]),O=Object(a.useMemo)(()=>{const n=g.formatMessage({id:uZ[e]}),a=cZ[e];return Object(W.jsx)(CQ.a,{icon:a,title:n,description:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.participants.error.failedToLoad.body"}),onRetry:()=>p(),isRetrying:t,retryButtonLabel:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.error.failedToLoad.btn.retry"})})},[p,g,t,e]),v=Object(a.useMemo)(()=>{if(!(y.length>0))return 0!==l.length&&h?Object(W.jsx)(lZ,{icon:"no-search",title:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.search.empty.title"}),description:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.search.empty.body"},{query:h})}):Object(W.jsx)(lZ,{icon:cZ[e],title:g.formatMessage({id:dZ[e].title}),description:g.formatMessage({id:dZ[e].body})})},[y.length,l.length,h,g,e]),x=Object(a.useMemo)(()=>Object(W.jsx)(CQ.b,{onRetry:u,isRetrying:s,retryButtonLabel:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.error.loadMore.btn.retry"}),children:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.error.loadMore.title"})}),[u,g,s]);return Object(W.jsxs)(pZ,{ref:e=>{var t;f(null!=(t=null==e?void 0:e.node)?t:null)},children:[Object(W.jsx)(o.InputText,{role:"searchbox",size:"small",value:h,onChange:e=>{m(e.target.value.trim())},placeholder:g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.search.input.placeholder"}),icons:h?[{key:"clear",icon:"close",size:"xsmall","aria-label":g.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.search.input.btn.clear"}),onClick:()=>{m("")}}]:void 0}),n?Object(W.jsx)(rZ,{children:O}):t?Object(W.jsx)(oZ,{}):v?Object(W.jsx)(rZ,{children:v}):Object(W.jsxs)(gZ,{children:[y.map(d),i&&(r?x:!h&&Object(W.jsx)(CQ.c,{ref:b}))]})]})},mZ={users:[],isLoading:!0,hasMore:!1,hasError:!1,isLoadingMore:!1,isLoadMoreFailed:!1},fZ=(e,t)=>{switch(t.type){case"RELOAD_START":return{...e,users:[],isLoading:!0,hasMore:!1,isLoadingMore:!1,isLoadMoreFailed:!1,hasError:!t.payload.clearError&&e.hasError};case"RELOAD_SUCCESS":return{...e,isLoading:!1,users:t.payload.users,hasMore:t.payload.hasMore,hasError:!1};case"RELOAD_FAIL":return{...e,isLoading:!1,hasError:!0};case"LOAD_MORE_START":return{...e,isLoadingMore:!0};case"LOAD_MORE_SUCCESS":return{...e,isLoadingMore:!1,users:e.users.concat(t.payload.users),hasMore:t.payload.hasMore,isLoadMoreFailed:!1};case"LOAD_MORE_FAIL":return{...e,isLoadingMore:!1,isLoadMoreFailed:!0};default:return e}},bZ=Object(r.default)(_K).attrs(({$isActive:e})=>({"aria-hidden":!e,"data-test-id":"Participants"})).withConfig({displayName:"OpenChannelInfo__Participants",componentId:"sc-1adraaf-0"})(["display:flex;flex-direction:column;"]),jZ="chat.channelDetail.sidebar.openChannels.memberList.banned",yZ="chat.channelDetail.sidebar.openChannels.memberList.muted",OZ="chat.channelDetail.sidebar.openChannels.memberList.participants";var vZ=Object(r.default)("b").withConfig({displayName:"OpenChannelInfo___StyledB",componentId:"sc-1adraaf-1"})(["font-weight:600;"]);const xZ=()=>{var e,t;const n=Object(E.a)(),i=Object(P.c)(),{sdkUserId:s,channel:r,isConnected:l}=Object(P.V)(e=>{var t;return{sdkUserId:null==(t=e.moderations.sdkUser)?void 0:t.user_id,channel:e.openChannels.current,isConnected:e.sendbird.isConnected}}),{isUsingDynamicPartitioning:c,option:d,maxTotalParticipants:u}=nY(),p=tY(),g=Object(a.useMemo)(()=>{const e=p.find(e=>"multiple_subchannels"===e.key);return null==e?void 0:e.max_channel_participants},[p]),h=Object(a.useRef)(()=>{}),[m,f]=Object(a.useState)(null),b=null!=(e=null==r?void 0:r.channel_url)?e:"",{state:j,loadMore:y,reload:O,countBadge:v,handleUserBanStateChange:x}=$K({channelUrl:b,channelType:"open_channels",pageSize:100}),{state:_,loadMore:C,reload:k,countBadge:w,handleUserMuteStateChange:T}=zK({channelUrl:b,channelType:"open_channels",pageSize:100}),{sdkUser:S}=Object(P.l)(),I=Object(P.L)({reloadBannedUsers:O,handleUserBanStateChange:x,reloadMutedUsers:k,handleUserMuteStateChange:T});Object(a.useEffect)(()=>{if(!b||!l||!S)return;const e=new window.dashboardSB.ChannelHandler,t=e=>e.isOpenChannel()&&e.url===b;e.onUserMuted=e=>{t(e)&&I.current.reloadMutedUsers()},e.onUserBanned=e=>{t(e)&&I.current.reloadBannedUsers()},e.onUserUnmuted=(e,n)=>{t(e)&&I.current.handleUserMuteStateChange(n.userId,!1)},e.onUserUnbanned=(e,n)=>{t(e)&&I.current.handleUserBanStateChange(n.userId,!1)};const n=`openChannelHandler_${b}_users`;return window.dashboardSB.addChannelHandler(n,e),()=>{window.dashboardSB.removeChannelHandler(n)}},[b,l,S,I]);const M=(({url:e,createListQuery:t,limit:n})=>{const i=Object(P.Y)(e=>e.openChannels.isEntered),s=Object(a.useRef)(),r=Object(a.useRef)(void 0),[l,c]=Object(a.useReducer)(fZ,mZ),d=Object(P.L)(t),u=Object(a.useCallback)(async(t=!1)=>{if(!i||!e)return;c({type:"RELOAD_START",payload:{clearError:t}});const a=await(async()=>{if(s.current&&s.current.url===e)return s.current;try{const t=await window.dashboardSB.OpenChannel.getChannel(e);return s.current=t,t}catch(e){return o.toast.error({message:Object(mi.b)(e)}),s.current=void 0,void(r.current=void 0)}})();if(null==a)return void c({type:"RELOAD_FAIL"});const l=d.current(a);n&&(l.limit=n),r.current=l,l.next((e,t)=>{c(t?{type:"RELOAD_FAIL"}:{type:"RELOAD_SUCCESS",payload:{users:e,hasMore:l.hasNext}})})},[i,d,n,e]);Object(a.useEffect)(()=>{u(!0)},[u]);const p=Object(a.useCallback)(()=>{var e;const t=r.current;null!=t&&(c({type:"LOAD_MORE_START"}),null==(e=r.current)||e.next((e,n)=>{c(n?{type:"LOAD_MORE_FAIL"}:{type:"LOAD_MORE_SUCCESS",payload:{users:e,hasMore:t.hasNext}})}))},[]);return Object(a.useMemo)(()=>({state:l,reload:u,loadMore:p}),[p,u,l])})({url:b,createListQuery:e=>e.createParticipantListQuery(),limit:100}),[D,A]=Object(a.useState)(null!=(t=null==r?void 0:r.participant_count)?t:0);Object(a.useEffect)(()=>{h.current(),f(null)},[b]);const{reload:N}=M,R=Object(a.useMemo)(()=>ii()(N,1e3),[N]),L=Object(a.useMemo)(()=>Object(H.debouncePromise)(async()=>{if(b)try{const{data:e}=await Object(js.fetchOpenChannel)({appId:i,channel_url:b});A(e.participant_count)}catch(e){}},1e3),[i,b]);Object(a.useEffect)(()=>{const e=new window.dashboardSB.ChannelHandler,t=(e,t)=>{b===e.url&&(A(e.participantCount),L(),t!==s&&"participants"===m&&R())};return e.onUserEntered=(e,n)=>{t(e,n.userId)},e.onUserExited=(e,n)=>{t(e,n.userId)},window.dashboardSB.addChannelHandler(`user_enter_${b}`,e),()=>{window.dashboardSB.removeChannelHandler(`user_enter_${b}`)}},[m,b,R,s,L]),Object(a.useEffect)(()=>{switch(h.current(),m){case"participants":N(!0);break;case"banned":O();break;case"muted":k();break;default:return}},[O,k,N,m]);const F=Object(a.useMemo)(()=>{if(c&&"number"==typeof u&&D>=.9*u){const e="single_subchannel"===d&&"number"==typeof g?n.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.participants.error.full.singleSubchannel"},{a:e=>Object(W.jsx)(V.yb,{href:`/${i}/settings/channels`,permissions:["application.settings.view","application.settings.all"],variant:o.LinkVariant.Inline,useReactRouter:!0,alertType:"dialog",children:e}),b:e=>Object(W.jsx)(vZ,{children:e})}):n.formatMessage({id:"chat.channelDetail.sidebar.openChannels.memberList.participants.error.full.multipleSubchannels"},{a:e=>Object(W.jsx)(V.yb,{href:"/settings/contact_us?category=technical_issue",permissions:oY.a,variant:o.LinkVariant.Inline,useReactRouter:!0,alertType:"dialog",children:e})});return Object(W.jsx)(LK,{count:D,max:u,error:{icon:"warning",message:e}})}return Object(W.jsx)(LK,{count:D,max:u})},[i,d,n,c,u,g,D]),U=()=>f(null);return Object(W.jsxs)(xK,{children:[Object(W.jsx)(SK,{children:r&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(MY,{channelType:"open_channels",channel:r}),Object(W.jsx)(TK,{onClick:()=>f("participants"),label:n.formatMessage({id:OZ}),badge:F}),Object(W.jsx)(TK,{onClick:()=>f("banned"),label:n.formatMessage({id:jZ}),badge:v}),Object(W.jsx)(TK,{onClick:()=>f("muted"),label:n.formatMessage({id:yZ}),badge:w})]})}),Object(W.jsxs)(bZ,{$isActive:"participants"===m,children:[Object(W.jsx)(NY,{onBackButtonClick:U,badge:F,children:n.formatMessage({id:OZ})}),Object(W.jsx)(hZ,{type:"participants",items:M.state.users,hasError:M.state.hasError,hasNext:M.state.hasMore,isLoading:M.state.isLoading,isLoadingMore:M.state.isLoadingMore,isLoadMoreFailed:M.state.isLoadMoreFailed,handleLoadMore:M.loadMore,handleReload:N,filterItems:({item:e,query:t})=>e.nickname.toLowerCase().includes(t.toLowerCase()),children:e=>{const{userId:t,nickname:n}=e;return Object(W.jsx)(ws,{tag:"li",popupId:`participant-${t}`,popup:Object(W.jsx)(ir,{user:e}),children:({togglePopup:e})=>Object(W.jsx)(BY,{connectionIndicatorType:"online",onClick:e,children:n})},t)}})]}),Object(W.jsxs)(bZ,{$isActive:"banned"===m,children:[Object(W.jsx)(NY,{onBackButtonClick:U,badge:v,children:n.formatMessage({id:jZ})}),Object(W.jsx)(hZ,{type:"banned",items:j.items,hasError:j.hasError,hasNext:!!j.next,isLoading:j.isLoading,isLoadingMore:j.isLoadingMore,isLoadMoreFailed:j.isLoadMoreFailed,handleLoadMore:y,handleReload:O,filterItems:({item:e,query:t})=>e.user.nickname.toLowerCase().includes(t.toLowerCase()),children:xQ({handleUserBanStateChange:x})})]}),Object(W.jsxs)(bZ,{$isActive:"muted"===m,children:[Object(W.jsx)(NY,{onBackButtonClick:U,badge:w,children:n.formatMessage({id:yZ})}),Object(W.jsx)(hZ,{type:"muted",items:_.users,hasError:_.hasError,hasNext:!!_.next,isLoading:_.isLoading,isLoadingMore:_.isLoadingMore,isLoadMoreFailed:_.isLoadMoreFailed,handleLoadMore:C,handleReload:k,filterItems:({item:e,query:t})=>e.nickname.toLowerCase().includes(t.toLowerCase()),children:_Q({handleUserMuteStateChange:T})})]})]})},_Z=r.default.div.withConfig({displayName:"OpenChannelDetail__StyledOpenChannels",componentId:"sc-161o3yy-0"})(["flex:1;min-width:0;"]);var CZ=Object(r.default)(_Z).withConfig({displayName:"OpenChannelDetail___StyledStyledOpenChannels",componentId:"sc-161o3yy-1"})(["",""],e=>e._css);var kZ=({channelUrl:e})=>{const t=Object(P.c)(),n=Object(P.Y)(e=>e.openChannels.current),i=Object(P.Y)(e=>e.openChannels.isFetchingChannel),l=Object(E.a)(),c=Object(b.f)(),{sdkUser:d,isFetched:u}=Object(P.l)(),[p,g]=Object(a.useState)(100),[h,m]=Object(a.useState)(!1),f=Object(s.k)(),y=Object(a.useCallback)(()=>{t?f.push(`/${t}/open_channels`):f.push("/")},[t,f]),O=Object(a.useCallback)(e=>{window.dashboardSB&&"OPEN"===window.dashboardSB.getConnectionState()&&window.dashboardSB.OpenChannel.getChannel(e,(t,n)=>{n?Object(q.a)({error:n,context:{channelUrl:e}}):t.exit((t,n)=>{n?Object(q.a)({error:n,context:{channelUrl:e}}):c(j.a.setOpenChannelsIsEntered(!1))})})},[c]);return Object(a.useEffect)(()=>(d?c(j.a.fetchOpenChannelRequest(e)):u&&(o.toast.warning({message:l.formatMessage({id:"chat.moderationTool.noti.setModeratorInformationFirst"})}),y()),()=>{O(e),c(j.a.resetOpenChannelsModerationData())}),[e,y,c,O,l,u,d]),Object(W.jsx)(ks,{channelType:"open_channels",channelUrl:e,children:Object(W.jsx)(CZ,{_css:h?Object(r.css)(["","{display:none;}","{padding-left:16px;padding-right:16px;}"],xK,OK):void 0,children:null==n?i&&Object(W.jsx)(V.cc,{}):Object(W.jsxs)(jK,{children:[Object(W.jsx)(JW,{channel:n,children:{textZoomButton:Object(W.jsx)(bK,{value:p,onChange:e=>g(e)}),changeLayoutButton:Object(W.jsx)(oK,{isInformationSidebarHidden:h,onChange:m})}}),Object(W.jsxs)(yK,{children:[Object(W.jsx)(xZ,{}),Object(W.jsx)(sZ,{channel:n,zoomLevel:p})]})]})})})};const wZ=()=>{const e=Object(P.c)(),t=Object(b.f)(),[n,i]=Object(a.useState)(!1),[s,r]=Object(a.useState)(null);return[{isLoading:n,error:s},Object(a.useCallback)(async n=>{try{i(!0);const{data:a}=await Object(g$.updateOpenChannelDynamicPartitioningOption)({appId:e,option_type:n});t(j.c.updateApplicationAttributes(a)),r(null)}catch(e){r(e)}finally{i(!1)}},[e,t])]},TZ=r.default.div.attrs({role:"presentation"}).withConfig({displayName:"useSuccessDialog__Spacer",componentId:"sc-1yu40fq-0"})(["flex:1;"]);var SZ=Object(r.default)("p").withConfig({displayName:"useSuccessDialog___StyledP",componentId:"sc-1yu40fq-1"})(["",""],e=>e._css),EZ=Object(r.default)("b").withConfig({displayName:"useSuccessDialog___StyledB",componentId:"sc-1yu40fq-2"})(["font-weight:600;"]),IZ=Object(r.default)(o.Link).withConfig({displayName:"useSuccessDialog___StyledLink",componentId:"sc-1yu40fq-3"})(["font-size:14px;line-height:20px;"]);const MZ=r.default.div.withConfig({displayName:"useConvertDialog__Description",componentId:"sc-8nf0k5-0"})(["white-space:pre-line;"]),DZ=r.default.dl.withConfig({displayName:"useConvertDialog__OptionsDefinitionList",componentId:"sc-8nf0k5-1"})(["margin-top:16px;border:1px solid ",";border-radius:4px;padding:16px;dt{display:flex;flex-direction:row;",";","{margin-left:8px;}}dd{margin-top:4px;color:",";b{font-weight:500;}}dd + dt{margin-top:16px;}"],Object(o.cssVariables)("neutral-3"),o.Headings["heading-01"],o.Lozenge,Object(o.cssVariables)("neutral-7"));var AZ=Object(r.default)("em").withConfig({displayName:"useConvertDialog___StyledEm",componentId:"sc-8nf0k5-2"})(["font-style:normal;color:",";"],e=>e._css);var NZ=n("TFIY"),RZ=Object(r.default)("div").withConfig({displayName:"useFailureDialog___StyledDiv",componentId:"wnzi19-0"})(["white-space:pre-line;"]);const PZ=()=>{const{isUsingDynamicPartitioning:e}=nY(),[{error:t},n]=wZ(),i=TJ(),[r,l]=Object(a.useState)(void 0),[c,d]=Object(a.useState)(e?"completed":"unknown"),u=Object(P.c)(),{startPolling:p,endPolling:g}=(()=>{const e=Object(P.c)(),t=Object(a.useRef)(-1),[{isActive:n,interval:i},s]=Object(a.useState)({isActive:!1,interval:1e3}),r=Object(a.useRef)(()=>{}),o=TJ(),l=n&&o;return Object(a.useEffect)(()=>{if(l)return function n(){const a=()=>{l&&(t.current=window.setTimeout(n,i))};return Object(js.fetchClassicOpenChannelMigrationStatus)({appId:e}).then(({data:{status:e}})=>{a(),r.current(e)}).catch(()=>{a()})}(),()=>{window.clearTimeout(t.current)};window.clearTimeout(t.current)},[e,i,l]),Object(a.useMemo)(()=>({startPolling:(e,t=5e3)=>{r.current=e,s({isActive:!0,interval:t})},endPolling:()=>{s(e=>({...e,isActive:!1}))}}),[])})(),h=(()=>{var e,t,n;const i=Object(E.a)(),s=Object(a.useRef)(),r=tY(),l=null!=(e=null==(t=r.find(e=>"single_subchannel"===e.key))?void 0:t.max_channel_participants)?e:0,c=r.find(e=>"multiple_subchannels"===e.key),d=null!=(n=null==c?void 0:c.max_channel_participants)?n:0,u=c?Math.ceil(c.max_channel_participants/c.max_subchannel_participants):0,p=r.reduce((e,t)=>Math.max(t.max_channel_participants,e),0),g=Object(P.W)({dialogTypes:A.a.Confirm,dialogProps:{title:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.title"}),description:Object(W.jsxs)("div",{children:[Object(W.jsx)(MZ,{children:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.body"},{maxParticipantCount:p,red:e=>Object(W.jsx)(AZ,{_css:Object(o.cssVariables)("red-5"),children:e})})}),Object(W.jsxs)(DZ,{children:[Object(W.jsx)("dt",{children:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.options.single"},{tag:([e])=>Object(W.jsx)(o.Lozenge,{color:"neutral",children:e})})}),Object(W.jsx)("dd",{children:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.options.single.desc"},{maxParticipantCount:l,b:e=>Object(W.jsx)("b",{children:e})})}),Object(W.jsx)("dt",{children:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.options.multiple"})}),Object(W.jsx)("dd",{children:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.options.multiple.desc"},{maxSubchannelCount:u,maxParticipantCount:d,b:e=>Object(W.jsx)("b",{children:e})})})]})]}),confirmText:i.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.convert.btn.confirm"}),onConfirm:async e=>{e(!0),await(null==s.current?void 0:s.current())}}});return Object(a.useCallback)(e=>{s.current=e,g()},[g])})(),m=(()=>{const e=Object(E.a)(),t=Object(P.c)(),n=Object(s.k)();return Object(P.W)({dialogTypes:A.a.Custom,dialogProps:{title:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.success.title"}),body:({close:n})=>Object(W.jsx)(SZ,{_css:o.Body["body-short-01"],children:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.success.description"},{b:e=>Object(W.jsx)(EZ,{children:e}),a:e=>Object(W.jsx)(V.yb,{variant:o.LinkVariant.Inline,useReactRouter:!0,href:`/${t}/settings/channels`,permissions:["application.settings.view","application.settings.all"],onClick:()=>{n()},children:e})})}),positiveButtonProps:{text:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.success.btn.ok"})},isNegativeButtonHidden:!0,renderButtonPrefix:n.location.pathname.includes("/open_channels")?void 0:({close:n})=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(IZ,{onClick:()=>{n()},useReactRouter:!0,href:`/${t}/open_channels`,children:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.success.btn.goToOpenChannels"})}),Object(W.jsx)(TZ,{})]})}})})(),f=(()=>{const e=Object(E.a)(),{isAvailable:t}=Object(NZ.a)(),n=Object(b.f)(),i=Object(a.useRef)(()=>{}),s=Object(P.W)({dialogTypes:A.a.Custom,dialogProps:{title:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.failure.title"}),description:Object(W.jsx)(RZ,{children:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.failure.description"},{a:e=>Object(W.jsx)(V.yb,{useReactRouter:!0,href:`/settings/contact_us${t?"?category=technical_issue":""}`,permissions:oY.a,onClick:()=>{n(j.b.hideDialogsRequest())},children:e})})}),positiveButtonProps:{text:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.failure.btn.retry"}),onClick:()=>{i.current()}},negativeButtonProps:{text:e.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.dialog.failure.btn.close"})}}});return Object(a.useCallback)(e=>{i.current=e,s()},[s])})(),{addLog:y,removeLog:O,isRequestedByCurrentUser:v}=(()=>{const e=Object(P.c)(),{user_id:t}=Object(P.h)().user;return Object(a.useMemo)(()=>({isRequestedByCurrentUser:()=>{try{var n;return(null==(n=H.ClientStorage.getObject("dynamicPartitioningConversionRequests"))?void 0:n[e])===t}catch{return!1}},addLog:()=>{try{H.ClientStorage.upsertObject("dynamicPartitioningConversionRequests",{[e]:t})}catch{H.ClientStorage.setObject("dynamicPartitioningConversionRequests",{[e]:t})}},removeLog:()=>{H.ClientStorage.removeFromObject("dynamicPartitioningConversionRequests",[e])}}),[e,t])})(),x=Object(a.useRef)(null),_=(()=>{const{isPermitted:e}=Object(P.h)();return e(["application.settings.all"])})(),C=Object(a.useCallback)(()=>{O(),m()},[O,m]);Object(a.useEffect)(()=>{e&&v()&&(d("completed"),C())},[v,e,C]),Object(a.useEffect)(()=>{t&&d("failed")},[t]),Object(a.useEffect)(()=>{if(!e&&_&&"unknown"===c&&i)return function(){const t=Object(js.fetchClassicOpenChannelMigrationStatus)({appId:u});x.current=t,t.then(e=>{null!=e&&l(e.data.status)}).catch(()=>{l(e?"DONE":"NOT_STARTED")})}(),()=>{var e;null==(e=x.current)||e.cancel()}},[r,e,c,u,i,_]);const k=Object(a.useCallback)(async()=>{const{data:{status:e}}=await Object(js.startClassicOpenChannelMigration)({appId:u});y(),l(e)},[y,u]);Object(a.useEffect)(()=>{(async()=>{switch(r){case"PENDING":case"PROCESSING":case"SCHEDULED":d("running");break;case"CANCELED":case"FAILED":d("failed");break;case"NOT_STARTED":d("never");break;case"DONE":d("migrationDone")}})()},[r]);return Object(a.useEffect)(()=>{switch(c){case"running":p(l);break;case"migrationDone":g(),n("single_subchannel");break;case"failed":g(),v()&&(O(),f(async()=>{d("retrying"),l(void 0);try{await k()}catch{d("failed")}}))}},[c,g,v,O,k,f,p,n]),{confirmConversion:()=>{h(async()=>{await k()})},conversionState:c}},LZ={single_subchannel:"chat.openChannels.list.dynamicPartitioningOption.singleSubchannel",multiple_subchannels:"chat.openChannels.list.dynamicPartitioningOption.multipleSubchannels",custom:"chat.openChannels.list.dynamicPartitioningOption.custom"},FZ=r.default.div.withConfig({displayName:"DynamicPartitioningOptionTag__Container",componentId:"sc-1obbdy9-0"})(["display:flex;flex-direction:row;> div:first-child > div{line-height:0;}"]),UZ=r.default.div.withConfig({displayName:"DynamicPartitioningOptionTag__ConvertInProgress",componentId:"sc-1obbdy9-1"})(["display:flex;position:relative;top:2px;flex-direction:row;padding-left:16px;padding-inline-start:16px;color:",";",";> * + *{margin-left:8px;}"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]);var $Z=Object(r.default)(rY).withConfig({displayName:"DynamicPartitioningOptionTag___StyledDynamicPartitioningTooltipIcon",componentId:"sc-1obbdy9-2"})(["margin-left:2px;"]);const BZ={url:void 0,customType:void 0,nameContains:void 0};var VZ=Object(r.default)(({className:e,conversionState:t})=>{const n=Object(E.a)(),{option:i,isUsingDynamicPartitioning:s,isLoading:r}=nY(),l=Object(a.useMemo)(()=>{if(r)return null;if(!s)switch(t){case"running":case"migrationDone":case"retrying":return Object(W.jsxs)(UZ,{role:"progressbar",children:[Object(W.jsx)("span",{children:n.formatMessage({id:"chat.openChannels.list.dynamicPartitioningOption.classic.convertInProgress"})}),Object(W.jsx)(o.Spinner,{size:16,stroke:Object(o.cssVariables)("neutral-6")})]});default:return Object(W.jsx)(o.Tag,{children:n.formatMessage({id:"chat.openChannels.list.dynamicPartitioningOption.classic"})})}return s&&i?Object(W.jsx)(o.Tag,{children:n.formatMessage({id:LZ[i]})}):null},[t,i,n,r,s]);return l?Object(W.jsxs)(FZ,{className:e,children:[l,s&&Object(W.jsx)($Z,{})]}):null}).withConfig({displayName:"OpenChannelList___StyledDynamicPartitioningOptionTag",componentId:"q9ju91-0"})(["margin-left:8px;"]),zZ=Object(r.default)(o.Button).withConfig({displayName:"OpenChannelList___StyledButton",componentId:"q9ju91-1"})(["margin-left:8px;"]),HZ=Object(r.default)(V.Sb.Description).withConfig({displayName:"OpenChannelList___StyledPageHeaderDescription",componentId:"q9ju91-2"})(["> * + *{margin-top:16px;}"]),qZ=Object(r.default)(V.Jb).withConfig({displayName:"OpenChannelList___StyledLoadMoreTable",componentId:"q9ju91-3"})(["min-width:0;"]);const GZ=()=>{const e=Object(E.a)(),{isPermitted:t}=Object(P.h)(),{selectedChannels:n,channels:i,search:s,isFetching:l,isFetchingLoadMore:c,next:d}=qJ(),{setSelectedChannels:u,fetchChannels:p,handleSearchClear:g,handleSearchQueryChange:h,handleSearchOptionChange:m,loadMoreChannels:b,navigateToChannel:j,setSearchState:y,searchChannels:O}=GJ(),v=FX({channelType:"open_channels",onChannelClick:j,selectedChannels:n,onSelectedChannelsChange:u,dataSource:i,isLoading:l}),{nameContains:x,url:_,customType:C,updateParams:k,clearParams:w}=Object(B.a)(BZ),T=Object(a.useMemo)(()=>{const[e,t]=[[f.Cb.urlEquals,_],[f.Cb.customTypeEquals,C],[f.Cb.nameContains,x]].find(([,e])=>e)||[null,null];return e&&t?{option:e,query:t}:null},[C,x,_]);Object(a.useEffect)(()=>{T?O({...T,init:!0}):p()},[T,p,O]);const S=Object(a.useRef)(oX.find(e=>e.key===(null==T?void 0:T.option))||oX[0]),I=Object(P.W)(),{isUsingDynamicPartitioning:M}=nY(),D=CX("open_channels"),N=!t(["application.channels.openChannel.all"]),{conversionState:R,confirmConversion:L}=PZ(),F=BX("open_channels");return Object(W.jsxs)(V.hc,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsxs)(V.Sb.Title,{children:[e.formatMessage({id:"chat.openChannels.list.title"}),Object(W.jsx)(VZ,{conversionState:R})]}),Object(W.jsxs)(V.Sb.Actions,{children:[D===_X.Available&&Object(W.jsx)(DQ,{}),Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.channelList.btn.createChannel.disabled.tooltip.notPermitted"}),placement:"bottom-end",trigger:N?o.TooltipTrigger.Hover:o.TooltipTrigger.Manual,tooltipContentStyle:"max-width: 256px;",children:Object(W.jsx)(zZ,{buttonType:"primary",size:"small",icon:"plus",onClick:()=>I({dialogTypes:A.a.CreateOpenChannel}),disabled:N,children:e.formatMessage({id:"chat.channelList.btn.createChannel"})})})]}),Object(W.jsxs)(HZ,{children:[M?Object(W.jsx)("p",{children:e.formatMessage({id:"chat.openChannels.list.description"})}):(()=>{switch(R){case"running":case"migrationDone":case"retrying":return Object(W.jsx)(o.InlineNotification,{type:"info",message:e.formatMessage({id:"chat.openChannels.list.dynamicPartitioningConversion.running.body"})});case"failed":case"never":case"unknown":return Object(W.jsx)(o.InlineNotification,{type:"info",message:e.formatMessage({id:"chat.openChannels.list.dynamicPartitioningConversion.body"},{convert:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,role:"button",onClick:L,children:e}),docs:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"https://sendbird.com/docs/chat/v3/platform-api/guides/open-channel",target:"_blank",iconProps:{icon:"open-in-new",size:16},children:e})})});default:return null}})(),F]})]}),Object(W.jsx)(V.ac,{styles:{SearchInput:Object(r.css)(["width:450px;height:32px;@media (max-width:1440px){width:400px;}@media (max-width:1200px){width:300px;}"])},isFetching:l,value:s.query,defaultOption:S.current,options:oX,handleFocus:()=>{y(!0)},handleBlur:()=>{""===s.query&&(s.isSuccess&&p(),y(!1))},handleDocumentClick:e=>{e&&""===s.query&&s.isSearching&&y(!1)},handleSearchClear:()=>{g(),w()},handleChange:h,handleSubmit:(e,{key:t})=>{switch(t){case f.Cb.urlEquals:k({...BZ,url:e});break;case f.Cb.customTypeEquals:k({...BZ,customType:e});break;case f.Cb.nameContains:k({...BZ,nameContains:e});break;default:return}},handleOptionChange:m}),Object(W.jsx)(qZ,{...v,hasNext:!!d,loadMoreButtonProps:{onClick:b,isLoading:c}})]})},WZ=r.default.div.withConfig({displayName:"OpenChannels__StyledModerationTools",componentId:"lz1s0b-0"})(["display:flex;min-width:960px;height:100%;"]);let KZ;!function(e){e.Scheduled="scheduled",e.Exporting="exporting",e.Merging="merging",e.Completed="completed",e.Failed="failed",e.Expired="expired",e.Cancelled="cancelled"}(KZ||(KZ={}));const YZ={scheduled:KZ.Scheduled,exporting:KZ.Exporting,done:KZ.Completed,failed:KZ.Failed,"no data":KZ.Completed,"size exceeded":KZ.Failed,cancelled:KZ.Cancelled,job_scheduled:KZ.Scheduled,job_export_in_progress:KZ.Exporting,job_merge_in_progress:KZ.Merging,job_completed:KZ.Completed,job_failed:KZ.Failed},QZ=(e,t)=>{if(t){const e=1e3*c()().unix();if(t.expires_at<e)return KZ.Expired}return YZ[e]},JZ={[KZ.Scheduled]:{term:"chat.dataExport.status.scheduled",definition:"chat.dataExport.status.scheduled.definition",longDefinition:"chat.dataExport.status.scheduled.definition.long"},[KZ.Exporting]:{term:"chat.dataExport.status.exporting",definition:"chat.dataExport.status.exporting.definition",longDefinition:"chat.dataExport.status.exporting.definition.long"},[KZ.Merging]:{term:"chat.dataExport.status.merging",definition:"chat.dataExport.status.merging.definition",longDefinition:"chat.dataExport.status.merging.definition.long"},[KZ.Completed]:{term:"chat.dataExport.status.completed",definition:"chat.dataExport.status.completed.definition",longDefinition:"chat.dataExport.status.completed.definition.long"},[KZ.Failed]:{term:"chat.dataExport.status.failed",definition:"chat.dataExport.status.failed.definition",longDefinition:"chat.dataExport.status.failed.definition.long"},[KZ.Expired]:{term:"chat.dataExport.status.expired",definition:"chat.dataExport.status.expired.definition",longDefinition:"chat.dataExport.status.expired.definition.long"},[KZ.Cancelled]:{term:"chat.dataExport.status.cancelled",definition:"chat.dataExport.status.cancelled.definition",longDefinition:"chat.dataExport.status.cancelled.definition.long"}},XZ=()=>{const e=Object(E.a)();return Object(a.useMemo)(()=>Object.entries(JZ).reduce((t,[n,a])=>(t[n]=Object.entries(a).reduce((t,[n,a])=>(t[n]=e.formatMessage({id:a}),t),{}),t),{}),[e])},ZZ={[KZ.Scheduled]:{color:"blue",intlMessageId:"chat.dataExport.status.scheduled"},[KZ.Exporting]:{color:"purple",intlMessageId:"chat.dataExport.status.exporting"},[KZ.Completed]:{color:"green",intlMessageId:"chat.dataExport.status.completed"},[KZ.Failed]:{color:"red",intlMessageId:"chat.dataExport.status.failed"},[KZ.Expired]:{color:"neutral",intlMessageId:"chat.dataExport.status.expired"},[KZ.Cancelled]:{color:"neutral",intlMessageId:"chat.dataExport.status.cancelled"},[KZ.Merging]:{color:"purple",intlMessageId:"chat.dataExport.status.merging"}},e0=({file:e,status:t})=>{const n=Object(E.a)(),a=QZ(t,e),i=XZ();if(a&&ZZ[a]&&i[a]){const{color:e,intlMessageId:t}=ZZ[a],{definition:s}=i[a];return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:s,tooltipContentStyle:Object(r.css)(["max-width:256px;",";"],o.Body["body-short-01"]),placement:"bottom-end",children:Object(W.jsx)(o.Lozenge,{color:e,children:n.formatMessage({id:t})})})}return 7===t?Object(W.jsx)(o.Lozenge,{color:ZZ.cancelled.color,children:ZZ.cancelled.intlMessageId}):Object(W.jsx)(o.Lozenge,{color:"purple",children:"string"==typeof t?t:"Unknown"})};var t0=n("56YH"),n0=n.n(t0);const a0=(e,t)=>n=>t?{...n,isFetchingLoadMore:e}:{...n,isFetching:e,isFetchingLoadMore:e},i0=e=>t=>({...t,isFetchingCurrent:e}),s0=(e="")=>t=>({...t,token:e}),r0=e=>t=>({...t,current:e}),o0={FETCH_DATA_EXPORTS_REQUEST:(e,t)=>n0()([a0(!0,t.token)])(e),FETCH_DATA_EXPORTS_SUCCESS:(e,t)=>{return n0()([a0(!1),(n=t.exported_data,a=t.isLoadMore,e=>a?{...e,items:e.items.concat(n)}:{...e,items:n}),s0(t.next)])(e);var n,a},FETCH_DATA_EXPORTS_FAIL:e=>n0()([a0(!1)])(e),REQUEST_DATA_EXPORT_REQUEST:e=>n0()([a0(!0)])(e),REQUEST_DATA_EXPORT_SUCCESS:e=>n0()([a0(!1)])(e),REQUEST_DATA_EXPORT_FAIL:e=>n0()([a0(!1)])(e),FETCH_CURRENT_DATA_EXPORT_REQUEST:e=>i0(!0)(e),FETCH_CURRENT_DATA_EXPORT_SUCCESS:(e,t)=>n0()([i0(!1),r0(t)])(e),FETCH_CURRENT_DATA_EXPORT_FAIL:e=>i0(!1)(e),UPDATE_DATA_EXPORT:(e,t)=>{var n;return{...e,items:e.items.map(e=>e.request_id===t.request_id?t:e),current:(null==(n=e.current)?void 0:n.request_id)===t.request_id?t:e.current}},SET_DATA_TYPE:(e,t)=>({...e,dataType:t})},l0=(e,t)=>o0[t.type]?o0[t.type](e,t.payload):e,c0={isFetching:!1,isFetchingLoadMore:!1,isFetchingCurrent:!1,items:[],limit:20,token:"",current:null,dataType:"messages"},d0=()=>{const e=Object(E.a)(),t=Object(s.k)(),n=Object(P.c)(),i=(()=>{var e;const t=Object(s.n)("/:appId/data_exports/:requestId");return null==t||null==(e=t.params)?void 0:e.requestId})(),[r,l]=Object(a.useState)(null),[{isFetching:c,isFetchingLoadMore:d,isFetchingCurrent:u,items:p,limit:g,token:h,current:m,dataType:f},b]=Object(a.useReducer)(l0,c0),j=Object(a.useCallback)(async e=>{b({type:"FETCH_DATA_EXPORTS_REQUEST",payload:e});try{const{data:t}=await Object(js.fetchDataExports)(e);b({type:"FETCH_DATA_EXPORTS_SUCCESS",payload:{...t,isLoadMore:!!e.token}})}catch(e){b({type:"FETCH_DATA_EXPORTS_FAIL",payload:""})}},[]),y=Object(a.useCallback)(async(e="")=>{await j({app_id:n,data_type:f,limit:g,token:e})},[n,j,f,g]),O=Object(a.useCallback)(async()=>{y(h)},[y,h]);Object(a.useEffect)(()=>{y()},[y]);const v=Object(a.useCallback)(async({dataType:t,payload:a,onSuccess:i})=>{b({type:"REQUEST_DATA_EXPORT_REQUEST"});try{const{data:s}=await Object(js.requestDataExport)({app_id:n,data_type:t,payload:a});o.toast.success({message:e.formatMessage({id:"chat.dataExport.toast.create"})}),b({type:"REQUEST_DATA_EXPORT_SUCCESS"}),null==i||i(s),await y()}catch(e){b({type:"REQUEST_DATA_EXPORT_FAIL",payload:""}),o.toast.error({message:Object(mi.b)(e)})}},[n,e,y]),x=Object(a.useCallback)(async e=>{if(null==n)return;const t={app_id:n,data_type:f,request_id:e};b({type:"FETCH_CURRENT_DATA_EXPORT_REQUEST",payload:t});try{const{data:e}=await Object(js.fetchDataExport)(t);b({type:"FETCH_CURRENT_DATA_EXPORT_SUCCESS",payload:e})}catch(e){b({type:"FETCH_CURRENT_DATA_EXPORT_FAIL",payload:""})}},[n,f]),_=e=>b({type:"SET_DATA_TYPE",payload:e}),C=Object(a.useCallback)(e=>{b({type:"UPDATE_DATA_EXPORT",payload:e})},[]);return Object(a.useEffect)(()=>{const{state:e}=t.location;i===(null==m?void 0:m.request_id)?"duplicate"===(null==e?void 0:e.historyType)&&l(e):x(i)},[m,i,x,t.location]),Object(a.useMemo)(()=>({isFetching:c,isFetchingLoadMore:d,isFetchingCurrent:u,items:p,limit:g,token:h,current:m,dataType:f,duplicatedFilters:r,actions:{fetchList:y,loadMore:O,create:v,setDataType:_,updateItem:C}}),[c,d,u,p,g,h,m,f,r,y,O,v,C])},u0=Object(a.createContext)({...c0,duplicatedFilters:null,actions:{}}),p0=()=>Object(a.useContext)(u0),g0=["exporting","scheduled"],h0=(e,t)=>{const n=Object(E.a)(),i=Object(a.useRef)(!1),s=Object(a.useRef)({}),r=Object(P.c)();Object(a.useEffect)(()=>()=>{i.current=!0},[]);const{actions:{updateItem:l}}=p0(),c=Object(a.useCallback)(e=>{l(e),"size exceeded"===e.status?o.toast.error({message:n.formatMessage({id:"chat.dataExport.noti.sizeExceeded"}),autoHide:!1,actions:[{label:n.formatMessage({id:"chat.dataExport.noti.btn.ok"}),closeToastOnClick:!0}]}):QZ(e.status,e.file)===KZ.Failed&&o.toast.error({message:n.formatMessage({id:"chat.dataExport.noti.failed"}),autoHide:!1,actions:[{label:n.formatMessage({id:"chat.dataExport.noti.btn.ok"}),closeToastOnClick:!0}]})},[n,l]),d=Object(P.L)(t||c);Object(a.useEffect)(()=>{e.filter(e=>g0.includes(e.status)).filter(e=>!s.current[e.request_id]).forEach(e=>{s.current[e.request_id]=async function t(){var n;if(await(n=3e3,new Promise(e=>{window.setTimeout(()=>{e()},n)})),!i.current)try{const n=await Object(js.fetchDataExport)({app_id:r,data_type:e.data_type,request_id:e.request_id});if(null==n||i.current)return;const{data:a}=n;d.current(a),g0.includes(a.status)?s.current[e.request_id]=t():delete s.current[e.request_id]}catch(n){s.current[e.request_id]=t()}}()})},[r,d,e]),Object(a.useEffect)(()=>()=>{Object.values(s).forEach(e=>{"function"==typeof(null==e?void 0:e.cancel)&&e.cancel()})},[])},m0=Object(r.default)(V.Rb).withConfig({displayName:"dataExportDetail__DetailContainer",componentId:"sc-19lyw5u-0"})(["max-width:1088px;padding-bottom:64px;"," + *{margin-top:24px;}"],V.Sb),f0=r.default.div.withConfig({displayName:"dataExportDetail__Type",componentId:"sc-19lyw5u-1"})(["",""],o.Body["body-short-01"]),b0=r.default.div.withConfig({displayName:"dataExportDetail__StyledDetail",componentId:"sc-19lyw5u-2"})(["border-top:1px solid ",";padding-top:24px;margin-top:24px;& + &{margin-top:16px;}"],Object(o.cssVariables)("neutral-3")),j0=r.default.label.withConfig({displayName:"dataExportDetail__DetailLabel",componentId:"sc-19lyw5u-3"})([""," color:",";"],o.Typography["label-02"],Object(o.cssVariables)("neutral-6")),y0=r.default.ul.withConfig({displayName:"dataExportDetail__DetailContent",componentId:"sc-19lyw5u-4"})([""," list-style:none;margin-top:6px;"],o.Body["body-short-01"]),O0=r.default.li.withConfig({displayName:"dataExportDetail__StyledDetailContentItem",componentId:"sc-19lyw5u-5"})(["display:flex;align-items:center;& + &{margin-top:2px;}span{margin-left:2px;}"]),v0=r.default.div.withConfig({displayName:"dataExportDetail__TextWrapper",componentId:"sc-19lyw5u-6"})([""," color:",";"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),x0=({icon:e,text:t})=>Object(W.jsxs)(O0,{children:[e," ",Object(W.jsx)("span",{children:t})]}),_0=({intlKey:e,itemKey:t,data:n})=>{const a=Object(E.a)();return Object(W.jsxs)(b0,{children:[Object(W.jsxs)(j0,{children:[a.formatMessage({id:e}),` (${n.length})`]}),Object(W.jsx)(y0,{children:n.map(e=>Object(W.jsx)(x0,{icon:t.includes("channel")?Object(W.jsx)(o.Icon,{icon:"link",size:12}):"@",text:e},`detailItem_${t}`))})]})},C0={messages:[{intlKey:"chat.dataExport.detail.type.channelURLs",itemKey:"channel_urls"},{intlKey:"chat.dataExport.detail.type.excludeChannelURLs",itemKey:"exclude_channel_urls"},{intlKey:"chat.dataExport.detail.type.senderIDs",itemKey:"sender_ids"},{intlKey:"chat.dataExport.detail.type.excludeSenderIDs",itemKey:"exclude_sender_ids"}],channels:[{intlKey:"chat.dataExport.detail.type.channelURLs",itemKey:"channel_urls"},{intlKey:"chat.dataExport.detail.type.excludeChannelURLs",itemKey:"exclude_channel_urls"}],users:[{intlKey:"chat.dataExport.detail.type.userIDs",itemKey:"user_ids"}]},k0=()=>{const e=Object(E.a)(),{current:t,isFetchingCurrent:n}=p0();h0(Object(a.useMemo)(()=>t?[t]:[],[t]));const i=Object(a.useCallback)(()=>{null!=t&&t.file&&window.open(t.file.url)},[t]);if(!t)return null;const{request_id:s,status:r,start_ts:l,end_ts:d,data_type:u,format:p,created_at:g,file:h,timezone:m}=t,b=1e3*c()().unix();return Object(W.jsxs)(m0,{children:[n?Object(W.jsx)(o.SpinnerFull,{transparent:!0}):"",Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.BackButton,{href:"../data_exports"}),Object(W.jsxs)(V.Sb.Title,{children:[s,Object(W.jsx)("div",{style:{marginLeft:"8px"},"data-test-id":"Status",children:Object(W.jsx)(e0,{status:r,file:h})})]}),Object(W.jsx)(V.Sb.Actions,{children:h&&h.expires_at>b&&Object(W.jsx)(o.Button,{buttonType:"primary",icon:"download",size:"small",onClick:i,children:e.formatMessage({id:"chat.dataExport.button.download"})})})]}),Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(iy.i,{title:e.formatMessage({id:"chat.dataExport.gridtitle.date"}),titleColumns:4,children:Object(W.jsxs)(v0,{"data-test-id":"DateRange",children:[`${c.a.tz(l,m).format(f.ec)} - ${c.a.tz(d,m).format(f.ec)}`," ","(",m,")"]})}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"chat.dataExport.gridtitle.format"}),titleColumns:4,children:Object(W.jsx)(v0,{"data-test-id":"Format",children:p.toUpperCase()})}),Object(W.jsxs)(iy.i,{title:e.formatMessage({id:"chat.dataExport.gridtitle.type"}),titleColumns:4,gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(f0,{"data-test-id":"DataType",children:hb()(u)}),(j=t,C0[j.data_type].map(({itemKey:e,intlKey:t})=>{var n,a;return(null!=(n=null==(a=j[e])?void 0:a.length)?n:0)>0&&Object(W.jsx)(_0,{intlKey:t,itemKey:e,data:j[e]},`detail_${e}`)}))]}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"chat.dataExport.gridtitle.createdAt"}),titleColumns:4,children:Object(W.jsx)(v0,{"data-test-id":"CreatedAt",children:c()(g).format(f.ec)})})]}),h&&Object(W.jsx)(iy.i,{title:e.formatMessage({id:"chat.dataExport.gridtitle.expiresAt"}),titleColumns:4,children:Object(W.jsx)(v0,{"data-test-id":"ExpiresAt",children:c()(h.expires_at).format(f.ec)})})]});var j},w0=Object(r.default)(V.Rb).withConfig({displayName:"dataExportForm__DataExportFormContainer",componentId:"q1kewl-0"})(["max-width:1088px;padding-bottom:64px;"]),T0=r.default.div.withConfig({displayName:"dataExportForm__DateWrapper",componentId:"q1kewl-1"})(["display:grid;grid-template-columns:1fr 280px;grid-column-gap:8px;ul{width:100%;}.timezoneDropdown{width:100%;}"]),S0=r.default.ul.withConfig({displayName:"dataExportForm__RadioItems",componentId:"q1kewl-2"})(["list-style:none;"]),E0=r.default.li.withConfig({displayName:"dataExportForm__RadioItem",componentId:"q1kewl-3"})(["padding:4px 0;&:first-child{padding-top:0;}> div{justify-content:start;}label{font-weight:500 !important;color:",";}"],Object(o.cssVariables)("neutral-10")),I0=r.default.div.withConfig({displayName:"dataExportForm__OptionsGroup",componentId:"q1kewl-4"})(["& + &{border-top:1px solid ",";padding-top:24px;margin-top:24px;}"],Object(o.cssVariables)("neutral-3")),M0=r.default.label.withConfig({displayName:"dataExportForm__OptionalLabel",componentId:"q1kewl-5"})(["font-size:12px;font-weight:500;color:",";display:flex;align-items:center;margin-bottom:12px;"],Object(o.cssVariables)("neutral-6")),D0=Object(r.default)(V.t).withConfig({displayName:"dataExportForm__ExportTextarea",componentId:"q1kewl-6"})(["min-height:120px;margin-top:8px;color:",";&:focus{color:",";}&::placeholder,&::-webkit-input-placeholder{color:",";}"],Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-6")),A0=r.default.label.withConfig({displayName:"dataExportForm__LabelText",componentId:"q1kewl-7"})(["display:flex;align-items:center;font-size:14px;font-weight:500;line-height:1.43;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),N0=r.default.div.withConfig({displayName:"dataExportForm__Neighboring",componentId:"q1kewl-8"})(["display:flex;align-items:center;margin-top:24px;font-size:14px;font-weight:500;line-height:1.43;letter-spacing:-0.1px;> div{margin:0 0 0 auto;}.neighboringDropdown{width:160px;}"]),R0=r.default.div.withConfig({displayName:"dataExportForm__NeighboringToggle",componentId:"q1kewl-9"})(["font-size:14px;font-weight:500;line-height:20px;margin-left:16px;letter-spacing:0px;text-align:left;white-space:nowrap;text-overflow:ellipsis;flex:1 1 0%;overflow:hidden;"]),P0=[{label:"JSON",value:"json"},{label:"CSV",value:"csv"}],L0=c.a.tz.names(),F0=Intl.DateTimeFormat().resolvedOptions().timeZone,U0=[0,1,2,3,4,5,6,7,8,9,10].map(e=>({label:`${e}`,value:e}));var $0=Object(r.default)(V.Sb).withConfig({displayName:"dataExportForm___StyledPageHeader",componentId:"q1kewl-10"})(["","{margin-top:12px;line-height:20px;letter-spacing:0;color:inherit;font-size:14px;font-weight:500;}& + *{margin-top:24px;}"],e=>e._css);const B0=()=>{var e,t,n,i;const r=Object(E.a)(),l=Object(s.k)(),{isFetching:d,duplicatedFilters:u,actions:{create:p,setDataType:g}}=p0(),[h,m]=Object(a.useState)(""),f=e=>{m(e)},[b,j]=Object(a.useState)(u?{channelURLType:(null!=(e=null==(t=u.exclude_channel_urls)?void 0:t.length)?e:0)>0?"exclude":"include",senderIDType:(null!=(n=null==(i=u.exclude_sender_ids)?void 0:i.length)?n:0)>0?"exclude":"include",timezone:u.timezone||F0,date:o.DateRangePickerValue.Custom,dateRange:{startDate:c()(u.start_ts),endDate:c()(u.end_ts)},neighboringMessageLimit:U0.find(e=>e.value===u.neighboring_message_limit)}:{channelURLType:"include",senderIDType:"include",timezone:F0,date:o.DateRangePickerValue.Last7Days,dateRange:{startDate:c()().subtract(1,"weeks").startOf("day"),endDate:c()().endOf("day")},neighboringMessageLimit:U0[0]}),{channelURLType:y,senderIDType:O,timezone:v,date:x,dateRange:_,neighboringMessageLimit:C}=b,k=e=>{j(t=>({...t,timezone:e}))},w=Object(a.useCallback)(()=>{l.goBack()},[l]),T=Object(o.useForm)({onSubmit:async e=>{const t=e=>c.a.tz(e.format("YYYY-MM-DD"),"YYYY-MM-DD",v),n={format:e.format,timezone:v,start_ts:t(_.startDate).startOf("day").valueOf(),end_ts:t(_.endDate).endOf("day").valueOf()};"messages"===e.data_type&&(n["include"===y?"channel_urls":"exclude_channel_urls"]=e.channel_urls||[],n["include"===O?"sender_ids":"exclude_sender_ids"]=e.sender_ids||[],n.channel_custom_types=e.channel_custom_types||[],e.neighboring_message_limit>0&&(n.neighboring_message_limit=e.neighboring_message_limit),"json"===e.format&&(n.show_read_receipt=e.show_read_receipt)),"channels"===e.data_type&&(n["include"===y?"channel_urls":"exclude_channel_urls"]=e.channel_urls||[],n.channel_custom_types=e.channel_custom_types||[]),"users"===e.data_type&&(n.user_ids=e.user_ids||[]),await p({dataType:e.data_type,payload:n,onSuccess:e=>{g(e.data_type),l.push("../data_exports")}})}}),S=Object(o.useField)("format",T,{defaultValue:"json",isControlled:!0}),I=Object(a.useCallback)(e=>()=>{S.updateValue(e)},[S]),M=Object(a.useMemo)(()=>Object(W.jsx)(iy.i,{title:r.formatMessage({id:"chat.dataExport.gridtitle.format"}),titleColumns:4,children:Object(W.jsx)(S0,{children:P0.map(({label:e,value:t},n)=>Object(W.jsx)(E0,{children:Object(W.jsx)(o.Radio,{name:S.name,checked:S.value===t,label:e,disabled:d,onChange:I(t)})},`${t}_${n}`))})}),[r,S.name,S.value,d,I]),D=Object(o.useField)("data_type",T,{defaultValue:"messages",isControlled:!0}),A=Object(o.useField)("channel_urls",T,{defaultValue:"",isControlled:!0}),N=Object(a.useCallback)(e=>{A.updateValue(e)},[A]),R=Object(o.useField)("channel_custom_types",T,{defaultValue:"",isControlled:!0}),P=Object(a.useCallback)(e=>{R.updateValue(e)},[R]),L=Object(o.useField)("sender_ids",T,{defaultValue:"",isControlled:!0}),F=Object(a.useCallback)(e=>{L.updateValue(e)},[L]),U=Object(o.useField)("user_ids",T,{defaultValue:"",isControlled:!0}),$=Object(a.useCallback)(e=>{U.updateValue(e)},[U]),B=Object(a.useMemo)(()=>Object(W.jsx)(iy.i,{title:r.formatMessage({id:"chat.dataExport.gridtitle.date"}),titleColumns:4,"data-test-id":"DateRangeRow",children:Object(W.jsxs)(T0,{children:[Object(W.jsx)(o.DateRangePicker,{value:x,dateRange:_,onChange:(e,t)=>{if(t){if("messages"===D.value){const e=""===L.value?31:186;if(Math.abs(t.startDate.diff(t.endDate,"days"))>e)return void o.toast.warning({message:`In case of the Messages data type, ${186===e?"Date selection can not exceed 186 days.":"Date selection can not exceed 31 days."}`})}(e=>{j(t=>({...t,date:e}))})(e),(e=>{j(t=>({...t,dateRange:e}))})({startDate:t.startDate,endDate:t.endDate})}},maximumNights:186,fullWidth:!0}),Object(W.jsx)(o.Dropdown,{className:"timezoneDropdown",initialSelectedItem:F0,selectedItem:v,items:L0.filter(e=>!h||e.match(new RegExp(h,"ig"))),size:"medium",useSearch:!0,onItemSelected:k,onSearchChange:f})]})}),[r,x,_,v,D.value,L.value,h]),z=Object(o.useField)("show_read_receipt",T,{defaultValue:!1,isControlled:!0}),H=[{label:r.formatMessage({id:"chat.dataExport.dataType.messages"}),value:"messages"},{label:r.formatMessage({id:"chat.dataExport.dataType.channels"}),value:"channels"},{label:r.formatMessage({id:"chat.dataExport.dataType.users"}),value:"users"}],q=[{label:r.formatMessage({id:"chat.dataExport.form.label.includeChannelURLs"}),value:"include"},{label:r.formatMessage({id:"chat.dataExport.form.label.excludeChannelURLs"}),value:"exclude"}],G=[{label:r.formatMessage({id:"chat.dataExport.form.label.includeSenderIDs"}),value:"include"},{label:r.formatMessage({id:"chat.dataExport.form.label.excludeSenderIDs"}),value:"exclude"}],K=Object(a.useMemo)(()=>Object(W.jsx)(M0,{children:r.formatMessage({id:"chat.dataExport.form.label.optional"})}),[r]);return Object(W.jsxs)(w0,{children:[Object(W.jsxs)($0,{_css:V.Sb.Description,children:[Object(W.jsx)(V.Sb.BackButton,{href:"../data_exports"}),Object(W.jsx)(V.Sb.Title,{children:r.formatMessage({id:"chat.dataExport.form.title"})}),Object(W.jsx)(V.Sb.Description,{children:r.formatMessage({id:"chat.dataExport.form.description"})})]}),Object(W.jsxs)("form",{onSubmit:T.onSubmit,children:[Object(W.jsxs)(iy.j,{children:[B,M,Object(W.jsxs)(iy.i,{title:r.formatMessage({id:"chat.dataExport.gridtitle.type"}),titleColumns:4,gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(I0,{children:Object(W.jsx)(S0,{children:H.map(({label:e,value:t})=>Object(W.jsx)(E0,{children:Object(W.jsx)(o.Radio,{name:D.name,value:t,checked:D.value===t,label:e,disabled:d,onChange:D.onChange})},`dataType_${t}`))})}),("messages"===D.value||"channels"===D.value)&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(I0,{children:[K,Object(W.jsxs)(S0,{children:[q.map(({label:e,value:t})=>Object(W.jsx)(E0,{children:Object(W.jsx)(o.Radio,{name:"channelURLType",checked:y===t,label:e,disabled:d,onChange:()=>(e=>{j(t=>({...t,channelURLType:e}))})(t)})},`channelURLType_${t}`)),Object(W.jsx)(D0,{placeholder:r.formatMessage({id:"chat.dataExport.form.placeholder.channelURLs"}),onChange:N,disabled:d})]})]}),Object(W.jsxs)(I0,{children:[Object(W.jsx)(A0,{children:r.formatMessage({id:"chat.dataExport.form.label.channelCustomTypes"})}),Object(W.jsx)(D0,{placeholder:r.formatMessage({id:"chat.dataExport.form.placeholder.channelCustomTypes"}),onChange:P,disabled:d})]})]}),"messages"===D.value&&Object(W.jsxs)(I0,{children:[Object(W.jsxs)(S0,{children:[G.map(({label:e,value:t})=>Object(W.jsx)(E0,{children:Object(W.jsx)(o.Radio,{name:"senderIDType",checked:O===t,label:e,disabled:d,onChange:()=>(e=>{j(t=>({...t,senderIDType:e}))})(t)})},`senderIDType_${t}`)),Object(W.jsx)(D0,{placeholder:r.formatMessage({id:"chat.dataExport.form.placeholder.senders"}),onChange:F,disabled:d})]}),Object(W.jsxs)(N0,{children:[r.formatMessage({id:"chat.dataExport.form.label.neighboring"}),Object(W.jsx)(o.Dropdown,{className:"neighboringDropdown",selectedItem:C,items:U0,size:"medium",itemToString:e=>e.label,toggleRenderer:({selectedItem:e})=>e&&Object(W.jsx)(R0,{children:`${e.value} message${e.value>1?"s":""}`}),onItemSelected:e=>{j(t=>({...t,neighboringMessageLimit:e}))}})]})]}),"messages"===D.value&&"json"===S.value&&Object(W.jsx)(I0,{children:Object(W.jsx)(o.Checkbox,{name:z.name,checked:z.value,onChange:z.onChange,label:r.formatMessage({id:"chat.dataExport.form.label.showReadReceipt"})})}),"users"===D.value&&Object(W.jsxs)(I0,{children:[K,Object(W.jsx)(A0,{children:r.formatMessage({id:"chat.dataExport.form.label.userIDs"})}),Object(W.jsx)(D0,{placeholder:r.formatMessage({id:"chat.dataExport.form.placeholder.users"}),onChange:$,disabled:d})]})]})]}),Object(W.jsxs)(iy.f,{isVisible:!0,theme:"transparent",children:[Object(W.jsx)(o.Button,{type:"button",buttonType:"tertiary",onClick:w,children:r.formatMessage({id:"chat.dataExport.form.button.cancel"})},"cancel"),Object(W.jsx)(o.Button,{type:"submit",buttonType:"primary",isLoading:d,disabled:d,children:r.formatMessage({id:"chat.dataExport.form.button.request"})},"save")]})]})]})},V0=["done","no data","failed"],z0=["exporting","scheduled"],H0=r.default.a.withConfig({displayName:"dataExportList__RequestIDText",componentId:"sc-3gle0a-0"})(["font-size:14px;letter-spacing:-0.1px;color:",";&:hover{color:",";text-decoration:underline;}",""],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-10"),({status:e})=>V0.includes(e)?Object(r.css)(["font-weight:600;&:hover{font-weight:600;}"]):z0.includes(e)?Object(r.css)(["color:",";"],Object(o.cssVariables)("neutral-6")):void 0),q0=r.default.div.withConfig({displayName:"dataExportList__Detail",componentId:"sc-3gle0a-1"})(["display:grid;grid-template-columns:77px auto;grid-row-gap:4px;"]),G0=r.default.label.withConfig({displayName:"dataExportList__DetailLabel",componentId:"sc-3gle0a-2"})(["font-size:13px;line-height:16px;font-weight:600;color:",";"],Object(o.cssVariables)("neutral-6")),W0=r.default.div.withConfig({displayName:"dataExportList__DetailText",componentId:"sc-3gle0a-3"})(["font-size:14px;line-height:20px;letter-spacing:-0.1px;color:",";"],Object(o.cssVariables)("neutral-10")),K0=r.default.ul.withConfig({displayName:"dataExportList__StatusDefinitionList",componentId:"sc-3gle0a-4"})(["margin:0;margin-left:20px;padding:0;",";li + li{margin-top:4px;}dfn{font-style:initial;font-weight:600;}"],o.Body["body-short-01"]),Y0=({file:e,status:t})=>Object(W.jsx)(e0,{status:t,file:e}),Q0=e=>{const{request_id:t,data_type:n,file:a,format:i,created_at:s,status:r,start_ts:o,end_ts:l,timezone:d}=e,u=1e3*c()().unix();return{request_id:t,created_at:s,status:r,detail:{dataType:n,dateRange:`${c.a.tz(o,d).format(f.A)} - ${c.a.tz(l,d).format(f.A)}`,format:i},file:a,isExpired:!!a&&a.expires_at<u,expiresAt:null==a?void 0:a.expires_at}},J0=["messages","channels","users"];var X0=Object(r.default)(V.hc).withConfig({displayName:"dataExportList___StyledTablePageContainer",componentId:"sc-3gle0a-5"})([""," + *{margin-top:10px;& + *{margin-top:24px;}}"],V.Sb);const Z0=()=>{const e=Object(E.a)(),{isPermitted:t}=Object(P.h)(),n=Object(s.n)(),{isFetching:i,isFetchingLoadMore:r,items:l,token:d,dataType:u,actions:{loadMore:p,setDataType:g}}=p0(),h=(()=>{const e=Object(lh.a)(),t=Object(a.useCallback)((t,n=!1)=>{const a=c()(t);return n&&Math.abs(a.diff(c.a.now(),"days"))<7?e(t):a.format(f.A)},[e]);return Object(a.useCallback)(e=>n=>n[e]?t(n[e],"expiresAt"===e):f.Z,[t])})();h0(l);const m=Object(s.k)(),b=Object(a.useMemo)(()=>l.map(Q0),[l]),j=Object(a.useCallback)(()=>{m.push(`${null==n?void 0:n.url}/request`)},[m,n]),y=Object(a.useCallback)(e=>()=>{m.push(`${null==n?void 0:n.url}/${e}`)},[m,n]),O=Object(a.useCallback)(({request_id:e,status:t})=>Object(W.jsx)(H0,{status:t,onClick:y(e),children:e}),[y]),v=Object(a.useCallback)(t=>{const{file:n,status:a,isExpired:i}=t;return QZ(a,n)===KZ.Failed?Object(W.jsx)(V.yb,{href:"/settings/contact_us?category=technical_issue",useReactRouter:!0,permissions:oY.a,alertType:"dialog",children:e.formatMessage({id:"chat.dataExport.list.link.contactSupportTeam"})}):"no data"===a?Object(W.jsx)(W.Fragment,{children:e.formatMessage({id:"chat.dataExport.list.column.file.noData"})}):null!=n&&n.url&&!i?Object(W.jsx)(o.Button,{buttonType:"secondary",size:"small",icon:"download",onClick:(s=n.url,()=>{window.open(s)}),children:e.formatMessage({id:"chat.dataExport.button.download"})}):"";var s},[e]),x=Object(a.useCallback)(({detail:t})=>{const{dataType:n,dateRange:a,format:i}=t;return Object(W.jsxs)(q0,{children:[Object(W.jsx)(G0,{children:e.formatMessage({id:"chat.dataExport.list.column.details.type"})}),Object(W.jsx)(W0,{children:hb()(n)}),Object(W.jsx)(G0,{children:e.formatMessage({id:"chat.dataExport.list.column.details.date"})}),Object(W.jsx)(W0,{children:a}),Object(W.jsx)(G0,{children:e.formatMessage({id:"chat.dataExport.list.column.details.format"})}),Object(W.jsx)(W0,{children:i.toUpperCase()})]})},[e]),_=XZ(),C=Object(a.useMemo)(()=>[{title:e.formatMessage({id:"chat.dataExport.list.column.requestID"}),dataIndex:"request_id",render:O,styles:"min-width: 72px; max-width: 304px;"},{title:e.formatMessage({id:"chat.dataExport.list.column.details"}),dataIndex:"detail",render:x,styles:"flex: 1;"},{title:e.formatMessage({id:"chat.dataExport.list.column.createdAt"}),dataIndex:"created_at",render:h("created_at"),width:140},{title:e.formatMessage({id:"chat.dataExport.list.column.expiresAt"}),dataIndex:"expiresAt",render:h("expiresAt"),width:140},{title:e.formatMessage({id:"chat.dataExport.list.column.status"}),titleTooltip:{content:Object(W.jsx)(K0,{children:Object.entries(_).map(([e,{term:t,longDefinition:n}])=>Object(W.jsxs)("li",{children:[Object(W.jsx)("dfn",{children:t}),": ",n]},e))}),tooltipWidth:360,placement:"bottom-end"},dataIndex:"status",render:Y0,width:140},{title:"",dataIndex:"file",render:v,width:140}],[e,x,v,O,h,_]);return Object(W.jsxs)(X0,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"chat.dataExport.title"})}),Object(W.jsx)(V.Sb.Actions,{children:t(["application.dataExport.all"])&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",onClick:j,icon:"plus","data-test-id":"de_button_request",children:e.formatMessage({id:"chat.dataExport.list.button.requestData"})})})]}),Object(W.jsx)(V.ec,{tabs:[{label:e.formatMessage({id:"chat.dataExport.dataType.messages"}),value:"messages"},{label:e.formatMessage({id:"chat.dataExport.dataType.channels"}),value:"channels"},{label:e.formatMessage({id:"chat.dataExport.dataType.users"}),value:"users"}],activeTab:J0.indexOf(u),handleTabClick:e=>{g(J0[e])}}),Object(W.jsx)(V.Jb,{columns:C,dataSource:b,showScrollbars:!0,loading:i,rowActions:e=>(t(["application.dataExport.all"])&&e.isExpired,[]),emptyView:Object(W.jsx)(z.a,{icon:"data-export",title:e.formatMessage({id:"chat.dataExport.noResult.header"}),description:e.formatMessage({id:"chat.dataExport.noResult.description"})}),hasNext:!!d,loadMoreButtonProps:{isLoading:r,onClick:p}})]})},e1=Object(r.default)(pe.Link).withConfig({displayName:"components__ButtonLink",componentId:"sc-63v2wf-0"})(["",";color:white;background:",";&:hover{background:",";}"],V.k,Object(o.cssVariables)("purple-7"),Object(sr.rgba)(Object(o.cssColors)("purple-7"),.9)),t1=Object(r.default)(e1).withConfig({displayName:"components__CustomPricingLink",componentId:"sc-63v2wf-1"})(["line-height:30px;"]),n1=r.default.div.withConfig({displayName:"components__InputSupportButton",componentId:"sc-63v2wf-2"})(["position:absolute;top:-2px;right:0;"]),a1=r.default.div.withConfig({displayName:"components__AlertPlanLimited",componentId:"sc-63v2wf-3"})(["display:flex;flex-direction:column;background:white;border-radius:4px;box-shadow:0 1px 3px -1px rgba(0,0,0,0.4);padding:20px 24px;overflow:hidden;"]),i1=(r.default.div.withConfig({displayName:"components__AlertPlanLimitedTitle",componentId:"sc-63v2wf-4"})(["color:",";font-size:15px;font-weight:600;letter-spacing:-0.2px;margin-bottom:5px;"],Object(o.cssVariables)("neutral-10")),r.default.div.withConfig({displayName:"components__AlertPlanLimitedDescription",componentId:"sc-63v2wf-5"})(["color:",";font-size:14px;line-height:1.5;margin-bottom:16px;"],Object(o.cssVariables)("neutral-8"))),s1=r.default.div.withConfig({displayName:"emptyMessage__StyledEmptyMessage",componentId:"le8l0s-0"})(["padding:16px 16px 12px 16px;& + &{border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3")),r1=r.default.div.withConfig({displayName:"emptyMessage__EmptyText",componentId:"le8l0s-1"})(["height:12px;background:",";margin-bottom:8px;&:last-child{margin-bottom:0;}"],Object(o.cssVariables)("neutral-1"));class o1 extends a.Component{shouldComponentUpdate(){return!1}getRandomPercentage(){return Math.floor(91*Math.random()+10)}render(){return Object(W.jsxs)(s1,{children:[Object(W.jsx)("div",{}),Object(W.jsxs)("div",{children:[Object(W.jsx)(r1,{style:{width:`${this.getRandomPercentage()}%`}}),Object(W.jsx)(r1,{style:{width:`${this.getRandomPercentage()}%`}}),Object(W.jsx)(r1,{style:{width:`${this.getRandomPercentage()}%`}}),Object(W.jsx)(r1,{style:{width:`${this.getRandomPercentage()}%`}})]})]})}}const l1=r.default.div.withConfig({displayName:"message__StyledMessage",componentId:"sc-1a1j50r-0"})(["flex:1;"]),c1=r.default.div.withConfig({displayName:"message__MessageChannel",componentId:"sc-1a1j50r-1"})(["font-size:14px;color:",";margin-bottom:6px;"],Object(o.cssVariables)("neutral-5")),d1=r.default.div.withConfig({displayName:"message__MessageWrapper",componentId:"sc-1a1j50r-2"})(["position:relative;padding-left:46px;"]),u1=r.default.div.withConfig({displayName:"message__MessageBlock",componentId:"sc-1a1j50r-3"})(["",";"],e=>e.isRemoved?Object(r.css)(["opacity:0.5;"]):""),p1=r.default.div.withConfig({displayName:"message__MessageProfile",componentId:"sc-1a1j50r-4"})(["position:absolute;left:0;img{width:34px;height:34px;}"]),g1=r.default.div.withConfig({displayName:"message__MessageBody",componentId:"sc-1a1j50r-5"})(["display:flex;align-items:center;"]),h1=r.default.div.withConfig({displayName:"message__MessageText",componentId:"sc-1a1j50r-6"})(["display:inline-block;padding:8px 16px 6px 16px;background:#eceff1;margin-top:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,0.08);word-break:break-all;cursor:text;font-size:15px;line-height:1.5;"]),m1=r.default.div.withConfig({displayName:"message__UserWrapper",componentId:"sc-1a1j50r-7"})(["flex:1;"]),f1=r.default.div.withConfig({displayName:"message__UserName",componentId:"sc-1a1j50r-8"})(["font-size:16px;font-weight:600;color:#3d464d;line-height:1;margin-bottom:4px;"]),b1=r.default.div.withConfig({displayName:"message__Time",componentId:"sc-1a1j50r-9"})(["width:180px;display:flex;justify-content:flex-end;align-items:center;font-size:13px;color:",";",";"],Object(o.cssVariables)("neutral-6"),e=>e.isRemoved?Object(r.css)(["opacity:0.5;"]):""),j1=r.default.div.withConfig({displayName:"message__TimeValue",componentId:"sc-1a1j50r-10"})(["display:inline-block;margin-left:4px;vertical-align:middle;"]),y1=r.default.div.withConfig({displayName:"message__UserId",componentId:"sc-1a1j50r-11"})([""]),O1=r.default.div.withConfig({displayName:"message__UserIdLabel",componentId:"sc-1a1j50r-12"})(["display:inline-block;font-size:11px;color:#8290b5;border:1px solid #e5e5e5;width:50px;height:16px;text-align:center;line-height:1.2;margin-right:8px;border-radius:2px;"]),v1=r.default.div.withConfig({displayName:"message__UserIdText",componentId:"sc-1a1j50r-13"})(["display:inline-block;font-size:15px;color:#8290b5;"]),x1=r.default.div.withConfig({displayName:"message__DeletedMessageAction",componentId:"sc-1a1j50r-14"})(["margin-top:16px;padding-left:44px;"]),_1=r.default.div.withConfig({displayName:"message__DeletedMessageActionButton",componentId:"sc-1a1j50r-15"})(["font-size:13px;color:",";margin-right:20px;display:flex;align-items:center;&:hover,&:focus{cursor:pointer;}"],Object(o.cssVariables)("purple-7")),C1=r.default.span.withConfig({displayName:"message__DeletedMessageActionButtonText",componentId:"sc-1a1j50r-16"})(["margin-left:8px;"]),k1=r.default.div.withConfig({displayName:"message__MessageRow",componentId:"sc-1a1j50r-17"})(["cursor:",";padding:24px;display:flex;align-items:flex-start;background:white;position:relative;font-size:14px;transition:all 0.2s ",";&:first-child{border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-left-radius:0;border-bottom-right-radius:0;&:hover{border-top-left-radius:2px;border-top-right-radius:2px;}}&:last-child{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;&:hover{border-bottom-left-radius:2px;border-bottom-right-radius:2px;}}&:hover{background:#f5f7fa;}& + &{border-top:1px solid #e5e5e5;}"],e=>e.messageRemovable?"pointer":"default",o.transitionDefault);class w1 extends a.PureComponent{constructor(...e){super(...e),this.handleMessageRowCheck=()=>{const{checked:e,index:t,message:n,messageRemovable:a}=this.props;!n.removed&&a&&this.props.handleCheck(!e,t,n)},this.recoverMessage=e=>()=>{this.props.recoverMessageRequest(e)}}render(){const{message:e,user:t,created_at:n,channel_url:a,message_id:i,removed:s}=this.props.message,{checked:r,messageRemovable:l}=this.props;return Object(W.jsxs)(k1,{messageRemovable:l,onClick:this.handleMessageRowCheck,children:[Object(W.jsx)(V.v,{children:l?s?Object(W.jsx)(o.Icon,{icon:"deleted-message",size:16,color:Object(o.cssColors)("neutral-5")}):Object(W.jsx)(V.sb,{checked:r,useDiv:!0}):""}),Object(W.jsxs)(l1,{children:[Object(W.jsxs)(c1,{children:["#",a.includes(".")?a.split(".")[1]:a]}),Object(W.jsx)(u1,{isRemoved:s,children:Object(W.jsxs)(d1,{children:[Object(W.jsx)(p1,{children:Object(W.jsx)(V.Ac,{user:t})}),Object(W.jsxs)(g1,{children:[Object(W.jsxs)(m1,{children:[Object(W.jsx)(f1,{children:t?t.nickname:"Admin Message"}),t?Object(W.jsxs)(y1,{children:[Object(W.jsx)(O1,{children:"USER ID"}),Object(W.jsx)(v1,{children:t.user_id})]}):""]}),Object(W.jsxs)(b1,{isRemoved:s,children:[Object(W.jsx)(o.Icon,{icon:"time",size:16,color:Object(o.cssColors)("neutral-6")}),Object(W.jsx)(j1,{children:c()(n).format("YYYY-MM-DD HH:mm:ss")})]})]}),Object(W.jsx)(h1,{children:e})]})}),s&&l?Object(W.jsx)(x1,{children:Object(W.jsxs)(_1,{onClick:this.recoverMessage(i),children:[Object(W.jsx)(o.Icon,{icon:"rollback",size:16,color:Object(o.cssColors)("purple-6")})," ",Object(W.jsx)(C1,{children:"RECOVER"})]})}):""]})]},t?`${t.user_id}_${i}`:i)}}const T1=({isFetching:e,isSearched:t,messageRemovable:n,messages:a,checked:i,handleCheck:s,recoverMessageRequest:r})=>e?Object(W.jsx)(V.cc,{style:{height:430}}):t?a.length>0?Object(W.jsx)("div",{children:a.map((e,t)=>Object(W.jsx)(w1,{messageRemovable:n,index:t,checked:i[t],handleCheck:s,message:e,recoverMessageRequest:r},`messages_message_${e.message_id}`))}):Object(W.jsx)(z.a,{icon:"messages",title:"No messages found",description:"Please check your search option"}):Object(W.jsx)("div",{children:Array.from(Array(3).keys()).map(e=>Object(W.jsx)(o1,{},e))}),S1=r.default.div.withConfig({displayName:"messageSearch__MessageSearchContent",componentId:"sc-1kykj6k-0"})(["padding-bottom:24px;"]),E1=r.default.div.withConfig({displayName:"messageSearch__MessageSearchPanel",componentId:"sc-1kykj6k-1"})(["label{display:inline-block;margin-bottom:6px;font-size:12px;font-weight:500;color:",";}"],Object(o.cssVariables)("neutral-7")),I1=r.default.div.withConfig({displayName:"messageSearch__MessageSearchContainer",componentId:"sc-1kykj6k-2"})(["margin-top:24px;display:grid;grid-template-columns:75% 1fr;grid-gap:0 24px;"]),M1=Object(r.default)(V.fc).withConfig({displayName:"messageSearch__MessagesTable",componentId:"sc-1kykj6k-3"})(["flex:1;min-height:0;border-right:none;border-left:none;box-shadow:none;"]),D1=c.a.tz.names(),A1={showDialogsRequest:j.b.showDialogsRequest,resetMessagesRequest:j.a.resetMessagesRequest,setMessagesSearchOptions:j.a.setMessagesSearchOptions,searchMessagesRequest:j.a.searchMessagesRequest,recoverMessageRequest:j.a.recoverMessageRequest};class N1 extends a.Component{constructor(...e){super(...e),this.state={dateRangePickerState:{dateRange:{startDate:c()(),endDate:c()()},value:o.DateRangePickerValue.Today},height:0,checked:this.props.messages.items.map(()=>!1),isAllChecked:!1,selectedMessages:[],timezoneQuery:""},this.checkedLength=()=>this.state.checked.filter(e=>!0===e).length,this.handleSelectAll=()=>{this.props.messages.items.length>0&&this.selectAll(!(0!==this.checkedLength()&&this.state.isAllChecked))},this.selectAll=e=>{const t=this.state.checked.map(()=>e),n=e?this.props.messages.items:[];this.setState({checked:t,isAllChecked:!0,selectedMessages:n})},this.handleCheck=(e,t,n)=>{const{checked:a}=this.state;a[t]=e;const i=e?[...this.state.selectedMessages,n]:this.state.selectedMessages.filter(e=>e!==n);this.setState(e=>({checked:a,selectedMessages:i,isAllChecked:e.checked.filter(e=>e).length===e.checked.length||e.checked.filter(e=>!e).length===e.checked.length}))},this.handleDeleteMessage=()=>{this.state.selectedMessages.length>0&&this.props.showDialogsRequest({dialogTypes:A.a.DeleteMessage,dialogProps:{multiple:!0,messages:this.state.selectedMessages.filter(e=>!e.removed)}})},this.setSearchOption=e=>{const t={...this.props.messages.options,...e};this.props.setMessagesSearchOptions(t)},this.handleChangeDateRange=(e,t)=>{this.setState({dateRangePickerState:{value:e,dateRange:t}})},this.handleChangeChannelURL=e=>{this.setSearchOption({channel_url:e.target.value})},this.handleChangeKeyword=e=>{this.setSearchOption({keyword:e.target.value})},this.handleChangeUserID=e=>{this.setSearchOption({user_id:e.target.value})},this.handleChangeExcludeRemoved=()=>{this.setSearchOption({excludeRemoved:!this.props.messages.options.excludeRemoved})},this.handleChangeTimezone=e=>{this.setSearchOption({timezone:e})},this.handlePageClick=e=>{this.searchMessages(e)},this.searchMessages=(e=1)=>{const{dateRangePickerState:{dateRange:t}}=this.state,{timezone:n}=this.props.messages.options,{startDate:a,endDate:i}=t,s={startDate:c.a.tz(a.format(f.nb),n).startOf("day").unix(),endDate:c.a.tz(i.format(f.nb),n).endOf("day").unix()},r={...this.props.messages.options,...s,page:e};this.props.searchMessagesRequest(r)},this.handleSubmit=e=>{e.preventDefault(),this.searchMessages(1)},this.onTimezoneQueryChange=e=>{this.setState({timezoneQuery:e})}}UNSAFE_componentWillReceiveProps(e){this.state.checked.length!==e.messages.items.length&&this.setState({checked:e.messages.items.map(()=>!1)})}render(){const{checked:e,isAllChecked:t,selectedMessages:n,dateRangePickerState:a}=this.state,{messages:i,recoverMessageRequest:s}=this.props,{isFetching:l,isSearched:c,items:d}=i;return Object(W.jsx)(V.A.Consumer,{children:()=>Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(u.a.Consumer,{children:({isPermitted:u,isFeatureEnabled:p})=>Object(W.jsxs)(I1,{children:[Object(W.jsxs)(S1,{children:[d.length>0&&u(["application.messageSearch.all"])&&Object(W.jsxs)(V.ib,{styles:Object(r.css)(["flex:none;height:auto;padding:0 4px 16px;border-top:none;border-bottom:1px solid ",";"],Object(o.cssVariables)("neutral-3")),children:[Object(W.jsx)(V.kb,{disabled:0===d.length,onClick:this.handleSelectAll,children:Object(W.jsx)(V.sb,{checked:0!==this.checkedLength()&&t,useDiv:!0})}),n.length>0&&Object(W.jsx)(V.jb,{label:"Delete",disabled:0===n.length,onClick:this.handleDeleteMessage})]}),Object(W.jsx)(M1,{children:Object(W.jsx)(o.ScrollBar,{children:Object(W.jsx)(T1,{isFetching:l,isSearched:c,messageRemovable:u(["application.messageSearch.all"]),checked:e,messages:d,recoverMessageRequest:s,handleCheck:this.handleCheck})})}),d.length>0?Object(W.jsx)(V.Tb,{style:{marginTop:"20px"},pagination:this.props.messages.pagination,onPageClick:this.handlePageClick}):""]}),Object(W.jsx)(E1,{children:p("message_search")?Object(W.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(W.jsxs)(V.eb,{children:[Object(W.jsx)("label",{htmlFor:"message-search-timezone-dropdown",children:"Timezone"}),Object(W.jsx)("div",{children:Object(W.jsx)(o.Dropdown,{width:"100%",placeholder:"Time zone",itemHeight:32,useSearch:!0,items:D1.filter(e=>!this.state.timezoneQuery||e.match(new RegExp(HD()(this.state.timezoneQuery),"ig"))),selectedItem:i.options.timezone,onSearchChange:this.onTimezoneQueryChange,onChange:this.handleChangeTimezone,toggleButtonProps:{id:"message-search-timezone-dropdown"}})})]}),Object(W.jsxs)(V.eb,{children:[Object(W.jsx)("label",{htmlFor:"message-search-datepicker",children:"Date"}),Object(W.jsx)(n1,{children:Object(W.jsx)(o.ContextualHelp,{content:"We only support up to 7 days for now but should support longer range soon!",placement:"top-end",tooltipContentStyle:"max-width: 256px;",children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"question"})})}),Object(W.jsx)(o.DateRangePicker,{value:a.value,dateRange:a.dateRange,onChange:this.handleChangeDateRange,maximumNights:6,placement:"bottom-end",fullWidth:!0,dropdownProps:{toggleButtonProps:{id:"message-search-datepicker"}}})]}),Object(W.jsxs)(V.eb,{children:[Object(W.jsx)("label",{htmlFor:"message-search-keyword",children:"Keyword"}),Object(W.jsx)(V.g,{id:"message-search-keyword",placeholder:"Keyword",value:i.options.keyword,onChange:this.handleChangeKeyword})]}),Object(W.jsxs)(V.eb,{children:[Object(W.jsx)("label",{htmlFor:"message-search-user-id",children:"User ID"}),Object(W.jsx)(V.g,{id:"message-search-user-id",placeholder:"User ID",value:i.options.user_id,onChange:this.handleChangeUserID})]}),Object(W.jsxs)(V.eb,{children:[Object(W.jsx)("label",{htmlFor:"message-search-channel-url",children:"Channel URL"}),Object(W.jsx)(V.i,{id:"message-search-channel-url",resize:!1,style:{height:85,resize:"none"},placeholder:"Channel URL",value:i.options.channel_url,onChange:this.handleChangeChannelURL})]}),Object(W.jsx)(V.eb,{children:Object(W.jsx)(V.sb,{checked:!0===i.options.excludeRemoved,disabled:l,onChange:this.handleChangeExcludeRemoved,label:"Exclude deleted messages"})}),Object(W.jsx)(V.bb,{children:Object(W.jsx)(o.Button,{buttonType:"primary",styles:Object(r.css)(["width:100%;"]),type:"submit",isLoading:l,disabled:l,children:"Search"})})]}):Object(W.jsxs)(a1,{children:[Object(W.jsx)(i1,{children:"Upgrading to the Sendbird’s custom pricing plan enables you to search and export chat messages in your application."}),Object(W.jsx)(t1,{to:"/settings/contact_us?category=sales_inquiry",children:"Contact Sales"})]})})]})})})})}}const R1=Object(b.d)(e=>({application:Object(Ua.i)(e),messages:e.messages}),A1)(N1);var P1=n("cAlb"),L1=n("hdWW"),F1=n("aTND");const U1=r.default.div.withConfig({displayName:"Documentation__StyledDocumentation",componentId:"x8hme5-0"})(["background:",";border-radius:4px;padding:0 24px;overflow:hidden;"],Object(o.cssVariables)("neutral-1")),$1=r.default.div.withConfig({displayName:"Documentation__DocumentationHeader",componentId:"x8hme5-1"})(["display:flex;align-items:center;padding-top:18px;padding-bottom:18px;"]),B1=r.default.h2.withConfig({displayName:"Documentation__DocumentationTitle",componentId:"x8hme5-2"})(["flex:1;",";color:",";display:flex;align-items:center;"],o.Headings["heading-02"],Object(o.cssVariables)("neutral-10")),V1=r.default.div.withConfig({displayName:"Documentation__DocumentationToggle",componentId:"x8hme5-3"})(["align-self:flex-end;",""],({expanded:e})=>Object(r.css)(["svg{transform:rotate(","deg);transition:transform 0.3s ",";}"],e?0:-90,o.transitionDefault)),z1=r.default.div.withConfig({displayName:"Documentation__DocumentationBody",componentId:"x8hme5-4"})(["display:grid;grid-template-columns:1fr 1fr 1fr;grid-column-gap:32px;position:relative;max-height:","px;transition:max-height 0.3s ",",padding-top 0.3s ",",padding-bottom 0.3s ",";&:before{position:absolute;content:'';top:0;right:0;left:0;border-top:1px solid ",";}"],({expanded:e})=>e?180:0,o.transitionDefault,o.transitionDefault,o.transitionDefault,Object(o.cssVariables)("neutral-3")),H1=r.default.div.withConfig({displayName:"Documentation__DocumentationProduct",componentId:"x8hme5-5"})(["display:flex;align-items:stretch;flex-direction:column;padding-top:18px;margin-bottom:24px;"]),q1=r.default.div.withConfig({displayName:"Documentation__DocumentationProductTitle",componentId:"x8hme5-6"})(["",";margin-bottom:8px;color:",";"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-10")),G1=r.default.p.withConfig({displayName:"Documentation__DocumentationProductDescription",componentId:"x8hme5-7"})(["",";color:",";flex:1;"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-10")),W1=r.default.ul.withConfig({displayName:"Documentation__DocumentationProductLinks",componentId:"x8hme5-8"})(["list-style:none;display:grid;grid-template-columns:repeat(5,32px);grid-column-gap:20px;margin-top:24px;svg{fill:",";}a:hover{svg{fill:",";}}"],Object(o.cssVariables)("neutral-7"),Object(o.cssVariables)("neutral-7")),K1=()=>{const e=Object(E.a)(),[t,n]=Object(a.useState)(!0),i=[{name:e.formatMessage({id:"common.home.documentation.chat.title"}),description:e.formatMessage({id:"common.home.documentation.chat.description"}),links:[{icon:"apple",url:"https://sendbird.com/docs/chat/v3/ios/getting-started/about-chat-sdk"},{icon:"android",url:"https://sendbird.com/docs/chat/v3/android/getting-started/about-chat-sdk"},{icon:"javascript",url:"https://sendbird.com/docs/chat/v3/javascript/getting-started/about-chat-sdk"},{icon:"unity",url:"https://sendbird.com/docs/chat/v3/unity/getting-started/chat-sdk-setup"},{icon:"dotnet",url:"https://sendbird.com/docs/chat/v3/dotnet/getting-started/chat-sdk-setup"}]},{name:e.formatMessage({id:"common.home.documentation.syncManager.title"}),description:e.formatMessage({id:"common.home.documentation.syncManager.description"}),links:[{icon:"apple",url:"https://sendbird.com/docs/syncmanager/v1/ios/getting-started/about-syncmanager"},{icon:"android",url:"https://sendbird.com/docs/syncmanager/v1/android/getting-started/about-syncmanager"},{icon:"javascript",url:"https://sendbird.com/docs/syncmanager/v1/javascript/getting-started/about-syncmanager"}]},{name:e.formatMessage({id:"common.home.documentation.uiKit.title"}),description:e.formatMessage({id:"common.home.documentation.uiKit.description"}),links:[{icon:"apple",url:"https://sendbird.com/docs/uikit/v1/ios/getting-started/about-uikit"},{icon:"android",url:"https://sendbird.com/docs/uikit/v1/android/getting-started/about-uikit"},{icon:"javascript",url:"https://sendbird.com/docs/uikit/v1/javascript/getting-started/about-uikit"}]}];return Object(W.jsxs)(U1,{children:[Object(W.jsxs)($1,{children:[Object(W.jsxs)(B1,{children:[e.formatMessage({id:"core.overview.documentation.title"}),Object(W.jsx)("div",{id:"tourTargetDocs",style:{width:48,height:5}})]}),Object(W.jsx)(V1,{expanded:t,children:Object(W.jsx)(o.IconButton,{buttonType:"secondary",size:"small",icon:"chevron-down",onClick:()=>{n(e=>!e)}})})]}),Object(W.jsx)(z1,{expanded:t,children:i.map(({name:e,description:t,links:n})=>Object(W.jsxs)(H1,{children:[Object(W.jsx)(q1,{children:e}),Object(W.jsx)(G1,{children:t}),Object(W.jsx)(W1,{children:n.map(({icon:e,url:t})=>Object(W.jsx)("li",{children:Object(W.jsx)(o.Link,{href:t,target:"_blank",tabIndex:-1,children:Object(W.jsx)(o.IconButton,{buttonType:"secondary",icon:e,iconSize:24,size:"small"})})},t))})]},`overview_document_${e}`))})]})};var Y1=n("KQeT"),Q1=n("SEis");const J1=r.default.div.withConfig({displayName:"components__Title",componentId:"sc-4nigqw-0"})(["font-size:16px;font-weight:500;line-height:20px;letter-spacing:-0.15px;color:",";margin-bottom:4px;transition:color 0.2s ",";display:flex;align-items:center;&:before{content:'';width:8px;height:8px;border-radius:4px;margin-right:8px;background:",";}"],Object(o.cssVariables)("neutral-10"),o.transitionDefault,({$color:e,$isHidden:t})=>t?Object(o.cssVariables)("neutral-5"):e||Object(o.cssVariables)("purple-7")),X1=r.default.div.withConfig({displayName:"components__Value",componentId:"sc-4nigqw-1"})([""," padding:0 0 0 16px;height:32px;"],o.Headings["heading-05"]),Z1=r.default.div.withConfig({displayName:"components__Metric",componentId:"sc-4nigqw-2"})(["min-width:144px;transition:background 0.2s ",";& + &{margin-left:32px;}"," "," .metric__tooltip{display:inline-flex;width:100%;& + div[role='tooltip']{left:12px !important;}}"],o.transitionDefault,({isLegend:e})=>e?"cursor: pointer;":"",({isHidden:e})=>e?Object(r.css)(["","{color:",";&:before{background:",";}}"],X1,Object(o.cssVariables)("neutral-5"),Object(o.cssVariables)("neutral-5")):""),e2=r.default.div.withConfig({displayName:"components__TooltipTargetWrapper",componentId:"sc-4nigqw-3"})([""]),t2=({children:e,className:t,tooltipContent:n,tooltipContentStyle:i,popperProps:s,placement:l="bottom-start"})=>{const c=Object(a.useRef)(null);return Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,ref:c,className:t,content:n,popperProps:s,tooltipContentStyle:Object(r.css)(["max-width:256px;"," ",""],o.Body["body-short-01"],i),placement:l,children:Object(W.jsx)(e2,{onMouseLeave:()=>{var e;null==(e=c.current)||e.hide()},children:e})})},n2=r.default.div.withConfig({displayName:"components__StyledStatisticsMetrics",componentId:"sc-4nigqw-4"})(["display:flex;align-items:center;margin-bottom:24px;"]),a2=({metrics:e,onLegendClick:t,checkIsHidden:n})=>{const a=Object(E.a)();return Object(W.jsx)(n2,{role:"list",children:e.map(({title:e,value:i,color:s},r)=>{const o=t?t(r):void 0,l=!!n&&n(r);return Object(W.jsxs)(Z1,{onClick:o,isLegend:!(!t&&!n),isHidden:l,role:"listitem",children:[Object(W.jsx)(J1,{role:"term",$color:null!=s?s:Ha.a[r],$isHidden:l,children:e}),Object(W.jsx)(t2,{className:"metric__tooltip",tooltipContent:a.formatMessage({id:l?"core.overview.statistics_tooltip.show":"core.overview.statistics_tooltip.hide"}),placement:"bottom",children:Object(W.jsx)(X1,{role:"definition",children:i})})]},`statistics_metric_${e}`)})})},i2=r.default.div.withConfig({displayName:"components__ErrorViewWrapper",componentId:"sc-4nigqw-5"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;margin-bottom:20px;"]),s2=r.default.div.withConfig({displayName:"components__ErrorMessage",componentId:"sc-4nigqw-6"})(["font-size:16px;line-height:20px;font-weight:500;letter-spacing:-0.15px;color:",";margin-bottom:16px;"],Object(o.cssVariables)("neutral-6")),r2=({onRetry:e,isRetrying:t})=>{const n=Object(E.a)();return Object(W.jsxs)(i2,{"data-test-id":"ErrorView",children:[Object(W.jsx)(s2,{children:n.formatMessage({id:"core.overview.errorView_title"})}),Object(W.jsx)(o.Button,{buttonType:"tertiary",icon:"refresh",size:"small",onClick:e,isLoading:t,children:n.formatMessage({id:"core.overview.errorView_btn.retry"})})]})},o2=r.default.div.withConfig({displayName:"components__ValueContainer",componentId:"sc-4nigqw-7"})(["display:flex;flex-direction:column;align-items:flex-end;min-height:52px;> span{"," color:",";}"],o.Headings["heading-05"],Object(o.cssVariables)("neutral-10")),l2=r.default.small.withConfig({displayName:"components__Caption",componentId:"sc-4nigqw-8"})(["display:flex;align-items:center;line-height:1.43;letter-spacing:-0.1px;font-size:14px;font-weight:500;color:",";svg{margin-right:4px;fill:currentColor;}"],({$direction:e})=>({up:Object(o.cssVariables)("blue-5"),down:Object(o.cssVariables)("red-5")}[e])),c2=({current:e,previous:t})=>{const n=Object(E.a)();return Object(W.jsxs)(o2,{"data-test-id":"Ticker",children:[Object(W.jsx)("span",{"data-test-id":"TickerValue",children:n.formatNumber(e)}),(()=>{if(!t)return null;const a=e-t;if(!a)return null;const i=a>0?"up":"down",s=a/t,r=`${n.formatNumber(Math.abs(a))} (${n.formatNumber(Math.abs(s),{style:"percent"})})`,l={up:`Increased by ${r}`,down:`Decreased by ${r}`}[i];return Object(W.jsxs)(l2,{$direction:i,"aria-label":l,"data-test-id":"TickerCaption",children:[Object(W.jsx)(o.Icon,{icon:{up:"arrow-up",down:"arrow-down"}[i],size:16}),r]})})()]})},d2=[c()().tz("UTC").startOf("month"),c()().tz("UTC")].map(e=>e.format(f.A)).join(" - "),u2=r.default.section.withConfig({displayName:"CallsProductView__Layout",componentId:"j1t9tf-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-gap:32px;min-height:376px;"]),p2=r.default.h3.withConfig({displayName:"CallsProductView__Heading",componentId:"j1t9tf-1"})(["display:flex;align-items:center;color:",";",""],Object(o.cssVariables)("neutral-10"),o.Headings["heading-02"]);var g2=Object(r.default)(p2).withConfig({displayName:"CallsProductView___StyledHeading2",componentId:"j1t9tf-2"})(["padding:24px 24px 0;"]),h2=Object(r.default)(p2).withConfig({displayName:"CallsProductView___StyledHeading",componentId:"j1t9tf-3"})(["margin-bottom:28px;"]);const m2=r.default.section.withConfig({displayName:"CallsProductView__Section",componentId:"j1t9tf-4"})(["display:flex;flex-direction:column;border:1px solid ",";border-radius:4px;"],Object(o.cssVariables)("neutral-3"));var f2=Object(r.default)(m2).withConfig({displayName:"CallsProductView___StyledSection2",componentId:"j1t9tf-5"})(["padding-bottom:0;min-width:640px;"]),b2=Object(r.default)(m2).withConfig({displayName:"CallsProductView___StyledSection",componentId:"j1t9tf-6"})(["padding:24px;min-width:368px;"]);const j2=r.default.div.withConfig({displayName:"CallsProductView__UsageContentContainer",componentId:"j1t9tf-7"})(["display:flex;flex-direction:column;> div:first-child{margin-bottom:56px;}> * + *{border-top:1px solid ",";padding-top:24px;}"],Object(o.cssVariables)("neutral-3")),y2=Object(r.default)(V.m).attrs({showLegends:!0,showTooltip:!0,tooltipPlacement:"bottom-start"}).withConfig({displayName:"CallsProductView__StyledCallsUsage",componentId:"j1t9tf-8"})([".UsageLegends{margin-bottom:12px;> div{height:auto;}.usageLegend__value{display:none;}}"]),O2=r.default.div.withConfig({displayName:"CallsProductView__SubscriptionContainer",componentId:"j1t9tf-9"})(["display:grid;grid-template-columns:auto 1fr;grid-gap:20px 28px;> h3{margin:0;}> a{grid-column-start:span 2;}"]),v2=({subscriptionStatus:e,link:t,...n})=>{const a=Object(E.a)(),i={usage:a.formatMessage({id:"core.overview.calls.quota.legends.usage"}),others:a.formatMessage({id:"core.overview.calls.quota.legends.others"}),remains:a.formatMessage({id:"core.overview.calls.quota.legends.remains"})};return Object(W.jsxs)(j2,{children:[Object(W.jsx)(y2,{legendLabels:i,tooltipLabels:i,...n}),Object(W.jsxs)(O2,{children:[Object(W.jsx)(p2,{children:a.formatMessage({id:"core.overview.calls.autoRecharge.title"})}),Object(W.jsx)(V.Cc,{status:e}),t]})]})},x2=Object(r.default)(V.s).withConfig({displayName:"CallsProductView__StyledLink",componentId:"j1t9tf-10"})(["&&{font-size:14px;font-weight:600;}"]),_2=()=>{const e=Object(E.a)();return Object(W.jsx)(x2,{href:"/settings/general",children:e.formatMessage({id:"core.overview.calls.autoRecharge.viewMore"})})},C2=()=>{const e=Object(E.a)();return Object(W.jsx)(x2,{href:"/settings/contact_us?category=pricing",children:e.formatMessage({id:"core.overview.calls.autoRecharge.viewMore.contactUs"})})},k2=({onLoaded:e})=>{const t=Object(E.a)(),{fetchVouchers:n,fetchSubscription:i,fetchNextVoucher:s,subscription:{loading:r},vouchers:{loading:l},nextVoucher:{loading:c}}=Object(Q1.e)(),d=Object(Q1.k)(),u=Object(Q1.f)(),p=Object(Q1.h)(),g=Object(Q1.i)(),{isSelfService:h}=Object(P.h)(),m=Object(a.useCallback)(()=>Promise.all([n(),i(),s()]),[n,i,s]),f=!(!u||!p);Object(a.useEffect)(()=>{m()},[m]),Object(a.useEffect)(()=>{f&&e()},[f,e]);const b=r||l||c,j=Object(a.useMemo)(()=>b?Object(W.jsx)(o.SpinnerFull,{}):!d&&u&&p?Object(W.jsx)(v2,{...u,subscriptionStatus:p.status,showAlert:g,link:h?Object(W.jsx)(_2,{}):Object(W.jsx)(C2,{})}):Object(W.jsx)(r2,{onRetry:m,isRetrying:b}),[b,d,u,p,g,h,m]);return Object(W.jsxs)(b2,{"data-test-id":"Usage",children:[Object(W.jsx)(h2,{children:t.formatMessage({id:"core.overview.calls.quota.title"})}),j]})},w2=r.default.table.withConfig({displayName:"CallsProductView__Table",componentId:"j1t9tf-11"})(["border-spacing:0;th,td{display:flex;}thead{font-size:13px;font-weight:600;th{"," justify-content:flex-end;}tr{padding:0 24px 12px;border-bottom:1px solid ",";}}tr{display:grid;grid-template-columns:1.2fr 1fr 1fr;grid-gap:24px;}tbody{tr{margin:0 24px;min-height:100px;align-items:center;td{> *{width:100%;}}}tr + tr{border-top:1px solid ",";}}"],o.Typography["label-03"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3")),T2=r.default.th.withConfig({displayName:"CallsProductView__RowHeaderContainer",componentId:"j1t9tf-12"})(["display:flex;align-items:flex-start;flex-direction:column;text-align:start;> b{display:flex;align-items:center;","}> span{margin-top:4px;color:",";","}"],o.Subtitles["subtitle-02"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]),S2=({title:e,duration:t})=>Object(W.jsxs)(T2,{children:[Object(W.jsx)("b",{children:e}),t&&Object(W.jsx)("span",{children:t})]}),E2=e=>Object(W.jsx)("td",{children:Object(W.jsx)(c2,{...e})}),I2=({onLoaded:e})=>{const t=Object(E.a)(),{summary:n,load:i,isLoading:s,error:r}=(()=>{const e=Object(P.c)(),[{data:t,status:n,error:a},i]=Object(P.g)(()=>Object(g$.fetchCallsUsage)(e),[e]);return{summary:{direct:null==t?void 0:t.data.participants,group:null==t?void 0:t.data.room_participants},load:i,isLoading:"loading"===n,error:a}})(),{direct:l,group:c}=n,d=!(!l||!c);Object(a.useEffect)(()=>{i()},[i]),Object(a.useEffect)(()=>{d&&e()},[d,e]);return Object(W.jsxs)(f2,{"data-test-id":"Summary",children:[Object(W.jsxs)(g2,{children:[t.formatMessage({id:"core.overview.calls.summary.title"}),Object(W.jsx)(V.qb,{content:t.formatMessage({id:"core.overview.calls.summary.title.tooltip"})})]}),s?Object(W.jsx)(o.SpinnerFull,{}):r?Object(W.jsx)(r2,{onRetry:i,isRetrying:s}):l&&c?Object(W.jsxs)(w2,{children:[Object(W.jsx)("thead",{children:Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{}),Object(W.jsx)("th",{children:t.formatMessage({id:"core.overview.calls.summary.table.header.direct"})}),Object(W.jsx)("th",{children:t.formatMessage({id:"core.overview.calls.summary.table.header.group"})})]})}),Object(W.jsxs)("tbody",{children:[Object(W.jsxs)("tr",{children:[Object(W.jsx)(S2,{title:t.formatMessage({id:"core.overview.calls.summary.table.body.monthly"}),duration:d2}),Object(W.jsx)(E2,{current:l.monthly.current,previous:l.monthly.previous}),Object(W.jsx)(E2,{current:c.monthly.current,previous:c.monthly.previous})]}),Object(W.jsxs)("tr",{children:[Object(W.jsx)(S2,{title:t.formatMessage({id:"core.overview.calls.summary.table.body.daily"})}),Object(W.jsx)(E2,{current:l.daily.current,previous:l.daily.previous}),Object(W.jsx)(E2,{current:c.daily.current,previous:c.daily.previous})]}),Object(W.jsxs)("tr",{children:[Object(W.jsx)(S2,{title:Object(W.jsxs)(W.Fragment,{children:[t.formatMessage({id:"core.overview.calls.summary.table.body.peak"}),Object(W.jsx)(V.qb,{content:t.formatMessage({id:"core.overview.calls.summary.table.body.peak.tooltip"})})]})}),Object(W.jsx)(E2,{current:l.peak}),Object(W.jsx)(E2,{current:c.peak})]})]})]}):null]})},M2=({onLoaded:e})=>{const[t,n]=Object(a.useState)({usage:!1,summary:!1}),i=Object.values(t).every(Boolean),s=Object(a.useCallback)(()=>n(e=>({...e,usage:!0})),[]),r=Object(a.useCallback)(()=>n(e=>({...e,summary:!0})),[]);return Object(a.useEffect)(()=>{i&&e()},[i,e]),Object(W.jsxs)(u2,{"data-test-id":"CallsProductView",children:[Object(W.jsx)(k2,{onLoaded:s}),Object(W.jsx)(I2,{onLoaded:r})]})};var D2=n("0vbN");const A2=["audio","video","p2p_audio","p2p_video","small_room_for_audio_only","large_room_for_audio_only","small_room_for_video","large_room_for_video"],N2={direct:{audio:"core.overview.calls.statistics.chart.legends.audio",video:"core.overview.calls.statistics.chart.legends.video",p2p_audio:"core.overview.calls.statistics.chart.legends.p2pAudio",p2p_video:"core.overview.calls.statistics.chart.legends.p2pVideo"},group:{audio:"core.overview.calls.statistics.chart.legends.audioRoom",video:"core.overview.calls.statistics.chart.legends.videoRoom"}},R2="YYYY-MM-DD",P2="YYYY-MM",L2=e=>e.format(R2),F2=e=>e.format(P2),U2=(e,t)=>e.map((e,n)=>((e,t)=>({date:e.date,seconds:e.seconds+t.seconds,credits:e.credits+t.credits}))(e,t[n])),$2=(e,t)=>({label:e,total:t.reduce((e,t)=>e+t.credits,0),data:t.map(({date:e,credits:t,seconds:n})=>({x:e,y:t,tooltip:{credits:t,seconds:n}}))}),B2=r.default.span.withConfig({displayName:"CallsStatistics__TooltipNumber",componentId:"pi62z7-0"})([""," small{margin-left:4px;","}"],o.Headings["heading-04"],o.Typography["label-02"]),V2=r.default.div.withConfig({displayName:"CallsStatistics__FilterContainer",componentId:"pi62z7-1"})(["display:grid;grid-column-gap:8px;grid-template-columns:auto auto;"]),z2=r.default.header.withConfig({displayName:"CallsStatistics__HeaderContainer",componentId:"pi62z7-2"})(["display:flex;justify-content:space-between;> h3{display:flex;align-items:center;"," color:",";}"],o.Headings["heading-02"],Object(o.cssVariables)("neutral-10")),H2=r.default.div.withConfig({displayName:"CallsStatistics__ChartContainer",componentId:"pi62z7-3"})(["position:relative;min-height:360px;> [role='progressbar']{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);}"]),q2=r.default.section.withConfig({displayName:"CallsStatistics__Container",componentId:"pi62z7-4"})(["padding:24px;border:1px solid ",";","{margin-bottom:4px;}[role='tablist']{margin-bottom:24px;}"],Object(o.cssVariables)("neutral-3"),z2),G2=({right:e})=>{const t=Object(E.a)();return Object(W.jsxs)(z2,{children:[Object(W.jsxs)("h3",{children:[t.formatMessage({id:"core.overview.calls.statistics.title"}),Object(W.jsx)(V.qb,{content:t.formatMessage({id:"core.overview.calls.statistics.title.tooltip"})})]}),e]})},W2=({value:e,onChange:t})=>{const n=Object(E.a)();return Object(W.jsx)(o.Dropdown,{size:"small",items:["daily","monthly"],itemToString:e=>n.formatMessage({id:{daily:"core.overview.calls.statistics.chart.filter.daily",monthly:"core.overview.calls.statistics.chart.filter.monthly"}[e]}),selectedItem:e,onChange:t})},K2=({range:e,onChange:t,...n})=>{const a=((e,t)=>{var n;const a=c()(t).diff(e,"days")+1;return null!=(n={7:o.DateRangePickerValue.Last7Days,14:o.DateRangePickerValue.Last14Days,30:o.DateRangePickerValue.Last30Days,90:o.DateRangePickerValue.Last90Days}[a])?n:o.DateRangePickerValue.Custom})(e.start,e.end),i={startDate:c()(e.start),endDate:c()(e.end)};return Object(W.jsx)(o.DateRangePicker,{minimumNights:7,maximumNights:92,placement:"bottom-end",size:"small",value:a,dateRange:i,onChange:(e,n)=>{if(!n)return;const{startDate:a,endDate:i}=n;t({start:L2(a),end:L2(i)})},...n})},Y2=({range:e,onChange:t})=>Object(W.jsx)(V.Nb,{start:c()(e.start),end:c()(e.end),onApply:({start:e,end:n})=>{t({start:F2(e),end:F2(n)})}}),Q2=({resolution:e,range:t,onChangeResolution:n,onChangeRange:a})=>Object(W.jsxs)(V2,{"data-test-id":"Filter",children:[Object(W.jsx)(W2,{value:e,onChange:n}),"daily"===e&&Object(W.jsx)(K2,{range:t,onChange:a}),"monthly"===e&&Object(W.jsx)(Y2,{range:t,onChange:a})]}),J2=({chart:e,...t})=>{const n=Object(E.a)();return Object(W.jsx)(fb.k,{datasets:e,renderLegend:(t,n)=>Object(W.jsx)(a2,{metrics:e.map(({label:e,total:t})=>({title:e,value:t.toLocaleString()})),onLegendClick:t,checkIsHidden:n}),tooltipValueFormatter:t=>{const{datasetIndex:a,index:i}=t;if(null==a||null==i)return null;const{data:s}=e[a];if(null==s||!s[i].tooltip)return null;const{credits:r,seconds:o}=s[i].tooltip,l=Math.floor(o/60);return Object(W.jsx)(B2,{children:n.formatMessage({id:"core.overview.calls.statistics.chart.tooltip.value"},{credits:n.formatNumber(r),minutes:n.formatNumber(l),small:e=>Object(W.jsx)("small",{children:e})})})},height:"280px",noPadding:!0,...t})},X2=Object(a.memo)(({chart:e})=>Object(W.jsx)(J2,{chart:e,options:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A}}]}}})),Z2=Object(a.memo)(({chart:e})=>Object(W.jsx)(J2,{chart:e,options:{scales:{xAxes:[{time:{unit:"month",tooltipFormat:"MMM, YYYY"}}]}}})),e3=async(e,t)=>{const{data:n}=await Object(P1.fetchCreditRates)(),a=await(async(e,{resolution:t,range:n})=>{const{start:a,end:i}=n;if("daily"===t){const{data:t}=await Object(D2.e)(e,{start:a,end:i});return t.daily_usage}if("monthly"===t){const{data:t}=await Object(D2.f)(e,{date_start:a,date_end:i});return t.monthly_usage}throw new Error("invalid resolution")})(e,t),i=Object.keys(a).sort();return A2.reduce((e,t)=>(e[t]=i.map(e=>{const i=a[e][t],s=i/60,r=n[t].user;return{date:e,seconds:i,rate:r,credits:s*r}}),e),{})},t3=()=>{const e=Object(P.c)();return[Object(a.useMemo)(()=>{var t;return null!=(t=(e=>{var t;return null==(t=H.ClientStorage.getObject("overviewCallsSummarySelectedTab"))?void 0:t[e]})(e))?t:"direct"},[e]),t=>((e,t)=>H.ClientStorage.upsertObject("overviewCallsSummarySelectedTab",{[e]:t}))(e,t)]},n3=()=>{const e=Object(E.a)(),{filter:t,updateResolution:n,updateRange:i}=(()=>{const e={daily:{start:L2(c()().subtract(13,"days")),end:L2(c()())},monthly:{start:F2(c()().subtract(6,"months")),end:F2(c()())}},[t,n]=Object(a.useState)({resolution:"daily",range:e.daily});return{filter:t,updateResolution:t=>{n({resolution:t,range:e[t]})},updateRange:e=>{n(t=>({...t,range:e}))}}})(),{chart:s,isLoading:r,error:l,load:d}=(e=>{const t=Object(P.c)(),[{data:n,error:i,status:s},r]=Object(P.g)(()=>e3(t,e),[t,e]),o=Object(E.a)(),l="loading"===s;return{chart:Object(a.useMemo)(()=>{if(!n||l)return null;const{small_room_for_audio_only:e,large_room_for_audio_only:t,small_room_for_video:a,large_room_for_video:i}=n;return{direct:["audio","video","p2p_audio","p2p_video"].map(e=>$2(o.formatMessage({id:N2.direct[e]}),n[e])),group:[{type:"audio",usage:U2(e,t)},{type:"video",usage:U2(a,i)}].map(({type:e,usage:t})=>$2(o.formatMessage({id:N2.group[e]}),t))}},[o,l,n]),isLoading:l,error:i,load:r}})(t),u=[{title:e.formatMessage({id:"core.overview.calls.statistics.tabs.direct"}),id:"direct"},{title:e.formatMessage({id:"core.overview.calls.statistics.tabs.group"}),id:"group"}],[p,g]=t3(),h=u.findIndex(e=>e.id===p);Object(a.useEffect)(()=>{d()},[d]),Object(P.s)(l);const{resolution:m,range:f}=t;return Object(W.jsxs)(q2,{children:[Object(W.jsx)(G2,{right:Object(W.jsx)(Q2,{resolution:m,range:f,onChangeResolution:n,onChangeRange:i})}),Object(W.jsx)(o.TabbedInterface,{hasBorder:!0,tabs:u,initialActiveTabIndex:h,onActiveTabChange:({tab:e})=>g(e.id),children:e=>{var t;const n=null!=(t=null==s?void 0:s[e.id])?t:[];return Object(W.jsx)(H2,{children:r?Object(W.jsx)(o.SpinnerFull,{}):"daily"===m?Object(W.jsx)(X2,{chart:n}):"monthly"===m?Object(W.jsx)(Z2,{chart:n}):void 0})}})]})},a3=r.default.div.withConfig({displayName:"KeyUsage__QuotaList",componentId:"sc-13luv0x-0"})(["flex:1;.UsageLegends{margin-bottom:30px;> div{height:auto;}.usageLegend__value{display:none;}}&& > * + *{margin-top:16px;}"]),i3={custom:{over:"core.overview.quota.messaging_label.tooltip.over",warning:"core.overview.quota.messaging_label.tooltip.warning",willStop:"core.overview.quota.messaging_label.tooltip.willStop",stopped:"core.overview.quota.messaging_label.tooltip.stopped"},free:{over:"core.overview.quota.messaging_label.tooltip.over.free",warning:"core.overview.quota.messaging_label.tooltip.warning.free",willStop:"core.overview.quota.messaging_label.tooltip.willStop.free",stopped:"core.overview.quota.messaging_label.tooltip.stopped.free"}},s3=({usageProps:e,isFetching:t})=>{const n=Object(E.a)(),a=Object(b.g)(e=>e.applicationState.data),i="enterprise"===(null==a?void 0:a.plan)?i3.custom:i3.free,s={usage:n.formatMessage({id:"core.overview.quota.tooltipLabels_lbl.currentApplication"}),others:n.formatMessage({id:"core.overview.quota.tooltipLabels_lbl.others"}),remains:n.formatMessage({id:"core.overview.quota.tooltipLabels_lbl.balance"})};return t?Object(W.jsx)(o.SpinnerFull,{}):Object(W.jsx)(a3,{children:e.map(e=>Object(W.jsx)(V.yc,{availabilityTooltips:{over:n.formatMessage({id:i.over}),warning:n.formatMessage({id:i.warning}),stopped:n.formatMessage({id:i.stopped})},showTooltip:!0,showAlert:!0,showMarker:!0,legendLabels:s,tooltipLabels:s,labelNumber:"default",...e},`quotaItem_${e.label}`))})},r3=r.default.div.withConfig({displayName:"usageItem__UsageLabel",componentId:"uddu6u-0"})(["margin-top:4px;font-size:16px;font-weight:500;line-height:1.33;letter-spacing:-0.3px;display:flex;align-items:center;"]),o3=r.default.div.withConfig({displayName:"usageItem__UsageDescription",componentId:"uddu6u-1"})(["font-size:14px;color:",";margin-top:4px;line-height:1.43;letter-spacing:-0.1px;"],Object(o.cssVariables)("neutral-7")),l3=r.default.div.withConfig({displayName:"usageItem__ColumnItem",componentId:"uddu6u-2"})([""]),c3=r.default.div.withConfig({displayName:"usageItem__StyledUsageItem",componentId:"uddu6u-3"})(["display:grid;grid-template-columns:1.5fr 1fr;grid-column-gap:32px;flex:1;padding:20px 24px;position:relative;background-color:white;border:1px solid ",";min-height:96px;&:first-child{border-top-left-radius:4px;border-top-right-radius:4px;}& + &{border-top:0;border-radius:0;}&:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;}"],Object(o.cssVariables)("neutral-3")),d3=({label:e,data:t,tooltip:n,description:a})=>{const i=(()=>{if(t)return"value"in t?t.value:"current"in t?t.current:void 0})(),s=t&&"previousValue"in t?t.previousValue:void 0;return Object(W.jsxs)(c3,{"data-test-id":"UsageItem",children:[Object(W.jsxs)(l3,{children:[Object(W.jsxs)(r3,{"data-test-id":"UsageLabel",children:[e,n&&Object(W.jsx)(t2,{className:"usage__tooltip",tooltipContent:n,children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})]}),a&&Object(W.jsx)(o3,{children:a})]}),"number"==typeof i&&Object(W.jsx)(c2,{current:i,previous:s})]})},u3=r.default.div.withConfig({displayName:"SummaryView__Usages",componentId:"sc-1enhobk-0"})(["display:grid;grid-template-rows:96px 96px auto;"]),p3=({usage:e,isFetching:t})=>Object(W.jsxs)(W.Fragment,{children:[t&&Object(W.jsx)(o.SpinnerFull,{transparent:!0}),Object(W.jsx)(u3,{children:e.map(e=>Object(W.jsx)(d3,{...e},`usage_${e.label}`))})]}),g3=["41C94DF4-C1DC-4E2D-8CC8-58709FEAB0BF","4ED4A015-33AF-4232-B688-D85C3467A71E","D37B2724-256E-4364-A133-B51340CADE12","D126457C-47B8-4AE4-AAE4-C9788F8EED60","097A1824-EB63-48A5-AC8B-72E2475AD421","08654556-5407-4941-B798-7AD1DDCDED7F","947A5671-CD58-4386-8C36-4A913B5899C8","A45BE021-420A-4210-A2D4-BAAA4B5D27ED","955A89CB-5BA8-4DA2-8031-444B06620FB5","43CD7073-7E02-4AA3-8685-CC03396AAD5C","65CB9229-8D1D-4991-B28C-04C5A2174AF9","F3CB6187-CB42-4CD1-95FC-1C46F8856006","E01BE4CE-8730-4CF5-98D6-A71406C6A41A"],h3=new Date("2021-03-12T23:59:59.999Z"),m3=()=>{const e=Object(P.c)(),t=Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.region}),n=Object(E.a)(),{isAvailable:a,isLoading:i}=Object(NZ.a)();if(!g3.includes(e)||Date.now()>h3.valueOf())return null;const s=n.formatMessage({id:null!=t&&t.match(/ap\-2/i)?"core.overview.statistics_label.daily.noti.ccuAP2":"core.overview.statistics_label.daily.noti.ccuAP4"},{a:e=>Object(W.jsx)(V.yb,{href:`/settings/contact_us${!i&&a?"?category=technical_issue":""}`,permissions:oY.a,variant:o.LinkVariant.Inline,useReactRouter:!0,children:e})});return Object(W.jsx)(o.InlineNotification,{type:"warning",message:s})},f3=r.default.div.withConfig({displayName:"statisticsDetail__StatisticsHeader",componentId:"sc-1cym6qe-0"})(["display:grid;grid-template-columns:1fr auto;grid-gap:0 32px;align-items:center;margin-bottom:10px;"]),b3=r.default.h3.withConfig({displayName:"statisticsDetail__StatisticsTitle",componentId:"sc-1cym6qe-1"})(["font-size:16px;line-height:20px;font-weight:600;letter-spacing:-0.15px;color:",";margin:0;display:flex;align-items:center;"],Object(o.cssVariables)("neutral-10")),j3=r.default.div.withConfig({displayName:"statisticsDetail__StatisticsItem",componentId:"sc-1cym6qe-2"})(["padding-bottom:24px;& + &{margin-top:24px;border-top:1px solid ",";padding:24px 0;}&:last-child{padding-bottom:0;}"],Object(o.cssVariables)("neutral-3")),y3={month:{scales:{xAxes:[{time:{unit:"month",tooltipFormat:"MMM, YYYY"}}]}},day:{scales:{xAxes:[{time:{unit:"day",tooltipFormat:f.A}}]}},hour:{scales:{xAxes:[{time:{unit:"hour",tooltipFormat:`${f.x}, ${f.F}`}}]}}},O3=e=>IS()(e).format({thousandSeparated:!0,mantissa:0}),v3=(e,t,n,a)=>{const i=[];let s=t.diff(e,n),r=0;for(;s>0;){const o=a*r,l=e.clone().add(o,n);if(s>=a){const t=o+(a-1),s=e.clone().add(t,n);i.push({start_year:l.year(),end_year:s.year(),start_month:l.month()+1,end_month:s.month()+1,..."days"===n?{start_day:l.date(),end_day:s.date()}:null}),r++}else i.push({start_year:l.year(),end_year:t.year(),start_month:l.month()+1,end_month:t.month()+1,..."days"===n?{start_day:l.date(),end_day:t.date()}:null});s-=a-1}return i},x3=({statistics:e,fetchMAURequest:t,fetchMonthlyCCURequest:n})=>{const i=Object(E.a)(),[s,r]=Object(a.useState)({startDate:c()().subtract(6,"month").startOf("day"),endDate:c()().endOf("day")}),{startDate:l,endDate:d}=s,u=Object(a.useCallback)(()=>{t({startDate:l.format(f.ub),endDate:d.format(f.ub)}),n(v3(l,d,"months",12))},[t,l,d,n]);Object(a.useEffect)(()=>{u()},[u]);const p=Object(a.useMemo)(()=>[{label:i.formatMessage({id:"core.overview.statistics_header.monthlyActiveUsers"}),data:e.mau.series},{label:i.formatMessage({id:"core.overview.statistics_header.peakConnections"}),data:e.monthlyConnection.series}],[i,e.mau.series,e.monthlyConnection]),g=Object(a.useCallback)((t,n)=>Object(W.jsx)(a2,{metrics:[{title:i.formatMessage({id:"core.overview.statistics_header.monthlyActiveUsers"}),value:O3(e.mau?e.mau.max:0)},{title:i.formatMessage({id:"core.overview.statistics_header.peakConnections"}),value:O3(e.monthlyConnection?e.monthlyConnection.max:0),color:Object(o.cssVariables)("green-5")}],onLegendClick:t,checkIsHidden:n}),[i,e.mau,e.monthlyConnection]);return Object(W.jsxs)(j3,{children:[Object(W.jsxs)(f3,{children:[Object(W.jsxs)(b3,{children:[i.formatMessage({id:"core.overview.statistics_label.monthly"}),Object(W.jsx)(t2,{tooltipContent:i.formatMessage({id:"core.overview.statistics_tooltip.monthly"}),popperProps:{modifiers:{offset:{offset:"-2, 4"}}},children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})]}),Object(W.jsx)(V.Nb,{start:l,end:d,onApply:({start:e,end:t})=>{r({startDate:e,endDate:t})}})]}),Object(W.jsx)(fb.k,{height:"280px",datasets:p,options:y3.month,renderLegend:g,showHighest:!0,noPadding:!0,colors:[Object(o.cssColors)("purple-7"),Object(o.cssColors)("green-5")]},"messaging_statistics_mau")]})},_3=({statistics:e,fetchDAURequest:t,fetchMessagesCountRequest:n,fetchDailyCCURequest:i})=>{const s=Object(E.a)(),[r,l]=Object(a.useState)(o.DateRangePickerValue.Last14Days),[d,u]=Object(a.useState)({startDate:c()().subtract(2,"weeks"),endDate:c()()}),{startDate:p,endDate:g}=d,h=Object(a.useCallback)(()=>{t({startDate:p.format(f.nb),endDate:g.format(f.nb)}),n({startDate:p.format(f.nb),endDate:g.format(f.nb)}),i(v3(p,g,"days",62))},[t,p,g,n,i]);Object(a.useEffect)(()=>{h()},[h]);const m=Object(a.useCallback)((e,t)=>{l(e),u(t)},[]),b=Object(a.useMemo)(()=>[{label:s.formatMessage({id:"core.overview.statistics_header.dailyActiveUsers"}),data:e.dau.series},{label:s.formatMessage({id:"core.overview.statistics_header.dailyMessages"}),data:e.messages.series},{label:s.formatMessage({id:"core.overview.statistics_header.peakConnections"}),data:e.connections.series}],[s,e.connections.series,e.dau.series,e.messages.series]),j=Object(a.useCallback)((t,n)=>Object(W.jsx)(a2,{metrics:[{title:s.formatMessage({id:"core.overview.statistics_header.dailyActiveUsers"}),value:O3(e.dau?e.dau.max:0)},{title:s.formatMessage({id:"core.overview.statistics_header.dailyMessages"}),value:O3(e.messages?e.messages.max:0),color:Object(o.cssVariables)("blue-5")},{title:s.formatMessage({id:"core.overview.statistics_header.peakConnections"}),value:O3(e.connections?e.connections.max:0),color:Object(o.cssVariables)("green-5")}],onLegendClick:t,checkIsHidden:n}),[s,e.connections,e.dau,e.messages]);return Object(W.jsxs)(j3,{children:[Object(W.jsxs)(f3,{children:[Object(W.jsxs)(b3,{children:[s.formatMessage({id:"core.overview.statistics_label.daily"}),Object(W.jsx)(t2,{tooltipContent:s.formatMessage({id:"core.overview.statistics_tooltip.daily"}),popperProps:{modifiers:{offset:{offset:"-2, 4"}}},children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})]}),Object(W.jsx)(o.DateRangePicker,{value:r,dateRange:d,onChange:m,minimumNights:7,maximumNights:92,placement:"bottom-end",size:"small"})]}),Object(W.jsx)(m3,{}),Object(W.jsx)(fb.k,{height:"280px",datasets:b,options:y3.day,showHighest:!0,renderLegend:j,noPadding:!0},"messaging_statistics_daily")]})},C3=({statistics:e,fetchHourlyCCURequest:t})=>{const n=Object(E.a)(),[i,s]=Object(a.useState)(c()()),r=Object(a.useCallback)(()=>{t(i.format(f.nb))},[i,t]);Object(a.useEffect)(()=>{r()},[r]);const l=Object(a.useMemo)(()=>[{label:n.formatMessage({id:"core.overview.statistics_header.hourlyPeakConnections"}),data:e.series}],[n,e.series]),d=Object(a.useCallback)((t,a)=>{var i;return Object(W.jsx)(a2,{metrics:[{title:n.formatMessage({id:"core.overview.statistics_header.hourlyPeakConnections"}),value:O3(null!=(i=null==e?void 0:e.max)?i:0)}],onLegendClick:t,checkIsHidden:a})},[n,e]);return Object(W.jsxs)(j3,{children:[Object(W.jsxs)(f3,{children:[Object(W.jsxs)(b3,{children:[n.formatMessage({id:"core.overview.statistics_label.hourly"}),Object(W.jsx)(t2,{tooltipContent:n.formatMessage({id:"core.overview.statistics_tooltip.hourly"}),popperProps:{modifiers:{offset:{offset:"-2, 4"}}},children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info",size:16})})]}),Object(W.jsx)(o.SingleDatePicker,{date:i,size:"small",onChange:e=>e&&s(e),popperProps:{placement:"bottom-end",positionFixed:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"}}}})]}),Object(W.jsx)(fb.k,{height:"280px",datasets:l,options:y3.hour,renderLegend:d,showHighest:!0,noPadding:!0,useArea:!0},"messaging_statistics_hourly")]})},k3=Object(r.default)(V.o).withConfig({displayName:"statistics__StyledStatistics",componentId:"sc-1eu5swn-0"})(["padding:24px;"]),w3={fetchMAURequest:j.c.fetchMAURequest,fetchDAURequest:j.c.fetchDAURequest,fetchMessagesCountRequest:j.c.fetchMessagesCountRequest,fetchDailyCCURequest:j.c.fetchDailyCCURequest,fetchMonthlyCCURequest:j.c.fetchMonthlyCCURequest,fetchHourlyCCURequest:j.c.fetchHourlyCCURequest},T3=Object(b.d)(e=>({checkYonggan:Object(u.e)(e.organizations),dau:Object(Ua.c)(e.overview.statistics.dau),mau:Object(Ua.f)(e.overview.statistics.mau),messages:Object(Ua.g)(e.overview.statistics.messages),connections:Object(Ua.d)(e.overview.statistics.connections),hourlyCCU:Object(Ua.e)(e.overview.statistics.hourlyCCU,e.overview.selectedHourlyDate),monthlyConnection:Object(Ua.h)(e.overview.statistics.monthlyConnection)}),w3)(({checkYonggan:e,dau:t,mau:n,messages:a,connections:i,hourlyCCU:s,monthlyConnection:r,fetchMAURequest:o,fetchDAURequest:l,fetchMessagesCountRequest:c,fetchDailyCCURequest:d,fetchMonthlyCCURequest:u,fetchHourlyCCURequest:p})=>Object(W.jsxs)(k3,{children:[Object(W.jsx)(x3,{statistics:{mau:n,monthlyConnection:r},fetchMAURequest:o,fetchMonthlyCCURequest:u}),Object(W.jsx)(_3,{statistics:{dau:t,messages:a,connections:i},fetchDAURequest:l,fetchMessagesCountRequest:c,fetchDailyCCURequest:d}),e&&Object(W.jsx)(C3,{statistics:s,fetchHourlyCCURequest:p})]}));var S3=n("LZ/X");const E3=`${c()().tz("UTC").startOf("month").format(f.A)} - ${c()().tz("UTC").format(f.A)}`,I3=(e,t)=>{switch(t.type){case"UPDATE_USAGE_REQUEST":return{...e,isFetchingUsage:!0};case"UPDATE_USAGE_SUCCESS":return{...e,isFetchingUsage:!1,usage:t.payload,didFailToFetchUsage:!1};case"UPDATE_USAGE_FAIL":return{...e,isFetchingUsage:!1,didFailToFetchUsage:!0};case"UPDATE_QUOTA_REQUEST":return{...e,isFetchingQuota:!0};case"UPDATE_QUOTA_SUCCESS":return{...e,isFetchingQuota:!1,quota:t.payload,didFailToFetchQuota:!1};case"UPDATE_QUOTA_FAIL":return{...e,isFetchingQuota:!1,didFailToFetchQuota:!0};default:return e}},M3=()=>{const e=Object(P.c)(),t=Object(E.a)(),{isPermitted:n,isSelfService:i}=Object(P.h)(),{dispatch:s,...r}=(()=>{const[{isFetchingQuota:e,isFetchingUsage:t,quota:n,usage:i,didFailToFetchQuota:s,didFailToFetchUsage:r},o]=Object(a.useReducer)(I3,{quota:[],isFetchingQuota:!1,didFailToFetchQuota:!1,usage:[],isFetchingUsage:!1,didFailToFetchUsage:!1});return{dispatch:o,quota:n,usage:i,isFetchingQuota:e,isFetchingUsage:t,didFailToFetchQuota:s,didFailToFetchUsage:r}})(),{currentSubscription:o}=Object(S3.a)(f.bc.Chat),l=Object(a.useCallback)(async()=>{if(s({type:"UPDATE_USAGE_REQUEST"}),s({type:"UPDATE_QUOTA_REQUEST"}),!i||o)try{const n=(await Object(g$.fetchMessagingUsage)(e)).data.usage;s({type:"UPDATE_USAGE_SUCCESS",payload:[{label:t.formatMessage({id:"core.overview.usage.messaging_label.mau"}),description:E3,types:"only",data:{previousValue:n.mau.previous||0,value:n.mau.current||0}},{label:t.formatMessage({id:"core.overview.usage.messaging_label.dau"}),types:"only",data:{previousValue:n.dau.previous||0,value:n.dau.current||0}},{label:t.formatMessage({id:"core.overview.usage.messaging_label.connections"}),description:E3,types:"max",tooltip:t.formatMessage({id:"core.overview.usage.messaging_label.connections.tooltip"}),data:{current:n.ccu.peak||0,max:n.ccu.peak||0}}]}),s(i?{type:"UPDATE_QUOTA_SUCCESS",payload:[{label:t.formatMessage({id:"core.overview.quota.messaging_label.mau"}),usage:n.mau.current,quota:(null==o?void 0:o.plan.mau.purchased_units)||0,limit:(null==o?void 0:o.plan.mau.hard_limit)||0,showLegends:!0},{label:t.formatMessage({id:"core.overview.quota.messaging_label.connections"}),usage:n.ccu.peak,quota:(null==o?void 0:o.plan.pc.purchased_units)||0,limit:(null==o?void 0:o.plan.pc.hard_limit)||0,markerSuffix:" (Highest)"}]}:{type:"UPDATE_QUOTA_SUCCESS",payload:[{label:t.formatMessage({id:"core.overview.quota.messaging_label.mau"}),usage:n.mau.current,quota:n.mau.limit,showLegends:!0},{label:t.formatMessage({id:"core.overview.quota.messaging_label.connections"}),usage:n.ccu.peak,quota:n.ccu.limit,markerSuffix:" (Highest)"}]})}catch(e){Object(q.a)(e),s({type:"UPDATE_QUOTA_FAIL"}),s({type:"UPDATE_USAGE_FAIL"})}},[e,o,t,i,s]),c=n(["application.overview.view"]);return{...r,actions:{load:Object(a.useCallback)(()=>{c&&e&&l()},[c,e,l])}}},D3=r.default.section.withConfig({displayName:"ChatProductView__StyledProductView",componentId:"sc-1vafses-0"})([""," + ","{border-top:0;border-radius:0;}",":last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;}div[role='alert']{margin-bottom:16px;}"],V.o,V.o,V.o),A3=Object(r.default)(V.o).withConfig({displayName:"ChatProductView__ProductDetailContainer",componentId:"sc-1vafses-1"})(["display:grid;grid-template-columns:1fr 1fr;grid-column-gap:32px;padding:22px 24px;"," a{font-size:14px;font-weight:600;line-height:20px;letter-spacing:-0.15px;color:",";}"],({hasRowBelow:e})=>e?Object(r.css)(["border-bottom-left-radius:0;border-bottom-right-radius:0;"]):"",Object(o.cssVariables)("purple-7")),N3=r.default.div.withConfig({displayName:"ChatProductView__ProductDetailItem",componentId:"sc-1vafses-2"})(["position:relative;display:flex;flex-direction:column;min-height:334px;",":hover{font-weight:600;}"],V.s),R3=r.default.h3.withConfig({displayName:"ChatProductView__ProductDetailTitle",componentId:"sc-1vafses-3"})(["font-size:16px;font-weight:600;line-height:20px;letter-spacing:-0.15px;color:",";margin-bottom:22px;display:flex;align-items:center;"],Object(o.cssVariables)("neutral-10")),P3=({id:e,header:t,quota:n,usage:a,statistics:i})=>Object(W.jsxs)(D3,{"data-test-id":e,children:[t,Object(W.jsxs)(A3,{hasRowBelow:!!i,children:[n,a]}),i]}),L3=({title:e,tooltipContent:t,content:n,footer:a})=>Object(W.jsxs)(N3,{children:[Object(W.jsxs)(R3,{children:[e,t&&Object(W.jsx)(t2,{tooltipContent:t,popperProps:{modifiers:{offset:{offset:"-14, 4"}}},children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),n,a]}),F3=({onLoaded:e})=>{const t=Object(E.a)(),{isSelfService:n}=Object(P.h)(),{quota:i,usage:s,isFetchingQuota:r,isFetchingUsage:o,didFailToFetchQuota:l,didFailToFetchUsage:c,actions:{load:d}}=M3();Object(a.useEffect)(()=>{d()},[d]);const u=i.length>0&&s.length>0;return Object(a.useEffect)(()=>{u&&e()},[u,e]),Object(W.jsx)(P3,{id:"ChatProductView",quota:Object(W.jsx)(L3,{title:t.formatMessage({id:"core.overview.quota_title"}),content:l?Object(W.jsx)(r2,{onRetry:d,isRetrying:r}):Object(W.jsx)(s3,{usageProps:i,isFetching:r}),footer:n&&i.length>0&&Object(W.jsx)(V.s,{href:"settings/features",children:t.formatMessage({id:"core.overview.quota_link.viewMore"})})}),usage:Object(W.jsx)(L3,{title:t.formatMessage({id:"core.overview.usage_title"}),tooltipContent:t.formatMessage({id:"core.overview.usage_tooltip.messaging"}),content:c?Object(W.jsx)(r2,{onRetry:d,isRetrying:o}):Object(W.jsx)(p3,{usage:s,isFetching:o})}),statistics:Object(W.jsx)(T3,{})})},U3=r.default.div.withConfig({displayName:"ProductView__ProductViewContainer",componentId:"sc-1mxmxal-0"})(["position:relative;"]),$3=Object(r.default)(V.xb).withConfig({displayName:"ProductView__StyledLastUpdatedAt",componentId:"sc-1mxmxal-1"})(["position:absolute;top:0;right:0;height:40px;"]),B3=Object(r.default)(o.TabbedInterface).withConfig({displayName:"ProductView__StyledTabbedInterface",componentId:"sc-1mxmxal-2"})(["",""],({isSingle:e})=>e&&Object(r.css)(["a[role='tab']{cursor:initial;color:",";&:after{background-color:#fff;}}"],Object(o.cssVariables)("content-2"))),V3=r.default.div.withConfig({displayName:"ProductView__TabPanelWrapper",componentId:"sc-1mxmxal-3"})(["padding-top:16px;> section ~ section{margin-top:32px;}"]),z3=()=>{const e=(()=>{const{is_self_serve:e}=Object(P.O)(),{currentSubscription:t,isLoaded:n}=Object(g.b)(),a=!e||!n||t,i=Object(P.F)();return[a&&f.Jb.chat,i&&f.Jb.calls].filter(Boolean)})(),t=Object(Y1.a)(),[n,i]=Object(a.useState)(()=>{var n;const a=(e=>{var t;return null==(t=H.ClientStorage.getObject("overviewProductViewSelectedTab"))?void 0:t[e]})(t);return null!=(n=e.find(e=>e===a))?n:e[0]}),[s,r]=Object(a.useState)(0),o=Object(a.useCallback)((e=Date.now())=>r(e),[]);return{tabs:e,selected:n,updatedAt:s,setTab:e=>{i(e),((e,t)=>{H.ClientStorage.upsertObject("overviewProductViewSelectedTab",{[e]:t})})(t,e),r(0)},storeUpdatedAt:o}},H3=()=>{const e=Object(E.a)(),{tabs:t,setTab:n,selected:a,updatedAt:i,storeUpdatedAt:s}=z3();return Object(W.jsxs)(U3,{"data-test-id":"ProductView",children:[!!i&&Object(W.jsx)($3,{timestamp:i}),Object(W.jsx)(B3,{isSingle:1===t.length,tabs:t.map(t=>({title:e.formatMessage({id:{[f.Jb.chat]:"core.overview.tabs.chat",[f.Jb.calls]:"core.overview.tabs.calls"}[t]}),id:t})),activeTabIndex:t.findIndex(e=>e===a),onActiveTabChange:({tab:e})=>{e.id!==a&&n(e.id)},size:o.TabSize.Large,unmountInactiveTabPanels:!0,children:e=>{switch(e.id){case f.Jb.chat:return Object(W.jsx)(V3,{children:Object(W.jsx)(F3,{onLoaded:s})});case f.Jb.calls:return Object(W.jsxs)(V3,{children:[Object(W.jsx)(M2,{onLoaded:s}),Object(W.jsx)(n3,{})]});default:return null}}})]})},q3=e=>{const t=Object(E.a)(),n=Object(b.f)(),{setEnabledFeatures:i,isSelfService:s}=Object(x.a)(),[{status:r,data:l},c]=Object(sy.a)(async()=>Object(g$.fetchEnabledFeatures)(e||""),[e]),[{status:d,data:p,error:g},h]=Object(sy.a)(async t=>Object(g$.updateEnabledFeatures)({app_id:e||"",payload:t}),[e]);Object(a.useEffect)(()=>{s&&c()},[s,c]),Object(a.useEffect)(()=>{if(g){var e;const t=Object(mi.b)(g);if("object"==typeof(null==(e=g.data)?void 0:e.detail))return;o.toast.error({message:t})}},[g]),Object(a.useEffect)(()=>{"success"===d&&p&&(i(Object(u.f)(p.data)),n(j.c.fetchApplicationRequest({app_id:e})),o.toast.success({message:t.formatMessage({id:"common.changesSaved"})}))},[e,n,t,i,p,d]);const m=(null==p?void 0:p.data)||(null==l?void 0:l.data);return{isLoadingEnabledFeatures:"loading"===r||"loading"===d,enabledFeatures:m,load:c,update:h}},G3=r.default.section.withConfig({displayName:"application__StyledApplication",componentId:"sc-19yabr5-0"})(["border-radius:4px;padding-bottom:24px;border:1px solid ",";"],Object(o.cssVariables)("neutral-3")),W3=r.default.div.withConfig({displayName:"application__ApplicationHeader",componentId:"sc-19yabr5-1"})(["border-bottom:1px solid ",";display:grid;grid-template-columns:32px 1fr 144px;grid-gap:12px;align-items:start;padding:24px;"],Object(o.cssVariables)("neutral-3")),K3=Object(r.default)(o.Avatar).withConfig({displayName:"application__AppIcon",componentId:"sc-19yabr5-2"})([""]),Y3=r.default.h1.withConfig({displayName:"application__ApplicationName",componentId:"sc-19yabr5-3"})(["padding-top:2px;padding-right:20px;font-size:18px;line-height:28px;letter-spacing:-0.25px;color:",";font-weight:600;margin:0;"],Object(o.cssVariables)("neutral-10")),Q3=Object(r.default)(o.Button).withConfig({displayName:"application__UpgradeButton",componentId:"sc-19yabr5-4"})([""]),J3=Object(r.default)(o.Link).withConfig({displayName:"application__GoToSettingsWrapper",componentId:"sc-19yabr5-5"})(["font-size:14px;font-weight:600;align-self:center;justify-self:flex-end;&:hover{font-weight:600;}"]),X3=r.default.div.withConfig({displayName:"application__ApplicationDetail",componentId:"sc-19yabr5-6"})(["position:relative;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:32px;padding:24px 24px 0;","{position:absolute;top:24px;right:24px;}"],J3),Z3=r.default.div.withConfig({displayName:"application__StyledApplicationDetailItem",componentId:"sc-19yabr5-7"})(["display:flex;flex-direction:column;ul + *{margin-top:16px;}a{font-size:14px;font-weight:600;}"]),e4=r.default.ul.withConfig({displayName:"application__ADIItems",componentId:"sc-19yabr5-8"})(["li{list-style:none;display:flex;align-items:center;margin-top:4px;height:20px;&:first-child{margin-top:0;}.adi__item__label{",";width:111px;color:",";}.adi__item__text{display:flex;align-items:center;margin-right:4px;margin-left:16px;",";color:",";","{margin-left:8px;}a:hover{font-weight:600;}}}"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"],Object(o.cssVariables)("neutral-10"),o.Lozenge),t4=r.default.h2.withConfig({displayName:"application__ADITitle",componentId:"sc-19yabr5-9"})(["font-size:16px;font-weight:500;line-height:20px;letter-spacing:-0.15px;color:",";margin:0 0 12px 0;"],Object(o.cssVariables)("neutral-10")),n4=r.default.div.withConfig({displayName:"application__RegionName",componentId:"sc-19yabr5-10"})(["position:relative;margin-right:10px;&:after{position:absolute;content:'';top:10px;right:-6px;width:2px;height:2px;border-radius:1px;background:",";}"],Object(o.cssVariables)("neutral-6")),a4=r.default.div.withConfig({displayName:"application__NotificationsWrapper",componentId:"sc-19yabr5-11"})(["margin:16px 24px 0;"]),i4=({title:e,items:t,footer:n})=>{const i=Object(a.useCallback)(e=>Object(W.jsxs)("li",{className:"adi__item",children:[Object(W.jsx)("div",{className:"adi__item__label",children:e.label}),Object(W.jsx)("div",{className:"adi__item__text",children:e.component||e.text}),e.action&&Object(W.jsx)("div",{className:"adi__item__action",id:e.action.id,children:Object(W.jsx)(o.IconButton,{buttonType:"tertiary",size:"xsmall",icon:e.action.icon,onClick:()=>{e.action&&e.action.onClick&&e.action.onClick(e)},title:e.action.label})})]},e.label),[]);return Object(W.jsxs)(Z3,{children:[Object(W.jsx)(t4,{children:e}),Object(W.jsx)(e4,{style:1===t.length?{flex:1}:{},children:t.map(e=>i(e))}),n]})},s4=()=>{const e=Object(E.a)();return Object(W.jsx)(J3,{href:"settings",useReactRouter:!0,children:e.formatMessage({id:"core.overview.application.info.link.viewMore"})})},r4=({notifications:e})=>{const t=Object(E.a)(),n=Object(b.f)(),{isSelfService:i}=Object(P.h)(),s=Object(b.g)(e=>e.applicationState.data),r=Object(P.O)(),l=Object(P.F)(),{enabledFeatures:d}=q3(null==s?void 0:s.app_id),{currentSubscription:u}=Object(S3.a)(f.bc.Chat),p=Object(a.useMemo)(()=>{if(!d||!u)return;const e=Object.entries(d).filter(([e])=>"webhook"!==e);return{active:e.filter(([,e])=>!!e).length,total:e.length}},[u,d]);if(!s)return null;const{app_name:g,app_id:h,plan:m,region:y,created_at:O,current_premium_features:v}=s,{usage:{active:x,total:_}}=Object(H.getPremiumFeatures)(v);return Object(W.jsxs)(G3,{"data-test-id":"ApplicationSection",children:[Object(W.jsxs)(W3,{children:[Object(W.jsx)(K3,{size:"medium",type:o.AvatarType.Application,profileID:h}),Object(W.jsx)(Y3,{"data-test-id":"ApplicationName",children:g}),i?Object(W.jsx)(s4,{}):Object(W.jsx)(Q3,{buttonType:"secondary",size:"small",onClick:()=>{window.open("https://sendbird.com/contact-sales")},children:t.formatMessage({id:"core.overview.application_button.upgradePlan"})})]}),Object(W.jsxs)(X3,{children:[!i&&Object(W.jsx)(s4,{}),Object(W.jsx)(i4,{title:t.formatMessage({id:"core.overview.application.info.title"}),items:[{label:t.formatMessage({id:"core.overview.application.info.label.createdAt"}),text:c()(O).format("ll")},{label:t.formatMessage({id:"core.overview.application.info.label.appId"}),text:h,action:{id:"tourTargetAppId",icon:"copy",onClick:e=>{vi()(e.text),o.toast.info({message:t.formatMessage({id:"core.overview.application.info.appId.toast.message"}),actions:[{label:t.formatMessage({id:"core.overview.application.info.appId.toast.action"}),onClick:()=>{window.open("https://sendbird.com/docs")}}]})},label:t.formatMessage({id:"ui.button.copy"})}},{label:t.formatMessage({id:"core.overview.application.info.label.region"}),component:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(n4,{children:Object.prototype.hasOwnProperty.call(r.regions,y)?r.regions[y].name:y}),Object(W.jsx)(o.Link,{href:Object.keys(f.Rb).includes(y)?f.Rb[y]:"https://status.sendbird.com",target:"_blank",iconProps:{size:16,icon:"open-in-new"},children:t.formatMessage({id:"core.overview.application.info.viewStatus"})})]})}]}),i?Object(W.jsx)(i4,{title:t.formatMessage({id:"core.overview.application.info.products.title"}),items:[{label:t.formatMessage({id:"core.overview.application.info.products.chat.label"}),component:p?Object(W.jsx)(V.s,{href:"settings/features",children:t.formatMessage({id:"core.overview.application.info.products.chat.text"},p)}):f.Z},l&&{label:t.formatMessage({id:"core.overview.application.info.products.calls.label"}),component:t.formatMessage({id:"core.overview.application.info.products.calls.text.activated"})}].filter(Boolean)}):Object(W.jsx)(i4,{title:t.formatMessage({id:"core.overview.application.subscriptionPlan.title"}),items:[{label:t.formatMessage({id:"core.overview.application.subscriptionPlan.label.plan"}),text:"enterprise"===m?"Custom":"Free"},{label:t.formatMessage({id:"core.overview.application.subscriptionPlan.label.features"}),component:Object(W.jsx)(V.s,{onClick:()=>{n(j.b.showDialogsRequest({dialogTypes:A.a.SubscriptionPlan}))},"data-test-id":"PremiumFeatureCount",children:t.formatMessage({id:"core.overview.application.subscriptionPlan.text.features"},{active:x,total:_})})}]})]}),e&&e.length>0&&Object(W.jsx)(a4,{children:e})]})};var o4=n("7Sp0");const l4=r.default.div.withConfig({displayName:"eyeCatcher__StyledEyeCatcher",componentId:"vr7zoo-0"})(["display:grid;grid-template-columns:1fr 1fr;grid-column-gap:32px;"]),c4=Object(r.default)(o4.a).withConfig({displayName:"eyeCatcher__EyeCatcherItem",componentId:"vr7zoo-1"})([""," background:",";border-radius:4px;padding:24px;"],o4.b,Object(o.cssVariables)("neutral-1")),d4=()=>{const e=Object(E.a)();return Object(W.jsxs)(l4,{children:[Object(W.jsxs)(c4,{children:[Object(W.jsx)("h3",{children:e.formatMessage({id:"core.overview.eyeCatcher.title.docs"})}),Object(W.jsx)("p",{children:e.formatMessage({id:"core.overview.eyeCatcher.description.docs"})}),Object(W.jsx)(V.s,{href:"https://sendbird.com/docs",target:"_blank",useReactRouter:!1,children:e.formatMessage({id:"core.overview.eyeCatcher.link.docs"})})]}),Object(W.jsxs)(c4,{children:[Object(W.jsx)("h3",{children:e.formatMessage({id:"core.overview.eyeCatcher.title.help"})}),Object(W.jsx)("p",{children:e.formatMessage({id:"core.overview.eyeCatcher.description.help"})}),Object(W.jsx)(V.s,{href:"https://help.sendbird.com",target:"_blank",useReactRouter:!1,children:e.formatMessage({id:"core.overview.eyeCatcher.link.help"})})]})]})},u4=Object(r.default)(V.z).withConfig({displayName:"overview__OverviewContainer",componentId:"e6a2ew-0"})(["padding-top:32px;padding-bottom:80px !important;"]),p4=r.default.div.withConfig({displayName:"overview__Section",componentId:"e6a2ew-1"})(["margin:0;display:grid;grid-row-gap:","px;& + &{margin-top:16px;}","{margin-right:0;margin-left:0;}"],({gap:e})=>e||32,V.o),g4=r.default.div.withConfig({displayName:"DynamicPartitioningConverter__ConvertInProgress",componentId:"sc-13v9pai-0"})(["display:flex;flex-direction:row;color:",";",";> * + *{margin-left:8px;}"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"]),h4=r.default.div.withConfig({displayName:"DynamicPartitioningConverter__Running",componentId:"sc-13v9pai-1"})(["> * + *{margin-top:24px;}"]);var m4=Object(r.default)(o.Spinner).withConfig({displayName:"DynamicPartitioningConverter___StyledSpinner",componentId:"sc-13v9pai-2"})(["margin:0 auto;align-self:center;"]);const f4=({onConvertButtonClick:e,conversionState:t})=>{const n=Object(E.a)();switch(t){case"never":case"failed":return Object(W.jsx)(o.InlineNotification,{type:"info",message:n.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.convertNow"},{convert:t=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,role:"button",onClick:e,children:t})})});case"running":case"migrationDone":case"retrying":return Object(W.jsxs)(h4,{children:[Object(W.jsxs)(g4,{role:"progressbar",children:[Object(W.jsx)("span",{children:n.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.convertInProgress"})}),Object(W.jsx)(o.Spinner,{size:16,stroke:Object(o.cssVariables)("neutral-6")})]}),Object(W.jsx)(o.InlineNotification,{type:"info",message:n.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.convertInProgress.description"})})]});default:return Object(W.jsx)(m4,{size:24,stroke:Object(o.cssVariables)("neutral-6")})}},b4={single_subchannel:{label:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.singleSubchannel",description:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.singleSubchannel.desc"},multiple_subchannels:{label:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.multipleSubchannels",description:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.multipleSubchannels.desc"},custom:{label:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.custom",description:"chat.settings.channels.openChannels.dynamicPartitioningOptions.options.custom.desc"}},j4=r.default.div.withConfig({displayName:"DynamicPartitioningOptions__Support",componentId:"sc-1tczh9h-0"})(["",";white-space:pre-line;hr{position:relative;top:-24px;border:0;background:",";height:1px;}"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-3"));var y4=Object(r.default)(o.Link).withConfig({displayName:"DynamicPartitioningOptions___StyledLink",componentId:"sc-1tczh9h-1"})(["svg{vertical-align:top;margin-top:1px;}"]);const O4=({setUnsaved:e})=>{const t=Object(E.a)(),n=tY(),{isLoading:i,option:s,isUsingDynamicPartitioning:r}=nY(),{confirmConversion:l,conversionState:c}=PZ(),[{isLoading:d,error:u},p]=wZ(),[g,h]=Object(a.useState)(s),m=s!==g;Object(a.useEffect)(()=>{e(m)},[m,e]),Object(P.s)(u);const f=t.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions"}),b=t.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.desc"},{a:e=>Object(W.jsx)(y4,{variant:o.LinkVariant.Inline,iconProps:{icon:"open-in-new",size:16},target:"_blank",href:"https://sendbird.com/docs/chat/v3/platform-api/guides/open-channel",children:e})});if(!r)return Object(W.jsx)(iy.i,{title:f,description:b,gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(f4,{onConvertButtonClick:l,conversionState:c})});return Object(W.jsx)(iy.m,{title:f,description:b,gridItemConfig:{subject:{alignSelf:"start"}},extra:Object(W.jsxs)(o.Grid,{gap:["0","32px"],children:[Object(W.jsx)(o.GridItem,{colSpan:6}),Object(W.jsx)(o.GridItem,{colSpan:6,children:Object(W.jsxs)(j4,{children:[Object(W.jsx)("hr",{}),t.formatMessage({id:"chat.settings.channels.openChannels.dynamicPartitioningOptions.support"},{a:e=>Object(W.jsx)(V.yb,{variant:o.LinkVariant.Inline,permissions:oY.a,useReactRouter:!0,href:"/settings/contact_us?category=technical_issue",children:e})})]})})]}),isFetching:i||d,initialValue:s,selectedValue:g,onChange:e=>h(e),onReset:()=>h(s),onSave:()=>{g&&p(g)},radioItems:n.map(({key:e,max_channel_participants:n})=>({value:e,label:t.formatMessage({id:b4[e].label}),description:t.formatMessage({id:b4[e].description},{max_channel_participants:t.formatNumber(n)})}))})},v4={CHANNEL_CREATE:"core.settings.application.message.autoMessage.channel_created",PRIVATE_CHANNEL:"core.settings.application.message.autoMessage.channel_private",PUBLIC_CHANNEL:"core.settings.application.message.autoMessage.channel_public",USER_JOIN:"core.settings.application.message.autoMessage.user_joins",USER_LEAVE:"core.settings.application.message.autoMessage.user_leaves",DEACTIVATED:"core.settings.application.message.autoMessage.user_leaves.byAdmin_deactivate",DELETED:"core.settings.application.message.autoMessage.user_leaves.byAdmin_delete",LEFT:"core.settings.application.message.autoMessage.user_leaves.bySelf",LEFT_BY_OWN_CHOICE:"core.settings.application.message.autoMessage.user_leaves.bySelf",CHANNEL_OPERATOR_REMOVED:"core.settings.application.message.autoMessage.user_leaves.byOperator_remove",ADMIN_REMOVED:"core.settings.application.message.autoMessage.user_leaves.byAdmin_ban",ADMIN_DELETED:"core.settings.application.message.autoMessage.user_leaves.byAdmin_delete",ADMIN_DEACTIVATED:"core.settings.application.message.autoMessage.user_leaves.byAdmin_deactivate",CHANNEL_CHANGE:"core.settings.application.message.autoMessage.property_changed"},x4=["LEFT_BY_OWN_CHOICE","ADMIN_REMOVED","ADMIN_DELETED","ADMIN_DEACTIVATED","CHANNEL_OPERATOR_REMOVED"],_4=r.default.ul.withConfig({displayName:"autoMessage__OptionsContainer",componentId:"sc-37jgui-0"})(["padding:11px 0;list-style:none;& + &{border-top:1px solid ",";}&:first-child{padding-top:0;}&:last-child{padding-bottom:0;}"],Object(o.cssVariables)("neutral-3")),C4=r.default.li.withConfig({displayName:"autoMessage__OptionList",componentId:"sc-37jgui-1"})(["display:flex;align-items:center;margin-left:24px;padding:5px 0;label{font-weight:400 !important;b{font-weight:600 !important;}}&:first-child{margin-left:0;label{font-weight:500 !important;}}","{margin-left:8px;}"],o.Lozenge),k4=i.a.memo(({application:e,isFetchingAutoEventMessage:t,isEditable:n,setUnsaved:i,updateAutoEventMessageRequest:s})=>{const r=Object(E.a)(),{auto_event_message:l}=e.attrs,c=Object(o.useForm)({onSubmit:({PRIVATE_CHANNEL:e,PUBLIC_CHANNEL:t,USER_JOIN:n,DEACTIVATED:a,DELETED:i,LEFT:r,ADMIN_DELETED:o,ADMIN_DEACTIVATED:l,ADMIN_REMOVED:d,LEFT_BY_OWN_CHOICE:u,CHANNEL_OPERATOR_REMOVED:p,CHANNEL_CHANGE:g})=>{s({auto_event_message:{CHANNEL_CHANGE:{CHANNEL_CHANGE:g},CHANNEL_CREATE:{PUBLIC_CHANNEL:t,PRIVATE_CHANNEL:e},USER_JOIN:{USER_JOIN:n},USER_LEAVE:{DELETED:i,DEACTIVATED:a,LEFT:r,ADMIN_DELETED:o,ADMIN_DEACTIVATED:l,ADMIN_REMOVED:d,LEFT_BY_OWN_CHOICE:u,CHANNEL_OPERATOR_REMOVED:p}},onSuccess:c.onSuccess})}}),d={CHANNEL_CHANGE:{CHANNEL_CHANGE:void 0},CHANNEL_CREATE:{PUBLIC_CHANNEL:void 0,PRIVATE_CHANNEL:void 0},USER_JOIN:{USER_JOIN:void 0},USER_LEAVE:{DELETED:void 0,DEACTIVATED:void 0,LEFT:void 0,ADMIN_DELETED:void 0,ADMIN_DEACTIVATED:void 0,ADMIN_REMOVED:void 0,LEFT_BY_OWN_CHOICE:void 0,CHANNEL_OPERATOR_REMOVED:void 0}};Object.entries(l).filter(([e])=>e in v4).sort().forEach(([e,t])=>Object.keys(t).forEach(n=>{d[e][n]=Object(o.useField)(n,c,{defaultValue:t[n],isControlled:!0})}));const u=Object(a.useCallback)(e=>c.onSubmit(e),[c]),p=Object(a.useCallback)(e=>{e.preventDefault(),c.onSubmit(e)},[c]);let g=!1;Object.entries(d).sort().forEach(([,e])=>Object.entries(e).filter(([,e])=>!!e).sort().reduce((e,[,t])=>(t&&t.updatable&&e.push(t.updatable),e.some(e=>e)&&(g=!0),e),[]));const h=Object.entries(d).map(([,e])=>Object.entries(e).filter(([,e])=>!!e).map(([,e])=>e.updatable)).reduce((e,t)=>(t.forEach(t=>e.push(t)),e),[]);return Object(a.useEffect)(()=>{i(h.some(e=>e))},[i,h]),Object(W.jsx)(Dy.c,{title:r.formatMessage({id:"core.settings.application.message.autoMessage.title"}),description:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Dy.b,{display:"block",children:r.formatMessage({id:"core.settings.application.message.autoMessage.desc"})}),Object(W.jsx)(Dy.b,{display:"block",fontSize:12,children:Object(W.jsx)(ge.a,{id:"core.settings.application.message.autoMessage.desc_sub",values:{data:Object(W.jsx)("b",{children:"data"})}})})]}),gridItemConfig:{subject:{alignSelf:"start"}},showActions:g,actions:[{key:"auto-message-cancel",label:r.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:c.reset},{key:"auto-message-save",label:r.formatMessage({id:"label.save"}),buttonType:"primary",onClick:u,isLoading:t,disabled:t||!n}],children:Object(W.jsx)("form",{onSubmit:p,children:Object.entries(d).map(([e,t])=>{let i=!1,s=!1,l=!1;Object.entries(t).sort().reduce((e,[,t])=>(e.push((null==t?void 0:t.value)||!1),i=!!e.every(e=>e),s=!!e.every(e=>!e),l=!(!e.some(e=>!e)||s||i),e),[]);const c=Object(a.useCallback)(()=>{Object.entries(t).filter(([,e])=>!!e).sort().forEach(([,e])=>e.updateValue(!i))},[t,i]);return Object(W.jsxs)(_4,{children:[Object.keys(t).length>1?Object(a.useMemo)(()=>Object(W.jsx)(C4,{children:Object(W.jsx)(o.Checkbox,{checked:i,name:e,indeterminate:l,label:r.formatMessage({id:v4[e]}),onChange:c,disabled:!n})},`option-group-${e}`),[i,l,e,c]):null,Object.entries(t).filter(([,e])=>!!e).sort().map(([e,t])=>Object(a.useMemo)(()=>{return Object(W.jsxs)(C4,{children:[Object(W.jsx)(o.Checkbox,{checked:t.value,name:t.name,label:r.formatMessage({id:v4[e]}),onChange:(a=t,()=>{a.updateValue(!a.value)}),disabled:!n}),x4.includes(e)&&Object(W.jsx)(o.Lozenge,{color:"purple",variant:o.LozengeVariant.Light,children:"NEW"})]},`option-sub-${e}`);var a},[e,t]))]},e)})})})});var w4=n("Rjl6");const T4=i.a.memo(({application:e,isFetchingIgnoreMessageOffset:t,isEditable:n,updateIgnoreMessageOffsetRequest:a})=>{const i=Object(E.a)(),{ignore_message_offset:s}=e;return Object(W.jsx)(w4.a,{title:i.formatMessage({id:"core.settings.application.message.chatHistory.title"}),description:i.formatMessage({id:"core.settings.application.message.chatHistory.desc"}),checked:s,isFetching:t,confirmDialogProps:{title:i.formatMessage({id:"core.settings.application.message.chatHistory.dialog.title"},{nextToggle:s?"Hide":"Show"}),description:i.formatMessage({id:s?"core.settings.application.message.chatHistory.dialog.desc_on2off":"core.settings.application.message.chatHistory.dialog.desc_off2on"}),confirmText:i.formatMessage({id:"core.settings.application.message.chatHistory.dialog.button"}),onConfirm:()=>a(!s)},isToggleDisabled:!n})}),S4=r.default.h3.withConfig({displayName:"ChannelsSettings__SectionTitle",componentId:"sc-1hm6kkk-0"})(["color:",";margin-bottom:12px;",";"," + &{margin-top:32px;}"],Object(o.cssVariables)("neutral-7"),o.Subtitles["subtitle-02"],Dy.d),E4=(e,t)=>n=>{e!==n&&t(n)};var I4=Object(r.default)(KE.b).withConfig({displayName:"ChannelsSettings___StyledAppSettingsContainer",componentId:"sc-1hm6kkk-1"})([""," + *{margin-top:32px;}"],KE.a);const M4=()=>{const e=Object(E.a)(),[t,n]=Object(a.useState)({dynamicPartitioning:!1,autoMessage:!1}),{application:i,isFetchingIgnoreMessageOffset:s,isFetchingAutoEventMessage:r}=Object(P.V)(e=>{const{isFetchingIgnoreMessageOffset:t,isFetchingAutoEventMessage:n}=e.settings;return{application:e.applicationState.data,isFetchingIgnoreMessageOffset:t,isFetchingAutoEventMessage:n}}),{isPermitted:o}=Object(P.h)(),{isUsingDynamicPartitioning:l,option:c}=nY(),d=tY(),u=o(["application.settings.all"]),p=Object(P.q)(j.c.updateIgnoreMessageOffsetRequest),g=Object(P.q)(j.c.updateAutoEventMessageRequest),h=Object(a.useCallback)((e,t)=>n(n=>({...n,[e]:t})),[]),m=Object(a.useMemo)(()=>E4(t.autoMessage,e=>h("autoMessage",e)),[t.autoMessage,h]),f=Object(a.useMemo)(()=>E4(t.dynamicPartitioning,e=>h("dynamicPartitioning",e)),[t.dynamicPartitioning,h]);if(!i)return null;const b=d.length>0||!l;return Object(W.jsxs)(I4,{children:[Object(W.jsx)(V.wc,{when:Object.values(t).some(e=>e)}),Object(W.jsxs)(KE.a,{children:[Object(W.jsx)(KE.a.Title,{children:e.formatMessage({id:"chat.settings.channels.title"})}),Object(W.jsx)(KE.a.Description,{children:e.formatMessage({id:"chat.settings.channels.description"})})]}),b&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(S4,{id:"channels-openchannels",children:e.formatMessage({id:"chat.settings.channels.openChannels"})}),Object(W.jsx)(Dy.d,{"aria-labelledby":"channels-openchannels",children:Object(W.jsx)(O4,{setUnsaved:f},c||"")})]}),Object(W.jsx)(S4,{id:"channels-groupchannels",children:e.formatMessage({id:"chat.settings.channels.groupChannels"})}),Object(W.jsxs)(Dy.d,{"aria-labelledby":"channels-groupchannels",children:[Object(W.jsx)(T4,{application:i,isFetchingIgnoreMessageOffset:s,isEditable:u,updateIgnoreMessageOffsetRequest:p}),Object(W.jsx)(k4,{application:i,isFetchingAutoEventMessage:r,isEditable:u,setUnsaved:m,updateAutoEventMessageRequest:g})]})]})};var D4=n("toZZ");const A4=Object(a.createContext)({isLoadingEnabledFeatures:!1,enabledFeatures:{},update:()=>{},toggleFeature:()=>()=>{},currentSubscription:null,messageSearchPipeline:{isInitial:!0,isLive:!1,subscribed:!1,migrationErrored:!1,migrationScheduled:!1,migrationExecuting:!1,doingHistoryMigration:!1,waitingForMigrationStopped:!1,preventShowPercent:!1}}),N4=({children:e})=>{var t;const n=Object(E.a)(),i=Object(a.useRef)(-1),s=Object(b.g)(e=>e.applicationState.data),{isLoadingEnabledFeatures:r,enabledFeatures:o,load:l,update:c}=q3(null==s?void 0:s.app_id),{currentSubscription:d}=Object(S3.a)(f.bc.Chat),u=Object(pY.b)(),{status:p,load:g,data:h}=(()=>{const e=Object(D4.b)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),[{status:t,data:n,error:i},s]=Object(sy.a)(async()=>Object(g$.getMessageSearchPipeline)(e||""),[e]);return Object(a.useEffect)(()=>{s()},[s]),{status:t,load:s,data:(null==n?void 0:n.data)||null,error:i}})(),m=(null==h?void 0:h.migration_status)===f.wb.MigrationErrored,j=!(null!=h&&h.is_live||(null==h?void 0:h.migration_status)!==f.wb.Scheduled&&(null==h?void 0:h.migration_status)!==f.wb.Executing),y=(null==h?void 0:h.migration_status)!==f.wb.Stopped&&(null==h?void 0:h.subscription_status)===f.xb.Unsubscribed;Object(a.useEffect)(()=>{if("success"===p&&(j||y)){-1!==i.current&&window.clearInterval(i.current);const e=window.setInterval(g,3e3);return i.current=e,()=>{window.clearInterval(e)}}},[p,y,j,g]),Object(a.useEffect)(()=>()=>{-1!==i.current&&window.clearInterval(i.current)},[]);const O=Object(P.W)();return Object(W.jsx)(A4.Provider,{value:{isLoadingEnabledFeatures:r,enabledFeatures:o,update:c,toggleFeature:e=>(t,a)=>{a.stopPropagation();const i=u({featureKey:e.key}),r=t?n.formatMessage({id:"chat.settings.features.confirmDialog.title.on"},{featureName:i}):n.formatMessage({id:"chat.settings.features.confirmDialog.title.off"},{featureName:i}),o=t?n.formatMessage({id:"chat.settings.features.confirmDialog.description.on"},{featureName:i,applicationName:null==s?void 0:s.app_name}):n.formatMessage({id:"chat.settings.features.confirmDialog.description.off"},{featureName:i,applicationName:null==s?void 0:s.app_name});O({dialogTypes:A.a.Confirm,dialogProps:{title:r,description:o,onConfirm:async n=>{n(!0);const a=await c({[e.key]:t});if(e.key===f.u.MessageSearch){if(200!==a.status&&(Object.prototype.hasOwnProperty.call(a.data.detail,"subscription_status")&&(await l(),await g()),a.data.detail.message))throw Error(a.data.detail.message);await g()}n(!1)},confirmText:"OK"}})},currentSubscription:d,messageSearchPipeline:{isInitial:!h,isLive:null!=(t=null==h?void 0:h.is_live)&&t,subscribed:(null==h?void 0:h.subscription_status)===f.xb.Subscribed,migrationScheduled:(null==h?void 0:h.migration_status)===f.wb.Scheduled,migrationExecuting:(null==h?void 0:h.migration_status)===f.wb.Executing,migrationErrored:m,doingHistoryMigration:j,waitingForMigrationStopped:y,preventShowPercent:!h||m||j}},children:e})};var R4=n("kKuS"),P4=n("dcNB"),L4=n("7hkf");const F4=c()(),U4=e=>{var t,n,i,s;const r=(null==e?void 0:e.isSelfService)||!0,o=null!=(t=null==e?void 0:e.date)?t:F4,l=Object(D4.b)(e=>e.applicationState.data),c=null==l?void 0:l.app_id,d=e?(null==e||null==(n=e.feature)||null==(i=n.plans)?void 0:i.map(({usageField:e})=>e).join(","))||(null==e||null==(s=e.feature)?void 0:s.key):"",[{status:u,data:p},g]=Object(sy.a)(async()=>{const e={target_month:o.format("YYYY-MM"),fields:d};return await Object(P1.fetchApplicationMonthlyUsageWithOrgUsages)(c||"",e)},[o,d,c]);return Object(a.useEffect)(()=>{r&&g()},[r,g]),{isLoadingUsage:"loading"===u,usageWithOrgUsages:null==p?void 0:p.data.data,updatedDt:null==p?void 0:p.data.data.updated_dt}},$4=["ap-1","ap-2","ap-5","ap-8","ap-9","us-1","us-2","us-3","eu-1","intoz"],B4=()=>{const e=Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.region});return $4.includes(e||"")};var V4=n("BYGL");const z4=r.default.div.withConfig({displayName:"AutoTranslation__Wrapper",componentId:"sc-1ir5t3g-0"})(["margin-bottom:32px;"]),H4=[{label:"Google translate",value:"google"},{label:"Microsoft translator",value:"bing"}],q4=({isDisabled:e})=>{const t=Object(E.a)(),{fetchStatus:n,isUpdating:i,original:s,update:r}=(()=>{const e=Object(b.g)(e=>e.applicationState.data),[{status:t,data:n},i]=Object(P.g)(async()=>Object(g$.fetchTranslationSetting)({appId:null==e?void 0:e.app_id}),[]),[{status:s,data:r,error:l},c]=Object(P.g)(async t=>await Object(g$.updateTranslationSetting)({appId:null==e?void 0:e.app_id,payload:{translation_vendor:t}}),[]);return Object(a.useEffect)(()=>{i()},[i]),Object(a.useEffect)(()=>{l&&o.toast.error({message:Object(mi.b)(l)})},[l]),{fetchStatus:t,isUpdating:"loading"===s,original:(null==r?void 0:r.data.translation_vendor)||(null==n?void 0:n.data.translation_vendor),update:c}})(),[l,c]=Object(a.useState)(H4[0]);Object(a.useEffect)(()=>{const e=H4.find(e=>e.value===s);e&&c(e)},[s]);return Object(W.jsx)(z4,{children:Object(W.jsx)(iy.i,{title:t.formatMessage({id:"chat.settings.features.autoTranslation.title"}),description:t.formatMessage({id:"chat.settings.features.autoTranslation.description"}),showActions:"success"===n&&l.value!==s,actions:[{key:"autoTranslation_cancel",label:t.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>c(s)},{key:"autoTranslation_save",label:t.formatMessage({id:"label.save"}),buttonType:"primary",onClick:()=>{try{r(l.value),o.toast.success({message:t.formatMessage({id:"common.changesSaved"})})}catch(e){o.toast.error({message:Object(mi.b)(e)})}},isLoading:i,disabled:i}],isDisabled:e,children:Object(W.jsx)(o.Dropdown,{disabled:e,items:H4,selectedItem:l,onItemSelected:e=>{c(e)},itemToString:e=>e.label,width:"100%"})})})};var G4=n("QEtb"),W4=n("AuOK");const K4=r.default.div.withConfig({displayName:"FeaturesDetailContent__UsageUnavailable",componentId:"sc-19o8tza-0"})(["font-size:12px;line-height:16px;text-align:center;color:",";height:122px;display:flex;justify-content:center;padding-top:32px;"],Object(o.cssVariables)("neutral-7")),Y4=r.default.section.withConfig({displayName:"FeaturesDetailContent__UsageSection",componentId:"sc-19o8tza-1"})(["padding:0 24px;& + &{margin-top:24px;}"]),Q4=({feature:e,usageField:t,isFeatureEnabled:n,isFreeTrial:i,isLoading:s,usage:r,others:o,quota:l,limit:c,quotaNotification:d,placeholder:u})=>{const p=Object(E.a)(),g=Object(P.W)(),h=Object(a.useCallback)(()=>{g({dialogTypes:A.a.Overage})},[g]),m=Object(H.isByteUsageFeature)(t)?"gigabyte":"";return Object(W.jsx)(G4.a,{title:(()=>{if(f.yb.includes(t))return p.formatMessage({id:`common.features.usage.${e.key}.${t}.title`})})(),description:(()=>{if(f.yb.includes(t))return p.formatMessage({id:`common.features.usage.${e.key}.${t}.description`})})(),placeholder:u,quotaNotification:d,isLoading:n&&s,disabled:!u&&!n,children:null!=e&&e.trackable?Object(W.jsx)(Y4,{children:Object(W.jsx)(V.yc,{usageField:t,variant:"medium",unitType:m,label:"",usage:r,others:o,quota:l,limit:c,showLegends:!0,showAlert:!0,showBarChartRange:!0,legendLabels:{usage:p.formatMessage({id:"chat.settings.features.detail.usage.currentApplication"}),others:p.formatMessage({id:"chat.settings.features.detail.usage.otherApplications"}),remains:p.formatMessage({id:"chat.settings.features.detail.usage.remaining"})},tooltipLabels:{usage:p.formatMessage({id:"chat.settings.features.detail.usage.currentApplication"}),others:p.formatMessage({id:"chat.settings.features.detail.usage.otherApplications"}),remains:p.formatMessage({id:"chat.settings.features.detail.usage.remaining"})},availabilityTooltips:Object(W4.a)({intl:p,limit:c,isFreeTrial:i,onLinkClick:h,unit:m})})}):Object(W.jsx)(Y4,{children:Object(W.jsx)(K4,{children:p.formatMessage({id:"chat.settings.features.detail.usage.unavailable"})})})})},J4=r.default.div.withConfig({displayName:"FeaturesDetail__TitleAttachment",componentId:"sc-1jh97wi-0"})(["display:flex;align-items:center;margin-left:8px;> div{display:flex;}"]),X4=r.default.div.withConfig({displayName:"FeaturesDetail__UsageHelpers",componentId:"sc-1jh97wi-1"})(["display:flex;margin-bottom:16px;> div + div{margin-left:32px;}"]),Z4=r.default.div.withConfig({displayName:"FeaturesDetail__UsageTitle",componentId:"sc-1jh97wi-2"})(["display:flex;align-items:center;",";margin-bottom:12px;"],o.Subtitles["subtitle-02"]),e6=Object(r.default)(o.InlineNotification).withConfig({displayName:"FeaturesDetail__FeatureDetailInlineNotification",componentId:"sc-1jh97wi-3"})(["margin-bottom:8px;"]);var t6=Object(r.default)(iy.a).withConfig({displayName:"FeaturesDetail___StyledAppSettingPageHeader",componentId:"sc-1jh97wi-4"})(["* + ","{margin-top:24px;}"],e=>e._css),n6=Object(r.default)(V.xb).withConfig({displayName:"FeaturesDetail___StyledLastUpdatedAt",componentId:"sc-1jh97wi-5"})(["margin-left:auto;"]);const a6=()=>{const e=Object(E.a)(),t=Object(s.n)(),n=Object(pY.b)(),{enabledFeatures:i,toggleFeature:l,currentSubscription:c,messageSearchPipeline:d}=Object(a.useContext)(A4),{featureKey:u}=null==t?void 0:t.params,p=f.t.find(e=>e.key===u),{updatedDt:g,usageWithOrgUsages:h}=U4({feature:p}),m=B4();if(!p||!c)return null;const b=!!i&&(i[p.key]||p.type===f.gb.Core||p.key===f.u.MessageSearch&&d.subscribed&&d.isLive),j="free_trial"===c.subscription_name,y=p.plans.map(({planKey:e,usageField:t})=>{var n,a,i,s;const r=null!=(n=null==h?void 0:h[t].usage)?n:0,o=null!=(a=null==h||null==(i=h[t])?void 0:i.others_usage)?a:0,l=null!=(s=c.plan[e])?s:null;return{...Object(H.generateUsageData)({feature:p,plan:l,usage:r,others:o,skipAverageCheck:!0,usageField:t}),orgUsage:r+(o||0)}}),O=p.trackable?p.plans.map(({planKey:e,usageField:t})=>{var n;const a=t?null==h?void 0:h[t]:0,i=null!=(n=c.plan[e])?n:null,{quota:s,limit:r}=Object(H.generateUsageData)({feature:p,plan:i,usage:a,usageField:t});return{featureKey:u,usageField:t,quota:s,limit:r}}):null;return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(t6,{_css:iy.a.Description,children:[Object(W.jsx)(iy.a.BackButton,{href:"../features"}),Object(W.jsxs)(iy.a.Title,{children:[p?n({featureKey:u}):"",i&&Object(W.jsx)(J4,{children:(()=>{const t=Object(W.jsx)(o.Toggle,{checked:b,disabled:p.type===f.gb.Core,onClick:l(p)});return p.type===f.gb.Core?Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.column.features.tooltip.core"}),children:Object(W.jsx)(o.Toggle,{checked:b,disabled:!0})}):p.key!==f.u.MessageSearch?t:m?!b&&d.waitingForMigrationStopped?Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.discarding"}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:b,disabled:!0})}):b&&d.doingHistoryMigration?Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.gathering"}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:b,disabled:!0})}):t:Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.unavailable"},{a:e=>Object(W.jsx)(V.yb,{href:"/settings/contact_us?category=technical_issue",useReactRouter:!0,variant:o.LinkVariant.Inline,permissions:oY.a,alertType:"dialog",children:e})}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:b,disabled:!0})})})()})]}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:`common.features.description.${u}`})})]}),O&&Object(W.jsxs)(X4,{children:[Object(W.jsx)(L4.a,{quotas:O}),Object(W.jsx)(P4.a,{calculations:O.map(({usageField:e})=>({featureKey:u,usageField:e})),openUsageGuideFrom:"application"})]}),u===f.u.TranslationTools&&Object(W.jsx)(q4,{isDisabled:!b}),Object(W.jsxs)(Z4,{children:[e.formatMessage({id:"common.settings.usage.usageDetail.title"}),g&&Object(W.jsx)(n6,{timestamp:g})]}),u===f.u.MessageSearch&&d.doingHistoryMigration&&Object(W.jsx)(e6,{type:"info",message:e.formatMessage({id:"chat.settings.features.messageSearch.inlineNotification.gathering"})}),u===f.u.MessageSearch&&d.waitingForMigrationStopped&&Object(W.jsx)(e6,{type:"info",message:e.formatMessage({id:"chat.settings.features.messageSearch.inlineNotification.discarding"})}),u===f.u.MessageSearch&&d.migrationErrored&&Object(W.jsx)(e6,{type:"error",message:e.formatMessage({id:"chat.settings.features.messageSearch.inlineNotification.errored"},{a:e=>Object(W.jsx)(o.Link,{href:"/settings/contact_us?category=technical_issue",variant:o.LinkVariant.Inline,useReactRouter:!0,children:e})})}),y.map(({usage:t,others:n,quota:a,limit:i,usageField:s,orgUsage:r})=>Object(W.jsx)(Q4,{feature:p,usageField:s,isFeatureEnabled:b,isFreeTrial:j,isLoading:u===f.u.MessageSearch&&(d.doingHistoryMigration||d.waitingForMigrationStopped),usage:t,others:n,quota:a,limit:i,placeholder:u===f.u.MessageSearch&&d.isInitial?e.formatMessage({id:"chat.settings.features.messageSearch.placeholder.initial"}):"",quotaNotification:p.trackable&&Object(W.jsx)(V4.a,{isFreeTrial:j,usage:r,quota:a,limit:i,unit:Object(H.isByteUsageFeature)(s)?"gigabyte":""})},`featureDetailContent_${s}`)),Object(W.jsx)(R4.a,{feature:u})]})};var i6=n("Mn35"),s6=n.n(i6),r6=n("BTlO"),o6=n("I4wK");const l6={padding:"10px 8px 10px 0"},c6=r.default.div.withConfig({displayName:"FeaturesList__FeatureNameWrapper",componentId:"p60g4i-0"})(["display:flex;align-items:center;div[role='progressbar']{margin-left:8px;}"]),d6=Object(r.default)(o.Link).withConfig({displayName:"FeaturesList__FeatureNameLink",componentId:"p60g4i-1"})(["",";"],({$color:e})=>e?Object(r.css)(["color:",";&:hover{color:",";}"],Object(o.cssVariables)([e,5]),Object(o.cssVariables)([e,6])):""),u6=r.default.div.withConfig({displayName:"FeaturesList__ColumnWithChildren",componentId:"p60g4i-2"})(["display:flex;align-items:center;"]),p6=r.default.div.withConfig({displayName:"FeaturesList__ColumnTitle",componentId:"p60g4i-3"})(["margin-right:4px;"]),g6=r.default.div.withConfig({displayName:"FeaturesList__ColumnUsageInProgress",componentId:"p60g4i-4"})(["font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";white-space:pre-wrap;"],Object(o.cssVariables)("neutral-6"));var h6=Object(r.default)(o.Lozenge).withConfig({displayName:"FeaturesList___StyledLozenge",componentId:"p60g4i-5"})(["margin-left:16px;"]),m6=Object(r.default)(o.Toggle).withConfig({displayName:"FeaturesList___StyledToggle",componentId:"p60g4i-6"})(["display:block;"]),f6=Object(r.default)(iy.a).withConfig({displayName:"FeaturesList___StyledAppSettingPageHeader",componentId:"p60g4i-7"})(["* + ","{margin-top:24px;}"],e=>e._css);const b6=()=>{const e=Object(E.a)(),t=Object(P.W)(),n=Object(s.n)(),i=Object(s.k)(),{isLoadingEnabledFeatures:l,enabledFeatures:c,toggleFeature:d,currentSubscription:u,messageSearchPipeline:p}=Object(a.useContext)(A4),{isLoadingUsage:g,usageWithOrgUsages:h}=U4(),m=B4(),b=Object(a.useCallback)(()=>{t({dialogTypes:A.a.Overage})},[]),j=Object(pY.b)(),y=Object(a.useMemo)(()=>{if(c&&u){const e=f.t.filter(e=>{var t;return null==(t=e.plans)?void 0:t.every(({planKey:e})=>"object"==typeof u.plan[e]&&u.plan[e].enabled)}).map(e=>{const t=[],n=e.key===f.u.Webhook,a=e.plans.map(({planKey:n,usageField:a})=>{var i,s,r,o,l;const c=null!=(i=null==h||null==(s=h[a])?void 0:s.usage)?i:0,d=null!=(r=null==h||null==(o=h[a])?void 0:o.others_usage)?r:0,p=null!=(l=u.plan[n])?l:null;return p&&t.push(p),Object(H.generateUsageData)({feature:e,plan:p,usage:c,others:d,usageField:a,skipAverageCheck:!0})}),i=a.some(({isExceedLimit:e})=>e);let s=e.type===f.gb.Core&&!n||c[e.key];return e.key===f.u.MessageSearch&&(s=p.subscribed&&c[e.key]),{usageData:a,feature:e,name:j({featureKey:e.key,billingPlanItem:t.length>0?t[0]:void 0}),onAndOff:e.type===f.gb.Premium||n,isEnabled:s,isUnavailable:i}}),[t,n]=s6()(e,e=>e.feature.trackable);return[...t,...n]}return[]},[u,c,j,h,p.subscribed]),O=[{dataIndex:"type",title:e.formatMessage({id:"chat.settings.features.column.type"}),width:"100px",render:({feature:e})=>Object(W.jsx)(o.Lozenge,{variant:o.LozengeVariant.Light,color:f.hb[e.type],children:e.type})},{dataIndex:"key",title:e.formatMessage({id:"chat.settings.features.column.features"}),width:52,render:({isEnabled:t,onAndOff:n,feature:a})=>{if(n){if(a.key===f.u.MessageSearch){if(!m)return Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.unavailable"},{a:e=>Object(W.jsx)(o.Link,{href:"/settings/contact_us?category=technical_issue",useReactRouter:!0,variant:o.LinkVariant.Inline,children:e})}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:t,disabled:!0})});if(!t&&p.waitingForMigrationStopped)return Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.discarding"}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:t,disabled:!0})});if(t&&p.doingHistoryMigration)return Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.messageSearch.tooltip.gathering"}),tooltipContentStyle:Object(r.css)(["font-weight:400;width:256px;"]),children:Object(W.jsx)(o.Toggle,{checked:t,disabled:!0})})}return Object(W.jsx)(o.Toggle,{checked:t,onClick:d(a)})}return Object(W.jsx)(o.Tooltip,{content:e.formatMessage({id:"chat.settings.features.column.features.tooltip.core"}),popperProps:{modifiers:{offset:{offset:"0, 8"}}},tooltipContentStyle:Object(r.css)(["padding:6px 16px;",";"],o.Subtitles["subtitle-01"]),children:Object(W.jsx)(m6,{checked:t,disabled:!0})})}},{dataIndex:"name",width:"316px",render:({feature:t,isUnavailable:n,isEnabled:a,name:i})=>{const s=t.key===f.u.MessageSearch&&(p.doingHistoryMigration||p.waitingForMigrationStopped),r=t.key===f.u.MessageSearch&&a&&p.migrationErrored;return Object(W.jsxs)(c6,{children:[Object(W.jsx)(d6,{variant:o.LinkVariant.Neutral,$color:n||r?"red":void 0,children:i}),n?Object(W.jsx)(h6,{variant:o.LozengeVariant.Dark,color:"red",children:e.formatMessage({id:"common.settings.usage.column.isActive.unavailable"})}):null,s&&Object(W.jsx)(o.Spinner,{size:20,stroke:Object(o.cssVariables)("neutral-6")})]})},onCell:e=>{return{style:{cursor:"pointer"},onClick:(t=e.feature.key,()=>{i.push(`${null==n?void 0:n.url}/${t}`)})};var t},styles:Object(r.css)(["&:hover{a{text-decoration:underline;}}"])},{dataIndex:"usage",title:Object(W.jsxs)(u6,{children:[Object(W.jsx)(p6,{children:e.formatMessage({id:"chat.settings.features.column.usage"})}),Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.column.usage.tooltip"}),tooltipContentStyle:Object(r.css)(["font-weight:400;"]),children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),onCell:({feature:e})=>e.key===f.u.MessageSearch&&p.preventShowPercent?{colSpan:3}:{},render:({feature:t,usageData:n,isEnabled:a})=>{if(t.key===f.u.MessageSearch){if(p.isInitial)return null;if(p.migrationErrored)return Object(W.jsx)(o.InlineNotification,{type:"error",message:e.formatMessage({id:"chat.settings.features.messageSearch.alert.errored"},{a:e=>Object(W.jsx)(o.Link,{href:"/settings/contact_us?category=technical_issue",useReactRouter:!0,variant:o.LinkVariant.Inline,children:e})}),action:{label:"Retry",onClick:e=>{var n;return null==(n=d(t))?void 0:n(a,e)}}});if(a&&p.doingHistoryMigration)return Object(W.jsx)(g6,{children:e.formatMessage({id:"chat.settings.features.messageSearch.alert.gathering"})})}return Object(W.jsx)(r6.a,{record:{feature:t,usageData:n,isEnabled:a},subscription:u,skipUpgradeCheck:!0,showPercent:!1,showAlert:!1})}},{key:"current",title:Object(W.jsxs)(u6,{children:[Object(W.jsx)(p6,{children:e.formatMessage({id:"chat.settings.features.column.current"})}),Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.column.current.tooltip"}),tooltipContentStyle:Object(r.css)(["font-weight:400;"]),children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),onCell:({feature:e})=>e.key===f.u.MessageSearch&&p.preventShowPercent?{width:0,style:{...l6,margin:0}}:{style:{...l6}},width:"96px",styles:Object(r.css)(["flex-direction:column;align-items:flex-end;justify-content:flex-start;> div + div{margin-top:","px;}"],48),render:({feature:e,usageData:t})=>e.key===f.u.MessageSearch&&p.preventShowPercent?"":e.trackable&&t.map(({usage:e,others:t,quota:n,limit:a,usageField:i})=>Object(W.jsx)(o6.c,{usage:e,others:t,quota:n,limit:a,type:"current"},`featurePercentByApp_${i}`))},{key:"all",title:Object(W.jsxs)(u6,{children:[Object(W.jsx)(p6,{children:e.formatMessage({id:"chat.settings.features.column.all"})}),Object(W.jsx)(o.ContextualHelp,{content:e.formatMessage({id:"chat.settings.features.column.all.tooltip"}),tooltipContentStyle:Object(r.css)(["font-weight:400;"]),children:Object(W.jsx)(o.TooltipTargetIcon,{icon:"info"})})]}),onCell:({feature:e})=>e.key===f.u.MessageSearch&&p.preventShowPercent?{width:0,style:{...l6,margin:0}}:{style:{...l6}},width:"96px",styles:Object(r.css)(["flex-direction:column;align-items:flex-end;justify-content:flex-start;> div + div{margin-top:","px;}"],48),render:({feature:t,usageData:n})=>t.key===f.u.MessageSearch&&p.preventShowPercent?"":t.trackable&&n.map(({usage:t,others:n,quota:a,limit:i,usageField:s})=>Object(W.jsx)(o6.c,{usage:t,others:n,quota:a,limit:i,type:"all",availabilityTooltips:Object(W4.a)({intl:e,limit:i,isFreeTrial:(null==u?void 0:u.subscription_name)===f.ac.FreeTrial,onLinkClick:b,unit:Object(H.isByteUsageFeature)(s)?"gigabyte":""})},`featurePercentByAll_${s}`))}];return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(f6,{_css:iy.a.Description,children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"core.settings.application.tab.features"})}),Object(W.jsx)(iy.a.Actions,{children:(null==h?void 0:h.updated_dt)&&Object(W.jsx)(V.xb,{timestamp:h.updated_dt})}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:"chat.settings.features.description"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"/settings/usage",useReactRouter:!0,children:e})})})]}),Object(W.jsx)(o.Table,{columns:O,dataSource:y,rowStyles:()=>Object(r.css)(["&:hover{a{color:",";}}"],Object(o.cssVariables)("purple-7")),loading:l||g})]})},j6=({match:e})=>Object(W.jsx)(N4,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/:featureKey`,component:a6}),Object(W.jsx)(s.d,{path:`${e.url}`,component:b6})]})});var y6;!function(e){e[e.Found=0]="Found",e[e.NotFound=1]="NotFound",e[e.Unknown=2]="Unknown"}(y6||(y6={}));const O6=Object(r.default)(o.InlineNotification).withConfig({displayName:"CustomChannelTypeField__NotFoundNotification",componentId:"sc-1j4z5lh-0"})(["margin-top:8px;"]),v6=r.default.span.withConfig({displayName:"CustomChannelTypeField__HelperText",componentId:"sc-1j4z5lh-1"})(["display:flex;align-items:center;margin-top:4px;color:",";",";svg{margin-right:4px;}"],Object(o.cssVariables)("purple-7"),o.Typography["caption-01"]),x6=Object(a.forwardRef)(({setFormError:e,...t},n)=>{const i=Object(P.c)(),s=Object(E.a)(),[r,l]=Object(a.useState)(t.defaultValue||""),[c,d]=Object(a.useState)({value:t.defaultValue||"",status:y6.Unknown});return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.InputText,{type:"text",ref:n,...t,onChange:n=>{var a;null==t.onChange||t.onChange(n),l(n.target.value),null!=(a=t.error)&&a.hasError&&e(null)},onBlur:t.readOnly||t.disabled?void 0:async t=>{const{value:n}=t.target;if(n.trim()){if(await(async e=>{try{return await Object(g$.fetchSettingsForCustomChannelType)({appId:i,custom_type:e}),!0}catch{return!1}})(n))return e("duplicated"),void d({value:n,status:y6.Unknown});e(null);try{if(await(async e=>{const{data:t}=await Object(js.fetchGroupChannels)({appId:i,limit:1,showEmpty:!0,customType:e});return t.channels.length>0})(n))return void d({value:n,status:y6.Found});d({value:n,status:y6.NotFound})}catch{d({value:n,status:y6.Unknown})}}else e("required")}}),c.value===r&&Object(W.jsxs)(W.Fragment,{children:[c.status===y6.Found&&Object(W.jsxs)(v6,{role:"status",children:[Object(W.jsx)(o.Icon,{size:16,color:Object(o.cssVariables)("purple-7"),icon:"success-filled"}),s.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.inUse"})]}),c.status===y6.NotFound&&Object(W.jsx)(O6,{role:"status",type:"warning",message:s.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.neverUsed"})})]})]})});let _6;!function(e){e.Empty="empty",e.Loading="loading",e.Done="done"}(_6||(_6={}));const C6=r.default.div.withConfig({displayName:"FileReaderStatus__IconWrapper",componentId:"sc-2qobu8-0"})(["width:20px;height:20px;margin-right:8px;"]),k6=r.default.div.withConfig({displayName:"FileReaderStatus__Filename",componentId:"sc-2qobu8-1"})(["color:",";",";"],e=>e.color,o.Subtitles["subtitle-01"]),w6=r.default.div.withConfig({displayName:"FileReaderStatus__FileReader",componentId:"sc-2qobu8-2"})(["display:flex;align-items:center;margin-top:12px;margin-bottom:6px;",""],e=>e.isDisabled&&Object(r.css)(["","{color:",";}"],k6,Object(o.cssVariables)("neutral-5")));var T6=({isDisabled:e,selectedFile:t,status:n})=>t?Object(W.jsxs)(w6,{isDisabled:e,children:[Object(W.jsxs)(C6,{children:[n===_6.Loading&&Object(W.jsx)(o.Spinner,{size:20,stroke:e?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-6")}),n===_6.Done&&Object(W.jsx)(o.Icon,{icon:"file-activated",size:20,color:e?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("neutral-6")})]}),Object(W.jsx)(k6,{color:n===_6.Loading?Object(o.cssVariables)("neutral-6"):Object(o.cssVariables)("neutral-7"),children:t.name})]}):null;var S6=e=>Object(W.jsx)(iy.i,{role:"group","aria-label":e.title,...e}),E6=Object(r.default)("input").withConfig({displayName:"ImportFileButton___StyledInput",componentId:"v9mqqf-0"})(["display:none;"]);var I6=({onFileSelect:e,...t})=>{const n=Object(a.useRef)(null);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",...t,onClick:e=>{var a;null==t.onClick||t.onClick(e),null==(a=n.current)||a.click()}}),Object(W.jsx)(E6,{ref:n,type:"file",accept:".txt",onChange:t=>{var n;const a=null==(n=t.target.files)?void 0:n[0];a&&(null==e||e(a),t.target.value="")},"data-test-id":"FileInput"})]})};var M6=()=>{const[e,t]=Object(a.useState)(!1),[n,i]=Object(a.useState)(null),s=Object(a.useCallback)(async()=>{try{t(!0);const{data:{en:e}}=await Object(g$.fetchDefaultProfanity)();return i(e),e}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{t(!1)}},[]);return{isFetching:e,getKeywords:Object(a.useCallback)(async()=>n||await s(),[s,n])}};var D6=()=>{const[e,t]=Object(a.useState)(null),[n,i]=Object(a.useState)(_6.Empty),[s,r]=Object(a.useState)(null);return Object(a.useEffect)(()=>{if(e){const n=new FileReader;return n.readAsText(e),r(null),i(_6.Loading),n.onload=()=>{r(n.result),i(_6.Done)},n.onerror=()=>{o.toast.error({message:Object(mi.b)(n.error)}),t(null)},()=>{n.abort()}}i(_6.Empty),r(null)},[e]),{setSelectedFile:t,fileContent:s,fileReaderStatus:n,selectedFile:e}};const A6=r.default.div.withConfig({displayName:"ExplicitWordsFormRow__FormRowActions",componentId:"sc-19fhqvv-0"})(["display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:6px;"]),N6=r.default.div.withConfig({displayName:"ExplicitWordsFormRow__GrayBox",componentId:"sc-19fhqvv-1"})(["margin-top:4px;border-radius:4px;background:",";padding:14px 16px;height:120px;overflow-x:hidden;overflow-y:scroll;word-break:break-all;color:",";",";"],Object(o.cssVariables)("bg-2"),Object(o.cssVariables)("content-2"),o.Body["body-short-01"]);var R6=Object(r.default)(o.Link).withConfig({displayName:"ExplicitWordsFormRow___StyledLink",componentId:"sc-19fhqvv-2"})(["font-size:14px;font-weight:600 !important;margin:9px 0;"]);var P6=({isDisabled:e=!1,formContextValues:{register:t,setValue:n,getValues:i,watch:s}})=>{const r=Object(E.a)(),{isFetching:l,getKeywords:c}=M6(),{selectedFile:d,setSelectedFile:u,fileContent:p,fileReaderStatus:g}=D6(),h=e||"loading"===g,m=Object(P.W)(),f=Object(a.useCallback)(({newValue:e,onConfirm:t,onCancel:a})=>{m({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.replaceDialog.title"}),description:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.replaceDialog.description"}),confirmText:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.replaceDialog.btn.ok"}),cancelText:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.replaceDialog.btn.cancel"}),onConfirm:()=>{n("keywords",e),null==t||t()},onCancel:a}})},[r,n,m]);Object(a.useEffect)(()=>{if("string"==typeof p){const e=()=>{o.toast.success({message:r.formatMessage({id:"chat.settings.profanityFilter.form.noti.importedKeywords"})})},t=i("keywords");if(!t)return n("keywords",p),void e();if(t===p)return void e();f({newValue:p,onConfirm:()=>{e()},onCancel:()=>{u(null)}})}},[f,p,i,r,u,n]);const b=s("keywords")||"";return Object(W.jsxs)(S6,{title:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.title"}),description:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},isDisabled:h,children:[Object(W.jsxs)(A6,{children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(I6,{disabled:h,onFileSelect:e=>{u(e)},children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.btn.import"})}),Object(W.jsx)(T6,{selectedFile:d,status:g,isDisabled:h})]}),Object(W.jsx)(R6,{role:"button",onClick:async()=>{const e=await c(),t=i("keywords");e&&t!==e&&(t?f({newValue:e}):n("keywords",e))},disabled:h||l,children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.btn.useDefaultList"})})]}),b.length>1e5?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.InlineNotification,{message:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.tooMany"}),type:"warning"}),Object(W.jsx)(N6,{children:`${b.slice(0,1e5)}...`}),Object(W.jsx)("input",{ref:t,type:"hidden",name:"keywords",placeholder:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.placeholder"})})]}):Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(o.InputTextarea,{ref:t,name:"keywords",readOnly:h,"aria-label":r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.title"}),placeholder:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.placeholder"}),maxLength:1e5,error:b.length>=1e5?{hasError:!0,message:r.formatMessage({id:"chat.settings.profanityFilter.form.field.explicitWords.error.maxLength"})}:void 0})})]})};const L6=Object(r.default)(o.Lozenge).withConfig({displayName:"FilterMethodDropdown__FilterTypeWarning",componentId:"sc-5ilha9-0"})(["display:inline-block;margin-left:8px;"]),F6=r.default.span.withConfig({displayName:"FilterMethodDropdown__ToggleText",componentId:"sc-5ilha9-1"})(["display:flex;padding:0 16px;",";"],o.Subtitles["subtitle-01"]),U6=r.default.div.withConfig({displayName:"FilterMethodDropdown__ErrorMessage",componentId:"sc-5ilha9-2"})(["margin-top:4px;font-size:12px;line-height:16px;font-weight:400;color:",";"],Object(o.cssVariables)("red-5"));class $6{}$6.Container=r.default.div.withConfig({displayName:"FilterMethodDropdown__Container",componentId:"sc-5ilha9-4"})(["position:relative;margin-top:8px;border-radius:4px;background:",";padding:14px 16px;width:208px;height:76px;overflow:hidden;user-select:none;[hidden]{display:none;}"],Object(o.cssVariables)("neutral-1")),$6.Message=r.default.div.withConfig({displayName:"FilterMethodDropdown__Message",componentId:"sc-5ilha9-5"})(["display:grid;grid-template-areas:'avatar name' 'avatar message';grid-template-rows:20px 28px;grid-template-columns:48px 1fr;grid-gap:0 16px;align-items:end;width:100%;height:100%;"]),$6.Avatar=Object(r.default)(o.Avatar).attrs({type:o.AvatarType.Member,profileID:0,size:48}).withConfig({displayName:"FilterMethodDropdown__Avatar",componentId:"sc-5ilha9-6"})(["grid-area:avatar;*[width][height]{fill:",";}path{fill:",";}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6")),$6.Name=r.default.span.withConfig({displayName:"FilterMethodDropdown__Name",componentId:"sc-5ilha9-7"})(["grid-area:name;color:",";",";"],Object(o.cssVariables)("neutral-10"),o.Typography["label-03"]),$6.Words=r.default.p.withConfig({displayName:"FilterMethodDropdown__Words",componentId:"sc-5ilha9-8"})(["grid-area:message;position:relative;",";color:",";"],o.Body["body-03"],Object(o.cssVariables)("neutral-7")),$6.Char=r.default.span.withConfig({displayName:"FilterMethodDropdown__Char",componentId:"sc-5ilha9-9"})(["transform:translateX(","px);transition:0.3s ",";transition-property:opacity,transform;transition-delay:","s;opacity:",";"],({translateX:e})=>e,o.transitionDefault,e=>e.delay,e=>e.show?1:0),$6.Blocked=r.default.div.withConfig({displayName:"FilterMethodDropdown__Blocked",componentId:"sc-5ilha9-10"})(["position:absolute;top:50%;left:0;margin-top:-8px;width:100%;height:16px;text-align:center;line-height:16px;font-size:12px;font-style:oblique;color:",";"],Object(o.cssVariables)("neutral-7"));const B6=r.default.div.withConfig({displayName:"FilterMethodDropdown__Wrapper",componentId:"sc-5ilha9-3"})(["",""],e=>e.isDisabled&&Object(r.css)(["",","," *{color:",";}"],$6.Container,$6.Container,Object(o.cssVariables)("neutral-5"))),V6="Shit".split(""),z6="******".split(""),H6=({type:e})=>{const t=e===m$.none,n=e===m$.asterisks,a=Object(P.R)(e),i=Object(E.a)();return Object(W.jsxs)($6.Container,{role:"img",children:[null==e?null:Object(W.jsxs)($6.Message,{hidden:e===m$.block,children:[Object(W.jsx)($6.Avatar,{}),Object(W.jsx)($6.Name,{children:"John Doe"}),Object(W.jsx)($6.Words,{children:V6.map((n,i)=>Object(W.jsx)($6.Char,{show:t,translateX:e===m$.asterisks?24:0,delay:a===m$.asterisks&&t?.1*i:0,children:n},`${n}-${i}`))}),Object(W.jsx)($6.Words,{children:z6.map((t,i)=>Object(W.jsx)($6.Char,{show:n,translateX:e===m$.none?24:0,delay:a===m$.none&&n?.1*i:0,children:t},`${t}-${i}`))})]}),Object(W.jsx)($6.Blocked,{hidden:e!==m$.block,children:i.formatMessage({id:"chat.settings.profanityFilter.option.block.messagesWontDisplay"})})]})},q6=Object(a.forwardRef)(({filterType:e,onChange:t,disabled:n,error:i},s)=>{const r=Object(E.a)(),l=Object(a.useRef)(null);Object(a.useImperativeHandle)(s,()=>({focus:()=>{var e;const t=null==(e=l.current)?void 0:e.querySelector('button[aria-haspopup="true"]');t&&t.focus()}}));const c=Object(a.useMemo)(()=>({[m$.asterisks]:r.formatMessage({id:"chat.settings.profanityFilter.option.asterisks"}),[m$.block]:r.formatMessage({id:"chat.settings.profanityFilter.option.block"})}),[r]),d=Object(a.useCallback)(e=>Object(W.jsxs)(W.Fragment,{children:[c[e]," ",e===m$.asterisks&&Object(W.jsx)(L6,{color:"neutral",variant:o.LozengeVariant.Dark,children:r.formatMessage({id:"chat.settings.profanityFilter.option.asterisks.lozenge.notAvailableForRegex"})})]}),[c,r]),u=Object(a.useCallback)(({selectedItem:e})=>null==e?Object(W.jsx)(F6,{children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.filterMethod.placeholder"})}):Object(W.jsx)(F6,{children:d(e)}),[r,d]),p=e===m$.block||e===m$.asterisks?e:null;return Object(W.jsxs)(B6,{ref:l,isDisabled:n,children:[Object(W.jsx)(o.Dropdown,{items:[m$.asterisks,m$.block],selectedItem:p,itemToString:e=>c[e],itemToElement:d,toggleRenderer:u,width:"100%",disabled:n,onChange:t,hasError:!!i}),i&&Object(W.jsx)(U6,{children:i}),p&&Object(W.jsx)(H6,{type:null!=e?e:void 0})]})}),G6=r.default.span.withConfig({displayName:"RegexList__RegexValue",componentId:"d8qbmy-0"})(["font-family:'Roboto Mono',monospace;font-size:13px;line-height:20px;white-space:nowrap;"]),W6=r.default.div.withConfig({displayName:"RegexList__DeleteTarget",componentId:"d8qbmy-1"})(["margin-top:8px;padding:6px 16px;font-family:'Roboto Mono',monospace;font-size:13px;line-height:1.54;letter-spacing:-0.3px;color:",";word-break:break-word;border-radius:4px;background-color:",";"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-1"));var K6=Object(r.default)("p").withConfig({displayName:"RegexList___StyledP",componentId:"d8qbmy-2"})(["margin-bottom:16px;"]);var Y6=({items:e=[],onChange:t,disabled:n})=>{const i=Object(E.a)(),s=Object(P.W)(),r=Object(P.L)(t),o=Object(a.useCallback)(t=>{s({dialogTypes:A.a.RegexEditor,dialogProps:{defaultValue:t,onSubmit:n=>{null==r.current||r.current(e.map(e=>e===t?n:e))}}})},[e,r,s]),l=Object(a.useCallback)(t=>{s({dialogTypes:A.a.Delete,dialogProps:{size:"small",title:i.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.dialog.title.delete"}),description:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(K6,{children:i.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.dialog.desc.delete"})}),Object(W.jsxs)(W6,{children:["/",t,"/"]})]}),confirmText:i.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.dialog.button.delete"}),onDelete:()=>{null==r.current||r.current(e.filter(e=>e!==t))}}})},[i,e,r,s]);return Object(W.jsx)(V.vc,{color:"neutral",items:e,disabled:n,rowActions:Object(a.useMemo)(()=>[{icon:"edit",label:i.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.edit"}),onClick:o},{icon:"remove-filled",label:i.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.delete"}),onClick:l}],[l,o,i]),renderItem:e=>Object(W.jsxs)(G6,{children:["/",e,"/"]})})};const Q6=r.default.div.withConfig({displayName:"RegexFormRow__FormRowActions",componentId:"brmn0a-0"})(["display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:6px;"]),J6=Object(r.default)(o.Button).attrs(({type:e="button",buttonType:t="tertiary",size:n="small"})=>({type:e,buttonType:t,size:n})).withConfig({displayName:"RegexFormRow__FormRowAction",componentId:"brmn0a-1"})([""]),X6=r.default.div.withConfig({displayName:"RegexFormRow__Counter",componentId:"brmn0a-2"})(["margin-top:8px;color:",";",";"],Object(o.cssVariables)("neutral-7"),o.Typography["caption-01"]),Z6=r.default.div.withConfig({displayName:"RegexFormRow__ImportFileControl",componentId:"brmn0a-3"})([""]),e5=r.default.div.withConfig({displayName:"RegexFormRow__FileReader",componentId:"brmn0a-4"})(["display:flex;align-items:center;margin-top:12px;margin-bottom:6px;"]),t5=Object(r.default)(S6).withConfig({displayName:"RegexFormRow__Container",componentId:"brmn0a-5"})(["&[aria-disabled='true']{",","," *,"," *{color:",";fill:",";}}"],X6,X6,e5,Object(o.cssVariables)("neutral-5"),Object(o.cssVariables)("neutral-5")),n5=()=>Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.attrs.item_limit.max_regex_filters}),a5=({children:e})=>{const t=Object(E.a)(),n=n5();return Object(W.jsx)(o.Tooltip,{content:t.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.add.tooltip.reachedMax"},{maxCount:n}),variant:o.TooltipVariant.Light,placement:"top",children:e})};var i5=Object(r.default)("i").withConfig({displayName:"RegexFormRow___StyledI",componentId:"brmn0a-6"})(["font-style:normal;color:",";"],e=>e._css);var s5=({isDisabled:e=!1,formContextValues:{setValue:t,control:n,getValues:i,watch:s}})=>{const r=Object(E.a)(),l=n5(),{selectedFile:c,setSelectedFile:d,fileContent:u,fileReaderStatus:p}=D6(),g=e||"loading"===p,h=Object(P.W)(),m=s("regexFilters",[]),f=Object(a.useMemo)(()=>"string"==typeof u?u.split("\n").filter(e=>e):null,[u]);Object(a.useEffect)(()=>{if(f){const e="number"==typeof l&&f.length>l,n=e?f.slice(0,l):f,a=()=>{e?o.toast.warning({message:r.formatMessage({id:"chat.settings.profanityFilter.form.noti.importedRegexPartially"},{maxCount:l})}):o.toast.success({message:r.formatMessage({id:"chat.settings.profanityFilter.form.noti.importedRegex"})})},s=i("regexFilters");if(Object(b.e)(s,n))return void a();if(0===s.length)return t("regexFilters",n),void a();h({dialogTypes:A.a.Confirm,dialogProps:{title:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.replaceDialog.title"}),description:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.replaceDialog.description"}),confirmText:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.replaceDialog.btn.ok"}),cancelText:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.replaceDialog.btn.cancel"}),onConfirm:()=>{t("regexFilters",n),a()},onCancel:()=>{d(null)}}})}},[i,r,l,f,d,t,h]);const j=Object(P.W)({dialogTypes:A.a.RegexEditor,dialogProps:{onSubmit:e=>{const n=i("regexFilters")||[];t("regexFilters",[e,...n])}}}),y="number"==typeof l&&m.length>=l,O=y?a5:a.Fragment;return Object(W.jsxs)(t5,{title:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.title"}),description:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},isDisabled:g,children:[Object(W.jsxs)(Q6,{children:[Object(W.jsxs)(Z6,{children:[Object(W.jsx)(I6,{disabled:g,onFileSelect:e=>{d(e)},children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.import"})}),Object(W.jsx)(T6,{selectedFile:c,status:p,isDisabled:g})]}),Object(W.jsx)(O,{children:Object(W.jsx)(J6,{buttonType:"secondary",disabled:g||y,onClick:()=>{j()},children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.add"})})})]}),Object(W.jsx)(_i.a,{control:n,name:"regexFilters",defaultValue:[],render:({onChange:e,value:t})=>Object(W.jsx)(Y6,{items:t,onChange:e,disabled:g})}),"number"==typeof l&&Object(W.jsx)(X6,{children:r.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.counter"},{isMaximum:String(y),count:m.length,maxCount:l,red:e=>Object(W.jsx)(i5,{_css:Object(o.cssVariables)("red-5"),children:e})})})]})};const r5=r.default.div.withConfig({displayName:"ProfanityFilterForm__FormActions",componentId:"sc-112o1xk-0"})(["display:flex;justify-content:flex-end;margin:16px 0;> *:not(:first-child){margin-left:8px;}button:not([type='submit']){&,&:hover:not(:active){background:white;}}"]),o5=r.default.div.withConfig({displayName:"ProfanityFilterForm__OnOffStatus",componentId:"sc-112o1xk-1"})(["",";color:",";margin-top:8px;"],o.Typography["caption-01"],Object(o.cssVariables)("neutral-7"));var l5=Object(r.default)("span").withConfig({displayName:"ProfanityFilterForm___StyledSpan",componentId:"sc-112o1xk-2"})(["",""],e=>e._css);const c5=Object(a.forwardRef)(({hasCustomChannelTypeField:e,submitStatus:t="init",onSubmit:n,onCancel:i,defaultValues:s},r)=>{const l=Object(_i.d)({defaultValues:s}),{register:c,control:d,handleSubmit:u,setError:p,errors:g,clearErrors:h,formState:m,trigger:f}=l,b=Object(E.a)(),j=Object(a.useRef)(null),[y,O]=Object(a.useState)(s&&s.type!==m$.none),v=Object(P.L)(y),x=!y;Object(a.useImperativeHandle)(r,()=>({setError:p}));const _=Ci(g.customChannelType,e=>"duplicated"===e.type?b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.error.duplicated"}):"required"===e.type?b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.error.required"}):e.message);return Object(W.jsxs)("form",{onSubmit:u(async e=>{await f("type")&&n(y?e:{...e,type:m$.none})}),children:[Object(W.jsx)(V.wc,{when:m.isDirty&&"done"!==t}),Object(W.jsxs)(iy.j,{children:[e?Object(W.jsx)(S6,{title:b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.title"}),description:b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.desc"}),children:Object(W.jsx)(x6,{name:"customChannelType",ref:c({required:!0}),"aria-label":b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.title"}),placeholder:b.formatMessage({id:"chat.settings.profanityFilter.form.field.customChannelType.placeholder"}),error:_,readOnly:!(null==s||!s.customChannelType),setFormError:e=>{e?p("customChannelType",{type:e}):h("customChannelType")}})}):Object(W.jsx)(S6,{title:b.formatMessage({id:"chat.settings.profanityFilter.form.targetChannel"}),children:Object(W.jsx)(l5,{_css:o.Subtitles["subtitle-01"],children:b.formatMessage({id:"chat.settings.profanityFilter.form.targetChannel.global"})})}),Object(W.jsxs)(S6,{title:b.formatMessage({id:"chat.settings.profanityFilter.form.field.isFilterOn.title"}),gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(o.Toggle,{checked:y,onChange:e=>O(e)}),e&&y&&Object(W.jsx)(o5,{role:"status",children:b.formatMessage({id:"chat.settings.profanityFilter.form.field.isFilterOn.status.customType.on"})})]}),Object(W.jsx)(S6,{title:b.formatMessage({id:"chat.settings.profanityFilter.form.field.filterMethod.title"}),description:b.formatMessage({id:"chat.settings.profanityFilter.form.field.filterMethod.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},isDisabled:x,children:Object(W.jsx)(_i.a,{name:"type",control:d,rules:{validate:e=>!v.current||null!=e&&e!==m$.none||b.formatMessage({id:"chat.settings.profanityFilter.form.field.filterMethod.error.required"})},defaultValue:m$.none,onFocus:()=>{var e;null==(e=j.current)||e.focus()},render:({onChange:e,value:t})=>{var n;return Object(W.jsx)(q6,{filterType:t,onChange:e,ref:j,disabled:x,error:null==(n=g.type)?void 0:n.message})}})}),Object(W.jsx)(P6,{isDisabled:x,formContextValues:l}),Object(W.jsx)(s5,{isDisabled:x,formContextValues:l})]}),Object(W.jsxs)(r5,{children:[Object(W.jsx)(o.Button,{type:"button",buttonType:"tertiary",onClick:i,children:b.formatMessage({id:"chat.settings.profanityFilter.form.btn.cancel"})}),Object(W.jsx)(o.Button,{type:"submit",buttonType:"primary",disabled:"pending"===t,isLoading:"pending"===t,children:b.formatMessage({id:"chat.settings.profanityFilter.form.btn.submit"})})]})]})}),d5=Object(a.createContext)(void 0),u5=Object(a.createContext)(void 0),p5=({children:e})=>{var t;const n=Object(P.c)(),[i,s]=Object(a.useState)([]),[r,o]=Object(P.g)(async e=>{const{data:t}=await Object(g$.fetchSettingsForCustomChannelTypes)({appId:n,token:e||void 0});return{...t,token:e}},[n]);Object(a.useEffect)(()=>{o(null)},[o]),Object(a.useEffect)(()=>{if(!r.data)return;const{token:e,channel_custom_type_settings:t}=r.data;s(e?e=>e.concat(t):t)},[r.data]),Object(P.s)(r.error);const l=Object(a.useCallback)(()=>o(null),[o]),c=Object(a.useCallback)(()=>{var e,t;return o(null!=(e=null==(t=r.data)?void 0:t.next)?e:null)},[r.data,o]),d=Object(a.useCallback)(async(e,t)=>{const{data:a}=await Object(g$.updateSettingsForCustomChannelType)({appId:n,custom_type:e,...t});s(e=>{const t=e.findIndex(e=>e.custom_type===a.custom_type);if(t>-1){const n=[...e];return n[t]=a,n}return e})},[n]);return Object(W.jsx)(d5.Provider,{value:{settings:i,hasNext:!(null==(t=r.data)||!t.next),status:r.status},children:Object(W.jsx)(u5.Provider,{value:{loadMore:c,reload:l,updateSettings:d},children:e})})},g5=()=>Object(a.useContext)(d5),h5=()=>Object(a.useContext)(u5),m5=()=>{const e=Object(E.a)(),t=Object(P.c)(),n=Object(s.k)(),[i,r]=Object(a.useState)("init"),{reload:l}=h5(),c=Object(a.useRef)(null),d=`/${t}/settings/profanity-filter`;return Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:`/${t}/settings/profanity-filter`}),Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"chat.settings.profanityFilter.add.title"})})]}),Object(W.jsx)(c5,{ref:c,hasCustomChannelTypeField:!0,submitStatus:i,onCancel:()=>n.push(d),onSubmit:async({customChannelType:a,type:i,keywords:s,regexFilters:u})=>{r("pending");try{await Object(g$.createSettingsForCustomChannelType)({appId:t,custom_type:a,profanity_filter:{type:i,keywords:s,regex_filters:u.map(e=>({regex:e}))}}),r("done"),l(),o.toast.success({message:e.formatMessage({id:"chat.settings.profanityFilter.noti.added"})}),n.push(d)}catch(e){var p,g;if(400202===(null==e||null==(p=e.data)?void 0:p.code))null==(g=c.current)||g.setError("customChannelType",{type:"duplicated"});else o.toast.error({message:Object(mi.b)(e)});r("init")}}})]})};var f5=Object(r.default)(o.Tag).withConfig({displayName:"EditProfanityFilter___StyledTag",componentId:"sc-1r3z16e-0"})(["display:flex;margin-left:8px;"]);const b5=()=>{const e=Object(E.a)(),t=Object(P.c)(),{custom_type:n}=Object(s.m)(),i=decodeURIComponent(null!=n?n:""),r=Object(s.k)(),{state:{settingsGlobal:l,status:c,error:d},updateSettingsGlobal:u}=v$(),{settings:p}=g5(),{updateSettings:g}=h5(),[{status:h,data:m,error:f},b]=Object(P.g)(async e=>{const{data:n}=await Object(g$.fetchSettingsForCustomChannelType)({appId:t,custom_type:e});return n},[t]),[j,y]=Object(a.useState)("init"),O=Object(a.useRef)(null),v=`/${t}/settings/profanity-filter`,x=!i,_=Object(a.useMemo)(()=>{if(!i)return"success"===c?l:void 0;if("loading"===h||"error"===h)return;const e=m||p.find(e=>e.custom_type===i);if(e)return e;b(i)},[i,b,p,m,l,c,h]),C=i?h:c,k=i?f:d;Object(P.s)(k),Object(a.useEffect)(()=>{"error"===C&&r.push(v)},[r,v,C]);const w=Object(a.useMemo)(()=>_&&{customChannelType:_.custom_type,keywords:_.profanity_filter.keywords,regexFilters:_.profanity_filter.regex_filters.map(({regex:e})=>e),type:_.profanity_filter.type},[_]);return null==_?null:Object(W.jsxs)(iy.b,{children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.BackButton,{href:`/${t}/settings/profanity-filter`}),Object(W.jsxs)(iy.a.Title,{children:[e.formatMessage({id:"chat.settings.profanityFilter.edit.title"}),x&&Object(W.jsx)(f5,{variant:o.TagVariant.Dark,children:e.formatMessage({id:"chat.settings.profanityFilter.table.column.isGlobal.global.tag.default"})})]})]}),Object(W.jsx)(c5,{ref:O,hasCustomChannelTypeField:!x,defaultValues:w,submitStatus:j,onCancel:()=>r.push(v),onSubmit:async({customChannelType:t,type:n,keywords:a,regexFilters:i})=>{y("pending");try{const s={type:n,keywords:a,regex_filters:i.map(e=>({regex:e}))},l=x?u({profanity_filter:s},{throwError:!0}):g(t,{profanity_filter:s});await l,y("done"),o.toast.success({message:e.formatMessage({id:"chat.settings.channelSettings.noti.updated"})}),r.push(v)}catch(e){o.toast.error({message:Object(mi.b)(e)}),y("init")}}})]})},j5=Object(r.default)(o.Tag).attrs({isInteractive:!0}).withConfig({displayName:"ProfanityFilterList__CustomTypeTag",componentId:"axf2ee-0"})(["cursor:pointer;"]),y5=e=>IS()(e).format({thousandSeparated:!0});var O5=Object(r.default)(iy.b).withConfig({displayName:"ProfanityFilterList___StyledAppSettingsContainer",componentId:"axf2ee-1"})([""," + *{margin-top:32px;}"],iy.a),v5=Object(r.default)(V.Jb).withConfig({displayName:"ProfanityFilterList___StyledLoadMoreTable",componentId:"axf2ee-2"})(["height:calc(100% + 32px);"]),x5=Object(r.default)(pe.Link).withConfig({displayName:"ProfanityFilterList___StyledLink",componentId:"axf2ee-3"})(["position:absolute;left:0;right:0;top:0;bottom:0;outline:0;"]),_5=Object(r.default)(o.Link).withConfig({displayName:"ProfanityFilterList___StyledFeatherLink",componentId:"axf2ee-4"})(["outline:0;"]),C5=Object(r.default)(o.Tag).withConfig({displayName:"ProfanityFilterList___StyledTag",componentId:"axf2ee-5"})(["margin-left:8px;"]);const k5=()=>{const e=Object(E.a)(),t=Object(s.n)(),{settings:n,hasNext:i,status:l}=g5(),{loadMore:c}=h5(),{state:{settingsGlobal:d,status:u}}=v$(),p=Object(a.useMemo)(()=>[d].concat(n).map(({profanity_filter:e,...t})=>({...t,profanity_filter:{...e,keyword_count:e.keywords.split(/[\n,]/).filter(e=>e).length}})),[n,d]),g="loading"===u||"loading"===l&&!i,h={[m$.asterisks]:e.formatMessage({id:"chat.settings.profanityFilter.option.asterisks"}),[m$.block]:e.formatMessage({id:"chat.settings.profanityFilter.option.block"}),[m$.none]:f.Z},m=({custom_type:e})=>e?`${null==t?void 0:t.url}/custom-type/${Object(H.fixedEncodeURIComponent)(e)}`:`${null==t?void 0:t.url}/global`;return Object(W.jsxs)(O5,{isTableView:!0,children:[Object(W.jsxs)(iy.a,{children:[Object(W.jsx)(iy.a.Title,{children:e.formatMessage({id:"chat.settings.profanityFilter.title"})}),Object(W.jsx)(iy.a.Actions,{children:Object(W.jsx)(pe.Link,{to:`${null==t?void 0:t.url}/create`,children:Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",children:e.formatMessage({id:"chat.settings.profanityFilter.btn.add"})})})}),Object(W.jsx)(iy.a.Description,{children:e.formatMessage({id:"chat.settings.profanityFilter.desc"})})]}),Object(W.jsx)(v5,{dataSource:p,loading:g,hasNext:i,loadMoreButtonProps:{onClick:()=>c(),isLoading:i&&"loading"===l},rowStyles:()=>Object(r.css)(["a{font-weight:inherit;}a:not(:hover):not(:active){color:inherit;}&:hover a:not(:hover):not(:active){color:",";}"],Object(o.cssVariables)("purple-7")),rowActions:t=>[Object(W.jsx)(o.OverflowMenu,{items:[{label:e.formatMessage({id:"chat.settings.profanityFilter.form.field.regex.btn.edit"}),href:m(t),useReactRouterLink:!0}],popperProps:{positionFixed:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"},flip:{boundariesElement:"viewport"}}}},"menu")],columns:[{key:"isGlobal",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.isGlobal"}),render:t=>{const n=null==t.custom_type;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(x5,{tabIndex:-1,to:m(t)}),Object(W.jsx)(_5,{href:m(t),useReactRouter:!0,children:e.formatMessage({id:n?"chat.settings.profanityFilter.table.column.isGlobal.global":"chat.settings.profanityFilter.table.column.isGlobal.customChannelType"})}),n&&Object(W.jsx)(C5,{variant:o.TagVariant.Dark,children:e.formatMessage({id:"chat.settings.profanityFilter.table.column.isGlobal.global.tag.default"})})]})},width:117},{dataIndex:"custom_type",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.customChannelType"}),render:e=>e.custom_type?Object(W.jsx)(j5,{maxWidth:220,tabIndex:-1,children:e.custom_type}):f.Z},{key:"isFilterOn",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.isFilterOn"}),render:({profanity_filter:{type:t}})=>e.formatMessage({id:t===m$.none?"chat.settings.profanityFilter.table.column.isFilterOn.off":"chat.settings.profanityFilter.table.column.isFilterOn.on"}),width:88},{key:"filterMethod",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.filterMethod"}),render:e=>h[e.profanity_filter.type],width:192},{key:"explicitWordCount",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.explicitWordCount"}),render:e=>y5(e.profanity_filter.keyword_count),width:132},{key:"regexCount",title:e.formatMessage({id:"chat.settings.profanityFilter.table.column.regexCount"}),render:e=>y5(e.profanity_filter.regex_filters.length),width:177}]})]})},w5=()=>{const e=Object(s.n)();return null==e?Object(W.jsx)(s.c,{to:"/"}):Object(W.jsx)(p5,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/create`,component:m5}),Object(W.jsx)(s.d,{path:`${e.url}/global`,component:b5}),Object(W.jsx)(s.d,{path:`${e.url}/custom-type/:custom_type`,component:b5}),Object(W.jsx)(s.d,{path:e.url,component:k5,exact:!0}),Object(W.jsx)(s.c,{to:e.url})]})})};var T5;!function(e){e.END="END",e.DIAL_AND_END="DIAL_AND_END"}(T5||(T5={}));const S5=T5.END,E5={[T5.END]:["direct_call:end"],[T5.DIAL_AND_END]:["direct_call:dial","direct_call:end"]},I5=e=>{const t=Object.entries(E5).find(([,t])=>xs()(t,e));if(!t)return;const[n]=t;return n},M5=r.default.ul.withConfig({displayName:"CallsIntegration__OptionList",componentId:"sc-1mwni4t-0"})(["list-style:none;li{> div{display:block;}> span{margin-top:4px;padding-left:28px;color:",";","}","}li + li{margin-top:16px;}"],Object(o.cssVariables)("neutral-7"),o.Body["body-short-01"],e=>e.$disabled&&Object(r.css)(["cursor:not-allowed;> span{color:",";}"],Object(o.cssVariables)("neutral-5"))),D5=r.default.div.withConfig({displayName:"CallsIntegration__FormContainer",componentId:"sc-1mwni4t-1"})(["> hr{border:none;height:1px;margin:24px 0;background:",";}"],Object(o.cssVariables)("neutral-3")),A5=Object(r.default)(Dy.d).withConfig({displayName:"CallsIntegration__Container",componentId:"sc-1mwni4t-2"})(["position:relative;> [role='progressbar']{position:absolute;top:0;}"]);var N5=Object(r.default)(o.InlineNotification).withConfig({displayName:"CallsIntegration___StyledInlineNotification",componentId:"sc-1mwni4t-3"})(["* + &{margin-top:16px;}a{text-decoration:underline;color:",";}"],e=>e._css);const R5=()=>{const e=Object(E.a)();return Object(W.jsx)(N5,{type:"info",message:e.formatMessage({id:"chat.settings.messages.callsIntegration.form.notActivated"},{a:e=>Object(W.jsx)(pe.Link,{to:"../calls",children:e})}),_css:Object(o.cssVariables)("neutral-10")})},P5=[{value:T5.END,label:"chat.settings.messages.callsIntegration.form.end.label",description:"chat.settings.messages.callsIntegration.form.end.description"},{value:T5.DIAL_AND_END,label:"chat.settings.messages.callsIntegration.form.dialAndEnd.label",description:"chat.settings.messages.callsIntegration.form.dialAndEnd.description"}],L5=({initialValue:e,isLoading:t,disabled:n,footer:i,onSubmit:s})=>{var r;const l=Object(E.a)(),c=null!=(r=e.option)?r:S5,[d,u]=Object(a.useState)(c),p=(()=>{const e=Object(E.a)(),t=Object(P.W)();return({enabled:n,onConfirm:a})=>{t({dialogTypes:A.a.Confirm,dialogProps:{title:e.formatMessage({id:n?"chat.settings.messages.callsIntegration.form.confirm.title.on":"chat.settings.messages.callsIntegration.form.confirm.title.off"}),description:e.formatMessage({id:n?"chat.settings.messages.callsIntegration.form.confirm.description.on":"chat.settings.messages.callsIntegration.form.confirm.description.off"}),confirmText:e.formatMessage({id:n?"chat.settings.messages.callsIntegration.form.confirm.submit.on":"chat.settings.messages.callsIntegration.form.confirm.submit.off"}),onConfirm:a}})}})(),g=e=>()=>null==s?void 0:s({option:d,enabled:e}),h=t||n,m=h||!e.enabled;return Object(W.jsxs)(Dy.c,{title:l.formatMessage({id:"chat.settings.messages.callsIntegration.title"}),description:l.formatMessage({id:"chat.settings.messages.callsIntegration.description"}),showActions:c!==d,gridItemConfig:{subject:{alignSelf:"start"}},actions:[{key:"cancel",label:l.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>u(c),disabled:t},{key:"save",label:l.formatMessage({id:"label.save"}),buttonType:"primary",onClick:g(e.enabled),isLoading:t,disabled:n}],children:[Object(W.jsxs)(D5,{children:[Object(W.jsx)(o.Toggle,{checked:e.enabled,disabled:h,onChange:e=>p({enabled:e,onConfirm:g(e)})}),Object(W.jsx)("hr",{}),Object(W.jsx)(M5,{$disabled:m,children:P5.map(({value:e,label:t,description:n})=>{return Object(W.jsxs)("li",{children:[Object(W.jsx)(o.Radio,{name:"callsIntegration",label:l.formatMessage({id:t}),checked:e===d,value:e,disabled:m,onChange:(a=e,()=>u(a))}),Object(W.jsx)("span",{children:l.formatMessage({id:n})})]},t);var a})})]}),i]})},F5=({footer:e})=>Object(W.jsx)(L5,{initialValue:{enabled:!1},disabled:!0,footer:e}),U5=()=>{const{callsIntegration:e,loading:t,error:n,load:i,update:s}=(()=>{const e=Object(E.a)(),t=Object(P.c)(),[{status:n,error:i,data:s},r]=Object(P.g)(()=>Object(D2.d)(t),[t]),[{status:l,error:c,data:d},u]=Object(P.g)(e=>Object(D2.o)(t,e),[t]),[p,g]=Object(a.useState)(),[h,m]=Object(a.useState)(),f=[n,l].includes("loading");return Object(a.useEffect)(()=>{s&&g(s.data.chat_integration)},[s]),Object(a.useEffect)(()=>{d&&g(d.data.chat_integration)},[d]),Object(a.useEffect)(()=>{d&&o.toast.success({message:e.formatMessage({id:"chat.settings.messages.callsIntegration.toast.success"})})},[d,e]),Object(a.useEffect)(()=>{i&&m(i)},[i]),Object(a.useEffect)(()=>{c&&m(c)},[c]),{callsIntegration:p,loading:f,error:h,load:r,update:u}})(),r=Object(P.F)();Object(a.useEffect)(()=>{r&&i()},[r,i]),Object(P.s)(n);const l=Object(a.useMemo)(()=>{if(!e)return;const{enabled:t,enabled_events:n}=e;return{enabled:t,option:I5(n)}},[e]);return Object(W.jsxs)(A5,{children:[l?Object(W.jsx)(L5,{initialValue:l,isLoading:t,onSubmit:({enabled:e,option:t})=>s({enabled:e,enabled_events:t?E5[t]:[]})}):Object(W.jsx)(F5,{footer:!r&&Object(W.jsx)(R5,{})}),t&&!l&&Object(W.jsx)(o.SpinnerFull,{})]})},$5=r.default.div.withConfig({displayName:"DomainFilter__Filters",componentId:"djh8v8-0"})([""]),B5=Object(r.default)(o.GridItem).withConfig({displayName:"DomainFilter__DomainUrlGridItem",componentId:"djh8v8-1"})(["margin-left:-8px;"]),V5=r.default.form.withConfig({displayName:"DomainFilter__Form",componentId:"djh8v8-2"})(["padding-top:16px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),z5=r.default.div.withConfig({displayName:"DomainFilter__DeleteTarget",componentId:"djh8v8-3"})(["margin-top:8px;padding:6px 16px;font-size:14px;line-height:1.54;letter-spacing:-0.3px;color:",";word-break:break-word;border-radius:4px;background-color:",";"],Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-1")),H5=[{labelIntlKey:"core.settings.application.message.domainFilter.option_none",value:h$.none},{labelIntlKey:"core.settings.application.message.domainFilter.option_pass",value:h$.pass},{labelIntlKey:"core.settings.application.message.domainFilter.option_block",value:h$.block},{labelIntlKey:"core.settings.application.message.domainFilter.option_replace",value:h$.replace}];var q5=Object(r.default)(V.vc).withConfig({displayName:"DomainFilter___StyledUniqueItemList",componentId:"djh8v8-4"})(["margin-top:4px;"]);const G5=i.a.memo(({isEditable:e,setUnsaved:t,showDialogsRequest:n})=>{const i=Object(E.a)(),{state:{status:s,settingsGlobal:{domain_filter:r}},updateSettingsGlobal:l}=v$(),c="loading"===s,d=Object(o.useForm)({onSubmit:({domainFilterType:e})=>{l({domain_filter:{type:parseInt(e)}},{onSuccess:d.onSuccess,showSuccessToast:!0})}}),u=Object(o.useField)("domainFilterType",d,{defaultValue:r.type.toString()||"",isControlled:!0}),p=Object(o.useForm)({onSubmit:({domain:e})=>{l({domain_filter:{domains:[e,...r.domains]}},{onSuccess:()=>{p.onSuccess(),p.reset()},showSuccessToast:!0})}}),g=Object(o.useField)("domain",p,{defaultValue:"",validate:e=>""===e.trim()?i.formatMessage({id:"core.settings.application.message.domainFilter.input.error_required"}):e.trim().match(/^((http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*))|((http(s)?:\/\/)?(localhost([-a-zA-Z0-9@:%_+.~#?&//=]*)|127(?:\.[0-9]+){0,2}\.[0-9]+|^(?:0*:)*?:?0*1))$/g)?null!=r&&r.domains.includes(e)?i.formatMessage({id:"core.settings.application.message.domainFilter.input.error_duplicate"}):"":i.formatMessage({id:"core.settings.application.message.domainFilter.input.error_invalid"})}),h=Object(a.useCallback)(()=>{switch(r.type.toString()){case h$.pass.toString():return i.formatMessage({id:"core.settings.application.message.domainFilter.dialog.deleteActionByType_pass"});case h$.block.toString():return i.formatMessage({id:"core.settings.application.message.domainFilter.dialog.deleteActionByType_block"});default:return i.formatMessage({id:"core.settings.application.message.domainFilter.dialog.deleteActionByType_none"})}},[r,i]);return Object(a.useEffect)(()=>{u.updateValue(r.type.toString())},[r.type]),Object(a.useEffect)(()=>{t(u.updatable)},[u.updatable,t]),Object(W.jsx)(iy.n,{role:"group",title:i.formatMessage({id:"core.settings.application.message.domainFilter.title"}),"aria-label":i.formatMessage({id:"core.settings.application.message.domainFilter.title"}),description:i.formatMessage({id:"core.settings.application.message.domainFilter.desc"}),gap:["0","32px"],gridItemConfig:{subject:{alignSelf:"start"}},field:u,form:d,radioItems:H5.map(({labelIntlKey:e,value:t})=>({label:i.formatMessage({id:e}),value:t})),isFetching:c,extra:Object(W.jsx)($5,{children:Object(W.jsxs)(o.Grid,{gap:["24px","32px"],children:[Object(W.jsx)(o.GridItem,{colSpan:6,children:" "}),Object(W.jsxs)(B5,{colSpan:6,children:[Object(W.jsx)(V5,{onSubmit:p.onSubmit,children:Object(W.jsx)(o.InputText,{ref:g.ref,size:"small",placeholder:i.formatMessage({id:"core.settings.application.message.domainFilter.input.placeholder"}),error:g.error,suffixButtons:[{key:"domain-submit",label:i.formatMessage({id:"core.settings.application.message.domainFilter.button"}),size:"small",buttonType:"tertiary",type:"submit",disabled:!e}],onChange:g.onChange})}),Object(W.jsx)(q5,{"data-test-id":"DomainFilterList",color:"white",disabled:!e,items:r.domains,rowActions:[{icon:"remove-filled",label:i.formatMessage({id:"core.settings.application.message.domainFilter.btn.delete"}),onClick:e=>{n({dialogTypes:A.a.Custom,dialogProps:{size:"small",title:i.formatMessage({id:"core.settings.application.message.domainFilter.dialog.title_delete"}),description:Object(W.jsx)(ge.a,{id:"core.settings.application.message.domainFilter.dialog.desc_delete",values:{deleteActionByType:h()}}),body:Object(W.jsx)(z5,{children:e}),positiveButtonProps:{text:i.formatMessage({id:"core.settings.application.message.domainFilter.dialog.button.delete"}),buttonType:"danger",onClick:()=>{const t=r.domains.filter(t=>t!==e);l({domain_filter:{domains:t}})}}}})}}]})]})]})})})});var W5=n("CNT2");const K5=i.a.memo(({application:e,isFetchingMaxLengthMessage:t,isEditable:n,setUnsaved:i,updateMaxLengthMessageRequest:s})=>{const r=Object(E.a)(),l=[50,100,200,500,1e3,5e3,1e4,2e4].map(e=>{const t=r.formatMessage({id:"core.settings.application.message.characterLimit.option_length"},{length:e});return{value:e,label:t,node:t}}),c=Object(o.useForm)({onSubmit:({maxLengthItem:e})=>{s({max_length_message:e.value,onSuccess:c.onSuccess})}}),d=Object(o.useField)("maxLengthItem",c,{defaultValue:Object(W5.b)(l,e.max_length_message),isControlled:!0});return Object(a.useEffect)(()=>{i(d.updatable)},[d.updatable,i]),Object(W.jsx)(W5.a,{title:r.formatMessage({id:"core.settings.application.message.characterLimit.title"}),form:c,field:d,items:l,isFetching:t,readOnly:!n})}),Y5=r.default.div.withConfig({displayName:"moderationInfoADMM__CodeContainer",componentId:"sc-1v23kuu-0"})(["pre{font-size:13px;}"]),Q5=i.a.memo(({settings:e,isEditable:t,fetchModeratorInfoADMMRequest:n,updateModeratorInfoADMMRequest:i})=>{const s=Object(E.a)(),{isModeratorInfoInAdminMessage:r,isFetchingModeratorInfoADMM:l}=e,[c,d]=Object(a.useState)(o.CodeSnippetTheme.Light),u=Object(a.useCallback)((e,t)=>{d(t)},[]);return Object(a.useEffect)(()=>{n()},[n]),Object(W.jsx)(w4.a,{title:s.formatMessage({id:"core.settings.application.message.moderatorInfo.title"}),titleColumns:10,description:Object(W.jsx)(ge.a,{id:"core.settings.application.message.moderatorInfo.desc",values:{adminMessage:Object(W.jsx)("b",{children:"Admin Message"}),data:Object(W.jsx)("b",{children:"data"}),user:Object(W.jsx)("b",{children:"user"})}}),isToggleDisabled:!t,checked:r,gap:["0","32px"],isFetching:l,confirmDialogProps:{title:s.formatMessage({id:"core.settings.application.message.moderatorInfo.dialog.title"},{nextToggle:r?"off":"on"}),description:s.formatMessage({id:r?"core.settings.application.message.moderatorInfo.dialog.desc_on2off":"core.settings.application.message.moderatorInfo.dialog.desc_off2on"}),confirmText:s.formatMessage({id:"label.ok"}),onConfirm:()=>i(!r)},gridItemConfig:{body:{justifySelf:"end"}},extra:Object(W.jsx)(Y5,{children:Object(W.jsx)(o.CodeSnippet,{data:[{language:o.Language.Json,code:'{\n  "user": {\n    "nickname": "Sendbird User",\n    "user_id": "sendbird-sdk-user-id",\n    "profile_url": "https://cdn.sendbird.com/example/profile-sample.svg",\n  }\n}\n'}],hasLineNumber:!0,theme:c,onChangeTheme:u})})})}),J5={showDialogsRequest:j.b.showDialogsRequest,updateMaxLengthMessageRequest:j.c.updateMaxLengthMessageRequest,fetchModeratorInfoADMMRequest:j.c.fetchModeratorInfoADMMRequest,updateModeratorInfoADMMRequest:j.c.updateModeratorInfoADMMRequest},X5=i.a.memo(({application:e,settings:t,setUnsaved:n,showDialogsRequest:a,updateMaxLengthMessageRequest:i,fetchModeratorInfoADMMRequest:s,updateModeratorInfoADMMRequest:r})=>{const o=Object(E.a)(),l=Object(P.E)(),{isPermitted:c,isFeatureEnabled:d,isSelfService:u}=Object(P.h)(),p=c(["application.settings.all"]),g=!u||d("domain_filter");return Object(W.jsxs)(KE.b,{children:[Object(W.jsxs)(KE.a,{children:[Object(W.jsx)(KE.a.Title,{children:o.formatMessage({id:"chat.settings.messages.title"})}),Object(W.jsx)(KE.a.Description,{children:o.formatMessage({id:"chat.settings.messages.description"})})]}),Object(W.jsx)(Dy.d,{children:Object(W.jsx)(K5,{application:e,isFetchingMaxLengthMessage:t.isFetchingMaxLengthMessage,isEditable:p,setUnsaved:n,updateMaxLengthMessageRequest:i})}),g&&Object(W.jsx)(G5,{isEditable:p,setUnsaved:n,showDialogsRequest:a}),Object(W.jsx)(Q5,{settings:t,isEditable:p,fetchModeratorInfoADMMRequest:s,updateModeratorInfoADMMRequest:r}),l&&Object(W.jsx)(U5,{})]})}),Z5=Object(b.d)(e=>({application:Object(Ua.i)(e),settings:e.settings}),J5)(X5),e8=()=>{const e=Object(b.f)(),t=Object(P.Y)(e=>e.applicationState.data);return Object(a.useCallback)(n=>{if(!t)return;let a=t;null!=n.always_push&&(a={...a,attrs:{...a.attrs,always_push:n.always_push}}),null!=n.include_channel_unread_count&&(a={...a,attrs:{...a.attrs,push_payload:{...a.attrs.push_payload,include_channel_unread_count:n.include_channel_unread_count}}}),e(j.c.fetchApplicationSuccess(a))},[t,e])},t8=({disabled:e})=>{const t=Object(E.a)(),n=Object(P.c)(),i=Object(P.Y)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.attrs.push_payload.include_channel_unread_count}),s=Object(P.Y)(e=>null==e.applicationState.data),r=e8(),l=Object(a.useMemo)(()=>{const e=async e=>{const a=await Object(g$.updatePushSettings)({appId:n,update:{include_channel_unread_count:e}});r(a.data),o.toast.success({message:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.noti.saved"})})};return i?{title:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOff.title"}),description:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOff.body"}),confirmText:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOff.btn.confirm"}),onConfirm:async t=>{t(!0),await e(!1)}}:{title:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOn.title"}),description:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOn.body"}),confirmText:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.confirmDialog.turnOn.btn.confirm"}),onConfirm:async t=>{t(!0),await e(!0)}}},[n,i,t,r]);return Object(W.jsx)(iy.r,{title:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.title"}),description:t.formatMessage({id:"chat.settings.notifications.includeChannelUnreadCount.description"},{ios:t=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,target:"_blank",href:"https://sendbird.com/docs/chat/v3/ios/guides/push-notifications#2-step-5-handle-a-notification-payload",disabled:e,children:t}),android:t=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,target:"_blank",href:"https://sendbird.com/docs/chat/v3/android/guides/push-notifications#2-push-notifications-for-fcm-3-step-5-handle-an-fcm-message-payload",disabled:e,children:t}),js:t=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,target:"_blank",href:"https://sendbird.com/docs/chat/v3/javascript/guides/push-notifications#2-step-3-receive-fcm-notification-messages",disabled:e,children:t})}),isDisabled:e,gridItemConfig:{body:{alignSelf:"start"}},confirmDialogProps:l,isFetching:s,checked:i})},n8=r.default.time.withConfig({displayName:"APNsExpirationDate__Container",componentId:"fipdro-0"})(["display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;min-width:0;color:",";font-weight:",";"],({$color:e})=>e,({$bold:e})=>e?500:400),a8=r.default.b.withConfig({displayName:"APNsExpirationDate__Red",componentId:"fipdro-1"})(["color:",";font-weight:600;"],Object(o.cssVariables)("red-5")),i8=r.default.b.withConfig({displayName:"APNsExpirationDate__Bold",componentId:"fipdro-2"})(["font-weight:600;"]);var s8=Object(r.default)("div").withConfig({displayName:"APNsExpirationDate___StyledDiv",componentId:"fipdro-3"})(["display:inline-flex;align-items:center;justify-content:center;vertical-align:top;height:20px;"]),r8=Object(r.default)(o.Icon).withConfig({displayName:"APNsExpirationDate___StyledIcon",componentId:"fipdro-4"})(["flex:none;border-radius:4px;background:",";padding:3px;width:22px;height:22px;"],e=>e._css);const o8=({label:e})=>Object(W.jsx)(s8,{children:Object(W.jsx)(r8,{assistiveText:e,icon:"more",size:16,color:Object(o.cssVariables)("neutral-9"),_css:Object(o.cssVariables)("neutral-2")})}),l8=Object(r.default)(o.TooltipTargetIcon).attrs({color:"currentColor",size:16,role:"button"}).withConfig({displayName:"APNsExpirationDate__TooltipIcon",componentId:"fipdro-5"})(["margin-left:3px;"]),c8=({timestamp:e,color:t})=>{const n=Object(E.a)(),i=Object(a.useMemo)(()=>c()(e),[e]),s=i.format(f.A),r=i.toISOString(),l=Math.ceil((e-Date.now())/864e5);return l<=0?Object(W.jsxs)(n8,{$color:t||Object(o.cssVariables)("red-5"),$bold:!0,dateTime:r,children:[n.formatMessage({id:"core.settings.application.notification.apns.expirationDate.expired"}),Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:n.formatMessage({id:"core.settings.application.notification.apns.expirationDate.expired.tooltip"},{date:i.format(f.bb),red:e=>Object(W.jsx)(a8,{children:e}),b:e=>Object(W.jsx)(i8,{children:e}),icon:([e])=>Object(W.jsx)(o8,{label:e})}),tooltipContentStyle:"max-width: 256px;",children:Object(W.jsx)(l8,{icon:"error-filled"})})]}):l<=30?Object(W.jsxs)(n8,{$color:t||Object(o.cssVariables)("yellow-5"),$bold:!0,dateTime:r,children:[s,Object(W.jsx)(o.Tooltip,{variant:o.TooltipVariant.Light,content:n.formatMessage({id:"core.settings.application.notification.apns.expirationDate.warning.tooltip"},{days:l,red:e=>Object(W.jsx)(a8,{children:e}),b:e=>Object(W.jsx)(i8,{children:e}),icon:([e])=>Object(W.jsx)(o8,{label:e})}),tooltipContentStyle:"max-width: 256px;",children:Object(W.jsx)(l8,{icon:"warning-filled"})})]}):Object(W.jsx)(n8,{$color:t||Object(o.cssVariables)("neutral-10"),dateTime:r,children:s})},d8=({items:e,disabled:t=!1})=>{const n=Object(E.a)();return Object(W.jsx)(o.OverflowMenu,{items:e,iconButtonProps:{disabled:t},stopClickEventPropagation:!0,popperProps:{positionFixed:!0,modifiers:{flip:{boundariesElement:"window"},preventOverflow:{boundariesElement:"window"}}},"aria-label":n.formatMessage({id:"core.settings.application.notification.actions.option"})})},u8=r.default.section.withConfig({displayName:"components__PushPlatform",componentId:"sc-65fofn-0"})(["overflow:hidden;& + &{margin-top:48px;}"]),p8=r.default.div.withConfig({displayName:"components__PushPlatformHeader",componentId:"sc-65fofn-1"})(["display:flex;align-items:center;"]),g8=Object(r.default)(o.Icon).withConfig({displayName:"components__PushPlatformIcon",componentId:"sc-65fofn-2"})(["display:inline-block;vertical-align:middle;"]),h8=r.default.h2.withConfig({displayName:"components__PushPlatformTitle",componentId:"sc-65fofn-3"})(["display:inline-block;flex:1;margin-left:8px;vertical-align:middle;font-size:16px;font-weight:500;line-height:1.25;letter-spacing:-0.15px;color:",";"],Object(o.cssVariables)("neutral-10"));var m8=Object(r.default)(o.Table).withConfig({displayName:"components___StyledTable",componentId:"sc-65fofn-4"})(["margin-top:16px;border-radius:4px;thead{border-top-right-radius:4px;border-top-left-radius:4px;}"]);const f8=e=>Object(W.jsx)(m8,{...e}),b8=r.default.section.withConfig({displayName:"components__PushPlatforms",componentId:"sc-65fofn-5"})(["&[aria-disabled='true']{","{color:",";}","{fill:",";}th,td{color:",";}}"],h8,Object(o.cssVariables)("neutral-5"),g8,Object(o.cssVariables)("neutral-5"),Object(o.cssVariables)("neutral-5")),j8=Object(r.default)(o.Link).withConfig({displayName:"components__ColumnLink",componentId:"sc-65fofn-6"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),y8=({intl:e,isEditable:t,isDisabled:n,handleEditClick:a})=>[{dataIndex:"huawei_app_id",title:e.formatMessage({id:"chat.settings.notifications.huawei.th.appId"}),width:"29.1%",render:e=>t?Object(W.jsx)(j8,{onClick:()=>a(e),disabled:n,children:e.huawei_app_id}):e.huawei_app_id,styles:"\n          display: flex;\n          flex-direction: row;\n          flex-wrap: wrap;\n          word-break: break-all;\n        "},{dataIndex:"huawei_app_secret",title:e.formatMessage({id:"chat.settings.notifications.huawei.th.appSecret"}),styles:"\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n      "},{dataIndex:"push_sound",title:e.formatMessage({id:"chat.settings.notifications.apns.th.sound"}),width:"21.25%",render:({push_sound:e})=>e?"Custom":"Default"}],O8=({isEditable:e})=>{const t=Object(E.a)(),n=Object(b.f)(),i=Object(P.W)(),s=Object(b.g)(e=>e.applicationState.data),{configurations:r,isLoading:l,load:c}=(e=>{const[{data:t,status:n},i]=Object(P.g)(()=>D.f.fetchPushConfiguration({app_id:e,push_type:"huawei"}),[e]);return Object(a.useEffect)(()=>{i()},[i]),{configurations:t?t.data.push_configurations:[],load:i,isLoading:"loading"===n}})(null==s?void 0:s.app_id);if(!s)return null;const d=!s.push_enabled,u=(e,t)=>{i({dialogTypes:A.a.PushHuaweiRegister,dialogProps:{pushConfigurationId:t,push_type:"huawei",defaultValues:e,onSuccess:()=>{c()}}})},p=e=>{u(e,e.id)};return Object(W.jsxs)(u8,{children:[Object(W.jsxs)(p8,{children:[Object(W.jsx)(g8,{icon:"huawei",size:24,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsx)(h8,{children:t.formatMessage({id:"chat.settings.notifications.huawei.title"})}),e&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",disabled:d||l,onClick:()=>u(),children:t.formatMessage({id:"chat.settings.notifications.button.add_huawei"})})]}),Object(W.jsx)(f8,{rowKey:"FCM",columns:y8({intl:t,isEditable:e,handleEditClick:p,isDisabled:d}),dataSource:r,loading:l,rowActions:a=>e?[Object(W.jsx)(d8,{disabled:d,items:[{label:t.formatMessage({id:"core.settings.application.notification.actions.edit"}),onClick:()=>{p(a)}},{label:t.formatMessage({id:"core.settings.application.notification.actions.delete"}),onClick:()=>{return e=a.id,void i({dialogTypes:A.a.Confirm,dialogProps:{title:t.formatMessage({id:"chat.settings.notifications.huawei.dialog.delete.title"}),description:t.formatMessage({id:"chat.settings.notifications.huawei.dialog.delete.description"}),confirmText:t.formatMessage({id:"label.delete"}),confirmType:"danger",onConfirm:()=>{n(j.c.deletePushConfigurationRequest({push_type:"HUAWEI",pushConfigurationId:e,onSuccess:()=>{c()}}))}}});var e}}]},"menu")]:[]})]})},v8=["fcm","gcm"],x8=({intl:e,isEditable:t,isDisabled:n,handleEditClick:a})=>{const i=t=>e.formatMessage({id:t?"chat.settings.notifications.apns.on":"chat.settings.notifications.apns.off"});return[{dataIndex:"apns_name",title:e.formatMessage({id:"chat.settings.notifications.apns.th.name"}),styles:"\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        word-break: break-all;\n      ",render:e=>t?Object(W.jsx)(j8,{onClick:()=>a(e),disabled:n,children:e.apns_name}):e.apns_name},{dataIndex:"push_type",title:e.formatMessage({id:"chat.settings.notifications.apns.th.sslCertificateType"}),width:135,render:({apns_type:e})=>M()(e.toLowerCase())},{dataIndex:"push_sound",title:e.formatMessage({id:"chat.settings.notifications.apns.th.sound"}),width:57,render:({push_sound:e})=>e?"Custom":"Default"},{dataIndex:"has_unread_count_badge",title:e.formatMessage({id:"chat.settings.notifications.apns.th.badge"}),width:57,render:({has_unread_count_badge:e})=>i(Boolean(e))},{dataIndex:"mutable_content",title:e.formatMessage({id:"chat.settings.notifications.apns.th.mutableContent"}),width:126,render:({mutable_content:e})=>i(e)},{dataIndex:"content_available",title:e.formatMessage({id:"chat.settings.notifications.apns.th.contentAvailable"}),width:127,render:({content_available:e})=>i(e)},{dataIndex:"apns_expiration",title:e.formatMessage({id:"chat.settings.notifications.apns.th.expiration"}),width:163,styles:"padding-right: 40px",render:({apns_expiration:e})=>{const t=10===String(e).length?1e3*e:e;return Object(W.jsx)(c8,{timestamp:t,color:n?Object(o.cssVariables)("neutral-5"):void 0})}}]},_8=({intl:e,isEditable:t,isDisabled:n,handleEditClick:a})=>[{dataIndex:"api_key",flex:1,title:e.formatMessage({id:"chat.settings.notifications.fcm.th.apiKey"}),render:e=>t?Object(W.jsx)(j8,{onClick:()=>a(e),disabled:n,children:e.api_key}):e.api_key,styles:"\n          display: flex;\n          flex-direction: row;\n          flex-wrap: wrap;\n          word-break: break-all;\n        "},{dataIndex:"sender_id",width:"24%",title:e.formatMessage({id:"chat.settings.notifications.fcm.th.senderId"}),render:e=>e.sender_id||f.Z,styles:"\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n      "},{dataIndex:"push_sound",title:e.formatMessage({id:"chat.settings.notifications.apns.th.sound"}),width:"21.52%",render:({push_sound:e})=>e?"Custom":"Default"}],C8=({isEditable:e})=>{const{isLoadingApplication:t,isPushEnabled:n}=Object(P.V)(e=>{var t;return{isLoadingApplication:null==e.applicationState.data,isPushEnabled:null==(t=e.applicationState.data)?void 0:t.push_enabled}}),i=Object(P.c)(),s=Object(b.f)(),l=Object(P.W)(),c=Object(E.a)(),[d,u]=Object(a.useState)(!1),[p,g]=Object(a.useState)(!1),[h,m]=Object(a.useState)([]),[f,y]=Object(a.useState)([]),O=Object(a.useCallback)(async()=>{if(!t){u(!0);try{const{data:e}=await Object(g$.fetchPushConfiguration)({app_id:i,push_type:"apns"});m(e.push_configurations)}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{u(!1)}}},[i,t]),v=Object(a.useCallback)(async()=>{if(t)return;let e=[];g(!0);try{for(const t of v8){const n=await Object(g$.fetchPushConfiguration)({app_id:i,push_type:t});e=e.concat(n.data.push_configurations)}y(e)}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{g(!1)}},[i,t]);Object(a.useEffect)(()=>{O()},[O]),Object(a.useEffect)(()=>{v()},[v]);const x=(e,t)=>{l({dialogTypes:A.a.PushApnsRegister,dialogProps:{configuration:t,defaultValues:e,onSuccess:O}})},_=(e,t,n)=>{l({dialogTypes:A.a.PushFcmRegister,dialogProps:{pushConfigurationId:t,push_type:null==n?void 0:n.toLowerCase(),defaultValues:e,onSuccess:v}})},C=e=>{if(e.push_type.includes("APNS")){const{apns_env_cert_type:t,content_available:n,mutable_content:a,has_unread_count_badge:i,push_sound:s}=e;return void x({apnsEnvType:t,hasUnreadCountBadge:!!i,mutableContent:a,contentAvailable:n,pushSound:null!=s?s:""},e)}const{id:t,push_type:n,sender_id:a,api_key:i,push_sound:s}=e;_({senderId:a,apiKey:i,pushSound:null!=s?s:""},t,n)},k=(e,t)=>()=>{l({dialogTypes:A.a.Confirm,dialogProps:{title:e.includes("APNS")?c.formatMessage({id:"core.settings.application.notification.apns.dialog.delete.title"}):c.formatMessage({id:"chat.settings.notifications.fcm.deleteDialog.title"}),description:e.includes("APNS")?c.formatMessage({id:"core.settings.application.notification.apns.dialog.delete.description"}):c.formatMessage({id:"chat.settings.notifications.fcm.deleteDialog.desc"}),confirmText:c.formatMessage({id:"label.delete"}),confirmType:"danger",onConfirm:()=>{var n;n={push_type:e,pushConfigurationId:t,onSuccess:()=>{O(),v()}},s(j.c.deletePushConfigurationRequest(n))}}})};if(t)return null;const w=!n;return Object(W.jsxs)(b8,{"aria-disabled":w,children:[Object(W.jsxs)(u8,{children:[Object(W.jsxs)(p8,{children:[Object(W.jsx)(g8,{icon:"apple",size:24,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsx)(h8,{children:c.formatMessage({id:"chat.settings.notifications.apns.title"})}),e&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",disabled:w||d,onClick:()=>x(),children:c.formatMessage({id:"chat.settings.notifications.button.add_apns"})})]}),Object(W.jsx)(f8,{rowKey:"APNS",columns:x8({intl:c,isEditable:e,handleEditClick:C,isDisabled:w}),dataSource:h,loading:d,rowStyles:()=>Object(r.css)(["min-height:72px;"]),rowActions:t=>e?[Object(W.jsx)(d8,{disabled:w,items:[{label:c.formatMessage({id:"core.settings.application.notification.actions.edit"}),onClick:()=>{C(t)}},{label:c.formatMessage({id:"core.settings.application.notification.actions.delete"}),onClick:k(t.push_type,t.id)}]},"menu")]:[]})]}),Object(W.jsxs)(u8,{"aria-labelledby":"fcm-section-title",children:[Object(W.jsxs)(p8,{children:[Object(W.jsx)(g8,{icon:"android",size:24,color:Object(o.cssVariables)("neutral-6")}),Object(W.jsx)(h8,{id:"fcm-section-title",children:c.formatMessage({id:"core.settings.application.notification.fcm.title"})}),e&&Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",disabled:!n||p,onClick:()=>_(),children:c.formatMessage({id:"chat.settings.notifications.button.add_fcm"})})]}),Object(W.jsx)(f8,{rowKey:"FCM",columns:_8({intl:c,isEditable:e,isDisabled:w,handleEditClick:C}),dataSource:f.map(e=>e.gcm_sender_id?{id:e.id,push_type:e.push_type,sender_id:e.gcm_sender_id,api_key:e.gcm_api_key,push_sound:e.push_sound}:{id:e.id,push_type:e.push_type,sender_id:"",api_key:e.api_key,push_sound:e.push_sound}),loading:p,rowActions:t=>e?[Object(W.jsx)(d8,{disabled:w,items:[{label:c.formatMessage({id:"core.settings.application.notification.actions.edit"}),onClick:()=>{C(t)}},{label:c.formatMessage({id:"core.settings.application.notification.actions.delete"}),onClick:k(t.push_type,t.id)}]},"menu")]:[]})]}),Object(W.jsx)(O8,{isEditable:e})]})};var k8=n("4b23");const w8=Object(r.default)(o.InputText).withConfig({displayName:"TemplateFormGridCard__TextField",componentId:"lm4le6-0"})([""]),T8=r.default.h6.withConfig({displayName:"TemplateFormGridCard__MessageType",componentId:"lm4le6-1"})(["",";font-weight:600;margin-bottom:14px;[aria-disabled='true'] &{color:",";}"],o.Typography["label-02"],Object(o.cssVariables)("neutral-5")),S8=r.default.fieldset.withConfig({displayName:"TemplateFormGridCard__Fieldset",componentId:"lm4le6-2"})(["padding:0;border:0;&:not(:first-child)::before{display:block;margin:24px 0;background:",";height:1px;content:'';}"],Object(o.cssVariables)("neutral-3")),E8=({defaultValues:e,disabled:t,formId:n,getRequiredErrorMessage:i,isSubmitting:s,onSubmit:r,readOnly:o,title:l,description:c})=>{const d=Object(E.a)(),{register:u,handleSubmit:p,errors:g,formState:h,reset:m}=Object(_i.d)({defaultValues:e}),{current:f}=Object(a.useRef)(Object(k8.a)());return Object(W.jsxs)(Dy.c,{role:"group",title:l,"aria-label":l,description:c,gridItemConfig:{subject:{alignSelf:"start"}},showActions:h.isDirty,isDisabled:t,actions:[{key:"cancel",label:d.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:()=>m()},{key:"save",label:d.formatMessage({id:"label.save"}),buttonType:"primary",type:"submit",form:n,isLoading:s,disabled:!h.isDirty||s||o}],children:[Object(W.jsx)(V.wc,{when:h.isDirty}),Object(W.jsxs)("form",{id:n,onSubmit:p(e=>r(e,()=>m(e))),"aria-disabled":t,children:[Object(W.jsxs)(S8,{"aria-labelledby":`${f}_MESG`,children:[Object(W.jsx)(T8,{id:`${f}_MESG`,children:d.formatMessage({id:"chat.settings.notifications.template.messageType.text"})}),Object(W.jsx)(w8,{ref:u,name:"textMessageTemplateTitle",label:d.formatMessage({id:"chat.settings.notifications.template.field.title"}),placeholder:d.formatMessage({id:"chat.settings.notifications.template.field.title.placeholder"}),disabled:t,readOnly:o,error:Ci(g.textMessageTemplateTitle)}),Object(W.jsx)(w8,{ref:u({required:!0,validate:e=>e.trim().length>0||i("textMessageTemplateBody")}),name:"textMessageTemplateBody",label:d.formatMessage({id:"chat.settings.notifications.template.field.body"}),placeholder:d.formatMessage({id:"chat.settings.notifications.template.field.body.placeholder"}),disabled:t,readOnly:o,error:Ci(g.textMessageTemplateBody)})]}),Object(W.jsxs)(S8,{"aria-labelledby":`${f}_FILE`,children:[Object(W.jsx)(T8,{id:`${f}_FILE`,children:d.formatMessage({id:"chat.settings.notifications.template.messageType.file"})}),Object(W.jsx)(w8,{ref:u,name:"fileMessageTemplateTitle",label:d.formatMessage({id:"chat.settings.notifications.template.field.title"}),placeholder:d.formatMessage({id:"chat.settings.notifications.template.field.title.placeholder"}),disabled:t,readOnly:o,error:Ci(g.fileMessageTemplateTitle)}),Object(W.jsx)(w8,{ref:u({required:!0,validate:e=>e.trim().length>0||i("fileMessageTemplateBody")}),name:"fileMessageTemplateBody",label:d.formatMessage({id:"chat.settings.notifications.template.field.body"}),placeholder:d.formatMessage({id:"chat.settings.notifications.template.field.body.placeholder"}),disabled:t,readOnly:o,error:Ci(g.fileMessageTemplateBody)})]}),Object(W.jsxs)(S8,{"aria-labelledby":`${f}_ADMM`,children:[Object(W.jsx)(T8,{id:`${f}_ADMM`,children:d.formatMessage({id:"chat.settings.notifications.template.messageType.admin"})}),Object(W.jsx)(w8,{ref:u({required:!0,validate:e=>e.trim().length>0||i("adminMessageTemplateBody")}),name:"adminMessageTemplateBody",label:d.formatMessage({id:"chat.settings.notifications.template.field.body"}),placeholder:d.formatMessage({id:"chat.settings.notifications.template.field.body.placeholder"}),disabled:t,readOnly:o,error:Ci(g.adminMessageTemplateBody)})]})]})]})},I8=["sender_name","message","filename","channel_name","file_type_friendly"].reduce((e,t,n,a)=>Object(W.jsxs)(W.Fragment,{children:[e,Object(W.jsx)("b",{children:`{${t}}`},t),n<a.length-1&&", "]}),Object(W.jsx)(W.Fragment,{})),M8=r.default.h2.withConfig({displayName:"PushNotificationTemplates__Title",componentId:"eogycs-0"})(["margin-bottom:8px;font-size:16px;font-weight:500;line-height:1.25;letter-spacing:-0.15px;color:",";"],Object(o.cssVariables)("neutral-10")),D8=Object(r.default)(Dy.e).withConfig({displayName:"PushNotificationTemplates__Header",componentId:"eogycs-1"})(["padding:24px;&[aria-disabled='true'] *{color:",";}"],Object(o.cssVariables)("neutral-5")),A8=e=>"string"==typeof e?{title:"",body:e}:e,N8=({settings:e,application:t,isEditable:n,fetchPushMessageTemplatesRequest:i,updatePushMessageTemplatesRequest:s})=>{const r=Object(E.a)(),l=!t.push_enabled;Object(a.useEffect)(()=>{e.isPushMessageTemplatesFetched||i()},[i,e.isPushMessageTemplatesFetched]);const c=Object(a.useMemo)(()=>({default:{MESG:A8(t.attrs.push_message_templates.default.MESG),FILE:A8(t.attrs.push_message_templates.default.FILE),ADMM:A8(t.attrs.push_message_templates.default.ADMM)},alternative:{MESG:A8(t.attrs.push_message_templates.alternative.MESG),FILE:A8(t.attrs.push_message_templates.alternative.FILE),ADMM:A8(t.attrs.push_message_templates.alternative.ADMM)}}),[t.attrs.push_message_templates.alternative.ADMM,t.attrs.push_message_templates.alternative.FILE,t.attrs.push_message_templates.alternative.MESG,t.attrs.push_message_templates.default.ADMM,t.attrs.push_message_templates.default.FILE,t.attrs.push_message_templates.default.MESG]);return Object(W.jsxs)(Dy.d,{children:[Object(W.jsxs)(D8,{"aria-disabled":l,children:[Object(W.jsx)(M8,{children:r.formatMessage({id:"chat.settings.notifications.template.title"})}),Object(W.jsx)(Dy.a,{children:Object(W.jsx)(ge.a,{id:"chat.settings.notifications.template.desc",values:{variables:I8,a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"https://sendbird.com/docs/chat/v3/platform-api/guides/application#2-update-a-push-notification-content-template",target:"_blank",disabled:l,children:e})}})})]}),Object(W.jsx)(E8,{formId:"defaultPushNotificationTemplateForm",title:r.formatMessage({id:"chat.settings.notifications.template.default.title"}),description:r.formatMessage({id:"chat.settings.notifications.template.default.description"}),defaultValues:{textMessageTemplateTitle:c.default.MESG.title,textMessageTemplateBody:c.default.MESG.body,fileMessageTemplateTitle:c.default.FILE.title,fileMessageTemplateBody:c.default.FILE.body,adminMessageTemplateBody:c.default.ADMM.body},onSubmit:({textMessageTemplateTitle:e,textMessageTemplateBody:t,fileMessageTemplateTitle:n,fileMessageTemplateBody:a,adminMessageTemplateBody:i},r)=>s({templateName:"default",payload:{template:{MESG:{title:e.trim(),body:t.trim()},FILE:{title:n.trim(),body:a.trim()},ADMM:i}},onSuccess:r}),disabled:l,readOnly:!n,isSubmitting:e.isFetchingPushMessageTemplates,getRequiredErrorMessage:e=>({textMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"}),fileMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"}),adminMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"})}[e])}),Object(W.jsx)(E8,{formId:"alternativePushNotificationTemplateForm",title:r.formatMessage({id:"chat.settings.notifications.template.alternative.title"}),description:r.formatMessage({id:"chat.settings.notifications.template.alternative.description"}),defaultValues:{textMessageTemplateTitle:c.alternative.MESG.title,textMessageTemplateBody:c.alternative.MESG.body,fileMessageTemplateTitle:c.alternative.FILE.title,fileMessageTemplateBody:c.alternative.FILE.body,adminMessageTemplateBody:c.alternative.ADMM.body},onSubmit:({textMessageTemplateTitle:e,textMessageTemplateBody:t,fileMessageTemplateTitle:n,fileMessageTemplateBody:a,adminMessageTemplateBody:i},r)=>s({templateName:"alternative",payload:{template:{MESG:{title:e.trim(),body:t.trim()},FILE:{title:n.trim(),body:a.trim()},ADMM:i}},onSuccess:r}),disabled:l,readOnly:!n,isSubmitting:e.isFetchingPushMessageTemplates,getRequiredErrorMessage:e=>({textMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"}),fileMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"}),adminMessageTemplateBody:r.formatMessage({id:"chat.settings.notifications.template.field.body.error.required"})}[e])})]})};var R8;!function(e){e.on="on",e.off="off"}(R8||(R8={}));const P8=({application:e})=>{const t=Object(E.a)(),n=e8(),i=e.attrs.always_push?R8.on:R8.off,[s,r]=Object(a.useState)(i),{isLoading:l,submit:c}=(()=>{const[{status:e},t]=Object(P.g)(async(e,t)=>await Object(g$.updatePushSettings)({appId:e,update:{always_push:t}}),[]);return{isLoading:"loading"===e,submit:t}})(),d=!e.push_enabled;return Object(W.jsx)(iy.m,{isDisabled:d,title:t.formatMessage({id:"chat.settings.notifications.multiDevice.title"}),gap:["0","32px"],isFetching:l,gridItemConfig:{subject:{alignSelf:"start"}},onSave:async()=>{const a=s===R8.on,i=await c(e.app_id,a);if(200===i.status)return n(i.data),void o.toast.success({message:t.formatMessage({id:"chat.settings.notifications.multiDevice.toast.success"})});o.toast.error({message:Object(mi.b)(i)})},onReset:()=>r(i),onChange:r,selectedValue:s,initialValue:i,radioItems:[{label:t.formatMessage({id:"chat.settings.notifications.multiDevice.label.off"}),description:t.formatMessage({id:"chat.settings.notifications.multiDevice.description.off"}),value:R8.off},{label:t.formatMessage({id:"chat.settings.notifications.multiDevice.label.on"}),description:t.formatMessage({id:"chat.settings.notifications.multiDevice.description.on"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,target:"_blank",href:"https://sendbird.com/docs/chat/v3/android/guides/push-notifications-multi-device-support",disabled:d,children:e})}),value:R8.on}],"data-test-id":"multiDeviceRadioGrid"})},L8={showDialogsRequest:j.b.showDialogsRequest,togglePushEnabledRequest:j.c.togglePushEnabledRequest,fetchPushMessageTemplatesRequest:j.c.fetchPushMessageTemplatesRequest,updatePushMessageTemplatesRequest:j.c.updatePushMessageTemplatesRequest},F8=r.default.div.withConfig({displayName:"notification__ToggleWrapper",componentId:"sc-1bfvxqg-0"})(["font-size:0;margin-left:16px;"]);var U8=Object(r.default)(KE.a).withConfig({displayName:"notification___StyledAppSettingPageHeader",componentId:"sc-1bfvxqg-1"})(["","{margin-top:24px;}"],e=>e._css),$8=Object(r.default)(o.InlineNotification).withConfig({displayName:"notification___StyledInlineNotification",componentId:"sc-1bfvxqg-2"})(["margin-bottom:24px;"]);const B8=Object(b.d)(null,L8)(({showDialogsRequest:e,togglePushEnabledRequest:t,fetchPushMessageTemplatesRequest:n,updatePushMessageTemplatesRequest:i})=>{var s;const r=Object(E.a)(),l=Object(P.V)(e=>e.settings),c=Object(P.V)(e=>e.applicationState.data),{isPermitted:d}=Object(P.h)(),u=d(["application.settings.all"]),p=null!=(s=null==c?void 0:c.push_enabled)&&s,g=Object(P.F)(),h=Object(a.useCallback)(()=>{e({dialogTypes:A.a.Confirm,dialogProps:p?{title:r.formatMessage({id:"chat.settings.notifications.dialog.push_title.turnOff"}),description:r.formatMessage({id:"chat.settings.notifications.dialog.push_desc.turnOff"}),confirmText:r.formatMessage({id:"chat.settings.notifications.dialog.push_button_off"}),onConfirm:()=>t(!1)}:{title:r.formatMessage({id:"chat.settings.notifications.dialog.push_title.turnOn"}),description:r.formatMessage({id:"chat.settings.notifications.dialog.push_desc.turnOn"}),confirmText:r.formatMessage({id:"chat.settings.notifications.dialog.push_button_on"}),onConfirm:()=>t(!0)}})},[r,p,e,t]);return c?Object(W.jsxs)(KE.b,{children:[Object(W.jsxs)(U8,{_css:KE.a.Description,children:[Object(W.jsxs)(KE.a.Title,{children:[r.formatMessage({id:"chat.settings.notifications.header.title"}),Object(W.jsx)(F8,{children:Object(W.jsx)(o.Toggle,{checked:c.push_enabled,disabled:!u,onChange:h})})]}),Object(W.jsx)(KE.a.Description,{$textOnly:!0,children:Object(W.jsx)(ge.a,{id:"chat.settings.notifications.header.description",values:{ios:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"https://sendbird.com/docs/chat/v3/ios/guides/push-notifications",target:"_blank",children:e}),android:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"https://sendbird.com/docs/chat/v3/android/guides/push-notifications",target:"_blank",children:e})}})})]}),g&&Object(W.jsx)($8,{type:"info",message:r.formatMessage({id:"chat.settings.notifications.alerts.callsMoved"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"../calls/settings/notifications",useReactRouter:!0,children:e})})}),Object(W.jsx)(P8,{application:c}),Object(W.jsx)(t8,{disabled:!c.push_enabled}),Object(W.jsx)(iy.j,{children:Object(W.jsx)(iy.i,{isDisabled:!c.push_enabled,title:r.formatMessage({id:"core.settings.application.notification.push_title"}),titleColumns:8,gap:["0","32px"],gridItemConfig:{body:{justifySelf:"end"}},extra:Object(W.jsx)(C8,{isEditable:u})})}),Object(W.jsx)(N8,{application:c,settings:l,isEditable:u,fetchPushMessageTemplatesRequest:n,updatePushMessageTemplatesRequest:i})]}):null}),V8=r.default.h3.withConfig({displayName:"GroupChannelInformation__Title",componentId:"sc-183hc76-0"})([""," margin-bottom:4px;"],o.Subtitles["subtitle-01"]),z8=r.default.h4.withConfig({displayName:"GroupChannelInformation__Subtitle",componentId:"sc-183hc76-1"})([""," display:grid;grid-template-columns:1fr 40px;margin-bottom:16px;"],o.Subtitles["subtitle-01"]),H8=r.default.p.withConfig({displayName:"GroupChannelInformation__Description",componentId:"sc-183hc76-2"})([""," color:",";margin-bottom:8px;"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),q8=r.default.div.withConfig({displayName:"GroupChannelInformation__StyledGroupChannelInformation",componentId:"sc-183hc76-3"})(["margin-top:24px;border-top:1px solid ",";padding-top:24px;","{padding:18px 24px;}"],Object(o.cssVariables)("neutral-3"),V.o),G8=Object(a.memo)(({isEditable:e,setIncludeMembers:t,includeMembers:n,setIncludeUnreadCount:a,includeUnreadCount:i})=>{const s=Object(E.a)();return Object(W.jsxs)(q8,{children:[Object(W.jsx)(V8,{children:s.formatMessage({id:"chat.settings.webhooks.groupChannelInformation.title"})}),Object(W.jsx)(H8,{children:Object(W.jsx)(ge.a,{id:"chat.settings.webhooks.groupChannelInformation.desc"})}),Object(W.jsxs)(V.o,{children:[Object(W.jsxs)(z8,{children:[s.formatMessage({id:"chat.settings.webhooks.groupChannelInformation.subTitle"}),Object(W.jsx)(o.Toggle,{name:"includeMembers",checked:n,onChange:e=>{t(e)}})]}),Object(W.jsx)(o.Checkbox,{name:"includeUnreadCount",checked:i,label:s.formatMessage({id:"chat.settings.webhooks.groupChannelInformation.label.includeUnreadCount"}),onChange:e=>{a(e.target.checked)},disabled:!e||!n})]})]})}),W8=Object(a.createContext)({isUnsaved:!1,setIsUnsaved:()=>{}}),K8=r.default.div.withConfig({displayName:"collapsibleGroup__CollapsibleSettingGroup",componentId:"sc-6rnwwm-0"})(["margin-top:24px;padding-top:20px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),Y8=Object(r.default)(V.u).withConfig({displayName:"collapsibleGroup__CollapsibleSettingWrapper",componentId:"sc-6rnwwm-1"})(["border:1px solid ",";border-radius:4px;& + &{margin-top:8px;border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-3")),Q8=r.default.div.withConfig({displayName:"collapsibleGroup__CollapsibleTitle",componentId:"sc-6rnwwm-2"})(["display:inline-flex;align-items:center;> span{display:inline-block;}"]),J8=r.default.div.withConfig({displayName:"collapsibleGroup__CollapsibleBody",componentId:"sc-6rnwwm-3"})([""]),X8=r.default.ul.withConfig({displayName:"collapsibleGroup__OptionGroup",componentId:"sc-6rnwwm-4"})(["list-style:none;padding-top:16px;& + &{border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3")),Z8=r.default.li.withConfig({displayName:"collapsibleGroup__OptionItem",componentId:"sc-6rnwwm-5"})(["",";& + &{margin-top:16px;}"],({isHidden:e})=>e?"display: none":""),e9=["group_channel:old_kick_out:join","group_channel:old_kick_out:invite"],t9=i.a.memo(({title:e,items:t,enabled:n})=>{const a=Object.keys(t).filter(e=>!e9.includes(e)),i=a.filter(e=>t[e].value).length,s=a.length,l=r.default.span.withConfig({displayName:"collapsibleGroup__Highlight",componentId:"sc-6rnwwm-6"})(["color:",";"],e=>e.disabled?Object(o.cssVariables)("neutral-5"):Object(o.cssVariables)("purple-7")),c=e=>()=>{e.updateValue(!e.value)};return Object(W.jsx)(Y8,{title:Object(W.jsxs)(Q8,{children:[e," (",Object(W.jsx)(l,{disabled:!n,children:i})," / ",Object(W.jsx)("span",{children:s}),")"]}),initialCollapsed:!0,disabled:!n,children:Object(W.jsx)(J8,{children:Object(W.jsx)(X8,{children:Object.values(t).map(e=>Object(W.jsx)(Z8,{isHidden:e9.includes(e.name),children:Object(W.jsx)(o.Checkbox,{id:e.name,label:e.name,checked:e.value,onChange:c(e),disabled:!n})},e.name))})})})}),n9=["open_channel","group_channel","user","operators","report","profanity_filter","image_moderation","announcement","alert"],a9={open_channel:"core.settings.application.webhooks.eventsToSend.section.openChannel",group_channel:"core.settings.application.webhooks.eventsToSend.section.groupChannel",user:"core.settings.application.webhooks.eventsToSend.section.user",operators:"core.settings.application.webhooks.eventsToSend.section.operators",report:"core.settings.application.webhooks.eventsToSend.section.report",profanity_filter:"core.settings.application.webhooks.eventsToSend.section.profanity",announcement:"core.settings.application.webhooks.eventsToSend.section.announcement",image_moderation:"core.settings.application.webhooks.eventsToSend.section.imageModeration",alert:"core.settings.application.webhooks.eventsToSend.section.alert"},i9=i.a.memo(({form:e,enabled:t,webhookAllEvents:n,enabledEventSet:i})=>{const s=Object(E.a)(),{setIsUnsaved:r}=Object(a.useContext)(W8),l={};[...n].sort().forEach(t=>{const[n,a]=t.split(":"),s=a.includes("report")?"report":n;s in l||(l[s]={}),l[s][t]=Object(o.useField)(t,e,{defaultValue:i.has(t),isControlled:!0})}),r(Object.values(l).some(e=>Object.values(e).some(e=>e.updatable)));const c=Object.keys(l).filter(e=>!n9.includes(e));return Object(W.jsxs)(K8,{"data-test-id":"WebhookCollapsibleGroup",children:[n9.filter(e=>!!l[e]).map(e=>Object(W.jsx)(t9,{title:s.formatMessage({id:a9[e]}),items:l[e],enabled:t},e)),c.map(e=>Object(W.jsx)(t9,{title:e,items:l[e],enabled:t},e))]})}),s9=r.default.div.withConfig({displayName:"eventsToSend__Radios",componentId:"mzux7p-0"})(["display:flex;flex-direction:column;align-items:flex-start;"]),r9=r.default.div.withConfig({displayName:"eventsToSend__RadioWrapper",componentId:"mzux7p-1"})(["& + &{margin-top:8px;}"]),o9=Object(a.createContext)({isUnsaved:!1,setIsUnsaved:()=>{},isOpenedCollapsibleGroup:!1,setIsOpenedCollapsibleGroup:()=>{}}),l9=({form:e,enabled:t,enabledEventSet:n,webhookAllEvents:i})=>{const s=Object(E.a)(),{setIsUnsaved:r,setIsOpenedCollapsibleGroup:l}=Object(a.useContext)(o9),c=Object(o.useField)("displayAllCategories",e,{defaultValue:i.every(e=>n.has(e)),isControlled:!0}),d=Object(a.useCallback)(e=>()=>{c.updateValue(e)},[c]);return Object(a.useEffect)(()=>{l(!c.value),r(c.updatable&&c.value)},[c.value,c.updatable,l,r]),Object(W.jsxs)(s9,{children:[Object(W.jsx)(r9,{children:Object(W.jsx)(o.Radio,{name:"events",label:s.formatMessage({id:"core.settings.application.webhooks.eventsToSend.label_allEvents"}),onChange:d(!0),checked:c.value,disabled:!t})}),Object(W.jsx)(r9,{children:Object(W.jsx)(o.Radio,{name:"events",label:s.formatMessage({id:"core.settings.application.webhooks.eventsToSend.label_selectedEvents"}),onChange:d(!1),checked:!c.value,disabled:!t})})]})},c9=i.a.memo(({setUnsaved:e,isEditable:t,isFetchingWebhookInformation:n,webhookSetting:i,webhookAllEvents:s,updateWebhookInformationRequest:r})=>{const l=Object(E.a)(),{enabled:c,url:d,include_members:u,include_unread_count:p,enabled_events:g}=i,[h,m]=Object(a.useState)(!1),[f,b]=Object(a.useState)(!1),[j,y]=Object(a.useState)(!1),[O,v]=Object(a.useState)(u),[x,_]=Object(a.useState)(p),C=new Set(g),k=Object(o.useForm)({onSubmit:({displayAllCategories:e,...t})=>{const n=Object.keys(TW()(t,e=>e));r({url:d,enabled:c,onSuccess:k.onSuccess,enabled_events:e?["*"]:n,include_members:O,include_unread_count:x})}}),w=[f,h,O!==u,x!==p].some(e=>e);return Object(a.useEffect)(()=>{e(w)},[e,w]),Object(W.jsxs)(Dy.c,{title:l.formatMessage({id:"core.settings.application.webhooks.eventsToSend.title"}),description:l.formatMessage({id:"core.settings.application.webhooks.eventsToSend.desc"}),gridItemConfig:{subject:{alignSelf:"start"},body:{alignSelf:"start"}},showActions:w,actions:[{key:"cancel",label:l.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:k.reset},{key:"save",label:l.formatMessage({id:"label.save"}),buttonType:"primary",onClick:e=>{k.onSubmit(e)},isLoading:n,disabled:n||!t}],"data-test-id":"EventsToSend",children:[Object(W.jsx)(o9.Provider,{value:{isUnsaved:f,setIsUnsaved:b,isOpenedCollapsibleGroup:j,setIsOpenedCollapsibleGroup:y},children:Object(W.jsx)(l9,{form:k,enabled:c,enabledEventSet:C,webhookAllEvents:s})}),Object(W.jsx)(W8.Provider,{value:{isUnsaved:h,setIsUnsaved:m},children:j&&Object(W.jsx)(i9,{form:k,enabled:c,enabledEventSet:C,webhookAllEvents:s})}),Object(W.jsx)(G8,{isEditable:!n&&t,includeMembers:O,includeUnreadCount:x,setIncludeMembers:v,setIncludeUnreadCount:_})]})}),d9=({setUnsaved:e})=>{const t=Object(E.a)(),n=Object(b.g)(e=>e.settings),i=Object(b.f)(),{isPermitted:s,isSelfService:r}=Object(P.h)(),l=s(["application.settings.all"]),{enabled:c,url:d,include_members:u,include_unread_count:p}=n.webhook;Object(a.useEffect)(()=>{i(j.c.getWebhookAllCategoriesRequest())},[i]),Object(a.useEffect)(()=>{i(j.c.getWebhooksInformationRequest())},[i,n.webhookAllEvents.length]);const g=e=>{i(j.c.updateWebhookInformationRequest(e))};return Object(W.jsxs)(KE.b,{children:[Object(W.jsxs)(KE.a,{children:[Object(W.jsxs)(KE.a.Title,{children:[t.formatMessage({id:"calls.settings.application.tab.webhooks"}),r?void 0:Object(W.jsx)(V.Dc,{checked:c,onConfirm:e=>{g({enabled:e,url:d,include_members:u,include_unread_count:p})}})]}),Object(W.jsx)(KE.a.Description,{children:Object(W.jsx)(ge.a,{id:"core.settings.application.tab.webhooks.description",values:{a:e=>Object(W.jsx)("a",{href:"https://sendbird.com/docs/chat/v3/platform-api/guides/webhooks",target:"_blank",children:e})}})})]}),n.isFetchedWebhook?Object(W.jsxs)(Dy.d,{children:[Object(W.jsx)(V.xc,{defaultValue:n.webhook.url,isLoading:n.isFetchingWebhookInformation,disabled:!n.webhook.enabled||!l,onChange:e,onSubmit:e=>{g({enabled:c,url:e,include_members:u,include_unread_count:p})}}),Object(W.jsx)(c9,{setUnsaved:e,isEditable:l,isFetchingWebhookInformation:n.isFetchingWebhookInformation,webhookSetting:n.webhook,webhookAllEvents:n.webhookAllEvents,updateWebhookInformationRequest:g})]}):Object(W.jsx)(o.SpinnerFull,{})]})};var u9=n("oOaM");const p9=r.default.div.withConfig({displayName:"general__SecondaryAPIToken",componentId:"k6741p-0"})(["position:relative;font-size:14px;line-height:20px;letter-spacing:-0.13px;height:48px;display:flex;align-items:center;padding:0 76px 0 16px;border-top:1px solid ",";"],Object(o.cssVariables)("neutral-3")),g9=r.default.div.withConfig({displayName:"general__SecondaryAPITokenValue",componentId:"k6741p-1"})(["color:",";"],Object(o.cssVariables)("neutral-9")),h9=r.default.div.withConfig({displayName:"general__SecondaryAPITokenActions",componentId:"k6741p-2"})(["position:absolute;right:8px;button + button{margin-left:4px;}"]),m9=r.default.div.withConfig({displayName:"general__SecondaryAPITokens",componentId:"k6741p-3"})(["margin-top:8px;margin-bottom:8px;border:1px solid ",";border-radius:4px;.secondary-empty{width:100%;font-size:14px;color:",";line-height:20px;height:48px;display:flex;justify-content:center;align-items:center;border-top:1px solid ",";}"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-6"),Object(o.cssVariables)("neutral-3")),f9=Object(r.default)(p9).withConfig({displayName:"general__SecondaryAPITokensTitle",componentId:"k6741p-4"})(["border-top:none;font-weight:500;height:40px;color:",";"],Object(o.cssVariables)("neutral-10")),b9=r.default.div.withConfig({displayName:"general__SecondaryAPITokensHeader",componentId:"k6741p-5"})(["margin-top:24px;padding-top:24px;border-top:1px solid ",";font-size:12px;font-weight:500;color:",";"],Object(o.cssVariables)("neutral-3"),Object(o.cssVariables)("neutral-10")),j9=r.default.div.withConfig({displayName:"general__ServerText",componentId:"k6741p-6"})(["display:flex;flex-direction:row;align-items:center;height:40px;"]),y9=r.default.div.withConfig({displayName:"general__ServerName",componentId:"k6741p-7"})(["margin-right:12px;",";"],o.Body["body-short-01"]),O9=r.default.p.withConfig({displayName:"general__AppCreatedOnText",componentId:"k6741p-8"})(["padding-top:10px;padding-bottom:10px;",";"],o.Body["body-short-01"]),v9=r.default.div.withConfig({displayName:"general__RateLimitSection",componentId:"k6741p-9"})(["margin-top:24px;padding-top:24px;border-top:1px solid ",";display:grid;grid-template-columns:59px 1fr 135px;grid-column-gap:24px;font-size:14px;align-items:center;"],Object(o.cssVariables)("neutral-3")),x9=r.default.div.withConfig({displayName:"general__RateLimitLabel",componentId:"k6741p-10"})(["",";color:",";"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),_9={showDialogsRequest:j.b.showDialogsRequest,changeAppNameRequest:j.c.changeAppNameRequest,getAPITokenRequest:j.c.getAPITokenRequest},C9=Object(b.d)(e=>({organization:e.organizations.current,application:Object(Ua.i)(e),isSSO:e.auth.is_social||e.auth.is_sso,isFetchingAppName:e.settings.isFetchingAppName}),_9)(({organization:e,application:t,isSSO:n,isFetchingAppName:i,setUnsaved:l,showDialogsRequest:d,changeAppNameRequest:u,getAPITokenRequest:p})=>{const g=Object(E.a)(),{isPermitted:h}=Object(P.h)(),m=Object(s.k)(),[b,j]=Object(a.useState)(!1),[y,O]=Object(a.useState)(""),[v,x]=Object(a.useState)([]),_=t.app_id,k=`https://api-${t.app_id}.sendbird.com`,w=Object(o.useForm)({onSubmit:({appName:e})=>{u({app_id:t.app_id,app_name:e,onSuccess:w.onSuccess})}}),T=Object(o.useField)("appName",w,{defaultValue:t.app_name,validate:e=>{let t="";return 0===e.trim().length&&(t=g.formatMessage({id:"core.settings.general.app.error_required"})),t}}),S=()=>{j(!0)},I=Object(a.useCallback)(()=>{vi()(t.app_id),o.toast.info({message:C.m})},[t]),M=Object(a.useCallback)(()=>{vi()(y),o.toast.info({message:C.m})},[y]),D=e=>()=>{vi()(e),o.toast.info({message:C.m})},N=Object(a.useCallback)(()=>{vi()(k),o.toast.info({message:C.m})},[k]),R=Object(a.useCallback)(()=>{n?p({password:"",onSuccess:e=>{O(e),S()}}):d({dialogTypes:A.a.GetApiToken,dialogProps:{onSuccess:e=>{O(e),S()}}})},[p,n,d]),L=e=>()=>{d({dialogTypes:A.a.Delete,dialogProps:{title:g.formatMessage({id:"core.settings.general.apiToken_title.revokeDialog"}),description:g.formatMessage({id:"core.settings.general.apiToken_desc.revokeDialog"}),confirmText:g.formatMessage({id:"core.settings.general.apiToken_title.btn.revoke"}),onDelete:()=>{Object(g$.revokeAPITokens)({appId:t.app_id,apiToken:e}).then(()=>{x(t=>t.filter(({token:t})=>t!==e))}).catch(e=>{o.toast.error({message:Object(mi.b)(e)})})}}})},F=Object(a.useCallback)(e=>{Object(g$.createAPITokens)({appId:t.app_id,apiToken:e}).then(e=>x(t=>[...t,e.data])).catch(e=>{e&&e.data&&e.data.code?400203===e.data.code&&o.toast.warning({message:g.formatMessage({id:"core.settings.general.apiToken_toast.maximum"})}):o.toast.error({message:Object(mi.b)(e)})})},[t.app_id,g]),U=Object(a.useCallback)(()=>{d({dialogTypes:A.a.DeleteApplication,dialogProps:{application:t,onSuccess:()=>{m.push("/")}}})},[t,m,d]);Object(a.useEffect)(()=>{l(T.updatable)},[T.updatable,l]),Object(a.useEffect)(()=>{Object(g$.fetchAPITokens)({appId:t.app_id}).then(({data:e})=>x(e.api_tokens)).catch(e=>{o.toast.error({message:Object(mi.b)(e)})})},[t.app_id]);const $=b?"copy":"show",B=c()(e.created_at).valueOf()>=f.Qb;return Object(W.jsxs)(KE.b,{children:[Object(W.jsx)(KE.a,{children:Object(W.jsx)(KE.a.Title,{children:g.formatMessage({id:"core.settings.application.tab.general"})})}),Object(W.jsxs)(Dy.d,{children:[Object(W.jsx)(Dy.c,{title:g.formatMessage({id:"core.settings.general.appId.title"}),children:Object(W.jsx)(o.InputText,{name:"app_id",value:_,readOnly:!0,icons:[{icon:"copy",title:"Copy",onClick:I}],"data-test-id":"AppIdField"})}),Object(W.jsx)(u9.a,{title:g.formatMessage({id:"core.settings.general.app.title"}),titleColumns:6,form:w,field:T,isFetching:i,readOnly:!h(["application.settings.all"])}),Object(W.jsx)(Dy.c,{title:g.formatMessage({id:"core.settings.general.app.createdOn"}),children:Object(W.jsx)(O9,{children:c()(t.created_at).format(f.ec)})}),Object(W.jsx)(Dy.c,{title:g.formatMessage({id:"core.settings.general.server.title"}),children:Object(W.jsxs)(j9,{children:[Object(W.jsx)(y9,{children:Object.prototype.hasOwnProperty.call(e.regions,t.region)?e.regions[t.region].name:t.region}),Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",icon:"open-in-new",onClick:()=>{window.open(Object.keys(f.Rb).includes(t.region)?f.Rb[t.region]:"https://status.sendbird.com")},children:g.formatMessage({id:"core.settings.general.server.viewStatus"})})]})})]}),Object(W.jsxs)(Dy.d,{children:[Object(W.jsxs)(Dy.c,{title:g.formatMessage({id:"core.settings.general.apiRequestUrl.title"}),titleColumns:6,gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(o.InputText,{name:"api_url",value:k,readOnly:!0,icons:[{icon:"copy",title:"Copy",onClick:N}],"data-test-id":"APIRequestURLField"}),Object(W.jsxs)(v9,{children:[Object(W.jsx)(x9,{children:g.formatMessage({id:"core.settings.general.rateLimit.label"})}),B?"V2":"V1",Object(W.jsx)(o.Link,{href:B?"https://sendbird.com/docs/chat/v3/platform-api/guides/rate-limits":"https://sendbird.com/docs/chat/v3/platform-api/guides/application#-3-default-settings",target:"_blank",iconProps:{size:16,icon:"open-in-new"},children:g.formatMessage({id:"core.settings.general.rateLimit.docs"})})]})]}),Object(W.jsxs)(Dy.c,{title:g.formatMessage({id:"core.settings.general.apiToken_title"}),description:g.formatMessage({id:"core.settings.general.apiToken_desc"}),titleColumns:6,gridItemConfig:{subject:{alignSelf:"start"}},children:[Object(W.jsx)(o.InputText,{label:g.formatMessage({id:"core.settings.general.apiToken.label.masterAPIToken"}),value:b?y:"●●●●●●●●●●●●●●●",icons:h(["application.settings.all"])?[{icon:$,title:hb()($),onClick:b?M:R}]:[],readOnly:!0,"data-test-id":"MasterAPITokenField"}),Object(W.jsx)(b9,{children:g.formatMessage({id:"core.settings.general.apiToken.label.secondaryAPIToken"})}),Object(W.jsxs)(m9,{children:[Object(W.jsx)(f9,{children:g.formatMessage({id:"core.settings.general.apiToken.label.tokens"})}),v.length>0?v.map((e,t)=>Object(W.jsxs)(p9,{"data-test-id":"SecondaryAPIToken",children:[Object(W.jsx)(g9,{children:e.token}),Object(W.jsxs)(h9,{children:[Object(W.jsx)(o.IconButton,{icon:"copy",buttonType:"tertiary",size:"small",title:"Copy",onClick:D(e.token)}),h(["application.settings.all"])&&Object(W.jsx)(o.IconButton,{icon:"delete",buttonType:"tertiary",size:"small",title:g.formatMessage({id:"core.settings.general.apiToken_title.btn.revoke"}),onClick:L(e.token),"data-test-id":"DeleteButton"})]})]},`apiToken_${t}`)):Object(W.jsx)("div",{className:"secondary-empty",children:g.formatMessage({id:"core.settings.general.apiToken_desc.empty"})})]}),h(["application.settings.all"])&&Object(W.jsx)(o.Button,{buttonType:"primary",variant:"ghost",size:"small",icon:"plus",onClick:()=>{n?p({password:"",onSuccess:e=>{F(e)}}):d({dialogTypes:A.a.GetApiToken,dialogProps:{description:g.formatMessage({id:"core.settings.general.apiToken_desc.confirmDialog"}),onSuccess:e=>{F(e)}}})},children:g.formatMessage({id:"core.settings.general.apiToken_btn.generateSecondaryAPIToken"})})]})]}),h(["application.settings.all"])&&Object(W.jsx)(Dy.d,{children:Object(W.jsx)(Dy.c,{title:g.formatMessage({id:"core.settings.general.delete.title"}),titleColumns:6,children:Object(W.jsx)(o.Button,{buttonType:"danger",styles:Object(r.css)(["width:96px;"]),onClick:U,"data-test-id":"DeleteApplicationButton",children:g.formatMessage({id:"core.settings.general.delete.button"})})})})]})});var k9=n("uGGy"),w9=n.n(k9),T9=n("EE1x"),S9=n.n(T9);const E9=r.default.div.withConfig({displayName:"UniqueItemListForm__Container",componentId:"sc-1im4pge-0"})([""]),I9=r.default.form.withConfig({displayName:"UniqueItemListForm__AddItemForm",componentId:"sc-1im4pge-1"})(["display:flex;> button{margin-left:8px;}"]),M9=r.default.ul.withConfig({displayName:"UniqueItemListForm__ItemList",componentId:"sc-1im4pge-2"})(["list-style:none;margin-top:28px;"]),D9=r.default.li.withConfig({displayName:"UniqueItemListForm__Item",componentId:"sc-1im4pge-3"})(["display:flex;justify-content:space-between;align-items:center;background:",";color:",";padding:4px 16px;padding-right:8px;border-radius:4px;font-size:14px;line-height:1.43;& + &{margin-top:8px;}"],Object(o.cssVariables)("neutral-2"),Object(o.cssVariables)("neutral-7")),A9=r.default.div.withConfig({displayName:"UniqueItemListForm__InputContainer",componentId:"sc-1im4pge-4"})(["width:100%;"]);var N9=Object(r.default)(o.InlineNotification).withConfig({displayName:"UniqueItemListForm___StyledInlineNotification",componentId:"sc-1im4pge-5"})(["margin-top:20px;"]),R9=Object(r.default)(o.Spinner).withConfig({displayName:"UniqueItemListForm___StyledSpinner",componentId:"sc-1im4pge-6"})(["margin:56px auto 32px;"]);const P9=Object(a.forwardRef)(({items:e,pendingRemoveItems:t=[],isLoading:n,error:i,inputPlaceholder:s,addButtonLabel:r,addButtonIsLoading:l,disabled:c,onItemAdd:d,onItemDelete:u,onReload:p,validate:g,className:h},m)=>{var f;const b=Object(E.a)(),{register:j,handleSubmit:y,watch:O,reset:v,errors:x,setError:_}=Object(_i.d)(),C=O("value");Object(a.useImperativeHandle)(m,()=>({setError:e=>{_("value",{type:"serverError",message:e})}}),[_]);return Object(W.jsxs)(E9,{className:h,children:[Object(W.jsxs)(I9,{onSubmit:y(({value:e})=>{d(e,()=>v())}),children:[Object(W.jsx)(A9,{children:Object(W.jsx)(o.InputText,{ref:j({validate:g}),type:"text",name:"value",placeholder:s,icons:C?[{icon:"close",type:"button",onClick:()=>v()}]:void 0,required:!0,error:null!=(f=x.value)&&f.message?{hasError:!0,message:x.value.message}:void 0,disabled:c})}),Object(W.jsx)(o.Button,{buttonType:"primary",isLoading:l,type:"submit",disabled:c,children:r})]}),i?Object(W.jsx)(N9,{message:i,type:"info",action:{label:b.formatMessage({id:"chat.settings.commonActions.btn.retry"}),onClick:p,isLoading:n,disabled:n}}):0===e.length&&n?Object(W.jsx)(R9,{size:24,stroke:Object(o.cssVariables)("neutral-5")}):e.length>0?Object(W.jsx)(M9,{children:e.map(e=>Object(W.jsxs)(D9,{children:[e,Object(W.jsx)(o.IconButton,{"aria-label":"Delete",buttonType:"tertiary",icon:"delete",size:"small",onClick:()=>{u(e)},isLoading:t.includes(e),disabled:c})]},e))}):null]})}),L9=i.a.memo(({isEditable:e})=>{const t=Object(E.a)(),n=Object(a.useRef)(null),{ipWhitelist:i,error:s,pendingRemoveItem:r,addItem:l,removeItem:c,status:d,fetchList:u}=(e=>{const t=Object(E.a)(),[{status:n,pendingRemoveItem:i,error:s,ipWhitelist:r},l]=Object(a.useReducer)((e,t)=>{switch(t.type){case"fetch_request":return{...e,status:"fetching"};case"fetch_success":return{...e,status:"idle",ipWhitelist:t.payload.ipWhitelist,error:null};case"fetch_fail":return{...e,status:"error",error:t.payload.error};case"add_request":return{...e,status:"adding"};case"add_success":return{...e,status:"idle",ipWhitelist:t.payload.ipWhitelist};case"add_fail":return{...e,status:"idle"};case"remove_request":return{...e,status:"removing",pendingRemoveItem:t.payload.item};case"remove_success":return{...e,status:"idle",ipWhitelist:t.payload.ipWhitelist,pendingRemoveItem:null};case"remove_fail":return{...e,status:"idle",pendingRemoveItem:null};default:return e}},{status:"idle",error:null,pendingRemoveItem:null,ipWhitelist:[]}),c=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id}),d=Object(a.useCallback)(async()=>{if(c){l({type:"fetch_request"});try{const{data:{ip_whitelist_addresses:e}}=await Object(g$.getIPWhitelist)({appId:c});l({type:"fetch_success",payload:{ipWhitelist:e}})}catch(e){l({type:"fetch_fail",payload:{error:Object(mi.b)(e)}})}}},[c]);Object(a.useEffect)(()=>{d()},[d]);return{ipWhitelist:r,error:s,pendingRemoveItem:i,addItem:async(n,a)=>{l({type:"add_request"});try{if(c){const{data:e}=await Object(g$.putIPWhitelist)({appId:c,ip_whitelist_addresses:[n]}),{ip_whitelist_addresses:t}=e;l({type:"add_success",payload:{ipWhitelist:t}}),null==a||a()}}catch(n){l({type:"add_fail"});const a=Object(mi.b)(n);var i;if(/Invalid value:.*ip_whitelist_addresses/i.test(a)&&e.current)return void(null==(i=e.current)||i.setError(t.formatMessage({id:"chat.settings.ipWhitelisting.error.invalid"})));o.toast.error({message:Object(mi.b)(n)})}},removeItem:async(e,t)=>{l({type:"remove_request",payload:{item:e}});try{if(c){const{data:n}=await Object(g$.deleteIPWhitelist)({appId:c,ip_whitelist_addresses:[e]}),{ip_whitelist_addresses:a}=n;l({type:"remove_success",payload:{ipWhitelist:a}}),null==t||t()}}catch(e){l({type:"remove_fail"}),o.toast.error({message:Object(mi.b)(e)})}},status:n,fetchList:d}})(n);return Object(W.jsx)(iy.i,{title:t.formatMessage({id:"chat.settings.ipWhitelisting.title"}),titleColumns:6,gap:["0","32px"],description:t.formatMessage({id:"chat.settings.ipWhitelisting.description"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(P9,{ref:n,items:i,pendingRemoveItems:r?[r]:void 0,error:null!=s?s:void 0,isLoading:"fetching"===d,inputPlaceholder:t.formatMessage({id:"chat.settings.ipWhitelisting.placeholder"}),addButtonLabel:t.formatMessage({id:"chat.settings.ipWhitelisting_btn.add"}),addButtonIsLoading:"adding"===d,disabled:!e||"fetching"===d||"adding"===d,onItemAdd:(e,t)=>{l(e,t)},onItemDelete:e=>{c(e)},onReload:u,validate:{isValid:e=>[S9()({exact:!0}),w9()({exact:!0})].some(t=>t.test(e))||t.formatMessage({id:"chat.settings.ipWhitelisting.error.invalid"}),isUnique:e=>!i.includes(e)||t.formatMessage({id:"chat.settings.ipWhitelisting.error.duplicated"})}})})}),F9=r.default.div.withConfig({displayName:"accessTokenPermission__PermissionTable",componentId:"sc-6sen98-0"})(["display:grid;grid-template-columns:32px 1fr 1fr;grid-template-rows:auto 40px 40px 40px;"]),U9=r.default.div.withConfig({displayName:"accessTokenPermission__PermissionRadioWrapper",componentId:"sc-6sen98-1"})(["display:flex;"]),$9=r.default.div.withConfig({displayName:"accessTokenPermission__PermissionHeader",componentId:"sc-6sen98-2"})(["font-size:14px;font-weight:500;line-height:1.43;letter-spacing:-0.13px;color:",";padding-bottom:8px;padding-left:16px;"],Object(o.cssVariables)("neutral-10")),B9=r.default.div.withConfig({displayName:"accessTokenPermission__PermissionColumn",componentId:"sc-6sen98-3"})(["display:flex;font-size:14px;line-height:1.43;color:",";align-items:center;padding-left:16px;border-top-left-radius:4px;border-bottom-left-radius:4px;& + &{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:4px;border-bottom-right-radius:4px;}transition:0.2s ",";transition-property:background;",""],Object(o.cssVariables)("neutral-10"),o.transitionDefault,({isSelected:e})=>e?`background: ${Object(o.cssVariables)("neutral-2")};`:""),V9=Object(r.default)(o.Lozenge).withConfig({displayName:"accessTokenPermission__PermissionRecomended",componentId:"sc-6sen98-4"})(["margin-left:8px;"]);let z9;!function(e){e.READ_WRITE="0",e.READ_ONLY="1",e.BLOCK="2"}(z9||(z9={}));const H9=[{labelIntlKey:"core.settings.application.security.permission.radio.readWrite",callsKey:"core.settings.application.security.permission.radio.calls.callNanswer",value:z9.READ_WRITE},{labelIntlKey:"core.settings.application.security.permission.radio.readOnly",callsKey:"core.settings.application.security.permission.radio.calls.callNanswer",value:z9.READ_ONLY},{labelIntlKey:"core.settings.application.security.permission.radio.block",callsKey:"core.settings.application.security.permission.radio.calls.block",value:z9.BLOCK}],q9=i.a.memo(({application:e,setUnsaved:t,isFetchingAccessTokenUserPolicy:n,isEditable:i,updateAccessTokenUserPolicyRequest:s})=>{const{guest_user_policy:r}=e,l=Object(P.F)(),c=Object(E.a)(),d=Object(o.useForm)({onSubmit:({permission:e})=>{s({guest_user_policy:e,onSuccess:d.onSuccess})}}),u=Object(o.useField)("permission",d,{defaultValue:r.toString(),isControlled:!0});Object(a.useEffect)(()=>{t(u.updatable)},[u.updatable,t]);const p=Object(a.useCallback)(e=>d.onSubmit(e),[d]);return l?Object(W.jsx)(iy.i,{title:c.formatMessage({id:"core.settings.application.security.permission.title"}),description:c.formatMessage({id:"core.settings.application.security.permission.desc"}),titleColumns:6,gridItemConfig:{subject:{alignSelf:"start"}},showActions:u.updatable,actions:[{key:`${u.name}-cancel`,label:c.formatMessage({id:"label.cancel"}),buttonType:"tertiary",onClick:d.reset},{key:`${u.name}-save`,label:c.formatMessage({id:"label.save"}),buttonType:"primary",onClick:p,isLoading:n,disabled:n||!i}],children:Object(W.jsx)("form",{onSubmit:d.onSubmit,children:Object(W.jsxs)(F9,{children:[Object(W.jsx)(U9,{}),Object(W.jsx)($9,{children:hb()(f.Jb.chat)}),Object(W.jsx)($9,{children:hb()(f.Jb.calls)}),[...H9].reverse().map(({labelIntlKey:e,callsKey:t,value:a})=>{const s=u.value===a;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(U9,{children:Object(W.jsx)(o.Radio,{name:u.name,checked:s,disabled:n&&!s||!i,onChange:(r=a,()=>{u.updateValue(r)})},c.formatMessage({id:e}))}),Object(W.jsx)(B9,{isSelected:s,children:c.formatMessage({id:e})}),Object(W.jsxs)(B9,{isSelected:s,children:[c.formatMessage({id:t}),a===z9.BLOCK?Object(W.jsx)(V9,{color:"neutral",variant:o.LozengeVariant.Dark,children:c.formatMessage({id:"core.settings.application.security.permission.radio.calls.recommended"})}):""]})]});var r})]})})}):Object(W.jsx)(kD.a,{title:c.formatMessage({id:"core.settings.application.security.permission.title"}),description:c.formatMessage({id:"core.settings.application.security.permission.desc"}),radioItems:H9.map(({labelIntlKey:e,value:t})=>({label:c.formatMessage({id:e}),value:t})),form:d,field:u,gridItemConfig:{subject:{alignSelf:"start"}},isFetching:n,isEditable:i})}),G9=i.a.memo(({application:e,isAddingCredentialsFilter:t,isEditable:n,addCredentialsFilterRequest:a,removeCredentialsFilterRequest:i})=>{const s=Object(E.a)(),{credentials_list:r=[]}=e;return Object(W.jsx)(iy.i,{title:s.formatMessage({id:"core.settings.application.security.allowDomains.label"}),titleColumns:6,gap:["0","32px"],description:s.formatMessage({id:"core.settings.application.security.allowDomains.desc"}),gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(P9,{items:r.map(e=>e.url),inputPlaceholder:s.formatMessage({id:"core.settings.application.security.allowDomains.placeholder"}),addButtonLabel:s.formatMessage({id:"core.settings.application.security.allowDomains_btn.add"}),addButtonIsLoading:t,disabled:!n,onItemAdd:(e,t)=>{a({allowedDomain:e,onSuccess:t})},onItemDelete:e=>{const t=r.find(t=>t.url===e);t&&i(t.id)},validate:{isUrlValid:e=>(e=>null!=e.match(/((http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))|((http(s)?:\/\/)?(localhost([-a-zA-Z0-9@:%_\+.~#?&//=]*)|127(?:\.[0-9]+){0,2}\.[0-9]+|^(?:0*\:)*?:?0*1))/g))(e)||s.formatMessage({id:"core.settings.application.security.allowDomains.error.invalid"})}})})}),W9={updateAccessTokenUserPolicyRequest:j.c.updateAccessTokenUserPolicyRequest,addCredentialsFilterRequest:j.c.addCredentialsFilterRequest,removeCredentialsFilterRequest:j.c.removeCredentialsFilterRequest},K9=Object(b.d)(e=>({application:Object(Ua.i)(e),settings:e.settings}),W9)(({application:e,settings:t,setUnsaved:n,updateAccessTokenUserPolicyRequest:a,addCredentialsFilterRequest:i,removeCredentialsFilterRequest:s})=>{const{isFetchingAccessTokenUserPolicy:r,isAddingCredentialsFilter:o}=t,l=Object(E.a)(),{isPermitted:c}=Object(P.h)(),d=c(["application.settings.all"]);return Object(W.jsxs)(KE.b,{children:[Object(W.jsx)(KE.a,{children:Object(W.jsx)(KE.a.Title,{children:l.formatMessage({id:"core.settings.application.tab.security"})})}),Object(W.jsxs)(Dy.d,{children:[Object(W.jsx)(q9,{application:e,setUnsaved:n,isEditable:d,isFetchingAccessTokenUserPolicy:r,updateAccessTokenUserPolicyRequest:a}),Object(W.jsx)(G9,{application:e,isAddingCredentialsFilter:o,isEditable:d,addCredentialsFilterRequest:i,removeCredentialsFilterRequest:s}),Object(W.jsx)(L9,{isEditable:d})]})]})});var Y9=Object(r.default)(iy.c).withConfig({displayName:"settings___StyledAppSettingsLayout",componentId:"sc-1tumy7w-0"})(["height:100%;"]);const Q9=()=>{const e=Object(s.n)(),{isAccessiblePage:t,isPermitted:n,preparingFeatures:i}=Object(x.a)(),{fallbackMenuPath:r}=Object(P.d)(),o=Object(P.I)(),{reloadSettingsGlobal:l}=v$();if(Object(a.useEffect)(()=>{n(["application.settings.view","application.settings.all"])&&l()},[n,l]),null==e)throw new Error("ApplicationSettings must be rendered within a router.");return i?null:t(f.Gb.settings)?Object(W.jsx)(Y9,{children:({setUnsaved:t})=>Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/general`,render:e=>Object(W.jsx)(C9,{setUnsaved:t,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/notifications`,component:B8}),Object(W.jsx)(s.d,{path:`${e.url}/features`,render:e=>Object(W.jsx)(j6,{setUnsaved:t,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/message`,render:e=>Object(W.jsx)(Z5,{setUnsaved:t,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/channels`,component:M4}),o&&Object(W.jsx)(s.d,{path:`${e.url}/profanity-filter`,component:w5}),Object(W.jsx)(s.d,{path:`${e.url}/security`,render:e=>Object(W.jsx)(K9,{setUnsaved:t,...e})}),Object(W.jsx)(s.d,{path:`${e.url}/webhooks`,render:e=>Object(W.jsx)(d9,{setUnsaved:t,...e})}),Object(W.jsx)(s.c,{to:`${e.url}/general`})]})}):Object(W.jsx)(s.c,{to:r||"/"})},J9=Object(r.default)(pe.Link).withConfig({displayName:"users__UserIdColumnItem",componentId:"sc-14hjogj-0"})(["flex:1;align-self:stretch;margin:-12px 0;padding:12px 0;font-size:14px;font-weight:500;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),X9=Object(r.default)(e=>Object(W.jsx)(o.Dropdown,{...e})).withConfig({displayName:"users__UserStatusFilter",componentId:"sc-14hjogj-1"})(["height:32px;"]),Z9=Object(r.default)(V.Zb).withConfig({displayName:"users__NicknameAvatar",componentId:"sc-14hjogj-2"})(["margin-right:10px;"]),e7=r.default.div.withConfig({displayName:"users__Filters",componentId:"sc-14hjogj-3"})(["display:grid;grid-auto-flow:column;justify-content:start;grid-gap:4px;"]),t7={label:"id",suffix:" (equal)",key:f.Lb,description:"User ID"},n7=[t7,{label:"nickname",suffix:" (equal)",key:f.Mb,description:"User Nickname"},{label:"nickname",suffix:" (startswith)",key:f.Nb,description:"User Nickname"}],a7={value:"all",label:"All users"},i7=({isSearched:e,query:t})=>{const n=Object(E.a)();return e?Object(W.jsx)(z.a,{icon:"no-search",title:n.formatMessage({id:"core.users.table_body.noMatch.title"}),description:n.formatMessage({id:"core.users.table_body.noMatch.desc"},{query:t})}):Object(W.jsx)(z.a,{icon:"users",title:n.formatMessage({id:"core.users.table_body.noResult.title"}),description:n.formatMessage({id:"core.users.table_body.noResult.desc"})})};var s7=Object(r.default)(V.hc).withConfig({displayName:"users___StyledTablePageContainer",componentId:"sc-14hjogj-4"})([""," + *{margin-top:24px;}"],V.Sb);const r7=({userId:e})=>{const t=Object(E.a)(),n=Object(Y1.a)(),{isFetching:i,groupChannelCount:s}=((e,t)=>{var n;const[{status:i,data:s},r]=Object(sy.a)(g$.fetchUserGroupChannelCount,[]);return Object(a.useEffect)(()=>{r({appId:t,userId:e})},[t,r,e]),{isFetching:"init"===i||"loading"===i,groupChannelCount:null!=(n=null==s?void 0:s.data.group_channel_count)?n:0}})(e,n);return Object(W.jsx)(Dy.c,{title:t.formatMessage({id:"core.user_detail.groupChannelCount.title"}),titleColumns:4,description:t.formatMessage({id:"core.user_detail.groupChannelCount.description"}),isFetchingBody:i,gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsx)(o.Link,{href:`/${n}/group_channels?userId=${e}`,iconProps:{icon:"chevron-right",size:16},useReactRouter:!0,"aria-label":t.formatMessage({id:"core.user_detail.groupChannelCount.channels"},{channelCount:s}),children:s})})};var o7=n("22QX");const l7=r.default.div.withConfig({displayName:"UserDetailOperator__RegisteredOperatorWrapper",componentId:"sc-1k3xic3-0"})(["display:flex;flex-direction:row;align-items:center;"]),c7=r.default.p.withConfig({displayName:"UserDetailOperator__RegisteredOperatorEmail",componentId:"sc-1k3xic3-1"})(["font-size:14px;font-weight:500;line-height:1.43;color:",";"],Object(o.cssVariables)("neutral-10")),d7=r.default.p.withConfig({displayName:"UserDetailOperator__RegisteredOperatorRole",componentId:"sc-1k3xic3-2"})(["font-size:12px;line-height:1.33;color:",";"],Object(o.cssVariables)("neutral-7")),u7=r.default.div.withConfig({displayName:"UserDetailOperator__RegisteredOperatorProfileImage",componentId:"sc-1k3xic3-3"})(["position:relative;width:40px;height:40px;margin-right:8px;"]),p7=r.default.div.withConfig({displayName:"UserDetailOperator__RegisteredOperatorInfo",componentId:"sc-1k3xic3-4"})(["margin-right:24px;"]),g7=r.default.div.withConfig({displayName:"UserDetailOperator__AllowedChannelCustomTypesWrapper",componentId:"sc-1k3xic3-5"})(["margin-top:24px;border-top:1px solid ",";padding-top:24px;"],Object(o.cssVariables)("neutral-3")),h7=r.default.h3.withConfig({displayName:"UserDetailOperator__AllowedChannelCustomTypesTitle",componentId:"sc-1k3xic3-6"})(["display:flex;align-items:center;",";margin-bottom:4px;"],o.Subtitles["subtitle-01"]),m7=r.default.p.withConfig({displayName:"UserDetailOperator__AllowedChannelCustomTypesNoAccessible",componentId:"sc-1k3xic3-7"})(["",";color:",";margin-top:22px;"],o.Body["body-short-01"],Object(o.cssVariables)("neutral-7")),f7=r.default.ul.withConfig({displayName:"UserDetailOperator__AllowedChannelCustomTypes",componentId:"sc-1k3xic3-8"})(["list-style:none;li + li{margin-top:8px;}"]),b7=Object(a.memo)(({appId:e,organizationUid:t,userId:n})=>{const i=Object(E.a)(),s=Object(b.f)(),r=(()=>{const e=Object(D4.b)(e=>e.auth.user.email),t=Object(b.f)();return n=>{n===e&&t(j.c.fetchSDKUserRequest())}})(),l=Object(qW.a)(),{loading:c,userDetail:d}=Object(o7.a)(n,l),[u,p]=Object(a.useState)(null),[g,h]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{h(!0),Object(g$.fetchRegisteredOperator)({appId:e,organizationUid:t,userId:n}).then(({data:e})=>{h(!1),p(0===Object.keys(e).length?null:Object(H.camelCaseKeys)(e))}).catch(e=>{h(!1),p(null),o.toast.error({message:Object(mi.b)(e)})})},[e,t,n]),Object(W.jsxs)(Dy.c,{title:i.formatMessage({id:"core.user_detail.messagingActivity_field.registerUserAsOperator"}),titleColumns:4,description:i.formatMessage({id:"core.user_detail.messagingActivity_field.registerUserAsOperator.desc"}),isFetchingBody:g,gridItemConfig:{body:{alignSelf:"start"}},children:[Object(W.jsx)(l7,{children:u?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(u7,{children:Object(W.jsx)(o.Avatar,{size:"xmedium",type:o.AvatarType.Member,profileID:u.email,imageUrl:u.profileUrl})}),Object(W.jsxs)(p7,{children:[Object(W.jsx)(c7,{"data-test-id":"OperatorEmail",children:u.email}),Object(W.jsx)(d7,{"data-test-id":"OperatorRole",children:u.role})]}),Object(W.jsx)(o.Button,{icon:"unlink",buttonType:"tertiary",onClick:()=>{u&&(h(!0),Object(g$.unregisterUserAsOperator)({appId:e,organizationUid:t,userId:n,email:u.email}).then(()=>{h(!1),p(null),r(u.email)}).catch(e=>{h(!1),o.toast.error({message:Object(mi.b)(e)})}))},"data-test-id":"UnlinkOperatorButton",children:i.formatMessage({id:"core.user_detail.messagingActivity_field.registerUserAsOperator_unregister.button"})})]}):Object(W.jsx)(o.Button,{buttonType:"tertiary",onClick:()=>{s(j.b.showDialogsRequest({dialogTypes:A.a.RegisterUserAsOperator,dialogProps:{userId:n,onSuccess:e=>{p(e),r(e.email)}}}))},"data-test-id":"LinkOperatorButton",children:i.formatMessage({id:"core.user_detail.messagingActivity_field.registerUserAsOperator_register.button"})})}),u&&l&&!c&&Object(W.jsxs)(g7,{children:[Object(W.jsxs)(h7,{children:[i.formatMessage({id:"core.user_detail.messagingActivity_field.allowedChannelCustomTypes"}),Object(W.jsx)(V.qb,{content:i.formatMessage({id:"core.user_detail.messagingActivity_field.allowedChannelCustomTypes.tooltip"}),placement:"top"})]}),0===(null==d?void 0:d.allowed_channel_custom_types.length)?Object(W.jsx)(m7,{children:i.formatMessage({id:"core.user_detail.messagingActivity_field.allowedChannelCustomTypes.noAccessible"})}):Object(W.jsx)(f7,{children:null==d?void 0:d.allowed_channel_custom_types.map(e=>Object(W.jsx)("li",{children:Object(W.jsx)(o.Tag,{children:e})},e))})]})]})}),j7=r.default.ul.withConfig({displayName:"userDetail__PushTokensContainer",componentId:"jdzdsq-0"})(["position:relative;> *:not(:last-child){margin-bottom:18px;}"]),y7=r.default.div.withConfig({displayName:"userDetail__PlatformLabel",componentId:"jdzdsq-1"})(["font-size:12px;font-weight:500;color:",";margin-bottom:6px;"],Object(o.cssVariables)("neutral-10")),O7=Object(r.default)(o.InputText).attrs({readOnly:!0}).withConfig({displayName:"userDetail__PushTokenID",componentId:"jdzdsq-2"})([""]),v7=r.default.div.withConfig({displayName:"userDetail__PushTokenListWrapper",componentId:"jdzdsq-3"})(["display:flex;flex-direction:column;& > *:not(",") + *:not(","){margin-top:8px;}"],y7,y7),x7=({token:e,isPendingDeleted:t,onDelete:n})=>Object(W.jsx)(O7,{role:"listitem",value:e,icons:[{icon:"copy",title:"Copy",onClick:()=>{vi()(e),o.toast.success({message:"Copied"})}},{icon:"delete",title:"Delete",isLoading:t,disabled:t,onClick:()=>n(e)}]}),_7=({appId:e,userId:t,product:n})=>{const i=Object(E.a)(),[s,r]=Object(a.useState)({android:[],ios:[],huawei:[]}),[l,c]=Object(a.useState)(!1),{handleDeleteButtonClick:d,pendingPushTokens:u}=(({appId:e,userId:t,onTokenDeleted:n})=>{const[i,s]=Object(a.useState)([]),r=Object(E.a)(),l=Object(P.W)();return{handleDeleteButtonClick:a=>{l({dialogTypes:A.a.Delete,dialogProps:{title:r.formatMessage({id:"core.user_detail.deleteUserDeviceTokenDialog_title"}),description:r.formatMessage({id:"core.user_detail.deleteUserDeviceTokenDialog_lbl.description"},{fcmOrApns:a.tokenType.includes("apns")?"APNs":"FCM"}),onDelete:async()=>{try{s(e=>[...e,a]),await Object(g$.deleteUserPushToken)({appId:e,userId:t,...a}),n(a)}catch(e){o.toast.error({message:Object(mi.b)(e)})}finally{s(e=>e.filter(e=>!xs()(e,a)))}}}})},pendingPushTokens:i}})({appId:e,userId:t,onTokenDeleted:({token:e,tokenType:t})=>{t.includes("apns")?r(t=>({...t,ios:t.ios.filter(t=>t!==e)})):r(t=>({...t,android:t.android.filter(t=>t!==e)}))}});return Object(a.useEffect)(()=>{c(!0),Promise.all("messaging"===n?[Object(g$.fetchUserPushTokens)({appId:e,userId:t,tokenType:"gcm"}),Object(g$.fetchUserPushTokens)({appId:e,userId:t,tokenType:"apns"}),Object(g$.fetchUserPushTokens)({appId:e,userId:t,tokenType:"huawei"})]:[Object(g$.fetchUserPushTokens)({appId:e,userId:t,tokenType:"fcm_voip"}),Object(g$.fetchUserPushTokens)({appId:e,userId:t,tokenType:"apns_voip"})]).then(([e,t,n])=>{var a,i;c(!1),r({android:e.data.tokens,ios:t.data.tokens,huawei:null!=(a=null==n||null==(i=n.data)?void 0:i.tokens)?a:[]})}).catch(e=>{c(!1),o.toast.error({message:Object(mi.b)(e)})})},[e,t,n]),Object(W.jsx)(iy.i,{title:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken"}),titleColumns:4,isFetchingBody:l,gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsxs)(j7,{children:[Object(W.jsxs)(v7,{children:[Object(W.jsx)(y7,{children:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_android"})}),s.android.length>0?s.android.map(e=>Object(W.jsx)(x7,{token:e,onDelete:e=>d({tokenType:"messaging"===n?"gcm":"fcm_voip",token:e}),isPendingDeleted:u.some(t=>t.tokenType.match(/fcm|gcm/)&&t.token===e)},e)):Object(W.jsx)(O7,{value:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_android.empty"})})]}),Object(W.jsxs)(v7,{children:[Object(W.jsx)(y7,{children:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_ios"})}),s.ios.length>0?s.ios.map(e=>Object(W.jsx)(x7,{token:e,onDelete:e=>d({tokenType:"messaging"===n?"apns":"apns_voip",token:e}),isPendingDeleted:u.some(t=>t.tokenType.includes("apns")&&t.token===e)},e)):Object(W.jsx)(O7,{value:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_ios.empty"})})]}),"messaging"===n&&Object(W.jsxs)(v7,{children:[Object(W.jsx)(y7,{children:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_huawei"})}),s.huawei.length>0?s.huawei.map(e=>Object(W.jsx)(x7,{token:e,onDelete:e=>d({tokenType:"huawei",token:e}),isPendingDeleted:u.some(t=>"huawei"===t.tokenType&&t.token===e)},e)):Object(W.jsx)(O7,{value:i.formatMessage({id:"core.user_detail.basicInfo_field.pushToken_huawei.empty"})})]})]})})},C7=r.default.div.withConfig({displayName:"userDetail__TotalCallsWrapper",componentId:"jdzdsq-4"})(["p{margin-top:12px;font-size:14px;line-height:1.43;letter-spacing:-0.1px;color:",";}.separator{display:inline-block;width:1px;height:16px;margin:0 12px;background:",";}"],Object(o.cssVariables)("neutral-10"),Object(o.cssVariables)("neutral-6")),k7=Object(r.default)(o.Lozenge).withConfig({displayName:"userDetail__UserActiveStatusLozenge",componentId:"jdzdsq-5"})(["margin-left:8px;"]),w7=r.default.div.withConfig({displayName:"userDetail__ActionButtonsContainer",componentId:"jdzdsq-6"})(["> button:first-child{margin-right:8px;}"]),T7=r.default.div.withConfig({displayName:"userDetail__UserInfoCategory",componentId:"jdzdsq-7"})(["margin-top:32px;margin-bottom:12px;font-size:18px;font-weight:500;line-height:1.33;letter-spacing:-0.25px;color:",";"],Object(o.cssVariables)("neutral-7")),S7=Object(r.default)(V.Rb).withConfig({displayName:"userDetail__UserDetailContentContainer",componentId:"jdzdsq-8"})(["max-width:1024px;margin-bottom:56px;font-size:14px;color:",";line-height:1.43;"],Object(o.cssVariables)("neutral-10")),E7=r.default.div.withConfig({displayName:"userDetail__ProfileImage",componentId:"jdzdsq-9"})(["position:relative;display:flex;justify-content:center;align-items:center;width:40px;height:40px;margin-right:8px;"]),I7=r.default.div.withConfig({displayName:"userDetail__ProfileFieldWrapper",componentId:"jdzdsq-10"})(["display:flex;flex-direction:row;& > div:last-child{flex:1;}"]),M7=r.default.div.withConfig({displayName:"userDetail__AccessTokenFieldWrapper",componentId:"jdzdsq-11"})(["display:flex;flex-direction:row;& > div:first-child{flex:1;}"]),D7=Object(r.default)(V.y).withConfig({displayName:"userDetail__UserStatusConnectionLabel",componentId:"jdzdsq-12"})(["width:8px;height:8px;margin-right:8px;vertical-align:baseline;"]),A7=r.default.ul.withConfig({displayName:"userDetail__CallsSummaryFields",componentId:"jdzdsq-13"})(["display:grid;> dt{display:flex;align-items:center;"," > a{margin-left:8px;}}> hr{border:none;height:1px;margin:24px 0;background:",";}> dd{"," margin-top:16px;}"],o.Subtitles["subtitle-01"],Object(o.cssVariables)("neutral-3"),o.Body["body-short-01"]),N7=i.a.memo(({appId:e,userId:t,userIsActive:n,pushEnabled:i})=>{const s=Object(E.a)(),[{data:r,status:o,error:l},d]=Object(P.g)(async()=>{const{data:n}=await Object(D2.k)(e,t);return Object(H.camelCaseKeys)(n)},[e,t]),u="loading"===o;return Object(a.useEffect)(()=>{d()},[d]),Object(P.s)(l),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(T7,{children:s.formatMessage({id:"core.user_detail.callsActivity.title"})}),Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(iy.i,{title:s.formatMessage({id:"core.user_detail.callsActivity.directCalls.title"}),titleColumns:4,isFetchingBody:u,gridItemConfig:{subject:{alignSelf:"start"}},children:Object(W.jsxs)(A7,{children:[Object(W.jsx)("dt",{children:s.formatMessage({id:"core.user_detail.callsActivity_field.lastCalledAt"})}),Object(W.jsx)("dd",{children:null!=r&&r.lastCall?c()(r.lastCall.startedAt).format(f.ec):f.Z}),Object(W.jsx)("hr",{}),Object(W.jsxs)("dt",{children:[s.formatMessage({id:"core.user_detail.callsActivity_field.numberOfCalls"}),r&&Object(W.jsx)(V.s,{href:`/${e}/calls/direct-calls?user_id=${t}&status=ended`,children:s.formatMessage({id:"core.user_detail.callsActivity_field.numberOfCalls.number"},{number:r.callCount.total})})]}),Object(W.jsx)("dd",{children:(null==r?void 0:r.callCount.total)>0?Object(W.jsxs)(C7,{children:[s.formatMessage({id:"core.user_detail.callsActivity_field.numberOfCalls.number.outgoing"},{number:r.callCount.directCall.caller}),Object(W.jsx)("span",{className:"separator"}),s.formatMessage({id:"core.user_detail.callsActivity_field.numberOfCalls.number.incoming"},{number:r.callCount.directCall.callee})]}):f.Z})]})}),i&&n&&Object(W.jsx)(_7,{appId:e,userId:t,product:"calls"})]})]})}),R7=[{path:"overview",component:()=>{const e=Object(E.a)(),{application:t,user:n,dialogs:i}=Object(b.g)(e=>({application:e.applicationState.data,user:e.auth.user,dialogs:e.dialogs})),s=Object(b.f)(),r=Object(L1.a)(),l=Object(a.useRef)(),[d,u]=Object(a.useState)(!1);Object(a.useEffect)(()=>()=>{l.current&&(l.current.unsubscribe(),l.current=void 0)},[s]);const p=Object(a.useCallback)(async()=>{if(t)try{return await Object(g$.checkDNSResolveStatus)({appId:t.app_id}),!0}catch(e){return!1}},[t]),g=Object(Mh.a)(6e4).pipe(Object(Dh.a)(async()=>{await p()&&c()(null==t?void 0:t.created_at).add(5,"minute").isBefore(c()())&&(u(!1),l.current&&(l.current.unsubscribe(),l.current=void 0))}));Object(a.useEffect)(()=>{c()(null==t?void 0:t.created_at).add(5,"minute").isAfter(c()())&&p().then(e=>{e||(u(!0),l.current||(l.current=g.subscribe()))})},[t,p,g]),(()=>{const e=Object(b.g)(e=>e.organizations.current.uid),{applicationSummary:t,data:n}=Object(b.g)(e=>e.applicationState),{role:i}=Object(x.a)(),s=Object(b.f)(),r=Object(a.useCallback)(async()=>{if(!n)return!1;if(t)return t.is_calls_enabled;const{data:e}=await Object(g$.getApplicationSummary)({app_id:n.app_id}),{is_calls_enabled:a}=e;return a},[n,t]);Object(a.useEffect)(()=>{(async()=>{if(n)try{const e=await r(),t=n.attrs.sendbird_calls.enabled;e&&!t&&(await Object(g$.registerCallsApplication)({app_id:n.app_id}),Object(P1.fetchMemberRoleByName)(i.name).then(e=>{const t=e.data;s(j.c.registerCallsApplication({role:t}))}).catch(()=>{s(j.b.verifyAuthenticationRequest())}))}catch(e){Object(q.a)({error:Object(mi.b)(e),context:{error:e}})}})()},[n,s,r,e,i.name])})();const h=[...r?[Object(W.jsx)(F1.a,{},"inlineNotiConvertFree")]:[],...d?[Object(W.jsx)(o.InlineNotification,{type:"warning",message:e.formatMessage({id:"core.overview.alerts_overviewPropagated"})},"inlineNotiPropagate")]:[]],m=Object(a.useCallback)(()=>{D.f.setCoachmarkComplete().then(e=>{s(j.b.updateUser(e.data))}).catch(e=>{Object(q.a)({error:Object(mi.b)(e)})})},[s]);return Object(W.jsx)(u4,{children:Object(W.jsxs)(p4,{children:[Object(W.jsx)(r4,{notifications:h}),Object(W.jsx)(K1,{}),Object(W.jsx)(H3,{}),Object(W.jsx)(d4,{}),""===i.dialogTypes&&!n.coachmark_completed&&Object(W.jsx)($g,{steps:[{isDialog:!0,title:e.formatMessage({id:"common.onboarding.tour.step0.title"}),content:e.formatMessage({id:"common.onboarding.tour.step0.content"}),placement:"center",target:"body",disableOverlayClose:!0,beaconComponent:()=>Object(W.jsx)("div",{style:{position:"fixed"}}),spotlight:{isHidden:!0}},{title:e.formatMessage({id:"common.onboarding.tour.step1.title"}),content:e.formatMessage({id:"common.onboarding.tour.step1.content"}),cover:{src:`${f.n}/dashboard/img-tutorial-01.png`,srcSet:`${f.n}/dashboard/img-tutorial-01.png,\n                  ${f.n}/dashboard/img-tutorial-01%402x.png 2x,\n                  ${f.n}/dashboard/img-tutorial-01%403x.png 3x\n                  `},target:"#tourTargetAppId",disableBeacon:!0,placement:"bottom",offset:4,disableOverlayClose:!0,styles:{options:{arrowColor:Object(o.cssVariables)("neutral-3")}}},{title:e.formatMessage({id:"common.onboarding.tour.step2.title"}),content:e.formatMessage({id:"common.onboarding.tour.step2.content"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,target:"_blank",href:"https://sendbird.com/docs",children:e})}),cover:{src:`${f.n}/dashboard/img-tutorial-02.png`,srcSet:`${f.n}/dashboard/img-tutorial-02.png,\n                  ${f.n}/dashboard/img-tutorial-02%402x.png 2x,\n                  ${f.n}/dashboard/img-tutorial-02%403x.png 3x\n                  `},target:"#tourTargetDocs",disableBeacon:!0,placement:"right-start",offset:0,disableOverlayClose:!0,styles:{options:{arrowColor:Object(o.cssVariables)("neutral-3")}}},{title:e.formatMessage({id:"common.onboarding.tour.step3.title"}),content:e.formatMessage({id:"common.onboarding.tour.step3.content"},{a:e=>Object(W.jsx)(o.Link,{variant:o.LinkVariant.Inline,href:"/settings/members",useReactRouter:!0,children:e}),strong:e=>Object(W.jsx)("strong",{children:e})}),cover:{src:`${f.n}/dashboard/img-tutorial-03.png`,srcSet:`${f.n}/dashboard/img-tutorial-03.png,\n                  ${f.n}/dashboard/img-tutorial-03%402x.png 2x,\n                  ${f.n}/dashboard/img-tutorial-03%403x.png 3x\n                  `},target:'.tourTargetGNB > div[role="combobox"]:last-child',disableBeacon:!0,placement:"bottom-end",floaterProps:{options:{offset:{offset:"-36, 10"}}},disableOverlayClose:!0,styles:{options:{arrowColor:Object(o.cssVariables)("neutral-3")}}},{title:e.formatMessage({id:"common.onboarding.tour.step4.title"}),content:e.formatMessage({id:"common.onboarding.tour.step4.content"},{strong:e=>Object(W.jsx)("strong",{children:e})}),cover:{src:`${f.n}/dashboard/img-tutorial-04.png`,srcSet:`${f.n}/dashboard/img-tutorial-04.png,\n                  ${f.n}/dashboard/img-tutorial-04%402x.png 2x,\n                  ${f.n}/dashboard/img-tutorial-04%403x.png 3x\n                  `},target:"#tourTargetUsers",offset:0,disableBeacon:!0,placement:"right-start",isFixed:!0,disableOverlayClose:!0,styles:{options:{arrowColor:Object(o.cssVariables)("neutral-3")}},spotlight:{offset:{x:-80}}}],onStepEnd:m})]})})},allowedPermissions:["application.overview.view"]},{path:"open_channels",component:()=>{const e=Object(s.n)();return null==e?null:Object(W.jsx)(HJ,{channelType:"open_channels",children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/:channelUrl`,render:({match:e})=>{const{channelUrl:t}=e.params;return Object(W.jsxs)(WZ,{children:[Object(W.jsx)(xX,{}),Object(W.jsx)(kZ,{channelUrl:t},t)]})}}),Object(W.jsx)(s.d,{path:`${e.url}`,component:GZ})]})})},allowedPermissions:["application.channels.openChannel.all","application.channels.openChannel.chat","application.channels.openChannel.view"]},{path:"group_channels",component:()=>{const e=Object(s.n)(),t=({match:e})=>{const{channelUrl:t}=e.params;return Object(W.jsxs)(JX,{children:[Object(W.jsx)(xX,{}),Object(W.jsx)(ks,{channelType:"group_channels",channelUrl:t,children:Object(W.jsx)(RJ,{channelUrl:t},t)})]})};return null==e?null:Object(W.jsx)(HJ,{channelType:"group_channels",children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{path:`${e.url}/:channelUrl/:messageId`,render:t}),Object(W.jsx)(s.d,{path:`${e.url}/:channelUrl`,render:t}),Object(W.jsx)(s.d,{path:`${e.url}`,component:QX})]})})},allowedPermissions:["application.channels.groupChannel.all","application.channels.groupChannel.chat","application.channels.groupChannel.view"]},{path:"messages",component:()=>Object(W.jsxs)(V.Rb,{children:[Object(W.jsx)(V.Sb,{children:Object(W.jsx)(V.Sb.Title,{children:"Messages"})}),Object(W.jsx)(R1,{})]}),allowedPermissions:["application.messageSearch.all","application.messageSearch.view"],premiumFeature:"message_search"},{path:"announcements",component:({match:e})=>{const t=Object(P.c)(),[{items:n,nextToken:i,isLoading:r},l]=Object(a.useState)({items:[],nextToken:"",isLoading:!1}),{status:c,updateParams:d}=Object(B.a)(PW,{status:e=>!e||"string"==typeof e&&[VB,...Object.keys(DB)].includes(e)}),u=Object(a.useCallback)(async(e=VB)=>{l(e=>({...e,isLoading:!0}));try{const{data:n}=await Object(js.fetchAnnouncements)({appId:t,limit:20,listToken:"",status:e===VB?"":e});l({items:n.announcements,nextToken:n.next,isLoading:!1})}catch(e){o.toast.error({message:Object(mi.b)(e)}),l(e=>({...e,isLoading:!1}))}},[t]);Object(a.useEffect)(()=>{u(c)},[u,c]);const p=Object(a.useCallback)(e=>{d({status:e})},[d]),g=Object(a.useCallback)(e=>{const t=RW(e);l(n=>({...n,items:n.items.map(n=>RW(n)===t?e:n)}))},[]),h=Object(a.useCallback)(e=>{l(t=>({...t,...e}))},[]);return Object(W.jsx)(PB,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{exact:!0,path:`${e.url}`,render:()=>Object(W.jsx)(kW,{items:n,nextToken:i,isLoading:r,onItemsUpdated:h,handleStatusFilter:p,status:c})}),Object(W.jsx)(s.d,{path:`${e.url}/create`,render:()=>Object(W.jsx)(NW,{reloadList:u})}),Object(W.jsx)(s.d,{path:`${e.url}/:eventId`,render:()=>Object(W.jsx)(dW,{onAnnouncementUpdated:g})})]})})},allowedPermissions:["application.announcements.all","application.announcements.view"],premiumFeature:"announcement"},{path:"users",exact:!0,component:()=>{const e=Object(E.a)(),t=Object(b.g)(e=>{var t,n;return null!=(t=null==(n=e.applicationState.data)?void 0:n.app_id)?t:""}),n=Object(b.f)(),{isPermitted:i}=Object(P.h)(),[s,l]=Object(a.useState)(a7),[d,u]=Object(a.useState)(""),[p,g]=Object(a.useState)(t7),[h,m]=Object(a.useState)([]),[y,O]=Object(a.useState)([]),[v,x]=Object(a.useState)(""),[_,C]=Object(a.useState)(!1),[k,w]=Object(a.useState)(!1),[T,S]=Object(a.useState)(!1),I=()=>{m([])},M=()=>{n(j.b.showDialogsRequest({dialogTypes:A.a.DeleteUser,dialogProps:{selectedUsers:h,onSuccess:e=>{m(h.filter(({userId:t})=>!e.includes(t))),O(y.filter(t=>!e.some(e=>e===t.userId)))}}}))},D=()=>{n(j.b.showDialogsRequest({dialogTypes:A.a.DeactivateUser,dialogProps:{selectedUsers:h,onSuccess:e=>{m([]),O(y.map(t=>e.some(e=>e===t.userId)?{...t,isActive:!1}:t))}}}))},N=()=>{n(j.b.showDialogsRequest({dialogTypes:A.a.ReactivateUser,dialogProps:{selectedUsers:h,onSuccess:e=>{m([]),O(y.map(t=>e.some(e=>e===t.userId)?{...t,isActive:!0}:t))}}}))},R=Object(a.useMemo)(()=>"activated"===s.value?y.filter(e=>!0===e.isActive):"deactivated"===s.value?y.filter(e=>!1===e.isActive):y,[s.value,y]);Object(a.useEffect)(()=>{w(!0),Object(g$.fetchUsers)({appId:t,activeMode:"all"}).then(({data:e})=>{w(!1),O(e.users.map(e=>Object(H.camelCaseKeys)(e))),x(e.next)}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})})},[t]);const L=R.every(e=>null!=e.createdAt),F=Object(a.useMemo)(()=>{const n=[{title:e.formatMessage({id:"core.users.table_header.userId"}),dataIndex:"userId",flex:2,render:({userId:e})=>Object(W.jsx)(J9,{to:`/${t}/users/${encodeURIComponent(e)}`,children:e}),onCell:()=>({"data-test-id":"userIdColumn"})},{title:e.formatMessage({id:"core.users.table_header.nickname"}),dataIndex:"nickname",flex:2,render:e=>Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Z9,{size:"small",userID:e.userId,imageUrl:e.profileUrl}),e.nickname||f.Z]}),onCell:()=>({"data-test-id":"nicknameColumn"})},{title:e.formatMessage({id:"core.users.table_header.status"}),dataIndex:"isActive",render:t=>t.isActive?Object(W.jsx)(o.Lozenge,{color:"green",children:e.formatMessage({id:"core.users_status.activated"})}):Object(W.jsx)(o.Lozenge,{color:"neutral",children:e.formatMessage({id:"core.users_status.deactivated"})}),onCell:()=>({"data-test-id":"isActiveColumn"})}];return L?n.concat([{title:e.formatMessage({id:"core.users.table_header.createdAt"}),dataIndex:"createdAt",render:e=>e.createdAt?c()(1e3*e.createdAt).format("lll"):f.Z,onCell:()=>({"data-test-id":"createdAtColumn"})}]):n},[t,e,L]);return Object(W.jsxs)(s7,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.Title,{children:e.formatMessage({id:"core.users.header.title"})}),i(["application.users.all"])&&Object(W.jsx)(V.Sb.Actions,{children:Object(W.jsx)(o.Button,{buttonType:"primary",size:"small",icon:"plus",onClick:()=>{n(j.b.showDialogsRequest({dialogTypes:A.a.CreateUser,dialogProps:{onSuccess:e=>{O([e,...y])}}}))},children:e.formatMessage({id:"core.users.header.createUser.button"})})})]}),Object(W.jsxs)(e7,{children:[Object(W.jsx)(V.ac,{ph:e.formatMessage({id:"core.users.table_menu.search.ph"}),value:d,defaultOption:t7,options:n7,isFetching:k,handleChange:u,handleOptionChange:e=>{g(e)},handleSearchClear:()=>{u(""),l(a7),C(!1),w(!0),Object(g$.fetchUsers)({appId:t,activeMode:"all"}).then(({data:e})=>{w(!1),O(e.users.map(e=>Object(H.camelCaseKeys)(e))),x(e.next)}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})})},handleSubmit:()=>{I(),w(!0),""===d?Object(g$.fetchUsers)({appId:t,activeMode:s.value}).then(({data:e})=>{C(!1),w(!1),O(e.users.map(e=>Object(H.camelCaseKeys)(e))),x(e.next)}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})}):(l(a7),w(!0),Object(g$.searchUsers)({appId:t,query:d,option:p.key}).then(({data:e})=>{C(!0),w(!1),O(e.users.map(e=>Object(H.camelCaseKeys)(e))),x(e.next)}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})}))},styles:{SearchInput:Object(r.css)(["min-width:224px;width:224px;height:32px;"])}}),Object(W.jsx)(X9,{selectedItem:s,items:[{value:"all",label:e.formatMessage({id:"core.users.table_menu.activeStatusFilter.all"})},{value:"activated",label:e.formatMessage({id:"core.users.table_menu.activeStatusFilter.active"})},{value:"deactivated",label:e.formatMessage({id:"core.users.table_menu.activeStatusFilter.deactivate"})}],itemToString:e=>e.label,onItemSelected:e=>{e.value!==s.value&&(l(e),u(""),I(),C(!1),w(!0),Object(g$.fetchUsers)({appId:t,activeMode:e.value}).then(({data:e})=>{w(!1),O(e.users.map(e=>Object(H.camelCaseKeys)(e))),x(e.next)}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})}))}})]}),Object(W.jsx)(V.Jb,{columns:F,dataSource:R,rowKey:"userId",rowSelection:i(["application.users.all"])?{hideDefaultSelections:!0,selectedRowKeys:h.map(e=>e.userId),onChange:(e,t)=>m(t),getCheckboxProps:()=>({onClick:e=>e.stopPropagation()})}:void 0,batchActions:(()=>{const t={label:e.formatMessage({id:"core.users.table_header.batchActions_delete.button"}),icon:"delete",onClick:M,"data-test-id":"DeleteButton"},n={label:e.formatMessage({id:"core.users.table_header.batchActions_deactivate.button"}),icon:"ban",onClick:D},a={label:e.formatMessage({id:"core.users.table_header.batchActions_reactivate.button"}),icon:"invite",onClick:N},i=[t];return h.every(e=>e.isActive)?i.push(n):h.every(e=>!e.isActive)&&i.push(a),i})(),loading:k,emptyView:!k&&Object(W.jsx)(i7,{isSearched:_,query:d}),hasNext:y.length>0&&!k&&!!v,loadMoreButtonProps:{isLoading:T,onClick:()=>{S(!0),_?Object(g$.searchUsers)({appId:t,query:d,option:p.key,next:v}).then(({data:e})=>{C(!0),S(!1),O(y.concat(e.users.map(e=>Object(H.camelCaseKeys)(e)))),x(e.next)}).catch(e=>{S(!1),o.toast.error({message:Object(mi.b)(e)})}):Object(g$.fetchUsers)({appId:t,activeMode:s.value,next:v}).then(({data:e})=>{S(!1),O(y.concat(e.users.map(e=>Object(H.camelCaseKeys)(e)))),x(e.next)}).catch(e=>{S(!1),o.toast.error({message:Object(mi.b)(e)})})}}})]})},allowedPermissions:["application.users.all","application.users.view"]},{path:"users/:userId",exact:!0,component:()=>{const e=Object(E.a)(),{isPermitted:t}=Object(P.h)(),{appId:n,organizationUid:i,pushEnabled:r}=Object(b.g)(e=>{var t,n,a,i;return{appId:null!=(t=null==(n=e.applicationState.data)?void 0:n.app_id)?t:"",organizationUid:e.organizations.current.uid,pushEnabled:null!=(a=null==(i=e.applicationState.data)?void 0:i.push_enabled)&&a}}),l=Object(P.F)(),d=Object(b.f)(),{userId:u}=Object(s.m)(),p=Object(s.k)(),g=decodeURIComponent(u),[h,m]=Object(a.useState)({userId:"",accessToken:"",profileUrl:"",nickname:"",isActive:!1,isOnline:!1,lastSeenAt:0,createdAt:0}),[y,O]=Object(a.useState)(h.nickname),[v,x]=Object(a.useState)(h.profileUrl),[_,C]=Object(a.useState)(!1),[k,w]=Object(a.useState)(!1),[T,S]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{S(!0),Object(g$.fetchUser)({appId:n,userId:g}).then(({data:e})=>{S(!1),m(Object(H.camelCaseKeys)(e)),O(e.nickname),x(e.profile_url)}).catch(e=>{S(!1),o.toast.error({message:Object(mi.b)(e)})})},[n,g]),Object(W.jsxs)(S7,{children:[Object(W.jsxs)(V.Sb,{children:[Object(W.jsx)(V.Sb.BackButton,{href:`/${n}/users`}),Object(W.jsxs)(V.Sb.Title,{children:[g,T?void 0:Object(W.jsx)(k7,{color:h.isActive?"green":"neutral",children:h.isActive?e.formatMessage({id:"core.users_status.activated"}):e.formatMessage({id:"core.users_status.deactivated"})})]}),Object(W.jsx)(V.Sb.Actions,{children:t(["application.users.all"])&&!T&&Object(W.jsxs)(w7,{children:[h.isActive?Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",icon:"ban",onClick:()=>{d(j.b.showDialogsRequest({dialogTypes:A.a.DeactivateUser,dialogProps:{selectedUsers:[{...h,userId:g}],onSuccess:()=>m({...h,isActive:!1})}}))},"data-test-id":"DeactivateButton",children:e.formatMessage({id:"core.users.table_header.batchActions_deactivate.button"})}):Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",icon:"invite",onClick:()=>{d(j.b.showDialogsRequest({dialogTypes:A.a.ReactivateUser,dialogProps:{selectedUsers:[{...h,userId:g}],onSuccess:()=>m({...h,isActive:!0})}}))},"data-test-id":"ReactivateButton",children:e.formatMessage({id:"core.users.table_header.batchActions_reactivate.button"})}),Object(W.jsx)(o.Button,{buttonType:"tertiary",size:"small",icon:"delete",onClick:()=>{d(j.b.showDialogsRequest({dialogTypes:A.a.DeleteUser,dialogProps:{selectedUsers:[{...h,userId:g}],onSuccess:()=>p.push(`/${n}/users`)}}))},"data-test-id":"DeleteButton",children:e.formatMessage({id:"core.users.table_header.batchActions_delete.button"})})]})})]}),Object(W.jsx)(T7,{children:e.formatMessage({id:"core.user_detail.basicInfo.title"})}),Object(W.jsxs)(iy.j,{children:[Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.basicInfo_field.userId"}),titleColumns:4,isFetchingBody:T,children:Object(W.jsx)(o.InputText,{value:h.userId,readOnly:!0,"data-test-id":"UserIdField"})}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.basicInfo_field.createdAt"}),titleColumns:4,isFetchingBody:T,"data-test-id":"CreatedAtRow",children:h.createdAt?c()(1e3*h.createdAt).format(f.ec):f.Z}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.basicInfo_field.nickname"}),titleColumns:4,isFetchingBody:T,showActions:h.nickname!==y,actions:[{key:"user-nickname-field-cancel",buttonType:"tertiary",label:"Cancel",onClick:()=>{O(h.nickname)}},{key:"user-nickname-field-save",buttonType:"primary",label:"Save",isLoading:_,onClick:()=>{C(!0),Object(g$.editUser)({appId:n,userId:h.userId,nickname:y}).then(({data:e})=>{m({...h,nickname:e.nickname}),C(!1),o.toast.success({message:"User nickname has been changed"})}).catch(e=>{C(!1),o.toast.error({message:Object(mi.b)(e)})})}}],children:Object(W.jsx)(o.InputText,{value:y,readOnly:t(["application.users.view"]),onChange:e=>{const{value:t}=e.target;O(t)},"data-test-id":"NicknameField"})}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.basicInfo_field.profileUrl"}),titleColumns:4,isFetchingBody:T,showActions:h.profileUrl!==v,actions:[{key:"user-profile-url-cancel",buttonType:"tertiary",label:"Cancel",onClick:()=>{x(h.profileUrl)}},{key:"user-profile-url-save",buttonType:"primary",label:"Save",isLoading:k,onClick:()=>{w(!0),Object(g$.editUser)({appId:n,userId:h.userId,profileUrl:v}).then(({data:e})=>{m({...h,profileUrl:e.profile_url}),w(!1),o.toast.success({message:"User profile URL has been changed"})}).catch(e=>{w(!1),o.toast.error({message:Object(mi.b)(e)})})}}],children:Object(W.jsxs)(I7,{children:[Object(W.jsx)(E7,{"data-test-id":"ProfileImage",children:(()=>{const e=""===h.userId;return Object(W.jsx)(V.Zb,{size:40,userID:h.userId,imageUrl:h.profileUrl,isLoading:e})})()}),Object(W.jsx)(o.InputText,{value:v,readOnly:t(["application.users.view"]),onChange:e=>{const{value:t}=e.target;x(t)},"data-test-id":"ProfileURLField"})]})}),t(["application.users.all"])&&Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.basicInfo_field.accessToken"}),titleColumns:4,isFetchingBody:T,children:Object(W.jsxs)(M7,{children:[h.accessToken&&Object(W.jsx)(o.InputText,{value:h.accessToken,readOnly:!0,icons:[{icon:"copy",title:"Copy",onClick:()=>{vi()(h.accessToken),o.toast.success({message:"Copied"})}}],styles:"margin-right: 8px;","data-test-id":"AccessTokenField"}),Object(W.jsx)(o.Button,{buttonType:"tertiary",type:"button",onClick:()=>{d(j.b.showDialogsRequest({dialogTypes:A.a.IssueUserAccessToken,dialogProps:{userId:g,hasAccessToken:""!==h.accessToken,onSuccess:({accessToken:e})=>m({...h,accessToken:e})}}))},children:h.accessToken?e.formatMessage({id:"core.user_detail.basicInfo_field.accessToken_reIssue.button"}):e.formatMessage({id:"core.user_detail.basicInfo_field.accessToken_issue.button"})})]})})}),t(["application.users.all","organization.members.all"],{combinedWith:"and"})&&Object(W.jsx)(b7,{appId:n,organizationUid:i,userId:g})]}),Object(W.jsx)(T7,{children:e.formatMessage({id:"core.user_detail.messagingActivity.title"})}),Object(W.jsxs)(iy.j,{children:[Object(W.jsxs)(iy.i,{title:"Status",titleColumns:4,isFetchingBody:T,"data-test-id":"OnlineStatusRow",children:[Object(W.jsx)(D7,{connection:h.isOnline?"online":"offline"}),h.isOnline?"Online":"Offline"]}),Object(W.jsx)(iy.i,{title:e.formatMessage({id:"core.user_detail.messagingActivity_field.lastSeenAt"}),titleColumns:4,isFetchingBody:T,"data-test-id":"LastSeenAtRow",children:0===h.lastSeenAt?f.Z:c()(h.lastSeenAt).format(f.ec)}),Object(W.jsx)(r7,{userId:g}),r&&h.isActive&&Object(W.jsx)(_7,{appId:n,userId:g,product:"messaging"})]}),l&&Object(W.jsx)(N7,{appId:n,userId:g,userIsActive:h.isActive,pushEnabled:r})]})},allowedPermissions:["application.users.all","application.users.view"]},{path:"data_exports",component:()=>{const e=d0(),t=Object(s.n)(),{isPermitted:n}=Object(P.h)();return Object(W.jsx)(u0.Provider,{value:e,children:Object(W.jsxs)(s.g,{children:[n(["application.dataExport.all"])?Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/request`,component:B0}):Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/request`,render:()=>{var e;return Object(W.jsx)(s.c,{to:null!=(e=null==t?void 0:t.url)?e:"/"})}}),Object(W.jsx)(s.d,{path:`${null==t?void 0:t.url}/:requestId`,component:k0}),Object(W.jsx)(s.d,{path:null==t?void 0:t.url,component:Z0})]})})},allowedPermissions:["application.dataExport.all","application.dataExport.view"],premiumFeature:"data_export"},{path:"analytics",component:()=>{const e=Object(s.n)();return Object(W.jsx)(V.Rb,{children:Object(W.jsxs)(s.g,{children:[Object(W.jsx)(s.d,{exact:!0,path:null==e?void 0:e.url,component:pB}),Object(W.jsx)(s.d,{exact:!0,path:`${null==e?void 0:e.url}/:metricType`,component:eB})]})})},allowedPermissions:["application.analytics.view"],premiumFeature:"advanced_analytics"},{path:"settings",component:Q9,allowedPermissions:["application.settings.all","application.settings.view"]},{path:"desk",component:p$,allowedPermissions:["desk.admin","desk.agent"]},{path:"support",component:()=>Object(W.jsx)(s.c,{to:"/settings/contact_us"}),allowedPermissions:["support.technical"]}];var P7=n("hyg5"),L7=n.n(P7);var F7=n("UExX");const U7=r.default.div.withConfig({displayName:"useLNBItems__LabelSuffixContainer",componentId:"svucu-0"})(["display:flex;flex:1;justify-content:flex-start;margin-left:8px;"]),{BUILD_MODE:$7}=Object({NODE_ENV:"production",BUILD_MODE:"production",GATE_URL:"https://gate.sendbird.com"}),B7=[{key:f.Gb.overview,labelIntlKey:"core.overview.title",icon:"overview-filled",href:"/overview",useReactRouterLink:!0},{key:f.Gb.openChannels,label:"Open channels",icon:"open-channels-filled",href:"/open_channels",useReactRouterLink:!0},{key:f.Gb.groupChannels,label:"Group channels",icon:"group-channels-filled",href:"/group_channels",useReactRouterLink:!0},{key:f.Gb.announcements,label:"Announcements",icon:"announcements-filled",href:"/announcements",useReactRouterLink:!0},{key:"messages",label:"Messages",icon:"messages-filled",href:"/messages",useReactRouterLink:!0},{key:f.Gb.users,labelIntlKey:"core.users.header.title",icon:"users-filled",href:"/users",id:"tourTargetUsers",useReactRouterLink:!0},{key:f.Gb.dataExports,label:"Data exports",icon:"data-export-filled",href:"/data_exports",useReactRouterLink:!0},{key:f.Gb.analytics,label:"Advanced analytics",icon:"analytics-filled",href:"/analytics",useReactRouterLink:!0},{key:f.Gb.tickets,labelIntlKey:"desk.tickets.header.title",icon:"tickets-filled",href:"/desk/tickets",useReactRouterLink:!0,subMenus:[{type:o.LeftNavigationBarItemType.SubItem,key:f.Gb.allTickets,labelIntlKey:"desk.tickets.header.title.allTickets",href:"/desk/tickets",useReactRouterLink:!0},{type:o.LeftNavigationBarItemType.SubItem,key:f.Gb.conversation,labelIntlKey:"desk.tickets.header.title.conversation",href:"/desk/conversation",useReactRouterLink:!0}]},{key:f.Gb.views,labelIntlKey:"desk.views.title",labelSuffix:Object(W.jsx)(U7,{children:Object(W.jsx)(o.Lozenge,{color:"purple",variant:o.LozengeVariant.Light,children:"Beta"})}),icon:"ticket-views",href:"/desk/views",useReactRouterLink:!0},{key:f.Gb.agents,labelIntlKey:"desk.agents.list.title",icon:"agents-filled",href:"/desk/agents",useReactRouterLink:!0},{key:f.Gb.assignmentLogs,labelIntlKey:"desk.assignmentLogs.header.lbl",icon:"archive-filled",href:"/desk/assignment_logs",useReactRouterLink:!0},{key:f.Gb.proactiveChat,labelIntlKey:"desk.proactiveChat.title",icon:"proactive-chat-filled",href:"/desk/proactive_chats",useReactRouterLink:!0},{key:f.Gb.customers,labelIntlKey:"desk.customers.title",icon:"customers-filled",href:"/desk/customers",useReactRouterLink:!0},{key:f.Gb.monitor,labelIntlKey:"desk.monitoring.title",icon:"monitor-filled",href:"/desk/monitoring",useReactRouterLink:!0},{key:f.Gb.reports,labelIntlKey:"desk.statistics.title.lnb",icon:"reports-filled",href:"/desk/reports",useReactRouterLink:!0},{key:f.Gb.deskDataExport,labelIntlKey:"desk.dataExport.title",icon:"data-export-filled",href:"/desk/data_exports",useReactRouterLink:!0},{key:f.Gb.settings,labelIntlKey:"core.settings.header.title",icon:"settings-filled",href:"/settings",useReactRouterLink:!0},{key:f.Gb.callsActivation,icon:"call-filled",href:"/calls",useReactRouterLink:!0},{key:f.Gb.callsStudio,labelIntlKey:"calls.lnb.studio",icon:"call-filled",href:"/calls/studio",useReactRouterLink:!0},{key:f.Gb.directCalls,labelIntlKey:"calls.lnb.callLogs",icon:"direct-call-filled",href:"/calls/direct-calls",useReactRouterLink:!0},{key:f.Gb.groupCalls,labelIntlKey:"calls.lnb.groupCalls",icon:"group-call-filled",href:"/calls/group-calls",useReactRouterLink:!0}],V7=(e,t,n,a)=>(La()(t)||(e.push(...t),n<a.length-1&&e.push(o.LeftNavigationBarDivider)),e),z7=(e,t)=>(e[t.key]=t,e),H7=e=>{const{organizationUID:t,appID:n,isCallsEnabled:a,isCallsActivationVisible:i,isCallsActivatedOrganization:s,isCallsStudioVisible:r,isAccessibleToCoreMenus:l,isAnnouncementsVisible:c,isMessagesVisible:d,isDataExportVisible:p,isDeskEnabled:g,isAnalyticsVisible:h,isSettingsVisible:m,isSupportVisible:b,intl:j}=e,y=(e=>B7.map(t=>{var n;const a={...t,subMenus:null==(n=t.subMenus)?void 0:n.map(t=>{var n;return"string"==typeof t.labelIntlKey?{...t,label:e.formatMessage({id:t.labelIntlKey})}:{...t,label:null!=(n=t.label)?n:""}})};if("string"==typeof a.labelIntlKey){const{labelIntlKey:t,...n}=a;return{...n,label:e.formatMessage({id:t})}}const{label:i,...s}=a;return{...s,label:null!=i?i:""}}))(j),O=y.map(e=>e.key).filter(Object(u.g)(t)),v=y.filter(e=>O.includes(e.key)).map(e=>{var t;return{...e,href:e.href&&`/${n}${e.href}`,subMenus:null==(t=e.subMenus)?void 0:t.map(e=>Object(o.createLeftNavigationBarSubItem)({...e,href:`/${n}${e.href}`}))}}).map(e=>Object(o.createLeftNavigationBarItem)(e)).reduce(z7,{}),x=(l?[v.overview,v.users]:[]).concat(m?v.settings:[]),_={name:Object(o.createLeftNavigationBarLabel)({key:f.Jb.chat,label:hb()(f.Jb.chat)}),items:l?[v.open_channels,v.group_channels].concat(c?[v.announcements]:[]).concat(d?[v.messages]:[]).concat(p?[v.data_export]:[]).concat(h?[v.analytics]:[]):[]},C=(a?[r&&v.calls_studio,v.direct_calls,v.group_calls]:[i&&{...v.calls_activation,label:j.formatMessage({id:s?"calls.lnb.activation.activated":"calls.lnb.activation.inactivated"})}]).filter(Boolean),k=C.length>0?{name:Object(o.createLeftNavigationBarLabel)({key:f.Jb.calls,label:hb()(f.Jb.calls)}),items:C}:null,w=g?{name:Object(o.createLeftNavigationBarLabel)({key:f.Jb.desk,label:hb()(f.Jb.desk)}),items:[v.tickets,v.conversation,v.views,v.assignment_logs,v.proactive_chat,v.agents,v.customers,v.monitor,v.reports,v.desk_data_export]}:null,T=b?[v.support]:[],S=[_,k,w].filter(e=>{var t;return(null!=(t=null==e?void 0:e.items.length)?t:0)>0}),E=S.length>1;return[x].concat(S.map(e=>E?[e.name,...e.items]:e.items)).concat([T]).map(e=>e.filter(e=>null!=e)).filter(e=>e.length>0).reduce(V7,[])},q7=Object(a.lazy)(()=>Promise.all([n.e(28),n.e(25)]).then(n.bind(null,"ohU+"))),G7=r.default.div.withConfig({displayName:"app__Container",componentId:"sc-1bx6cmi-0"})(["height:100%;transition:padding-left ","s ",";"],o.LeftNavigationBar.collapseAnimationDurationSecond,o.transitionDefault);var W7=Object(r.default)(G7).withConfig({displayName:"app___StyledContainer",componentId:"sc-1bx6cmi-1"})(["padding-left:","px;"],e=>e._css);const K7=Object(r.default)(o.LeftNavigationBar).withConfig({displayName:"app__LNB",componentId:"sc-1bx6cmi-2"})(["position:absolute;z-index:",";top:","px;bottom:0;left:0;transition:top ","s,width ","s;transition-timing-function:",";"],Ha.b.navigation,e=>e.top,f.Y,o.LeftNavigationBar.collapseAnimationDurationSecond,o.transitionDefault),Y7=Object(r.default)(o.ScrollBar).withConfig({displayName:"app__ContentScrollBar",componentId:"sc-1bx6cmi-3"})(["width:100%;height:100%;background:white;"]);var Q7=Object(r.default)("div").withConfig({displayName:"app___StyledDiv",componentId:"sc-1bx6cmi-4"})(["display:flex;justify-content:center;align-items:center;width:100%;height:100%;min-height:424px;"]),J7=Object(r.default)(h.a).withConfig({displayName:"app___StyledNoPlanError",componentId:"sc-1bx6cmi-5"})(["margin-bottom:96px;"]);const X7=()=>Object(W.jsx)(Q7,{children:Object(W.jsx)(J7,{})});t.default=()=>{var e;const t=Object(s.n)(),n=Object(s.k)(),i=Object(a.useRef)(null),r=Object(a.useRef)(null),{authenticated:l}=Object(d.b)(),{isPermitted:h,isAccessiblePage:y}=Object(P.h)(),{menuItems:O,activeItemKey:v}=Object(P.V)(e=>{const{menuItems:t,activeItemKey:n}=e.lnb;return{menuItems:t,activeItemKey:n}}),x=Object(P.Y)(e=>e.applicationState.data),_=Object(S.b)(),{isCollapsed:C,setIsCollapsed:k,isForceCollapsed:w}=_,T=h(["desk.agent"])&&!h(["desk.admin"]),{routes:I,fallbackRoutePath:M}=(e=>{const{isPermitted:t}=Object(P.h)(),n=Object(P.H)(),i=Object(P.i)(),r=Object(P.F)()||i;return Object(a.useMemo)(()=>{const a=R7.map(t=>({...t,path:`${e}/${t.path}`})),i=a.filter(({allowedPermissions:e})=>t(e||[]))[0],o=i?String(i.path):void 0,l=a.map(e=>e.component===Q9&&n?Object(W.jsx)(s.d,{path:e.path,component:e.component},String(e.path)):Object(W.jsx)(u.d,{...e},String(e.path)));if(r){const t=`${e}/calls`;return{routes:[...l,Object(W.jsx)(s.d,{path:t,component:I$},t)],fallbackRoutePath:o||t}}return{routes:l,fallbackRoutePath:o}},[r,n,t,e])})(null!=(e=null==t?void 0:t.url)?e:""),D=Object(a.useContext)(m.a),A=Object(P.G)(),{isFreeTrialMissing:N}=Object(g.b)(),R=Object(P.j)(),L=T?0:C?o.LeftNavigationBar.collapsedWidth:o.LeftNavigationBar.defaultWidth;(()=>{const e=Object(E.a)(),t=Object(b.g)(e=>e.organizations.current.uid),n=Object(b.g)(e=>{var t;return null==(t=e.applicationState.data)?void 0:t.app_id})||"",i=Object(b.f)(),{isFeatureEnabled:s,isAccessiblePage:r}=Object(P.h)(),o=Object(P.F)(),l=Object(F7.a)(),c=Object(P.i)(),d=Object(P.G)(),u=r(f.Gb.application),p=Object(P.H)(),g=r(f.Gb.settings)||p,h=r(f.Gb.support)||"local"===$7,m=s(f.u.Announcement),y=s(f.u.DataExport),O=s(f.u.AdvancedAnalytics),v=s("message_search")&&r(f.Gb.messageSearch),x=Object(a.useMemo)(()=>H7({organizationUID:t,appID:n,isAccessibleToCoreMenus:u,isAnalyticsVisible:O,isAnnouncementsVisible:m,isMessagesVisible:v,isDataExportVisible:y,isDeskEnabled:p,isSettingsVisible:g,isSupportVisible:h,isCallsEnabled:o,isCallsActivatedOrganization:l,isCallsActivationVisible:c,isCallsStudioVisible:d,intl:e}),[n,e,u,O,m,l,c,o,d,y,p,v,g,h,t]),_=Object.values(x).flatMap(e=>{var t,n;return null!=(t=null==e||null==(n=e.subMenus)?void 0:n.length)&&t?e.subMenus:e}).find(e=>{const{key:t,href:n}=e;return!(t!==f.Gb.settings||!location.pathname.match(/^\/[A-Z\d-]+\/(calls\/|desk\/)?settings/))||!(!n||!location.pathname.startsWith(n.split("?")[0]))});Object(a.useEffect)(()=>{i(j.b.setLNBMenuItems({items:x}))},[i,x]),Object(a.useEffect)(()=>{i(j.b.setActiveLNBMenuItem({activeItemKey:null==_?void 0:_.key}))},[_,i])})(),(()=>{const e=Object(b.f)(),t=Object(E.a)(),n=Object(s.n)(),i=Object(s.k)(),r=Object(a.useRef)(()=>{}),{authenticated:l}=Object(d.b)(),{applicationSummary:c}=i.location.state||{},u=Bh(),{sdkUser:p,isFetched:g}=Object(P.l)(),h=Object(P.Y)(e=>e.desk.connected),m=Object(P.Y)(e=>e.applicationState.data),y=null==n?void 0:n.params.appId,O=Object(a.useCallback)(t=>{if("Notification"in window&&window.Notification){const{sender:n}=t,a=n.nickname,s=n.getOriginalProfileUrl(),r={title:`${a} just mentioned you`,body:t.message||"",icon:s||`${f.n}/favicon/apple-icon-180x180.png`,callback:()=>{try{window.parent.focus(),window.focus(),i.push(`/${y}/open_channels/${t.channelUrl}`)}catch(e){Object(H.logException)({error:e})}}};e(j.b.addDesktopNotificationsRequest(r))}},[e,i,y]);Object(a.useEffect)(()=>{r.current=()=>{if(!window.dashboardSB||window.dashboardSB&&window.dashboardSB.getApplicationId()!==y){window.dashboardSB=new L7.a({appId:y,newInstance:!0});const n=new window.dashboardSB.ChannelHandler,a=new window.dashboardSB.ConnectionHandler;n.onMentionReceived=(e,t)=>{const n=t.mentionedUsers.map(e=>e.userId).includes(window.dashboardSB.getCurrentUserId()),a=e.isOpenChannel();u()&&!a||!n||"user"===t.messageType&&O(t)},a.onReconnectStarted=()=>{e(j.b.sbReconnectRequest()),o.toast.warning({message:t.formatMessage({id:"common.reconnection.try.notification"})})},a.onReconnectSucceeded=()=>{e(j.b.sbReconnectSuccess()),o.toast.success({message:t.formatMessage({id:"common.reconnection.succeeded.notification"})})},a.onReconnectFailed=()=>{e(j.b.sbReconnectFail()),o.toast.error({message:t.formatMessage({id:"common.reconnection.failed.notification"})})},window.dashboardSB.addChannelHandler("initialChannelHandler",n),window.dashboardSB.addConnectionHandler("sbConnectionHandler",a)}}},[y,u,O,t,e]),Object(a.useEffect)(()=>{l&&(e(j.c.fetchApplicationRequest({app_id:null!=y?y:"",applicationSummary:c})),r.current())},[y,c,l,e]),Object(a.useEffect)(()=>{var t;const n="string"==typeof(null==(t=window.dashboardSB.currentUser)?void 0:t.userId)&&"string"==typeof(null==p?void 0:p.user_id)&&window.dashboardSB.currentUser.userId===p.user_id;g&&!h&&!n&&p&&e(j.b.sbConnectRequest({userInformation:{userId:p.user_id,accessToken:p.access_token,nickname:p.nickname}}))},[h,e,g,p]),Object(a.useEffect)(()=>{g||La()(m)||e(j.c.fetchSDKUserRequest())},[m,e,g])})(),(()=>{const e=Object(b.f)(),t=Object(b.g)(e=>e.configuration.isDesktopNotificationGranted);Object(a.useEffect)(()=>{Object(H.isDesktopNotificationSupported)()&&(Object(H.checkIfDesktopNotificationGranted)()?t!==f.Ab.GRANTED&&e(j.b.setDesktopNotificationGranted(f.Ab.GRANTED)):Notification.requestPermission(t=>{e(j.b.setDesktopNotificationGranted(t))}))},[e,t])})(),Object(a.useEffect)(()=>{c.a.tz.setDefault(c.a.tz.guess())},[]),Object(a.useEffect)(()=>{var e;null==r||null==(e=r.current)||e.scrollTo(0,0)},[n.location.pathname]);const F=Object(a.useCallback)(e=>{e.currentTarget&&(e.currentTarget.style.willChange="auto")},[]),U=Object(a.useCallback)(e=>{i.current&&(i.current.style.willChange="padding-left"),k(e)},[k]);return R?l&&x&&x.app_id?Object(W.jsx)(S.a.Provider,{value:_,children:Object(W.jsx)(O$,{children:Object(W.jsx)(p.a,{children:Object(W.jsxs)(W7,{ref:i,onTransitionEnd:F,_css:L,children:[N?Object(W.jsx)(X7,{}):Object(W.jsx)(Y7,{ref:r,children:Object(W.jsxs)(s.g,{children:[I,Object(W.jsx)(u.c,{path:`${null==t?void 0:t.url}/desk`,component:p$,history:n}),Object(W.jsx)(s.d,{path:null==t?void 0:t.url,render:()=>!y(f.Gb.application)&&h(["desk.admin","desk.agent"])?Object(W.jsx)(s.c,{to:`${null==t?void 0:t.url}/desk`}):M?Object(W.jsx)(s.c,{to:M}):Object(W.jsx)(s.c,{to:"/"})})]})}),!T&&Object(W.jsx)(K7,{"data-test-id":"LNB",top:D,items:O,activeKey:v,isCollapsed:C,onExpandCollapseButtonClick:U,isExpandCollapseButtonHidden:w}),A&&Object(W.jsx)(a.Suspense,{fallback:null,children:Object(W.jsx)(q7,{})})]})})})}):Object(W.jsx)(V.cc,{}):Object(W.jsx)(s.c,{to:"/"})}},K6oM:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-peak-concurrent-connections/2907"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"The highest single-day count of devices simultaneously connected to Sendbird server in a month. Each device used, and each tab opened are counted as concurrent connections."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following shows an application's Peak Concurrent Connection for each day of the month."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"January 1:")," 100 connections\n",Object(a.a)("strong",{parentName:"p"},"January 2:")," 101 connections\n",Object(a.a)("strong",{parentName:"p"},"January 3:")," 110 connections\n...\n",Object(a.a)("strong",{parentName:"p"},"January 31:")," 101 connections")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"Application's PCC")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"110 connections")," because it is the highest single-day count."))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all applications’ Peak Concurrent Connections within your organization."),Object(a.a)("h4",null,"[Calculation Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nPCC for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 101 connections\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 59 connections\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 200 connections")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"Organization PCC")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"101+59+200 = ",Object(a.a)("strong",{parentName:"p"},"360 connections")))))}l.isMDXComponent=!0},L5pH:function(e,t){e.exports=function(){}},LIAx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){function i(t){var a=new s.default(t);n.call(e,a)}if(e.addEventListener){var r=(o=!1,"object"==typeof a?o=a.capture||!1:"boolean"==typeof a&&(o=a),e.addEventListener(t,i,a||!1),{v:{remove:function(){e.removeEventListener(t,i,o)}}});if("object"==typeof r)return r.v}else if(e.attachEvent)return e.attachEvent("on"+t,i),{remove:function(){e.detachEvent("on"+t,i)}};var o};var a,i=n("E0u0"),s=(a=i)&&a.__esModule?a:{default:a};e.exports=t.default},LPPQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));var a=n("iSMj"),i=n("g9KO"),s=n("/Tr7"),r=n("+LmI"),o=n("Ib5w"),l=n("JCDJ"),c=n("3REe"),d=n("/h9T"),u=n("Szzx"),p=n("jIYg");function g(e,t,n){Object(p.a)(2,arguments);var a=n||{},i=a.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:Object(d.a)(r),l=null==a.weekStartsOn?o:Object(d.a)(a.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=Object(s.a)(e),u=Object(d.a)(t),g=c.getUTCDay(),h=u%7,m=(h+7)%7,f=(m<l?7:0)+u-g;return c.setUTCDate(c.getUTCDate()+f),c}var h=n("lgZR");var m=n("ErpD");var f=n("tpup"),b=n("1vjI"),j=/^(1[0-2]|0?\d)/,y=/^(3[0-1]|[0-2]?\d)/,O=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,v=/^(5[0-3]|[0-4]?\d)/,x=/^(2[0-3]|[0-1]?\d)/,_=/^(2[0-4]|[0-1]?\d)/,C=/^(1[0-1]|0?\d)/,k=/^(1[0-2]|0?\d)/,w=/^[0-5]?\d/,T=/^[0-5]?\d/,S=/^\d/,E=/^\d{1,2}/,I=/^\d{1,3}/,M=/^\d{1,4}/,D=/^-?\d+/,A=/^-?\d/,N=/^-?\d{1,2}/,R=/^-?\d{1,3}/,P=/^-?\d{1,4}/,L=/^([+-])(\d{2})(\d{2})?|Z/,F=/^([+-])(\d{2})(\d{2})|Z/,U=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,$=/^([+-])(\d{2}):(\d{2})|Z/,B=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function V(e,t,n){var a=t.match(e);if(!a)return null;var i=parseInt(a[0],10);return{value:n?n(i):i,rest:t.slice(a[0].length)}}function z(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function H(e,t){return V(D,e,t)}function q(e,t,n){switch(e){case 1:return V(S,t,n);case 2:return V(E,t,n);case 3:return V(I,t,n);case 4:return V(M,t,n);default:return V(new RegExp("^\\d{1,"+e+"}"),t,n)}}function G(e,t,n){switch(e){case 1:return V(A,t,n);case 2:return V(N,t,n);case 3:return V(R,t,n);case 4:return V(P,t,n);default:return V(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function W(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function K(e,t){var n,a=t>0,i=a?t:1-t;if(i<=50)n=e||100;else{var s=i+50;n=e+100*Math.floor(s/100)-(e>=s%100?100:0)}return a?n:1-n}var Y=[31,28,31,30,31,30,31,31,30,31,30,31],Q=[31,29,31,30,31,30,31,31,30,31,30,31];function J(e){return e%400==0||e%4==0&&e%100!=0}var X={G:{priority:140,parse:function(e,t,n,a){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,a){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,a){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return q(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return q(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var s=K(n.year,i);return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}var r="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,a){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return q(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return q(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var i=Object(u.a)(e,a);if(n.isTwoDigitYear){var s=K(n.year,i);return e.setUTCFullYear(s,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Object(b.a)(e,a)}var r="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(r,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Object(b.a)(e,a)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,a){return G("R"===t?4:t.length,e)},set:function(e,t,n,a){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),Object(f.a)(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,a){return G("u"===t?4:t.length,e)},set:function(e,t,n,a){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,a){switch(t){case"Q":case"QQ":return q(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,a){switch(t){case"q":case"qq":return q(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,a){var i=function(e){return e-1};switch(t){case"M":return V(j,e,i);case"MM":return q(2,e,i);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,a){var i=function(e){return e-1};switch(t){case"L":return V(j,e,i);case"LL":return q(2,e,i);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,a){switch(t){case"w":return V(v,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return Object(b.a)(function(e,t,n){Object(p.a)(2,arguments);var a=Object(s.a)(e),i=Object(d.a)(t),r=Object(m.a)(a,n)-i;return a.setUTCDate(a.getUTCDate()-7*r),a}(e,n,a),a)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,a){switch(t){case"I":return V(v,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return Object(f.a)(function(e,t){Object(p.a)(2,arguments);var n=Object(s.a)(e),a=Object(d.a)(t),i=Object(h.a)(n)-a;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n,a),a)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"d":return V(y,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return q(t.length,e)}},validate:function(e,t,n){var a=J(e.getUTCFullYear()),i=e.getUTCMonth();return a?t>=1&&t<=Q[i]:t>=1&&t<=Y[i]},set:function(e,t,n,a){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"D":case"DD":return V(O,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return q(t.length,e)}},validate:function(e,t,n){return J(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,a){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,a){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=g(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,a){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return q(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=g(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,a){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return q(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=g(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,a){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return q(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,a){return(e=function(e,t){Object(p.a)(2,arguments);var n=Object(d.a)(t);n%7==0&&(n-=7);var a=1,i=Object(s.a)(e),r=i.getUTCDay(),o=n%7,l=(o+7)%7,c=(l<a?7:0)+n-r;return i.setUTCDate(i.getUTCDate()+c),i}(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,a){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(W(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,a){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(W(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,a){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(W(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,a){switch(t){case"h":return V(k,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,a){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,a){switch(t){case"H":return V(x,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,a){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,a){switch(t){case"K":return V(C,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,a){switch(t){case"k":return V(_,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,a){var i=n<=24?n%24:n;return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,a){switch(t){case"m":return V(w,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,a){switch(t){case"s":return V(T,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return q(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,a){return q(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,a){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,a){switch(t){case"X":return z(L,e);case"XX":return z(F,e);case"XXXX":return z(U,e);case"XXXXX":return z(B,e);case"XXX":default:return z($,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,a){switch(t){case"x":return z(L,e);case"xx":return z(F,e);case"xxxx":return z(U,e);case"xxxxx":return z(B,e);case"xxx":default:return z($,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,a){return H(e)},set:function(e,t,n,a){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,a){return H(e)},set:function(e,t,n,a){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},Z=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,te=/^'([^]*?)'?$/,ne=/''/g,ae=/\S/,ie=/[a-zA-Z]/;function se(e,t,n,u){Object(p.a)(3,arguments);var g=String(e),h=String(t),m=u||{},f=m.locale||a.a;if(!f.match)throw new RangeError("locale must contain match property");var b=f.options&&f.options.firstWeekContainsDate,j=null==b?1:Object(d.a)(b),y=null==m.firstWeekContainsDate?j:Object(d.a)(m.firstWeekContainsDate);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=f.options&&f.options.weekStartsOn,v=null==O?0:Object(d.a)(O),x=null==m.weekStartsOn?v:Object(d.a)(m.weekStartsOn);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===h)return""===g?Object(s.a)(n):new Date(NaN);var _,C={firstWeekContainsDate:y,weekStartsOn:x,locale:f},k=[{priority:10,subPriority:-1,set:re,index:0}],w=h.match(ee).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,o.a[t])(e,f.formatLong,C):e})).join("").match(Z),T=[];for(_=0;_<w.length;_++){var S=w[_];!m.useAdditionalWeekYearTokens&&Object(c.b)(S)&&Object(c.c)(S,h,e),!m.useAdditionalDayOfYearTokens&&Object(c.a)(S)&&Object(c.c)(S,h,e);var E=S[0],I=X[E];if(I){var M=I.incompatibleTokens;if(Array.isArray(M)){for(var D=void 0,A=0;A<T.length;A++){var N=T[A].token;if(-1!==M.indexOf(N)||N===E){D=T[A];break}}if(D)throw new RangeError("The format string mustn't contain `".concat(D.fullToken,"` and `").concat(S,"` at the same time"))}else if("*"===I.incompatibleTokens&&T.length)throw new RangeError("The format string mustn't contain `".concat(S,"` and any other token at the same time"));T.push({token:E,fullToken:S});var R=I.parse(g,S,f.match,C);if(!R)return new Date(NaN);k.push({priority:I.priority,subPriority:I.subPriority||0,set:I.set,validate:I.validate,value:R.value,index:k.length}),g=R.rest}else{if(E.match(ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if("''"===S?S="'":"'"===E&&(S=oe(S)),0!==g.indexOf(S))return new Date(NaN);g=g.slice(S.length)}}if(g.length>0&&ae.test(g))return new Date(NaN);var P=k.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return k.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),L=Object(s.a)(n);if(isNaN(L))return new Date(NaN);var F=Object(i.a)(L,Object(l.a)(L)),U={};for(_=0;_<P.length;_++){var $=P[_];if($.validate&&!$.validate(F,$.value,C))return new Date(NaN);var B=$.set(F,U,$.value,C);B[0]?(F=B[0],Object(r.a)(U,B[1])):F=B}return F}function re(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function oe(e){return e.match(te)[1].replace(ne,"'")}},M5dz:function(e,t,n){var a=n("ekG2");e.exports=function(e,t){if(!a(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!a(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},MBy0:function(e,t,n){n("4Zg2")("asyncIterator")},"MO+k":function(e,t,n){
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var n={};for(var a in t)t.hasOwnProperty(a)&&(n[t[a]]=a);var i=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in i)if(i.hasOwnProperty(s)){if(!("channels"in i[s]))throw new Error("missing channels property: "+s);if(!("labels"in i[s]))throw new Error("missing channel labels property: "+s);if(i[s].labels.length!==i[s].channels)throw new Error("channel and label counts mismatch: "+s);var r=i[s].channels,o=i[s].labels;delete i[s].channels,delete i[s].labels,Object.defineProperty(i[s],"channels",{value:r}),Object.defineProperty(i[s],"labels",{value:o})}i.rgb.hsl=function(e){var t,n,a=e[0]/255,i=e[1]/255,s=e[2]/255,r=Math.min(a,i,s),o=Math.max(a,i,s),l=o-r;return o===r?t=0:a===o?t=(i-s)/l:i===o?t=2+(s-a)/l:s===o&&(t=4+(a-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(r+o)/2,[t,100*(o===r?0:n<=.5?l/(o+r):l/(2-o-r)),100*n]},i.rgb.hsv=function(e){var t,n,a,i,s,r=e[0]/255,o=e[1]/255,l=e[2]/255,c=Math.max(r,o,l),d=c-Math.min(r,o,l),u=function(e){return(c-e)/6/d+.5};return 0===d?i=s=0:(s=d/c,t=u(r),n=u(o),a=u(l),r===c?i=a-n:o===c?i=1/3+t-a:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*c]},i.rgb.hwb=function(e){var t=e[0],n=e[1],a=e[2];return[i.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,a))*100,100*(a=1-1/255*Math.max(t,Math.max(n,a)))]},i.rgb.cmyk=function(e){var t,n=e[0]/255,a=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-a,1-i)))/(1-t)||0),100*((1-a-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},i.rgb.keyword=function(e){var a=n[e];if(a)return a;var i,s,r,o=1/0;for(var l in t)if(t.hasOwnProperty(l)){var c=t[l],d=(s=e,r=c,Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2)+Math.pow(s[2]-r[2],2));d<o&&(o=d,i=l)}return i},i.keyword.rgb=function(e){return t[e]},i.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)),100*(.2126*t+.7152*n+.0722*a),100*(.0193*t+.1192*n+.9505*a)]},i.rgb.lab=function(e){var t=i.rgb.xyz(e),n=t[0],a=t[1],s=t[2];return a/=100,s/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(n-a),200*(a-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]},i.hsl.rgb=function(e){var t,n,a,i,s,r=e[0]/360,o=e[1]/100,l=e[2]/100;if(0===o)return[s=255*l,s,s];t=2*l-(n=l<.5?l*(1+o):l+o-l*o),i=[0,0,0];for(var c=0;c<3;c++)(a=r+1/3*-(c-1))<0&&a++,a>1&&a--,s=6*a<1?t+6*(n-t)*a:2*a<1?n:3*a<2?t+(n-t)*(2/3-a)*6:t,i[c]=255*s;return i},i.hsl.hsv=function(e){var t=e[0],n=e[1]/100,a=e[2]/100,i=n,s=Math.max(a,.01);return n*=(a*=2)<=1?a:2-a,i*=s<=1?s:2-s,[t,100*(0===a?2*i/(s+i):2*n/(a+n)),(a+n)/2*100]},i.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,a=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),r=255*a*(1-n),o=255*a*(1-n*s),l=255*a*(1-n*(1-s));switch(a*=255,i){case 0:return[a,l,r];case 1:return[o,a,r];case 2:return[r,a,l];case 3:return[r,o,a];case 4:return[l,r,a];case 5:return[a,r,o]}},i.hsv.hsl=function(e){var t,n,a,i=e[0],s=e[1]/100,r=e[2]/100,o=Math.max(r,.01);return a=(2-s)*r,n=s*o,[i,100*(n=(n/=(t=(2-s)*o)<=1?t:2-t)||0),100*(a/=2)]},i.hwb.rgb=function(e){var t,n,a,i,s,r,o,l=e[0]/360,c=e[1]/100,d=e[2]/100,u=c+d;switch(u>1&&(c/=u,d/=u),a=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(a=1-a),i=c+a*((n=1-d)-c),t){default:case 6:case 0:s=n,r=i,o=c;break;case 1:s=i,r=n,o=c;break;case 2:s=c,r=n,o=i;break;case 3:s=c,r=i,o=n;break;case 4:s=i,r=c,o=n;break;case 5:s=n,r=c,o=i}return[255*s,255*r,255*o]},i.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,a=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,a*(1-i)+i))]},i.xyz.rgb=function(e){var t,n,a,i=e[0]/100,s=e[1]/100,r=e[2]/100;return n=-.9689*i+1.8758*s+.0415*r,a=.0557*i+-.204*s+1.057*r,t=(t=3.2406*i+-1.5372*s+-.4986*r)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(a=Math.min(Math.max(0,a),1))]},i.xyz.lab=function(e){var t=e[0],n=e[1],a=e[2];return n/=100,a/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},i.lab.xyz=function(e){var t,n,a,i=e[0];t=e[1]/500+(n=(i+16)/116),a=n-e[2]/200;var s=Math.pow(n,3),r=Math.pow(t,3),o=Math.pow(a,3);return n=s>.008856?s:(n-16/116)/7.787,t=r>.008856?r:(t-16/116)/7.787,a=o>.008856?o:(a-16/116)/7.787,[t*=95.047,n*=100,a*=108.883]},i.lab.lch=function(e){var t,n=e[0],a=e[1],i=e[2];return(t=360*Math.atan2(i,a)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(a*a+i*i),t]},i.lch.lab=function(e){var t,n=e[0],a=e[1];return t=e[2]/360*2*Math.PI,[n,a*Math.cos(t),a*Math.sin(t)]},i.rgb.ansi16=function(e){var t=e[0],n=e[1],a=e[2],s=1 in arguments?arguments[1]:i.rgb.hsv(e)[2];if(0===(s=Math.round(s/50)))return 30;var r=30+(Math.round(a/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===s&&(r+=60),r},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){var t=e[0],n=e[1],a=e[2];return t===n&&n===a?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(a/255*5)},i.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},i.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},i.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var a=parseInt(n,16);return[a>>16&255,a>>8&255,255&a]},i.rgb.hcg=function(e){var t,n=e[0]/255,a=e[1]/255,i=e[2]/255,s=Math.max(Math.max(n,a),i),r=Math.min(Math.min(n,a),i),o=s-r;return t=o<=0?0:s===n?(a-i)/o%6:s===a?2+(i-n)/o:4+(n-a)/o+4,t/=6,[360*(t%=1),100*o,100*(o<1?r/(1-o):0)]},i.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,a=1,i=0;return(a=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*a)/(1-a)),[e[0],100*a,100*i]},i.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,a=t*n,i=0;return a<1&&(i=(n-a)/(1-a)),[e[0],100*a,100*i]},i.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,a=e[2]/100;if(0===n)return[255*a,255*a,255*a];var i,s=[0,0,0],r=t%1*6,o=r%1,l=1-o;switch(Math.floor(r)){case 0:s[0]=1,s[1]=o,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=o;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=o,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return i=(1-n)*a,[255*(n*s[0]+i),255*(n*s[1]+i),255*(n*s[2]+i)]},i.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),a=0;return n>0&&(a=t/n),[e[0],100*a,100*n]},i.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,a=0;return n>0&&n<.5?a=t/(2*n):n>=.5&&n<1&&(a=t/(2*(1-n))),[e[0],100*a,100*n]},i.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,a=n-t,i=0;return a<1&&(i=(n-a)/(1-a)),[e[0],100*a,100*i]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=i.gray.hsv=function(e){return[0,0,e[0]]},i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}));function a(e){var t=function(){for(var e={},t=Object.keys(n),a=t.length,i=0;i<a;i++)e[t[i]]={distance:-1,parent:null};return e}(),a=[e];for(t[e].distance=0;a.length;)for(var i=a.pop(),s=Object.keys(n[i]),r=s.length,o=0;o<r;o++){var l=s[o],c=t[l];-1===c.distance&&(c.distance=t[i].distance+1,c.parent=i,a.unshift(l))}return t}function i(e,t){return function(n){return t(e(n))}}function s(e,t){for(var a=[t[e].parent,e],s=n[t[e].parent][e],r=t[e].parent;t[r].parent;)a.unshift(t[r].parent),s=i(n[t[r].parent][r],s),r=t[r].parent;return s.conversion=a,s}n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;var r={};Object.keys(n).forEach((function(e){r[e]={},Object.defineProperty(r[e],"channels",{value:n[e].channels}),Object.defineProperty(r[e],"labels",{value:n[e].labels});var t=function(e){for(var t=a(e),n={},i=Object.keys(t),r=i.length,o=0;o<r;o++){var l=i[o];null!==t[l].parent&&(n[l]=s(l,t))}return n}(e);Object.keys(t).forEach((function(n){var a=t[n];r[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var a=n.length,i=0;i<a;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(a),r[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(a)}))}));var o=r,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c={getRgba:d,getHsla:u,getRgb:function(e){var t=d(e);return t&&t.slice(0,3)},getHsl:function(e){var t=u(e);return t&&t.slice(0,3)},getHwb:p,getAlpha:function(e){var t=d(e);return t||(t=u(e))||(t=p(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+b(e[0])+b(e[1])+b(e[2])+(t>=0&&t<1?b(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?g(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:g,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return h(e,t);var n=Math.round(e[0]/255*100),a=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return"rgb("+n+"%, "+a+"%, "+i+"%)"},percentaString:h,hslString:function(e,t){return t<1||e[3]&&e[3]<1?m(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:m,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return j[e.slice(0,3)]}};function d(e){if(e){var t=[0,0,0],n=1,a=e.match(/^#([a-fA-F0-9]{3,4})$/i),i="";if(a){i=(a=a[1])[3];for(var s=0;s<t.length;s++)t[s]=parseInt(a[s]+a[s],16);i&&(n=Math.round(parseInt(i+i,16)/255*100)/100)}else if(a=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(i=a[2],a=a[1],s=0;s<t.length;s++)t[s]=parseInt(a.slice(2*s,2*s+2),16);i&&(n=Math.round(parseInt(i,16)/255*100)/100)}else if(a=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=parseInt(a[s+1]);n=parseFloat(a[4])}else if(a=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=Math.round(2.55*parseFloat(a[s+1]));n=parseFloat(a[4])}else if(a=e.match(/(\w+)/)){if("transparent"==a[1])return[0,0,0,0];if(!(t=l[a[1]]))return}for(s=0;s<t.length;s++)t[s]=f(t[s],0,255);return n=n||0==n?f(n,0,1):1,t[3]=n,t}}function u(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[f(parseInt(t[1]),0,360),f(parseFloat(t[2]),0,100),f(parseFloat(t[3]),0,100),f(isNaN(n)?1:n,0,1)]}}}function p(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[f(parseInt(t[1]),0,360),f(parseFloat(t[2]),0,100),f(parseFloat(t[3]),0,100),f(isNaN(n)?1:n,0,1)]}}}function g(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function h(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function f(e,t,n){return Math.min(Math.max(t,e),n)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var j={};for(var y in l)j[l[y]]=y;var O=function(e){return e instanceof O?e:this instanceof O?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=c.getRgba(e))?this.setValues("rgb",t):(t=c.getHsla(e))?this.setValues("hsl",t):(t=c.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new O(e);var t};O.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return c.hexString(this.values.rgb)},rgbString:function(){return c.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return c.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return c.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return c.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return c.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return c.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return c.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var a=e[n]/255;t[n]=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=e,a=void 0===t?.5:t,i=2*a-1,s=this.alpha()-n.alpha(),r=((i*s==-1?i:(i+s)/(1+i*s))+1)/2,o=1-r;return this.rgb(r*this.red()+o*n.red(),r*this.green()+o*n.green(),r*this.blue()+o*n.blue()).alpha(this.alpha()*a+n.alpha()*(1-a))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new O,a=this.values,i=n.values;for(var s in a)a.hasOwnProperty(s)&&(e=a[s],"[object Array]"===(t={}.toString.call(e))?i[s]=e.slice(0):"[object Number]"===t?i[s]=e:console.error("unexpected color value:",e));return n}},O.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},O.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},O.prototype.getValues=function(e){for(var t=this.values,n={},a=0;a<e.length;a++)n[e.charAt(a)]=t[e][a];return 1!==t.alpha&&(n.a=t.alpha),n},O.prototype.setValues=function(e,t){var n,a,i=this.values,s=this.spaces,r=this.maxes,l=1;if(this.valid=!0,"alpha"===e)l=t;else if(t.length)i[e]=t.slice(0,e.length),l=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)i[e][n]=t[e.charAt(n)];l=t.a}else if(void 0!==t[s[e][0]]){var c=s[e];for(n=0;n<e.length;n++)i[e][n]=t[c[n]];l=t.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===l?i.alpha:l)),"alpha"===e)return!1;for(n=0;n<e.length;n++)a=Math.max(0,Math.min(r[e][n],i[e][n])),i[e][n]=Math.round(a);for(var d in s)d!==e&&(i[d]=o[e][d](i[e]));return!0},O.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},O.prototype.setChannel=function(e,t,n){var a=this.values[e];return void 0===n?a[t]:(n===a[t]||(a[t]=n,this.setValues(e,a)),this)},"undefined"!=typeof window&&(window.Color=O);var v,x=O,_={noop:function(){},uid:(v=0,function(){return v++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return _.valueOrDefault(_.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,a){var i,s,r;if(_.isArray(e))if(s=e.length,a)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(_.isObject(e))for(s=(r=Object.keys(e)).length,i=0;i<s;i++)t.call(n,e[r[i]],r[i])},arrayEquals:function(e,t){var n,a,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,a=e.length;n<a;++n)if(i=e[n],s=t[n],i instanceof Array&&s instanceof Array){if(!_.arrayEquals(i,s))return!1}else if(i!==s)return!1;return!0},clone:function(e){if(_.isArray(e))return e.map(_.clone);if(_.isObject(e)){for(var t={},n=Object.keys(e),a=n.length,i=0;i<a;++i)t[n[i]]=_.clone(e[n[i]]);return t}return e},_merger:function(e,t,n,a){var i=t[e],s=n[e];_.isObject(i)&&_.isObject(s)?_.merge(i,s,a):t[e]=_.clone(s)},_mergerIf:function(e,t,n){var a=t[e],i=n[e];_.isObject(a)&&_.isObject(i)?_.mergeIf(a,i):t.hasOwnProperty(e)||(t[e]=_.clone(i))},merge:function(e,t,n){var a,i,s,r,o,l=_.isArray(t)?t:[t],c=l.length;if(!_.isObject(e))return e;for(a=(n=n||{}).merger||_._merger,i=0;i<c;++i)if(t=l[i],_.isObject(t))for(o=0,r=(s=Object.keys(t)).length;o<r;++o)a(s[o],e,t,n);return e},mergeIf:function(e,t){return _.merge(e,t,{merger:_._mergerIf})},extend:Object.assign||function(e){return _.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=n};return a.prototype=t.prototype,n.prototype=new a,n.extend=_.inherits,e&&_.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,a){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+a+'" instead')}},C=_;_.callCallback=_.callback,_.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},_.getValueOrDefault=_.valueOrDefault,_.getValueAtIndexOrDefault=_.valueAtIndexOrDefault;var k={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1===e?1:(n||(n=.3),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),a<1?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-k.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*k.easeInBounce(2*e):.5*k.easeOutBounce(2*e-1)+.5}},w={effects:k};C.easingEffects=k;var T=Math.PI,S=T/180,E=2*T,I=T/2,M=T/4,D=2*T/3,A={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,a,i,s){if(s){var r=Math.min(s,i/2,a/2),o=t+r,l=n+r,c=t+a-r,d=n+i-r;e.moveTo(t,l),o<c&&l<d?(e.arc(o,l,r,-T,-I),e.arc(c,l,r,-I,0),e.arc(c,d,r,0,I),e.arc(o,d,r,I,T)):o<c?(e.moveTo(o,n),e.arc(c,l,r,-I,I),e.arc(o,l,r,I,T+I)):l<d?(e.arc(o,l,r,-T,0),e.arc(o,d,r,0,T)):e.arc(o,l,r,-T,T),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,a,i)},drawPoint:function(e,t,n,a,i,s){var r,o,l,c,d,u=(s||0)*S;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(r=t.toString())||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(a,i),e.rotate(u),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(a,i,n,0,E),e.closePath();break;case"triangle":e.moveTo(a+Math.sin(u)*n,i-Math.cos(u)*n),u+=D,e.lineTo(a+Math.sin(u)*n,i-Math.cos(u)*n),u+=D,e.lineTo(a+Math.sin(u)*n,i-Math.cos(u)*n),e.closePath();break;case"rectRounded":c=n-(d=.516*n),o=Math.cos(u+M)*c,l=Math.sin(u+M)*c,e.arc(a-o,i-l,d,u-T,u-I),e.arc(a+l,i-o,d,u-I,u),e.arc(a+o,i+l,d,u,u+I),e.arc(a-l,i+o,d,u+I,u+T),e.closePath();break;case"rect":if(!s){c=Math.SQRT1_2*n,e.rect(a-c,i-c,2*c,2*c);break}u+=M;case"rectRot":o=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(a-o,i-l),e.lineTo(a+l,i-o),e.lineTo(a+o,i+l),e.lineTo(a-l,i+o),e.closePath();break;case"crossRot":u+=M;case"cross":o=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(a-o,i-l),e.lineTo(a+o,i+l),e.moveTo(a+l,i-o),e.lineTo(a-l,i+o);break;case"star":o=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(a-o,i-l),e.lineTo(a+o,i+l),e.moveTo(a+l,i-o),e.lineTo(a-l,i+o),u+=M,o=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(a-o,i-l),e.lineTo(a+o,i+l),e.moveTo(a+l,i-o),e.lineTo(a-l,i+o);break;case"line":o=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(a-o,i-l),e.lineTo(a+o,i+l);break;case"dash":e.moveTo(a,i),e.lineTo(a+Math.cos(u)*n,i+Math.sin(u)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,a){var i=n.steppedLine;if(i){if("middle"===i){var s=(t.x+n.x)/2;e.lineTo(s,a?n.y:t.y),e.lineTo(s,a?t.y:n.y)}else"after"===i&&!a||"after"!==i&&a?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(a?t.controlPointPreviousX:t.controlPointNextX,a?t.controlPointPreviousY:t.controlPointNextY,a?n.controlPointNextX:n.controlPointPreviousX,a?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},N=A;C.clear=A.clear,C.drawRoundedRectangle=function(e){e.beginPath(),A.roundedRect.apply(A,arguments)};var R={_set:function(e,t){return C.merge(this[e]||(this[e]={}),t)}};R._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var P=R,L=C.valueOrDefault,F={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,a,i;return C.isObject(e)?(t=+e.top||0,n=+e.right||0,a=+e.bottom||0,i=+e.left||0):t=n=a=i=+e||0,{top:t,right:n,bottom:a,left:i,height:t+a,width:i+n}},_parseFont:function(e){var t=P.global,n=L(e.fontSize,t.defaultFontSize),a={family:L(e.fontFamily,t.defaultFontFamily),lineHeight:C.options.toLineHeight(L(e.lineHeight,t.defaultLineHeight),n),size:n,style:L(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return a.string=function(e){return!e||C.isNullOrUndef(e.size)||C.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a},resolve:function(e,t,n,a){var i,s,r,o=!0;for(i=0,s=e.length;i<s;++i)if(void 0!==(r=e[i])&&(void 0!==t&&"function"==typeof r&&(r=r(t),o=!1),void 0!==n&&C.isArray(r)&&(r=r[n],o=!1),void 0!==r))return a&&!o&&(a.cacheable=!1),r}},U={_factorize:function(e){var t,n=[],a=Math.sqrt(e);for(t=1;t<a;t++)e%t==0&&(n.push(t),n.push(e/t));return a===(0|a)&&n.push(a),n.sort((function(e,t){return e-t})).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},$=U;C.log10=U.log10;var B=C,V=w,z=N,H=F,q=$,G={getRtlAdapter:function(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var n,a;"ltr"!==t&&"rtl"!==t||(a=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=a)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};B.easing=V,B.canvas=z,B.options=H,B.math=q,B.rtl=G;var W=function(e){B.extend(this,e),this.initialize.apply(this,arguments)};B.extend(W.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=B.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,a=t._start,i=t._view;return n&&1!==e?(i||(i=t._view={}),a||(a=t._start={}),function(e,t,n,a){var i,s,r,o,l,c,d,u,p,g=Object.keys(n);for(i=0,s=g.length;i<s;++i)if(c=n[r=g[i]],t.hasOwnProperty(r)||(t[r]=c),(o=t[r])!==c&&"_"!==r[0]){if(e.hasOwnProperty(r)||(e[r]=o),(d=typeof c)==typeof(l=e[r]))if("string"===d){if((u=x(l)).valid&&(p=x(c)).valid){t[r]=p.mix(u,a).rgbString();continue}}else if(B.isFinite(l)&&B.isFinite(c)){t[r]=l+(c-l)*a;continue}t[r]=c}}(a,i,n,e),t):(t._view=B.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return B.isNumber(this._model.x)&&B.isNumber(this._model.y)}}),W.extend=B.inherits;var K=W,Y=K.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Q=Y;Object.defineProperty(Y.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Y.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),P._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:B.noop,onComplete:B.noop}});var J={animations:[],request:null,addAnimation:function(e,t,n,a){var i,s,r=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,a||(e.animating=!0),i=0,s=r.length;i<s;++i)if(r[i].chart===e)return void(r[i]=t);r.push(t),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=B.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=B.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,n,a,i=this.animations,s=0;s<i.length;)t=(e=i[s]).chart,n=e.numSteps,a=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(a,n),B.callback(e.render,[t,e],t),B.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(B.callback(e.onAnimationComplete,[e],t),t.animating=!1,i.splice(s,1)):++s}},X=B.options.resolve,Z=["push","pop","shift","splice","unshift"];function ee(e,t){var n=e._chartjs;if(n){var a=n.listeners,i=a.indexOf(t);-1!==i&&a.splice(i,1),a.length>0||(Z.forEach((function(t){delete e[t]})),delete e._chartjs)}}var te=function(e,t){this.initialize(e,t)};B.extend(te.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this.getMeta(),t=this.chart,n=t.scales,a=this.getDataset(),i=t.options.scales;null!==e.xAxisID&&e.xAxisID in n&&!a.xAxisID||(e.xAxisID=a.xAxisID||i.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in n&&!a.yAxisID||(e.yAxisID=a.yAxisID||i.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&ee(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,n=this.getMeta(),a=this.getDataset().data||[],i=n.data;for(e=0,t=a.length;e<t;++e)i[e]=i[e]||this.createMetaData(e);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,n=this,a=n.getDataset(),i=a.data||(a.data=[]);n._data!==i&&(n._data&&ee(n._data,n),i&&Object.isExtensible(i)&&(t=n,(e=i)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Z.forEach((function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),a=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),i=a.apply(this,t);return B.each(e._chartjs.listeners,(function(e){"function"==typeof e[n]&&e[n].apply(e,t)})),i}})})))),n._data=i),n.resyncElements()},_configure:function(){this._config=B.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&B._merger(e,t,n)}})},_update:function(e){this._configure(),this._cachedDataOpts=null,this.update(e)},update:B.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],a=n.length,i=0;i<a;++i)n[i].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,a=0;for(e.dataset&&e.dataset.draw();a<n;++a)t[a].draw()},getStyle:function(e){var t,n=this.getMeta(),a=n.dataset;return this._configure(),a&&void 0===e?t=this._resolveDatasetElementOptions(a||{}):(e=e||0,t=this._resolveDataElementOptions(n.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var n,a,i,s,r=this,o=r.chart,l=r._config,c=e.custom||{},d=o.options.elements[r.datasetElementType.prototype._type]||{},u=r._datasetElementOptions,p={},g={chart:o,dataset:r.getDataset(),datasetIndex:r.index,hover:t};for(n=0,a=u.length;n<a;++n)i=u[n],s=t?"hover"+i.charAt(0).toUpperCase()+i.slice(1):i,p[i]=X([c[s],l[s],d[s]],g);return p},_resolveDataElementOptions:function(e,t){var n=this,a=e&&e.custom,i=n._cachedDataOpts;if(i&&!a)return i;var s,r,o,l,c=n.chart,d=n._config,u=c.options.elements[n.dataElementType.prototype._type]||{},p=n._dataElementOptions,g={},h={chart:c,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},m={cacheable:!a};if(a=a||{},B.isArray(p))for(r=0,o=p.length;r<o;++r)g[l=p[r]]=X([a[l],d[l],u[l]],h,t,m);else for(r=0,o=(s=Object.keys(p)).length;r<o;++r)g[l=s[r]]=X([a[l],d[p[l]],d[l],u[l]],h,t,m);return m.cacheable&&(n._cachedDataOpts=Object.freeze(g)),g},removeHoverStyle:function(e){B.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,a=e.custom||{},i=e._model,s=B.getHoverColor;e.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=X([a.hoverBackgroundColor,t.hoverBackgroundColor,s(i.backgroundColor)],void 0,n),i.borderColor=X([a.hoverBorderColor,t.hoverBorderColor,s(i.borderColor)],void 0,n),i.borderWidth=X([a.hoverBorderWidth,t.hoverBorderWidth,i.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,a,i,s,r=this.getMeta().dataset,o={};if(r){for(s=r._model,i=this._resolveDatasetElementOptions(r,!0),e=0,t=(a=Object.keys(i)).length;e<t;++e)o[n=a[e]]=s[n],s[n]=i[n];r.$previousStyle=o}},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,n=e.data.length,a=t.length;a<n?e.data.splice(a,n-a):a>n&&this.insertElements(n,a-n)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),te.extend=B.inherits;var ne=te,ae=2*Math.PI;function ie(e,t){var n=t.startAngle,a=t.endAngle,i=t.pixelMargin,s=i/t.outerRadius,r=t.x,o=t.y;e.beginPath(),e.arc(r,o,t.outerRadius,n-s,a+s),t.innerRadius>i?(s=i/t.innerRadius,e.arc(r,o,t.innerRadius-i,a+s,n-s,!0)):e.arc(r,o,i,a+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function se(e,t,n){var a="inner"===t.borderAlign;a?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&function(e,t,n,a){var i,s=n.endAngle;for(a&&(n.endAngle=n.startAngle+ae,ie(e,n),n.endAngle=s,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=ae,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+ae,n.startAngle,!0),i=0;i<n.fullCircles;++i)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+ae),i=0;i<n.fullCircles;++i)e.stroke()}(e,t,n,a),a&&ie(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}P._set("global",{elements:{arc:{backgroundColor:P.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var re=K.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var a=B.getAngleFromPoint(n,{x:e,y:t}),i=a.angle,s=a.distance,r=n.startAngle,o=n.endAngle;o<r;)o+=ae;for(;i>o;)i-=ae;for(;i<r;)i+=ae;var l=i>=r&&i<=o,c=s>=n.innerRadius&&s<=n.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,a="inner"===n.borderAlign?.33:0,i={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-a,0),pixelMargin:a,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/ae)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,i.fullCircles){for(i.endAngle=i.startAngle+ae,t.beginPath(),t.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),e=0;e<i.fullCircles;++e)t.fill();i.endAngle=i.startAngle+n.circumference%ae}t.beginPath(),t.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&se(t,n,i),t.restore()}}),oe=B.valueOrDefault,le=P.global.defaultColor;P._set("global",{elements:{line:{tension:.4,backgroundColor:le,borderWidth:3,borderColor:le,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ce=K.extend({_type:"line",draw:function(){var e,t,n,a=this,i=a._view,s=a._chart.ctx,r=i.spanGaps,o=a._children.slice(),l=P.global,c=l.elements.line,d=-1,u=a._loop;if(o.length){if(a._loop){for(e=0;e<o.length;++e)if(t=B.previousItem(o,e),!o[e]._view.skip&&t._view.skip){o=o.slice(e).concat(o.slice(0,e)),u=r;break}u&&o.push(o[0])}for(s.save(),s.lineCap=i.borderCapStyle||c.borderCapStyle,s.setLineDash&&s.setLineDash(i.borderDash||c.borderDash),s.lineDashOffset=oe(i.borderDashOffset,c.borderDashOffset),s.lineJoin=i.borderJoinStyle||c.borderJoinStyle,s.lineWidth=oe(i.borderWidth,c.borderWidth),s.strokeStyle=i.borderColor||l.defaultColor,s.beginPath(),(n=o[0]._view).skip||(s.moveTo(n.x,n.y),d=0),e=1;e<o.length;++e)n=o[e]._view,t=-1===d?B.previousItem(o,e):o[d],n.skip||(d!==e-1&&!r||-1===d?s.moveTo(n.x,n.y):B.canvas.lineTo(s,t._view,n),d=e);u&&s.closePath(),s.stroke(),s.restore()}}}),de=B.valueOrDefault,ue=P.global.defaultColor;function pe(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}P._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ue,borderColor:ue,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ge=K.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:pe,inXRange:pe,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,a=t.pointStyle,i=t.rotation,s=t.radius,r=t.x,o=t.y,l=P.global,c=l.defaultColor;t.skip||(void 0===e||B.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||c,n.lineWidth=de(t.borderWidth,l.elements.point.borderWidth),n.fillStyle=t.backgroundColor||c,B.canvas.drawPoint(n,a,s,r,o,i))}}),he=P.global.defaultColor;function me(e){return e&&void 0!==e.width}function fe(e){var t,n,a,i,s;return me(e)?(s=e.width/2,t=e.x-s,n=e.x+s,a=Math.min(e.y,e.base),i=Math.max(e.y,e.base)):(s=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),a=e.y-s,i=e.y+s),{left:t,top:a,right:n,bottom:i}}function be(e,t,n){return e===t?n:e===n?t:e}function je(e,t,n){var a,i,s,r,o=e.borderWidth,l=function(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=be(t,"left","right")):e.base<e.y&&(t=be(t,"bottom","top")),n[t]=!0,n):n}(e);return B.isObject(o)?(a=+o.top||0,i=+o.right||0,s=+o.bottom||0,r=+o.left||0):a=i=s=r=+o||0,{t:l.top||a<0?0:a>n?n:a,r:l.right||i<0?0:i>t?t:i,b:l.bottom||s<0?0:s>n?n:s,l:l.left||r<0?0:r>t?t:r}}function ye(e,t,n){var a=null===t,i=null===n,s=!(!e||a&&i)&&fe(e);return s&&(a||t>=s.left&&t<=s.right)&&(i||n>=s.top&&n<=s.bottom)}P._set("global",{elements:{rectangle:{backgroundColor:he,borderColor:he,borderSkipped:"bottom",borderWidth:0}}});var Oe=K.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=function(e){var t=fe(e),n=t.right-t.left,a=t.bottom-t.top,i=je(e,n/2,a/2);return{outer:{x:t.left,y:t.top,w:n,h:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:a-i.t-i.b}}}(t),a=n.outer,i=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.w,a.h),a.w===i.w&&a.h===i.h||(e.save(),e.beginPath(),e.rect(a.x,a.y,a.w,a.h),e.clip(),e.fillStyle=t.borderColor,e.rect(i.x,i.y,i.w,i.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return ye(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return me(n)?ye(n,e,null):ye(n,null,t)},inXRange:function(e){return ye(this._view,e,null)},inYRange:function(e){return ye(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return me(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return me(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),ve={},xe=re,_e=ce,Ce=ge,ke=Oe;ve.Arc=xe,ve.Line=_e,ve.Point=Ce,ve.Rectangle=ke;var we=B._deprecated,Te=B.valueOrDefault;function Se(e,t,n){var a,i,s=n.barThickness,r=t.stackCount,o=t.pixels[e],l=B.isNullOrUndef(s)?function(e,t){var n,a,i,s,r=e._length;for(i=1,s=t.length;i<s;++i)r=Math.min(r,Math.abs(t[i]-t[i-1]));for(i=0,s=e.getTicks().length;i<s;++i)a=e.getPixelForTick(i),r=i>0?Math.min(r,Math.abs(a-n)):r,n=a;return r}(t.scale,t.pixels):-1;return B.isNullOrUndef(s)?(a=l*n.categoryPercentage,i=n.barPercentage):(a=s*r,i=1),{chunk:a/r,ratio:i,start:o-a/2}}P._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),P._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Ee=ne.extend({dataElementType:ve.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;ne.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,we("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),we("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),we("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),we("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),we("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,a=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,n=a.length;t<n;++t)this.updateElement(a[t],t,e)},updateElement:function(e,t,n){var a=this,i=a.getMeta(),s=a.getDataset(),r=a._resolveDataElementOptions(e,t);e._xScale=a.getScaleForId(i.xAxisID),e._yScale=a.getScaleForId(i.yAxisID),e._datasetIndex=a.index,e._index=t,e._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:s.label,label:a.chart.data.labels[t]},B.isArray(s.data[t])&&(e._model.borderSkipped=null),a._updateElementGeometry(e,t,n,r),e.pivot()},_updateElementGeometry:function(e,t,n,a){var i=this,s=e._model,r=i._getValueScale(),o=r.getBasePixel(),l=r.isHorizontal(),c=i._ruler||i.getRuler(),d=i.calculateBarValuePixels(i.index,t,a),u=i.calculateBarIndexPixels(i.index,t,c,a);s.horizontal=l,s.base=n?o:d.base,s.x=l?n?o:d.head:u.center,s.y=l?u.center:n?o:d.head,s.height=l?u.size:void 0,s.width=l?void 0:u.size},_getStacks:function(e){var t,n,a=this._getIndexScale(),i=a._getMatchingVisibleMetas(this._type),s=a.options.stacked,r=i.length,o=[];for(t=0;t<r&&(n=i[t],(!1===s||-1===o.indexOf(n.stack)||void 0===s&&void 0===n.stack)&&o.push(n.stack),n.index!==e);++t);return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a},getRuler:function(){var e,t,n=this._getIndexScale(),a=[];for(e=0,t=this.getMeta().data.length;e<t;++e)a.push(n.getPixelForValue(null,e,this.index));return{pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(e,t,n){var a,i,s,r,o,l,c,d=this.chart,u=this._getValueScale(),p=u.isHorizontal(),g=d.data.datasets,h=u._getMatchingVisibleMetas(this._type),m=u._parseValue(g[e].data[t]),f=n.minBarLength,b=u.options.stacked,j=this.getMeta().stack,y=void 0===m.start?0:m.max>=0&&m.min>=0?m.min:m.max,O=void 0===m.start?m.end:m.max>=0&&m.min>=0?m.max-m.min:m.min-m.max,v=h.length;if(b||void 0===b&&void 0!==j)for(a=0;a<v&&(i=h[a]).index!==e;++a)i.stack===j&&(s=void 0===(c=u._parseValue(g[i.index].data[t])).start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(m.min<0&&s<0||m.max>=0&&s>0)&&(y+=s));return r=u.getPixelForValue(y),l=(o=u.getPixelForValue(y+O))-r,void 0!==f&&Math.abs(l)<f&&(l=f,o=O>=0&&!p||O<0&&p?r-f:r+f),{size:l,base:r,head:o,center:o+l/2}},calculateBarIndexPixels:function(e,t,n,a){var i="flex"===a.barThickness?function(e,t,n){var a,i=t.pixels,s=i[e],r=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null,l=n.categoryPercentage;return null===r&&(r=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-r),a=s-(s-Math.min(r,o))/2*l,{chunk:Math.abs(o-r)/2*l/t.stackCount,ratio:n.barPercentage,start:a}}(t,n,a):Se(t,n,a),s=this.getStackIndex(e,this.getMeta().stack),r=i.start+i.chunk*s+i.chunk/2,o=Math.min(Te(a.maxBarThickness,1/0),i.chunk*i.ratio);return{base:r-o/2,head:r+o/2,center:r,size:o}},draw:function(){var e=this.chart,t=this._getValueScale(),n=this.getMeta().data,a=this.getDataset(),i=n.length,s=0;for(B.canvas.clipArea(e.ctx,e.chartArea);s<i;++s){var r=t._parseValue(a.data[s]);isNaN(r.min)||isNaN(r.max)||n[s].draw()}B.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var e=this,t=B.extend({},ne.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,a=e._getValueScale().options;return t.barPercentage=Te(n.barPercentage,t.barPercentage),t.barThickness=Te(n.barThickness,t.barThickness),t.categoryPercentage=Te(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=Te(n.maxBarThickness,t.maxBarThickness),t.minBarLength=Te(a.minBarLength,t.minBarLength),t}}),Ie=B.valueOrDefault,Me=B.options.resolve;P._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",a=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+a.r+")"}}}});var De=ne.extend({dataElementType:ve.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta().data;B.each(n,(function(n,a){t.updateElement(n,a,e)}))},updateElement:function(e,t,n){var a=this,i=a.getMeta(),s=e.custom||{},r=a.getScaleForId(i.xAxisID),o=a.getScaleForId(i.yAxisID),l=a._resolveDataElementOptions(e,t),c=a.getDataset().data[t],d=a.index,u=n?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof c?c:NaN,t,d),p=n?o.getBasePixel():o.getPixelForValue(c,t,d);e._xScale=r,e._yScale=o,e._options=l,e._datasetIndex=d,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:s.skip||isNaN(u)||isNaN(p),x:u,y:p},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,a=B.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ie(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ie(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ie(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,a=n.chart,i=n.getDataset(),s=e.custom||{},r=i.data[t]||{},o=ne.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:a,dataIndex:t,dataset:i,datasetIndex:n.index};return n._cachedDataOpts===o&&(o=B.extend({},o)),o.radius=Me([s.radius,r.r,n._config.radius,a.options.elements.point.radius],l,t),o}}),Ae=B.valueOrDefault,Ne=Math.PI,Re=2*Ne,Pe=Ne/2;P._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,a,i=document.createElement("ul"),s=e.data,r=s.datasets,o=s.labels;if(i.setAttribute("class",e.id+"-legend"),r.length)for(t=0,n=r[0].data.length;t<n;++t)(a=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[t],o[t]&&a.appendChild(document.createTextNode(o[t]));return i.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,a){var i=e.getDatasetMeta(0),s=i.controller.getStyle(a);return{text:n,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,hidden:isNaN(t.datasets[0].data[a])||i.data[a].hidden,index:a}})):[]}},onClick:function(e,t){var n,a,i,s=t.index,r=this.chart;for(n=0,a=(r.data.datasets||[]).length;n<a;++n)(i=r.getDatasetMeta(n)).data[s]&&(i.data[s].hidden=!i.data[s].hidden);r.update()}},cutoutPercentage:50,rotation:-Pe,circumference:Re,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],a=": "+t.datasets[e.datasetIndex].data[e.index];return B.isArray(n)?(n=n.slice())[0]+=a:n+=a,n}}}});var Le=ne.extend({dataElementType:ve.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,a,i,s=this,r=s.chart,o=r.chartArea,l=r.options,c=1,d=1,u=0,p=0,g=s.getMeta(),h=g.data,m=l.cutoutPercentage/100||0,f=l.circumference,b=s._getRingWeight(s.index);if(f<Re){var j=l.rotation%Re,y=(j+=j>=Ne?-Re:j<-Ne?Re:0)+f,O=Math.cos(j),v=Math.sin(j),x=Math.cos(y),_=Math.sin(y),C=j<=0&&y>=0||y>=Re,k=j<=Pe&&y>=Pe||y>=Re+Pe,w=j<=-Pe&&y>=-Pe||y>=Ne+Pe,T=j===-Ne||y>=Ne?-1:Math.min(O,O*m,x,x*m),S=w?-1:Math.min(v,v*m,_,_*m),E=C?1:Math.max(O,O*m,x,x*m),I=k?1:Math.max(v,v*m,_,_*m);c=(E-T)/2,d=(I-S)/2,u=-(E+T)/2,p=-(I+S)/2}for(a=0,i=h.length;a<i;++a)h[a]._options=s._resolveDataElementOptions(h[a],a);for(r.borderWidth=s.getMaxBorderWidth(),t=(o.right-o.left-r.borderWidth)/c,n=(o.bottom-o.top-r.borderWidth)/d,r.outerRadius=Math.max(Math.min(t,n)/2,0),r.innerRadius=Math.max(r.outerRadius*m,0),r.radiusLength=(r.outerRadius-r.innerRadius)/(s._getVisibleDatasetWeightTotal()||1),r.offsetX=u*r.outerRadius,r.offsetY=p*r.outerRadius,g.total=s.calculateTotal(),s.outerRadius=r.outerRadius-r.radiusLength*s._getRingWeightOffset(s.index),s.innerRadius=Math.max(s.outerRadius-r.radiusLength*b,0),a=0,i=h.length;a<i;++a)s.updateElement(h[a],a,e)},updateElement:function(e,t,n){var a=this,i=a.chart,s=i.chartArea,r=i.options,o=r.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=r.rotation,u=r.rotation,p=a.getDataset(),g=n&&o.animateRotate||e.hidden?0:a.calculateCircumference(p.data[t])*(r.circumference/Re),h=n&&o.animateScale?0:a.innerRadius,m=n&&o.animateScale?0:a.outerRadius,f=e._options||{};B.extend(e,{_datasetIndex:a.index,_index:t,_model:{backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,borderAlign:f.borderAlign,x:l+i.offsetX,y:c+i.offsetY,startAngle:d,endAngle:u,circumference:g,outerRadius:m,innerRadius:h,label:B.valueAtIndexOrDefault(p.label,t,i.data.labels[t])}});var b=e._model;n&&o.animateRotate||(b.startAngle=0===t?r.rotation:a.getMeta().data[t-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),a=0;return B.each(n.data,(function(n,i){e=t.data[i],isNaN(e)||n.hidden||(a+=Math.abs(e))})),a},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?Re*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,a,i,s,r,o,l,c=0,d=this.chart;if(!e)for(t=0,n=d.data.datasets.length;t<n;++t)if(d.isDatasetVisible(t)){e=(a=d.getDatasetMeta(t)).data,t!==this.index&&(s=a.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)i=e[t],s?(s._configure(),r=s._resolveDataElementOptions(i,t)):r=i._options,"inner"!==r.borderAlign&&(o=r.borderWidth,c=(l=r.hoverBorderWidth)>(c=o>c?o:c)?l:c);return c},setHoverStyle:function(e){var t=e._model,n=e._options,a=B.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Ae(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ae(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ae(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(Ae(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});P._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),P._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Fe=Ee.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ue=B.valueOrDefault,$e=B.options.resolve,Be=B.canvas._isPointInArea;function Ve(e,t){var n=e&&e.options.ticks||{},a=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:a?s:i,end:a?i:s}}function ze(e,t,n){var a=n/2,i=Ve(e,a),s=Ve(t,a);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function He(e){var t,n,a,i;return B.isObject(e)?(t=e.top,n=e.right,a=e.bottom,i=e.left):t=n=a=i=e,{top:t,right:n,bottom:a,left:i}}P._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var qe=ne.extend({datasetElementType:ve.Line,dataElementType:ve.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,a=this,i=a.getMeta(),s=i.dataset,r=i.data||[],o=a.chart.options,l=a._config,c=a._showLine=Ue(l.showLine,o.showLines);for(a._xScale=a.getScaleForId(i.xAxisID),a._yScale=a.getScaleForId(i.yAxisID),c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),s._scale=a._yScale,s._datasetIndex=a.index,s._children=r,s._model=a._resolveDatasetElementOptions(s),s.pivot()),t=0,n=r.length;t<n;++t)a.updateElement(r[t],t,e);for(c&&0!==s._model.tension&&a.updateBezierControlPoints(),t=0,n=r.length;t<n;++t)r[t].pivot()},updateElement:function(e,t,n){var a,i,s=this,r=s.getMeta(),o=e.custom||{},l=s.getDataset(),c=s.index,d=l.data[t],u=s._xScale,p=s._yScale,g=r.dataset._model,h=s._resolveDataElementOptions(e,t);a=u.getPixelForValue("object"==typeof d?d:NaN,t,c),i=n?p.getBasePixel():s.calculatePointY(d,t,c),e._xScale=u,e._yScale=p,e._options=h,e._datasetIndex=c,e._index=t,e._model={x:a,y:i,skip:o.skip||isNaN(a)||isNaN(i),radius:h.radius,pointStyle:h.pointStyle,rotation:h.rotation,backgroundColor:h.backgroundColor,borderColor:h.borderColor,borderWidth:h.borderWidth,tension:Ue(o.tension,g?g.tension:0),steppedLine:!!g&&g.steppedLine,hitRadius:h.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,a=e.custom||{},i=t.chart.options,s=i.elements.line,r=ne.prototype._resolveDatasetElementOptions.apply(t,arguments);return r.spanGaps=Ue(n.spanGaps,i.spanGaps),r.tension=Ue(n.lineTension,s.tension),r.steppedLine=$e([a.steppedLine,n.steppedLine,s.stepped]),r.clip=He(Ue(n.clip,ze(t._xScale,t._yScale,r.borderWidth))),r},calculatePointY:function(e,t,n){var a,i,s,r,o,l,c,d=this.chart,u=this._yScale,p=0,g=0;if(u.options.stacked){for(o=+u.getRightValue(e),c=(l=d._getSortedVisibleDatasetMetas()).length,a=0;a<c&&(s=l[a]).index!==n;++a)i=d.data.datasets[s.index],"line"===s.type&&s.yAxisID===u.id&&((r=+u.getRightValue(i.data[t]))<0?g+=r||0:p+=r||0);return o<0?u.getPixelForValue(g+o):u.getPixelForValue(p+o)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,a,i=this.chart,s=this.getMeta(),r=s.dataset._model,o=i.chartArea,l=s.data||[];function c(e,t,n){return Math.max(Math.min(e,n),t)}if(r.spanGaps&&(l=l.filter((function(e){return!e._model.skip}))),"monotone"===r.cubicInterpolationMode)B.splineCurveMonotone(l);else for(e=0,t=l.length;e<t;++e)n=l[e]._model,a=B.splineCurve(B.previousItem(l,e)._model,n,B.nextItem(l,e)._model,r.tension),n.controlPointPreviousX=a.previous.x,n.controlPointPreviousY=a.previous.y,n.controlPointNextX=a.next.x,n.controlPointNextY=a.next.y;if(i.options.elements.line.capBezierPoints)for(e=0,t=l.length;e<t;++e)n=l[e]._model,Be(n,o)&&(e>0&&Be(l[e-1]._model,o)&&(n.controlPointPreviousX=c(n.controlPointPreviousX,o.left,o.right),n.controlPointPreviousY=c(n.controlPointPreviousY,o.top,o.bottom)),e<l.length-1&&Be(l[e+1]._model,o)&&(n.controlPointNextX=c(n.controlPointNextX,o.left,o.right),n.controlPointNextY=c(n.controlPointNextY,o.top,o.bottom)))},draw:function(){var e,t=this.chart,n=this.getMeta(),a=n.data||[],i=t.chartArea,s=t.canvas,r=0,o=a.length;for(this._showLine&&(e=n.dataset._model.clip,B.canvas.clipArea(t.ctx,{left:!1===e.left?0:i.left-e.left,right:!1===e.right?s.width:i.right+e.right,top:!1===e.top?0:i.top-e.top,bottom:!1===e.bottom?s.height:i.bottom+e.bottom}),n.dataset.draw(),B.canvas.unclipArea(t.ctx));r<o;++r)a[r].draw(i)},setHoverStyle:function(e){var t=e._model,n=e._options,a=B.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ue(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ue(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ue(n.hoverBorderWidth,n.borderWidth),t.radius=Ue(n.hoverRadius,n.radius)}}),Ge=B.options.resolve;P._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,a,i=document.createElement("ul"),s=e.data,r=s.datasets,o=s.labels;if(i.setAttribute("class",e.id+"-legend"),r.length)for(t=0,n=r[0].data.length;t<n;++t)(a=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[t],o[t]&&a.appendChild(document.createTextNode(o[t]));return i.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,a){var i=e.getDatasetMeta(0),s=i.controller.getStyle(a);return{text:n,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,hidden:isNaN(t.datasets[0].data[a])||i.data[a].hidden,index:a}})):[]}},onClick:function(e,t){var n,a,i,s=t.index,r=this.chart;for(n=0,a=(r.data.datasets||[]).length;n<a;++n)(i=r.getDatasetMeta(n)).data[s].hidden=!i.data[s].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var We=ne.extend({dataElementType:ve.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,a,i=this,s=i.getDataset(),r=i.getMeta(),o=i.chart.options.startAngle||0,l=i._starts=[],c=i._angles=[],d=r.data;for(i._updateRadius(),r.count=i.countVisibleElements(),t=0,n=s.data.length;t<n;t++)l[t]=o,a=i._computeAngle(t),c[t]=a,o+=a;for(t=0,n=d.length;t<n;++t)d[t]._options=i._resolveDataElementOptions(d[t],t),i.updateElement(d[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,a=t.options,i=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(i/2,0),t.innerRadius=Math.max(a.cutoutPercentage?t.outerRadius/100*a.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var a=this,i=a.chart,s=a.getDataset(),r=i.options,o=r.animation,l=i.scale,c=i.data.labels,d=l.xCenter,u=l.yCenter,p=r.startAngle,g=e.hidden?0:l.getDistanceFromCenterForValue(s.data[t]),h=a._starts[t],m=h+(e.hidden?0:a._angles[t]),f=o.animateScale?0:l.getDistanceFromCenterForValue(s.data[t]),b=e._options||{};B.extend(e,{_datasetIndex:a.index,_index:t,_scale:l,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:d,y:u,innerRadius:0,outerRadius:n?f:g,startAngle:n&&o.animateRotate?p:h,endAngle:n&&o.animateRotate?p:m,label:B.valueAtIndexOrDefault(c,t,c[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return B.each(t.data,(function(t,a){isNaN(e.data[a])||t.hidden||n++})),n},setHoverStyle:function(e){var t=e._model,n=e._options,a=B.getHoverColor,i=B.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=i(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=i(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=i(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,a=t.getDataset(),i=t.getMeta();if(isNaN(a.data[e])||i.data[e].hidden)return 0;var s={chart:t.chart,dataIndex:e,dataset:a,datasetIndex:t.index};return Ge([t.chart.options.elements.arc.angle,2*Math.PI/n],s,e)}});P._set("pie",B.clone(P.doughnut)),P._set("pie",{cutoutPercentage:0});var Ke=Le,Ye=B.valueOrDefault;P._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Qe=ne.extend({datasetElementType:ve.Line,dataElementType:ve.Point,linkScales:B.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,a=this,i=a.getMeta(),s=i.dataset,r=i.data||[],o=a.chart.scale,l=a._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),s._scale=o,s._datasetIndex=a.index,s._children=r,s._loop=!0,s._model=a._resolveDatasetElementOptions(s),s.pivot(),t=0,n=r.length;t<n;++t)a.updateElement(r[t],t,e);for(a.updateBezierControlPoints(),t=0,n=r.length;t<n;++t)r[t].pivot()},updateElement:function(e,t,n){var a=this,i=e.custom||{},s=a.getDataset(),r=a.chart.scale,o=r.getPointPositionForValue(t,s.data[t]),l=a._resolveDataElementOptions(e,t),c=a.getMeta().dataset._model,d=n?r.xCenter:o.x,u=n?r.yCenter:o.y;e._scale=r,e._options=l,e._datasetIndex=a.index,e._index=t,e._model={x:d,y:u,skip:i.skip||isNaN(d)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ye(i.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,a=ne.prototype._resolveDatasetElementOptions.apply(e,arguments);return a.spanGaps=Ye(t.spanGaps,n.spanGaps),a.tension=Ye(t.lineTension,n.elements.line.tension),a},updateBezierControlPoints:function(){var e,t,n,a,i=this.getMeta(),s=this.chart.chartArea,r=i.data||[];function o(e,t,n){return Math.max(Math.min(e,n),t)}for(i.dataset._model.spanGaps&&(r=r.filter((function(e){return!e._model.skip}))),e=0,t=r.length;e<t;++e)n=r[e]._model,a=B.splineCurve(B.previousItem(r,e,!0)._model,n,B.nextItem(r,e,!0)._model,n.tension),n.controlPointPreviousX=o(a.previous.x,s.left,s.right),n.controlPointPreviousY=o(a.previous.y,s.top,s.bottom),n.controlPointNextX=o(a.next.x,s.left,s.right),n.controlPointNextY=o(a.next.y,s.top,s.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,a=B.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ye(n.hoverBackgroundColor,a(n.backgroundColor)),t.borderColor=Ye(n.hoverBorderColor,a(n.borderColor)),t.borderWidth=Ye(n.hoverBorderWidth,n.borderWidth),t.radius=Ye(n.hoverRadius,n.radius)}});P._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),P._set("global",{datasets:{scatter:{showLine:!1}}});var Je={bar:Ee,bubble:De,doughnut:Le,horizontalBar:Fe,line:qe,polarArea:We,pie:Ke,radar:Qe,scatter:qe};function Xe(e,t){return e.native?{x:e.x,y:e.y}:B.getRelativePosition(e,t)}function Ze(e,t){var n,a,i,s,r,o,l=e._getSortedVisibleDatasetMetas();for(a=0,s=l.length;a<s;++a)for(i=0,r=(n=l[a].data).length;i<r;++i)(o=n[i])._view.skip||t(o)}function et(e,t){var n=[];return Ze(e,(function(e){e.inRange(t.x,t.y)&&n.push(e)})),n}function tt(e,t,n,a){var i=Number.POSITIVE_INFINITY,s=[];return Ze(e,(function(e){if(!n||e.inRange(t.x,t.y)){var r=e.getCenterPoint(),o=a(t,r);o<i?(s=[e],i=o):o===i&&s.push(e)}})),s}function nt(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,a){var i=t?Math.abs(e.x-a.x):0,s=n?Math.abs(e.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}function at(e,t,n){var a=Xe(t,e);n.axis=n.axis||"x";var i=nt(n.axis),s=n.intersect?et(e,a):tt(e,a,!1,i),r=[];return s.length?(e._getSortedVisibleDatasetMetas().forEach((function(e){var t=e.data[s[0]._index];t&&!t._view.skip&&r.push(t)})),r):[]}var it={modes:{single:function(e,t){var n=Xe(t,e),a=[];return Ze(e,(function(e){if(e.inRange(n.x,n.y))return a.push(e),a})),a.slice(0,1)},label:at,index:at,dataset:function(e,t,n){var a=Xe(t,e);n.axis=n.axis||"xy";var i=nt(n.axis),s=n.intersect?et(e,a):tt(e,a,!1,i);return s.length>0&&(s=e.getDatasetMeta(s[0]._datasetIndex).data),s},"x-axis":function(e,t){return at(e,t,{intersect:!1})},point:function(e,t){return et(e,Xe(t,e))},nearest:function(e,t,n){var a=Xe(t,e);n.axis=n.axis||"xy";var i=nt(n.axis);return tt(e,a,n.intersect,i)},x:function(e,t,n){var a=Xe(t,e),i=[],s=!1;return Ze(e,(function(e){e.inXRange(a.x)&&i.push(e),e.inRange(a.x,a.y)&&(s=!0)})),n.intersect&&!s&&(i=[]),i},y:function(e,t,n){var a=Xe(t,e),i=[],s=!1;return Ze(e,(function(e){e.inYRange(a.y)&&i.push(e),e.inRange(a.x,a.y)&&(s=!0)})),n.intersect&&!s&&(i=[]),i}}},st=B.extend;function rt(e,t){return B.where(e,(function(e){return e.pos===t}))}function ot(e,t){return e.sort((function(e,n){var a=t?n:e,i=t?e:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight}))}function lt(e,t,n,a){return Math.max(e[n],t[n])+Math.max(e[a],t[a])}function ct(e,t,n){var a,i,s=n.box,r=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?s.height:s.width,e[n.pos]+=n.size,s.getPadding){var o=s.getPadding();r.top=Math.max(r.top,o.top),r.left=Math.max(r.left,o.left),r.bottom=Math.max(r.bottom,o.bottom),r.right=Math.max(r.right,o.right)}if(a=t.outerWidth-lt(r,e,"left","right"),i=t.outerHeight-lt(r,e,"top","bottom"),a!==e.w||i!==e.h)return e.w=a,e.h=i,n.horizontal?a!==e.w:i!==e.h}function dt(e,t){var n=t.maxPadding;function a(e){var a={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){a[e]=Math.max(t[e],n[e])})),a}return a(e?["left","right"]:["top","bottom"])}function ut(e,t,n){var a,i,s,r,o,l,c=[];for(a=0,i=e.length;a<i;++a)(r=(s=e[a]).box).update(s.width||t.w,s.height||t.h,dt(s.horizontal,t)),ct(t,n,s)&&(l=!0,c.length&&(o=!0)),r.fullWidth||c.push(s);return o&&ut(c,t,n)||l}function pt(e,t,n){var a,i,s,r,o=n.padding,l=t.x,c=t.y;for(a=0,i=e.length;a<i;++a)r=(s=e[a]).box,s.horizontal?(r.left=r.fullWidth?o.left:t.left,r.right=r.fullWidth?n.outerWidth-o.right:t.left+t.w,r.top=c,r.bottom=c+r.height,r.width=r.right-r.left,c=r.bottom):(r.left=l,r.right=l+r.width,r.top=t.top,r.bottom=t.top+t.h,r.height=r.bottom-r.top,l=r.right);t.x=l,t.y=c}P._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var gt,ht={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var a,i=["fullWidth","position","weight"],s=i.length,r=0;r<s;++r)a=i[r],n.hasOwnProperty(a)&&(t[a]=n[a])},update:function(e,t,n){if(e){var a=e.options.layout||{},i=B.options.toPadding(a.padding),s=t-i.width,r=n-i.height,o=function(e){var t=function(e){var t,n,a,i=[];for(t=0,n=(e||[]).length;t<n;++t)a=e[t],i.push({index:t,box:a,pos:a.position,horizontal:a.isHorizontal(),weight:a.weight});return i}(e),n=ot(rt(t,"left"),!0),a=ot(rt(t,"right")),i=ot(rt(t,"top"),!0),s=ot(rt(t,"bottom"));return{leftAndTop:n.concat(i),rightAndBottom:a.concat(s),chartArea:rt(t,"chartArea"),vertical:n.concat(a),horizontal:i.concat(s)}}(e.boxes),l=o.vertical,c=o.horizontal,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,vBoxMaxWidth:s/2/l.length,hBoxMaxHeight:r/2}),u=st({maxPadding:st({},i),w:s,h:r,x:i.left,y:i.top},i);!function(e,t){var n,a,i;for(n=0,a=e.length;n<a;++n)(i=e[n]).width=i.horizontal?i.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,i.height=i.horizontal&&t.hBoxMaxHeight}(l.concat(c),d),ut(l,u,d),ut(c,u,d)&&ut(l,u,d),function(e){var t=e.maxPadding;function n(n){var a=Math.max(t[n]-e[n],0);return e[n]+=a,a}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(u),pt(o.leftAndTop,u,d),u.x+=u.w,u.y+=u.h,pt(o.rightAndBottom,u,d),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},B.each(o.chartArea,(function(t){var n=t.box;st(n,e.chartArea),n.update(u.w,u.h)}))}}},mt=(gt=Object.freeze({__proto__:null,default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&gt.default||gt,ft=["animationstart","webkitAnimationStart"],bt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function jt(e,t){var n=B.getStyle(e,t),a=n&&n.match(/^(\d+)(\.\d+)?px$/);return a?Number(a[1]):void 0}var yt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function Ot(e,t,n){e.addEventListener(t,n,yt)}function vt(e,t,n){e.removeEventListener(t,n,yt)}function xt(e,t,n,a,i){return{type:e,chart:t,native:i||null,x:void 0!==n?n:null,y:void 0!==a?a:null}}function _t(e){var t=document.createElement("div");return t.className=e||"",t}function Ct(e,t,n){var a,i,s,r,o=e.$chartjs||(e.$chartjs={}),l=o.resizer=function(e){var t=_t("chartjs-size-monitor"),n=_t("chartjs-size-monitor-expand"),a=_t("chartjs-size-monitor-shrink");n.appendChild(_t()),a.appendChild(_t()),t.appendChild(n),t.appendChild(a),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,a.scrollLeft=1e6,a.scrollTop=1e6};var i=function(){t._reset(),e()};return Ot(n,"scroll",i.bind(n,"expand")),Ot(a,"scroll",i.bind(a,"shrink")),t}((a=function(){if(o.resizer){var a=n.options.maintainAspectRatio&&e.parentNode,i=a?a.clientWidth:0;t(xt("resize",n)),a&&a.clientWidth<i&&n.canvas&&t(xt("resize",n))}},s=!1,r=[],function(){r=Array.prototype.slice.call(arguments),i=i||this,s||(s=!0,B.requestAnimFrame.call(window,(function(){s=!1,a.apply(i,r)})))}));!function(e,t){var n=e.$chartjs||(e.$chartjs={}),a=n.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};B.each(ft,(function(t){Ot(e,t,a)})),n.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,(function(){if(o.resizer){var t=e.parentNode;t&&t!==l.parentNode&&t.insertBefore(l,t.firstChild),l._reset()}}))}function kt(e){var t=e.$chartjs||{},n=t.resizer;delete t.resizer,function(e){var t=e.$chartjs||{},n=t.renderProxy;n&&(B.each(ft,(function(t){vt(e,t,n)})),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}var wt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function(e,t){var n=e.$chartjs||(e.$chartjs={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(t)),e.appendChild(a)}}(t.host?t:document.head,mt)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),function(e,t){var n=e.style,a=e.getAttribute("height"),i=e.getAttribute("width");if(e.$chartjs={initial:{height:a,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===i||""===i){var s=jt(e,"width");void 0!==s&&(e.width=s)}if(null===a||""===a)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var r=jt(e,"height");void 0!==s&&(e.height=r)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var n=t.$chartjs.initial;["height","width"].forEach((function(e){var a=n[e];B.isNullOrUndef(a)?t.removeAttribute(e):t.setAttribute(e,a)})),B.each(n.style||{},(function(e,n){t.style[n]=e})),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,n){var a=e.canvas;if("resize"!==t){var i=n.$chartjs||(n.$chartjs={});Ot(a,t,(i.proxies||(i.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=bt[e.type]||e.type,a=B.getRelativePosition(e,t);return xt(n,t,a.x,a.y,e)}(t,e))})}else Ct(a,n,e)},removeEventListener:function(e,t,n){var a=e.canvas;if("resize"!==t){var i=((n.$chartjs||{}).proxies||{})[e.id+"_"+t];i&&vt(a,t,i)}else kt(a)}};B.addEvent=Ot,B.removeEvent=vt;var Tt=wt._enabled?wt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},St=B.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Tt);P._set("global",{plugins:{}});var Et={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var a,i,s,r,o,l=this.descriptors(e),c=l.length;for(a=0;a<c;++a)if("function"==typeof(o=(s=(i=l[a]).plugin)[t])&&((r=[e].concat(n||[])).push(i.options),!1===o.apply(s,r)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],a=[],i=e&&e.config||{},s=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach((function(e){if(-1===n.indexOf(e)){var t=e.id,i=s[t];!1!==i&&(!0===i&&(i=B.clone(P.global.plugins[t])),n.push(e),a.push({plugin:e,options:i||{}}))}})),t.descriptors=a,t.id=this._cacheId,a},_invalidate:function(e){delete e.$plugins}},It={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=B.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?B.merge({},[P.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=B.extend(this.defaults[e],t))},addScalesToLayout:function(e){B.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,ht.addBox(e,t)}))}},Mt=B.valueOrDefault,Dt=B.rtl.getRtlAdapter;P._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:B.noop,title:function(e,t){var n="",a=t.labels,i=a?a.length:0;if(e.length>0){var s=e[0];s.label?n=s.label:s.xLabel?n=s.xLabel:i>0&&s.index<i&&(n=a[s.index])}return n},afterTitle:B.noop,beforeBody:B.noop,beforeLabel:B.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),B.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:B.noop,afterBody:B.noop,beforeFooter:B.noop,footer:B.noop,afterFooter:B.noop}}});var At={average:function(e){if(!e.length)return!1;var t,n,a=0,i=0,s=0;for(t=0,n=e.length;t<n;++t){var r=e[t];if(r&&r.hasValue()){var o=r.tooltipPosition();a+=o.x,i+=o.y,++s}}return{x:a/s,y:i/s}},nearest:function(e,t){var n,a,i,s=t.x,r=t.y,o=Number.POSITIVE_INFINITY;for(n=0,a=e.length;n<a;++n){var l=e[n];if(l&&l.hasValue()){var c=l.getCenterPoint(),d=B.distanceBetweenPoints(t,c);d<o&&(o=d,i=l)}}if(i){var u=i.tooltipPosition();s=u.x,r=u.y}return{x:s,y:r}}};function Nt(e,t){return t&&(B.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Rt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Pt(e){var t=P.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Mt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Mt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Mt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Mt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Mt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Mt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Mt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Mt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Mt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Lt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ft(e){return Nt([],Rt(e))}var Ut=K.extend({initialize:function(){this._model=Pt(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,n=t.callbacks,a=n.beforeTitle.apply(e,arguments),i=n.title.apply(e,arguments),s=n.afterTitle.apply(e,arguments),r=[];return r=Nt(r,Rt(a)),r=Nt(r,Rt(i)),r=Nt(r,Rt(s))},getBeforeBody:function(){return Ft(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,a=n._options.callbacks,i=[];return B.each(e,(function(e){var s={before:[],lines:[],after:[]};Nt(s.before,Rt(a.beforeLabel.call(n,e,t))),Nt(s.lines,a.label.call(n,e,t)),Nt(s.after,Rt(a.afterLabel.call(n,e,t))),i.push(s)})),i},getAfterBody:function(){return Ft(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),a=t.footer.apply(e,arguments),i=t.afterFooter.apply(e,arguments),s=[];return s=Nt(s,Rt(n)),s=Nt(s,Rt(a)),s=Nt(s,Rt(i))},update:function(e){var t,n,a,i,s,r,o,l,c,d,u=this,p=u._options,g=u._model,h=u._model=Pt(p),m=u._active,f=u._data,b={xAlign:g.xAlign,yAlign:g.yAlign},j={x:g.x,y:g.y},y={width:g.width,height:g.height},O={x:g.caretX,y:g.caretY};if(m.length){h.opacity=1;var v=[],x=[];O=At[p.position].call(u,m,u._eventPosition);var _=[];for(t=0,n=m.length;t<n;++t)_.push((a=m[t],i=void 0,s=void 0,r=void 0,o=void 0,l=void 0,c=void 0,d=void 0,i=a._xScale,s=a._yScale||a._scale,r=a._index,o=a._datasetIndex,l=a._chart.getDatasetMeta(o).controller,c=l._getIndexScale(),d=l._getValueScale(),{xLabel:i?i.getLabelForIndex(r,o):"",yLabel:s?s.getLabelForIndex(r,o):"",label:c?""+c.getLabelForIndex(r,o):"",value:d?""+d.getLabelForIndex(r,o):"",index:r,datasetIndex:o,x:a._model.x,y:a._model.y}));p.filter&&(_=_.filter((function(e){return p.filter(e,f)}))),p.itemSort&&(_=_.sort((function(e,t){return p.itemSort(e,t,f)}))),B.each(_,(function(e){v.push(p.callbacks.labelColor.call(u,e,u._chart)),x.push(p.callbacks.labelTextColor.call(u,e,u._chart))})),h.title=u.getTitle(_,f),h.beforeBody=u.getBeforeBody(_,f),h.body=u.getBody(_,f),h.afterBody=u.getAfterBody(_,f),h.footer=u.getFooter(_,f),h.x=O.x,h.y=O.y,h.caretPadding=p.caretPadding,h.labelColors=v,h.labelTextColors=x,h.dataPoints=_,y=function(e,t){var n=e._chart.ctx,a=2*t.yPadding,i=0,s=t.body,r=s.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);r+=t.beforeBody.length+t.afterBody.length;var o=t.title.length,l=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,u=t.footerFontSize;a+=o*c,a+=o?(o-1)*t.titleSpacing:0,a+=o?t.titleMarginBottom:0,a+=r*d,a+=r?(r-1)*t.bodySpacing:0,a+=l?t.footerMarginTop:0,a+=l*u,a+=l?(l-1)*t.footerSpacing:0;var p=0,g=function(e){i=Math.max(i,n.measureText(e).width+p)};return n.font=B.fontString(c,t._titleFontStyle,t._titleFontFamily),B.each(t.title,g),n.font=B.fontString(d,t._bodyFontStyle,t._bodyFontFamily),B.each(t.beforeBody.concat(t.afterBody),g),p=t.displayColors?d+2:0,B.each(s,(function(e){B.each(e.before,g),B.each(e.lines,g),B.each(e.after,g)})),p=0,n.font=B.fontString(u,t._footerFontStyle,t._footerFontFamily),B.each(t.footer,g),{width:i+=2*t.xPadding,height:a}}(this,h),j=function(e,t,n,a){var i=e.x,s=e.y,r=e.caretSize,o=e.caretPadding,l=e.cornerRadius,c=n.xAlign,d=n.yAlign,u=r+o,p=l+o;return"right"===c?i-=t.width:"center"===c&&((i-=t.width/2)+t.width>a.width&&(i=a.width-t.width),i<0&&(i=0)),"top"===d?s+=u:s-="bottom"===d?t.height+u:t.height/2,"center"===d?"left"===c?i+=u:"right"===c&&(i-=u):"left"===c?i-=p:"right"===c&&(i+=p),{x:i,y:s}}(h,y,b=function(e,t){var n,a,i,s,r,o=e._model,l=e._chart,c=e._chart.chartArea,d="center",u="center";o.y<t.height?u="top":o.y>l.height-t.height&&(u="bottom");var p=(c.left+c.right)/2,g=(c.top+c.bottom)/2;"center"===u?(n=function(e){return e<=p},a=function(e){return e>p}):(n=function(e){return e<=t.width/2},a=function(e){return e>=l.width-t.width/2}),i=function(e){return e+t.width+o.caretSize+o.caretPadding>l.width},s=function(e){return e-t.width-o.caretSize-o.caretPadding<0},r=function(e){return e<=g?"top":"bottom"},n(o.x)?(d="left",i(o.x)&&(d="center",u=r(o.y))):a(o.x)&&(d="right",s(o.x)&&(d="center",u=r(o.y)));var h=e._options;return{xAlign:h.xAlign?h.xAlign:d,yAlign:h.yAlign?h.yAlign:u}}(this,y),u._chart)}else h.opacity=0;return h.xAlign=b.xAlign,h.yAlign=b.yAlign,h.x=j.x,h.y=j.y,h.width=y.width,h.height=y.height,h.caretX=O.x,h.caretY=O.y,u._model=h,e&&p.custom&&p.custom.call(u,h),u},drawCaret:function(e,t){var n=this._chart.ctx,a=this._view,i=this.getCaretPosition(e,t,a);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(e,t,n){var a,i,s,r,o,l,c=n.caretSize,d=n.cornerRadius,u=n.xAlign,p=n.yAlign,g=e.x,h=e.y,m=t.width,f=t.height;if("center"===p)o=h+f/2,"left"===u?(i=(a=g)-c,s=a,r=o+c,l=o-c):(i=(a=g+m)+c,s=a,r=o-c,l=o+c);else if("left"===u?(a=(i=g+d+c)-c,s=i+c):"right"===u?(a=(i=g+m-d-c)-c,s=i+c):(a=(i=n.caretX)-c,s=i+c),"top"===p)o=(r=h)-c,l=r;else{o=(r=h+f)+c,l=r;var b=s;s=a,a=b}return{x1:a,x2:i,x3:s,y1:r,y2:o,y3:l}},drawTitle:function(e,t,n){var a,i,s,r=t.title,o=r.length;if(o){var l=Dt(t.rtl,t.x,t.width);for(e.x=Lt(t,t._titleAlign),n.textAlign=l.textAlign(t._titleAlign),n.textBaseline="middle",a=t.titleFontSize,i=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=B.fontString(a,t._titleFontStyle,t._titleFontFamily),s=0;s<o;++s)n.fillText(r[s],l.x(e.x),e.y+a/2),e.y+=a+i,s+1===o&&(e.y+=t.titleMarginBottom-i)}},drawBody:function(e,t,n){var a,i,s,r,o,l,c,d,u=t.bodyFontSize,p=t.bodySpacing,g=t._bodyAlign,h=t.body,m=t.displayColors,f=0,b=m?Lt(t,"left"):0,j=Dt(t.rtl,t.x,t.width),y=function(t){n.fillText(t,j.x(e.x+f),e.y+u/2),e.y+=u+p},O=j.textAlign(g);for(n.textAlign=g,n.textBaseline="middle",n.font=B.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.x=Lt(t,O),n.fillStyle=t.bodyFontColor,B.each(t.beforeBody,y),f=m&&"right"!==O?"center"===g?u/2+1:u+2:0,o=0,c=h.length;o<c;++o){for(a=h[o],i=t.labelTextColors[o],s=t.labelColors[o],n.fillStyle=i,B.each(a.before,y),l=0,d=(r=a.lines).length;l<d;++l){if(m){var v=j.x(b);n.fillStyle=t.legendColorBackground,n.fillRect(j.leftForLtr(v,u),e.y,u,u),n.lineWidth=1,n.strokeStyle=s.borderColor,n.strokeRect(j.leftForLtr(v,u),e.y,u,u),n.fillStyle=s.backgroundColor,n.fillRect(j.leftForLtr(j.xPlus(v,1),u-2),e.y+1,u-2,u-2),n.fillStyle=i}y(r[l])}B.each(a.after,y)}f=0,B.each(t.afterBody,y),e.y-=p},drawFooter:function(e,t,n){var a,i,s=t.footer,r=s.length;if(r){var o=Dt(t.rtl,t.x,t.width);for(e.x=Lt(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=o.textAlign(t._footerAlign),n.textBaseline="middle",a=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=B.fontString(a,t._footerFontStyle,t._footerFontFamily),i=0;i<r;++i)n.fillText(s[i],o.x(e.x),e.y+a/2),e.y+=a+t.footerSpacing}},drawBackground:function(e,t,n,a){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var i=t.xAlign,s=t.yAlign,r=e.x,o=e.y,l=a.width,c=a.height,d=t.cornerRadius;n.beginPath(),n.moveTo(r+d,o),"top"===s&&this.drawCaret(e,a),n.lineTo(r+l-d,o),n.quadraticCurveTo(r+l,o,r+l,o+d),"center"===s&&"right"===i&&this.drawCaret(e,a),n.lineTo(r+l,o+c-d),n.quadraticCurveTo(r+l,o+c,r+l-d,o+c),"bottom"===s&&this.drawCaret(e,a),n.lineTo(r+d,o+c),n.quadraticCurveTo(r,o+c,r,o+c-d),"center"===s&&"left"===i&&this.drawCaret(e,a),n.lineTo(r,o+d),n.quadraticCurveTo(r,o,r+d,o),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},a={x:t.x,y:t.y},i=Math.abs(t.opacity<.001)?0:t.opacity,s=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(a,t,e,n),a.y+=t.yPadding,B.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),B.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t,n=this,a=n._options;return n._lastActive=n._lastActive||[],"mouseout"===e.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(e,a.mode,a),a.reverse&&n._active.reverse()),(t=!B.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(a.enabled||a.custom)&&(n._eventPosition={x:e.x,y:e.y},n.update(!0),n.pivot())),t}}),$t=At,Bt=Ut;Bt.positioners=$t;var Vt=B.valueOrDefault;function zt(){return B.merge({},[].slice.call(arguments),{merger:function(e,t,n,a){if("xAxes"===e||"yAxes"===e){var i,s,r,o=n[e].length;for(t[e]||(t[e]=[]),i=0;i<o;++i)r=n[e][i],s=Vt(r.type,"xAxes"===e?"category":"linear"),i>=t[e].length&&t[e].push({}),!t[e][i].type||r.type&&r.type!==t[e][i].type?B.merge(t[e][i],[It.getScaleDefaults(s),r]):B.merge(t[e][i],r)}else B._merger(e,t,n,a)}})}function Ht(){return B.merge({},[].slice.call(arguments),{merger:function(e,t,n,a){var i=t[e]||{},s=n[e];"scales"===e?t[e]=zt(i,s):"scale"===e?t[e]=B.merge(i,[It.getScaleDefaults(s.type),s]):B._merger(e,t,n,a)}})}function qt(e){var t=e.options;B.each(e.scales,(function(t){ht.removeBox(e,t)})),t=Ht(P.global,P[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Gt(e,t,n){var a,i=function(e){return e.id===a};do{a=t+n++}while(B.findIndex(e,i)>=0);return a}function Wt(e){return"top"===e||"bottom"===e}function Kt(e,t){return function(n,a){return n[e]===a[e]?n[t]-a[t]:n[e]-a[e]}}P._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Yt=function(e,t){return this.construct(e,t),this};B.extend(Yt.prototype,{construct:function(e,t){var n=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Ht(P.global,P[e.type],e.options||{}),e}(t);var a=St.acquireContext(e,t),i=a&&a.canvas,s=i&&i.height,r=i&&i.width;n.id=B.uid(),n.ctx=a,n.canvas=i,n.config=t,n.width=r,n.height=s,n.aspectRatio=s?r/s:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Yt.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),a&&i?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Et.notify(e,"beforeInit"),B.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),Et.notify(e,"afterInit"),e},clear:function(){return B.canvas.clear(this),this},stop:function(){return J.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,a=t.canvas,i=n.maintainAspectRatio&&t.aspectRatio||null,s=Math.max(0,Math.floor(B.getMaximumWidth(a))),r=Math.max(0,Math.floor(i?s/i:B.getMaximumHeight(a)));if((t.width!==s||t.height!==r)&&(a.width=t.width=s,a.height=t.height=r,a.style.width=s+"px",a.style.height=r+"px",B.retinaScale(t,n.devicePixelRatio),!e)){var o={width:s,height:r};Et.notify(t,"resize",[o]),n.onResize&&n.onResize(t,o),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;B.each(t.xAxes,(function(e,n){e.id||(e.id=Gt(t.xAxes,"x-axis-",n))})),B.each(t.yAxes,(function(e,n){e.id||(e.id=Gt(t.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},a=[],i=Object.keys(n).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(a=a.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&a.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),B.each(a,(function(t){var a=t.options,s=a.id,r=Vt(a.type,t.dtype);Wt(a.position)!==Wt(t.dposition)&&(a.position=t.dposition),i[s]=!0;var o=null;if(s in n&&n[s].type===r)(o=n[s]).options=a,o.ctx=e.ctx,o.chart=e;else{var l=It.getScaleConstructor(r);if(!l)return;o=new l({id:s,type:r,options:a,ctx:e.ctx,chart:e}),n[o.id]=o}o.mergeTicksOptions(),t.isDefault&&(e.scale=o)})),B.each(i,(function(e,t){e||delete n[t]})),e.scales=n,It.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,a=[],i=n.data.datasets;for(e=0,t=i.length;e<t;e++){var s=i[e],r=n.getDatasetMeta(e),o=s.type||n.config.type;if(r.type&&r.type!==o&&(n.destroyDatasetMeta(e),r=n.getDatasetMeta(e)),r.type=o,r.order=s.order||0,r.index=e,r.controller)r.controller.updateIndex(e),r.controller.linkScales();else{var l=Je[r.type];if(void 0===l)throw new Error('"'+r.type+'" is not a chart type.');r.controller=new l(n,e),a.push(r.controller)}}return a},resetElements:function(){var e=this;B.each(e.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,a=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),qt(a),Et._invalidate(a),!1!==Et.notify(a,"beforeUpdate")){a.tooltip._data=a.data;var i=a.buildOrUpdateControllers();for(t=0,n=a.data.datasets.length;t<n;t++)a.getDatasetMeta(t).controller.buildOrUpdateElements();a.updateLayout(),a.options.animation&&a.options.animation.duration&&B.each(i,(function(e){e.reset()})),a.updateDatasets(),a.tooltip.initialize(),a.lastActive=[],Et.notify(a,"afterUpdate"),a._layers.sort(Kt("z","_idx")),a._bufferedRender?a._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:a.render(e)}},updateLayout:function(){var e=this;!1!==Et.notify(e,"beforeLayout")&&(ht.update(this,this.width,this.height),e._layers=[],B.each(e.boxes,(function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())}),e),e._layers.forEach((function(e,t){e._idx=t})),Et.notify(e,"afterScaleUpdate"),Et.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==Et.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Et.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),n={meta:t,index:e};!1!==Et.notify(this,"beforeDatasetUpdate",[n])&&(t.controller._update(),Et.notify(this,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,a=Vt(e.duration,n&&n.duration),i=e.lazy;if(!1!==Et.notify(t,"beforeRender")){var s=function(e){Et.notify(t,"afterRender"),B.callback(n&&n.onComplete,[e],t)};if(n&&a){var r=new Q({numSteps:a/16.66,easing:e.easing||n.easing,render:function(e,t){var n=B.easing.effects[t.easing],a=t.currentStep,i=a/t.numSteps;e.draw(n(i),i,a)},onAnimationProgress:n.onProgress,onAnimationComplete:s});J.addAnimation(t,r,a,i)}else t.draw(),s(new Q({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,a=this;if(a.clear(),B.isNullOrUndef(e)&&(e=1),a.transition(e),!(a.width<=0||a.height<=0)&&!1!==Et.notify(a,"beforeDraw",[e])){for(n=a._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(a.chartArea);for(a.drawDatasets(e);t<n.length;++t)n[t].draw(a.chartArea);a._drawTooltip(e),Et.notify(a,"afterDraw",[e])}},transition:function(e){for(var t=0,n=(this.data.datasets||[]).length;t<n;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,a=[];for(t=0,n=(this.data.datasets||[]).length;t<n;++t)e&&!this.isDatasetVisible(t)||a.push(this.getDatasetMeta(t));return a.sort(Kt("order","index")),a},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n;if(!1!==Et.notify(this,"beforeDatasetsDraw",[e])){for(n=(t=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(t[n],e);Et.notify(this,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n={meta:e,index:e.index,easingValue:t};!1!==Et.notify(this,"beforeDatasetDraw",[n])&&(e.controller.draw(t),Et.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,n={tooltip:t,easingValue:e};!1!==Et.notify(this,"beforeTooltipDraw",[n])&&(t.draw(),Et.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return it.modes.single(this,e)},getElementsAtEvent:function(e){return it.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return it.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var a=it.modes[t];return"function"==typeof a?a(this,e,n):[]},getDatasetAtEvent:function(e){return it.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var n=t._meta[this.id];return n||(n=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t.order||0,index:e}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],a=n._meta&&n._meta[t];a&&(a.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,a=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);a&&(n.unbindEvents(),B.canvas.clear(n),St.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Et.notify(n,"destroy"),delete Yt.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Bt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};B.each(e.options.events,(function(a){St.addEventListener(e,a,n),t[a]=n})),e.options.responsive&&(n=function(){e.resize()},St.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,B.each(t,(function(t,n){St.removeEventListener(e,n,t)})))},updateHoverStyle:function(e,t,n){var a,i,s,r=n?"set":"remove";for(i=0,s=e.length;i<s;++i)(a=e[i])&&this.getDatasetMeta(a._datasetIndex).controller[r+"HoverStyle"](a);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+r+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==Et.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var a=t.handleEvent(e);n&&(a=n._start?n.handleEvent(e):a|n.handleEvent(e)),Et.notify(t,"afterEvent",[e]);var i=t._bufferedRequest;return i?t.render(i):a&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,a=n.options||{},i=a.hover;return n.lastActive=n.lastActive||[],"mouseout"===e.type?n.active=[]:n.active=n.getElementsAtEventForMode(e,i.mode,i),B.callback(a.onHover||a.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||a.onClick&&a.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,i.mode,!1),n.active.length&&i.mode&&n.updateHoverStyle(n.active,i.mode,!0),t=!B.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),Yt.instances={};var Qt=Yt;function Jt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Xt(e){this.options=e||{}}Yt.Controller=Yt,Yt.types={},B.configMerge=Ht,B.scaleMerge=zt,B.extend(Xt.prototype,{formats:Jt,parse:Jt,format:Jt,add:Jt,diff:Jt,startOf:Jt,endOf:Jt,_create:function(e){return e}}),Xt.override=function(e){B.extend(Xt.prototype,e)};var Zt={_date:Xt},en={formatters:{values:function(e){return B.isArray(e)?e:""+e},linear:function(e,t,n){var a=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var i=B.log10(Math.abs(a)),s="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var r=B.log10(Math.abs(e)),o=Math.floor(r)-Math.floor(i);o=Math.max(Math.min(o,20),0),s=e.toExponential(o)}else{var l=-1*Math.floor(i);l=Math.max(Math.min(l,20),0),s=e.toFixed(l)}else s="0";return s},logarithmic:function(e,t,n){var a=e/Math.pow(10,Math.floor(B.log10(e)));return 0===e?"0":1===a||2===a||5===a||0===t||t===n.length-1?e.toExponential():""}}},tn=B.isArray,nn=B.isNullOrUndef,an=B.valueOrDefault,sn=B.valueAtIndexOrDefault;function rn(e,t,n){var a,i=e.getTicks().length,s=Math.min(t,i-1),r=e.getPixelForTick(s),o=e._startPixel,l=e._endPixel;if(!(n&&(a=1===i?Math.max(r-o,l-r):0===t?(e.getPixelForTick(1)-r)/2:(r-e.getPixelForTick(s-1))/2,(r+=s<t?a:-a)<o-1e-6||r>l+1e-6)))return r}function on(e,t,n,a){var i,s,r,o,l,c,d,u,p,g,h,m,f,b=n.length,j=[],y=[],O=[];for(i=0;i<b;++i){if(o=n[i].label,l=n[i].major?t.major:t.minor,e.font=c=l.string,d=a[c]=a[c]||{data:{},gc:[]},u=l.lineHeight,p=g=0,nn(o)||tn(o)){if(tn(o))for(s=0,r=o.length;s<r;++s)h=o[s],nn(h)||tn(h)||(p=B.measureText(e,d.data,d.gc,p,h),g+=u)}else p=B.measureText(e,d.data,d.gc,p,o),g=u;j.push(p),y.push(g),O.push(u/2)}function v(e){return{width:j[e]||0,height:y[e]||0,offset:O[e]||0}}return function(e,t){B.each(e,(function(e){var n,a=e.gc,i=a.length/2;if(i>t){for(n=0;n<i;++n)delete e.data[a[n]];a.splice(0,i)}}))}(a,b),m=j.indexOf(Math.max.apply(null,j)),f=y.indexOf(Math.max.apply(null,y)),{first:v(0),last:v(b-1),widest:v(m),highest:v(f)}}function ln(e){return e.drawTicks?e.tickMarkLength:0}function cn(e){var t,n;return e.display?(t=B.options._parseFont(e),n=B.options.toPadding(e.padding),t.lineHeight+n.height):0}function dn(e,t){return B.extend(B.options._parseFont({fontFamily:an(t.fontFamily,e.fontFamily),fontSize:an(t.fontSize,e.fontSize),fontStyle:an(t.fontStyle,e.fontStyle),lineHeight:an(t.lineHeight,e.lineHeight)}),{color:B.options.resolve([t.fontColor,e.fontColor,P.global.defaultFontColor])})}function un(e){var t=dn(e,e.minor);return{minor:t,major:e.major.enabled?dn(e,e.major):t}}function pn(e){var t,n,a,i=[];for(n=0,a=e.length;n<a;++n)void 0!==(t=e[n])._index&&i.push(t);return i}function gn(e,t,n,a){var i,s,r,o,l=an(n,0),c=Math.min(an(a,e.length),e.length),d=0;for(t=Math.ceil(t),a&&(t=(i=a-n)/Math.floor(i/t)),o=l;o<0;)d++,o=Math.round(l+d*t);for(s=Math.max(l,0);s<c;s++)r=e[s],s===o?(r._index=s,d++,o=Math.round(l+d*t)):delete r.label}P._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:en.formatters.values,minor:{},major:{}}});var hn=K.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){B.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var a,i,s,r,o,l=this,c=l.options.ticks,d=c.sampleSize;if(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=B.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),r=l.buildTicks()||[],(!(r=l.afterBuildTicks(r)||r)||!r.length)&&l.ticks)for(r=[],a=0,i=l.ticks.length;a<i;++a)r.push({value:l.ticks[a],major:!1});return l._ticks=r,o=d<r.length,s=l._convertTicksToLabels(o?function(e,t){for(var n=[],a=e.length/t,i=0,s=e.length;i<s;i+=a)n.push(e[Math.floor(i)]);return n}(r,d):r),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=c.display&&(c.autoSkip||"auto"===c.source)?l._autoSkip(r):r,o&&(s=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=s,l.afterUpdate(),l.minSize},_configure:function(){var e,t,n=this,a=n.options.ticks.reverse;n.isHorizontal()?(e=n.left,t=n.right):(e=n.top,t=n.bottom,a=!a),n._startPixel=e,n._endPixel=t,n._reversePixels=a,n._length=t-e},afterUpdate:function(){B.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){B.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){B.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){B.callback(this.options.beforeDataLimits,[this])},determineDataLimits:B.noop,afterDataLimits:function(){B.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){B.callback(this.options.beforeBuildTicks,[this])},buildTicks:B.noop,afterBuildTicks:function(e){var t=this;return tn(e)&&e.length?B.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=B.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){B.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){B.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){B.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,n,a,i,s,r,o=this,l=o.options,c=l.ticks,d=o.getTicks().length,u=c.minRotation||0,p=c.maxRotation,g=u;!o._isVisible()||!c.display||u>=p||d<=1||!o.isHorizontal()?o.labelRotation=u:(t=(e=o._getLabelSizes()).widest.width,n=e.highest.height-e.highest.offset,a=Math.min(o.maxWidth,o.chart.width-t),t+6>(i=l.offset?o.maxWidth/d:a/(d-1))&&(i=a/(d-(l.offset?.5:1)),s=o.maxHeight-ln(l.gridLines)-c.padding-cn(l.scaleLabel),r=Math.sqrt(t*t+n*n),g=B.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/i,1)),Math.asin(Math.min(s/r,1))-Math.asin(n/r))),g=Math.max(u,Math.min(p,g))),o.labelRotation=g)},afterCalculateTickRotation:function(){B.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){B.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,a=e.options,i=a.ticks,s=a.scaleLabel,r=a.gridLines,o=e._isVisible(),l="bottom"===a.position,c=e.isHorizontal();if(c?t.width=e.maxWidth:o&&(t.width=ln(r)+cn(s)),c?o&&(t.height=ln(r)+cn(s)):t.height=e.maxHeight,i.display&&o){var d=un(i),u=e._getLabelSizes(),p=u.first,g=u.last,h=u.widest,m=u.highest,f=.4*d.minor.lineHeight,b=i.padding;if(c){var j=0!==e.labelRotation,y=B.toRadians(e.labelRotation),O=Math.cos(y),v=Math.sin(y),x=v*h.width+O*(m.height-(j?m.offset:0))+(j?0:f);t.height=Math.min(e.maxHeight,t.height+x+b);var _,C,k=e.getPixelForTick(0)-e.left,w=e.right-e.getPixelForTick(e.getTicks().length-1);j?(_=l?O*p.width+v*p.offset:v*(p.height-p.offset),C=l?v*(g.height-g.offset):O*g.width+v*g.offset):(_=p.width/2,C=g.width/2),e.paddingLeft=Math.max((_-k)*e.width/(e.width-k),0)+3,e.paddingRight=Math.max((C-w)*e.width/(e.width-w),0)+3}else{var T=i.mirror?0:h.width+b+f;t.width=Math.min(e.maxWidth,t.width+T),e.paddingTop=p.height/2,e.paddingBottom=g.height/2}}e.handleMargins(),c?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){B.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(nn(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,n,a,i=this;for(i.ticks=e.map((function(e){return e.value})),i.beforeTickToLabelConversion(),t=i.convertTicksToLabels(e)||i.ticks,i.afterTickToLabelConversion(),n=0,a=e.length;n<a;++n)e[n].label=t[n];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=on(e.ctx,un(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,a,i;return tn(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),a=Math.min(t,n),i=Math.max(t,n)):(t=void 0,n=e=+this.getRightValue(e),a=e,i=e),{min:a,max:i,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:B.noop,getPixelForValue:B.noop,getValueForPixel:B.noop,getPixelForTick:function(e){var t=this.options.offset,n=this._ticks.length,a=1/Math.max(n-(t?0:1),1);return e<0||e>n-1?null:this.getPixelForDecimal(e*a+(t?a/2:0))},getPixelForDecimal:function(e){return this._reversePixels&&(e=1-e),this._startPixel+e*this._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,n,a,i,s=this.options.ticks,r=this._length,o=s.maxTicksLimit||r/this._tickSize()+1,l=s.major.enabled?function(e){var t,n,a=[];for(t=0,n=e.length;t<n;t++)e[t].major&&a.push(t);return a}(e):[],c=l.length,d=l[0],u=l[c-1];if(c>o)return function(e,t,n){var a,i,s=0,r=t[0];for(n=Math.ceil(n),a=0;a<e.length;a++)i=e[a],a===r?(i._index=a,r=t[++s*n]):delete i.label}(e,l,c/o),pn(e);if(a=function(e,t,n,a){var i,s,r,o,l=function(e){var t,n,a=e.length;if(a<2)return!1;for(n=e[0],t=1;t<a;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),c=(t.length-1)/a;if(!l)return Math.max(c,1);for(r=0,o=(i=B.math._factorize(l)).length-1;r<o;r++)if((s=i[r])>c)return s;return Math.max(c,1)}(l,e,0,o),c>0){for(t=0,n=c-1;t<n;t++)gn(e,a,l[t],l[t+1]);return i=c>1?(u-d)/(c-1):null,gn(e,a,B.isNullOrUndef(i)?0:d-i,d),gn(e,a,u,B.isNullOrUndef(i)?e.length:u+i),pn(e)}return gn(e,a),pn(e)},_tickSize:function(){var e=this.options.ticks,t=B.toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,r=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>r*a?r/n:o/a:o*a<r*n?o/n:r/a},_isVisible:function(){var e,t,n,a=this.chart,i=this.options.display;if("auto"!==i)return!!i;for(e=0,t=a.data.datasets.length;e<t;++e)if(a.isDatasetVisible(e)&&((n=a.getDatasetMeta(e)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(e){var t,n,a,i,s,r,o,l,c,d,u,p,g,h,m,f,b,j=this,y=j.chart,O=j.options,v=O.gridLines,x=O.position,_=v.offsetGridLines,C=j.isHorizontal(),k=j._ticksToDraw,w=k.length+(_?1:0),T=ln(v),S=[],E=v.drawBorder?sn(v.lineWidth,0,0):0,I=E/2,M=B._alignPixel,D=function(e){return M(y,e,E)};for("top"===x?(t=D(j.bottom),o=j.bottom-T,c=t-I,u=D(e.top)+I,g=e.bottom):"bottom"===x?(t=D(j.top),u=e.top,g=D(e.bottom)-I,o=t+I,c=j.top+T):"left"===x?(t=D(j.right),r=j.right-T,l=t-I,d=D(e.left)+I,p=e.right):(t=D(j.left),d=e.left,p=D(e.right)-I,r=t+I,l=j.left+T),n=0;n<w;++n)a=k[n]||{},nn(a.label)&&n<k.length||(n===j.zeroLineIndex&&O.offset===_?(h=v.zeroLineWidth,m=v.zeroLineColor,f=v.zeroLineBorderDash||[],b=v.zeroLineBorderDashOffset||0):(h=sn(v.lineWidth,n,1),m=sn(v.color,n,"rgba(0,0,0,0.1)"),f=v.borderDash||[],b=v.borderDashOffset||0),void 0!==(i=rn(j,a._index||n,_))&&(s=M(y,i,h),C?r=l=d=p=s:o=c=u=g=s,S.push({tx1:r,ty1:o,tx2:l,ty2:c,x1:d,y1:u,x2:p,y2:g,width:h,color:m,borderDash:f,borderDashOffset:b})));return S.ticksLength=w,S.borderValue=t,S},_computeLabelItems:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p=this,g=p.options,h=g.ticks,m=g.position,f=h.mirror,b=p.isHorizontal(),j=p._ticksToDraw,y=un(h),O=h.padding,v=ln(g.gridLines),x=-B.toRadians(p.labelRotation),_=[];for("top"===m?(s=p.bottom-v-O,r=x?"left":"center"):"bottom"===m?(s=p.top+v+O,r=x?"right":"center"):"left"===m?(i=p.right-(f?0:v)-O,r=f?"left":"right"):(i=p.left+(f?0:v)+O,r=f?"right":"left"),e=0,t=j.length;e<t;++e)a=(n=j[e]).label,nn(a)||(o=p.getPixelForTick(n._index||e)+h.labelOffset,c=(l=n.major?y.major:y.minor).lineHeight,d=tn(a)?a.length:1,b?(i=o,u="top"===m?((x?1:.5)-d)*c:(x?0:.5)*c):(s=o,u=(1-d)*c/2),_.push({x:i,y:s,rotation:x,label:a,font:l,textOffset:u,textAlign:r}));return _},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var a,i,s,r,o,l=t.ctx,c=t.chart,d=B._alignPixel,u=n.drawBorder?sn(n.lineWidth,0,0):0,p=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(s=0,r=p.length;s<r;++s)a=(o=p[s]).width,i=o.color,a&&i&&(l.save(),l.lineWidth=a,l.strokeStyle=i,l.setLineDash&&(l.setLineDash(o.borderDash),l.lineDashOffset=o.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(o.tx1,o.ty1),l.lineTo(o.tx2,o.ty2)),n.drawOnChartArea&&(l.moveTo(o.x1,o.y1),l.lineTo(o.x2,o.y2)),l.stroke(),l.restore());if(u){var g,h,m,f,b=u,j=sn(n.lineWidth,p.ticksLength-1,1),y=p.borderValue;t.isHorizontal()?(g=d(c,t.left,b)-b/2,h=d(c,t.right,j)+j/2,m=f=y):(m=d(c,t.top,b)-b/2,f=d(c,t.bottom,j)+j/2,g=h=y),l.lineWidth=u,l.strokeStyle=sn(n.color,0),l.beginPath(),l.moveTo(g,m),l.lineTo(h,f),l.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,n,a,i,s,r,o,l,c=e.ctx,d=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,a=d.length;t<a;++t){if(r=(s=d[t]).font,c.save(),c.translate(s.x,s.y),c.rotate(s.rotation),c.font=r.string,c.fillStyle=r.color,c.textBaseline="middle",c.textAlign=s.textAlign,o=s.label,l=s.textOffset,tn(o))for(n=0,i=o.length;n<i;++n)c.fillText(""+o[n],0,l),l+=r.lineHeight;else c.fillText(o,0,l);c.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,a=n.scaleLabel;if(a.display){var i,s,r=an(a.fontColor,P.global.defaultFontColor),o=B.options._parseFont(a),l=B.options.toPadding(a.padding),c=o.lineHeight/2,d=n.position,u=0;if(e.isHorizontal())i=e.left+e.width/2,s="bottom"===d?e.bottom-c-l.bottom:e.top+c+l.top;else{var p="left"===d;i=p?e.left+c+l.top:e.right-c-l.top,s=e.top+e.height/2,u=p?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(i,s),t.rotate(u),t.textAlign="center",t.textBaseline="middle",t.fillStyle=r,t.font=o.string,t.fillText(a.labelString,0,0),t.restore()}},draw:function(e){this._isVisible()&&(this._drawGrid(e),this._drawTitle(),this._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,a=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==a&&e.draw===e._draw?[{z:a,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter((function(a){return(!e||a.type===e)&&(n?a.xAxisID===t.id:a.yAxisID===t.id)}))}});hn.prototype._draw=hn.prototype.draw;var mn=hn,fn=B.isNullOrUndef,bn=mn.extend({determineDataLimits:function(){var e,t=this,n=t._getLabels(),a=t.options.ticks,i=a.min,s=a.max,r=0,o=n.length-1;void 0!==i&&(e=n.indexOf(i))>=0&&(r=e),void 0!==s&&(e=n.indexOf(s))>=0&&(o=e),t.minIndex=r,t.maxIndex=o,t.min=n[r],t.max=n[o]},buildTicks:function(){var e=this._getLabels(),t=this.minIndex,n=this.maxIndex;this.ticks=0===t&&n===e.length-1?e:e.slice(t,n+1)},getLabelForIndex:function(e,t){var n=this.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[t].data[e]):this._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;mn.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var a,i,s,r=this;return fn(t)||fn(n)||(e=r.chart.data.datasets[n].data[t]),fn(e)||(a=r.isHorizontal()?e.x:e.y),(void 0!==a||void 0!==e&&isNaN(t))&&(i=r._getLabels(),e=B.valueOrDefault(a,e),t=-1!==(s=i.indexOf(e))?s:t,isNaN(t)&&(t=e)),r.getPixelForDecimal((t-r._startValue)/r._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange);return Math.min(Math.max(t,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),jn={position:"bottom"};bn._defaults=jn;var yn=B.noop,On=B.isNullOrUndef,vn=mn.extend({getRightValue:function(e){return"string"==typeof e?+e:mn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=B.sign(e.min),a=B.sign(e.max);n<0&&a<0?e.max=0:n>0&&a>0&&(e.min=0)}var i=void 0!==t.min||void 0!==t.suggestedMin,s=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),i!==s&&e.min>=e.max&&(i?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,n=t.stepSize,a=t.maxTicksLimit;return n?e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(e=this._computeTickLimit(),a=a||11),a&&(e=Math.min(a,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:yn,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),a={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,precision:t.precision,stepSize:B.valueOrDefault(t.fixedStepSize,t.stepSize)},i=e.ticks=function(e,t){var n,a,i,s,r=[],o=e.stepSize,l=o||1,c=e.maxTicks-1,d=e.min,u=e.max,p=e.precision,g=t.min,h=t.max,m=B.niceNum((h-g)/c/l)*l;if(m<1e-14&&On(d)&&On(u))return[g,h];(s=Math.ceil(h/m)-Math.floor(g/m))>c&&(m=B.niceNum(s*m/c/l)*l),o||On(p)?n=Math.pow(10,B._decimalPlaces(m)):(n=Math.pow(10,p),m=Math.ceil(m*n)/n),a=Math.floor(g/m)*m,i=Math.ceil(h/m)*m,o&&(!On(d)&&B.almostWhole(d/m,m/1e3)&&(a=d),!On(u)&&B.almostWhole(u/m,m/1e3)&&(i=u)),s=(i-a)/m,s=B.almostEquals(s,Math.round(s),m/1e3)?Math.round(s):Math.ceil(s),a=Math.round(a*n)/n,i=Math.round(i*n)/n,r.push(On(d)?a:d);for(var f=1;f<s;++f)r.push(Math.round((a+f*m)*n)/n);return r.push(On(u)?i:u),r}(a,e);e.handleDirectionalChanges(),e.max=B.max(i),e.min=B.min(i),t.reverse?(i.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),mn.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,n=t.getTicks(),a=t.min,i=t.max;mn.prototype._configure.call(t),t.options.offset&&n.length&&(a-=e=(i-a)/Math.max(n.length-1,1)/2,i+=e),t._startValue=a,t._endValue=i,t._valueRange=i-a}}),xn={position:"left",ticks:{callback:en.formatters.linear}};function _n(e,t,n,a){var i,s,r=e.options,o=function(e,t,n){var a=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[a]&&(e[a]={pos:[],neg:[]}),e[a]}(t,r.stacked,n),l=o.pos,c=o.neg,d=a.length;for(i=0;i<d;++i)s=e._parseValue(a[i]),isNaN(s.min)||isNaN(s.max)||n.data[i].hidden||(l[i]=l[i]||0,c[i]=c[i]||0,r.relativePoints?l[i]=100:s.min<0||s.max<0?c[i]+=s.min:l[i]+=s.max)}function Cn(e,t,n){var a,i,s=n.length;for(a=0;a<s;++a)i=e._parseValue(n[a]),isNaN(i.min)||isNaN(i.max)||t.data[a].hidden||(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}var kn=vn.extend({determineDataLimits:function(){var e,t,n,a,i=this,s=i.options,r=i.chart.data.datasets,o=i._getMatchingVisibleMetas(),l=s.stacked,c={},d=o.length;if(i.min=Number.POSITIVE_INFINITY,i.max=Number.NEGATIVE_INFINITY,void 0===l)for(e=0;!l&&e<d;++e)l=void 0!==(t=o[e]).stack;for(e=0;e<d;++e)n=r[(t=o[e]).index].data,l?_n(i,c,t,n):Cn(i,t,n);B.each(c,(function(e){a=e.pos.concat(e.neg),i.min=Math.min(i.min,B.min(a)),i.max=Math.max(i.max,B.max(a))})),i.min=B.isFinite(i.min)&&!isNaN(i.min)?i.min:0,i.max=B.isFinite(i.max)&&!isNaN(i.max)?i.max:1,i.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=B.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){return this.getPixelForDecimal((+this.getRightValue(e)-this._startValue)/this._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),wn=xn;kn._defaults=wn;var Tn=B.valueOrDefault,Sn=B.math.log10,En={position:"left",ticks:{callback:en.formatters.logarithmic}};function In(e,t){return B.isFinite(e)&&e>=0?e:t}var Mn=mn.extend({determineDataLimits:function(){var e,t,n,a,i,s,r=this,o=r.options,l=r.chart,c=l.data.datasets,d=r.isHorizontal();function u(e){return d?e.xAxisID===r.id:e.yAxisID===r.id}r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,r.minNotZero=Number.POSITIVE_INFINITY;var p=o.stacked;if(void 0===p)for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&u(t)&&void 0!==t.stack){p=!0;break}if(o.stacked||p){var g={};for(e=0;e<c.length;e++){var h=[(t=l.getDatasetMeta(e)).type,void 0===o.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(l.isDatasetVisible(e)&&u(t))for(void 0===g[h]&&(g[h]=[]),i=0,s=(a=c[e].data).length;i<s;i++){var m=g[h];n=r._parseValue(a[i]),isNaN(n.min)||isNaN(n.max)||t.data[i].hidden||n.min<0||n.max<0||(m[i]=m[i]||0,m[i]+=n.max)}}B.each(g,(function(e){if(e.length>0){var t=B.min(e),n=B.max(e);r.min=Math.min(r.min,t),r.max=Math.max(r.max,n)}}))}else for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&u(t))for(i=0,s=(a=c[e].data).length;i<s;i++)n=r._parseValue(a[i]),isNaN(n.min)||isNaN(n.max)||t.data[i].hidden||n.min<0||n.max<0||(r.min=Math.min(n.min,r.min),r.max=Math.max(n.max,r.max),0!==n.min&&(r.minNotZero=Math.min(n.min,r.minNotZero)));r.min=B.isFinite(r.min)?r.min:null,r.max=B.isFinite(r.max)?r.max:null,r.minNotZero=B.isFinite(r.minNotZero)?r.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=In(t.min,e.min),e.max=In(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(Sn(e.min))-1),e.max=Math.pow(10,Math.floor(Sn(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(Sn(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(Sn(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(Sn(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),a={min:In(t.min),max:In(t.max)},i=e.ticks=function(e,t){var n,a,i=[],s=Tn(e.min,Math.pow(10,Math.floor(Sn(t.min)))),r=Math.floor(Sn(t.max)),o=Math.ceil(t.max/Math.pow(10,r));0===s?(n=Math.floor(Sn(t.minNotZero)),a=Math.floor(t.minNotZero/Math.pow(10,n)),i.push(s),s=a*Math.pow(10,n)):(n=Math.floor(Sn(s)),a=Math.floor(s/Math.pow(10,n)));var l=n<0?Math.pow(10,Math.abs(n)):1;do{i.push(s),10==++a&&(a=1,l=++n>=0?1:l),s=Math.round(a*Math.pow(10,n)*l)/l}while(n<r||n===r&&a<o);var c=Tn(e.max,s);return i.push(c),i}(a,e);e.max=B.max(i),e.min=B.min(i),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&i.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),mn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(Sn(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;mn.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=Tn(e.options.ticks.fontSize,P.global.defaultFontSize)/e._length),e._startValue=Sn(t),e._valueOffset=n,e._valueRange=(Sn(e.max)-Sn(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(n=(Sn(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}}),Dn=En;Mn._defaults=Dn;var An=B.valueOrDefault,Nn=B.valueAtIndexOrDefault,Rn=B.options.resolve,Pn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:en.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Ln(e){var t=e.ticks;return t.display&&e.display?An(t.fontSize,P.global.defaultFontSize)+2*t.backdropPaddingY:0}function Fn(e,t,n,a,i){return e===a||e===i?{start:t-n/2,end:t+n/2}:e<a||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function Un(e){return 0===e||180===e?"center":e<180?"left":"right"}function $n(e,t,n,a){var i,s,r=n.y+a/2;if(B.isArray(t))for(i=0,s=t.length;i<s;++i)e.fillText(t[i],n.x,r),r+=a;else e.fillText(t,n.x,r)}function Bn(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function Vn(e){return B.isNumber(e)?e:0}var zn=vn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Ln(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;B.each(t.data.datasets,(function(i,s){if(t.isDatasetVisible(s)){var r=t.getDatasetMeta(s);B.each(i.data,(function(t,i){var s=+e.getRightValue(t);isNaN(s)||r.data[i].hidden||(n=Math.min(s,n),a=Math.max(s,a))}))}})),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=a===Number.NEGATIVE_INFINITY?0:a,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Ln(this.options))},convertTicksToLabels:function(){var e=this;vn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map((function(){var t=B.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""}))},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,n,a,i=B.options._parseFont(e.options.pointLabels),s={l:0,r:e.width,t:0,b:e.height-e.paddingTop},r={};e.ctx.font=i.string,e._pointLabelSizes=[];var o,l,c,d=e.chart.data.labels.length;for(t=0;t<d;t++){a=e.getPointPosition(t,e.drawingArea+5),o=e.ctx,l=i.lineHeight,c=e.pointLabels[t],n=B.isArray(c)?{w:B.longestText(o,o.font,c),h:c.length*l}:{w:o.measureText(c).width,h:l},e._pointLabelSizes[t]=n;var u=e.getIndexAngle(t),p=B.toDegrees(u)%360,g=Fn(p,a.x,n.w,0,180),h=Fn(p,a.y,n.h,90,270);g.start<s.l&&(s.l=g.start,r.l=u),g.end>s.r&&(s.r=g.end,r.r=u),h.start<s.t&&(s.t=h.start,r.t=u),h.end>s.b&&(s.b=h.end,r.b=u)}e.setReductions(e.drawingArea,s,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var a=this,i=t.l/Math.sin(n.l),s=Math.max(t.r-a.width,0)/Math.sin(n.r),r=-t.t/Math.cos(n.t),o=-Math.max(t.b-(a.height-a.paddingTop),0)/Math.cos(n.b);i=Vn(i),s=Vn(s),r=Vn(r),o=Vn(o),a.drawingArea=Math.min(Math.floor(e-(i+s)/2),Math.floor(e-(r+o)/2)),a.setCenterPoint(i,s,r,o)},setCenterPoint:function(e,t,n,a){var i=this,s=i.width-t-i.drawingArea,r=e+i.drawingArea,o=n+i.drawingArea,l=i.height-i.paddingTop-a-i.drawingArea;i.xCenter=Math.floor((r+s)/2+i.left),i.yCenter=Math.floor((o+l)/2+i.top+i.paddingTop)},getIndexAngle:function(e){var t=this.chart,n=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(B.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this.min,n=this.max;return this.getPointPositionForValue(e||0,this.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},_drawGrid:function(){var e,t,n,a=this,i=a.ctx,s=a.options,r=s.gridLines,o=s.angleLines,l=An(o.lineWidth,r.lineWidth),c=An(o.color,r.color);if(s.pointLabels.display&&function(e){var t=e.ctx,n=e.options,a=n.pointLabels,i=Ln(n),s=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),r=B.options._parseFont(a);t.save(),t.font=r.string,t.textBaseline="middle";for(var o=e.chart.data.labels.length-1;o>=0;o--){var l=0===o?i/2:0,c=e.getPointPosition(o,s+l+5),d=Nn(a.fontColor,o,P.global.defaultFontColor);t.fillStyle=d;var u=e.getIndexAngle(o),p=B.toDegrees(u);t.textAlign=Un(p),Bn(p,e._pointLabelSizes[o],c),$n(t,e.pointLabels[o],c,r.lineHeight)}t.restore()}(a),r.display&&B.each(a.ticks,(function(e,n){0!==n&&(t=a.getDistanceFromCenterForValue(a.ticksAsNumbers[n]),function(e,t,n,a){var i,s=e.ctx,r=t.circular,o=e.chart.data.labels.length,l=Nn(t.color,a-1),c=Nn(t.lineWidth,a-1);if((r||o)&&l&&c){if(s.save(),s.strokeStyle=l,s.lineWidth=c,s.setLineDash&&(s.setLineDash(t.borderDash||[]),s.lineDashOffset=t.borderDashOffset||0),s.beginPath(),r)s.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{i=e.getPointPosition(0,n),s.moveTo(i.x,i.y);for(var d=1;d<o;d++)i=e.getPointPosition(d,n),s.lineTo(i.x,i.y)}s.closePath(),s.stroke(),s.restore()}}(a,r,t,n))})),o.display&&l&&c){for(i.save(),i.lineWidth=l,i.strokeStyle=c,i.setLineDash&&(i.setLineDash(Rn([o.borderDash,r.borderDash,[]])),i.lineDashOffset=Rn([o.borderDashOffset,r.borderDashOffset,0])),e=a.chart.data.labels.length-1;e>=0;e--)t=a.getDistanceFromCenterForValue(s.ticks.reverse?a.min:a.max),n=a.getPointPosition(e,t),i.beginPath(),i.moveTo(a.xCenter,a.yCenter),i.lineTo(n.x,n.y),i.stroke();i.restore()}},_drawLabels:function(){var e=this,t=e.ctx,n=e.options.ticks;if(n.display){var a,i,s=e.getIndexAngle(0),r=B.options._parseFont(n),o=An(n.fontColor,P.global.defaultFontColor);t.save(),t.font=r.string,t.translate(e.xCenter,e.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",B.each(e.ticks,(function(s,l){(0!==l||n.reverse)&&(a=e.getDistanceFromCenterForValue(e.ticksAsNumbers[l]),n.showLabelBackdrop&&(i=t.measureText(s).width,t.fillStyle=n.backdropColor,t.fillRect(-i/2-n.backdropPaddingX,-a-r.size/2-n.backdropPaddingY,i+2*n.backdropPaddingX,r.size+2*n.backdropPaddingY)),t.fillStyle=o,t.fillText(s,0,-a))})),t.restore()}},_drawTitle:B.noop}),Hn=Pn;zn._defaults=Hn;var qn=B._deprecated,Gn=B.options.resolve,Wn=B.valueOrDefault,Kn=Number.MIN_SAFE_INTEGER||-9007199254740991,Yn=Number.MAX_SAFE_INTEGER||9007199254740991,Qn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(Qn);function Xn(e,t){return e-t}function Zn(e){return B.valueOrDefault(e.time.min,e.ticks.min)}function ea(e){return B.valueOrDefault(e.time.max,e.ticks.max)}function ta(e,t,n,a){var i=function(e,t,n){for(var a,i,s,r=0,o=e.length-1;r>=0&&r<=o;){if(i=e[(a=r+o>>1)-1]||null,s=e[a],!i)return{lo:null,hi:s};if(s[t]<n)r=a+1;else{if(!(i[t]>n))return{lo:i,hi:s};o=a-1}}return{lo:s,hi:null}}(e,t,n),s=i.lo?i.hi?i.lo:e[e.length-2]:e[0],r=i.lo?i.hi?i.hi:e[e.length-1]:e[1],o=r[t]-s[t],l=o?(n-s[t])/o:0,c=(r[a]-s[a])*l;return s[a]+c}function na(e,t){var n=e._adapter,a=e.options.time,i=a.parser,s=i||a.format,r=t;return"function"==typeof i&&(r=i(r)),B.isFinite(r)||(r="string"==typeof s?n.parse(r,s):n.parse(r)),null!==r?+r:(i||"function"!=typeof s||(r=s(t),B.isFinite(r)||(r=n.parse(r))),r)}function aa(e,t){if(B.isNullOrUndef(t))return null;var n=e.options.time,a=na(e,e.getRightValue(t));return null===a||n.round&&(a=+e._adapter.startOf(a,n.round)),a}function ia(e,t,n,a){var i,s,r,o=Jn.length;for(i=Jn.indexOf(e);i<o-1;++i)if(r=(s=Qn[Jn[i]]).steps?s.steps:Yn,s.common&&Math.ceil((n-t)/(r*s.size))<=a)return Jn[i];return Jn[o-1]}function sa(e,t,n){var a,i,s=[],r={},o=t.length;for(a=0;a<o;++a)r[i=t[a]]=a,s.push({value:i,major:!1});return 0!==o&&n?function(e,t,n,a){var i,s,r=e._adapter,o=+r.startOf(t[0].value,a),l=t[t.length-1].value;for(i=o;i<=l;i=+r.add(i,1,a))(s=n[i])>=0&&(t[s].major=!0);return t}(e,s,r,n):s}var ra=mn.extend({initialize:function(){this.mergeTicksOptions(),mn.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),a=e._adapter=new Zt._date(t.adapters.date);return qn("time scale",n.format,"time.format","time.parser"),qn("time scale",n.min,"time.min","ticks.min"),qn("time scale",n.max,"time.max","ticks.max"),B.mergeIf(n.displayFormats,a.formats()),mn.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),mn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,a,i,s,r,o=this,l=o.chart,c=o._adapter,d=o.options,u=d.time.unit||"day",p=Yn,g=Kn,h=[],m=[],f=[],b=o._getLabels();for(e=0,n=b.length;e<n;++e)f.push(aa(o,b[e]));for(e=0,n=(l.data.datasets||[]).length;e<n;++e)if(l.isDatasetVisible(e))if(i=l.data.datasets[e].data,B.isObject(i[0]))for(m[e]=[],t=0,a=i.length;t<a;++t)s=aa(o,i[t]),h.push(s),m[e][t]=s;else m[e]=f.slice(0),r||(h=h.concat(f),r=!0);else m[e]=[];f.length&&(p=Math.min(p,f[0]),g=Math.max(g,f[f.length-1])),h.length&&(h=n>1?function(e){var t,n,a,i={},s=[];for(t=0,n=e.length;t<n;++t)i[a=e[t]]||(i[a]=!0,s.push(a));return s}(h).sort(Xn):h.sort(Xn),p=Math.min(p,h[0]),g=Math.max(g,h[h.length-1])),p=aa(o,Zn(d))||p,g=aa(o,ea(d))||g,p=p===Yn?+c.startOf(Date.now(),u):p,g=g===Kn?+c.endOf(Date.now(),u)+1:g,o.min=Math.min(p,g),o.max=Math.max(p+1,g),o._table=[],o._timestamps={data:h,datasets:m,labels:f}},buildTicks:function(){var e,t,n,a=this,i=a.min,s=a.max,r=a.options,o=r.ticks,l=r.time,c=a._timestamps,d=[],u=a.getLabelCapacity(i),p=o.source,g=r.distribution;for(c="data"===p||"auto"===p&&"series"===g?c.data:"labels"===p?c.labels:function(e,t,n,a){var i,s=e._adapter,r=e.options,o=r.time,l=o.unit||ia(o.minUnit,t,n,a),c=Gn([o.stepSize,o.unitStepSize,1]),d="week"===l&&o.isoWeekday,u=t,p=[];if(d&&(u=+s.startOf(u,"isoWeek",d)),u=+s.startOf(u,d?"day":l),s.diff(n,t,l)>1e5*c)throw t+" and "+n+" are too far apart with stepSize of "+c+" "+l;for(i=u;i<n;i=+s.add(i,c,l))p.push(i);return i!==n&&"ticks"!==r.bounds||p.push(i),p}(a,i,s,u),"ticks"===r.bounds&&c.length&&(i=c[0],s=c[c.length-1]),i=aa(a,Zn(r))||i,s=aa(a,ea(r))||s,e=0,t=c.length;e<t;++e)(n=c[e])>=i&&n<=s&&d.push(n);return a.min=i,a.max=s,a._unit=l.unit||(o.autoSkip?ia(l.minUnit,a.min,a.max,u):function(e,t,n,a,i){var s,r;for(s=Jn.length-1;s>=Jn.indexOf(n);s--)if(r=Jn[s],Qn[r].common&&e._adapter.diff(i,a,r)>=t-1)return r;return Jn[n?Jn.indexOf(n):0]}(a,d.length,l.minUnit,a.min,a.max)),a._majorUnit=o.major.enabled&&"year"!==a._unit?function(e){for(var t=Jn.indexOf(e)+1,n=Jn.length;t<n;++t)if(Qn[Jn[t]].common)return Jn[t]}(a._unit):void 0,a._table=function(e,t,n,a){if("linear"===a||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var i,s,r,o,l,c=[],d=[t];for(i=0,s=e.length;i<s;++i)(o=e[i])>t&&o<n&&d.push(o);for(d.push(n),i=0,s=d.length;i<s;++i)l=d[i+1],r=d[i-1],o=d[i],void 0!==r&&void 0!==l&&Math.round((l+r)/2)===o||c.push({time:o,pos:i/(s-1)});return c}(a._timestamps.data,i,s,g),a._offsets=function(e,t,n,a,i){var s,r,o=0,l=0;return i.offset&&t.length&&(s=ta(e,"time",t[0],"pos"),o=1===t.length?1-s:(ta(e,"time",t[1],"pos")-s)/2,r=ta(e,"time",t[t.length-1],"pos"),l=1===t.length?r:(r-ta(e,"time",t[t.length-2],"pos"))/2),{start:o,end:l,factor:1/(o+1+l)}}(a._table,d,0,0,r),o.reverse&&d.reverse(),sa(a,d,a._majorUnit)},getLabelForIndex:function(e,t){var n=this,a=n._adapter,i=n.chart.data,s=n.options.time,r=i.labels&&e<i.labels.length?i.labels[e]:"",o=i.datasets[t].data[e];return B.isObject(o)&&(r=n.getRightValue(o)),s.tooltipFormat?a.format(na(n,r),s.tooltipFormat):"string"==typeof r?r:a.format(na(n,r),s.displayFormats.datetime)},tickFormatFunction:function(e,t,n,a){var i=this._adapter,s=this.options,r=s.time.displayFormats,o=r[this._unit],l=this._majorUnit,c=r[l],d=n[t],u=s.ticks,p=l&&c&&d&&d.major,g=i.format(e,a||(p?c:o)),h=p?u.major:u.minor,m=Gn([h.callback,h.userCallback,u.callback,u.userCallback]);return m?m(g,t,n):g},convertTicksToLabels:function(e){var t,n,a=[];for(t=0,n=e.length;t<n;++t)a.push(this.tickFormatFunction(e[t].value,t,e));return a},getPixelForOffset:function(e){var t=this._offsets,n=ta(this._table,"time",e,"pos");return this.getPixelForDecimal((t.start+n)*t.factor)},getPixelForValue:function(e,t,n){var a=null;if(void 0!==t&&void 0!==n&&(a=this._timestamps.datasets[n][t]),null===a&&(a=aa(this,e)),null!==a)return this.getPixelForOffset(a)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end,a=ta(this._table,"pos",n,"time");return this._adapter._create(a)},_getLabelSize:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,a=B.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(a),s=Math.sin(a),r=Wn(t.fontSize,P.global.defaultFontSize);return{w:n*i+r*s,h:n*s+r*i}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,a=n.displayFormats,i=a[n.unit]||a.millisecond,s=t.tickFormatFunction(e,0,sa(t,[e],t._majorUnit),i),r=t._getLabelSize(s),o=Math.floor(t.isHorizontal()?t.width/r.w:t.height/r.h);return t.options.offset&&o--,o>0?o:1}}),oa={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};ra._defaults=oa;var la={category:bn,linear:kn,logarithmic:Mn,radialLinear:zn,time:ra},ca={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Zt._date.override("function"==typeof e?{_id:"moment",formats:function(){return ca},parse:function(t,n){return"string"==typeof t&&"string"==typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,a){return e(t).add(n,a).valueOf()},diff:function(t,n,a){return e(t).diff(e(n),a)},startOf:function(t,n,a){return t=e(t),"isoWeek"===n?t.isoWeekday(a).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),P._set("global",{plugins:{filler:{propagate:!0}}});var da={dataset:function(e){var t=e.fill,n=e.chart,a=n.getDatasetMeta(t),i=a&&n.isDatasetVisible(t)&&a.dataset._children||[],s=i.length||0;return s?function(e,t){return t<s&&i[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,a=t?t.y:null;return B.isArray(t)?function(e,n){return t[n]}:function(e){return{x:null===n?e.x:n,y:null===a?e.y:a}}}};function ua(e,t,n){var a,i=e._model||{},s=i.fill;if(void 0===s&&(s=!!i.backgroundColor),!1===s||null===s)return!1;if(!0===s)return"origin";if(a=parseFloat(s,10),isFinite(a)&&Math.floor(a)===a)return"-"!==s[0]&&"+"!==s[0]||(a=t+a),!(a===t||a<0||a>=n)&&a;switch(s){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return s;default:return!1}}function pa(e){return(e.el._scale||{}).getPointPositionForValue?function(e){var t,n,a,i,s,r=e.el._scale,o=r.options,l=r.chart.data.labels.length,c=e.fill,d=[];if(!l)return null;for(t=o.ticks.reverse?r.max:r.min,n=o.ticks.reverse?r.min:r.max,a=r.getPointPositionForValue(0,t),i=0;i<l;++i)s="start"===c||"end"===c?r.getPointPositionForValue(i,"start"===c?t:n):r.getBasePosition(i),o.gridLines.circular&&(s.cx=a.x,s.cy=a.y,s.angle=r.getIndexAngle(i)-Math.PI/2),d.push(s);return d}(e):function(e){var t,n=e.el._model||{},a=e.el._scale||{},i=e.fill,s=null;if(isFinite(i))return null;if("start"===i?s=void 0===n.scaleBottom?a.bottom:n.scaleBottom:"end"===i?s=void 0===n.scaleTop?a.top:n.scaleTop:void 0!==n.scaleZero?s=n.scaleZero:a.getBasePixel&&(s=a.getBasePixel()),null!=s){if(void 0!==s.x&&void 0!==s.y)return s;if(B.isFinite(s))return{x:(t=a.isHorizontal())?s:null,y:t?null:s}}return null}(e)}function ga(e,t,n){var a,i=e[t].fill,s=[t];if(!n)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!isFinite(i))return i;if(!(a=e[i]))return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function ha(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),da[n](e))}function ma(e){return e&&!e.skip}function fa(e,t,n,a,i){var s,r,o,l;if(a&&i){for(e.moveTo(t[0].x,t[0].y),s=1;s<a;++s)B.canvas.lineTo(e,t[s-1],t[s]);if(void 0===n[0].angle)for(e.lineTo(n[i-1].x,n[i-1].y),s=i-1;s>0;--s)B.canvas.lineTo(e,n[s],n[s-1],!0);else for(r=n[0].cx,o=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-r,2)+Math.pow(n[0].y-o,2)),s=i-1;s>0;--s)e.arc(r,o,l,n[s].angle,n[s-1].angle,!0)}}function ba(e,t,n,a,i,s){var r,o,l,c,d,u,p,g,h=t.length,m=a.spanGaps,f=[],b=[],j=0,y=0;for(e.beginPath(),r=0,o=h;r<o;++r)d=n(c=t[l=r%h]._view,l,a),u=ma(c),p=ma(d),s&&void 0===g&&u&&(o=h+(g=r+1)),u&&p?(j=f.push(c),y=b.push(d)):j&&y&&(m?(u&&f.push(c),p&&b.push(d)):(fa(e,f,b,j,y),j=y=0,f=[],b=[]));fa(e,f,b,j,y),e.closePath(),e.fillStyle=i,e.fill()}var ja={id:"filler",afterDatasetsUpdate:function(e,t){var n,a,i,s,r=(e.data.datasets||[]).length,o=t.propagate,l=[];for(a=0;a<r;++a)s=null,(i=(n=e.getDatasetMeta(a)).dataset)&&i._model&&i instanceof ve.Line&&(s={visible:e.isDatasetVisible(a),fill:ua(i,a,r),chart:e,el:i}),n.$filler=s,l.push(s);for(a=0;a<r;++a)(s=l[a])&&(s.fill=ga(l,a,o),s.boundary=pa(s),s.mapper=ha(s))},beforeDatasetsDraw:function(e){var t,n,a,i,s,r,o,l=e._getSortedVisibleDatasetMetas(),c=e.ctx;for(n=l.length-1;n>=0;--n)(t=l[n].$filler)&&t.visible&&(i=(a=t.el)._view,s=a._children||[],r=t.mapper,o=i.backgroundColor||P.global.defaultColor,r&&o&&s.length&&(B.canvas.clipArea(c,e.chartArea),ba(c,s,r,i,o,a._loop),B.canvas.unclipArea(c)))}},ya=B.rtl.getRtlAdapter,Oa=B.noop,va=B.valueOrDefault;function xa(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}P._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,a=this.chart,i=a.getDatasetMeta(n);i.hidden=null===i.hidden?!a.data.datasets[n].hidden:null,a.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},a=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map((function(n){var i=n.controller.getStyle(a?0:void 0);return{text:t[n.index].label,fillStyle:i.backgroundColor,hidden:!e.isDatasetVisible(n.index),lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,pointStyle:i.pointStyle,rotation:i.rotation,datasetIndex:n.index}}),this)}}},legendCallback:function(e){var t,n,a,i=document.createElement("ul"),s=e.data.datasets;for(i.setAttribute("class",e.id+"-legend"),t=0,n=s.length;t<n;t++)(a=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=s[t].backgroundColor,s[t].label&&a.appendChild(document.createTextNode(s[t].label));return i.outerHTML}});var _a=K.extend({initialize:function(e){B.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Oa,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:Oa,beforeSetDimensions:Oa,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Oa,beforeBuildLabels:Oa,buildLabels:function(){var e=this,t=e.options.labels||{},n=B.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:Oa,beforeFit:Oa,fit:function(){var e=this,t=e.options,n=t.labels,a=t.display,i=e.ctx,s=B.options._parseFont(n),r=s.size,o=e.legendHitBoxes=[],l=e.minSize,c=e.isHorizontal();if(c?(l.width=e.maxWidth,l.height=a?10:0):(l.width=a?10:0,l.height=e.maxHeight),a){if(i.font=s.string,c){var d=e.lineWidths=[0],u=0;i.textAlign="left",i.textBaseline="middle",B.each(e.legendItems,(function(e,t){var a=xa(n,r)+r/2+i.measureText(e.text).width;(0===t||d[d.length-1]+a+2*n.padding>l.width)&&(u+=r+n.padding,d[d.length-(t>0?0:1)]=0),o[t]={left:0,top:0,width:a,height:r},d[d.length-1]+=a+n.padding})),l.height+=u}else{var p=n.padding,g=e.columnWidths=[],h=e.columnHeights=[],m=n.padding,f=0,b=0;B.each(e.legendItems,(function(e,t){var a=xa(n,r)+r/2+i.measureText(e.text).width;t>0&&b+r+2*p>l.height&&(m+=f+n.padding,g.push(f),h.push(b),f=0,b=0),f=Math.max(f,a),b+=r+p,o[t]={left:0,top:0,width:a,height:r}})),m+=f,g.push(f),h.push(b),l.width+=m}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:Oa,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,a=P.global,i=a.defaultColor,s=a.elements.line,r=e.height,o=e.columnHeights,l=e.width,c=e.lineWidths;if(t.display){var d,u=ya(t.rtl,e.left,e.minSize.width),p=e.ctx,g=va(n.fontColor,a.defaultFontColor),h=B.options._parseFont(n),m=h.size;p.textAlign=u.textAlign("left"),p.textBaseline="middle",p.lineWidth=.5,p.strokeStyle=g,p.fillStyle=g,p.font=h.string;var f=xa(n,m),b=e.legendHitBoxes,j=function(e,a){switch(t.align){case"start":return n.padding;case"end":return e-a;default:return(e-a+n.padding)/2}},y=e.isHorizontal();d=y?{x:e.left+j(l,c[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+j(r,o[0]),line:0},B.rtl.overrideTextDirection(e.ctx,t.textDirection);var O=m+n.padding;B.each(e.legendItems,(function(t,a){var g=p.measureText(t.text).width,h=f+m/2+g,v=d.x,x=d.y;u.setWidth(e.minSize.width),y?a>0&&v+h+n.padding>e.left+e.minSize.width&&(x=d.y+=O,d.line++,v=d.x=e.left+j(l,c[d.line])):a>0&&x+O>e.top+e.minSize.height&&(v=d.x=v+e.columnWidths[d.line]+n.padding,d.line++,x=d.y=e.top+j(r,o[d.line]));var _=u.x(v);!function(e,t,a){if(!(isNaN(f)||f<=0)){p.save();var r=va(a.lineWidth,s.borderWidth);if(p.fillStyle=va(a.fillStyle,i),p.lineCap=va(a.lineCap,s.borderCapStyle),p.lineDashOffset=va(a.lineDashOffset,s.borderDashOffset),p.lineJoin=va(a.lineJoin,s.borderJoinStyle),p.lineWidth=r,p.strokeStyle=va(a.strokeStyle,i),p.setLineDash&&p.setLineDash(va(a.lineDash,s.borderDash)),n&&n.usePointStyle){var o=f*Math.SQRT2/2,l=u.xPlus(e,f/2),c=t+m/2;B.canvas.drawPoint(p,a.pointStyle,o,l,c,a.rotation)}else p.fillRect(u.leftForLtr(e,f),t,f,m),0!==r&&p.strokeRect(u.leftForLtr(e,f),t,f,m);p.restore()}}(_,x,t),b[a].left=u.leftForLtr(_,b[a].width),b[a].top=x,function(e,t,n,a){var i=m/2,s=u.xPlus(e,f+i),r=t+i;p.fillText(n.text,s,r),n.hidden&&(p.beginPath(),p.lineWidth=2,p.moveTo(s,r),p.lineTo(u.xPlus(s,a),r),p.stroke())}(_,x,t,g),y?d.x+=h+n.padding:d.y+=O})),B.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var n,a,i,s=this;if(e>=s.left&&e<=s.right&&t>=s.top&&t<=s.bottom)for(i=s.legendHitBoxes,n=0;n<i.length;++n)if(e>=(a=i[n]).left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height)return s.legendItems[n];return null},handleEvent:function(e){var t,n=this,a=n.options,i="mouseup"===e.type?"click":e.type;if("mousemove"===i){if(!a.onHover&&!a.onLeave)return}else{if("click"!==i)return;if(!a.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===i?t&&a.onClick&&a.onClick.call(n,e.native,t):(a.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&a.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),a.onHover&&t&&a.onHover.call(n,e.native,t))}});function Ca(e,t){var n=new _a({ctx:e.ctx,options:t,chart:e});ht.configure(e,n,t),ht.addBox(e,n),e.legend=n}var ka={id:"legend",_element:_a,beforeInit:function(e){var t=e.options.legend;t&&Ca(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(B.mergeIf(t,P.global.legend),n?(ht.configure(e,n,t),n.options=t):Ca(e,t)):n&&(ht.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},wa=B.noop;P._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Ta=K.extend({initialize:function(e){B.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:wa,update:function(e,t,n){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=t,a.margins=n,a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeBuildLabels(),a.buildLabels(),a.afterBuildLabels(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:wa,beforeSetDimensions:wa,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:wa,beforeBuildLabels:wa,buildLabels:wa,afterBuildLabels:wa,beforeFit:wa,fit:function(){var e,t=this,n=t.options,a=t.minSize={},i=t.isHorizontal();n.display?(e=(B.isArray(n.text)?n.text.length:1)*B.options._parseFont(n).lineHeight+2*n.padding,t.width=a.width=i?t.maxWidth:e,t.height=a.height=i?e:t.maxHeight):t.width=a.width=t.height=a.height=0},afterFit:wa,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var a,i,s,r=B.options._parseFont(n),o=r.lineHeight,l=o/2+n.padding,c=0,d=e.top,u=e.left,p=e.bottom,g=e.right;t.fillStyle=B.valueOrDefault(n.fontColor,P.global.defaultFontColor),t.font=r.string,e.isHorizontal()?(i=u+(g-u)/2,s=d+l,a=g-u):(i="left"===n.position?u+l:g-l,s=d+(p-d)/2,a=p-d,c=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(i,s),t.rotate(c),t.textAlign="center",t.textBaseline="middle";var h=n.text;if(B.isArray(h))for(var m=0,f=0;f<h.length;++f)t.fillText(h[f],0,m,a),m+=o;else t.fillText(h,0,0,a);t.restore()}}});function Sa(e,t){var n=new Ta({ctx:e.ctx,options:t,chart:e});ht.configure(e,n,t),ht.addBox(e,n),e.titleBlock=n}var Ea={},Ia=ja,Ma=ka,Da={id:"title",_element:Ta,beforeInit:function(e){var t=e.options.title;t&&Sa(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(B.mergeIf(t,P.global.title),n?(ht.configure(e,n,t),n.options=t):Sa(e,t)):n&&(ht.removeBox(e,n),delete e.titleBlock)}};for(var Aa in Ea.filler=Ia,Ea.legend=Ma,Ea.title=Da,Qt.helpers=B,function(){function e(e,t,n){var a;return"string"==typeof e?(a=parseInt(e,10),-1!==e.indexOf("%")&&(a=a/100*t.parentNode[n])):a=e,a}function t(e){return null!=e&&"none"!==e}function n(n,a,i){var s=document.defaultView,r=B._getParentNode(n),o=s.getComputedStyle(n)[a],l=s.getComputedStyle(r)[a],c=t(o),d=t(l),u=Number.POSITIVE_INFINITY;return c||d?Math.min(c?e(o,n,i):u,d?e(l,r,i):u):"none"}B.where=function(e,t){if(B.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return B.each(e,(function(e){t(e)&&n.push(e)})),n},B.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var a=0,i=e.length;a<i;++a)if(t.call(n,e[a],a,e))return a;return-1},B.findNextWhere=function(e,t,n){B.isNullOrUndef(n)&&(n=-1);for(var a=n+1;a<e.length;a++){var i=e[a];if(t(i))return i}},B.findPreviousWhere=function(e,t,n){B.isNullOrUndef(n)&&(n=e.length);for(var a=n-1;a>=0;a--){var i=e[a];if(t(i))return i}},B.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},B.almostEquals=function(e,t,n){return Math.abs(e-t)<n},B.almostWhole=function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e},B.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},B.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},B.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},B.toRadians=function(e){return e*(Math.PI/180)},B.toDegrees=function(e){return e*(180/Math.PI)},B._decimalPlaces=function(e){if(B.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},B.getAngleFromPoint=function(e,t){var n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a),s=Math.atan2(a,n);return s<-.5*Math.PI&&(s+=2*Math.PI),{angle:s,distance:i}},B.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},B.aliasPixel=function(e){return e%2==0?0:.5},B._alignPixel=function(e,t,n){var a=e.currentDevicePixelRatio,i=n/2;return Math.round((t-i)*a)/a+i},B.splineCurve=function(e,t,n,a){var i=e.skip?t:e,s=t,r=n.skip?t:n,o=Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2)),l=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),c=o/(o+l),d=l/(o+l),u=a*(c=isNaN(c)?0:c),p=a*(d=isNaN(d)?0:d);return{previous:{x:s.x-u*(r.x-i.x),y:s.y-u*(r.y-i.y)},next:{x:s.x+p*(r.x-i.x),y:s.y+p*(r.y-i.y)}}},B.EPSILON=Number.EPSILON||1e-14,B.splineCurveMonotone=function(e){var t,n,a,i,s,r,o,l,c,d=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),u=d.length;for(t=0;t<u;++t)if(!(a=d[t]).model.skip){if(n=t>0?d[t-1]:null,(i=t<u-1?d[t+1]:null)&&!i.model.skip){var p=i.model.x-a.model.x;a.deltaK=0!==p?(i.model.y-a.model.y)/p:0}!n||n.model.skip?a.mK=a.deltaK:!i||i.model.skip?a.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(a.deltaK)?a.mK=0:a.mK=(n.deltaK+a.deltaK)/2}for(t=0;t<u-1;++t)a=d[t],i=d[t+1],a.model.skip||i.model.skip||(B.almostEquals(a.deltaK,0,this.EPSILON)?a.mK=i.mK=0:(s=a.mK/a.deltaK,r=i.mK/a.deltaK,(l=Math.pow(s,2)+Math.pow(r,2))<=9||(o=3/Math.sqrt(l),a.mK=s*o*a.deltaK,i.mK=r*o*a.deltaK)));for(t=0;t<u;++t)(a=d[t]).model.skip||(n=t>0?d[t-1]:null,i=t<u-1?d[t+1]:null,n&&!n.model.skip&&(c=(a.model.x-n.model.x)/3,a.model.controlPointPreviousX=a.model.x-c,a.model.controlPointPreviousY=a.model.y-c*a.mK),i&&!i.model.skip&&(c=(i.model.x-a.model.x)/3,a.model.controlPointNextX=a.model.x+c,a.model.controlPointNextY=a.model.y+c*a.mK))},B.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},B.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},B.niceNum=function(e,t){var n=Math.floor(B.log10(e)),a=e/Math.pow(10,n);return(t?a<1.5?1:a<3?2:a<7?5:10:a<=1?1:a<=2?2:a<=5?5:10)*Math.pow(10,n)},B.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},B.getRelativePosition=function(e,t){var n,a,i=e.originalEvent||e,s=e.target||e.srcElement,r=s.getBoundingClientRect(),o=i.touches;o&&o.length>0?(n=o[0].clientX,a=o[0].clientY):(n=i.clientX,a=i.clientY);var l=parseFloat(B.getStyle(s,"padding-left")),c=parseFloat(B.getStyle(s,"padding-top")),d=parseFloat(B.getStyle(s,"padding-right")),u=parseFloat(B.getStyle(s,"padding-bottom")),p=r.right-r.left-l-d,g=r.bottom-r.top-c-u;return{x:n=Math.round((n-r.left-l)/p*s.width/t.currentDevicePixelRatio),y:a=Math.round((a-r.top-c)/g*s.height/t.currentDevicePixelRatio)}},B.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},B.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},B._calculatePadding=function(e,t,n){return(t=B.getStyle(e,t)).indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},B._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},B.getMaximumWidth=function(e){var t=B._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,a=n-B._calculatePadding(t,"padding-left",n)-B._calculatePadding(t,"padding-right",n),i=B.getConstraintWidth(e);return isNaN(i)?a:Math.min(a,i)},B.getMaximumHeight=function(e){var t=B._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,a=n-B._calculatePadding(t,"padding-top",n)-B._calculatePadding(t,"padding-bottom",n),i=B.getConstraintHeight(e);return isNaN(i)?a:Math.min(a,i)},B.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},B.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var a=e.canvas,i=e.height,s=e.width;a.height=i*n,a.width=s*n,e.ctx.scale(n,n),a.style.height||a.style.width||(a.style.height=i+"px",a.style.width=s+"px")}},B.fontString=function(e,t,n){return t+" "+e+"px "+n},B.longestText=function(e,t,n,a){var i=(a=a||{}).data=a.data||{},s=a.garbageCollect=a.garbageCollect||[];a.font!==t&&(i=a.data={},s=a.garbageCollect=[],a.font=t),e.font=t;var r,o,l,c,d,u=0,p=n.length;for(r=0;r<p;r++)if(null!=(c=n[r])&&!0!==B.isArray(c))u=B.measureText(e,i,s,u,c);else if(B.isArray(c))for(o=0,l=c.length;o<l;o++)null==(d=c[o])||B.isArray(d)||(u=B.measureText(e,i,s,u,d));var g=s.length/2;if(g>n.length){for(r=0;r<g;r++)delete i[s[r]];s.splice(0,g)}return u},B.measureText=function(e,t,n,a,i){var s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>a&&(a=s),a},B.numberOfLabelLines=function(e){var t=1;return B.each(e,(function(e){B.isArray(e)&&e.length>t&&(t=e.length)})),t},B.color=x?function(e){return e instanceof CanvasGradient&&(e=P.global.defaultColor),x(e)}:function(e){return console.error("Color.js not found!"),e},B.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:B.color(e).saturate(.5).darken(.1).rgbString()}}(),Qt._adapters=Zt,Qt.Animation=Q,Qt.animationService=J,Qt.controllers=Je,Qt.DatasetController=ne,Qt.defaults=P,Qt.Element=K,Qt.elements=ve,Qt.Interaction=it,Qt.layouts=ht,Qt.platform=St,Qt.plugins=Et,Qt.Scale=mn,Qt.scaleService=It,Qt.Ticks=en,Qt.Tooltip=Bt,Qt.helpers.each(la,(function(e,t){Qt.scaleService.registerScaleType(t,e,e._defaults)})),Ea)Ea.hasOwnProperty(Aa)&&Qt.plugins.register(Ea[Aa]);Qt.platform.initialize();var Na=Qt;return"undefined"!=typeof window&&(window.Chart=Qt),Qt.Chart=Qt,Qt.Legend=Ea.legend._element,Qt.Title=Ea.title._element,Qt.pluginService=Qt.plugins,Qt.PluginBase=Qt.Element.extend({}),Qt.canvasHelpers=Qt.helpers.canvas,Qt.layoutService=Qt.layouts,Qt.LinearScaleBase=vn,Qt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){Qt[e]=function(t,n){return new Qt(t,Qt.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),Na}(function(){try{return n("wd/R")}catch(e){}}())},Mn35:function(e,t,n){var a=n("UMY1")((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));e.exports=a},MoIz:function(e,t,n){e.exports=function(e){var t=n("wU0g")(e);return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,n=this.options,a=this.chartInstance,i=a.scales[n.xScaleID],s=a.scales[n.yScaleID],r=a.chartArea;if(e.ranges={},r){var o=0,l=0;i&&(o=t.isValid(n.xMin)?n.xMin:i.getPixelForValue(r.left),l=t.isValid(n.xMax)?n.xMax:i.getPixelForValue(r.right),e.ranges[n.xScaleID]={min:Math.min(o,l),max:Math.max(o,l)}),s&&(o=t.isValid(n.yMin)?n.yMin:s.getPixelForValue(r.bottom),l=t.isValid(n.yMax)?n.yMax:s.getPixelForValue(r.top),e.ranges[n.yScaleID]={min:Math.min(o,l),max:Math.max(o,l)})}},configure:function(){var e=this._model,n=this.options,a=this.chartInstance,i=a.scales[n.xScaleID],s=a.scales[n.yScaleID],r=a.chartArea;e.clip={x1:r.left,x2:r.right,y1:r.top,y2:r.bottom};var o,l,c=r.left,d=r.top,u=r.right,p=r.bottom;i&&(o=t.isValid(n.xMin)?i.getPixelForValue(n.xMin):r.left,l=t.isValid(n.xMax)?i.getPixelForValue(n.xMax):r.right,c=Math.min(o,l),u=Math.max(o,l)),s&&(o=t.isValid(n.yMin)?s.getPixelForValue(n.yMin):r.bottom,l=t.isValid(n.yMax)?s.getPixelForValue(n.yMax):r.top,d=Math.min(o,l),p=Math.max(o,l)),e.left=c,e.top=d,e.right=u,e.bottom=p,e.borderColor=n.borderColor,e.borderWidth=n.borderWidth,e.backgroundColor=n.backgroundColor},inRange:function(e,t){var n=this._model;return n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},getCenterPoint:function(){var e=this._model;return{x:(e.right+e.left)/2,y:(e.bottom+e.top)/2}},getWidth:function(){var e=this._model;return Math.abs(e.right-e.left)},getHeight:function(){var e=this._model;return Math.abs(e.bottom-e.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.fillStyle=e.backgroundColor;var n=e.right-e.left,a=e.bottom-e.top;t.fillRect(e.left,e.top,n,a),t.strokeRect(e.left,e.top,n,a),t.restore()}})}},N1zF:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-message-search/2964"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"The number of messages that are indexed. Message indexing happens when either a new message is created or an existing message is updated or removed. Indexable message types are admin messages, text messages, file messages, announcements, and auto-generated admin messages."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following is an example of usage calculation for message search query at an application level."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},'"I love birds!" = 1 indexed message\n"I hate birds!" = 1 indexed message\n',Object(a.a)("strong",{parentName:"p"},"Total = 2 indexed messages")))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all indexed message counts across all existing applications within the organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nIndexed message count for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 100 indexed messages\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 105 indexed messages\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 25 indexed messages")),Object(a.a)("p",null,"Then, organization’s ",Object(a.a)("strong",{parentName:"p"},"indexed message")," count for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"100 + 105 + 25 = ",Object(a.a)("strong",{parentName:"p"},"230 indexed messages")))))}l.isMDXComponent=!0},N4QS:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-file-upload-traffic/2911"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"The cumulative amount of file size uploaded within a month.\nUsage calculation resets on the first day of every month."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following shows an application's file upload traffic in a month."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"January 1:")," 10 GB\n",Object(a.a)("strong",{parentName:"p"},"January 5:")," 15 GB\n",Object(a.a)("strong",{parentName:"p"},"January 15:")," 15 GB")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"file upload traffic")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"10 + 15 + 15 = ",Object(a.a)("strong",{parentName:"p"},"40 GB")))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all file size uploaded across all applications within your application.\nUsage calculation resets on the first of day every month."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nUpload traffic usage for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 40 GB\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 100 GB\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 20 GB")),Object(a.a)("p",null,"Then, organization's ",Object(a.a)("strong",{parentName:"p"},"file upload traffic")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"40 + 100 + 20 = ",Object(a.a)("strong",{parentName:"p"},"160 GB")))))}l.isMDXComponent=!0},N4c9:function(e,t,n){n("wYM1");var a=n("VSTI").Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},NIJN:function(e,t,n){var a=n("CH3K"),i=n("XGnz"),s=n("Q1l4"),r=n("Z0cm");e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return a(r(n)?s(n):[n],i(t,1))}},Nxul:function(e,t,n){"use strict";var a=n("q1tI"),i=n("UWC4"),s=n("5ILo"),r=n("mby5"),o=n("nKUr");const l=Object(a.memo)(({agent:e,size:t="medium",isBotOnly:n})=>{var a,l;const c=(null==e?void 0:e.agentType)===i.h.BOT;var d,u;return n||c?Object(o.jsx)(r.a,{size:t,profileID:null!=(d=null==e?void 0:e.sendbirdId)?d:"",imageUrl:null==e?void 0:e.photoThumbnailUrl,status:null==e||null==(u=e.connection)?void 0:u.toLowerCase()}):Object(o.jsx)(s.a,{size:t,profileID:null!=(a=null==e?void 0:e.email)?a:"",imageUrl:null==e?void 0:e.photoThumbnailUrl,status:null==e||null==(l=e.connection)?void 0:l.toLowerCase()})});t.a=l},OTpG:function(e,t,n){"use strict";var a=n("5ETA"),i=n("USwo"),s=n("ugGH"),r=n("BRsN"),o=n("ig3W"),l=n("Jt1Q"),c=n("kvAF"),d=n("znrX"),u=n("zBWt")("iterator"),p=!([].keys&&"next"in[].keys()),g=function(){return this};e.exports=function(e,t,n,h,m,f,b){l(n,t,h);var j,y,O,v=function(e){if(!p&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",_="values"==m,C=!1,k=e.prototype,w=k[u]||k["@@iterator"]||m&&k[m],T=w||v(m),S=m?_?v("entries"):T:void 0,E="Array"==t&&k.entries||w;if(E&&(O=d(E.call(new e)))!==Object.prototype&&O.next&&(c(O,x,!0),a||"function"==typeof O[u]||r(O,u,g)),_&&w&&"values"!==w.name&&(C=!0,T=function(){return w.call(this)}),a&&!b||!p&&!C&&k[u]||r(k,u,T),o[t]=T,o[x]=g,m)if(j={values:_?T:v("values"),keys:f?T:v("keys"),entries:S},b)for(y in j)y in k||s(k,y,j[y]);else i(i.P+i.F*(p||C),t,j);return j}},Oa1h:function(e,t,n){var a=n("bKEA"),i=n("0WpP"),s=n("nRFE");e.exports=function(e){return function(t,n,r){var o,l=a(t),c=i(l.length),d=s(r,c);if(e&&n!=n){for(;c>d;)if((o=l[d++])!=o)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}}},P2sY:function(e,t,n){e.exports={default:n("uccp"),__esModule:!0}},PE4B:function(e,t,n){"use strict";var a=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map((function(e){return s(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(e){return!1}}function c(e,t,n){var a={};return n.isMergeableObject(e)&&o(e).forEach((function(t){a[t]=s(e[t],n)})),o(t).forEach((function(i){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(l(e,i)&&n.isMergeableObject(t[i])?a[i]=function(e,t){if(!t.customMerge)return d;var n=t.customMerge(e);return"function"==typeof n?n:d}(i,n)(e[i],t[i],n):a[i]=s(t[i],n))})),a}function d(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||r,n.isMergeableObject=n.isMergeableObject||a,n.cloneUnlessOtherwiseSpecified=s;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):c(e,t,n):s(t,n)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return d(e,n,t)}),{})};var u=d;e.exports=u},PFWz:function(e,t,n){try{var a=n("zs13")}catch(e){a=n("zs13")}var i=/\s+/,s=Object.prototype.toString;function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~a(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=a(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(i);return""===e[0]&&e.shift(),e},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~a(this.array(),e)}},"Q+E5":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("brpS"),i=n("W7Pl"),s=n("VZc+");const r=()=>{const{currentSubscription:e,isLoaded:t}=Object(a.b)(),{isFeatureEnabled:n,isSelfService:r}=Object(i.h)(),o=Object(s.a)(),l=Object(i.V)(e=>{var t,n,a,i;const s=null==(t=e.applicationState.data)?void 0:t.current_premium_features;return{isSupergroupSupportedByPlan:null!=(n=null==s?void 0:s.super_group_channel)&&n,isSupergroupEnabled:null!=(a=null==s?void 0:s.super_group_channel)&&a,supergroupMemberLimit:null!=(i=null==s?void 0:s.super_group_member_limit)?i:o}});return r?null!=e&&e.plan.supergroup?{isSubscriptionLoaded:t,isSupergroupEnabled:n("supergroup"),isSupergroupSupportedByPlan:null!=(c=e.plan.supergroup.enabled)&&c,supergroupMemberLimit:null!=(d=e.plan.supergroup.tier)?d:2e3}:{isSubscriptionLoaded:t,isSupergroupEnabled:n("supergroup"),isSupergroupSupportedByPlan:!1,supergroupMemberLimit:2e3}:{isSubscriptionLoaded:!0,...l};var c,d}},Q62E:function(e,t,n){var a=n("I+LG");e.exports=function(e,t){return function(n,i){return a(n,e,t(i),{})}}},QDlc:function(e,t,n){"use strict";function a(){return!1}function i(){return!0}function s(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),s.prototype={isEventObject:1,constructor:s,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){this.isDefaultPrevented=i},stopPropagation:function(){this.isPropagationStopped=i},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=s,e.exports=t.default},QRdY:function(e,t,n){n("xfML"),e.exports=n("VSTI").Object.setPrototypeOf},QbLZ:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("P2sY"),s=(a=i)&&a.__esModule?a:{default:a};t.default=s.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},RNah:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,l.default)(2,arguments);var c=n||{},d=c.locale||o.default;if(!d.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var u=(0,i.default)(e,t);if(isNaN(u))throw new RangeError("Invalid time value");var p,g,h=(0,r.default)(c);h.addSuffix=Boolean(c.addSuffix),h.comparison=u,u>0?(p=(0,s.default)(t),g=(0,s.default)(e)):(p=(0,s.default)(e),g=(0,s.default)(t));var m,f=null==c.roundingMethod?"round":String(c.roundingMethod);if("floor"===f)m=Math.floor;else if("ceil"===f)m=Math.ceil;else{if("round"!==f)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");m=Math.round}var b,j=g.getTime()-p.getTime(),y=j/6e4,O=(0,a.default)(g)-(0,a.default)(p),v=(j-O)/6e4;b=null==c.unit?y<1?"second":y<60?"minute":y<1440?"hour":v<43200?"day":v<525600?"month":"year":String(c.unit);if("second"===b){var x=m(j/1e3);return d.formatDistance("xSeconds",x,h)}if("minute"===b){var _=m(y);return d.formatDistance("xMinutes",_,h)}if("hour"===b){var C=m(y/60);return d.formatDistance("xHours",C,h)}if("day"===b){var k=m(v/1440);return d.formatDistance("xDays",k,h)}if("month"===b){var w=m(v/43200);return 12===w&&"month"!==c.unit?d.formatDistance("xYears",1,h):d.formatDistance("xMonths",w,h)}if("year"===b){var T=m(v/525600);return d.formatDistance("xYears",T,h)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")};var a=c(n("VGX7")),i=c(n("zmLq")),s=c(n("2Oix")),r=c(n("VBDh")),o=c(n("IogR")),l=c(n("YGjY"));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},S4vA:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"S8/c":function(e,t,n){"use strict";var a=n("q1tI"),i=n("vOnD"),s=n("JsuU"),r=n("nKUr");const o=i.default.h2.withConfig({displayName:"UsageHelper__UsageHelperTitle",componentId:"sc-1evi5z5-0"})(["",";color:",";"],s.Typography["label-02"],Object(s.cssVariables)("content-3")),l=i.default.p.withConfig({displayName:"UsageHelper__UsageHelperDescription",componentId:"sc-1evi5z5-1"})(["",";color:",";b,strong{font-weight:600;}& + &{margin-top:16px;}"],s.Subtitles["subtitle-01"],Object(s.cssVariables)("content-1")),c=i.default.ul.withConfig({displayName:"UsageHelper__UsageHelperActions",componentId:"sc-1evi5z5-2"})(["margin-top:2px;"]),d=i.default.li.withConfig({displayName:"UsageHelper__UsageHelperAction",componentId:"sc-1evi5z5-3"})(["display:flex;align-items:center;min-height:32px;transform:translateX(","px);& + &{margin-left:24px;}"],({$type:e})=>"button"===e?-12:0),u=i.default.div.withConfig({displayName:"UsageHelper__UsageHelperBox",componentId:"sc-1evi5z5-4"})(["padding:24px 24px 16px;width:100%;background:",";border-radius:4px;"," + ","{margin-top:4px;}",";"],Object(s.cssVariables)("bg-2"),o,l,({isMultipleContents:e})=>e&&Object(i.css)([""," + ","{margin-top:12px;}"," + ","{margin-top:16px;}"," + ","{margin-top:8px;}","{margin-top:0;}"],o,l,l,o,c,l,c));t.a=({className:e,title:t,contents:n,isMultipleContents:i=!1})=>{const p=Object(a.useCallback)(({description:e,descriptionSuffix:t,actions:n})=>Object(r.jsxs)(r.Fragment,{children:[e&&Object(r.jsxs)(l,{children:[e,t]}),n&&Object(r.jsx)(c,{children:n.map((e,t)=>{if("link"===e.type){const{type:n,label:a,href:i,target:o,icon:l,onClick:c}=e;return Object(r.jsx)(d,{$type:n,children:Object(r.jsxs)(s.Link,{href:i,target:null!=o?o:"_blank",onClick:c,children:[a," ",Object(r.jsx)(s.Icon,{size:16,icon:null!=l?l:"open-in-new"})]})},t)}const{type:n,label:a,icon:i,onClick:o}=e;return Object(r.jsx)(d,{$type:n,children:Object(r.jsx)(s.Button,{buttonType:"primary",size:"small",icon:null!=i?i:"chevron-right",variant:"ghost",onClick:o,children:a})},t)})})]}),[]);return Object(r.jsxs)(u,{className:e,isMultipleContents:i,children:[Object(r.jsx)(o,{children:t}),Array.isArray(n)?n.map(e=>p(e)):p(n)]})}},SEkw:function(e,t,n){e.exports={default:n("N4c9"),__esModule:!0}},Siog:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("rwOc"))&&a.__esModule?a:{default:a};var s={ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,i.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};t.default=s,e.exports=t.default},SuOv:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-file-storage/2908"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("h4",null,"[Formula]"),Object(a.a)("p",null,"File storage is measured once a day and added to the cumulative monthly usage.\nThe usage does not reset unless file(s) is deleted by users or channel retention."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following is an example of usage calculation for file storage at an application level."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"Usage for January 1 - 31:"),"\nJanuary 1: stored 1GB\nJanuary 10: stored 2GB\nJanuary 15: stored 6GB")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"file storage")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"1GB + 2GB + 6GB = 9GB"))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all file size stored in Sendbird server across all existing applications within the organization.\nThe usage does not reset unless file(s) is deleted by a user or channel retention."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nfile size stored for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A :")," 40 GB\n",Object(a.a)("strong",{parentName:"p"},"App B :")," 100 GB\n",Object(a.a)("strong",{parentName:"p"},"App C :")," 20 GB")),Object(a.a)("p",null,"Then, organization’s ",Object(a.a)("strong",{parentName:"p"},"file storage")," for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"40 + 100 + 20 = ",Object(a.a)("strong",{parentName:"p"},"160 GB")))))}l.isMDXComponent=!0},TD4Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("dDsW"),i=n("UWC4");const s=(e,t)=>{switch(t){case i.Ub.active_channels:case i.Ub.created_channels:return e.formatMessage({id:"chat.analytics.unit.channels"});case i.Ub.messages:case i.Ub.messages_per_user:return e.formatMessage({id:"chat.analytics.unit.messages"});case i.Ub.created_users:case i.Ub.deactivated_users:case i.Ub.deleted_users:case i.Ub.message_senders:case i.Ub.message_viewers:return e.formatMessage({id:"chat.analytics.unit.users"});case"channel_member":return e.formatMessage({id:"chat.analytics.unit.members"});default:return"all"}},r=()=>{const e=Object(a.a)();return{getMetricMessages:t=>Object.keys(i.Ub).includes(t)||"channel_member"===t?{header:e.formatMessage({id:`chat.analytics.${t}.header`,defaultMessage:t}),description:e.formatMessage({id:`chat.analytics.${t}.description`,defaultMessage:t}),detail:e.formatMessage({id:`chat.analytics.${t}.detail.description`,defaultMessage:t}),unit:s(e,t)}:void 0}}},TFIY:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI"),i=n("UWC4"),s=n("W7Pl");const r=()=>{const{isSelfService:e}=Object(s.h)(),{currentSubscription:t,reload:n,isLoading:r}=Object(s.m)(i.bc.Support);return Object(a.useEffect)(()=>{n()},[n]),r?{isAvailable:void 0,isLoading:r}:{isAvailable:!e||!!t,isLoading:r}}},TSC6:function(e,t,n){var a=n("GRew"),i=n("ENu8"),s=n("bKEA"),r=n("M5dz"),o=n("nA4W"),l=n("+vXQ"),c=Object.getOwnPropertyDescriptor;t.f=n("C61u")?c:function(e,t){if(e=s(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(o(e,t))return i(!a.f.call(e,t),e[t])}},TYje:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},TnF5:function(e,t,n){n("4Zg2")("observable")},Trx6:function(e,t,n){var a=n("TYje");e.exports=Array.isArray||function(e){return"Array"==a(e)}},UB5X:function(e,t,n){var a=n("NykK"),i=n("ExA7");e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==a(e)}},UMY1:function(e,t,n){var a=n("oMRN"),i=n("JD84"),s=n("ut/Y"),r=n("Z0cm");e.exports=function(e,t){return function(n,o){var l=r(n)?a:i,c=t?t():{};return l(n,e,s(o,2),c)}}},UR8F:function(e,t,n){n("C5kU"),n("ZY/g"),e.exports=n("/NTb").f("iterator")},USwo:function(e,t,n){var a=n("7whZ"),i=n("VSTI"),s=n("nAx8"),r=n("BRsN"),o=n("nA4W"),l=function(e,t,n){var c,d,u,p=e&l.F,g=e&l.G,h=e&l.S,m=e&l.P,f=e&l.B,b=e&l.W,j=g?i:i[t]||(i[t]={}),y=j.prototype,O=g?a:h?a[t]:(a[t]||{}).prototype;for(c in g&&(n=t),n)(d=!p&&O&&void 0!==O[c])&&o(j,c)||(u=d?O[c]:n[c],j[c]=g&&"function"!=typeof O[c]?n[c]:f&&d?s(u,a):b&&O[c]==u?function(e){var t=function(t,n,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,a)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):m&&"function"==typeof u?s(Function.call,u):u,m&&((j.virtual||(j.virtual={}))[c]=u,e&l.R&&y&&!y[c]&&r(y,c,u)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},UcQH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a=[{code:"AF",name:"Afghanistan"},{code:"AX",name:"Åland Islands"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia, Plurinational State of"},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo, the Democratic Republic of the"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Côte d'Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CW",name:"Curaçao"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See (Vatican City State)"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia, the Former Yugoslav Republic of"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia, Federated States of"},{code:"MD",name:"Moldova, Republic of"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestine, State of"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Réunion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthélemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin (French part)"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten (Dutch part)"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syrian Arab Republic"},{code:"TW",name:"Taiwan, Province of China"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VN",name:"Viet Nam"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}]},UfWW:function(e,t,n){var a=n("KwMD"),i=n("ut/Y"),s=n("Sxd8"),r=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var l=null==n?0:s(n);return l<0&&(l=r(o+l,0)),a(e,i(t,3),l)}},V7oC:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("SEkw"),s=(a=i)&&a.__esModule?a:{default:a};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,s.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()},V9xz:function(e,t){e.exports=function(e,t){return e>t}},VBDh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)({},e)};var a,i=(a=n("XXoF"))&&a.__esModule?a:{default:a};e.exports=t.default},VGX7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},e.exports=t.default},VSTI:function(e,t){var n=e.exports={version:"2.6.8"};"number"==typeof __e&&(__e=n)},"VZc+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("W7Pl");const i=()=>Object(a.Y)(e=>{var t,n;return null!=(t=null==(n=e.applicationState.data)?void 0:n.attrs.item_limit.group_joined_member_cnt)?t:100})},WjD0:function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},WpRT:function(e,t,n){var a=n("s2er")("keys"),i=n("ixoo");e.exports=function(e){return a[e]||(a[e]=i(e))}},XKAG:function(e,t,n){var a=n("ut/Y"),i=n("MMmD"),s=n("7GkX");e.exports=function(e){return function(t,n,r){var o=Object(t);if(!i(t)){var l=a(n,3);t=s(t),n=function(e){return l(o[e],e,o)}}var c=e(t,n,r);return c>-1?o[l?t[c]:c]:void 0}}},XXoF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e.exports=t.default},Xep9:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("/h9T"),i=n("9/EM"),s=n("jIYg");function r(e,t){Object(s.a)(2,arguments);var n=Object(a.a)(t);return Object(i.a)(e,-n)}},XfZS:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-auto-image-moderation/2915"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"Each message blocked by image moderation is counted as one usage."),Object(a.a)("p",null,Object(a.a)("strong",{parentName:"p"},"Note:")," Image moderation is powered by Google Cloud Vision API which moderates the text and file messages with explicit images or inappropriate image URLs, and uses five categories such as adult, spoof, medical, violence, and racy.")),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all applications’ usages within your organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nAuto-moderated image count for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 3 images\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 5 images\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 2 images")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"organization usage")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"3+5+2 = ",Object(a.a)("strong",{parentName:"p"},"10 auto-moderated images")))))}l.isMDXComponent=!0},Xvkt:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var a=n("q1tI"),i=n("nKUr");const s=Object(a.createContext)(void 0),r=Object(a.createContext)(void 0),o=({children:e})=>{const t=Object(a.useRef)(null),n=Object(a.useCallback)(e=>{t.current=e},[]);return Object(i.jsx)(r.Provider,{value:t,children:Object(i.jsx)(s.Provider,{value:n,children:e})})},l=()=>{const e=Object(a.useContext)(r);if(void 0===typeof e)throw new Error("useCallWidgetApp must be used within a CallWidgetAppProvider");return e.current},c=()=>{const e=Object(a.useContext)(s);if(void 0===typeof e)throw new Error("useCallWidgetAppUpdater must be used within a CallWidgetAppProvider");return e}},"Y/nA":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("E9XD"),n("UxlC");var a=n("q1tI"),i=n("Ty5D"),s=n("Qyje"),r=n.n(s),o=n("ponP"),l=n("ols6");const c=(e,t)=>{const n=Object(i.k)(),s=Object(l.a)(e),c=Object(l.a)(t),d=Object(a.useCallback)(()=>((e="",t)=>{const n=Object(o.camelCaseKeys)(r.a.parse(e)),a=Object.keys(n).reduce((e,a)=>(a in t&&"number"==typeof t[a]?e[a]=parseInt(n[a]):e[a]=n[a],e),{});return e?a:t})(n.location.search.replace(/^\?/,""),s.current),[s,n.location.search]),u=Object(a.useCallback)((e,t=!1)=>{const a={...d(),...Object(o.camelCaseKeys)(e)},i=n.location.search.replace(/^\?/,""),s=(e=>{const t=Object(o.snakeCaseKeys)(e);return Object.keys(t).filter(e=>!t[e]).forEach(e=>{delete t[e]}),r.a.stringify(t,{arrayFormat:"repeat"})})(a);s!==i&&(t?n.replace(`${n.location.pathname}?${s}`):n.push(`${n.location.pathname}?${s}`))},[d,n]),p=Object(a.useCallback)((e=!0)=>u(s.current,e),[s,u]),g=Object(a.useMemo)(()=>{const e=d();if(c.current){const t=Object.keys(c.current).reduce((t,n)=>(c.current[n]&&!c.current[n](e[n],e)&&(t[n]=s.current[n]),t),{...e});return u(t,!0),t}return e},[s,d,u,c]);return Object(a.useMemo)(()=>({...g,updateParams:u,clearParams:p}),[p,g,u])}},YEIV:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("SEkw"),s=(a=i)&&a.__esModule?a:{default:a};t.default=function(e,t,n){return t in e?(0,s.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},YGjY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default},YS3K:function(e,t,n){var a=n("idjV").runInContext();e.exports=n("ttrC")(a,a)},"Ym+k":function(e,t,n){var a=n("MO+k");(a="function"==typeof a?a:window.Chart).Annotation=a.Annotation||{},a.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},a.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},a.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:a.defaults.global.defaultFontFamily,fontSize:a.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},a.Annotation.Element=n("xxsC")(a),a.Annotation.types={line:n("u5p2")(a),box:n("MoIz")(a)};var i=n("grSx")(a);e.exports=i,a.pluginService.register(i)},ZDin:function(e,t,n){var a=n("A9a0"),i=n("l0Kd").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,i)}},"ZY/g":function(e,t,n){n("aFj7");for(var a=n("7whZ"),i=n("BRsN"),s=n("ig3W"),r=n("zBWt")("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var c=o[l],d=a[c],u=d&&d.prototype;u&&!u[r]&&i(u,r,c),s[c]=s.Array}},aD8z:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n("q1tI"),i=n("vOnD"),s=n("8zZ3"),r=n("nKUr");const o=Object(i.default)(s.a).attrs({tooltipDisplay:"inline-block",tooltipStyle:Object(i.css)(["vertical-align:bottom;"])}).withConfig({displayName:"TicketActionToastMessage__TicketChannelNameEllipsis",componentId:"duioin-0"})(["max-width:200px;"]);let l;!function(e){e.ASSIGNED="ASSIGNED",e.TRANSFERRED_TO_AGENT="TRANSFERRED_TO_AGENT",e.TRANSFERRED_TO_TEAM="TRANSFERRED_TO_TEAM",e.CLOSED="CLOSED",e.REOPENED="REOPENED"}(l||(l={}));const c={[l.ASSIGNED]:"desk.ticket.update.message.ticketAssigned",[l.CLOSED]:"desk.ticket.update.message.ticketClosed",[l.REOPENED]:"desk.ticket.update.message.ticketReopened",[l.TRANSFERRED_TO_AGENT]:"desk.ticket.update.message.ticketTransferred",[l.TRANSFERRED_TO_TEAM]:"desk.ticket.update.message.transferToAgentGroup"},d=Object(a.memo)(({action:e,ticketChannelName:t,teamName:n})=>{const{intl:a}=window;return Object(r.jsx)(r.Fragment,{children:a.formatMessage({id:c[e]},{ticketChannelName:Object(r.jsx)(o,{children:t}),teamName:n})})})},aFj7:function(e,t,n){"use strict";var a=n("L5pH"),i=n("6jRP"),s=n("ig3W"),r=n("bKEA");e.exports=n("OTpG")(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},aT0f:function(e,t,n){"use strict";var a=n("7whZ"),i=n("nA4W"),s=n("C61u"),r=n("USwo"),o=n("ugGH"),l=n("40oJ").KEY,c=n("S4vA"),d=n("s2er"),u=n("kvAF"),p=n("ixoo"),g=n("zBWt"),h=n("/NTb"),m=n("4Zg2"),f=n("CuL1"),b=n("Trx6"),j=n("d+lc"),y=n("ekG2"),O=n("CYMq"),v=n("bKEA"),x=n("M5dz"),_=n("ENu8"),C=n("b08l"),k=n("GDZC"),w=n("TSC6"),T=n("/tXR"),S=n("GhSp"),E=n("mHY4"),I=w.f,M=S.f,D=k.f,A=a.Symbol,N=a.JSON,R=N&&N.stringify,P=g("_hidden"),L=g("toPrimitive"),F={}.propertyIsEnumerable,U=d("symbol-registry"),$=d("symbols"),B=d("op-symbols"),V=Object.prototype,z="function"==typeof A&&!!T.f,H=a.QObject,q=!H||!H.prototype||!H.prototype.findChild,G=s&&c((function(){return 7!=C(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var a=I(V,t);a&&delete V[t],M(e,t,n),a&&e!==V&&M(V,t,a)}:M,W=function(e){var t=$[e]=C(A.prototype);return t._k=e,t},K=z&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},Y=function(e,t,n){return e===V&&Y(B,t,n),j(e),t=x(t,!0),j(n),i($,t)?(n.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),n=C(n,{enumerable:_(0,!1)})):(i(e,P)||M(e,P,_(1,{})),e[P][t]=!0),G(e,t,n)):M(e,t,n)},Q=function(e,t){j(e);for(var n,a=f(t=v(t)),i=0,s=a.length;s>i;)Y(e,n=a[i++],t[n]);return e},J=function(e){var t=F.call(this,e=x(e,!0));return!(this===V&&i($,e)&&!i(B,e))&&(!(t||!i(this,e)||!i($,e)||i(this,P)&&this[P][e])||t)},X=function(e,t){if(e=v(e),t=x(t,!0),e!==V||!i($,t)||i(B,t)){var n=I(e,t);return!n||!i($,t)||i(e,P)&&e[P][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(v(e)),a=[],s=0;n.length>s;)i($,t=n[s++])||t==P||t==l||a.push(t);return a},ee=function(e){for(var t,n=e===V,a=D(n?B:v(e)),s=[],r=0;a.length>r;)!i($,t=a[r++])||n&&!i(V,t)||s.push($[t]);return s};z||(o((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(B,n),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),G(this,e,_(1,n))};return s&&q&&G(V,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),w.f=X,S.f=Y,n("ZDin").f=k.f=Z,n("GRew").f=J,T.f=ee,s&&!n("5ETA")&&o(V,"propertyIsEnumerable",J,!0),h.f=function(e){return W(g(e))}),r(r.G+r.W+r.F*!z,{Symbol:A});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)g(te[ne++]);for(var ae=E(g.store),ie=0;ae.length>ie;)m(ae[ie++]);r(r.S+r.F*!z,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=A(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),r(r.S+r.F*!z,"Object",{create:function(e,t){return void 0===t?C(e):Q(C(e),t)},defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var se=c((function(){T.f(1)}));r(r.S+r.F*se,"Object",{getOwnPropertySymbols:function(e){return T.f(O(e))}}),N&&r(r.S+r.F*(!z||c((function(){var e=A();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,a=[e],i=1;arguments.length>i;)a.push(arguments[i++]);if(n=t=a[1],(y(t)||void 0!==e)&&!K(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),a[1]=t,R.apply(N,a)}}),A.prototype[L]||n("BRsN")(A.prototype,L,A.prototype.valueOf),u(A,"Symbol"),u(Math,"Math",!0),u(a.JSON,"JSON",!0)},aTND:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("dDsW"),i=n("JsuU"),s=n("Mfcq"),r=n("W7Pl"),o=n("nKUr");const l=({style:e})=>{const t=Object(a.a)(),n=Object(r.W)(),l=()=>{n({dialogTypes:s.a.ConvertFreePlan})};return Object(o.jsx)("div",{style:e,children:Object(o.jsx)(i.InlineNotification,{type:"info",message:t.formatMessage({id:"common.notification.convertFreePlan"},{a:e=>Object(o.jsx)(i.Link,{role:"button",variant:i.LinkVariant.Inline,onClick:l,style:{marginLeft:"8px"},children:e})}),iconProps:{icon:"gift",size:20}})})}},aUsF:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,s;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=a;0!=i--;){var r=s[i];if(!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},apcR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("bo1M"),i=n("psfB");function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every((function(e){return"number"==typeof e}))}t.default=function(e,t){if(!e||!t)throw new Error("Missing required parameters");return{changed:function(n){var s=i.get(e,n),r=i.get(t,n);return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every(Array.isArray)}(s,r)||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.every((function(e){if(!e)return!1;var t=Object.getPrototypeOf(e);return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&(null===t||t===Object.getPrototypeOf({}))}))}(s,r)?!!a.diff(s,r):s!==r},changedFrom:function(n,a,s){if(void 0===n)throw new Error("Key parameter is required");var r=void 0!==a&&void 0!==s,o=i.get(e,n),l=i.get(t,n),c=Array.isArray(a)?a.indexOf(o)>=0:o===a,d=Array.isArray(s)?s.indexOf(l)>=0:l===s;return c&&(r?d:!r)},changedTo:function(n,a){if(void 0===n)throw new Error("Key parameter is required");var s=i.get(e,n),r=i.get(t,n),o=Array.isArray(a)?a.indexOf(s)<0:s!==a,l=Array.isArray(a)?a.indexOf(r)>=0:r===a;return o&&l},increased:function(n){if(void 0===n)throw new Error("Key parameter is required");return s(i.get(e,n),i.get(t,n))&&i.get(e,n)<i.get(t,n)},decreased:function(n){if(void 0===n)throw new Error("Key parameter is required");return s(i.get(e,n),i.get(t,n))&&i.get(e,n)>i.get(t,n)}}}},b08l:function(e,t,n){var a=n("d+lc"),i=n("heda"),s=n("l0Kd"),r=n("WpRT")("IE_PROTO"),o=function(){},l=function(){var e,t=n("BfU5")("iframe"),a=s.length;for(t.style.display="none",n("kUGv").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;a--;)delete l.prototype[s[a]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(o.prototype=a(e),n=new o,o.prototype=null,n[r]=e):n=l(),void 0===t?n:i(n,t)}},bHSY:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("dDsW"),i=n("6889"),s=n("nKUr");const r=()=>{const e=Object(a.a)();return Object(s.jsx)(i.qb,{content:e.formatMessage({id:"chat.channels.dataFieldTooltip"})})}},bKEA:function(e,t,n){var a=n("n7vu"),i=n("yQFZ");e.exports=function(e){return a(i(e))}},bo1M:function(e,t,n){var a,i;i=function(e){var t=["N","E","A","D"];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function a(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function s(e,t){s.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function r(e,t){r.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var a=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,a),e}function c(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function d(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function u(e){var t=0,n=c(e);if("array"===n)return e.forEach((function(e){t+=u(e)})),t+d("[type: array, hash: "+t+"]");if("object"===n){for(var a in e)if(e.hasOwnProperty(a)){var i="[ type: object, key: "+a+", value hash: "+u(e[a])+"]";t+=d(i)}return t}return t+d("[ type: "+n+" ; value: "+e+"]")}function p(e,t,n,a,l,d,g,h){n=n||[],g=g||[];var m=(l=l||[]).slice(0);if(null!=d){if(a){if("function"==typeof a&&a(m,d))return;if("object"==typeof a){if(a.prefilter&&a.prefilter(m,d))return;if(a.normalize){var f=a.normalize(m,d,e,t);f&&(e=f[0],t=f[1])}}}m.push(d)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var b,j,y,O,v=typeof e,x=typeof t,_="undefined"!==v||g&&g.length>0&&g[g.length-1].lhs&&Object.getOwnPropertyDescriptor(g[g.length-1].lhs,d),C="undefined"!==x||g&&g.length>0&&g[g.length-1].rhs&&Object.getOwnPropertyDescriptor(g[g.length-1].rhs,d);if(!_&&C)n.push(new s(m,t));else if(!C&&_)n.push(new r(m,e));else if(c(e)!==c(t))n.push(new i(m,e,t));else if("date"===c(e)&&e-t!=0)n.push(new i(m,e,t));else if("object"===v&&null!==e&&null!==t){for(b=g.length-1;b>-1;--b)if(g[b].lhs===e){O=!0;break}if(O)e!==t&&n.push(new i(m,e,t));else{if(g.push({lhs:e,rhs:t}),Array.isArray(e)){for(h&&(e.sort((function(e,t){return u(e)-u(t)})),t.sort((function(e,t){return u(e)-u(t)}))),b=t.length-1,j=e.length-1;b>j;)n.push(new o(m,b,new s(void 0,t[b--])));for(;j>b;)n.push(new o(m,j,new r(void 0,e[j--])));for(;b>=0;--b)p(e[b],t[b],n,a,m,b,g,h)}else{var k=Object.keys(e),w=Object.keys(t);for(b=0;b<k.length;++b)y=k[b],(O=w.indexOf(y))>=0?(p(e[y],t[y],n,a,m,y,g,h),w[O]=null):p(e[y],void 0,n,a,m,y,g,h);for(b=0;b<w.length;++b)(y=w[b])&&p(void 0,t[y],n,a,m,y,g,h)}g.length=g.length-1}}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||n.push(new i(m,e,t)))}function g(e,t,n,a,i){var s=[];if(p(e,t,s,a,null,null,null,i),n)for(var r=0;r<s.length;++r)n(s[r]);return s}function h(e,t,n,a){var i=g(e,t,a?function(e){e&&a.push(e)}:void 0,n);return a||(i.length?i:void 0)}function m(e,n,a){if(void 0===a&&n&&~t.indexOf(n.kind)&&(a=n),e&&a&&a.kind){for(var i=e,s=-1,r=a.path?a.path.length-1:0;++s<r;)void 0===i[a.path[s]]&&(i[a.path[s]]=void 0!==a.path[s+1]&&"number"==typeof a.path[s+1]?[]:{}),i=i[a.path[s]];switch(a.kind){case"A":a.path&&void 0===i[a.path[s]]&&(i[a.path[s]]=[]),function e(t,n,a){if(a.path&&a.path.length){var i,s=t[n],r=a.path.length-1;for(i=0;i<r;i++)s=s[a.path[i]];switch(a.kind){case"A":e(s[a.path[i]],a.index,a.item);break;case"D":delete s[a.path[i]];break;case"E":case"N":s[a.path[i]]=a.rhs}}else switch(a.kind){case"A":e(t[n],a.index,a.item);break;case"D":t=l(t,n);break;case"E":case"N":t[n]=a.rhs}return t}(a.path?i[a.path[s]]:i,a.index,a.item);break;case"D":delete i[a.path[s]];break;case"E":case"N":i[a.path[s]]=a.rhs}}}return n(i,a),n(s,a),n(r,a),n(o,a),Object.defineProperties(h,{diff:{value:h,enumerable:!0},orderIndependentDiff:{value:function(e,t,n,a){var i=a?function(e){e&&a.push(e)}:void 0,s=g(e,t,i,n,!0);return a||(s.length?s:void 0)},enumerable:!0},observableDiff:{value:g,enumerable:!0},orderIndependentObservableDiff:{value:function(e,t,n,a,i,s,r){return p(e,t,n,a,i,s,r,!0)},enumerable:!0},orderIndepHash:{value:u,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&g(e,t,(function(a){n&&!n(e,t,a)||m(e,t,a)}))},enumerable:!0},applyChange:{value:m,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var a,i,s=e;for(i=n.path.length-1,a=0;a<i;a++)void 0===s[n.path[a]]&&(s[n.path[a]]={}),s=s[n.path[a]];switch(n.kind){case"A":!function e(t,n,a){if(a.path&&a.path.length){var i,s=t[n],r=a.path.length-1;for(i=0;i<r;i++)s=s[a.path[i]];switch(a.kind){case"A":e(s[a.path[i]],a.index,a.item);break;case"D":case"E":s[a.path[i]]=a.lhs;break;case"N":delete s[a.path[i]]}}else switch(a.kind){case"A":e(t[n],a.index,a.item);break;case"D":case"E":t[n]=a.lhs;break;case"N":t=l(t,n)}return t}(s[n.path[a]],n.index,n.item);break;case"D":case"E":s[n.path[a]]=n.lhs;break;case"N":delete s[n.path[a]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),h.DeepDiff=h,e&&(e.DeepDiff=h),h}(this),void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a)},"d+lc":function(e,t,n){var a=n("ekG2");e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},d8FT:function(e,t,n){var a=n("eUgh"),i=n("ut/Y"),s=n("idmN"),r=n("G6z8");e.exports=function(e,t){if(null==e)return{};var n=a(r(e),(function(e){return[e]}));return t=i(t),s(e,n,(function(e,n){return t(e,n[0])}))}},dAtF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n,a){return"boolean"==typeof e?e:"function"==typeof e?e(t,n,a):!(!0!=!!e||!e)},i=function(e,t){return Object.hasOwnProperty.call(e,t)},s=function(e,t,n,a){return a?new Error(a):new Error("Required "+e[t]+" `"+t+"` was not specified in `"+n+"`.")};t.default=function(e,t,n){return function(e,t){if("function"!=typeof e)throw new TypeError("The typeValidator argument must be a function with the signature function(props, propName, componentName).");if(t&&"string"!=typeof t)throw new TypeError("The error message is optional, but must be a string if provided.")}(e,n),function(r,o,l){for(var c=arguments.length,d=Array(3<c?c-3:0),u=3;u<c;u++)d[u-3]=arguments[u];return a(t,r,o,l)?i(r,o)?e.apply(void 0,[r,o,l].concat(d)):s(r,o,l,n):e.apply(void 0,[r,o,l].concat(d))}}},dbbN:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));n("3bBZ");var a=n("q1tI"),i=n("dDsW"),s=n("vOnD"),r=n("JsuU"),o=n("sEfC"),l=n.n(o),c=n("DzJC"),d=n.n(c),u=n("hxiM"),p=n.n(u),g=n("Tqso"),h=n("UWC4"),m=n("Nxul"),f=n("XzEE"),b=n("NuuC"),j=n("W7Pl"),y=n("6889"),O=n("gYqh"),v=n("nKUr");const x=s.default.span.withConfig({displayName:"agentsSearchDropdown__AgentName",componentId:"sc-2zq1n3-0"})(["display:flex;align-items:center;font-size:14px;font-weight:500;color:",";line-height:1.14;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],Object(r.cssVariables)("neutral-10")),_=s.default.span.withConfig({displayName:"agentsSearchDropdown__AgentEmail",componentId:"sc-2zq1n3-1"})(["display:block;font-style:normal;color:",";line-height:1.33;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],Object(r.cssVariables)("neutral-6")),C=Object(s.default)(_).withConfig({displayName:"agentsSearchDropdown__AgentBotType",componentId:"sc-2zq1n3-2"})(["display:block;"]),k=s.default.div.withConfig({displayName:"agentsSearchDropdown__DropdownItemWrapper",componentId:"sc-2zq1n3-3"})(["display:flex;align-items:center;width:100%;height:38px;& > div,& > svg{display:flex;flex-direction:column;justify-content:center;margin-left:12px;font-size:12px;overflow-x:hidden;","{color:",";& > div:first-child{max-width:calc(100% - 20px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}}","{color:",";}}& > svg{margin-left:6px;margin-right:6px;}"],x,({isSelected:e})=>e?Object(r.cssVariables)("purple-7"):Object(r.cssVariables)("neutral-10"),_,({isSelected:e})=>e?Object(r.cssVariables)("purple-4"):Object(r.cssVariables)("neutral-6")),w=s.default.div.withConfig({displayName:"agentsSearchDropdown__AgentInfoContainer",componentId:"sc-2zq1n3-4"})(["flex:1;"]),T=s.default.div.withConfig({displayName:"agentsSearchDropdown__GroupItem",componentId:"sc-2zq1n3-5"})(["display:flex;align-items:center;width:100%;height:20px;font-size:14px;font-weight:500;color:",";"],({isSelected:e})=>e?Object(r.cssVariables)("purple-7"):Object(r.cssVariables)("neutral-10")),S=s.default.div.withConfig({displayName:"agentsSearchDropdown__DropdownToggleWrapper",componentId:"sc-2zq1n3-6"})(["display:flex;align-items:center;padding:",";max-width:",";min-width:96px;",";svg{transition:fill 0.2s ",";"," ","}"],({variant:e})=>"inline"===e?0:"0 4px 0 16px",({isToggleFullWidth:e})=>e?"calc(100% - 48px)":"190px",r.Subtitles["subtitle-01"],r.transitionDefault,({isOpen:e})=>e&&`fill: ${Object(r.cssVariables)("purple-7")};`,({disabled:e})=>e&&`fill: ${Object(r.cssVariables)("neutral-3")};`),E=s.default.div.withConfig({displayName:"agentsSearchDropdown__ToggleAgent",componentId:"sc-2zq1n3-7"})(["display:flex;flex-direction:row;width:100%;"]),I=Object(s.default)(y.jc).withConfig({displayName:"agentsSearchDropdown__ToggleAgentName",componentId:"sc-2zq1n3-8"})(["max-width:",";"],({isToggleFullWidth:e})=>e?"100%":"120px");var M=Object(s.default)(I).withConfig({displayName:"agentsSearchDropdown___StyledToggleAgentName",componentId:"sc-2zq1n3-9"})(["",""],e=>e._css);const D=s.default.div.withConfig({displayName:"agentsSearchDropdown__EmptyViewWrapper",componentId:"sc-2zq1n3-10"})(["display:flex;align-items:center;justify-content:center;height:104px;",";color:",";"],r.Subtitles["subtitle-01"],Object(r.cssVariables)("neutral-5")),A=Object(a.memo)(({selectedItem:e,placeholder:t,agentType:n,textWhenAllAgentsSelected:s,isToggleFullWidth:o,isOpen:l})=>{const c=Object(i.a)(),d=Object(j.o)(),u=-1===(null==e?void 0:e.id),p=n===h.h.BOT,g=(null==e?void 0:e.id)===d.id?d:e,f=Object(a.useMemo)(()=>g?u?{agentThumbnail:null,agentName:s||c.formatMessage({id:"desk.agentSelect.dropdown.item.allAgents"})}:{agentThumbnail:Object(v.jsx)(m.a,{isBotOnly:p,agent:g,size:20}),agentName:g.displayName||h.Z}:{agentThumbnail:Object(v.jsx)(r.Icon,{icon:p?"bot":"user-avatar",size:20,color:!l&&Object(r.cssVariables)("neutral-6")||void 0}),agentName:t||c.formatMessage({id:"desk.agentSelect.dropdown.item.placeholder"})},[c,u,p,l,t,g,s]);return Object(v.jsxs)(E,{"data-test-id":"SelectedAgent",children:[f.agentThumbnail,Object(v.jsx)(M,{testId:"SelectedAgentName",tooltipDisplay:"inline-block",isToggleFullWidth:o,_css:u?void 0:"margin-left: 8px;",children:f.agentName})]})});var N=Object(s.default)(r.Dropdown).withConfig({displayName:"agentsSearchDropdown___StyledDropdown",componentId:"sc-2zq1n3-11"})(["margin-left:4px;"]);const R=Object(a.memo)(({groups:e,isLoading:t,selectedGroup:n,disabled:s,hasMoreGroups:r,onItemSelected:o,fetchAgentGroups:l})=>{const c=Object(i.a)(),u=Object(a.useRef)(null),p=Object(a.useRef)(()=>{}),g=Object(a.useMemo)(()=>({id:-1,name:c.formatMessage({id:"desk.agentSelect.dropdown.item.allTeams"}),key:"all",description:null,project:0,createdAt:"",createdBy:0,memberCount:0}),[c]),h=e=>{if(e){var t;const{current:n}=u;n&&n.disconnect(),u.current=new IntersectionObserver(e=>{const[t]=e;t&&t.isIntersecting&&p.current()},{root:null==(t=e.parentNode)?void 0:t.parentElement}),u.current.observe(e)}},m=Object(a.useCallback)(()=>{d()(()=>{r&&l({offset:e.length})},200)},[l,e.length,r]);return Object(a.useEffect)(()=>{p.current=()=>{m()}},[m]),Object(v.jsx)(N,{size:"small",variant:"inline",placement:"bottom-end",items:e,itemToString:e=>null==e.key?c.formatMessage({id:"desk.team.defaultTeam"}):e.id===g.id?c.formatMessage({id:"desk.agentSelect.dropdown.item.allTeams"}):e.name,itemToElement:t=>null==t.key?c.formatMessage({id:"desk.team.defaultTeam"}):t.id===g.id?c.formatMessage({id:"desk.agentSelect.dropdown.item.allTeams"}):Object(v.jsx)(T,{ref:e[e.length-1].id===t.id&&r?h:void 0,isSelected:(null==n?void 0:n.id)===t.id,children:t.name}),selectedItem:n,disabled:s||t,onItemSelected:o})});var P=Object(s.default)(r.Icon).withConfig({displayName:"agentsSearchDropdown___StyledIcon",componentId:"sc-2zq1n3-12"})(["margin-left:0;padding-left:0;"]),L=Object(s.default)(O.a).withConfig({displayName:"agentsSearchDropdown___StyledAgentBadge",componentId:"sc-2zq1n3-13"})(["transform:translateY(-1px);"]),F=Object(s.default)(r.Dropdown).withConfig({displayName:"agentsSearchDropdown___StyledDropdown2",componentId:"sc-2zq1n3-14"})(["width:",";& + ul{width:",";}div li:hover{svg{fill:",";}}",""],e=>e._css2,e=>e._css3,e=>e._css4,e=>e._css5);const U=Object(a.memo)(({selectedAgent:e=null,selectedAgentId:t=null,selectedAgentGroup:n=null,agentType:s,role:o,agentActivationStatus:c=h.c.ACTIVE,placeholder:u,contextualHelpContent:O,textWhenAllAgentsSelected:T,isToggleFullWidth:E=!1,isAllAgentOptionAvailable:I=!1,isAgentGroupDropdownHidden:M=!1,isSearchHidden:N=!1,disabled:U=!1,hasError:$=!1,dropdownProps:B,styles:V,onItemSelected:z})=>{const H=Object(i.a)(),{pid:q,region:G}=Object(b.a)(),W=Object(f.a)(),K=Object(a.useMemo)(()=>({id:-1,name:H.formatMessage({id:"desk.agentSelect.dropdown.item.allTeams"}),key:"all",description:null,project:0,createdAt:"",createdBy:0,memberCount:0}),[H]),Y=Object(a.useMemo)(()=>({id:-1,bot:null,displayName:H.formatMessage({id:"desk.agentSelect.dropdown.item.allAgents"}),user:-1,agentType:h.h.USER,sendbirdId:"all",role:h.f.AGENT,createdAt:"0",status:h.c.ACTIVE,connection:"ONLINE",email:"all@sendbird.com",phoneNumber:"",photoThumbnailUrl:"",project:0,connectionUpdatedAt:"",connectionUpdatedTs:0,tier:h.g.INTERMEDIATE,groups:[]}),[H]),Q="object"==typeof e,J="number"==typeof t&&t>0,X=Object(a.useMemo)(()=>Q?e:I?Y:null,[Y,I,Q,e]),[Z,ee]=Object(a.useState)(X),[te,ne]=Object(a.useState)([]),[ae,ie]=Object(a.useState)([]),[se,re]=Object(a.useState)(M?null:K),oe=Object(a.useRef)(te),le=Object(a.useRef)(0),ce=Object(a.useRef)(0),de=Object(a.useRef)(""),ue=Object(a.useRef)(()=>{}),pe=Object(a.useRef)(null),ge=le.current>te.length,he=ce.current>ae.length,me=Object(j.o)(),fe=s===h.h.BOT,be=e=>{if(e){var t;const{current:n}=pe;n&&n.disconnect(),pe.current=new IntersectionObserver(e=>{const[t]=e;t&&t.isIntersecting&&ue.current()},{root:null==(t=e.parentNode)?void 0:t.parentElement}),pe.current.observe(e)}},je=Object(a.useMemo)(()=>M&&null!=n?n.id:null!=se&&se.id>-1?se.id:void 0,[M,n,se]),[{data:ye,status:Oe,error:ve},xe]=Object(j.g)(async({offset:e,query:t})=>g.g.fetchAgents(q,G,{offset:e,limit:h.qb,group:je,order:"display_name",agentType:s,role:o,status:c,query:t}),[c,je,s,q,G,o],{status:"loading"}),[{data:_e,status:Ce,error:ke},we]=Object(j.g)(async({agentId:e})=>g.g.fetchAgent(q,G,{agentId:e,status:c}),[c,q,G]),[{data:Te,status:Se,error:Ee},Ie]=Object(j.g)(async({offset:e})=>g.g.fetchAgentGroups(q,G,{offset:e,limit:50}),[q,G]),Me=Object(a.useMemo)(()=>d()(()=>{ge&&xe({offset:1===oe.current.length?0:oe.current.length,query:de.current.trim()})},200),[xe,ge]),De="loading"===Oe||"loading"===Ce||"loading"===Se,Ae="error"===Oe||"error"===Se;Object(j.s)(ve||Ee,{ignoreDuplicates:!0}),Object(a.useEffect)(()=>{J&&we({agentId:t})},[we,J,t]),Object(a.useEffect)(()=>{ke&&ee(null)},[ke]),Object(a.useEffect)(()=>{if(_e){const{data:e}=_e;if(null!=n&&e.groups.every(e=>e.id!==n.id))return void ee(null);t===_e.data.id&&ee(e.id===me.id?{...e,displayName:me.displayName,email:me.email,photoThumbnailUrl:me.photoThumbnailUrl,connection:me.connection}:e)}},[me.connection,me.displayName,me.email,me.id,me.photoThumbnailUrl,_e,n,t]),Object(a.useEffect)(()=>{if(ye){const{data:{count:e,previous:t,results:n}}=ye,a=n.map(e=>e.id===me.id?{...e,displayName:me.displayName,email:me.email,photoThumbnailUrl:me.photoThumbnailUrl,connection:me.connection}:e);if(null==t)return ne(a),void(le.current=e);ne(e=>p()(e,a,"id")),le.current=e}},[me.connection,me.displayName,me.email,me.id,me.photoThumbnailUrl,ye]),Object(a.useEffect)(()=>{if(Te){const{data:{count:e,previous:t,results:n}}=Te;if(null==t)return ie([K,...n]),void(ce.current=e);ie(e=>[...e,...n]),ce.current=e}},[K,Te]),Object(a.useEffect)(()=>{n&&n.id!==(null==se?void 0:se.id)&&re(n)},[n,se]),Object(a.useEffect)(()=>{e?ee(e):!I||t&&-1!==t||ee(Y)},[Y,I,e,t]);const Ne=Object(a.useMemo)(()=>{const e=!!de.current;return I&&!e?[Y,...null!=te?te:[]]:te},[te,Y,I]);Object(a.useEffect)(()=>{oe.current=te},[te]),Object(a.useEffect)(()=>{xe({offset:0,query:de.current||void 0})},[xe]),Object(a.useEffect)(()=>{M||Ie({offset:0})},[Ie,M]),Object(a.useEffect)(()=>{ue.current=()=>{Me()}},[te,Me]);const Re=Object(a.useMemo)(()=>l()(e=>{e.trim().length>0?xe({query:e,offset:0}):xe({offset:0})},200),[xe]),Pe=Object(a.useCallback)(e=>{de.current=e,Re(e)},[Re]),Le=Object(a.useCallback)(e=>{e&&z&&(!Q&&!J&&ee(e),z(e)),setTimeout(()=>{xe({offset:0})},300)},[xe,Q,J,z]),Fe=Object(a.useCallback)(e=>{re(e)},[]),Ue=Object(a.useMemo)(()=>Object(v.jsx)(F,{size:"small",variant:"inline",placement:"bottom-start",...B,selectedItem:Z,useSearch:!N,searchPlaceholder:H.formatMessage({id:"desk.agentSelect.dropdown.search.placeholder"}),onSearchChange:Pe,onItemSelected:Le,items:Ne,isItemDisabled:e=>e.id===(null==Z?void 0:Z.id),disabled:U||De,hasError:$||Ae,itemToString:e=>`${e.id}`,itemToElement:e=>{const t=-1===e.id,n=(null==e?void 0:e.id)===(null==Z?void 0:Z.id);return Object(v.jsxs)(k,{ref:te[te.length-1].id===e.id&&ge?be:void 0,isSelected:n,children:[t?Object(v.jsx)(P,{icon:fe?"bot":"user-avatar",size:20,color:n?Object(r.cssVariables)("purple-7"):Object(r.cssVariables)("neutral-10")}):Object(v.jsx)(m.a,{isBotOnly:fe,agent:e}),Object(v.jsxs)(w,{children:[Object(v.jsxs)(x,{"data-test-id":"AgentOptionName",children:[t?T||H.formatMessage({id:"desk.agentSelect.dropdown.item.allAgents"}):Object(v.jsx)(y.jc,{children:Object(v.jsx)(y.lb,{highlightedText:de.current,content:e.displayName,isWrapper:!1})}),Object(v.jsx)(L,{agentType:e.agentType,role:e.role,tier:e.tier})]}),!t&&e.agentType===h.h.USER&&Object(v.jsx)(_,{"data-test-id":"AgentOptionEmail",children:Object(v.jsx)(y.lb,{highlightedText:de.current,content:""===e.email.trim()?h.Z:e.email})}),!t&&e.agentType===h.h.BOT&&e.bot&&Object(v.jsx)(C,{as:"span",children:W(e.bot.type)})]})]})},emptyView:Object(v.jsx)(D,{children:De?Object(v.jsx)(r.Spinner,{}):H.formatMessage({id:fe?"desk.agentSelect.dropdown.noBots":"desk.agentSelect.dropdown.noAgents"})}),toggleRenderer:({selectedItem:e,isOpen:t})=>Object(v.jsx)(S,{isOpen:t,variant:null==B?void 0:B.variant,isToggleFullWidth:E,disabled:U,children:Object(v.jsx)(A,{selectedItem:null!=e?e:void 0,agentType:s,isOpen:t,textWhenAllAgentsSelected:T,placeholder:u,isToggleFullWidth:E})}),header:!M&&Object(v.jsx)(R,{selectedGroup:se,groups:ae,isLoading:De,disabled:U||De,hasMoreGroups:he,onItemSelected:Fe,fetchAgentGroups:Ie}),_css2:E?"100%":"auto",_css3:(null==B?void 0:B.width)||"320px",_css4:"default"===(null==B?void 0:B.variant)?Object(r.cssVariables)("purple-7"):Object(r.cssVariables)("neutral-10"),_css5:V}),[Z,Ne,s,te,U,B,Ie,W,ae,Fe,Le,Pe,$,ge,he,Ae,H,M,fe,De,N,E,u,se,V,T]);return void 0!==O?Object(v.jsx)(r.ContextualHelp,{content:O,placement:"bottom",children:Ue}):Ue})},dcNB:function(e,t,n){"use strict";var a=n("q1tI"),i=n("dDsW"),s=n("vOnD"),r=n("JsuU"),o=n("7hLt"),l=n("S8/c"),c=n("rJpm"),d=n("6889"),u=n("/Yf2"),p=(n("E9XD"),n("3bBZ"),n("UxlC"),n("ponP"));var g=n("nKUr");const h=Object(s.css)(["content:'';display:block;margin:16px 0;width:100%;height:1px;background:",";"],Object(r.cssVariables)("border-3")),m=Object(s.default)(d.uc).withConfig({displayName:"UsageCalculationDrawer__TransitionedDrawerContainer",componentId:"sc-7e6an3-0"})(["grid-template-rows:auto 1fr auto;width:400px;"]),f=s.default.div.withConfig({displayName:"UsageCalculationDrawer__Header",componentId:"sc-7e6an3-1"})(["display:grid;grid-template-columns:1fr auto;padding:16px 24px;"]),b=s.default.span.withConfig({displayName:"UsageCalculationDrawer__HeaderTitle",componentId:"sc-7e6an3-2"})(["",";font-weight:600;letter-spacing:-0.25px;line-height:24px;b{font-weight:inherit;letter-spacing:inherit;line-height:inherit;}"],r.Headings["heading-03"]),j=s.default.div.withConfig({displayName:"UsageCalculationDrawer__Content",componentId:"sc-7e6an3-3"})(["display:flex;flex-direction:column;padding:16px 24px;max-height:calc(100% - 160px);white-space:pre-wrap;overflow-y:auto;h1{",";}h2{",";}h3{",";}h4{",";}p{",";}b,strong{font-weight:normal;}hr{margin:16px 0;height:0;border-style:solid;border-width:1px 0 0 0;border-color:",";}blockquote{display:block;padding:8px 12px;border:1px solid ",";border-radius:4px;",";}h1 + p,h2 + p,h3 + p,h4 + p{margin-top:4px;}h1 + blockquote,h2 + blockquote,h3 + blockquote,h4 + blockquote,p + blockquote{margin-top:8px;}p + p,p + h1,p + h2,p + h3,p + h4,blockquote + p{margin-top:16px;}",";"],r.Headings["heading-01"],r.Headings["heading-03"],r.Headings["heading-01"],r.Headings["heading-01"],r.Body["body-short-01"],Object(r.cssVariables)("border-3"),Object(r.cssVariables)("border-3"),r.Body["body-short-01"],({reverseOrder:e})=>e?Object(s.css)(["#application{order:2;&::before{","}}#organization{order:1;}"],h):Object(s.css)(["#application{order:1;}#organization{order:2;&::before{","}}"],h)),y=s.default.div.withConfig({displayName:"UsageCalculationDrawer__Footer",componentId:"sc-7e6an3-4"})(["padding:16px 24px;> a{font-size:14px;font-weight:600;}"]),O=Object.entries(Object(p.importAll)(n("jpHx"))).reduce((e,[t,n])=>{const{default:a,frontMatter:{communityUrl:i}}=n;return e[t.replace(".md","")]={key:t,component:a,communityUrl:i},e},{});var v=Object(s.default)(r.IconButton).withConfig({displayName:"UsageCalculationDrawer___StyledIconButton",componentId:"sc-7e6an3-5"})(["transform:translate(12px,-6px);"]);var x=({openedFrom:e="application"})=>{var t,n,s;const o=Object(i.a)(),{activeDrawerID:l,drawerState:d,closeDrawer:p}=Object(u.a)(),h=Object(a.useRef)(null),{subscribe:x,unsubscribe:_}=Object(c.a)({ref:h,onOutsideClick:()=>{p()}});Object(a.useEffect)(()=>{d&&d.usageField||p()},[p,d]),Object(a.useEffect)(()=>{if("UsageCalculationDrawer"===l)return x(),_},[l,x,_]);const C=null!=(t=null==d?void 0:d.title)?t:"",k=null!=(n=null==d?void 0:d.usageField)?n:null,w=k?O[k]:null,T=w?w.component:()=>null;return Object(g.jsxs)(m,{id:"UsageCalculationDrawer",ref:h,isFullHeight:!0,children:[Object(g.jsxs)(f,{children:[Object(g.jsx)(b,{children:C}),Object(g.jsx)(v,{buttonType:"secondary",icon:"close",size:"small",onClick:()=>{p()}})]}),Object(g.jsx)(j,{reverseOrder:"organization"===e,children:Object(g.jsx)(T,{})}),Object(g.jsx)(y,{children:Object(g.jsx)(r.Link,{href:null!=(s=null==w?void 0:w.communityUrl)?s:"https://community.sendbird.com",iconProps:{icon:"open-in-new",size:16},target:"_blank",children:o.formatMessage({id:"common.settings.usage.usageDetail.calculation.drawer.button"})})})]})};const _=s.default.h3.withConfig({displayName:"UsageDetailCalculation__MultipleDescription",componentId:"sc-1pm4hwj-0"})(["",";font-weight:400;b,strong{font-weight:600;}"],r.Headings["heading-01"]);t.a=({calculations:e,openUsageGuideFrom:t})=>{const n=Object(i.a)(),{openDrawer:s}=(()=>{const e=Object(u.a)(),{drawerState:t}=e;return null!=t&&null!=t.usageField?e:{...e,drawerState:void 0}})(),r=Object(o.c)(),c=n.formatMessage({id:"common.settings.usage.usageDetail.calculation.title"}),d=e.length>1,p=Object(a.useMemo)(()=>e.map(({featureKey:e,usageField:t})=>{const a=r({featureKey:e,usageField:t}),i=n.formatMessage({id:"common.settings.usage.usageDetail.calculation.description.single"},{featureUsageName:a});return{description:d?Object(g.jsx)(_,{children:n.formatMessage({id:"common.settings.usage.usageDetail.calculation.description.multiple"},{featureUsageName:a,b:e=>Object(g.jsx)("b",{children:e})})}):i,actions:[{type:"button",label:n.formatMessage({id:"common.settings.usage.usageDetail.calculation.button.viewDetail"}),onClick:()=>{s("UsageCalculationDrawer",{title:i,usageField:t})}}]}}),[e,r,n,d,s]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{title:c,contents:p,isMultipleContents:d}),Object(g.jsx)(x,{openedFrom:t})]})}},"du/1":function(e,t,n){var a=n("USwo");a(a.S,"Object",{create:n("b08l")})},dunj:function(e,t,n){var a=n("/9aa");e.exports=function(e,t,n){for(var i=-1,s=e.length;++i<s;){var r=e[i],o=t(r);if(null!=o&&(void 0===l?o==o&&!a(o):n(o,l)))var l=o,c=r}return c}},e0ae:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],r=0,o=s.length;r<o;r++,i++)a[i]=s[r];return a},i=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},s=function(t){this.version=t,this.type="node",this.name="node",this.os=e.platform},r=function(e,t,n,a){this.name=e,this.version=t,this.os=n,this.bot=a,this.type="bot-device"},o=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(t){return t?h(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!=typeof navigator?h(navigator.userAgent):void 0!==e&&e.version?new s(e.version.slice(1)):null}function g(e){return""!==e&&d.reduce((function(t,n){var a=n[0],i=n[1];if(t)return t;var s=i.exec(e);return!!s&&[a,s]}),!1)}function h(e){var t=g(e);if(!t)return null;var n=t[0],s=t[1];if("searchbot"===n)return new o;var l=s[1]&&s[1].split(/[._]/).slice(0,3);l?l.length<3&&(l=a(l,function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-l.length))):l=[];var d=l.join("."),p=function(e){for(var t=0,n=u.length;t<n;t++){var a=u[t],i=a[0];if(a[1].exec(e))return i}return null}(e),h=c.exec(e);return h&&h[1]?new r(n,d,p,h[1]):new i(n,d,p)}}).call(this,n("8oxB"))},ekG2:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},f3NI:function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},gRli:function(e,t,n){n("aT0f"),n("3+Ww"),n("MBy0"),n("TnF5"),e.exports=n("VSTI").Symbol},grSx:function(e,t,n){e.exports=function(e){var t=e.helpers,a=n("wU0g")(e),i=n("HX2K")(e),s=e.Annotation.types;function r(e){a.decorate(e,"afterDataLimits",(function(e,t){e&&e(t),a.adjustScaleRange(t)}))}function o(e){return function(t,n){var i=t.annotation.options.drawTime;a.elements(t).filter((function(t){return e===(t.options.drawTime||i)})).forEach((function(e){e.transition(n).draw()}))}}return{beforeInit:function(e){var n=e.options,i=e.annotation={elements:{},options:a.initConfig(n.annotation||{}),onDestroy:[],firstRun:!0,supported:!1};e.ensureScalesHaveIDs(),n.scales&&(i.supported=!0,t.each(n.scales.xAxes,r),t.each(n.scales.yAxes,r))},beforeUpdate:function(e){var t=e.annotation;if(t.supported){t.firstRun?t.firstRun=!1:t.options=a.initConfig(e.options.annotation||{});var n=[];t.options.annotations.forEach((function(i){var r=i.id||a.objectId();if(!t.elements[r]&&s[i.type]){var o=new(0,s[i.type])({id:r,options:i,chartInstance:e});o.initialize(),t.elements[r]=o,i.id=r,n.push(r)}else t.elements[r]&&n.push(r)})),Object.keys(t.elements).forEach((function(e){-1===n.indexOf(e)&&(t.elements[e].destroy(),delete t.elements[e])}))}},afterScaleUpdate:function(e){a.elements(e).forEach((function(e){e.configure()}))},beforeDatasetsDraw:o("beforeDatasetsDraw"),afterDatasetsDraw:o("afterDatasetsDraw"),afterDraw:o("afterDraw"),afterInit:function(e){var n=e.annotation.options.events;if(t.isArray(n)&&n.length>0){var a=e.chart.canvas,s=i.dispatcher.bind(e);i.collapseHoverEvents(n).forEach((function(n){t.addEvent(a,n,s),e.annotation.onDestroy.push((function(){t.removeEvent(a,n,s)}))}))}},destroy:function(e){for(var t=e.annotation.onDestroy;t.length>0;)t.pop()()}}}},hdWW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("/MKj"),i=n("E+oP"),s=n.n(i),r=n("bw7j");const o=()=>{const{isSelfService:e}=Object(r.a)(),t=Object(a.g)(e=>e.organizations.current),{free_applications:n,total_applications:i}=t;return!e&&!s()(t)&&n===i}},heda:function(e,t,n){var a=n("GhSp"),i=n("d+lc"),s=n("mHY4");e.exports=n("C61u")?Object.defineProperties:function(e,t){i(e);for(var n,r=s(t),o=r.length,l=0;o>l;)a.f(e,n=r[l++],t[n]);return e}},hrVQ:function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"s",(function(){return u})),n.d(t,"r",(function(){return p})),n.d(t,"E",(function(){return g})),n.d(t,"t",(function(){return h})),n.d(t,"F",(function(){return m})),n.d(t,"x",(function(){return f})),n.d(t,"A",(function(){return b})),n.d(t,"D",(function(){return j})),n.d(t,"B",(function(){return y})),n.d(t,"C",(function(){return O})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return x})),n.d(t,"m",(function(){return C})),n.d(t,"z",(function(){return k})),n.d(t,"o",(function(){return w})),n.d(t,"p",(function(){return T})),n.d(t,"n",(function(){return S})),n.d(t,"w",(function(){return E})),n.d(t,"l",(function(){return I})),n.d(t,"k",(function(){return M})),n.d(t,"u",(function(){return D})),n.d(t,"y",(function(){return A})),n.d(t,"v",(function(){return N})),n.d(t,"q",(function(){return R}));n("3bBZ");let a,i,s,r,o;!function(e){e.ON="ON",e.OFF="OFF"}(a||(a={})),function(e){e.OR="or",e.AND="and"}(i||(i={})),function(e){e.ASSIGNMENT="ASSIGNMENT",e.PRIORITY="PRIORITY"}(s||(s={})),function(e){e.TEXT="TEXT",e.NUMBER="NUMBER",e.DROPDOWN="DROPDOWN"}(r||(r={})),function(e){e.Is="is",e.IsNot="is_not",e.StartsWith="starts_with",e.EndsWith="ends_with",e.Contains="contains",e.DoesNotContain="does_not_contain",e.IsEmpty="is_empty",e.HasAnyValue="has_any_value",e.IsUnknown="is_unknown",e.GreaterThan="greater_than",e.LessThan="less_than"}(o||(o={}));const l={is:"desk.settings.ticketRules.operator.is",is_for_number:"desk.settings.ticketRules.operator.is.forNumberType",is_not:"desk.settings.ticketRules.operator.isNot",is_not_for_number:"desk.settings.ticketRules.operator.isNot.forNumberType",starts_with:"desk.settings.ticketRules.operator.startsWith",ends_with:"desk.settings.ticketRules.operator.endsWith",contains:"desk.settings.ticketRules.operator.contains",does_not_contain:"desk.settings.ticketRules.operator.doesNotContain",is_empty:"desk.settings.ticketRules.operator.isEmpty",has_any_value:"desk.settings.ticketRules.operator.hasAnyValue",is_unknown:"desk.settings.ticketRules.operator.isUnknown",greater_than:"desk.settings.ticketRules.operator.greaterThan",less_than:"desk.settings.ticketRules.operator.lessThan"};let c,d;!function(e){e.GROUP="GROUP",e.PRIORITY="PRIORITY",e.GROUP_WITH_BOT_AGENT="GROUP_WITH_BOT_AGENT"}(c||(c={})),function(e){e.INAPP="INAPP",e.SENDBIRD_IOS="SENDBIRD_IOS",e.SENDBIRD_ANDROID="SENDBIRD_ANDROID",e.SENDBIRD_JAVASCRIPT="SENDBIRD_JAVASCRIPT",e.SENDBIRD="SENDBIRD",e.FACEBOOK="FACEBOOK",e.FACEBOOK_CONVERSATION="FACEBOOK_CONVERSATION",e.FACEBOOK_FEED="FACEBOOK_FEED",e.TWITTER="TWITTER",e.TWITTER_DIRECT_MESSAGE_EVENT="TWITTER_DIRECT_MESSAGE_EVENT",e.TWITTER_STATUS="TWITTER_STATUS",e.INSTAGRAM="INSTAGRAM",e.INSTAGRAM_COMMENT="INSTAGRAM_COMMENT",e.WHATSAPP="WHATSAPP",e.WHATSAPP_MESSAGE="WHATSAPP_MESSAGE"}(d||(d={}));const u=[d.INAPP,d.SENDBIRD_IOS,d.SENDBIRD_ANDROID,d.SENDBIRD_JAVASCRIPT,d.SENDBIRD],p=[d.FACEBOOK,d.FACEBOOK_CONVERSATION,d.FACEBOOK_FEED],g=[d.TWITTER,d.TWITTER_DIRECT_MESSAGE_EVENT,d.TWITTER_STATUS],h=[d.INSTAGRAM,d.INSTAGRAM_COMMENT],m=[d.WHATSAPP,d.WHATSAPP_MESSAGE],f=[...p,...g,...h,...m],b=[...u,...p,...g,...h,...m],j=[...u,d.FACEBOOK_CONVERSATION,d.TWITTER_DIRECT_MESSAGE_EVENT,...m],y={INAPP:"desk.settings.ticketRulesDetail.form.value.inApp",SENDBIRD_IOS:"desk.settings.ticketRulesDetail.form.value.inApp.sendbird.ios",SENDBIRD_ANDROID:"desk.settings.ticketRulesDetail.form.value.inApp.sendbird.android",SENDBIRD_JAVASCRIPT:"desk.settings.ticketRulesDetail.form.value.inApp.sendbird.javascript",SENDBIRD:"desk.settings.ticketRulesDetail.form.value.inApp.sendbird.others",FACEBOOK:"desk.settings.ticketRulesDetail.form.value.facebook",FACEBOOK_CONVERSATION:"desk.settings.ticketRulesDetail.form.value.facebook.conversation",FACEBOOK_FEED:"desk.settings.ticketRulesDetail.form.value.facebook.feed",TWITTER:"desk.settings.ticketRulesDetail.form.value.twitter",TWITTER_STATUS:"desk.settings.ticketRulesDetail.form.value.twitter.status",TWITTER_DIRECT_MESSAGE_EVENT:"desk.settings.ticketRulesDetail.form.value.twitter.directMessage",INSTAGRAM:"desk.settings.ticketRulesDetail.form.value.instagram",INSTAGRAM_COMMENT:"desk.settings.ticketRulesDetail.form.value.instagram.comment",WHATSAPP:"desk.settings.ticketRulesDetail.form.value.whatsapp",WHATSAPP_MESSAGE:"desk.settings.ticketRulesDetail.form.value.whatsapp.message"},O={...y,FACEBOOK_CONVERSATION:"desk.settings.ticketRulesDetail.form.value.facebook.conversationWithPrefix",FACEBOOK_FEED:"desk.settings.ticketRulesDetail.form.value.facebook.feedWithPrefix",TWITTER_STATUS:"desk.settings.ticketRulesDetail.form.value.twitter.statusWithPrefix",TWITTER_DIRECT_MESSAGE_EVENT:"desk.settings.ticketRulesDetail.form.value.twitter.directMessageWithPrefix",INSTAGRAM_COMMENT:"desk.settings.ticketRulesDetail.form.value.instagram.commentWithPrefix",WHATSAPP_MESSAGE:"desk.settings.ticketRulesDetail.form.value.whatsapp.messageWithPrefix"};let v,x,_;!function(e){e.KEY="KEY",e.TYPE="TYPE",e.OPERATOR="OPERATOR",e.VALUE="VALUE"}(v||(v={})),function(e){e.INVALID_CHANNEL_BY_CONSEQUENT_CUSTOM_BOT="INVALID_CHANNEL_BY_CONSEQUENT_CUSTOM_BOT",e.INVALID_CHANNEL_BY_CONSEQUENT_FAQ_BOT="INVALID_CHANNEL_BY_CONSEQUENT_FAQ_BOT",e.INVALID_CHANNEL_BY_UNKNOWN_REASON="INVALID_CHANNEL_BY_UNKNOWN_REASON"}(x||(x={})),function(e){e.KEY="KEY",e.TYPE="TYPE",e.VALUE="VALUE",e._group="_group",e._agent="_agent",e._priority="_priority"}(_||(_={}));const C={ticket:{key:"ticket",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.title.ticket"},ticketField:{key:"ticketField",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.title.ticketField"},customer:{key:"customer",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.title.customer"},customerField:{key:"customerField",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.title.customerField"}},k={key:"ticket.channel_type",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.ticketChannelType",type:r.DROPDOWN},w={key:"customer.sendbird_id",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.customerUserId",type:r.TEXT},T={key:"customer.display_name",operator:o.Is,value:null,name:"desk.settings.ticketRulesDetail.form.conditions.key.customerUserName",type:r.TEXT},S=[C.ticket.key,C.ticketField.key,C.customer.key,C.customerField.key],E=[...S,k.key,w.key,T.key],I=[o.Is,o.IsNot],M=[o.HasAnyValue,o.IsUnknown],D=[o.IsEmpty,...M],A=[...I,o.StartsWith,o.EndsWith,o.Contains,o.DoesNotContain,o.IsEmpty,...M],N=[...I,o.GreaterThan,o.LessThan,...M],R=[...I,...M]},hyg5:function(e,t,n){(function(t,a,i){e.exports=function(e,n,s){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(e),l=r(n),c=r(s);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,n){return(v=O()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&y(i,n.prototype),i}).apply(null,arguments)}function x(e){var t="function"==typeof Map?new Map:void 0;return(x=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return v(e,arguments,j(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),y(a,e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_(e):t}function k(e){var t=O();return function(){var n,a=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return C(this,n)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}return n}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=E(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}var D=function(){function e(){u(this,e)}return g(e,null,[{key:"OS_VERSION",get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"}},{key:"SDK_VERSION",get:function(){return"3.0.150"}},{key:"SDK_MAJOR_VERSION",get:function(){return e.SDK_VERSION.split(".")[0]}},{key:"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",get:function(){return 100}},{key:"INTERNAL_CALL",get:function(){return"ic"}}]),e}(),A={},N=new WeakMap,R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),N.set(this,"object"===d(t)&&t?t:{})}return g(e,[{key:"get",value:function(e){return N.get(this)[e]}},{key:"set",value:function(e,t){N.get(this)[e]=t}},{key:"remove",value:function(e){var t=N.get(this);t.hasOwnProperty(e)&&delete t[e]}},{key:"container",get:function(){return N.get(this)}}],[{key:"create",value:function(t,n){return A[t]=new e(n),A[t]}},{key:"get",value:function(e){return e||(e=Qt.getInstance()._iid),A[e]}}]),e}(),P=function(e){b(n,e);var t=k(n);function n(e,a){var i;return u(this,n),(i=t.call(this,a)).name="SendBirdException",i.code=a||0,i.message=e,i}return g(n,[{key:"isSessionKeyExpiredError",get:function(){return 400309===this.code}},{key:"isSessionTokenExpiredError",get:function(){return 400302===this.code}}],[{key:"INVALID_INITIALIZATION",get:function(){return 800100}},{key:"CONNECTION_REQUIRED",get:function(){return 800101}},{key:"CONNECTION_CANCELED",get:function(){return 800102}},{key:"INVALID_PARAMETER",get:function(){return 800110}},{key:"NETWORK_ERROR",get:function(){return 800120}},{key:"NETWORK_ROUTING_ERROR",get:function(){return 800121}},{key:"MALFORMED_DATA",get:function(){return 800130}},{key:"MALFORMED_ERROR_DATA",get:function(){return 800140}},{key:"WRONG_CHANNEL_TYPE",get:function(){return 800150}},{key:"MARK_AS_READ_RATE_LIMIT_EXCEEDED",get:function(){return 800160}},{key:"QUERY_IN_PROGRESS",get:function(){return 800170}},{key:"ACK_TIMEOUT",get:function(){return 800180}},{key:"LOGIN_TIMEOUT",get:function(){return 800190}},{key:"WEBSOCKET_CONNECTION_CLOSED",get:function(){return 800200}},{key:"WEBSOCKET_CONNECTION_FAILED",get:function(){return 800210}},{key:"REQUEST_FAILED",get:function(){return 800220}},{key:"FILE_UPLOAD_CANCEL_FAILED",get:function(){return 800230}},{key:"REQUEST_CANCELED",get:function(){return 800240}},{key:"REQUEST_DUPLICATED",get:function(){return 800250}},{key:"FILE_SIZE_LIMIT_EXCEEDED",get:function(){return 800260}},{key:"SESSION_TOKEN_REQUEST_FAILED",get:function(){return 800500}},{key:"SESSION_TOKEN_REFRESHED",get:function(){return 800501}},{key:"SESSION_TOKEN_REFRESH_FAILED",get:function(){return 800502}}]),n}(x(Error)),L=function(){function e(){u(this,e),this.sessionToken=null,this.sessionKey=null,this.eKey=null}return g(e,[{key:"hasSession",value:function(){return!!this.sessionKey}}]),e}(),F={},U=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var a in u(this,e),this._iid=t,n){var i=n[a];"function"==typeof i&&(this[a]=this.getClonedClass(i))}F[t]=this}return g(e,[{key:"getClonedClass",value:function(e){var t=this._iid;return function(n){b(i,n);var a=k(i);function i(){return u(this,i),a.apply(this,arguments)}return g(i,[{key:"_iid",get:function(){return t}}],[{key:"_iid",get:function(){return t}},{key:"_name",get:function(){return e.name}}]),i}(e)}}],[{key:"get",value:function(e){return e?F[e]:{}}}]),e}(),$={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},B=function(e){b(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return g(n,[{key:"log",value:function(e){for(var t,n,a,i,s,r=this.getLogLevelText(e);r.length<8;)r+=" ";for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];switch(l.unshift("[".concat(r,"]")),e){case"verbose":(t=console).log.apply(t,l);break;case"debug":(n=console).log.apply(n,l);break;case"info":(a=console).info.apply(a,l);break;case"warn":(i=console).warn.apply(i,l);break;case"error":(s=console).error.apply(s,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),n}(function(){function e(){u(this,e)}return g(e,[{key:"getLogLevelText",value:function(e){return $[e]}}]),e}()),V={DEBUG:"debug",PRODUCTION:"production"},z=V.PRODUCTION,H={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},q=[H.NONE,H.ERROR,H.WARN,H.INFO,H.DEBUG,H.VERBOSE],G=H.WARN,W=q.indexOf(G),K=[new B],Y=function(){function e(){u(this,e)}return g(e,null,[{key:"isDisplayableLogLevel",value:function(e){var t=q.indexOf(e);return 0<=t&&t<=W}},{key:"log",value:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e.isDisplayableLogLevel(t)&&K.forEach((function(e){return e.log.apply(e,[t].concat(a))}))}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.log.apply(e,[H.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.log.apply(e,[H.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.log.apply(e,[H.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.log.apply(e,[H.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.log.apply(e,[H.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=[];Array.isArray(n[n.length-1])&&(i=n.pop()),i.some((function(t){return e.isDisplayableLogLevel(t.level)}))&&K.filter((function(e){return e instanceof B})).forEach((function(e){e.groupStart.apply(e,n),i.forEach((function(t){return e.log.apply(e,[t.level].concat(S(t.messages)))})),e.groupEnd()}))}},{key:"Mode",get:function(){return V}},{key:"mode",get:function(){return z},set:function(t){Object.keys(e.Mode).map((function(t){return e.Mode[t]})).indexOf(t)>-1&&(z=t)}},{key:"supportedLogLevels",get:function(){return H}},{key:"logLevel",get:function(){return q[W]},set:function(e){q.includes(e)||(e=G),W=q.indexOf(e)}},{key:"defaultLogLevel",get:function(){return G}}]),e}(),Q=function(){function e(){u(this,e),this._queue=[],this.locked=!1}return g(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),J=function(){function e(t){u(this,e),this.sb=t,this.mutex=new Q,this.pingTimer=null,this.pingTimeoutTimer=null}return g(e,[{key:"ping",value:function(){var e=this,t=U.get(this.sb._iid).Command.bPing(),n=R.get(this.sb._iid).container,a=n.wsAdapter,i=n.pongTimeout;a.client.send(t),Y.debug("`PING`"),this.pingTimeoutTimer=setTimeout((function(){Y.debug("`PING` timeout."),e.stop(),a.client.handler&&a.client.handler.onError()}),i)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=R.get(this.sb._iid).container.pingInterval;this.mutex.lock((function(n){e.stop(),e.pingTimer=setInterval((function(){e.ping()}),t),n()}))}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}();function X(){return"undefined"==typeof window&&void 0!==t&&("node"===t.title||void 0!==t.versions&&t.versions.node||"[object process]"===String(t))}var Z=[P.CONNECTION_REQUIRED,P.NETWORK_ERROR,P.ACK_TIMEOUT,P.WEBSOCKET_CONNECTION_CLOSED,P.WEBSOCKET_CONNECTION_FAILED,P.FILE_UPLOAD_CANCEL_FAILED,P.REQUEST_CANCELED,500901,500910,900200],ee=function(){function e(){u(this,e)}return g(e,null,[{key:"deepEqual",value:function(e,t){if(e!==t){var n=f({},e),a=f({},t);return!(n.messageId&&a.messageId&&n.messageId!==a.messageId||n.reqId&&a.reqId&&n.reqId!==a.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,a.hasOwnProperty("messageId")&&delete a.messageId,a.hasOwnProperty("reqId")&&delete a.reqId,JSON.stringify(n)!==JSON.stringify(a)))}return!0}},{key:"isResendableError",value:function(e){return e>0&&Z.indexOf(e)>=0}},{key:"isFile",value:function(e){var t="object"===d(e)&&null!==e&&"string"==typeof e.name&&"string"==typeof e.uri&&"string"==typeof e.type;if(!t)if(X()){if(void 0!==a)return e instanceof a}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return t}}]),e}(),te=function(){function e(t){if(u(this,e),this.fields={},t)for(var n in t)this.fields[n]={value:t[n]},ee.isFile(t[n])&&(this.fields[n].filename=t[n].name);this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return g(e,[{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.fields[e]={value:t,filename:n}}},{key:"remove",value:function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]}},{key:"yield",value:function(){var e=!1;for(var t in this.fields)if(ee.isFile(this.fields[t].value)){e=!0;break}if(e){var n=new l.default;for(var a in this.fields){var i=this.fields[a];if(ee.isFile(i.value)){var s=i.value;s.filename||s.name?n.append(a,i.value,s.filename||s.name):s.data?n.append(a,i.value,s.data.name):n.append(a,i.value,"unnamed")}else n.append(a,i.value)}return n}var r={};for(var o in this.fields)r[o]=this.fields[o].value;return r}}]),e}(),ne=888e3,ae=function(){function e(t){u(this,e),this.sb=t,this.cls=U.get(this.sb._iid)}return g(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,a=e.params;return n?a&&a.internal?"".concat(t,"/v").concat(D.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(D.SDK_MAJOR_VERSION).concat(n):t}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noSessionKey,a=void 0!==n&&n,i=t.accessToken,s=void 0===i?null:i,r=e instanceof l.default&&"function"==typeof e.getHeaders?e.getHeaders():{},o=R.get(this.sb._iid),c=o.container,d=c.appId,u=c.auth,p=c.extensions,g=c.getUserAgentWithExtensions;return r.SendBird="JS,".concat(D.OS_VERSION,",").concat(D.SDK_VERSION,",").concat(d),r["SB-User-Agent"]=encodeURIComponent(g(p)),!a&&u.sessionKey&&(r["Session-Key"]=u.sessionKey),s&&(r["App-Id"]=d,r["Access-Token"]=s),r["Request-Sent-Timestamp"]=(new Date).getTime().toString(),r}},{key:"_createQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=[];for(var a in t){var i=t[a];if(null!=i){var s="";s="object"===d(i)?Array.isArray(i)?i.map((function(e){return encodeURIComponent("string"==typeof e?e.trim():e)})).join(","):encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),n.push("".concat(a,"=").concat(s))}}return n.length>0?"".concat(e,"?").concat(n.join("&")):e}catch(t){return Y.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_request",value:function(e,t,n,a){var i=this;this.checkRouting((function(s,r){if(s)a(new P("Request failed.",P.REQUEST_FAILED),null);else{var c=i._buildUrl({apiHost:r.apiHost,url:t,params:n}),d=n?n.yield():{},u=i._createHeader(d,n?n.options:{}),p=[{level:Y.supportedLogLevels.DEBUG,messages:["url:",t]},{level:Y.supportedLogLevels.DEBUG,messages:["data:",d]}],g=null;switch(e){case"GET":g=i._createQuery(c,d);break;case"POST":case"PUT":g=c;break;case"DELETE":g=i._createQuery(c,d)}var h=null;if("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer||X()||"function"!=typeof fetch)switch(e){case"GET":h=o.default.get(g,{headers:u,validateStatus:i._validateStatus});break;case"POST":var m=null;if(d instanceof l.default){var f=o.default.CancelToken.source();m=f.token;var b=i.cls.FileMessageQueue,j=n.upload.reqId;j&&(p.push({level:Y.supportedLogLevels.DEBUG,messages:["request id:",j]}),b.uploadRequest[j]=f)}h=o.default.post(g,"function"==typeof d.getBuffer?d.getBuffer():d,{headers:u,validateStatus:i._validateStatus,cancelToken:m,onUploadProgress:function(e){n.upload.progressHandler&&n.upload.progressHandler(e,n.upload.reqId)}});break;case"PUT":h=o.default.put(g,d,{headers:u,validateStatus:i._validateStatus});break;case"DELETE":h=o.default.delete(g,{headers:u,validateStatus:i._validateStatus})}else{var y={method:e,headers:u};switch(e){case"GET":break;case"POST":if(d instanceof l.default){if("function"==typeof AbortController){var O=new AbortController,v=O.signal;y.signal=v;var x=i.cls.FileMessageQueue,_=n.upload.reqId;_&&(p.push({level:Y.supportedLogLevels.DEBUG,messages:["request id:",_]}),x.uploadRequest[_]=O)}y.body="function"==typeof d.getBuffer?d.getBuffer():d}else u["Content-Type"]="application/json; charset=utf-8",y.body=JSON.stringify(d);break;case"PUT":d instanceof l.default?y.body="function"==typeof d.getBuffer?d.getBuffer():d:(u["Content-Type"]="application/json; charset=utf-8",y.body=JSON.stringify(d))}h=fetch(g,y).then((function(e){return e.json().then((function(t){if(!i._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:t}};return Promise.resolve({data:t})}))}))}Y.group("".concat(e," request"),p),p=[],h.then((function(t){try{var i=t.data;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest(),p.push({level:Y.supportedLogLevels.DEBUG,messages:["data:",i]}),a(null,i)}catch(e){throw{code:ne,rawError:e}}})).catch((function(s){if(s.code===ne)throw s.rawError;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest();var r=i._handleError(s);p.push({level:Y.supportedLogLevels.DEBUG,messages:["error:",r]}),t&&n&&r.isSessionKeyExpiredError?R.get(i.sb._iid).container.sessionManager.refresh((function(e){return a(e,null)})):a(r,null)})).finally((function(){return Y.group("".concat(e," response"),p)}))}}))}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new P("Request has been canceled.",P.REQUEST_CANCELED);if(n){var a=n.data,i=a?a.message:"Request failed.",s=a?a.code:P.REQUEST_FAILED;return new P(i,s)}return new P("Request failed.",P.REQUEST_FAILED)}return new P("There was a network error.",P.NETWORK_ERROR)}},{key:"get",value:function(e,t,n){this._request("GET",e,t,n)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,t,n){this._request("POST",e,t,n)}},{key:"put",value:function(e,t,n){this._request("PUT",e,t,n)}},{key:"delete",value:function(e,t,n){this._request("DELETE",e,t,n)}},{key:"refreshSessionKey",value:function(t,n){var a=this,i=t.accessToken;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(s.userId)),o=new te;o.options.noSessionKey=!0,o.options.accessToken=i,a.post(r,o,n)}}))}},{key:"updateCurrentUserInfo",value:function(t,n){var a=this,i=t.nickname,s=t.profileUrl,r=t.profileImage,o=t.preferredLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),d=new te;i&&d.add("nickname",i),s&&d.add("profile_url",s),r&&d.add("profile_file",r,r.name),o&&d.add("preferred_languages",o),a.put(c,d,n)}}))}},{key:"getMyGroupChannelChangeLogs",value:function(t,n){var a=this,i=t.ts,s=t.token,r=t.customTypes,o=t.includeEmpty,l=t.includeFrozen;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(c.userId)),u=new te({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});s&&u.add("token",s),i&&u.add("change_ts",i),r&&r.length>0&&u.add("custom_types",r),"boolean"==typeof o&&u.add("show_empty",o),"boolean"==typeof l&&u.add("show_frozen",l),a.get(d,u,n)}}))}},{key:"getChannelInvitationPreference",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"getGroupChannelCount",value:function(t,n){var a=this,i=t.memberStateFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=a.cls.GroupChannel,o=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(s.userId)),l="";switch(i){case r.MemberStateFilter.JOINED:l="joined";break;case r.MemberStateFilter.INVITED:l="invited";break;case r.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case r.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;default:l="all"}var c=new te({state:l});a.get(o,c,n)}}))}},{key:"getUnreadItemCount",value:function(t,n){var a=this,i=t.keys;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(s.userId)),o=new te({item_keys:i});a.get(r,o,n)}}))}},{key:"getTotalUnreadMessageCount",value:function(t,n){var a=this,i=t.customTypesFilter,s=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(r.userId)),l=new te({super_mode:s});null!==i&&i.length>0&&l.add("custom_types",i),a.get(o,l,n)}}))}},{key:"getTotalUnreadChannelCount",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"searchMessages",value:function(t,n){var a=this,i=t.keyword,s=t.limit,r=t.reverse,o=t.exactMatch,l=t.channelUrl,c=t.channelCustomType,d=t.messageTimestampFrom,u=t.messageTimestampTo,p=t.order,g=t.nextToken,h=t.advancedQuery,m=t.targetFields;this.sb.ConnectionManager.ready((function(t,f){if(t)n(t,null);else{var b=e.Path.SEARCH_MESSAGE,j=new te({limit:s,reverse:r,query:i,custom_type:c});d&&j.add("message_ts_from",d),u&&j.add("message_ts_to",u),l&&j.add("channel_url",l),p&&j.add("sort_field",p),"boolean"==typeof o&&j.add("exact_match",o),null!==g&&g.length>0&&j.add("after",g),"boolean"==typeof h&&j.add("advanced_query",h),m&&Array.isArray(m)&&j.add("target_fields",m),a.get(b,j,n)}}))}},{key:"markAsReadAll",value:function(t,n){var a=this,i=t.channelUrls;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(s.userId)),o=new te;i&&o.add("channel_urls",i),a.put(r,o,n)}}))}},{key:"markAsDelivered",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(i)),l=new te;s&&l.add("user_id",s),a.put(o,l,n)}}))}},{key:"setChannelInvitationPreference",value:function(t,n){var a=this,i=t.isAutoAccept;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(s.userId)),o=new te({auto_accept:i});a.put(r,o,n)}}))}},{key:"blockUser",value:function(t,n){var a=this,i=t.blockedUserId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(s.userId)),o=new te({target_id:i});a.post(r,o,n)}}))}},{key:"unblockUser",value:function(t,n){var a=this,i=t.unblockedUserId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"getPushTriggerOption",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"setPushTriggerOption",value:function(t,n){var a=this,i=t.pushTriggerOption;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(s.userId)),o=new te({push_trigger_option:i});a.put(r,o,n)}}))}},{key:"getPushTokens",value:function(t,n){var a=this,i=t.ts,s=t.token,r=t.type;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(r)),c=new te;s&&c.add("token",s),i&&c.add("created_ts",i),a.get(l,c,n)}}))}},{key:"getPushTemplate",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"setPushTemplate",value:function(t,n){var a=this,i=t.templateName;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(s.userId)),o=new te({name:i});a.put(r,o,n)}}))}},{key:"getDoNotDisturb",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"setDoNotDisturb",value:function(t,n){var a=this,i=t.doNotDisturbOn,s=t.startHour,r=t.startMin,o=t.endHour,l=t.endMin,c=t.timezone;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var u=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(d.userId)),p=new te({do_not_disturb:i,start_hour:s,start_min:r,end_hour:o,end_min:l,timezone:c});a.put(u,p,n)}}))}},{key:"getSnoozePeriod",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId));a.get(s,null,n)}}))}},{key:"setSnoozePeriod",value:function(t,n){var a=this,i=t.snoozeOn,s=t.startTs,r=t.endTs;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),c=new te({snooze_enabled:i,snooze_start_ts:s,snooze_end_ts:r});a.put(l,c,n)}}))}},{key:"registerGCMPushToken",value:function(t,n){var a=this,i=t.token;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(s.userId)),o=new te({gcm_reg_token:i,always_push:!0});a.post(r,o,n)}}))}},{key:"unregisterGCMPushToken",value:function(t,n){var a=this,i=t.token;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"unregisterAllGCMPushTokens",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId));a.delete(s,null,n)}}))}},{key:"registerAPNSPushToken",value:function(t,n){var a=this,i=t.token;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(s.userId)),o=new te({apns_device_token:i,always_push:!0});a.post(r,o,n)}}))}},{key:"unregisterAPNSPushToken",value:function(t,n){var a=this,i=t.token;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"unregisterAllAPNSPushTokens",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId));a.delete(s,null,n)}}))}},{key:"unregisterAllPushTokens",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(i.userId));a.delete(s,null,n)}}))}},{key:"loadFriendList",value:function(t,n){var a=this,i=t.token,s=t.limit;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(r.userId)),l=new te({limit:s,token:i});a.get(o,l,n)}}))}},{key:"getFriendChangeLogsByToken",value:function(t,n){var a=this,i=t.token;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(s.userId)),o=new te;i&&o.add("token",i),a.get(r,o,n)}}))}},{key:"addFriends",value:function(t,n){var a=this,i=t.userIds;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),o=new te({user_ids:i});a.post(r,o,n)}}))}},{key:"deleteFriends",value:function(t,n){var a=this,i=t.userIds;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),o=new te({user_ids:i});a.delete(r,o,n)}}))}},{key:"uploadFriendDiscoveries",value:function(t,n){var a=this,i=t.discoveries;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(s.userId)),o=[];i.forEach((function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})}));var l=new te({friend_discoveries:o});a.put(r,l,n)}}))}},{key:"deleteFriendDiscoveries",value:function(t,n){var a=this,i=t.discoveryKeys;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(s.userId)),o=new te({friend_discovery_keys:i});a.delete(r,o,n)}}))}},{key:"loadUserList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.userIdsFilter,o=t.metaDataKeyFilter,l=t.metaDataValuesFilter,c=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var u=e.Path.USERS,p=new te({token:i,limit:s});r&&r.length>0&&p.add("user_ids",r),o&&l&&l.length>0&&(p.add("metadatakey",o),p.add("metadatavalues_in",l)),c&&p.add("nickname_startswith",c),a.get(u,p,n)}}))}},{key:"loadBlockedUserList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.userIdsFilter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),c=new te({token:i,limit:s});r&&r.length>0&&c.add("user_ids",r),a.get(l,c,n)}}))}},{key:"createUserMetaData",value:function(t,n){var a=this,i=t.metaData;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),o=new te({metadata:i});a.post(r,o,n)}}))}},{key:"updateUserMetaData",value:function(t,n){var a=this,i=t.metaData,s=t.upsert;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(r.userId)),l=new te({metadata:i,upsert:s});a.put(o,l,n)}}))}},{key:"deleteUserMetaData",value:function(t,n){var a=this,i=t.metaDataKey;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"deleteAllUserMetaData",value:function(t,n){var a=this;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId));a.delete(s,null,n)}}))}},{key:"getMessageChangeLogs",value:function(t,n){var a=this,i=t.channelUrl,s=t.ts,r=t.timestamp,o=t.token,l=t.isOpenChannel,c=t.includeMetaArray,d=t.includeReactions,u=t.includeReplies,p=t.includeParentMessageText,g=t.includeThreadInfo;this.sb.ConnectionManager.ready((function(t,h){if(t)n(t,null);else{var m=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(i)),f=new te;o&&f.add("token",o),s&&f.add("change_ts",s),r&&f.add("change_ts",r),"boolean"==typeof c&&f.add("with_sorted_meta_array",c),"boolean"==typeof d&&f.add("include_reactions",d),"boolean"==typeof u&&f.add("include_replies",u),"boolean"==typeof p&&f.add("include_parent_text_message",p),"boolean"==typeof g&&f.add("include_thread_info",g),a.get(m,f,n)}}))}},{key:"getMyMutedInfo",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId,r=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=r?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s));a.get(l,null,n)}}))}},{key:"loadBannedUserList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=o?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(r)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(r)),d=new te({token:i,limit:s});a.get(c,d,n)}}))}},{key:"loadMutedUserList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=o?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(r)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(r)),d=new te({token:i,limit:s});a.get(c,d,n)}}))}},{key:"getMessageList",value:function(t,n){var a=this,i=t.channel,s=t.token,r=t.tokenType,o=t.isInclusive,l=t.prevResultSize,c=void 0===l?0:l,d=t.nextResultSize,u=void 0===d?0:d,p=t.shouldReverse,g=t.messageType,h=t.customType,m=t.customTypes,f=t.senderUserIds,b=t.includeMetaArray,j=t.includeReactions,y=t.includeThreadInfo,O=t.includeReplies,v=t.includeParentMessageText,x=t.showSubchannelMessagesOnly,_=t.rootMessageId,C=t.parentMessageId;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var d=i.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",i.url),k=new te({is_sdk:String(!0),prev_limit:String(c),next_limit:String(u),include:String(o),reverse:String(p)});"timestamp"===r?k.add("message_ts",s):"messageId"===r&&k.add("message_id",String(s)),g&&k.add("message_type",String(g)),Array.isArray(m)&&(0===m.length&&("string"==typeof h?m.push(h):m.push("*")),k.add("custom_types",m)),Array.isArray(f)&&f.length>0&&k.add("sender_ids",f),"boolean"==typeof b&&k.add("with_sorted_meta_array",b),"boolean"==typeof j&&k.add("include_reactions",j),"boolean"==typeof y&&k.add("include_thread_info",y),"boolean"==typeof O&&k.add("include_replies",O),"boolean"==typeof v&&k.add("include_parent_message_text",v),"boolean"==typeof x&&i.isOpenChannel()&&k.add("show_subchannel_messages_only",x),_&&k.add("root_message_id",_),C&&k.add("parent_message_id",C),a.get(d,k,n)}}))}},{key:"translateUserMessage",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.messageId,o=t.translationTargetLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",r):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(i)).replace("%s",r),d=new te({target_langs:o});a.post(c,d,n)}}))}},{key:"getMessage",value:function(t,n){var a=this,i=t.channel,s=t.messageId;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=i.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i.url)).replace("%s",encodeURIComponent(s));a.get(o,null,n)}}))}},{key:"deleteMessage",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.messageId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(r)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(r));a.delete(l,null,n)}}))}},{key:"muteUser",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId,r=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(i)),u=new te({user_id:s});o&&(o>0||-1!==o)&&u.add("seconds",o),r&&u.add("description",r),a.post(d,u,n)}}))}},{key:"unmuteUser",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId,r=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=r?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s));a.delete(l,null,n)}}))}},{key:"banUser",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId,r=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(i)),u=new te({user_id:s});r&&u.add("description",r),u.add("seconds",String(o)),a.post(d,u,n)}}))}},{key:"unbanUser",value:function(t,n){var a=this,i=t.channelUrl,s=t.userId,r=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=r?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s));a.delete(l,null,n)}}))}},{key:"getMetaCounters",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),c=new te({keys:r});a.get(l,c,n)}}))}},{key:"createMetaCounters",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.metaCounter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),c=new te({metacounter:r});a.post(l,c,n)}}))}},{key:"updateMetaCounters",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.metaCounter,o=t.upsert,l=t.mode;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=s?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)),u=new te({metacounter:r,upsert:o,mode:l});a.put(d,u,n)}}))}},{key:"deleteMetaCounter",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",r):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(i)).replace("%s",r);a.delete(l,null,n)}}))}},{key:"deleteAllMetaCounters",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=s?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(i));a.delete(o,null,n)}}))}},{key:"getMetaData",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),c=new te({keys:r,include_ts:!0});a.get(l,c,n)}}))}},{key:"createMetaData",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.metaData;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),c=new te({metadata:r,include_ts:!0});a.post(l,c,n)}}))}},{key:"updateMetaData",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.metaData,o=t.upsert;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=s?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),d=new te({metadata:r,upsert:o,include_ts:!0});a.put(c,d,n)}}))}},{key:"deleteMetaData",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",r):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(i)).replace("%s",r),c=new te({include_ts:!0});a.delete(l,c,n)}}))}},{key:"deleteAllMetaData",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=s?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(i)),l=new te({include_ts:!0});a.delete(o,l,n)}}))}},{key:"loadOperatorList",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.token,o=t.limit;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=s?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(i)),d=new te({token:r,limit:o});a.get(c,d,n)}}))}},{key:"getOpenChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.internalCall;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),l=new te({});l.internal=s===D.INTERNAL_CALL,a.get(o,l,n)}}))}},{key:"loadOpenChannelList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,c=t.includeFrozen,d=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var p=e.Path.OPENCHANNELS,g=new te({token:i,limit:s});r&&g.add("name_contains",r),o&&g.add("url_contains",o),l&&l.length>0&&g.add("custom_types",l),"boolean"==typeof c&&g.add("show_frozen",c),"boolean"==typeof d&&g.add("show_metadata",d),a.get(p,g,n)}}))}},{key:"loadParticipantList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.channelUrl;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(r)),c=new te({token:i,limit:s});a.get(l,c,n)}}))}},{key:"createOpenChannel",value:function(t,n){var a=this,i=t.name,s=t.coverUrlOrImage,r=t.data,o=t.operatorUserIds,l=t.customType;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS,u=new te;"string"==typeof s&&u.add("cover_url",s),ee.isFile(s)&&u.add("cover_file",s),null!==i&&"string"==typeof i&&u.add("name",i),r&&u.add("data",r),o&&(Array.isArray(o)?u.add("operators",o):u.add("operators",[o])),l&&u.add("custom_type",l),a.post(d,u,n)}}))}},{key:"updateOpenChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.name,r=t.coverUrlOrImage,o=t.data,l=t.operatorUserIds,c=t.customType;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var u=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),p=new te;"string"==typeof r&&p.add("cover_url",r),ee.isFile(r)&&p.add("cover_file",r,r.name),null!==s&&"string"==typeof s&&p.add("name",s),null!==o&&"string"==typeof o&&p.add("data",o),null!==l&&(Array.isArray(l)?p.add("operator_ids",l):p.add("operator_ids",[l])),null!==c&&"string"==typeof c&&p.add("custom_type",c),a.put(u,p,n)}}))}},{key:"deleteOpenChannel",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"getGroupChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.showMember,r=t.internalCall;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i)),c=new te({show_member:s,show_read_receipt:!0,show_delivery_receipt:!0});c.internal=r===D.INTERNAL_CALL,a.get(l,c,n)}}))}},{key:"loadGroupChannelList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.includeEmpty,o=t.order,l=t.userIdsFilter,c=t.nicknameContainsFilter,d=t.channelNameContainsFilter,u=t.channelUrlsFilter,p=t.customTypesFilter,g=t.customTypeStartsWithFilter,h=t.memberStateFilter,m=t.superChannelFilter,f=t.publicChannelFilter,b=t.unreadChannelFilter,j=t.metadataOrderKeyFilter,y=t.hiddenChannelFilter,O=t.searchFilter,v=t.includeFrozen,x=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,_){if(t)n(t,null);else{var C=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(_.userId)),k=new te({token:i,limit:s,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(r),member_state_filter:h});p&&p.length>0&&k.add("custom_types",p),c&&k.add("members_nickname_contains",c),d&&k.add("name_contains",d),O.hasOwnProperty("search_query")&&O.hasOwnProperty("search_fields")&&(k.add("search_query",O.search_query),k.add("search_fields",O.search_fields)),l.userIds&&l.userIds.length>0&&(l.includeMode?(k.add("members_include_in",l.userIds),k.add("query_type",l.queryType.toUpperCase())):k.add("members_exactly_in",l.userIds)),u&&u.length>0&&k.add("channel_urls",u),k.add("super_mode",m),k.add("public_mode",f),k.add("unread_filter",b),j&&k.add("metadata_order_key",j),g&&k.add("custom_type_startswith",g),y&&k.add("hidden_mode",y),"boolean"==typeof v&&k.add("show_frozen",v),"boolean"==typeof x&&k.add("show_metadata",x),a.get(C,k,n)}}))}},{key:"loadPublicGroupChannelList",value:function(t,n){var a=this,i=t.token,s=t.limit,r=t.includeEmpty,o=t.order,l=t.channelNameContainsFilter,c=t.channelUrlsFilter,d=t.customTypesFilter,u=t.customTypeStartsWithFilter,p=t.superChannelFilter,g=t.membershipFilter,h=t.metadataOrderKeyFilter,m=t.includeFrozen,f=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,b){if(t)n(t,null);else{var j=a.cls.GroupChannel,y=e.Path.GROUPCHANNELS,O=new te({token:i,limit:s,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(r),public_mode:j.PublicChannelFilter.PUBLIC,public_membership_mode:g});d&&d.length>0&&O.add("custom_types",d),l&&O.add("name_contains",l),c&&c.length>0&&O.add("channel_urls",c),O.add("super_mode",p),h&&O.add("metadata_order_key",h),u&&O.add("custom_type_startswith",u),"boolean"==typeof m&&O.add("show_frozen",m),"boolean"==typeof f&&O.add("show_metadata",f),a.get(y,O,n)}}))}},{key:"createGroupChannel",value:function(t,n){var a=this,i=t.isDistinct,s=t.isSuper,r=t.isBroadcast,o=t.isPublic,l=t.channelUrl,c=t.isDiscoverable,d=t.isStrict,u=t.name,p=t.data,g=t.customType,h=t.coverUrl,m=t.coverImage,f=t.accessCode,b=t.isEphemeral,j=t._invitedUserIds,y=void 0===j?[]:j,O=t.operatorUserIds,v=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,j){if(t)n(t,null);else{var x=e.Path.GROUPCHANNELS,_=new te({user_ids:[j.userId].concat(S(y)).filter((function(e,t,n){return t===n.indexOf(e)}))});null!==h&&"string"==typeof h&&_.add("cover_url",h),ee.isFile(m)&&_.add("cover_file",m,m.name),null!==l&&_.add("channel_url",l),null!==i&&_.add("is_distinct",i),null!==s&&_.add("is_super",s),null!==r&&_.add("is_broadcast",r),null!==o&&_.add("is_public",o),null!==c&&_.add("is_discoverable",c),null!==d&&_.add("strict",d),null!==b&&_.add("is_ephemeral",b),f&&_.add("access_code",f),null!==u&&"string"==typeof u&&_.add("name",u),p&&_.add("data",p),g&&_.add("custom_type",g),Array.isArray(O)&&O.length>0&&_.add("operator_ids",O),null!==v&&v>-1&&_.add("message_survival_seconds",v),a.post(x,_,n)}}))}},{key:"updateGroupChannel",value:function(t,n){var a=this,i=t.isDistinct,s=t.isPublic,r=t.channelUrl,o=t.isDiscoverable,l=t.name,c=t.data,d=t.customType,u=t.coverUrl,p=t.coverImage,g=t.accessCode,h=t.operatorUserIds,m=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,f){if(t)n(t,null);else{var b=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(r)),j=new te;null!==i&&j.add("is_distinct",i),null!==s&&j.add("is_public",s),null!==o&&j.add("is_discoverable",o),null!==g&&j.add("access_code",g),null!==u&&"string"==typeof u&&j.add("cover_url",u),ee.isFile(p)&&j.add("cover_file",p,p.name),null!==l&&"string"==typeof l&&j.add("name",l),null!==c&&"string"==typeof c&&j.add("data",c),null!==d&&"string"==typeof d&&j.add("custom_type",d),null!==h&&(Array.isArray(h)?j.add("operator_ids",h):h&&j.add("operator_ids",[h])),null!==m&&m>-1&&j.add("message_survival_seconds",m),a.put(b,j,n)}}))}},{key:"addOperators",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=void 0!==s&&s,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,s){if(!t){var l=(r?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),c=new te({operator_ids:o});a.post(l,c,n)}}))}},{key:"removeOperators",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=void 0!==s&&s,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,s){if(!t){var l=(r?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(i)),c=new te({operator_ids:o});a.delete(l,c,n)}}))}},{key:"inviteToGroupChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.userIds;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(i)),l=new te({user_ids:s});a.post(o,l,n)}}))}},{key:"acceptInvitation",value:function(t,n){var a=this,i=t.channelUrl,s=t.accessCode;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(i)),l=new te({user_id:r.userId});s&&l.add("access_code",s),a.put(o,l,n)}}))}},{key:"declineInvitation",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(i)),o=new te({user_id:s.userId});a.put(r,o,n)}}))}},{key:"joinGroupChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.accessCode;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(i)),l=new te({user_id:r.userId});s&&l.add("access_code",s),a.put(o,l,n)}}))}},{key:"leaveGroupChannel",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(i)),o=new te({user_id:s.userId});a.put(r,o,n)}}))}},{key:"hideGroupChannel",value:function(t,n){var a=this,i=t.channelUrl,s=t.hidePreviousMessages,r=t.allowAutoUnhide;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i)),c=new te({user_id:o.userId,hide_previous_messages:s,allow_auto_unhide:r});a.put(l,c,n)}}))}},{key:"unhideGroupChannel",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"freeze",value:function(t,n){var a=this,i=t.channelUrl,s=t.isGroupChannel,r=t.freezing;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(i)),c=new te({freeze:r});a.put(l,c,n)}}))}},{key:"deleteGroupChannel",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(i));a.delete(r,null,n)}}))}},{key:"loadMemberList",value:function(t,n){var a=this,i=t.channelUrl,s=t.token,r=t.limit,o=t.mutedMemberFilter,l=t.order,c=t.memberStateFilter,d=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var p=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(i)),g=new te({token:s,limit:r,order:l.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:c,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});d&&g.add("nickname_startswith",d),a.get(p,g,n)}}))}},{key:"report",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.reportCategory,o=t.reportingUserId,l=t.reportDescription;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(s?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)),u=new te({report_category:r});null!=o&&u.add("reporting_user_id",o),null!=l&&u.add("report_description",l),a.post(d,u,n)}}))}},{key:"reportUser",value:function(t,n){var a=this,i=t.offendingUserId,s=t.channelUrl,r=t.isOpenChannel,o=t.reportCategory,l=t.reportingUserId,c=t.reportDescription;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var u=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(i)),p=new te({channel_url:s,channel_type:r?"open_channels":"group_channels",report_category:o});null!=l&&p.add("reporting_user_id",l),null!=c&&p.add("report_description",c),a.post(u,p,n)}}))}},{key:"reportMessage",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.messageId,o=t.reportCategory,l=t.reportingUserId,c=t.reportDescription,d=t.offendingUserId;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var p=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(s?"open_channels":"group_channels")).replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(r)),g=new te({report_category:o,offending_user_id:d});null!=l&&g.add("reporting_user_id",l),null!=c&&g.add("report_description",c),a.post(p,g,n)}}))}},{key:"sendUserMessage",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.message,o=t.data,l=t.customType,c=t.translationTargetLanguages,d=t.metaArrays,u=t.mentionType,p=t.mentionedUserIds,g=t.pushNotificationDeliveryOption,h=t.rootMessageId,m=t.parentMessageId,f=t.appleCriticalAlertOptions;this.sb.ConnectionManager.ready((function(t,b){if(t)n(t,null);else{var j=a.cls.FileMessageParams,y=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),O=new te({message_type:"MESG",user_id:b.userId,message:r,mention_type:u,mentioned_user_ids:[]});null!=o&&O.add("data",o),null!=l&&O.add("custom_type",l),c&&O.add("translation_target_langs",c),d&&d.length>0&&O.add("sorted_metaarray",d.map((function(e){return e.encode()}))),u===a.cls.BaseMessageParams.MentionType.CHANNEL?O.add("mentioned_user_ids",[]):Array.isArray(p)&&p.length>0&&O.add("mentioned_user_ids",p),g&&g!==j.PushNotificationDeliveryOption.DEFAULT&&O.add("push_option",g),h&&O.add("root_message_id",h),m&&O.add("parent_message_id",m),f&&O.add("apple_critical_alert_options",f.serialize()),a.post(y,O,n)}}))}},{key:"sendFileMessage",value:function(t,n){var a=this,i=t.channelUrl,s=t.isOpenChannel,r=t.fileUrl,o=t.fileName,l=t.fileSize,c=t.fileType,d=t.data,u=t.customType,p=t.thumbnailSizes,g=t.requireAuth,h=t.metaArrays,m=t.mentionType,f=t.mentionedUserIds,b=t.pushNotificationDeliveryOption,j=t.rootMessageId,y=t.parentMessageId,O=t.appleCriticalAlertOptions;this.sb.ConnectionManager.ready((function(t,v){if(t)n(t,null);else{var x=a.cls.FileMessageParams,_=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),C=new te({message_type:"FILE",user_id:v.userId,url:r,mention_type:m,mentioned_user_ids:[]});null!=o&&C.add("file_name",o),null!=l&&C.add("file_size",l),null!=c&&C.add("file_type",c),null!=d&&C.add("custom_field",d),null!=u&&C.add("custom_type",u),p&&C.add("thumbnails",p),g&&C.add("require_auth",g),h&&h.length>0&&C.add("sorted_metaarray",h.map((function(e){return e.encode()}))),m===a.cls.BaseMessageParams.MentionType.CHANNEL?C.add("mentioned_user_ids",[]):Array.isArray(f)&&f.length>0&&C.add("mentioned_user_ids",f),b&&b!==x.PushNotificationDeliveryOption.DEFAULT&&C.add("push_option",b),j&&C.add("root_message_id",j),y&&C.add("parent_message_id",y),O&&C.add("apple_critical_alert_options",O.serialize()),a.post(_,C,n)}}))}},{key:"uploadFile",value:function(t,n){var a=this,i=t.file,s=t.thumbnailSizes,r=t.channelUrl,o=t.progressHandler,l=t.reqId;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=R.get(a.sb._iid).container.appInfo;if(d)if("number"==typeof i.size||i.size||(i.size=0),"number"==typeof i.size)if(i.size<=d.uploadSizeLimit){var u=e.Path.STORAGE_FILE,p=new te;if(p.add("file",i,i.name),r&&"string"==typeof r&&p.add("channel_url",r),s)for(var g=0;g<s.length;g++)p.add("thumbnail"+(g+1),s[g].maxWidth+","+s[g].maxHeight);p.upload.reqId=l,p.upload.deleteRequest=function(){var e=a.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},p.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,l)},a.post(u,p,n)}else n(new P("The file size exceeded the upload limit: ".concat(d.uploadSizeLimit),P.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new P("Invalid file size: ".concat(i.size),P.INVALID_PARAMETER),null);else n(new P("Connection should be made first.",P.CONNECTION_REQUIRED),null)}}))}},{key:"registerScheduledUserMessage",value:function(t,n){var a=this,i=t.groupChannelParams,s=t.channelUrl,r=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=r?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(s)),c=new te({scheduled_dt:i._getScheduleString(),user_id:o.userId,message:i.message,data:i.data});i.customType&&c.add("custom_type",i.customType),i.metaArrayKeys&&Object.keys(i.metaArrayKeys).length>0&&c.add("metaarray",i.metaArrayKeys),i.mentionType&&c.add("mention_type",i._mentionType),i._mentionType===a.cls.BaseMessageParams.MentionType.CHANNEL?c.add("mentioned_user_ids",[]):Array.isArray(i._mentionedUserIds)&&i._mentionedUserIds.length>0&&c.add("mentioned_user_ids",i._mentionedUserIds),i.translationTargetLanguages&&i.translationTargetLanguages.length>0&&c.add("translation_target_langs",i.translationTargetLanguages),i.pushNotificationDeliveryOption&&i.pushNotificationDeliveryOption!==a.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&c.add("push_option",i.pushNotificationDeliveryOption),i.appleCriticalAlertOptions&&c.add("apple_critical_alert_options",i.appleCriticalAlertOptions.serialize()),a.post(l,c,n)}}))}},{key:"getMyPushTriggerOption",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(i));a.get(r,null,n)}}))}},{key:"setMyPushTriggerOption",value:function(t,n){var a=this,i=t.channelUrl,s=t.pushTriggerOption,r=t.enable;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(i)),c=new te;s&&c.add("push_trigger_option",s),"boolean"==typeof r&&c.add("enable",r),a.put(l,c,n)}}))}},{key:"setMyCountPreference",value:function(t,n){var a=this,i=t.channelUrl,s=t.countPreference;this.sb.ConnectionManager.ready((function(t,r){if(t)n(t,null);else{var o=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(r.userId)).replace("%s",encodeURIComponent(i)),l=new te({count_preference:s});a.put(o,l,n)}}))}},{key:"resetMyHistory",value:function(t,n){var a=this,i=t.channelUrl;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(i));a.put(r,null,n)}}))}},{key:"addReaction",value:function(t,n){var a=this,i=t.isGroupChannel,s=t.channelUrl,r=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(s)).replace("%s",encodeURIComponent(r)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(s)).replace("%s",encodeURIComponent(r)),d=new te({reaction:o});a.post(c,d,n)}}))}},{key:"deleteReaction",value:function(t,n){var a=this,i=t.isGroupChannel,s=t.channelUrl,r=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=i?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(s)).replace("%s",encodeURIComponent(r)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(s)).replace("%s",encodeURIComponent(r)),d=new te({reaction:o});a.delete(c,d,n)}}))}},{key:"getAllEmoji",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(a,i){a?t(a,null):n.get(e.Path.EMOJI_CATEGORIES,null,t)}))}},{key:"getEmojiCategory",value:function(t,n){var a=this,i=t.categoryId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",i);a.get(r,null,n)}}))}},{key:"getEmoji",value:function(t,n){var a=this,i=t.emojiKey;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.EMOJIS_EMOJIKEY.replace("%s",i);a.get(r,null,n)}}))}},{key:"getAllowFriendDiscovery",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(a,i){if(a)t(a,null);else{var s=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId));n.get(s,null,t)}}))}},{key:"setAllowFriendDiscovery",value:function(t,n){var a=this,i=t.allowFriendDiscovery;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var r=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(s.userId)),o=new te;"boolean"==typeof i&&o.add("allow_friend_discovery",i),a.put(r,o,n)}}))}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s"}}}]),e}(),ie=function(){function e(t,n){u(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?c.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return g(e,[{key:"connect",value:function(e,t,n){var a=this;Y.debug("`WebSocketClient.connect` called.");var i=R.get(this.sb._iid).container,s=i.pinger,r=i.auth,o=i.extensions,l=i.getUserAgentWithExtensions,c=i.sessionManager;this.wsHost=n;try{var d="/?p=JS&pv="+encodeURIComponent(D.OS_VERSION)+"&sv="+encodeURIComponent(D.SDK_VERSION)+"&ai="+encodeURIComponent(this.sb.getApplicationId());if(r.sessionKey?d+="&key="+encodeURIComponent(r.sessionKey):d+="&user_id="+encodeURIComponent(e)+"&access_token="+encodeURIComponent(t),d+="&active=1",d+="&SB-User-Agent="+encodeURIComponent(l(o)),d+="&Request-Sent-Timestamp="+(new Date).getTime().toString(),d+="&include_extra_data="+encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(",")),c.handler&&(d+="&expiring_session=1"),this.ws=new this.WebSocket(this.wsHost+d),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){Y.debug("`window` object does not exist.")}var u=!1;this.ws.onopen=function(e){Y.debug("`WebSocket.onopen` called."),a.handler.onOpen(e)},this.ws.onmessage=function(e){a.active();var t=e.data.split("\n");for(var n in t){var i=t[n];if(i&&"string"==typeof i){try{if("PONG"===i.substring(0,4)){s.pong();continue}}catch(e){Y.debug("`WebSocket.onmessage` command check error:",e)}a.handler.onMessage(i)}}},this.ws.onerror=function(e){Y.debug("`WebSocket.onerror` called:",e),s&&s.stop(),u=!0,a.sb.isReconnectingOnError=!0,a.handler.onError(e)},this.ws.onclose=function(e){Y.group("`WebSocket.onclose` called.",[{level:Y.supportedLogLevels.DEBUG,messages:["e",e]},{level:Y.supportedLogLevels.DEBUG,messages:["explicitDisconnect",a.explicitDisconnect]}]),s&&s.stop(),a.explicitDisconnect?a.handler.onClose(e):u||a.handler.onError(e),a.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){Y.group("`WebSocketClient.onclose` called.",[{level:Y.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=R.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new P("Connection is not valid. Please reconnect.",P.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=R.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();ie.ConnectionHandler=function e(){u(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}};var se=function(){function e(t){u(this,e),this.sb=t,this.cls=U.get(this.sb._iid),this.client=new ie(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return g(e,[{key:"connect",value:function(e,t){var n=this,a=R.get(this.sb._iid).container,i=a.auth,s=a.apiClient,r=a.commandHandler;i.sessionToken=t||null;var o=this.cls.GroupChannel,l=null,c=new ie.ConnectionHandler;this.client=new ie(this.sb,c),c.onMessage=function(e){r.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var a=function(){if(o.cachedChannels)for(var e in o.cachedChannels){var t=o.cachedChannels[e];if(t.invalidateTypingStatus())for(var a in n.sb.channelHandlers)n.sb.channelHandlers[a].onTypingStatusUpdated(t)}};a(),n.sb.globalTimer=setInterval((function(){return a()}),1e3),n.flushConnectionCallbacks(null,t),n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.ConnectionManager.processAllReadyHandler(null)}},c.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout((function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new P("Connection timeout.",P.LOGIN_TIMEOUT),null),n.sb.disconnect(null)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new P("Connection has been canceled.",P.REQUEST_FAILED),null)},n.sb.connecting=!1},c.onError=function(a){Y.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",a),i.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1):n.connectCount<n.connectParams.retryCount?(n.connectCount++,n.client.connect(e,t,l)):(n.connectCount=0,n.flushConnectionCallbacks(new P("Websocket connection failed.",P.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1)},c.onClose=function(){Y.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},s.checkRouting((function(a,i){if(a)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new P("Connection routing failed.",P.REQUEST_FAILED),null);l=i.wsHost,s.dummyCall((function(e){e&&Y.error("API dummy call failed:",e)})),n.client.connect(e,t,l)}))}},{key:"reconnect",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=R.get(this.sb._iid),i=a.container,s=i.auth,r=i.apiClient,o=i.commandHandler,l=i.sessionManager,c=this.cls.OpenChannel;if(this.sb.reconnecting=!0,this.sb.reconnectTimer)Y.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(n)for(var d in this.sb.connectionHandlers){var u=this.sb.connectionHandlers[d];u.onReconnectStarted()}this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!s.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount){for(var p in this.disconnect({clearSession:!1,err:new P("Websocket connection failed.",P.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,this.sb.connectionHandlers){var g=this.sb.connectionHandlers[p];g.onReconnectFailed()}return this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler()}this.sb.onReconnectTimerCancel=function(){t.reconnectCount=0},this.sb.reconnectTimer=setTimeout((function(){t.sb.reconnectTimer=null,t.sb.onReconnectTimerCancel=null,t.client&&t.client.disconnect(!0);var n=new ie.ConnectionHandler;t.client=new ie(t.sb,n),t.sb.loginHandler=function(n,a){if(n)n.isSessionKeyExpiredError?l.refresh((function(){})):(clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnect(e,!1));else{for(var i in t.reconnectCount=0,t.sb.connecting=!1,t.sb.reconnecting=!1,t.sb.isReconnectingOnError=!1,t.sb.connectionHandlers)t.sb.connectionHandlers[i].onReconnectSucceeded();if(t.sb.ConnectionManager.processAllReadyHandler(null),t.sb.isReconnectingOnError)for(var s in t.sb.ConnectionManager.networkHandlers)t.sb.ConnectionManager.networkHandlers[s].onReconnected();Object.keys(c.enteredChannels).forEach((function(e){c.enteredChannels[e].enter((function(n,a){if(n){var i=t.cls.FileMessageQueue;delete c.enteredChannels[e],i.delete(e)}}))}))}},n.onOpen=function(){Y.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),t.sb.loginTimer=setTimeout((function(){Y.debug("Reconnect: `loginTimer` timeout."),t.sb.loginTimer=null,t.reconnect(e,!0)}),t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=null,t.sb.reconnecting=!1},n.onMessage=function(e){o.onRawCommandReceived(e)},n.onError=function(n){Y.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",n),t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0)},n.onClose=function(){Y.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),t.sb.reconnecting=!1},r.checkRouting((function(n,a){n?t.reconnect(e,!0):(t.sb.getCurrentApiHost()!==a.apiHost&&r.get("/",null,(function(){})),t.client.connect(e,null,a.wsHost))}))}),this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=R.get(this.sb._iid),a=n.container.ackStateMap,i=this.cls,s=i.GroupChannel,r=i.OpenChannel,o=e.clearSession,l=e.err;if(this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),o){for(var c in r.clearEnteredChannels(),r.clearCache(),s.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),a)clearTimeout(a[c].timer);this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new L)}l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this.sb.connectionCallbacks;this.sb.connectionCallbacks=[],n.forEach((function(n){return n(e,t)}))}},{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}}]),e}(),re=function(){function e(t){var n=t.type,a=t.nullable,i=void 0!==a&&a,s=t.optional,r=void 0!==s&&s,o=t.optionalIf,l=void 0===o?null:o,c=t.ignoreIf,d=void 0===c?null:c,p=t.defaultValue,g=void 0===p?null:p,h=t.constraint,m=void 0===h?null:h;u(this,e),this.type=n,this.nullable=i,this.optional=r,this.optionalIf=l,this.ignoreIf=d,this.defaultValue=g,this.constraint=m}return g(e,[{key:"isMatchingType",value:function(e){var t=function(t,n){return"string"==typeof n?d(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&ee.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===d(n)&&Object.keys(n).map((function(e){return n[e]})).indexOf(e)>-1};return t(e,this.type)||Array.isArray(this.type)&&this.type.some((function(n){return t(e,n)}))||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);t.length>0&&void 0===t[t.length-1];)t.pop();var a=!1,i=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(i=t.pop()),n.pop(),a=!0);var s=[],r=null,o=0;for(var l in n){var c=n[l];"function"==typeof c.ignoreIf&&c.ignoreIf(t)?s.push(c.hasOwnProperty("defaultValue")?c.defaultValue:null):c.isMatchingType(t[o])?(c.nullable&&null===t[o]||!c.constraint||c.constraint(t[o])||(r=e.error),s.push(t[o]),o++):c.optional||"function"==typeof c.optionalIf&&c.optionalIf(t)?s.push(c.hasOwnProperty("defaultValue")?c.defaultValue:null):(r=e.error,s.push(t[o]),o++)}return a&&i&&s.push(i),t.length!==o&&(r=e.error),[r].concat(s)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{key:"error",get:function(){return new P("Invalid parameter.",P.INVALID_PARAMETER)}}]),e}(),oe=function(){function e(t){u(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return g(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=R.get(this.sb._iid),a=n.container,i=a.auth,s=a.isInBackground;t&&i.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||s||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach((function(n){n&&"function"==typeof n&&n(e,t)}))}}},{key:"errorAllReadyHandler",value:function(){this.processAllReadyHandler(new P("Connection should be made first.",P.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout((function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new P("Connection should be made first.",P.CONNECTION_REQUIRED),null)}),this.authenticateTimer);this.authInfoRequester((function(a){if(n){clearTimeout(n),n=null,t.authCount--;var i=function(n,a){t.sb.connecting=!1,e(n,null)};a&&a.hasOwnProperty("userId")?a.accessToken?a.apiHost&&a.wsHost?t.sb.connect(a.userId,a.accessToken,a.apiHost,a.wsHost,i):t.sb.connect(a.userId,a.accessToken,i):a.apiHost&&a.wsHost?t.sb.connect(a.userId,a.apiHost,a.wsHost,i):t.sb.connect(a.userId,i):e(re.error,null)}}))}else e(re.error,null)}}]),e}(),le=function e(){u(this,e),this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},ce=function(){function e(t){u(this,e),this.sb=t,this.handler=null,this.callbacks=[]}return g(e,[{key:"_refreshSessionKey",value:function(){var e=this;R.get(this._iid).container.wsAdapter.isConnected?this._refreshSessionKeyByCommand((function(t){t?t.isSessionTokenExpiredError?e._handleRefreshError(t):e._refreshSessionKeyByApi((function(t){t?e._handleRefreshError(t):e._handleRefreshSuccess()})):e._handleRefreshSuccess()})):this._refreshSessionKeyByApi((function(t){t?e._handleRefreshError(t):e._handleRefreshSuccess()}))}},{key:"_refreshSessionKeyByCommand",value:function(e){var t=this.sb,n=R.get(this._iid).container.auth,a=U.get(this._iid).Command,i=a.bSessionRefresh({token:n.sessionToken,requestId:a.generateRequestId()});t.sendCommand(i,(function(a,i){if(t.getErrorFirstCallback()){var s=[a,i];i=s[0],a=s[1]}a&&(a.hasOwnProperty("error")?i=new P("Failed to refresh the session key.",P.SESSION_TOKEN_REFRESH_FAILED):a.hasOwnProperty("new_key")&&(n.sessionKey=a.new_key)),e(i)}))}},{key:"_refreshSessionKeyByApi",value:function(e){var t=this;!function n(a){if(a<3){var i=R.get(t._iid).container,s=i.auth,r=i.apiClient,o={};s.sessionToken&&(o.accessToken=s.sessionToken),r.refreshSessionKey(o,(function(t,i){if(t)t.isSessionTokenExpiredError?e(new P("Failed to refresh the session key.",P.SESSION_TOKEN_REFRESH_FAILED)):n(a+1);else{var r=i.key;s.sessionKey=r,e(null)}}))}else e(new P("Failed to refresh the session key.",P.SESSION_TOKEN_REFRESH_FAILED))}(0)}},{key:"_handleRefreshSuccess",value:function(){var e=this.sb;e.reconnectTimer&&(clearTimeout(e.reconnectTimer),e.reconnectTimer=null),e.reconnect(),this._flushCallbacks(new P("Session key refreshed.",P.SESSION_TOKEN_REFRESHED)),this.handler&&this.handler.onSessionRefreshed()}},{key:"_handleRefreshError",value:function(e){this._flushCallbacks(e),this.handler&&this.handler.onSessionError(e)}},{key:"_handleClose",value:function(){var e=this;this.sb.disconnect((function(){e._flushCallbacks(new P("Failed to refresh the session key.",P.SESSION_TOKEN_REFRESH_FAILED)),e.handler&&e.handler.onSessionClosed()}))}},{key:"_flushCallbacks",value:function(e){this.callbacks.forEach((function(t){return t(e)})),this.callbacks=[]}},{key:"setHandler",value:function(e){e instanceof le&&(this.handler=e)}},{key:"refresh",value:function(e){var t=this,n=this.sb,a=R.get(this._iid).container.auth;this.handler?(this.callbacks.push(e),1===this.callbacks.length&&(this.handler.onSessionExpired(),a.sessionToken?this.handler.onSessionTokenRequired((function(e){e?(a.sessionToken=e,t._refreshSessionKey()):t._handleClose()}),(function(){n.reconnectTimer&&(clearTimeout(n.reconnectTimer),n.reconnectTimer=null);var e=new P("Failed to get the session token.",P.SESSION_TOKEN_REQUEST_FAILED);t._flushCallbacks(e),t.handler&&t.handler.onSessionError(e)})):this._refreshSessionKey())):e(null)}}]),e}(),de=function(){function e(t){u(this,e),this.sb=t}return g(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=R.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){Y.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"offlineWorker",value:function(){try{if("undefined"!=typeof navigator&&!navigator.onLine){var e=R.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){Y.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){Y.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){Y.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}}}]),e}(),ue=(new Date).getTime(),pe=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(u(this,e),this.command=t,this.requestId=a,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var i=this.getJsonElement();i&&(this.requestId=i.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return g(e,[{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}},{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,a=e.data,i=e.customType,s=e.metaArrays,r=e.mentionType,o=e.mentionedUserIds,l=e.translationTargetLanguages,c=e.pushNotificationDeliveryOption,d=e.appleCriticalAlertOptions,u=e.requestId,p=void 0===u?null:u,g=e.silent,h=void 0!==g&&g,m=e.rootMessageId,f=void 0===m?null:m,b=e.parentMessageId,j=void 0===b?null:b,y=U.get(this._iid),O=y.UserMessageParams,v=y.BaseMessageParams,x={};return x.channel_url=t,x.message=n,x.data=a,s&&s.length>0&&(x.metaarray=s.map((function(e){return e.encode()}))),r&&(x.mention_type=r),x.mentioned_user_ids=[],r===v.MentionType.CHANNEL?x.mentioned_user_ids=[]:Array.isArray(o)&&o.length>0&&(x.mentioned_user_ids=o),i&&(x.custom_type=i),l&&l.length>0&&(x.target_langs=l),c&&c!==O.PushNotificationDeliveryOption.DEFAULT&&(x.push_option=c),d&&(x.apple_critical_alert_options=d.serialize()),h&&(x.silent=h),f&&(x.root_message_id=f),j&&(x.parent_message_id=j),new this("MESG",x,p)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,a=e.name,i=e.type,s=e.size,r=e.data,o=e.customType,l=e.thumbnailSizes,c=e.requireAuth,d=e.metaArrays,u=e.mentionType,p=e.mentionedUserIds,g=e.pushNotificationDeliveryOption,h=e.appleCriticalAlertOptions,m=e.requestId,f=void 0===m?null:m,b=e.silent,j=void 0!==b&&b,y=e.rootMessageId,O=void 0===y?null:y,v=e.parentMessageId,x=void 0===v?null:v,_=U.get(this._iid),C=_.BaseMessageParams,k=_.FileMessageParams,w={};return w.channel_url=t,w.url=n,w.name=a||"",w.type=i||"",w.size=s||0,w.custom=r,o&&(w.custom_type=o),l&&(w.thumbnails=l),c&&(w.require_auth=c),d&&d.length>0&&(w.metaarray=d.map((function(e){return e.encode()}))),u&&(w.mention_type=u),w.mentioned_user_ids=[],u===C.MentionType.CHANNEL?w.mentioned_user_ids=[]:Array.isArray(p)&&p.length>0&&(w.mentioned_user_ids=p),g&&g!==k.PushNotificationDeliveryOption.DEFAULT&&(w.push_option=g),h&&(w.apple_critical_alert_options=h.serialize()),j&&(w.silent=j),O&&(w.root_message_id=O),x&&(w.parent_message_id=x),new this("FILE",w,f)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,a=e.appleCriticalAlertOptions,i=e.message,s=void 0===i?null:i,r=e.data,o=void 0===r?null:r,l=e.customType,c=void 0===l?null:l,d=e.mentionType,u=void 0===d?null:d,p=e.mentionedUserIds,g=void 0===p?null:p,h=e.metaArrayParams,m=void 0===h?null:h,f=U.get(this._iid).BaseMessageParams,b={};return b.channel_url=t,b.msg_id=n,null!=s&&void 0!==s&&(b.message=s),null!=o&&void 0!==o&&(b.data=o),null!=c&&void 0!==c&&(b.custom_type=c),u&&(b.mention_type=u),u===f.MentionType.CHANNEL?b.mentioned_user_ids=[]:Array.isArray(g)&&g.length>0&&(b.mentioned_user_ids=g),m&&(b.metaarray=m),a&&(b.apple_critical_alert_options=a.serialize()),new this("MEDI",b)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,a=e.appleCriticalAlertOptions,i=e.data,s=void 0===i?null:i,r=e.customType,o=void 0===r?null:r,l=e.mentionType,c=void 0===l?null:l,d=e.mentionedUserIds,u=void 0===d?null:d,p=e.metaArrayParams,g=void 0===p?null:p,h=U.get(this._iid).BaseMessageParams,m={};return m.channel_url=t,m.msg_id=n,null!=s&&void 0!==s&&(m.data=s),null!=o&&void 0!==o&&(m.custom_type=o),c&&(m.mention_type=c),c===h.MentionType.CHANNEL?m.mentioned_user_ids=[]:Array.isArray(u)&&u.length>0&&(m.mentioned_user_ids=u),g&&(m.metaarray=g),a&&(m.apple_critical_alert_options=a.serialize()),new this("FEDI",m)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,a={};return a.channel_url=t,a.msg_id=n,new this("MACK",a)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,a={};return a.channel_url=t,a.time=n,new this("TPST",a)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,a={};return a.channel_url=t,a.time=n,new this("TPEN",a)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return ue++,String(ue)}}]),e}(),ge=new WeakMap,he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e);var n=[];if(t.hasOwnProperty("premium_feature_list")&&Array.isArray(t.premium_feature_list))try{var a=t.premium_feature_list;n.push.apply(n,S(a))}catch(e){}var i=[];if(t.hasOwnProperty("application_attributes")&&Array.isArray(t.application_attributes))try{var s=t.application_attributes;i.push.apply(i,S(s))}catch(e){}ge.set(this,{emojiHash:t.hasOwnProperty("emoji_hash")?t.emoji_hash:"",uploadSizeLimit:t.hasOwnProperty("file_upload_size_limit")?1048576*t.file_upload_size_limit:Number.MAX_VALUE,useReaction:t.hasOwnProperty("use_reaction")&&t.use_reaction,applicationAttributes:i,premiumFeatureList:n})}return g(e,[{key:"emojiHash",get:function(){return ge.get(this).emojiHash}},{key:"uploadSizeLimit",get:function(){return ge.get(this).uploadSizeLimit}},{key:"premiumFeatureList",get:function(){return ge.get(this).premiumFeatureList}},{key:"applicationAttributes",get:function(){return ge.get(this).applicationAttributes}},{key:"isUsingReaction",get:function(){return ge.get(this).useReaction}}]),e}(),me=function(){function e(){u(this,e),this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return g(e,null,[{key:"createFromJson",value:function(e){var t=parseInt(e.msg_id),n=e.user_id,a=e.operation,i=e.reaction,s=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof a&&["add","delete"].indexOf(a.toLowerCase())>=0&&"string"==typeof i&&i&&"number"==typeof s){var r=new this;return r.messageId=t,r.userId=n,r.key=i,r.operation=a.toLowerCase(),r.updatedAt=s,r}return null}}]),e}();function fe(e){return Object.keys(e).forEach((function(t){e[t]&&"object"===d(e[t])&&fe(e[t])})),Object.freeze(e)}var be=function(){function e(){u(this,e)}return g(e,null,[{key:"serialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=JSON.parse(JSON.stringify(e));return t&&t(n),fe(n)}},{key:"deserialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=JSON.parse(JSON.stringify(e));return t&&t(n),n}}]),e}(),je=function(e,t,n){return new Promise((function(a,i){t((function(t,s){n&&"function"==typeof n&&(R.get(e).container.isErrorFirstInCallback?n(t,s):n(s,t)),t?i(t):a(s)}))}))},ye={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},Oe=new WeakMap,ve=function(){function e(t){u(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.sendingStatus=null,Oe.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,t&&this.__update(t)}return g(e,[{key:"serialize",value:function(){return be.serialize(this,(function(e){e.hasOwnProperty("_sender")&&(e.sender=e._sender,delete e._sender)}))}},{key:"isIdentical",value:function(e){return!("object"!==d(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return ee.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Qt.getInstance(this._iid),a=U.get(this._iid),i=a.User,s=a.BaseChannel,r=a.BaseMessageParams,o=a.Reaction,l=a.MessageMetaArray,c=a.ThreadInfo,d=a.OGMetaData,u=a.AppleCriticalAlertOptions;e.hasOwnProperty("msg_id")&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("message_id")&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.silent=!!e.hasOwnProperty("silent")&&e.silent,this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):s.CHANNEL_TYPE_GROUP;var p=e.hasOwnProperty("metaarray")?e.metaarray:{},g=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(p).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var h=0;h<g.length;h++){var m=g[h];this.metaArrays.push(new l(m,p[m]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var f=e.sorted_metaarray;Array.isArray(f)&&(this.metaArrays=f.map((function(e){return new l(e.key,e.value)})))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var b in e.reactions){var j=o.createFromJson(e.reactions[b]);j&&this.reactions.push(j)}this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:r.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach((function(e){var n=new i(e);t.mentionedUsers.push(n)})),this.sendingStatus=this.messageId>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&Oe.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=parseInt(e.parent_message_id)),e.hasOwnProperty("parent_message_text")&&(this.parentMessageText=e.parent_message_text),this.threadInfo=new c(e.thread_info),e.hasOwnProperty("og_tag")&&(this.ogMetaData=new d(e.og_tag)),this.isOperatorMessage=!!e.hasOwnProperty("is_op_msg")&&e.is_op_msg,e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new u(e.apple_critical_alert_options))}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter((function(t){return e.indexOf(t.key)>-1})):[]}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach((function(e){t[e.key]=e.value})),t}},{key:"applyReactionEvent",value:function(e){var t=this,n=U.get(this._iid),a=n.Reaction,i=null,s=re.parse(arguments,[new re({type:me,constraint:function(e){return parseInt(e.messageId)===parseInt(t.messageId)}})]),r=T(s,2);if(i=r[0],e=r[1],!i){var o=!1;for(var l in this.reactions)if(this.reactions[l].key===e.key){this.reactions[l]._applyEvent(e),this.reactions[l].isEmpty&&this.reactions.splice(l,1),o=!0;break}o||"add"!==e.operation||this.reactions.push(new a(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.ThreadedMessageListParams,o=null,l=re.parse(arguments,[new re({type:"number"}),new re({type:"string",constraint:function(e){return Object.values(ye).includes(e)}}),new re({type:r,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),c=T(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],je(this._iid,(function(a){if(o)a(o,null);else{var s=U.get(i._iid),r=s.GroupChannel,l=s.OpenChannel;i.isGroupChannel()?r.getChannel(i.channelUrl,D.INTERNAL_CALL,(function(s,r){if(Qt.getInstance(i._iid).getErrorFirstCallback()){var o=[s,r];r=o[0],s=o[1]}r?a(r,null):R.get(i._iid).container.apiClient.getMessageList(f(f({channel:s,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:i.messageId,includeReplies:!0,includeThreadInfo:!0}),(function(e,t){if(e)a(e,null);else{var n=U.get(i._iid).BaseChannel,s=t.messages.map((function(e){return n.buildMessage(e,i)})).filter((function(e){return null!==e})),r=s.filter((function(e){return e.messageId===i.messageId}))[0],o=s.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:o})}}))})):i.isOpenChannel()&&l.getChannel(i.channelUrl,D.INTERNAL_CALL,(function(s,r){if(Qt.getInstance(i._iid).getErrorFirstCallback()){var o=[s,r];r=o[0],s=o[1]}r?a(r,null):R.get(i._iid).container.apiClient.getMessageList(f(f({channel:s,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:i.messageId,includeReplies:!0,includeThreadInfo:!0}),(function(e,t){if(e)a(e,null);else{var n=U.get(i._iid).BaseChannel,s=t.messages.map((function(e){return n.buildMessage(e,i)})).filter((function(e){return null!==e})),r=s.filter((function(e){return e.messageId===i.messageId}))[0],o=s.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:o})}}))}))}}),a)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,ye.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t=U.get(this._iid),n=t.ThreadInfo,a=t.ThreadInfoUpdateEvent,i=Oe.get(this),s=null,r=re.parse(arguments,[new re({type:a,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(i)}})]),o=T(r,2);if(s=o[0],e=o[1],!s){var l=e,c=l.threadInfo;return this.threadInfo=new n(c),!0}return!1}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===d(e)&&e){var t=U.get(this._iid).MessageMetaArray,n=[];for(var a in e)n.push(new t(a,e[a]));this.metaArrays=n}}}],[{key:"getMessage",value:function(e,t){var n=this,a=U.get(this._iid),i=a.BaseChannel,s=a.MessageRetrievalParams,r=null,o=re.parse(arguments,[new re({type:s,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),l=T(o,3);return r=l[0],e=l[1],t=l[2],je(this._iid,(function(t){if(r)t(r,null);else{var a=U.get(n._iid),s=a.GroupChannel,o=a.OpenChannel;switch(e.channelType){case i.CHANNEL_TYPE_GROUP:s.getChannel(e.channelUrl,D.INTERNAL_CALL,(function(a,s){if(Qt.getInstance(n._iid).getErrorFirstCallback()){var r=[a,s];s=r[0],a=r[1]}s?t(s,null):R.get(n._iid).container.apiClient.getMessage(f({channel:a},e),(function(e,n){if(e)t(e,null);else{var s=i.buildMessage(n,a);t(null,s)}}))}));break;case i.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,D.INTERNAL_CALL,(function(a,s){if(Qt.getInstance(n._iid).getErrorFirstCallback()){var r=[a,s];s=r[0],a=r[1]}s?t(s,null):R.get(n._iid).container.apiClient.getMessage(f({channel:a},e),(function(e,n){if(e)t(e,null);else{var s=i.buildMessage(n,a);t(null,s)}}))}))}}}),t)}},{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}}]),e}(),xe=function(){function e(t){u(this,e),this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,t&&this.__update(t)}return g(e,[{key:"__update",value:function(t){var n=R.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=String(t.guest_id)),t.hasOwnProperty("user_id")&&(this.userId=String(t.user_id)),t.hasOwnProperty("name")&&(this.nickname=String(t.name)),t.hasOwnProperty("nickname")&&(this.nickname=String(t.nickname)),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=String(t.image||t.profile_url||""),Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(n.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null}},{key:"_updateMetaData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=U.get(this._iid),a=n.GroupChannel;for(var i in e)t?delete this.metaData[i]:this.metaData[i]=e[i];for(var s in a.cachedChannels)if(a.cachedChannels.hasOwnProperty(s)){var r=a.cachedChannels[s];if(r.memberMap.hasOwnProperty(this.userId)){var o=r.memberMap[this.userId];o.metaData=this.metaData}}}},{key:"serialize",value:function(){return be.serialize(this,(function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)}))}},{key:"getOriginalProfileUrl",value:function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""}},{key:"createMetaData",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.createUserMetaData({metaData:e},(function(e,a){e||n._updateMetaData(a),t(e,a)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},(function(e,t){e||a._updateMetaData(t),n(e,t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){if(a)t(a,null);else{var i={};i[e]="",R.get(n._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},(function(e,a){e||n._updateMetaData(i,!0),t(e,a)}))}}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return je(this._iid,(function(e){var n=t.metaData;R.get(t._iid).container.apiClient.deleteAllUserMetaData({},(function(a,i){a||t._updateMetaData(n,!0),e(a,i)}))}),e)}},{key:"preferredLanguages",get:function(){return this._preferredLanguages}}],[{key:"objectify",value:function(e){var t=e.userId,n=void 0===t?null:t,a=e.nickname,i=void 0===a?"":a,s=e.plainProfileUrl,r=void 0===s?"":s,o=e.connectionStatus,l=void 0===o?"":o,c=e.lastSeenAt,d=void 0===c?0:c,u=e.metaData,p=void 0===u?{}:u,g=e.isActive,h=void 0===g||g,m=e.friendDiscoveryKey,f=void 0===m?null:m,b=e.friendName,j=void 0===b?null:b,y=e.preferredLanguages,O=void 0===y?null:y,v=e.requireAuth;return{user_id:n,nickname:i,profile_url:r,is_online:l,last_seen_at:d,metadata:p,is_active:h,friend_discovery_key:f,friend_name:j,preferred_languages:O,require_auth_for_profile_image:void 0!==v&&v}}},{key:"build",value:function(e,t,n,a,i,s,r,o,l,c,d){return this.objectify({userId:e,nickname:t,plainProfileUrl:n,connectionStatus:a,lastSeenAt:i,metaData:s,isActive:r,friendDiscoveryKey:o,friendName:l,preferredLanguages:c,requireAuth:d})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).User,n=be.deserialize(e);return new t(t.objectify(n))}},{key:"NON_AVAILABLE",get:function(){return"nonavailable"}},{key:"ONLINE",get:function(){return"online"}},{key:"OFFLINE",get:function(){return"offline"}}]),e}(),_e={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},Ce=new WeakMap,ke=function(){function e(t){u(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,Ce.set(this,{}),t&&this.__update(t)}return g(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===d(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new xe(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&e.hasOwnProperty("ts")&&"number"==typeof e.ts&&this._refreshMetaData(e.metadata,e.ts)}},{key:"_addOrUpdateCachedMetaData",value:function(e,t){var n=Ce.get(this);Object.keys(e).forEach((function(a){var i=n[a],s=e[a];i?t>i.updatedAt&&(i.value=s,i.updatedAt=t,i.isRemoved=!1):n[a]={value:s,updatedAt:t,isRemoved:!1}}))}},{key:"_markAsDeletedCachedMetaData",value:function(e,t){var n=Ce.get(this);e.forEach((function(e){var a=n[e];a?t>a.updatedAt&&(a.isRemoved=!0,a.updatedAt=t):n[e]={value:null,updatedAt:t,isRemoved:!0}}))}},{key:"_refreshMetaData",value:function(e,t){var n={};Object.keys(e).forEach((function(a){n[a]={value:e[a],updatedAt:t,isRemoved:!1}})),Ce.set(this,n)}},{key:"isGroupChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,U.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,U.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,U.get(this._iid).PreviousMessageListQuery)(this)}},{key:"serialize",value:function(){return be.serialize(this,(function(e){if(null!==e.lastMessage&&"object"===d(e.lastMessage)){var t=e.lastMessage;t.hasOwnProperty("_sender")&&(t.sender=t._sender,delete t._sender,e.lastMessage=t)}e.hasOwnProperty("_messageOffsetTimestamp")&&(e.messageOffsetTimestamp=e._messageOffsetTimestamp,delete e._messageOffsetTimestamp)}))}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"number",constraint:function(e){return e>=0}}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:e,token:null,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReactions:n},(function(e,t){var n=null;if(!e){var s=U.get(i._iid).BaseChannel;n={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,i)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}}a(e,n)}))}),a)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:null,token:e,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReactions:n},(function(e,t){var n=null;if(!e){var s=U.get(i._iid).BaseChannel;n={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,i)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}}a(e,n)}))}),a)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var a=this,i=U.get(this._iid),s=i.BaseChannel,r=i.MessageChangeLogsParams,o=null,l=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:r}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){o?n(o,null):R.get(a._iid).container.apiClient.getMessageChangeLogs(f({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel()},t),(function(e,t){var i=null;e||(i={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,a)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}),n(e,i)}))}),n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var a=this,i=U.get(this._iid),s=i.BaseChannel,r=i.MessageChangeLogsParams,o=null,l=re.parse(arguments,[new re({type:"number",constraint:function(e){return e>=0}}),new re({type:r}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){o?n(o,null):R.get(a._iid).container.apiClient.getMessageChangeLogs(f({channelUrl:a.url,timestamp:e,token:null,isOpenChannel:a.isOpenChannel()},t),(function(e,t){var i=null;e||(i={updatedMessages:t.updated.map((function(e){return s.buildMessage(e,a)})),deletedMessageIds:t.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:t.has_more,token:t.next}),n(e,i)}))}),n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return je(this._iid,(function(e){var n=Qt.getInstance(t._iid);R.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},(function(t,n){var a=null;t||(a={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,a)}))}),e)}},{key:"_parseMessageListParams",value:function(e){for(var t=U.get(this._iid),n=t.MessageListParams,a=new n,i=null,s=!1,r=0,o=0,l=!1,c="",d="",u=null,p=!1,g=!1,h=null,m=arguments.length,f=new Array(m>1?m-1:0),b=1;b<m;b++)f[b-1]=arguments[b];switch(e){case"prev":var j=re.parse(f,[new re({type:"number"}),new re({type:"boolean"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"string"}),new re({type:"string"}),new re({type:"array",optional:!0}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),y=T(j,11);i=y[0],y[1],s=y[2],r=y[3],l=y[4],c=y[5],d=y[6],u=y[7],p=y[8],g=y[9],h=y[10];break;case"next":var O=re.parse(f,[new re({type:"number"}),new re({type:"boolean"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"string"}),new re({type:"string"}),new re({type:"array",optional:!0}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),v=T(O,11);i=v[0],v[1],s=v[2],o=v[3],l=v[4],c=v[5],d=v[6],u=v[7],p=v[8],g=v[9],h=v[10];break;case"prevnext":var x=re.parse(f,[new re({type:"number"}),new re({type:"number"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"string"}),new re({type:"string"}),new re({type:"array",optional:!0}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),_=T(x,11);i=_[0],_[1],r=_[2],o=_[3],l=_[4],c=_[5],d=_[6],u=_[7],p=_[8],g=_[9],h=_[10],s=!0}return i?[null,h]:(a.isInclusive=s,a.prevResultSize=r,a.nextResultSize=o,a.reverse=l,a.messageType=c,a.customType=d,""===a.customType&&(a.customType="*"),a.senderUserIds=u,a.includeMetaArray=p,a.includeReactions=g,[a,h])}},{key:"_getMessageList",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.MessageListParams,o=null,l=re.parse(arguments,[new re({type:"number"}),new re({type:"string",constraint:function(e){return Object.values(_e).includes(e)}}),new re({type:r,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),c=T(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],je(this._iid,(function(a){o?a(o,null):R.get(i._iid).container.apiClient.getMessageList(f(f({channel:i,token:e,tokenType:t},n),{},{shouldReverse:n.reverse}),(function(e,t){if(e)a(e,null);else{var n=U.get(i._iid).BaseChannel,s=t.messages.map((function(e){return n.buildMessage(e,i)})).filter((function(e){return null!==e}));a(null,s)}}))}),a)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.TIMESTAMP,a,i)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.TIMESTAMP,a,i)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.TIMESTAMP,a,i)}},{key:"getPreviousMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prev"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.MESSAGE_ID,a,i)}},{key:"getNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["next"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.MESSAGE_ID,a,i)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=this._parseMessageListParams.apply(this,["prevnext"].concat(S(re.toArray(arguments)))),n=T(t,2),a=n[0],i=n[1];return this._getMessageList(e,_e.MESSAGE_ID,a,i)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,_e.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,_e.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,a=e.message,i=e.data,s=e.customType,r=e.metaArrays,o=e.mentionType,l=e.mentionedUserIds,c=e.pushNotificationDeliveryOption,d=e.rootMessageId,u=e.parentMessageId,p=e.translationTargetLanguages,g=e.appleCriticalAlertOptions,h=e.silent,m=void 0!==h&&h,f=e.callback,b=U.get(this._iid),j=b.Command,y=b.UserMessage;n||(n=j.generateRequestId());var O=Qt.getInstance(this._iid),v={};Array.isArray(p)&&p.forEach((function(e){return v[e]=""}));var x=y.objectify({messageId:0,reqId:n,user:O.currentUser||{},channel:this,message:a,data:i,customType:s,appleCriticalAlertOptions:g,metaArrays:r,mentionType:o,mentionedUserIds:l,rootMessageId:d,parentMessageId:u,translations:v,silent:m,createdAt:(new Date).getTime()}),_=new y(x);if(_.requestState=O.MessageRequestState.PENDING,_.sendingStatus=O.MessageSendingStatus.PENDING,_.requestedMentionUserIds=l,!O.currentUser){var C=new P("Connection should be made first.",P.CONNECTION_REQUIRED),k=new y(x);return k.requestState=O.MessageRequestState.FAILED,k.sendingStatus=O.MessageSendingStatus.FAILED,k.requestedMentionUserIds=l,k.errorCode=C.code,f(C,k),_}var w=j.bMessage({channelUrl:this.url,message:a,data:i,customType:s,metaArrays:r,mentionType:o,mentionedUserIds:l,requestId:n,rootMessageId:d,parentMessageId:u,silent:m,translationTargetLanguages:p,pushNotificationDeliveryOption:c,appleCriticalAlertOptions:g});return _.reqId=w.requestId,this.isGroupChannel()&&O.getConnectionState()!==O.ConnectionState.OPEN&&O.currentUser&&!O.connecting&&!O.reconnecting&&"string"==typeof s&&0===s.indexOf("SB_VIDEOCHAT")?R.get(O._iid).container.apiClient.sendUserMessage({channelUrl:this.url,isOpenChannel:this.isOpenChannel(),message:a,data:i,customType:s,translationTargetLanguages:p,metaArrays:r,mentionType:o,mentionedUserIds:l,pushNotificationDeliveryOption:c,rootMessageId:d,parentMessageId:u,appleCriticalAlertOptions:g},(function(e,t){var n=null;e?((n=new y(x)).requestState=O.MessageRequestState.FAILED,n.sendingStatus=O.MessageSendingStatus.FAILED,e.code===P.REQUEST_CANCELED&&(n.sendingStatus=O.MessageSendingStatus.CANCELED),n.requestedMentionUserIds=l,n.errorCode=e.code):((n=new y(t)).requestState=O.MessageRequestState.SUCCEEDED,n.sendingStatus=O.MessageSendingStatus.SUCCEEDED),f(e,n)})):O.sendCommand(w,(function(e,n){if(O.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n){var i=new y(x);i.reqId=w.requestId,i.requestState=O.MessageRequestState.FAILED,i.sendingStatus=O.MessageSendingStatus.FAILED,n.code===P.REQUEST_CANCELED&&(i.sendingStatus=O.MessageSendingStatus.CANCELED),i.requestedMentionUserIds=l,i.errorCode=n.code,f(new P(n.message,n.code),i)}else{var s=new y(e.getJsonElement()),r=O.currentUser;if(r&&s._sender&&r.userId===s._sender.userId&&(r.nickname!==s._sender.nickname&&(r.nickname=s._sender.nickname),r.plainProfileUrl!==s._sender.plainProfileUrl&&(r.plainProfileUrl=s._sender.plainProfileUrl),ee.deepEqual(r.metaData,s._sender.metaData)||(r.metaData=s._sender.metaData)),t.isGroupChannel())for(var o in t.lastMessage=s,O.channelHandlers)O.channelHandlers[o].onChannelChanged(t);s.requestState=O.MessageRequestState.SUCCEEDED,s.sendingStatus=O.MessageSendingStatus.SUCCEEDED,f(null,s)}})),_}},{key:"sendUserMessage",value:function(){var e=re.toArray(arguments),t=e.pop(),n=null,a=null,i=U.get(this._iid),s=i.UserMessageParams;if("function"==typeof t)if(e[0]instanceof s)null===(a=e[0]).data&&(a.data=""),null===a.customType&&(a.customType="");else if("string"==typeof e[0])switch((a=new s).message=e[0],e.length){case 1:break;case 2:a.data=e[1]||"";break;case 3:a.data=e[1]||"",a.customType=e[2]||"";break;case 4:a.data=e[1]||"",a.customType=e[2]||"",a.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=re.error}else n=re.error;else n=re.error;var r=R.get(this._iid),o=r.container.isErrorFirstInCallback;return!n&&a._validate()&&a.message?this._sendUserMessage(f(f({},a),{},{metaArrays:a.metaArrays,mentionType:a.mentionType,mentionedUserIds:a._mentionedUserIds,rootMessageId:a.rootMessageId,parentMessageId:a.parentMessageId,translationTargetLanguages:a._translationTargetLanguages,callback:function(e,n){o?t(e,n):t(n,e)}})):(o?t(re.error,null):t(null,re.error),null)}},{key:"resendUserMessage",value:function(e,t){var n=this,a=U.get(this._iid),i=a.UserMessage,s=a.UserMessageParams,r=null,o=re.parse(arguments,[new re({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===d(e.translations)&&!Array.isArray(e.translations)}}),new re({type:"callback"})]),l=T(o,3);return r=l[0],e=l[1],t=l[2],je(this._iid,(function(t){if(r)r.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(r,null);else{var a=Object.keys(e.translations),i=s.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(f(f({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:a,pushNotificationDeliveryOption:i,reqId:e.reqId,callback:t}))}}),t)}},{key:"updateUserMessage",value:function(e,t,n,a,i){var s=this,r=U.get(this._iid),o=r.Command,l=r.UserMessage,c=r.UserMessageParams,d=arguments,u=null,p=null;if("number"==typeof e)switch(d.length){case 3:var g=re.parse(d,[new re({type:"number"}),new re({type:c}),new re({type:"callback"})]),h=T(g,4);u=h[0],e=h[1],p=h[2],i=h[3];break;case 5:p=new c;var m=re.parse(d,[new re({type:"number"}),new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"callback"})]),b=T(m,6);u=b[0],e=b[1],t=b[2],n=b[3],a=b[4],i=b[5],p.message=t,p.data=n,p.customType=a}return je(this._iid,(function(t){if(!u&&p&&p._validate()){var n=o.bUpdateUserMessage(f(f({channelUrl:s.url,messageId:e},p),{},{mentionType:p._mentionType,mentionedUserIds:p._mentionedUserIds})),a=Qt.getInstance(s._iid);a.sendCommand(n,(function(e,n){if(a.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var s=null;n||(s=new l(e.getJsonElement())),t(n,s)}))}else t(re.error,null)}),i)}},{key:"translateUserMessage",value:function(e,t,n){var a=this,i=Qt.getInstance(this._iid),s=U.get(this._iid),r=s.UserMessage,o=null,l=re.parse(arguments,[new re({type:r,constraint:function(e){return e.channelUrl===a.url&&e.sendingStatus===i.MessageSendingStatus.SUCCEEDED}}),new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){o?n(o,null):R.get(a._iid).container.apiClient.translateUserMessage({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},(function(e,t){var a=null;e||(a=new r(t)),n(e,a)}))}),n)}},{key:"_parseFileMessageArguments",value:function(e){var t=U.get(this._iid),n=t.BaseMessageParams,a=t.FileMessageParams,i={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:a.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,callback:null,appleCriticalAlertOptions:null};if("function"==typeof e[e.length-1]&&(i.callback=e.pop()),"function"==typeof e[e.length-1]&&(i.progressHandler=e.pop()),e[0]instanceof a)i.file=e[0].file||e[0].fileUrl,i.name=e[0].fileName,i.type=e[0].mimeType,i.size=e[0].fileSize,i.data=e[0].data,i.customType=e[0].customType,i.thumbnailSizes=e[0].thumbnailSizes,i.metaArrays=e[0].metaArrays,i.mentionType=e[0]._mentionType,i.mentionedUserIds=e[0]._mentionedUserIds,i.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:a.PushNotificationDeliveryOption.DEFAULT,i.rootMessageId=e[0].rootMessageId,i.parentMessageId=e[0].parentMessageId,i.silent=e[0].silent,e[0]._validate()||(i.error=re.error),i.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions;else if(ee.isFile(e[0])||"string"==typeof e[0]){switch(i.file=e[0],e.length){case 1:break;case 2:i.data=e[1];break;case 3:i.data=e[1],i.customType=e[2];break;case 4:i.data=e[1],i.customType=e[2],i.thumbnailSizes=e[3];break;case 5:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4];break;case 6:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5];break;case 7:i.name=e[1],i.type=e[2],i.size=e[3],i.data=e[4],i.customType=e[5],i.thumbnailSizes=e[6]}var s=T(re.parse([i.file,i.name,i.type,i.size,i.data,i.customType,i.thumbnailSizes],[new re({type:["file","string"]}),new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"array"})]),8);i.error=s[0],i.file=s[1],i.name=s[2],i.type=s[3],i.size=s[4],i.data=s[5],i.customType=s[6],i.thumbnailSizes=s[7]}else i.error=re.error;return ee.isFile(i.file)&&(i.name=i.name||i.file.name,i.type=i.type||i.file.type,i.size=i.size||i.file.size),i}},{key:"_createTempFileMessage",value:function(e){try{var t=Qt.getInstance(this._iid),n=U.get(this._iid),a=n.Command,i=n.FileMessage,s=i.objectify(f(f({},e),{},{messageId:0,reqId:a.generateRequestId(),user:t.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map((function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}})),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}));return new i(s)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this._parseFileMessageArguments(re.toArray(arguments)),t=U.get(this._iid),n=t.Command,a=null,i=n.generateRequestId();e.error||((a=this._createTempFileMessage(e)).requestedMentionUserIds=e.mentionedUserIds,i=a.reqId);var s=Qt.getInstance(this._iid);s&&s.currentUser||(e.error=new P("Connection should be made first.",P.CONNECTION_REQUIRED));var r=U.get(this._iid),o=r.FileMessageQueue,l=o.create(this);return l.addJob(new o.Job({fileInfo:e,pendingMessage:a,requestId:i,error:e.error,response:null})),a}},{key:"sendFileMessages",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.progress?n.progress:function(){},i=n.sent?n.sent:function(){},s=n.complete?n.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var r=[];return e.forEach((function(n,o){r.push(t.sendFileMessage(n,a,(function(t,n){i(t,n),o===e.length-1&&s(null)})))})),r}return s(re.error),null}},{key:"resendFileMessage",value:function(e,t,n){var a=this,i=U.get(this._iid),s=i.FileMessage,r=i.FileMessageParams,o=null,l=re.parse(arguments,[new re({type:s,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===a.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new re({type:"file",optionalIf:function(e){return!!e[0].url},defaultValue:null}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var i=new r;e.url?i.fileUrl=e.url:i.file=t,i.fileName=e.name,i.fileSize=e.size,i.mimeType=e.type,i.data=e.data,i.customType=e.customType,i.mentionType=e.mentionType,i.mentionedUserIds=e.requestedMentionUserIds,i.metaArrays=e.metaArrays,i.thumbnailSizes=e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),i.appleCriticalAlertOptions=e.appleCriticalAlertOptions,a.sendFileMessage(i,n)}}),n)}},{key:"updateFileMessage",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.Command,o=s.FileMessage,l=s.FileMessageParams,c=arguments,d=null,u=null;if("number"==typeof e)switch(c.length){case 3:var p=re.parse(c,[new re({type:"number"}),new re({type:l}),new re({type:"callback"})]),g=T(p,4);d=g[0],e=g[1],u=g[2],a=g[3],u&&(u._isUpdate=!0);break;case 4:u=new l;var h=re.parse(c,[new re({type:"number"}),new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"callback"})]),m=T(h,5);d=m[0],e=m[1],t=m[2],n=m[3],a=m[4],u.data=t,u.customType=n,u._isUpdate=!0}return je(this._iid,(function(t){if(!d&&u&&u._validate()){var n=r.bUpdateFileMessage(f(f({channelUrl:i.url,messageId:e},u),{},{mentionType:u._mentionType,mentionedUserIds:u._mentionedUserIds})),a=Qt.getInstance(i._iid);a.sendCommand(n,(function(e,n){if(a.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var s=null;n||(s=new o(e.getJsonElement())),t(n,s)}))}else t(re.error,null)}),a)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:["number","string"]}),new re({type:"callback"})]),i=T(a,3);n=i[0],e=i[1],t=i[2];var s=R.get(this._iid),r=s.container.isErrorFirstInCallback;if(n)return r?t(n,null):t(null,n),!1;var o=U.get(this._iid),l=o.FileMessageQueue,c=l.create(this);return c.cancelUploadItemByRequestId(e,(function(e,n){return r?t(e,n):t(n,e)}))}},{key:"addReaction",value:function(e,t,n){var a=this,i=Qt.getInstance(this._iid),s=U.get(this._iid),r=s.ReactionEvent,o=null,l=re.parse(arguments,[new re({type:ve}),new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){o?n(o,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?R.get(a._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,a){var i=null;t||(i=r.createFromJson(f(f({},a),{},{msg_id:e.messageId}))),n(t,i)})):n(new P("Cannot add reaction to a non-succeeded message.",P.REQUEST_FAILED),null)}),n)}},{key:"deleteReaction",value:function(e,t,n){var a=this,i=Qt.getInstance(this._iid),s=U.get(this._iid),r=s.ReactionEvent,o=null,l=re.parse(arguments,[new re({type:ve}),new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),c=T(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],je(this._iid,(function(n){o?n(o,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?R.get(a._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,a){var i=null;t||(i=r.createFromJson(f(f({},a),{},{msg_id:e.messageId}))),n(t,i)})):n(new P("Cannot remove reaction to a non-succeeded message.",P.REQUEST_FAILED),null)}),n)}},{key:"deleteMessage",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.deleteMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),messageId:e.messageId},(function(e,n){return t(e,null)}))}),t)}},{key:"copyUserMessage",value:function(t,n,a){var i=U.get(this._iid);i.Command;var s=i.UserMessage,r=i.BaseMessageParams,o=null,l=re.parse(arguments,[new re({type:e}),new re({type:s}),new re({type:"callback"})]),c=T(l,4);o=c[0],t=c[1],n=c[2],a=c[3];var d=R.get(this._iid),u=d.container.isErrorFirstInCallback;if(o)return u?a(re.error,null):a(null,re.error),null;if(this.url!==n.channelUrl){var p=new P("The message does not belong to this channel",P.INVALID_PARAMETER);return u?a(p,null):a(null,p),null}var g=Object.keys(n.translations);g.forEach((function(e){return""}));var h=r.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(f(f({},n),{},{reqId:null,pushNotificationDeliveryOption:h,translationTargetLanguages:g,rootMessageId:null,parentMessageId:null,parentMessageText:null,callback:a}))}},{key:"copyFileMessage",value:function(t,n,a){var i=U.get(this._iid),s=i.Command;i.GroupChannel;var r=i.FileMessage,o=i.BaseMessageParams;i.FileMessageParams;var l=i.User,c=null,d=re.parse(arguments,[new re({type:e}),new re({type:r}),new re({type:"callback"})]),u=T(d,4);c=u[0],t=u[1],n=u[2],a=u[3];var p=R.get(this._iid),g=p.container.isErrorFirstInCallback;if(c)return g?a(re.error,null):a(null,re.error),null;if(this.url!==n.channelUrl){var h=new P("The message does not belong to this channel");return g?a(h,null):a(null,h),null}var m=Qt.getInstance(this._iid),f=n,b=f.url,j=f.name,y=f.type,O=f.size,v=f.data,x=f.customType,_=f.mentionType,C=f.mentionedUserIds,k=f.mentionedUsers,w=f.metaArrays,S=f.thumbnails,E=f.requireAuth,I=f.messageSurvivalSeconds,M=f.silent,D=f.appleCriticalAlertOptions,A=s.generateRequestId(),N=m.currentUser||{},L=t.url,F=t.isOpenChannel(),$=k.filter((function(e){return new l(l.objectify(e))})),B=o.PushNotificationDeliveryOption.DEFAULT,V=r.objectify({messageId:0,reqId:A,user:N,channel:t,plainUrl:b,name:j,type:y,size:O,data:v,customType:x,mentionType:_,mentionedUserIds:C,mentionedUsers:$,requestedMentionUserIds:C,metaArrays:w,thumbnails:S,requireAuth:E,messageSurvivalSeconds:I,silent:M,createdAt:(new Date).getTime(),appleCriticalAlertOptions:D}),z=new r(V);if(z.requestState=m.MessageRequestState.PENDING,z.sendingStatus=m.MessageSendingStatus.PENDING,!m.currentUser){var H=new P("Connection should be made first.",P.CONNECTION_REQUIRED),q=new r(V);return q.requestState=m.MessageRequestState.FAILED,q.sendingStatus=m.MessageSendingStatus.FAILED,q.errorCode=H.code,g?a(H,q):a(q,H),z}var G=s.bFile({requestId:A,channelUrl:L,url:b,name:j,type:y,size:O,data:v,customType:x,metaArrays:w,mentionType:_,mentionedUserIds:C,thumbnailSizes:S,requireAuth:E,pushNotificationDeliveryOption:B,silent:M,appleCriticalAlertOptions:D});return m.getConnectionState()===m.ConnectionState.OPEN||m.connecting||m.reconnecting?m.sendCommand(G,(function(e,n){if(m.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(n)if(n.code!==P.INVALID_PARAMETER){var s=new r(V);s.requestState=m.MessageRequestState.FAILED,s.sendingStatus=m.MessageSendingStatus.FAILED,n.code!==P.FILE_UPLOAD_CANCEL_FAILED&&n.code!==SendBridException.REQUEST_CANCELED||(s.sendingStatus=m.MessageSendingStatus.CANCELED),s.errorCode=n.code,g?a(n,s):a(s,n)}else g?a(n,null):a(null,n);else{var o=new r(e.getJsonElement()),l=o._sender;if(N&&l&&N.userId===l.userId&&(N.nickname!==l.nickname&&(N.nickname=l.nickname),N.plainProfileUrl!==l.plainProfileUrl&&(N.plainProfileUrl=l.plainProfileUrl)),t.isGroupChannel())for(var c in t.lastMessage=o,m.channelHandlers)m.channelHandlers[c].onChannelChanged(t);g?a(null,o):a(o,null)}})):p.container.apiClient.sendFileMessage({channelUrl:L,isOpenChannel:F,fileUrl:b,fileName:j,fileType:y,fileSize:O,data:v,customType:x,metaArrays:w,mentionType:_,mentionedUserIds:C,thumbnailSizes:S,requireAuth:E,pushNotificationDeliveryOption:B,appleCriticalAlertOptions:D},(function(e,n){if(e)if(e.code!==P.INVALID_PARAMETER){var i=new r(commnad.getJsonElement());i.requestState=m.MessageRequestState.FAILED,i.sendingStatus=m.MessageSendingStatus.FAILED,e.code!==P.FILE_UPLOAD_CANCEL_FAILED&&e.code!==SendBridException.REQUEST_CANCELED||(i.sendingStatus=m.MessageSendingStatus.CANCELED),i.errorCode=e.code,g?a(e,i):a(i,e)}else g?a(e,null):a(null,e);else{var s=new r(n),o=s._sender;if(N&&o&&N.userId===o.userId&&(N.nickname!==o.nickname&&(N.nickname=o.nickname),N.plainProfileUrl!==o.plainProfileUrl&&(N.plainProfileUrl=o.plainProfileUrl)),t.isGroupChannel())for(var l in t.lastMessage=s,m.channelHandlers)m.channelHandlers[l].onChannelChanged(t);g?a(null,s):a(s,null)}})),z}},{key:"addOperators",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.addOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"removeOperators",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.removeOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getMetaCounters",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaCounters",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.createMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaCounters",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateMetaCounters({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},(function(e,t){return n(e,t)}))}),n)}},{key:"increaseMetaCounters",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},(function(e,n){return t(e,n)}))}),t)}},{key:"decreaseMetaCounters",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},(function(e,n){var a=null;if(!e)for(var i in a={},n)a[i]=n[i];t(e,a)}))}),t)}},{key:"deleteMetaCounter",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.deleteMetaCounter({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"getCachedMetaData",value:function(){var e=Ce.get(this),t={};return Object.keys(e).forEach((function(n){var a=e[n];a.isRemoved||(t[n]=a.value)})),t}},{key:"getMetaData",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"getAllMetaData",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){e(t,n&&n.ts?n.metadata:n)}))}),e)}},{key:"createMetaData",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.createMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaData:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateMetaData({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),metaData:e,upsert:t},(function(e,t){n(e,t&&t.ts?t.metadata:t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.deleteMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){t(e,n&&n.ts?{}:n)}))}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n&&n.ts?{}:n)}))}),e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,a){var i=this;return je(this._iid,(function(a){var s=U.get(i._iid),r=s.Command,o=s.UserMessage,l=s.FileMessage,c=s.AdminMessage,d=null;if(t.isUserMessage()?d=r.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(d=r.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),d){var u=Qt.getInstance(i._iid);u.sendCommand(d,(function(e,n){if(u.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var s=null;n||(t.isUserMessage()?s=new o(e.getJsonElement()):t.isFileMessage()?s=new l(e.getJsonElement()):t.isAdminMessage()&&(s=new c(e.getJsonElement()))),a(n,s)}))}else a(re.error,null)}),a)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var a=U.get(this._iid),i=a.MessageMetaArray,s=null,r=re.parse(arguments,[new re({type:ve}),new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new re({type:"callback"})]),o=T(r,4);if(s=o[0],e=o[1],t=o[2],n=o[3],s)return je(this._iid,(function(e){e(s,null)}),n);var l=[];if(Array.isArray(t))for(var c=0;c<t.length;c++){var d=t[c];l.push(new i(d,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map((function(e){return e.encode()})),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var a=U.get(this._iid),i=a.MessageMetaArray,s=null,r=re.parse(arguments,[new re({type:ve}),new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new re({type:"callback"})]),o=T(r,4);if(s=o[0],e=o[1],t=o[2],n=o[3],s)return je(this._iid,(function(e){e(s,null)}),n);var l=[];if(Array.isArray(t))for(var c=0;c<t.length;c++){var d=t[c];l.push(new i(d,[]))}return this._updateMessageMetaArray(this.url,e,{array:l.map((function(e){return e.encode()})),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var a=U.get(this._iid),i=a.MessageMetaArray,s=null,r=re.parse(arguments,[new re({type:ve}),new re({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof i}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new re({type:"callback"})]),o=T(r,4);if(s=o[0],e=o[1],t=o[2],n=o[3],s)return je(this._iid,(function(e){e(s,null)}),n);var l=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:l,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var a=U.get(this._iid),i=a.MessageMetaArray,s=null,r=re.parse(arguments,[new re({type:ve}),new re({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof i}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new re({type:"callback"})]),o=T(r,4);if(s=o[0],e=o[1],t=o[2],n=o[3],s)return je(this._iid,(function(e){e(s,null)}),n);var l=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:l,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var a=this,i=U.get(this._iid),s=i.BaseChannel,r=null,o=re.parse(arguments,[new re({type:s.ReportCategory}),new re({type:"string"}),new re({type:"callback"})]),l=T(o,4);return r=l[0],e=l[1],t=l[2],n=l[3],je(this._iid,(function(n){if(r)n(r,null);else{var i=Qt.getInstance(a._iid);R.get(a._iid).container.apiClient.report({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:e,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:t},(function(e,t){n(e,null)}))}}),n)}},{key:"reportUser",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.BaseChannel,o=null,l=re.parse(arguments,[new re({type:xe}),new re({type:r.ReportCategory}),new re({type:"string"}),new re({type:"callback"})]),c=T(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],je(this._iid,(function(a){if(o)a(o,null);else{var s=Qt.getInstance(i._iid);R.get(i._iid).container.apiClient.reportUser({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},(function(e,t){a(e,null)}))}}),a)}},{key:"reportMessage",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.BaseChannel,o=null,l=re.parse(arguments,[new re({type:ve}),new re({type:r.ReportCategory}),new re({type:"string"}),new re({type:"callback"})]),c=T(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],je(this._iid,(function(a){if(o)a(o,null);else{var s=Qt.getInstance(i._iid);R.get(i._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},(function(e,t){a(e,null)}))}}),a)}}],[{key:"buildMessage",value:function(e,t){var n=U.get(this._iid),a=n.UserMessage,i=n.FileMessage,s=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new a(e);case"FILE":var r=e.file;return new i(f(f({},e),{},{url:String(r.url),name:String(r.name),type:String(r.type),size:parseInt(r.size),data:String(r.data)}));case"BRDM":case"ADMM":return new s(e)}return null}},{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}}]),e}(),we=function(){function e(t){u(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):ke.CHANNEL_TYPE_GROUP)}return g(e,[{key:"isGroupChannel",value:function(){return this.channelType===ke.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===ke.CHANNEL_TYPE_OPEN}}]),e}();we.CATEGORY_NONE=0,we.CATEGORY_CHANNEL_ENTER=10102,we.CATEGORY_CHANNEL_EXIT=10103,we.CATEGORY_USER_CHANNEL_MUTE=10201,we.CATEGORY_USER_CHANNEL_UNMUTE=10200,we.CATEGORY_USER_CHANNEL_BAN=10601,we.CATEGORY_USER_CHANNEL_UNBAN=10600,we.CATEGORY_CHANNEL_FREEZE=10701,we.CATEGORY_CHANNEL_UNFREEZE=10700,we.CATEGORY_TYPING_START=10900,we.CATEGORY_TYPING_END=10901,we.CATEGORY_CHANNEL_JOIN=1e4,we.CATEGORY_CHANNEL_LEAVE=10001,we.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,we.CATEGORY_CHANNEL_INVITE=10020,we.CATEGORY_CHANNEL_DECLINE_INVITE=10022,we.CATEGORY_CHANNEL_PROP_CHANGED=11e3,we.CATEGORY_CHANNEL_DELETED=12e3,we.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,we.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,we.CATEGORY_CHANNEL_HIDE=13e3,we.CATEGORY_CHANNEL_UNHIDE=13001;var Te=function e(t){u(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0)};Te.CATEGORY_USER_BLOCK=20001,Te.CATEGORY_USER_UNBLOCK=2e4,Te.CATEGORY_FRIEND_DISCOVERED=20900;var Se=function(){function e(t){u(this,e),this.sb=t,this.cls=U.get(this.sb._iid)}return g(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,a=n.Command,i=n.User,s=n.Member,r=n.BaseChannel,o=n.GroupChannel,l=n.OpenChannel,c=n.UserMessage,u=n.FileMessage,p=n.AdminMessage,g=n.BaseMessageParams,h=n.ReactionEvent,m=n.ReadStatus,f=n.ThreadInfoUpdateEvent,b=R.get(this.sb._iid),j=b.container,y=j.pinger,O=j.auth,v=j.subscribedUnreadMessageCount,x=j.sessionManager,_=j.ackStateMap,C=new a(e),k=C.getJsonElement();if(k.hasOwnProperty("unread_cnt")&&"object"===d(k.unread_cnt)){var w=!1,T=k.unread_cnt.ts;if("number"==typeof T&&T>v.ts){if(v.all!==k.unread_cnt.all&&(w=!0),v.all=k.unread_cnt.all>=0?k.unread_cnt.all:0,k.unread_cnt.custom_types)for(var S in k.unread_cnt.custom_types)v.custom_types[S]!==k.unread_cnt.custom_types[S]&&(w=!0),v.custom_types[S]=k.unread_cnt.custom_types[S];w=w&&v.ts>0,v.ts=T}if(w)for(var E in this.sb.userEventHandlers)this.sb.userEventHandlers[E].onTotalUnreadMessageCountUpdated(v.all,v.custom_types)}var I=C.requestId;if(I){var A=_[I];if(A){clearTimeout(A.timer);var N=A.handler;N&&("EROR"===C.command?N(new P(k.message,k.code),null):N(null,C)),_.hasOwnProperty(I)&&delete _[I]}}else switch(y&&"LOGI"!==C.command&&y.refreshTimer(),C.command){case"LOGI":this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,k.hasOwnProperty("error")?(this.sb.isSessionOpened=!1,this.sb.loginHandler(new P(k.message,k.code),null)):(this.sb.isSessionOpened=!0,k.hasOwnProperty("key")&&(O.sessionKey=k.key),k.hasOwnProperty("ekey")&&(O.eKey=k.ekey),k.hasOwnProperty("user_id")&&(this.sb.currentUser=new i(k)),"number"==typeof k.ping_interval&&k.ping_interval>0&&b.set("pingInterval",1e3*k.ping_interval),"number"==typeof k.pong_timeout&&k.pong_timeout>0&&b.set("pongTimeout",1e3*k.pong_timeout),"number"==typeof k.login_ts&&b.set("connectedAt",1e3*k.login_ts),"number"==typeof k.max_unread_cnt_on_super_group?b.set("maxUnreadCountOfSuperGroupChannel",k.max_unread_cnt_on_super_group):b.set("maxUnreadCountOfSuperGroupChannel",D.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),k.profile_image_encryption&&b.set("profileImageEncryption",!0),y&&y.start(),k.hasOwnProperty("file_upload_size_limit")&&k.hasOwnProperty("premium_feature_list")&&k.hasOwnProperty("emoji_hash")&&b.set("appInfo",new he(k)),this.sb.loginHandler(null,this.sb.currentUser)),this.sb.connecting=!1,this.sb.reconnecting=!1);break;case"EXPR":k.hasOwnProperty("expires_in")&&"number"==typeof k.expires_in&&k.expires_in>0&&x.refresh((function(){}));break;case"MESG":case"FILE":case"BRDM":case"ADMM":var L=null;if("MESG"===C.command?L=new c(k):"FILE"===C.command?L=new u(k):"BRDM"!==C.command&&"ADMM"!==C.command||(L=new p(k)),L){var F=this.sb.currentUser?this.sb.currentUser.userId:null,U=L.silent,$=!!k.force_update_last_message,B=L._sender&&L._sender.userId===F;if(L.isGroupChannel()){var V=a.bMessageAck({channelUrl:L.channelUrl,messageId:L.messageId});this.sb.sendCommand(V);var z=o.cachedChannels.hasOwnProperty(L.channelUrl);o.getChannel(L.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){if(e.isHidden=!1,e.hiddenState=o.HiddenState.UNHIDDEN,o.cachedChannels[e.url]=e,L._sender&&e.memberMap.hasOwnProperty(L._sender.userId)){var i=e.memberMap[L._sender.userId];i.nickname!==L._sender.nickname&&(i.nickname=L._sender.nickname),i.plainProfileUrl!==L._sender.plainProfileUrl&&(i.plainProfileUrl=L._sender.plainProfileUrl),ee.deepEqual(i.metaData,L._sender.metaData)||(i.metaData=L._sender.metaData),i.isBlockedByMe!==L._sender.isBlockedByMe&&(i.isBlockedByMe=L._sender.isBlockedByMe)}var s=t.sb.currentUser;s&&B&&(s.nickname!==L._sender.nickname&&(s.nickname=L._sender.nickname),s.plainProfileUrl!==L._sender.plainProfileUrl&&(s.plainProfileUrl=L._sender.plainProfileUrl),ee.deepEqual(s.metaData,L._sender.metaData)||(s.metaData=L._sender.metaData));var r=!1;if(L.mentionType===g.MentionType.CHANNEL)B||(r=!0);else if(L.mentionType===g.MentionType.USERS)for(var l=0;l<L.mentionedUsers.length;l++)if(!B&&L.mentionedUsers[l].userId===F){r=!0;break}if(U&&!B||(e.isEphemeral||z)&&((!e.lastMessage||e.lastMessage.createdAt<L.createdAt)&&(e.lastMessage=L),B||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(r?1:0))),$&&(!e.lastMessage||e.lastMessage.createdAt<L.createdAt)&&(e.lastMessage=L),!U||B)for(var c in t.sb.channelHandlers)t.sb.channelHandlers[c].onChannelChanged(e);for(var d in t.sb.channelHandlers){var u=t.sb.channelHandlers[d];u.onMessageReceived(e,L),r&&u.onMentionReceived(e,L)}}}))}else L.isOpenChannel()&&l.getChannel(L.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){var i=!1;if(L.mentionType===g.MentionType.CHANNEL)i=!0;else if(L.mentionType===g.MentionType.USERS)for(var s=0;s<L.mentionedUsers.length;s++)if(L.mentionedUsers[s].userId===F){i=!0;break}for(var r in t.sb.channelHandlers){var o=t.sb.channelHandlers[r];l.enteredChannels[e.url]&&o.onMessageReceived(e,L),i&&o.onMentionReceived(e,L)}}}))}break;case"MEDI":case"FEDI":case"AEDI":var H=null;if("MEDI"===C.command?H=new c(k):"FEDI"===C.command?H=new u(k):"AEDI"===C.command&&(H=new p(k)),H){var q=this.sb.currentUser?this.sb.currentUser.userId:null,G=H.silent,W=H.sender&&H.sender.userId===q;if(H.isGroupChannel()){var K=o.cachedChannels.hasOwnProperty(H.channelUrl);o.getChannel(H.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){var i=e.cachedReadReceiptStatus[q],s=i&&i>=H.createAt,r=t.sb.currentUser;r&&W&&(r.nickname!==H._sender.nickname&&(r.nickname=H._sender.nickname),r.plainProfileUrl!==H._sender.plainProfileUrl&&(r.plainProfileUrl=H._sender.plainProfileUrl),ee.deepEqual(r.metaData,H._sender.metaData)||(r.metaData=H._sender.metaData));var o=!1,l=!1;if(!W&&!s&&k&&k.hasOwnProperty("old_values")){var c=k.old_values.mention_type||H.mentionType,d=k.old_values.mentioned_user_ids||H.mentionedUsers.map((function(e){return e.userId}));if(c===g.MentionType.USERS&&H.mentionType===g.MentionType.USERS){for(var u=!1,p=!1,h=0;h<d.length;h++)if(d[h]===q){u=!0;break}for(var m=0;m<H.mentionedUsers.length;m++)if(H.mentionedUsers[m].userId===q){p=!0;break}!u&&p&&(l=!0,!G&&K&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(c===g.MentionType.USERS&&H.mentionType===g.MentionType.CHANNEL){for(var f=!1,b=0;b<d.length;b++)if(d[b]===q){f=!0;break}f||(l=!0,!G&&K&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}if(e.lastMessage?e.lastMessage.createdAt<H.createdAt?(e.lastMessage=H,o=!0):e.lastMessage.createdAt===H.createdAt&&e.lastMessage.messageId===H.messageId&&(K?e.lastMessage.updatedAt<H.updatedAt&&(e.lastMessage=H,o=!0):o=!0):(e.lastMessage=H,o=!0),(!G||W)&&o)for(var j in t.sb.channelHandlers)t.sb.channelHandlers[j].onChannelChanged(e);for(var y in t.sb.channelHandlers){var O=t.sb.channelHandlers[y];O.onMessageUpdated(e,H),l&&O.onMentionReceived(e,H)}}}))}else H.isOpenChannel()&&l.getChannel(H.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageUpdated(e,H)}))}break;case"DELM":var Q=String(k.channel_type),J=String(k.channel_url),X=parseInt(k.msg_id);switch(Q){case r.CHANNEL_TYPE_GROUP:o.getChannel(J,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageDeleted(e,X)}));break;case r.CHANNEL_TYPE_OPEN:l.getChannel(J,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onMessageDeleted(e,X)}))}break;case"READ":var Z=new m(k),te=o.cachedChannels.hasOwnProperty(Z.channelUrl);o.getChannel(Z.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n&&(te&&e.updateReadReceipt(Z.reader.userId,Z.timestamp),t.sb.currentUser))if(Z.reader.userId===t.sb.currentUser.userId){if(te){if(e.unreadMessageCount>0||e.unreadMentionCount>0)for(var i in e._setGroupChannelUnreadCount(0,0),t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)}else if(0===e.unreadMessageCount||0===e.unreadMentionCount)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelChanged(e)}else for(var r in t.sb.channelHandlers)t.sb.channelHandlers[r].onReadReceiptUpdated(e)}));break;case"MRCT":var ne=String(k.channel_type),ae=String(k.channel_url),ie=h.createFromJson(k);switch(ne){case r.CHANNEL_TYPE_GROUP:o.getChannel(ae,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onReactionUpdated(e,ie)}));break;case r.CHANNEL_TYPE_OPEN:l.getChannel(ae,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"));else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onReactionUpdated(e,ie)}))}break;case"DLVR":var se=String(k.channel_url),re=k.hasOwnProperty("updated")?k.updated:null,oe=o.cachedChannels.hasOwnProperty(se);o.getChannel(se,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){var i=!1;for(var s in re)t.sb.currentUser&&s===t.sb.currentUser.userId&&(i=!0),oe&&e.updateDeliveryReceipt(s,parseInt(re[s]));if(o.cachedChannels[e.url]=e,!i||1!==Object.keys(re).length)for(var r in t.sb.channelHandlers)t.sb.channelHandlers[r].onDeliveryReceiptUpdated(e)}}));break;case"MTHD":var le=String(k.channel_url),ce=String(k.channel_type),de=f.createFromJson(k);switch(ce){case r.CHANNEL_TYPE_GROUP:o.getChannel(le,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onThreadInfoUpdated(e,de)}));break;case r.CHANNEL_TYPE_OPEN:l.getChannel(le,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onThreadInfoUpdated(e,de)}))}break;case"MCNT":if(k.hasOwnProperty("group_channels")&&Array.isArray(k.group_channels)){var ue,pe=[],ge=M(k.group_channels);try{for(ge.s();!(ue=ge.n()).done;){var me=ue.value;if(me){me.hasOwnProperty("joined_member_count")&&me.joined_member_count,me.hasOwnProperty("member_count")&&me.member_count;var fe=o.cachedChannels[me.channel_url];fe&&fe.isBroadcast&&fe.setLatestMemberCount(me.member_count,me.joined_member_count,me.ts)&&pe.push(fe)}}}catch(e){ge.e(e)}finally{ge.f()}if(pe.length>0)for(var be in this.sb.channelHandlers)this.sb.channelHandlers[be].onChannelMemberCountChanged(pe)}if(k.hasOwnProperty("open_channels")&&Array.isArray(k.open_channels)){var je,ye=[],Oe=M(k.open_channels);try{for(Oe.s();!(je=Oe.n()).done;){var ve=je.value;if(ve){ve.hasOwnProperty("participant_count")&&ve.participant_count;var xe=l.cachedChannels[ve.channel_url];xe&&xe.setLatestParticipantCount(ve.participant_count,ve.ts)&&ye.push(xe)}}}catch(e){Oe.e(e)}finally{Oe.f()}if(ye.length>0)for(var _e in this.sb.channelHandlers)this.sb.channelHandlers[_e].onChannelParticipantCountChanged(ye)}break;case"SYEV":var Ce=new we(k),ke=k.ts;switch(Ce.category){case we.CATEGORY_CHANNEL_JOIN:case we.CATEGORY_CHANNEL_LEAVE:o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var r=Ce.data.hasOwnProperty("member_count")?Ce.data.member_count:null,l=Ce.data.hasOwnProperty("joined_member_count")?Ce.data.joined_member_count:null,c=!1;if(Ce.category===we.CATEGORY_CHANNEL_JOIN)(Ce.data.hasOwnProperty("users")?Ce.data.users:[Ce.data]).forEach((function(n){e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(r,l,k.ts):(n.state=s.JOINED,e.addMember(new s(n),ke),e.updateJoinedMemberCount());var a=new i(n);for(var d in t.sb.currentUser&&a.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",o.cachedChannels[e.url]=e),t.sb.channelHandlers){var u=t.sb.channelHandlers[d];u.onUserJoined(e,a),e.isBroadcast&&c&&u.onChannelMemberCountChanged([e])}}));else{var d=new i(Ce.data);for(var u in t.sb.currentUser&&d.userId===t.sb.currentUser.userId?(e.isPublic||o.removeCachedChannel(Ce.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):o.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?c=e.setLatestMemberCount(r,l,k.ts):(e.removeMember(d),e.updateJoinedMemberCount()),t.sb.channelHandlers){var p=t.sb.channelHandlers[u];p.onUserLeft(e,d),e.isBroadcast&&c&&p.onChannelMemberCountChanged([e])}}}}));break;case we.CATEGORY_CHANNEL_OPERATOR_UPDATE:Ce.isGroupChannel()?o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=Ce.data.operators.map((function(e){return new i(e)})),r=s.map((function(e){return e.userId}));for(var l in e.members)e.members[l].role=r.indexOf(e.members[l].userId)>=0?o.Role.OPERATOR:o.Role.NONE;for(var c in e.myRole=t.sb.currentUser&&r.indexOf(t.sb.currentUser.userId)>=0?o.Role.OPERATOR:o.Role.NONE,t.sb.channelHandlers)t.sb.channelHandlers[c].onOperatorUpdated(e,s)}})):Ce.isOpenChannel()&&l.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else for(var s in e.operators=Ce.data.operators.map((function(e){return new i(e)})),t.sb.channelHandlers)t.sb.channelHandlers[s].onOperatorUpdated(e,e.operators)}));break;case we.CATEGORY_CHANNEL_INVITE:o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var r=null;Ce.data&&Ce.data.inviter&&Object.keys(Ce.data.inviter).length>0&&(r=new i(Ce.data.inviter));for(var l=[],c=0;c<Ce.data.invitees.length;c++){var d=new i(Ce.data.invitees[c]);l.push(d),Ce.data.invitees[c].state=s.INVITED;var u=new s(Ce.data.invitees[c]);if(e.isSuper||e.isBroadcast){var p=Ce.data.hasOwnProperty("member_count")?Ce.data.member_count:null,g=Ce.data.hasOwnProperty("joined_member_count")?Ce.data.joined_member_count:null;e.setLatestMemberCount(p,g,k.ts)}else e.addMember(u,ke);t.sb.currentUser&&u.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=k.ts,o.cachedChannels[e.url]=e)}for(var h in t.sb.channelHandlers)t.sb.channelHandlers[h].onUserReceivedInvitation(e,r,l)}}));break;case we.CATEGORY_CHANNEL_DECLINE_INVITE:o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=null;Ce.data&&Ce.data.inviter&&Object.keys(Ce.data.inviter).length>0&&(s=new i(Ce.data.inviter));var r=new i(Ce.data.invitee);if(t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||o.removeCachedChannel(Ce.channelUrl)),e.isSuper||e.isBroadcast){var l=Ce.data.hasOwnProperty("member_count")?Ce.data.member_count:null,c=Ce.data.hasOwnProperty("joined_member_count")?Ce.data.joined_member_count:null;e.setLatestMemberCount(l,c,k.ts)}else e.removeMember(r);for(var d in t.sb.currentUser&&r.userId!==t.sb.currentUser.userId&&(o.cachedChannels[e.url]=e),t.sb.channelHandlers)t.sb.channelHandlers[d].onUserDeclinedInvitation(e,s,r)}}));break;case we.CATEGORY_TYPING_START:case we.CATEGORY_TYPING_END:o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=new i(Ce.data);for(var r in Ce.category===we.CATEGORY_TYPING_START?e.updateTypingStatus(s,!0):e.updateTypingStatus(s,!1),t.sb.channelHandlers)t.sb.channelHandlers[r].onTypingStatusUpdated(e)}}));break;case we.CATEGORY_CHANNEL_ENTER:case we.CATEGORY_CHANNEL_EXIT:l.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=Ce.data.hasOwnProperty("participant_count")?Ce.data.participant_count:null,r=e.setLatestParticipantCount(s,k.ts),o=new i(Ce.data);if(Ce.category===we.CATEGORY_CHANNEL_ENTER)for(var l in t.sb.channelHandlers){var c=t.sb.channelHandlers[l];c.onUserEntered(e,o),r&&c.onChannelParticipantCountChanged([e])}else for(var d in t.sb.channelHandlers){var u=t.sb.channelHandlers[d];u.onUserExited(e,o),r&&u.onChannelParticipantCountChanged([e])}}}));break;case we.CATEGORY_USER_CHANNEL_MUTE:case we.CATEGORY_USER_CHANNEL_UNMUTE:Ce.isOpenChannel()?l.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=new i(Ce.data);if(Ce.category===we.CATEGORY_USER_CHANNEL_MUTE)for(var r in t.sb.channelHandlers)t.sb.channelHandlers[r].onUserMuted(e,s);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,s)}})):o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=new i(Ce.data);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.myMutedState=Ce.category===we.CATEGORY_USER_CHANNEL_MUTE?"muted":"unmuted"),Array.isArray(e.members)&&e.members.forEach((function(e){e&&e.userId===s.userId&&(e.isMuted=Ce.category===we.CATEGORY_USER_CHANNEL_MUTE)})),Ce.category===we.CATEGORY_USER_CHANNEL_MUTE)for(var r in t.sb.channelHandlers)t.sb.channelHandlers[r].onUserMuted(e,s);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,s)}}));break;case we.CATEGORY_USER_CHANNEL_BAN:case we.CATEGORY_USER_CHANNEL_UNBAN:Ce.isOpenChannel()?l.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=new i(Ce.data);if(Ce.category===we.CATEGORY_USER_CHANNEL_BAN)for(var r in t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(delete l.enteredChannels[Ce.channelUrl],t.cls.FileMessageQueue.delete(Ce.channelUrl)),t.sb.channelHandlers)t.sb.channelHandlers[r].onUserBanned(e,s);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnbanned(e,s)}})):o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var s=new i(Ce.data);if(Ce.category===we.CATEGORY_USER_CHANNEL_BAN){if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.isPublic||o.removeCachedChannel(Ce.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var r=Ce.data.hasOwnProperty("member_count")?Ce.data.member_count:null,l=Ce.data.hasOwnProperty("joined_member_count")?Ce.data.joined_member_count:null;e.setLatestMemberCount(r,l,k.ts)}else e.removeMember(s),e.updateJoinedMemberCount();for(var c in t.sb.channelHandlers)t.sb.channelHandlers[c].onUserBanned(e,s)}else for(var d in t.sb.channelHandlers)t.sb.channelHandlers[d].onUserUnbanned(e,s)}}));break;case we.CATEGORY_CHANNEL_FREEZE:case we.CATEGORY_CHANNEL_UNFREEZE:Ce.isOpenChannel()?l.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else if(e.isFrozen=Ce.data.freeze,l.cachedChannels[e.url]=e,Ce.category===we.CATEGORY_CHANNEL_FREEZE)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelFrozen(e);else for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelUnfrozen(e)})):o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else if(e.isFrozen=Ce.data.freeze,o.cachedChannels[e.url]=e,Ce.category===we.CATEGORY_CHANNEL_FREEZE)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelFrozen(e);else for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelUnfrozen(e)}));break;case we.CATEGORY_CHANNEL_DELETED:for(var Se in Ce.isGroupChannel()?o.removeCachedChannel(Ce.channelUrl):l.removeCachedChannel(Ce.channelUrl),this.sb.channelHandlers)this.sb.channelHandlers[Se].onChannelDeleted(Ce.channelUrl,Ce.isGroupChannel()?"group":"open");break;case we.CATEGORY_CHANNEL_PROP_CHANGED:Ce.isOpenChannel()?l.getChannelWithoutCache(Ce.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)})):o.getChannelWithoutCache(Ce.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else{var i=e.unreadMessageCount,s=e.unreadMentionCount;for(var r in e.myCountPreference!==o.CountPreference.ALL&&(e.myCountPreference===o.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?s=0:e.myCountPreference===o.CountPreference.UNREAD_MENTION_COUNT_ONLY?i=0:(i=0,s=0)),e._setGroupChannelUnreadCount(i,s),t.sb.channelHandlers)t.sb.channelHandlers[r].onChannelChanged(e)}}));break;case we.CATEGORY_CHANNEL_META_DATA_CHANGED:case we.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var Ee=Ce.data.hasOwnProperty("created"),Ie=Ce.data.hasOwnProperty("updated"),Me=Ce.data.hasOwnProperty("deleted");(Ce.isOpenChannel()?l.getChannel(Ce.channelUrl,D.INTERNAL_CALL):o.getChannel(Ce.channelUrl,D.INTERNAL_CALL)).then((function(e){var n=Ce.data.created,a=Ce.data.updated,i=Ce.data.deleted,s=k.ts;for(var r in Ee&&e._addOrUpdateCachedMetaData(n,s),Ie&&e._addOrUpdateCachedMetaData(a,s),Me&&e._markAsDeletedCachedMetaData(i,s),t.sb.channelHandlers){var o=t.sb.channelHandlers[r];Ce.category===we.CATEGORY_CHANNEL_META_DATA_CHANGED?(Ee&&o.onMetaDataCreated(e,n),Ie&&o.onMetaDataUpdated(e,a),Me&&o.onMetaDataDeleted(e,i)):(Ee&&o.onMetaCountersCreated(e,n),Ie&&o.onMetaCountersUpdated(e,a),Me&&o.onMetaCountersDeleted(e,i))}})).catch((function(e){return Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category)}));break;case we.CATEGORY_CHANNEL_HIDE:case we.CATEGORY_CHANNEL_UNHIDE:o.getChannel(Ce.channelUrl,D.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n)Y.debug("Discard command:","`".concat(C.command,"`"),Ce.category);else if(Ce.category===we.CATEGORY_CHANNEL_HIDE)for(var i in e.isHidden=!0,Ce.data&&(Ce.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=Ce.data.allow_auto_unhide?o.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:o.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),Ce.data.hasOwnProperty("hide_previous_messages")&&Ce.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),k.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=k.ts_message_offset),o.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelHidden(e);else for(var s in e.isHidden=!1,e.hiddenState=o.HiddenState.UNHIDDEN,o.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelChanged(e)}))}break;case"USEV":var De=new we(k);switch(De.category){case Te.CATEGORY_USER_BLOCK:case Te.CATEGORY_USER_UNBLOCK:var Ae=De.data.blocker.user_id,Ne=De.data.blockee.user_id;Object.keys(o.cachedChannels).forEach((function(e){var n=o.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===Ae?n.memberMap[Ne].isBlockedByMe=De.category===Te.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===Ne&&(n.memberMap[Ae].isBlockingMe=De.category===Te.CATEGORY_USER_BLOCK))}catch(e){}}));break;case Te.CATEGORY_FRIEND_DISCOVERED:var Re=De.data.friend_discoveries.map((function(e){return new i(e)}));for(var Pe in this.sb.userEventHandlers)this.sb.userEventHandlers[Pe].onFriendsDiscovered(Re)}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:Y.debug("Discard command:","`".concat(C.command,"`"))}}}]),e}(),Ee={},Ie={},Me=function(){function e(t){u(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,U.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return g(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(Y.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var n=U.get(this._iid).FileMessageQueue,a=this.messageQueue[0];if(a)if(a.state===n.State.UPLOADED){if(a&&a.state===n.State.UPLOADED){for(a.state=n.State.SENDING,0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(a,(function(e,i){a.state=n.State.SENT,a.error=e||null,a.response=i||null,t._handleMessageQueueUpdated("update")}))}}else a.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(Y.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var a=U.get(this._iid).FileMessageQueue;t.state=a.State.UPLOADING,t.error?(this.messageQueue.map((function(e){return e.requestId})).indexOf(t.requestId)>-1&&(t.state=a.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)):this._uploadFile(t,(function(e){t.error&&t.state===a.State.SENT||(t.state=a.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)}));break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=U.get(this._iid).FileMessageQueue,t=this.messageQueue.filter((function(t){return t.state===e.State.PENDING}));if(t.length>0){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=U.get(this._iid),a=n.Command,i=n.FileMessage,s=e.fileInfo,r=a.bFile(f(f({},s),{},{requestId:e.requestId,channelUrl:this.channel.url,url:s.file,metaArrays:s.metaArrays})),o=Qt.getInstance(this._iid),l=R.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(r,(function(e,n){if(o.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(n){var l=new i(r.getJsonElement());l.requestedMentionUserIds=s.mentionedUserIds,t(n,l)}else{var c=new i(e.getJsonElement());t(null,c)}})):l.container.apiClient.sendFileMessage(f(f({channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},s),{},{fileUrl:s.file,fileName:s.name,fileSize:s.size,fileType:s.type,metaArrays:s.metaArrays}),(function(e,n){var a=new i(e?r.getJsonElement():n);e&&(a.requestedMentionUserIds=s.mentionedUserIds),t(e,a)}))}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,a=e.pendingMessage;if("string"!=typeof n.file&&n.file){var i=U.get(this._iid).FileMessageQueue;R.get(this._iid).container.apiClient.uploadFile(f(f({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:a?a.reqId:null}),(function(a,s){if(a)e.state=i.State.SENT,e.error=a,e.response=null,t(n);else{var r="object"===d(s)?s:JSON.parse(s);n.file=r.url,n.thumbnailSizes=r.hasOwnProperty("thumbnails")?r.thumbnails:[],n.requireAuth=!!r.hasOwnProperty("require_auth")&&r.require_auth,n.size=r.hasOwnProperty("file_size")?r.file_size:n.size,t(n)}}))}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map((function(e){return e.requestId})).indexOf(e);if(t>-1){var n=this.uploadQueue.splice(t,1);n.length>0&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=R.get(this._iid).container.isErrorFirstInCallback,t=Qt.getInstance(this._iid),n=U.get(this._iid).FileMessageQueue,a=this.messageQueue[0];if(a&&a.state===n.State.SENT){a.state=n.State.DONE;var i=a.response,s=a.error,r=a.fileInfo.callback;if(i&&!s){var o=t.currentUser;if(o&&i._sender&&o.userId===i._sender.userId&&(o.nickname!==i._sender.nickname&&(o.nickname=i._sender.nickname),o.plainProfileUrl!==i._sender.plainProfileUrl&&(o.plainProfileUrl=i._sender.plainProfileUrl)),this.channel.isGroupChannel())for(var l in this.channel.lastMessage=i,t.channelHandlers)t.channelHandlers[l].onChannelChanged(this.channel);return e?r(null,i):r(i,null),this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove")}s&&(i=a.pendingMessage)&&(s.code!==P.INVALID_PARAMETER?(i.requestState=t.MessageRequestState.FAILED,i.sendingStatus=t.MessageSendingStatus.FAILED,s.code!==P.FILE_UPLOAD_CANCEL_FAILED&&s.code!==P.REQUEST_CANCELED||(i.sendingStatus=t.MessageSendingStatus.CANCELED),i.requestedMentionUserIds=a.fileInfo.mentionedUserIds,i.errorCode=s.code):i=null),e?r(s,i):r(i,s),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map((function(e){return e.requestId})).indexOf(e);if(n>-1){var a=U.get(this._iid).FileMessageQueue,i=this.messageQueue[n];!i||i.state!==a.State.UPLOADING&&i.state!==a.State.PENDING||(i.state=a.State.SENT,i.response=null,i.error=new P("Uploading has been completed or canceled.",P.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var s=a.uploadRequest[e];if(s)return"function"==typeof s.abort?s.abort():"function"==typeof s.cancel&&s.cancel("Upload has been canceled."),t(null,!0),!0;t(new P("Uploading has been completed or canceled.",P.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new P("Uploading has been completed or canceled.",P.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"getByChannelUrl",value:function(e){return U.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=U.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=U.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){Ie[this._iid]={}}},{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"queueMap",get:function(){return Ie[this._iid]||(Ie[this._iid]={}),Ie[this._iid]}},{key:"uploadRequest",get:function(){return Ee[this._iid]||(Ee[this._iid]={}),Ee[this._iid]}}]),e}();Me.Job=function e(t){var n=t.fileInfo,a=t.requestId,i=t.pendingMessage,s=t.state,r=t.error,o=void 0===r?null:r,l=t.response,c=void 0===l?null:l;u(this,e),this.fileInfo=n,this.requestId=a,this.pendingMessage=i,this.state=s||Me.State.PENDING,this.error=o,this.response=c};var De=function(){function e(){u(this,e)}return g(e,null,[{key:"create",value:function(){return"".concat(parseInt(1e5*Math.random()),"-").concat((new Date).getTime())}}]),e}(),Ae={},Ne={},Re=new WeakMap,Pe=new WeakMap,Le=new WeakMap,Fe=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).channelType=ke.CHANNEL_TYPE_GROUP,a.isDistinct=!1,a.isSuper=!1,a.isBroadcast=!1,a.isPublic=!1,a.unreadMessageCount=0,a.inviter=null,a.members=[],a.memberMap={},a.lastMessage=null,a.memberCount=0,a.joinedMemberCount=0,a.cachedReadReceiptStatus={},a.cachedDeliveryReceiptStatus=null,a.myPushTriggerOption=n.PushTriggerOption.DEFAULT,a.isPushEnabled,a.isHidden=!1,a.hiddenState=n.HiddenState.UNHIDDEN,a.isDiscoverable=!0,a.myLastRead=0,a.messageSurvivalSeconds=-1,a.invitedAt=0,a.joinedAt=0,a._messageOffsetTimestamp=0,a._cachedLastDeliveredReceipt={sentAt:0,timeout:null},Re.set(_(a),{}),Pe.set(_(a),{start:0,end:0}),Le.set(_(a),0),e&&a._update(e),a}return g(n,[{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=R.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=U.get(this._iid),n=t.BaseChannel,a=t.GroupChannel,i=t.User,s=t.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:a.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:a.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt"))for(var r in this.cachedReadReceiptStatus={},e.read_receipt){var o=e.read_receipt[r];this.updateReadReceipt(r,parseInt(o))}if(e.hasOwnProperty("delivery_receipt")&&"object"===d(e.delivery_receipt)&&null!==e.delivery_receipt)for(var l in this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),e.delivery_receipt){var c=e.delivery_receipt[l];this.updateDeliveryReceipt(l,parseInt(c))}if(e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var u=0;u<e.members.length;u++){var p=new s(e.members[u]);this.members.push(p),this.memberMap[p.userId]=p}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||a.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===d(e.last_message)&&e.last_message?e.last_message instanceof ve?this.lastMessage=e.last_message:this.lastMessage=n.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===d(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=a.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var n=U.get(this._iid),a=n.Member,i=this.removeMember(e);i&&i.state===a.JOINED&&(e.state=a.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,t),this.updateDeliveryReceipt(e.userId,t)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var a=this.members[n];if(a.userId===e.userId){t=a,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return ee.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,U.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,U.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return U.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=re.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var a=U.get(this._iid),i=a.GroupChannel,s=a.GroupChannelParams;if(t[0]instanceof s&&1===t.length)return je(this._iid,(function(n){var a=t[0];a.channelUrl=e.url,a._validate()?R.get(e._iid).container.apiClient.updateGroupChannel(f(f({},a),{},{operatorUserIds:a.operatorUserIds}),(function(e,t){var a=null;e||(a=i.upsert(t)),n(e,a)})):n(re.error,null)}),n);if(3===t.length){var r=new s;return r.channelUrl=this.url,r.name=t[0],"string"==typeof t[1]?r.coverUrl=t[1]:r.coverImage=t[1],r.data=t[2],this.updateChannel(r,n)}if(4===t.length){var o=new s;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],this.updateChannel(o,n)}if(5===t.length){var l=new s;return l.channelUrl=this.url,l.isDistinct=t[0],l.name=t[1],"string"==typeof t[2]?l.coverUrl=t[2]:l.coverImage=t[2],l.data=t[3],l.customType=t[4],this.updateChannel(l,n)}return je(this._iid,(function(e){return e(re.error,null)}),n)}},{key:"invite",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return!!e.userId&&"string"==typeof e.userId}))}}),new re({type:"callback"})]),i=T(a,3);return n=i[0],e=i[1],t=i[2],n?je(this._iid,(function(e){return e(re.error,null)}),t):this.inviteWithUserIds(e.map((function(e){return e.userId})),t)}},{key:"inviteWithUserIds",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.inviteToGroupChannel({channelUrl:n.url,userIds:e},(function(e,a){var i=null;e||(i=U.get(n._iid).GroupChannel.upsert(a)),t(e,i)}))}),t)}},{key:"acceptInvitation",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",optional:!0,defaultValue:null}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.acceptInvitation({channelUrl:n.url,accessCode:e},(function(e,a){var i=null;e||((i=U.get(n._iid).GroupChannel.upsert(a)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"declineInvitation",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},(function(n,a){var i=null;if(!n){var s=U.get(t._iid).GroupChannel;(i=s.upsert(a)).myMemberState="none",t.isPublic||s.removeCachedChannel(t.url)}e(n,i)}))}),e)}},{key:"join",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",optional:!0,defaultValue:null}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.joinGroupChannel({channelUrl:n.url,accessCode:e},(function(e,a){var i=null;e||((i=U.get(n._iid).GroupChannel.upsert(a)).myMemberState="joined"),t(e,i)}))}),t)}},{key:"leave",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},(function(t,n){return e(t,null)}))}),e)}},{key:"muteUser",value:function(e,t,n,a){return this.muteUserWithUserId(e?e.userId:null,t,n,a)}},{key:"muteUserWithUserId",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"string"}),new re({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new re({type:"string",optional:!0,defaultValue:""}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){a(e,null)}))}),a)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n,a){return this.banUserWithUserId(e?e.userId:null,t,n,a)}},{key:"banUserWithUserId",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"string"}),new re({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new re({type:"string"}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.banUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){a(e,null)}))}),a)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=U.get(this._iid).Member;this.joinedMemberCount=this.members.filter((function(t){return t.state===e.JOINED})).length}}},{key:"setLatestMemberCount",value:function(e,t,n){var a=!1;return"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=Le.get(this)&&(Le.set(this,n),a=t!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=t),a}},{key:"hide",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"boolean",optional:!0,defaultValue:!1}),new re({type:"boolean",optional:!0,defaultValue:!0}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.hideGroupChannel({channelUrl:a.url,hidePreviousMessages:e,allowAutoUnhide:t},(function(i,s){if(!i){var r=U.get(a._iid).GroupChannel;a.isHidden=!0,a.hiddenState=t?r.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:r.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&a._setGroupChannelUnreadCount(0,0),s.hasOwnProperty("ts_message_offset")&&(a._messageOffsetTimestamp=s.ts_message_offset),r.cachedChannels[a.url]=a}n(i,s)}))}),n)}},{key:"unhide",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},(function(n,a){if(!n){var i=U.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=i.HiddenState.UNHIDDEN,i.cachedChannels[t.url]=t}e(n,a)}))}),e)}},{key:"freeze",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},(function(n,a){if(!n){var i=U.get(t._iid).GroupChannel;t.isFrozen=!0,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"unfreeze",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},(function(n,a){if(!n){var i=U.get(t._iid).GroupChannel;t.isFrozen=!1,i.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"delete",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},(function(n,a){n||U.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,a)}))}),e)}},{key:"markAsRead",value:function(){var e=this,t=U.get(this._iid).Command,n=Qt.getInstance(this._iid),a=t.bRead({channelUrl:this.url});n.sendCommand(a,(function(t,a){if(n.getErrorFirstCallback()){var i=[t,a];a=i[0],t=i[1]}if(!a&&n.currentUser&&(e.updateReadReceipt(n.currentUser.userId,t.getJsonElement().ts),e.unreadMessageCount>0||e.unreadMentionCount>0))for(var s in e._setGroupChannelUnreadCount(0,0),n.channelHandlers)n.channelHandlers[s].onChannelChanged(e)}))}},{key:"getUnreadMemberCount",value:function(e){var t=Qt.getInstance(this._iid),n=U.get(this._iid).Member;if(e instanceof ve&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){for(var a=0,i=e.createdAt,s=this.members,r=0;r<s.length;r++){var o=s[r];t.currentUser.userId===o.userId||o.state!==n.JOINED||e.sender&&e.sender.userId===o.userId||(this.cachedReadReceiptStatus[o.userId]||0)<i&&a++}return a}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,t=Qt.getInstance(this._iid),n=t.currentUser?t.currentUser.userId:null;R.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:n},(function(t,a){if(t)Y.debug(t);else{var i=a.hasOwnProperty("ts")?a.ts:0;e.updateDeliveryReceipt(n,i)}}))}},{key:"getUndeliveredMemberCount",value:function(e){var t=Qt.getInstance(this._iid),n=U.get(this._iid).Member;if(this.cachedDeliveryReceiptStatus&&e instanceof ve&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){var a,i=e.createdAt,s=0,r=M(this.members);try{for(r.s();!(a=r.n()).done;){var o=a.value;t.currentUser.userId===o.userId||o.state!==n.JOINED||e.sender&&e.sender.userId===o.userId||this.cachedDeliveryReceiptStatus[o.userId]<i&&s++}}catch(e){r.e(e)}finally{r.f()}return s}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Qt.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof ve&&!e.isAdminMessage()){for(var a=[],i=0;i<this.members.length;i++){var s=this.members[i];if(t||s.userId!==n.currentUser.userId&&s.userId!==e.sender.userId){var r=this.cachedReadReceiptStatus[s.userId]||0;r>=e.createdAt&&a.push(s)}}return a}return[]}},{key:"getUnreadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Qt.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof ve&&!e.isAdminMessage()){for(var a=[],i=0;i<this.members.length;i++){var s=this.members[i];if(t||s.userId!==n.currentUser.userId&&s.userId!==e.sender.userId){var r=this.cachedReadReceiptStatus[s.userId]||0;r<e.createdAt&&a.push(s)}}return a}return[]}},{key:"getReadStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Qt.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast){var a={},i=function(i){if(!t&&i===n.currentUser.userId)return"continue";var s=e.cachedReadReceiptStatus[i],r=e.members.filter((function(e){return e.userId===i}));a[i]={user:r.length>0?r[0]:null,last_seen_at:parseInt(s)}};for(var s in this.cachedReadReceiptStatus)i(s);return a}return{}}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var a=Qt.getInstance(this._iid);a.currentUser&&e===a.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Qt.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var a=Pe.get(this);if(t-a.start>=n){a.end=0,a.start=t;var i=U.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:a.start});e.sendCommand(i,null)}}},{key:"endTyping",value:function(){var e=Qt.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var a=Pe.get(this);if(t-a.end>=n){a.start=0,a.end=t;var i=U.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:a.end});e.sendCommand(i,null)}}},{key:"invalidateTypingStatus",value:function(){var e=Re.get(this),t=(new Date).getTime(),n=!1;for(var a in e)t-e[a].ts>=1e4&&(delete e[a],n=!0);return n}},{key:"getTypingMembers",value:function(){var e=Re.get(this),t=[];for(var n in e){var a=this.memberMap[n];a&&t.push(a)}return t}},{key:"getTypingUsers",value:function(){var e=Re.get(this),t=[];for(var n in e){var a=e[n].user;t.push(a)}return t}},{key:"updateTypingStatus",value:function(e,t){var n=Re.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=Re.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n=this,a=U.get(this._iid),i=a.ScheduledUserMessage,s=a.ScheduledUserMessageParams,r=null,o=re.parse(arguments,[new re({type:s,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new re({type:"callback"})]),l=T(o,3);return r=l[0],e=l[1],t=l[2],je(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:n.url,isOpenChannel:!1},(function(e,a){var s=null;if(!e){s=new i(a);var r=Qt.getInstance(n._iid).currentUser;r&&s._sender&&r.userId===s._sender.userId&&(r.nickname=s._sender.nickname,r.plainProfileUrl=s._sender.plainProfileUrl,r.metaData=s._sender.metaData)}t(e,s)}))}),t)}},{key:"getPushPreference",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(n,a){var i=null;if(!n){try{i=a.enable}catch(e){i=!1}t.isPushEnabled=i}e&&e(n,i)}))}),e)}},{key:"setPushPreference",value:function(e,t){var n=this;return je(this._iid,(function(t){var a=U.get(n._iid).GroupChannel;R.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},(function(e,i){e||(n.isPushEnabled=i.enable,n.isPushEnabled||(n.myPushTriggerOption=a.PushTriggerOption.OFF)),t(e,i)}))}),t)}},{key:"getMyPushTriggerOption",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(a,i){var s=null;if(!a){try{s=i.push_trigger_option||n.PushTriggerOption.DEFAULT}catch(e){Y.debug(e)}t.myPushTriggerOption=s}e(a,s)}))}),e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n=this,a=U.get(this._iid),i=a.GroupChannel,s=null,r=re.parse(arguments,[new re({type:i.PushTriggerOption}),new re({type:"callback"})]),o=T(r,3);return s=o[0],e=o[1],t=o[2],je(this._iid,(function(t){s?t(s,null):R.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,pushTriggerOption:e},(function(e,a){var i=null;if(!e){try{i=a.push_trigger_option}catch(e){Y.debug(e)}n.myPushTriggerOption=i}t(e,i)}))}),t)}},{key:"setMyCountPreference",value:function(e,t){var n=this,a=U.get(this._iid),i=a.GroupChannel,s=null,r=re.parse(arguments,[new re({type:i.CountPreference}),new re({type:"callback"})]),o=T(r,3);return s=o[0],e=o[1],t=o[2],je(this._iid,(function(t){s?t(s,null):R.get(n._iid).container.apiClient.setMyCountPreference({channelUrl:n.url,countPreference:e},(function(e,a){var s=null;e||(s=n.myCountPreference=a.count_preference,n._setGroupChannelUnreadCount(n.unreadMessageCount,n.unreadMentionCount),i.cachedChannels[n.url]=n),t(e,s)}))}),t)}},{key:"resetMyHistory",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},(function(n,a){if(!n&&a.hasOwnProperty("ts_message_offset")){var i=U.get(t._iid).GroupChannel;t._messageOffsetTimestamp=a.ts_message_offset,i.cachedChannels[t.url]=t}e(n,a)}))}),e)}},{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}}],[{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid),n=t.User,a=t.Member,i=t.GroupChannel,s=t.BaseMessage,r=t.UserMessage,o=t.FileMessage,l=t.AdminMessage,c=be.deserialize(e),u=function(e){return null!=e&&"object"===d(e)?e.messageType===s.MESSAGE_TYPE_USER?new r(r.objectify(f(f({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===s.MESSAGE_TYPE_FILE?new o(o.objectify(f(f({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(f(f({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(c.lastMessage);return new i({channel_url:c.url,name:c.name,cover_url:c.coverUrl,data:c.data,custom_type:c.customType,invited_at:c.invitedAt,created_at:c.createdAt/1e3,joined_ts:c.joinedAt,is_access_code_required:c.isAccessCodeRequired,is_distinct:c.isDistinct,is_super:c.isSuper,is_broadcast:c.isBroadcast,is_public:c.isPublic,is_discoverable:c.isDiscoverable,is_hidden:c.isHidden,is_ephemeral:c.isEphemeral,is_muted:c.myMutedState,is_push_enabled:c.isPushEnabled,freeze:c.isFrozen,unread_message_count:c.unreadMessageCount,unread_mention_count:c.unreadMentionCount,push_trigger_option:c.myPushTriggerOption,count_preference:c.myCountPreference,hidden_state:c.hiddenState,member_count:c.memberCount,joined_member_count:c.joinedMemberCount,member_state:c.myMemberState,my_role:c.myRole,user_last_read:c.myLastRead,ts_message_offset:c.messageOffsetTimestamp,message_survival_seconds:c.messageSurvivalSeconds,read_receipt:c.cachedReadReceiptStatus,delivery_receipt:c.cachedDeliveryReceiptStatus,members:c.members.map((function(e){return a.objectify(f({user:e},e))})),last_message:u,created_by:null!==c.creator&&void 0!==c.creator&&"object"===d(c.creator)?n.objectify(c.creator):null,inviter:null!==c.inviter&&void 0!==c.inviter&&"object"===d(c.inviter)?n.objectify(c.inviter):null})}},{key:"upsert",value:function(e){var t=U.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var a=t.cachedChannels[n.url];e.last_message=a.lastMessage,e.unread_message_count=a.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=U.get(this._iid),n=t.GroupChannel,a=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],a.delete(e)}},{key:"clearCache",value:function(){Ae[this._iid]={},U.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n=null,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"string",optional:!0,nullable:!0,defaultValue:null}),new re({type:"callback"})]),s=T(i,4);if(n=s[0],e=s[1],a=s[2],t=s[3],n)return je(this._iid,(function(e){e(n,null)}),t);var r=U.get(this._iid),o=r.GroupChannel;return o.cachedChannels[e]?je(this._iid,(function(t){t(null,o.cachedChannels[e])}),t):o.getChannelWithoutCache(e,a,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,a=null,i=null,s=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"string",optional:!0,nullable:!0,defaultValue:null}),new re({type:"callback"})]),r=T(s,4);return a=r[0],e=r[1],i=r[2],t=r[3],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:i,showMember:!0},(function(e,a){var i=null;e||(i=n.upsert(a)),t(e,i)}))}),t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n=this,a=U.get(this._iid),i=a.GroupChannelParams,s=null,r=re.parse(arguments,[new re({type:i,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),o=T(r,3);return s=o[0],e=o[1],t=o[2],je(this._iid,(function(t){s?t(s,null):(e.isPublic||(e.accessCode=null),R.get(n._iid).container.apiClient.createGroupChannel(f(f({},e),{},{isDistinct:!0}),(function(e,a){var i=null;if(!e){var s=U.get(n._iid).GroupChannel;i={channel:new s(a),isCreated:a.is_created},s.cachedChannels[i.channel.url]=i.channel}t(e,i)})))}),t)}},{key:"createChannel",value:function(){var e=this,t=re.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var a=U.get(this._iid),i=a.GroupChannel,s=a.GroupChannelParams;if(t[0]instanceof s&&1===t.length)return je(this._iid,(function(n){var a=t[0];a.isPublic||(a.accessCode=null),a._validate()?R.get(e._iid).container.apiClient.createGroupChannel(a,(function(e,t){var a=null;e||(a=new i(t),i.cachedChannels[a.url]=a),n(e,a)})):n(re.error,null)}),n);if(Array.isArray(t[0])){var r=new s;switch(t.length){case 1:r.addUsers(t[0]);break;case 2:r.addUsers(t[0]),r.isDistinct=t[1];break;case 3:r.addUsers(t[0]),r.isDistinct=t[1],r.customType=t[2];break;case 5:r.addUsers(t[0]),r.isDistinct=t[1],r.name=t[2],"string"==typeof t[3]?r.coverUrl=t[3]:r.coverImage=t[3],r.data=t[4];break;case 6:r.addUsers(t[0]),r.isDistinct=t[1],r.name=t[2],"string"==typeof t[3]?r.coverUrl=t[3]:r.coverImage=t[3],r.data=t[4],r.customType=t[5];break;default:return je(this._iid,(function(e){return e(re.error,null)}),n)}return n?i.createChannel(r,n):i.createChannel(r)}return je(this._iid,(function(e){return e(re.error,null)}),n)}},{key:"createChannelWithUserIds",value:function(){var e=re.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=U.get(this._iid),a=n.GroupChannel,i=n.GroupChannelParams,s=new i;switch(e.length){case 1:s.addUserIds(e[0]);break;case 2:s.addUserIds(e[0]),s.isDistinct=e[1];break;case 3:s.addUserIds(e[0]),s.isDistinct=e[1],s.customType=e[2];break;case 5:s.addUserIds(e[0]),s.isDistinct=e[1],s.name=e[2],"string"==typeof e[3]?s.coverUrl=e[3]:s.coverImage=e[3],s.data=e[4];break;case 6:s.addUserIds(e[0]),s.isDistinct=e[1],s.name=e[2],"string"==typeof e[3]?s.coverUrl=e[3]:s.coverImage=e[3],s.data=e[4],s.customType=e[5];break;default:return je(this._iid,(function(e){return e(re.error,null)}),t)}return a.createChannel(s,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,U.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,U.get(this._iid).PublicGroupChannelListQuery)}},{key:"getChannelCount",value:function(e,t){return Qt.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Qt.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=re.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Qt.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,S(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Qt.getInstance(this._iid).getTotalUnreadChannelCount(e)}},{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return Ae[this._iid]||(Ae[this._iid]={}),Ae[this._iid]}},{key:"markAsReadAllLastSentAt",get:function(){return Ne[this._iid]||0},set:function(e){Ne[this._iid]=e}}]),n}(ke),Ue=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).state="",a.role="",a.isMuted=!1,a.isBlockedByMe=!1,a.isBlockingMe=!1,e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){this.state=e.state,this.role=e.role||Fe.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me)}},{key:"parse",value:function(e){this._update(e)}}],[{key:"objectify",value:function(e){var t=U.get(this._iid).User,n=e.user,a=e.state,i=e.role,s=void 0===i?"":i,r=e.isMuted,o=void 0!==r&&r,l=e.isBlockedByMe,c=void 0!==l&&l,d=e.isBlockingMe,u=void 0!==d&&d,p=t.objectify(n);return p.state=a,p.role=s,p.is_muted=o,p.is_blocked_by_me=c,p.is_blocking_me=u,p}},{key:"build",value:function(e,t,n,a,i,s){var r=U.get(this._iid).User;return this.objectify({user:new r(e),state:t,role:n,isMuted:a,isBlockedByMe:i,isBlockingMe:s})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).Member,n=be.deserialize(e);return new t(t.objectify(f({user:n},n)))}},{key:"JOINED",get:function(){return"joined"}},{key:"INVITED",get:function(){return"invited"}}]),n}(xe),$e=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).role="",a.isBlockedByMe=!1,e&&a._update(e),a}return g(n,[{key:"parse",value:function(e){this._update(e)}},{key:"_update",value:function(e){this.role=e.role||Fe.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)}}],[{key:"objectify",value:function(e){var t=U.get(this._iid).User,n=e.user,a=e.role,i=void 0===a?"":a,s=e.isBlockedByMe,r=void 0!==s&&s,o=t.objectify(n);return o.role=i,o.is_blocked_by_me=r,o}},{key:"build",value:function(e,t){var n=U.get(this._iid).User;return this.objectify({user:new n(e),isBlockedByMe:t})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).Sender,n=be.deserialize(e);return new t(t.objectify(f({user:n},n)))}}]),n}(xe),Be=function(){function e(t){u(this,e),this.emojiHash=null,this.emojiCategories=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){var t=U.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new t(e)})):[]}}]),e}(),Ve=function(){function e(t){u(this,e),this.id=null,this.name=null,this.url=null,this.emojis=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){var t=U.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map((function(e){return new t(e)})):[]}}]),e}(),ze=function(){function e(t){u(this,e),this.key=null,this.url=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){this.key=e.key,this.url=e.url}}]),e}(),He={},qe={},Ge=new WeakMap,We=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).channelType=ke.CHANNEL_TYPE_OPEN,a.participantCount=0,Ge.set(_(a),0),a.operators=[],e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){var t=U.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map((function(e){return new t(e)})))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,U.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,U.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,U.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map((function(e){return e.userId})).indexOf(e)>-1}},{key:"refresh",value:function(e){return U.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return je(this._iid,(function(e){var n=U.get(t._iid).Command.bEnter({channelUrl:t.url}),a=Qt.getInstance(t._iid);a.sendCommand(n,(function(n,i){if(a.getErrorFirstCallback()){var s=[n,i];i=s[0],n=s[1]}i?(i=i?new P(i.message,i.code):null,e(i,null)):(U.get(t._iid).OpenChannel.enteredChannels[t.url]=t,t.refresh((function(){return e(null,null)})))}))}),e)}},{key:"exit",value:function(e){var t=this;return je(this._iid,(function(e){var n=U.get(t._iid),a=n.Command,i=n.FileMessageQueue,s=a.bExit({channelUrl:t.url}),r=Qt.getInstance(t._iid);r.sendCommand(s,(function(n,a){if(r.getErrorFirstCallback()){var s=[n,a];a=s[0],n=s[1]}a?(a=a?new P(a.message,a.code):null,e(a,null)):(delete U.get(t._iid).OpenChannel.enteredChannels[t.url],i.delete(t.url),e(null,null))}))}),e)}},{key:"updateChannel",value:function(){var e=this,t=re.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var a=U.get(this._iid),i=a.OpenChannel,s=a.OpenChannelParams;if(t[0]instanceof s&&1===t.length)return je(this._iid,(function(n){var a=t[0];a.channelUrl=e.url,a._validate()?R.get(e._iid).container.apiClient.updateOpenChannel(a,(function(e,t){var a=null;e||(a=i.upsert(t)),n(e,a)})):n(re.error,null)}),n);if(3===t.length){var r=new s;return r.channelUrl=this.url,r.name=t[0],r.coverUrlOrImage=t[1],r.data=t[2],r.operatorUserIds=this.operators.map((function(e){return e.userId})),this.updateChannel(r,n)}if(4===t.length){var o=new s;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],Array.isArray(t[3])&&(o.operatorUserIds=t[3]),this.updateChannel(o,n)}if(5===t.length){var l=new s;return l.channelUrl=this.url,l.name=t[0],l.coverUrlOrImage=t[1],l.data=t[2],Array.isArray(t[3])&&(l.operatorUserIds=t[3]),l.customType=t[4],this.updateChannel(l,n)}return je(this._iid,(function(e){return e(re.error,null)}),n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=re.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,S(e).concat([t]));default:return je(this._iid,(function(e){return e(re.error,null)}),t)}}},{key:"muteUser",value:function(e,t,n,a){return this.muteUserWithUserId(e?e.userId:null,t,n,a)}},{key:"muteUserWithUserId",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"string"}),new re({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new re({type:"string",optional:!0,defaultValue:""}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!1},(function(e,t){a(e,null)}))}),a)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"string"}),new re({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:null,seconds:t,isGroupChannel:!1},(function(e,t){n(e,null)}))}),n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"setLatestParticipantCount",value:function(e,t){var n=!1;return"number"==typeof e&&"number"==typeof t&&t>=Ge.get(this)&&(Ge.set(this,t),n=e!==this.participantCount,this.participantCount=e),n}},{key:"delete",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},(function(n,a){n||(delete U.get(t._iid).OpenChannel.cachedChannels[t.url],U.get(t._iid).FileMessageQueue.delete(t.url)),e(n,a)}))}),e)}}],[{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid),n=t.User,a=t.OpenChannel,i=be.deserialize(e);return new a({channel_url:i.url,name:i.name,cover_url:i.coverUrl,data:i.data,custom_type:i.customType,created_at:i.createdAt/1e3,freeze:i.isFrozen,is_ephemeral:i.isEphemeral,participant_count:i.participantCount,operators:i.operators.map((function(e){return n.objectify(e)}))})}},{key:"getChannel",value:function(e,t){var n=null,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"string",optional:!0,nullable:!0,defaultValue:null}),new re({type:"callback"})]),s=T(i,4);if(n=s[0],e=s[1],a=s[2],t=s[3],n)return je(this._iid,(function(e){e(n,null)}),t);var r=U.get(this._iid),o=r.OpenChannel;return o.cachedChannels[e]?je(this._iid,(function(t){t(null,o.cachedChannels[e])}),t):o.getChannelWithoutCache(e,a,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,a=null,i=null,s=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"string",optional:!0,nullable:!0,defaultValue:null}),new re({type:"callback"})]),r=T(s,4);return a=r[0],e=r[1],i=r[2],t=r[3],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:i},(function(e,a){var i=null;e||(i=U.get(n._iid).OpenChannel.upsert(a)),t(e,i)}))}),t)}},{key:"createChannel",value:function(){var e=this,t=re.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var a=U.get(this._iid),i=a.OpenChannel,s=a.OpenChannelParams;if(t[0]instanceof s&&1===t.length)return je(this._iid,(function(n){var a=t[0];a._validate()?R.get(e._iid).container.apiClient.createOpenChannel(a,(function(t,a){var i=null;t||(i=U.get(e._iid).OpenChannel.upsert(a)),n(t,i)})):n(re.error,null)}),n);var r=new s;switch(t.length){case 0:break;case 1:r.name=t[0];break;case 2:r.name=t[0],r.coverUrlOrImage=t[1];break;case 3:r.name=t[0],r.coverUrlOrImage=t[1],r.data=t[2];break;case 4:r.name=t[0],r.coverUrlOrImage=t[1],r.data=t[2],r.operatorUserIds=t[3];break;case 5:r.name=t[0],r.coverUrlOrImage=t[1],r.data=t[2],r.operatorUserIds=t[3],r.customType=t[4];break;default:return je(this._iid,(function(e){return e(re.error,null)}),n)}return n?i.createChannel(r,n):i.createChannel(r)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=re.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,S(e).concat([t]));default:return je(this._iid,(function(e){return e(re.error,null)}),t)}}},{key:"upsert",value:function(e){var t=new(0,U.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],U.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){He[this._iid]={},U.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){qe[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,U.get(this._iid).OpenChannelListQuery)}},{key:"cachedChannels",get:function(){return He[this._iid]||(He[this._iid]={}),He[this._iid]}},{key:"enteredChannels",get:function(){return qe[this._iid]||(qe[this._iid]={}),qe[this._iid]}}]),n}(ke),Ke=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).messageType=ve.MESSAGE_TYPE_USER,a.message=null,a._sender=null,a.reqId="",a.translations={},a.requestState=null,a.requestedMentionUserIds=[],a.errorCode=0,a.messageSurvivalSeconds=-1,a.plugins=[],e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){var t=Qt.getInstance(this._iid),n=U.get(this._iid),a=n.Sender,i=n.Plugin;this.message=String(e.message),this._sender=new a(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map((function(e){return new i(e)})))}},{key:"isResendable",value:function(){var e=Qt.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ee.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=Qt.getInstance(this._iid),t=U.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var a=n.memberMap[this._sender.userId];a&&(this._sender.nickname!==a.nickname&&(this._sender.nickname=a.nickname),this._sender.plainProfileUrl!==a.plainProfileUrl&&(this._sender.plainProfileUrl=a.plainProfileUrl),ee.deepEqual(this._sender.metaData,a.metaData)||(this._sender.metaData=a.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=Qt.getInstance(this._iid),n=U.get(this._iid),a=n.BaseChannel,i=n.BaseMessageParams,s=n.Sender,r=n.User,o=n.ThreadInfo,l=n.OGMetaData,c=n.Plugin,d=e.messageId,u=e.reqId,p=void 0===u?"":u,g=e.user,h=e.channel,m=e.message,f=e.data,b=void 0===f?"":f,j=e.customType,y=void 0===j?"":j,O=e.appleCriticalAlertOptions,v=e.mentionType,x=void 0===v?i.MentionType.USERS:v,_=e.mentionedUsers,C=void 0===_?[]:_,k=e.mentionedUserIds,w=void 0===k?[]:k,T=e.requestedMentionUserIds,S=void 0===T?[]:T,E=e.reactions,I=void 0===E?[]:E,M=e.metaArrays,D=void 0===M?[]:M,A=e.rootMessageId,N=void 0===A?0:A,R=e.parentMessageId,P=void 0===R?0:R,L=e.parentMessageText,F=void 0===L?"":L,$=e.threadInfo,B=void 0===$?null:$,V=e.translations,z=void 0===V?{}:V,H=e.sendingStatus,q=e.errorCode,G=void 0===q?0:q,W=e.silent,K=void 0!==W&&W,Y=e.isGlobalBlocked,Q=void 0!==Y&&Y,J=e.messageSurvivalSeconds,X=void 0===J?-1:J,Z=e.ogMetaData,ee=void 0===Z?null:Z,te=e.isOperatorMessage,ne=void 0!==te&&te,ae=e.plugins,ie=void 0===ae?[]:ae,se=e.createdAt,re=e.updatedAt,oe=void 0===re?0:re,le={};for(var ce in le.req_id=p,le.msg_id=d,le.user=s.objectify({user:g,role:t.currentUser&&t.currentUser.userId===g.userId?h.myRole:g.role,isBlockedByMe:g.isBlockedByMe}),le.channel_url=h.url,le.channel_type=h.channelType===a.CHANNEL_TYPE_OPEN?a.CHANNEL_TYPE_OPEN:a.CHANNEL_TYPE_GROUP,le.message=m,le.data=b,le.custom_type=y,O&&(le.apple_critical_alert_options=O.serialize()),le.translations=z,le.is_global_block=!!Q,le.ts=se,le.updated_at=oe,le.mention_type=x,le.mentioned_users=C.map((function(e){return r.objectify(e)})),le.mentioned_user_ids=w,le.requested_mention_user_ids=S,le.reactions=I.map((function(e){return e.serialize()})),le.metaarray={},D){var de=D[ce].key;le.metaarray[de]=D[ce].value}return le.metaarray_key_order=D.map((function(e){return e.key})),le.root_message_id=N,le.parent_message_id=P,le.parent_message_text=F,B&&(le.thread_info=o.objectify(B)),le.sending_status=d>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,H&&(le.sending_status=H),le.silent=!!K,le.error_code=G,le.message_survival_seconds=X,ee&&(le.og_tag=l.objectify(ee)),le.is_op_msg=!!ne,le.plugins=ie.map((function(e){return c.objectify(e)})),le}},{key:"build",value:function(e,t,n,a,i,s,r,o,l,c,d,u,p,g,h,m,f,b,j,y,O,v,x,_,C,k,w,T){return this.objectify({messageId:t,reqId:e,user:n,channel:a,message:i,data:s,customType:r,appleCriticalAlertOptions:o,mentionType:h,mentionedUsers:m,mentionedUserIds:O,requestedMentionUserIds:x,reactions:g,metaArrays:p,rootMessageId:f,parentMessageId:b,parentMessageText:j,threadInfo:y,translations:l,sendingStatus:v,errorCode:_,isGlobalBlocked:c,messageSurvivalSeconds:C,ogMetaData:k,isOperatorMessage:w,plugins:T,createdAt:d,updatedAt:u})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).UserMessage,n=be.deserialize(e);return new t(t.objectify(f(f({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),n}(ve),Ye=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).messageType=ve.MESSAGE_TYPE_FILE,a.plainUrl=null,a.name="File",a.size=0,a.type=null,a.thumbnails=[],a._sender=null,a.reqId="",a.requireAuth=null,a.requestState=null,a.requestedMentionUserIds=[],a.errorCode=0,a.messageSurvivalSeconds=-1,e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){var t=Qt.getInstance(this._iid),n=R.get(this._iid).container.auth,a=U.get(this._iid).Sender;if(this._sender=new a(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,this.plainUrl=String(e.url).split("?auth=")[0],Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=String(e.type),e.hasOwnProperty("custom")&&(this.data=String(e.custom)),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i in this.thumbnails)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[i].plainUrl;this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"isResendable",value:function(){var e=Qt.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&ee.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=Qt.getInstance(this._iid),t=U.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var a=n.memberMap[this._sender.userId];a&&(this._sender.nickname!==a.nickname&&(this._sender.nickname=a.nickname),this._sender.plainProfileUrl!==a.plainProfileUrl&&(this._sender.plainProfileUrl=a.plainProfileUrl),ee.deepEqual(this._sender.metaData,a.metaData)||(this._sender.metaData=a.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=Qt.getInstance(this._iid),n=U.get(this._iid),a=n.BaseChannel,i=n.BaseMessageParams,s=n.Sender,r=n.User,o=n.ThreadInfo,l=n.OGMetaData,c=e.messageId,d=e.reqId,u=void 0===d?"":d,p=e.user,g=void 0===p?{}:p,h=e.channel,m=e.plainUrl,f=e.name,b=e.type,j=e.size,y=void 0===j?0:j,O=e.data,v=void 0===O?"":O,x=e.customType,_=void 0===x?"":x,C=e.appleCriticalAlertOptions,k=e.mentionType,w=void 0===k?i.MentionType.USERS:k,T=e.mentionedUsers,S=void 0===T?[]:T,E=e.mentionedUserIds,I=void 0===E?[]:E,M=e.requestedMentionUserIds,D=void 0===M?[]:M,A=e.reactions,N=void 0===A?[]:A,R=e.metaArrays,P=void 0===R?[]:R,L=e.rootMessageId,F=void 0===L?0:L,$=e.parentMessageId,B=void 0===$?0:$,V=e.parentMessageText,z=void 0===V?"":V,H=e.threadInfo,q=void 0===H?null:H,G=e.thumbnails,W=void 0===G?[]:G,K=e.requireAuth,Y=void 0!==K&&K,Q=e.sendingStatus,J=e.errorCode,X=void 0===J?0:J,Z=e.silent,ee=void 0!==Z&&Z,te=e.isGlobalBlocked,ne=void 0!==te&&te,ae=e.messageSurvivalSeconds,ie=void 0===ae?-1:ae,se=e.ogMetaData,re=void 0===se?null:se,oe=e.isOperatorMessage,le=void 0!==oe&&oe,ce=e.createdAt,de=e.updatedAt,ue=void 0===de?0:de,pe={};pe.req_id=u,pe.msg_id=c,pe.user=s.objectify({user:g,role:t.currentUser&&t.currentUser.userId===g.userId?h.myRole:g.role,isBlockedByMe:g.isBlockedByMe}),pe.channel_url=h.url,pe.channel_type=h.channelType===a.CHANNEL_TYPE_OPEN?a.CHANNEL_TYPE_OPEN:a.CHANNEL_TYPE_GROUP,pe.url=m,pe.name=f,pe.type=b,pe.size=y,pe.custom=v,pe.custom_type=_,C&&(pe.apple_critical_alert_options=C.serialize()),pe.thumbnails=W,pe.require_auth=Y,pe.is_global_block=!!ne,pe.ts=ce,pe.updated_at=ue,pe.mention_type=w,pe.mentioned_users=S.map((function(e){return r.objectify(e)})),pe.mentioned_user_ids=I,pe.requested_mention_user_ids=D,pe.reactions=N.map((function(e){return e.serialize()})),pe.metaarray={};for(var ge=0;ge<P.length;ge++){var he=P[ge].key;pe.metaarray[he]=P[ge].value}return pe.metaarray_key_order=P.map((function(e){return e.key})),pe.root_message_id=F,pe.parent_message_id=B,pe.parent_message_text=z,q&&(pe.thread_info=o.objectify(q)),pe.sending_status=c>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,Q&&(pe.sending_status=Q),pe.silent=!!ee,pe.error_code=X,pe.message_survival_seconds=ie,re&&(pe.og_tag=l.objectify(re)),pe.is_op_msg=!!le,pe}},{key:"build",value:function(e,t,n,a,i,s,r,o,l,c,d,u,p,g,h,m,f,b,j,y,O,v,x,_,C,k,w,T,S,E,I){return this.objectify({messageId:t,reqId:e,user:n,channel:a,plainUrl:i,name:s,type:r,size:o,data:l,customType:c,appleCriticalAlertOptions:d,mentionType:j,mentionedUsers:y,mentionedUserIds:C,requestedMentionUserIds:w,reactions:b,metaArrays:f,rootMessageId:O,parentMessageId:v,parentMessageText:x,threadInfo:_,thumbnails:g,requireAuth:h,sendingStatus:k,errorCode:T,isGlobalBlocked:u,messageSurvivalSeconds:S,ogMetaData:E,isOperatorMessage:I,createdAt:p,updatedAt:m})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).FileMessage,n=be.deserialize(e);return new t(t.objectify(f(f({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),n}(ve),Qe=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this,e)).messageType=ve.MESSAGE_TYPE_ADMIN,a.message="",a.translations={},e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=U.get(this._iid),n=t.BaseChannel,a=t.BaseMessageParams,i=t.User,s=t.ThreadInfo,r=t.OGMetaData,o=e.messageId,l=e.channel,c=e.message,d=e.data,u=void 0===d?"":d,p=e.customType,g=void 0===p?"":p,h=e.mentionType,m=void 0===h?a.MentionType.USERS:h,f=e.mentionedUsers,b=void 0===f?[]:f,j=e.reactions,y=void 0===j?[]:j,O=e.metaArrays,v=void 0===O?[]:O,x=e.rootMessageId,_=void 0===x?0:x,C=e.parentMessageId,k=void 0===C?0:C,w=e.parentMessageText,T=void 0===w?"":w,S=e.threadInfo,E=void 0===S?null:S,I=e.translations,M=void 0===I?{}:I,D=e.silent,A=void 0!==D&&D,N=e.ogMetaData,R=void 0===N?null:N,P=e.createdAt,L=e.updatedAt,F=void 0===L?0:L,$={msg_id:o,channel_url:l.url,channel_type:l.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:c,data:u,custom_type:g,silent:A,ts:P,updated_at:F};$.translations=M,$.mention_type=m,$.mentioned_users=b.map((function(e){return i.objectify(e)})),$.reactions=y.map((function(e){return e.serialize()})),$.metaarray={};for(var B=0;B<v.length;B++){var V=v[B].key;$.metaarray[V]=v[B].value}return $.metaarray_key_order=v.map((function(e){return e.key})),$.root_message_id=_,$.parent_message_id=k,$.parent_message_text=T,E&&($.thread_info=s.objectify(E)),R&&($.og_tag=r.objectify(R)),$}},{key:"build",value:function(e,t,n,a,i,s,r,o,l,c,d,u,p,g,h,m,f){return this.objectify({messageId:e,channel:t,message:n,data:a,customType:i,mentionType:d,mentionedUsers:u,reactions:c,metaArrays:l,rootMessageId:p,parentMessageId:g,parentMessageText:h,threadInfo:m,translations:s,ogMetaData:f,createdAt:r,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).AdminMessage,n=be.deserialize(e);return new t(t.objectify(f(f({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType}})))}}]),n}(ve),Je=function(){function e(t){u(this,e);var n=U.get(this._iid),a=n.BaseMessage,i=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=a.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=i.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=i.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(t){var n=this,a=U.get(this._iid),i=a.User,s=a.Sender,r=a.BaseMessageParams,o=a.MessageMetaArray,l=a.AppleCriticalAlertOptions;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new s(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var c=t.hasOwnProperty("metaarray")?t.metaarray:{},d=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(c).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var u=0;u<d.length;u++){var p=d[u];this.metaArrays.push(new o(p,c[p]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:r.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach((function(e){var t=new i(e);n.mentionedUsers.push(t)})),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:r.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code))),t.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(t.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=U.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"sender",get:function(){var e=Qt.getInstance(this._iid),t=U.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var a=n.memberMap[this._sender.userId];a&&(this._sender.nickname!==a.nickname&&(this._sender.nickname=a.nickname),this._sender.plainProfileUrl!==a.plainProfileUrl&&(this._sender.plainProfileUrl=a.plainProfileUrl),ee.deepEqual(this._sender.metaData,a.metaData)||(this._sender.metaData=a.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===d(e)&&e){var t=U.get(this._iid).MessageMetaArray,n=[];for(var a in e)n.push(new t(a,e[a]));this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),Xe=function(){function e(){u(this,e),this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return g(e,null,[{key:"createFromJson",value:function(e){var t=U.get(this._iid),n=t.BaseChannel,a=t.ThreadInfo,i=e.thread_info,s=e.root_message_id,r=e.channel_url,o=e.channel_type;if(i&&"object"===d(i)&&("string"==typeof s||"number"==typeof s)&&"string"==typeof r&&"string"==typeof o&&[n.CHANNEL_TYPE_GROUP].includes(o)){var l=new this;return l.threadInfo=new a(i),l.targetMessageId=parseInt(s),l.channelUrl=r,l.channelType=o,l}return null}}]),e}(),Ze=function(){function e(){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==t.metaDataValuesFilter.length>0&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadUserList(f(f({},t),{},{token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.users.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),et=function(){function e(t){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadBannedUserList(f(f({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.banned_list.map((function(e){return new s(e.user)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),tt=function(){function e(){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadBlockedUserList(f(f({},t),{},{token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.users.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),nt=function(){function e(){u(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadFriendList(f(f({},t),{},{token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasMore=!!r,i=a.users.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),at=function(){function e(){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Fe.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Fe.SuperChannelFilter.ALL,this.publicChannelFilter=Fe.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Fe.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.hiddenChannelFilter=Fe.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return be.serialize(this,(function(e){e.isLoading=!1}))}},{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){var n=U.get(t._iid),a=n.GroupChannel,i=n.GroupChannelListQuery;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[i.ORDER_CHRONOLOGICAL,i.ORDER_LATEST_LAST_MESSAGE,i.CHANNEL_NAME_ALPHABETICAL,i.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(i.QueryType).map((function(e){return i.QueryType[e]})).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(a.MemberStateFilter).map((function(e){return a.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(a.SuperChannelFilter).map((function(e){return a.SuperChannelFilter[e]})).indexOf(t.superChannelFilter)>-1&&Object.keys(a.PublicChannelFilter).map((function(e){return a.PublicChannelFilter[e]})).indexOf(t.publicChannelFilter)>-1&&Object.keys(a.UnreadChannelFilter).map((function(e){return a.UnreadChannelFilter[e]})).indexOf(t.unreadChannelFilter)>-1&&Object.keys(a.HiddenChannelFilter).map((function(e){return a.HiddenChannelFilter[e]})).indexOf(t.hiddenChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(re.error,null):t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadGroupChannelList(f(f({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).GroupChannel,r=String(a.next);t._token=r,t.hasNext=!!r;var o=a.channels;o&&Array.isArray(o)?i=o.map((function(e){return"number"==typeof a.ts&&(e.ts=a.ts),s.upsert(e)})):n=new P("Failed at loading group channels.",P.MALFORMED_DATA)}t.isLoading=!1,e(n,i)}))):e(null,[])}),e)}},{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){Object.keys(e.QueryType).map((function(t){return e.QueryType[t]})).indexOf(t)>-1&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}}],[{key:"buildFromSerializedData",value:function(e){var t=U.get(this._iid).GroupChannel,n=be.deserialize(e),a=t.createMyGroupChannelListQuery();for(var i in n)a.hasOwnProperty(i)&&(a[i]=n[i]);return a}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}}]),e}(),it=function(){function e(t){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=Fe.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){var n=U.get(t._iid),a=n.GroupChannel,i=n.Member,s=n.MemberListQuery;"number"==typeof t.limit&&t.limit>0&&Object.keys(s.MutedMemberFilter).map((function(e){return s.MutedMemberFilter[e]})).indexOf(t.mutedMemberFilter)>-1&&Object.keys(a.MemberStateFilter).map((function(e){return a.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(s.Order).map((function(e){return s.Order[e]})).indexOf(t.order)>-1&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadMemberList(f(f({},t),{},{channelUrl:t._channelUrl,token:t._token}),(function(n,a){var s=null;if(!n){var r=String(a.next);t._token=r,t.hasNext=!!r,s=a.members.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,s)}))):e(null,[]):e(re.error,null)}),e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),st=function(){function e(t){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadMutedUserList(f(f({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.muted_list.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),rt=function(){function e(){u(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){!("number"==typeof t.limit&&t.limit>0&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(re.error,null):t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadOpenChannelList(f(f({},t),{},{token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).OpenChannel,r=String(a.next);t._token=r,t.hasNext=!!r;var o=a.channels;o&&Array.isArray(o)?i=o.map((function(e){return"number"==typeof a.ts&&(e.ts=a.ts),s.upsert(e)})):n=new P("Failed at loading open channels.",P.MALFORMED_DATA)}t.isLoading=!1,e(n,i)}))):e(null,[])}),e)}}]),e}(),ot=new WeakMap,lt=function(){function e(t){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",ot.set(this,t)}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){if("number"==typeof t.limit&&t.limit>0)if(t.isLoading)e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=ot.get(t);R.get(t._iid).container.apiClient.loadOperatorList(f(f({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.operators.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))}else e(null,[]);else e(re.error,null)}),e)}}]),e}(),ct=new WeakMap,dt=function(){function e(t){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&ct.set(this,t.channelUrl)}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadParticipantList(f(f({},t),{},{channelUrl:ct.get(t),token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.participants.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),ut=new WeakMap,pt=function(){function e(t,n){var a=n.limit,i=void 0===a?20:a,s=n.reverse,r=void 0!==s&&s,o=n.exactMatch,l=void 0!==o&&o,c=n.channelUrl,d=void 0===c?"":c,p=n.channelCustomType,g=void 0===p?"":p,h=n.messageTimestampFrom,m=void 0===h?null:h,f=n.messageTimestampTo,b=void 0===f?null:f,j=n.order,y=void 0===j?"score":j,O=n.advancedQuery,v=void 0!==O&&O,x=n.targetFields,_=void 0===x?null:x;u(this,e),this.isLoading=!1,this.hasNext=!0,ut.set(this,{keyword:t,limit:i,reverse:r,exactMatch:l,channelUrl:d,channelCustomType:g,messageTimestampFrom:m,messageTimestampTo:b,order:y,advancedQuery:v,targetFields:_,previousToken:"",nextToken:""})}return g(e,[{key:"next",value:function(e){var t=this,n=U.get(this._iid),a=n.BaseChannel,i=n.GroupChannel,s=n.OpenChannel;return je(this._iid,(function(e){var n=ut.get(t),r=n.keyword,o=n.limit,l=n.reverse,c=n.exactMatch,d=n.channelUrl,u=n.channelCustomType,p=n.messageTimestampFrom,g=n.messageTimestampTo,h=n.order,m=n.advancedQuery,f=n.targetFields,b=n.nextToken;!("number"==typeof o&&o>0&&o<=1e3&&"boolean"==typeof l&&"boolean"==typeof c)||"string"!=typeof d&&null!==d||"string"!=typeof u&&null!==u||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||!(["score","ts"].indexOf(h)>=0)||"boolean"!=typeof m&&null!==m||!Array.isArray(f)&&null!==f?e(re.error,null):t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.searchMessages({keyword:r,limit:o,reverse:l,exactMatch:c,channelUrl:d,channelCustomType:u,messageTimestampFrom:p,messageTimestampTo:g,order:h,advancedQuery:m,targetFields:f,nextToken:b},(function(n,r){var o=null;if(!n){for(var l in o=[],r.results){var c=r.results[l];if(c.channel.hasOwnProperty("members")){var d=new i(c.channel);i.cachedChannels[d.url]=d,o.push(a.buildMessage(c,d))}else{var u=new s(c.channel);s.cachedChannels[u.url]=u,o.push(a.buildMessage(c,u))}}t.hasNext=r.has_next,ut.get(t).nextToken=r.end_cursor}t.isLoading=!1,e(n,o)}))):e(null,[])}),e)}},{key:"key",get:function(){return ut.get(this).keyword}},{key:"limit",get:function(){return ut.get(this).limit}},{key:"reverse",get:function(){return ut.get(this).reverse}},{key:"exactMatch",get:function(){return ut.get(this).exactMatch}},{key:"channelUrl",get:function(){return ut.get(this).channelUrl}},{key:"channelCustomType",get:function(){return ut.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return ut.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return ut.get(this).messageTimestampTo}},{key:"order",get:function(){return ut.get(this).order}}]),e}(),gt=new WeakMap,ht=new WeakMap,mt=function(){function e(t){u(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,ht.set(this,Number.MAX_SAFE_INTEGER),gt.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1,this.showSubchannelMessagesOnly=!1}return g(e,[{key:"load",value:function(e,t,n,a){var i=this,s=U.get(this._iid),r=s.BaseChannel,o=null,l=re.parse(arguments,[new re({type:"number",optional:!0,defaultValue:this.limit}),new re({type:"boolean",optional:!0,defaultValue:this.reverse}),new re({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(r.MessageTypeFilter).map((function(e){return r.MessageTypeFilter[e]})).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new re({type:"callback"})]),c=T(l,5);return o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],je(this._iid,(function(a){if(Array.isArray(i.customTypesFilter)&&!i.customTypesFilter.some((function(e){return"string"!=typeof e&&null!==e}))&&Array.isArray(i.senderUserIdsFilter)&&!i.senderUserIdsFilter.some((function(e){return"string"!=typeof e}))||(o=re.error),o)a(o,null);else{if(i.limit=e,i.reverse=t,i.messageTypeFilter=n,"number"==typeof i.messageTypeFilter)switch(i.messageTypeFilter){case 0:i.messageTypeFilter=r.MessageTypeFilter.ALL;break;case 1:i.messageTypeFilter=r.MessageTypeFilter.USER;break;case 2:i.messageTypeFilter=r.MessageTypeFilter.FILE;break;case 3:i.messageTypeFilter=r.MessageTypeFilter.ADMIN}if(i.isLoading)a(new P("Query in progress.",P.QUERY_IN_PROGRESS),null);else if(i.hasMore){i.isLoading=!0;var s=gt.get(i),l=R.get(i._iid);"boolean"==typeof i.includeReaction&&i.includeReaction&&(i.includeReactions=i.includeReaction),l.container.apiClient.getMessageList({channel:s,token:ht.get(i)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:n,customType:i.customTypeFilter,customTypes:i.customTypesFilter,senderUserIds:i.senderUserIdsFilter,includeMetaArray:i.includeMetaArray,includeReactions:i.includeReactions,includeReplies:i.includeReplies,includeParentMessageText:i.includeParentMessageText,includeThreadInfo:i.includeThreadInfo,showSubchannelMessagesOnly:i.showSubchannelMessagesOnly},(function(t,n){var o=null;if(!t){(0===(o=n.messages.map((function(e){return r.buildMessage(e,s)}))).length||o.length<e)&&(i.hasMore=!1);var l=ht.get(i);ht.set(i,Math.min.apply(Math,S(o.map((function(e){return e.createdAt}))).concat([l])))}i.isLoading=!1,a(t,o)}))}else a(null,[])}}),a)}}]),e}(),ft=function(){function e(){u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=at.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=Fe.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.includeFrozen=!0,this.includeMetaData=!0}return g(e,[{key:"next",value:function(t){var n=this;return je(this._iid,(function(t){var a=U.get(n._iid).GroupChannel;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(e.MembershipType).map((function(t){return e.MembershipType[t]})).indexOf(n.membershipFilter)>-1&&Object.keys(a.SuperChannelFilter).map((function(e){return a.SuperChannelFilter[e]})).indexOf(n.superChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?t(re.error,null):n.isLoading?t(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadPublicGroupChannelList(f(f({},n),{},{token:n._token}),(function(e,i){var s=null;if(!e){var r=String(i.next);n._token=r,n.hasNext=!!r;var o=i.channels;o&&Array.isArray(o)?s=o.map((function(e){return"number"==typeof i.ts&&(e.ts=i.ts),a.upsert(e)})):e=new P("Failed at loading group channels.",P.MALFORMED_DATA)}n.isLoading=!1,t(e,s)}))):t(null,[])}),t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),bt=function(){function e(){u(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter((function(e){return e.hasOwnProperty("userId")})).length===e.length&&(t=e.map((function(e){return e.userId})))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter((function(e){return"string"==typeof e})).length===e.length&&(t=e)}})}return g(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(ee.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId})).map((function(e){return e.userId}));(t=this._invitedUserIds).push.apply(t,S(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return"string"==typeof e}));(t=this._invitedUserIds).push.apply(t,S(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),jt=function(){function e(){u(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return g(e,[{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||ee.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl||null===this.channelUrl)}},{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every((function(e){return e.hasOwnProperty("userId")}))&&(this._operatorUserIds=e.map((function(e){return e.userId})))}}]),e}(),yt=new WeakMap,Ot=function(){function e(){u(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],yt.set(this,null),this._parentMessageId=null}return g(e,[{key:"_validate",value:function(){var e=U.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,a=yt.get(this);return Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every((function(e){return"string"==typeof e}))&&Array.isArray(this._metaArrays)&&this._metaArrays.every((function(e){return e instanceof n}))&&("number"==typeof a||null===a)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)}},{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=U.get(this._iid).BaseMessageParams;Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=Qt.getInstance(this._iid),n=0;n<e.length;n++){var a=e[n];if("string"!=typeof a){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(a)<0&&t.currentUser&&t.currentUser.userId!==a&&(this._cachedMentionedUserIds.push(a),this._mentionedUserIds.push(a))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=Qt.getInstance(this._iid),n=0;n<e.length;n++){var a=e[n];if(!a.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(a.userId)<0&&t.currentUser&&t.currentUser.userId!==a.userId&&(this._cachedMentionedUsers.push(a),this._mentionedUserIds.push(a.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map((function(e){return e.key}))},set:function(e){var t=U.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var a=0;a<e.length;a++)"string"!=typeof e[a]||n[e[a]]||(n[e[a]]=!0,this._metaArrays.push(new t(e[a])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=U.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var a=e[n];if(a instanceof t){var i,s=this._metaArrays.map((function(e){return e.key})).indexOf(a.key);s<0?this._metaArrays.push(a):(i=this._metaArrays[s].value).push.apply(i,S(a.value))}}}}},{key:"rootMessageId",get:function(){return yt.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){yt.set(this,e),this._parentMessageId=e}}],[{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),vt=function(e){b(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.call(this)).message=null,e.data=null,e.customType=null,e.pushNotificationDeliveryOption=null,e.appleCriticalAlertOptions=null,e._translationTargetLanguages=[],e}return g(n,[{key:"_validate",value:function(){var e=U.get(this._iid),t=e.BaseMessageParams,a=e.AppleCriticalAlertOptions;return w(j(n.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every((function(e){return"string"==typeof e}))&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map((function(e){return t.PushNotificationDeliveryOption[e]})).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof a)}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}}]),n}(Ot),xt=function(e){b(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.call(this)).fileName=null,e.mimeType=null,e.fileSize=null,e.data=null,e.customType=null,e.pushNotificationDeliveryOption=null,e.appleCriticalAlertOptions=null,e._isUpdate=!1,e._file=null,e._fileUrl=null,e._thumbnailSizes=[],e}return g(n,[{key:"_validate",value:function(){var e=U.get(this._iid),t=e.BaseMessageParams,a=e.AppleCriticalAlertOptions;return w(j(n.prototype),"_validate",this).call(this)&&(this._isUpdate||ee.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this._thumbnailSizes||this._thumbnailSizes.every((function(e){return"object"===d(e)&&e.maxWidth>0&&e.maxHeight>0})))&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map((function(e){return t.PushNotificationDeliveryOption[e]})).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof a)}},{key:"file",get:function(){return this._file},set:function(e){ee.isFile(e)&&(this._fileUrl=null,this._file=e)}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==d(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}}]),n}(Ot),_t=function(e){b(n,e);var t=k(n);function n(e){var a;return u(this,n),(a=t.call(this)).year=null,a.month=null,a.day=null,a.hour=null,a.min=null,a.timezone=null,a._scheduledDateTimeString=null,e&&a._update(e),a}return g(n,[{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,a,i,s){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&t>=1&&t<=12&&"number"==typeof n&&n>=1&&n<=31&&"number"==typeof a&&a>=0&&a<=24&&"number"==typeof i&&i>=0&&i<=60&&"string"==typeof s&&s.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+a.toString()).substr(-2)+":"+("0"+i.toString()).substr(-2),this.timezone=s)}},{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}}]),n}(vt),Ct=function e(){u(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=Fe.SuperChannelFilter.ALL},kt=function(){function e(){u(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return g(e,[{key:"_validate",value:function(){var e=U.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),wt=function(){function e(){u(this,e);var t=U.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1,this.showSubchannelMessagesOnly=!1}return g(e,[{key:"_validate",value:function(){"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction);var e=U.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo&&"boolean"==typeof this.showSubchannelMessagesOnly}}]),e}(),Tt=function(){function e(){u(this,e);var t=U.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeParentMessageText=!1}return g(e,[{key:"_validate",value:function(){"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction);var e=U.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeParentMessageText}}]),e}(),St=function(){function e(){u(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return g(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeReaction&&this.includeReaction&&(this.includeReactions=this.includeReaction),"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),Et=function(){function e(){u(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return g(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e}))||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),It=function e(){u(this,e),this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},Mt=function e(){u(this,e),this.onFriendsDiscovered=function(e){},this.onTotalUnreadMessageCountUpdated=function(e,t){}},Dt=function e(){u(this,e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){}},At=function e(t){if(u(this,e),t){var n=U.get(this._iid),a=n.User,i=n.BaseChannel;this.reader=new a(t.user),this.timestamp=parseInt(t.ts),this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):i.CHANNEL_TYPE_GROUP}},Nt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];u(this,e),this.key=t,this.value=Array.isArray(n)&&n.every((function(e){return"string"==typeof e}))?n:[]}return g(e,[{key:"encode",value:function(){return{key:this.key,value:this.value||[]}}}]),e}(),Rt=new WeakMap,Pt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,e),this.key=t,this.userIds=n,this.updatedAt=a;var i={};for(var s in this.userIds){var r=this.userIds[s];i[r]=this.updatedAt}Rt.set(this,i)}return g(e,[{key:"serialize",value:function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}}},{key:"_applyEvent",value:function(e){if(e instanceof me){var t=Rt.get(this);if(e.key===this.key&&(!t[e.userId]||t[e.userId]<e.updatedAt)){var n=this.userIds.indexOf(e.userId);switch(e.operation){case"add":n<0&&this.userIds.push(e.userId);break;case"delete":n>=0&&this.userIds.splice(n,1)}t[e.userId]=e.updatedAt}}}},{key:"isEmpty",get:function(){return 0===this.userIds.length}}],[{key:"createFromJson",value:function(e){var t=e.key,n=e.user_ids,a=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&n.length>0&&"number"==typeof a?new this(t,n,a):null}}]),e}(),Lt=function(){function e(t){u(this,e),this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){var t=U.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every((function(e){return"object"===d(e)}))&&(this.mostRepliedUsers=e.most_replies.map((function(e){return new t(e)}))),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))}}],[{key:"objectify",value:function(e){var t=U.get(this._iid).User,n=e.replyCount,a=e.mostRepliedUsers,i=e.lastRepliedAt,s=e.updatedAt,r={};return r.reply_count=n,Array.isArray(a)&&a.every((function(e){return e instanceof t}))&&(r.most_replies=a.map((function(e){return t.objectify(e)}))),r.last_replied_at=i,r.updated_at=s,r}},{key:"build",value:function(e,t,n,a){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:a})}}]),e}(),Ft=function(){function e(t){u(this,e),this.title=null,this.url=null,this.description=null,this.defaultImage=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){var t=U.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))}}],[{key:"objectify",value:function(e){var t=U.get(this._iid).OGImage,n=e.title,a=void 0===n?null:n,i=e.url,s=void 0===i?null:i,r=e.description,o=void 0===r?null:r,l=e.defaultImage,c=void 0===l?null:l,d={};return d["og:title"]=a,d["og:url"]=s,d["og:description"]=o,c&&(d["og:image"]=t.objectify(c)),d}}]),e}(),Ut=function(){function e(t){u(this,e),this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)}}],[{key:"objectify",value:function(e){var t=e.url,n=void 0===t?null:t,a=e.secureUrl,i=void 0===a?null:a,s=e.type,r=void 0===s?null:s,o=e.width,l=void 0===o?0:o,c=e.height,d=void 0===c?0:c,u=e.alt,p=void 0===u?null:u,g={};return g.url=n,g.secure_url=i,g.type=r,g.width=l,g.height=d,g.alt=p,g}}]),e}(),$t=function(){function e(t){u(this,e),this.type=null,this.vendor=null,this.detail={},t&&this._update(t)}return g(e,[{key:"_update",value:function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"===d(e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}}],[{key:"objectify",value:function(e){var t=e.type,n=void 0===t?"":t,a=e.vendor,i=void 0===a?"":a,s=e.detail,r=void 0===s?{}:s,o={};return o.type=n,o.vendor=i,o.detail=r,o}}]),e}(),Bt=function(){function e(t){u(this,e),this.name="default",this.volume=1,t&&this._update(t)}return g(e,[{key:"_update",value:function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)}},{key:"serialize",value:function(){return{name:this.name,volume:this.volume}}}]),e}(),Vt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return g(e,[{key:"next",value:function(e){var t=this;return je(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==t.metaDataValues.length>0?t.isLoading?e(new P("Query in progress.",P.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadUserList(f(f({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),(function(n,a){var i=null;if(!n){var s=U.get(t._iid).User,r=String(a.next);t._token=r,t.hasNext=!!r,i=a.users.map((function(e){return new s(e)}))}t.isLoading=!1,e(n,i)}))):e(null,[]):e(re.error,null)}),e)}}]),e}(),zt=new WeakMap,Ht=function(){function e(t){u(this,e),this.isLoading=!1,zt.set(this,t)}return g(e,[{key:"prev",value:function(e,t,n,a){var i=arguments,s=this;return je(this._iid,(function(a){var r,o=U.get(s._iid).BaseChannel,l=T(re.parse(i,[new re({type:"number"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"function"})]),5);if(r=l[0],e=l[1],t=l[2],n=l[3],a=l[4],r)a(r,null);else if(s.isLoading)a(new P("Query in progress.",P.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=zt.get(s);R.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return o.buildMessage(e,c)}))),s.isLoading=!1,a(e,n)}))}}),a)}},{key:"next",value:function(e,t,n,a){var i=arguments,s=this;return je(this._iid,(function(a){var r,o=U.get(s._iid).BaseChannel,l=T(re.parse(i,[new re({type:"number"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"function"})]),5);if(r=l[0],e=l[1],t=l[2],n=l[3],a=l[4],r)a(r,null);else if(s.isLoading)a(new P("Query in progress.",P.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=zt.get(s);R.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return o.buildMessage(e,c)}))),s.isLoading=!1,a(e,n)}))}}),a)}},{key:"load",value:function(e,t,n,a,i){var s=arguments,r=this;return je(this._iid,(function(i){var o,l=U.get(r._iid).BaseChannel,c=T(re.parse(s,[new re({type:"number"}),new re({type:"number"}),new re({type:"number"}),new re({type:"boolean"}),new re({type:"callback"})]),6);if(o=c[0],e=c[1],t=c[2],n=c[3],a=c[4],i=c[5],o)i(o,null);else if(r.isLoading)i(new P("Query in progress.",P.QUERY_IN_PROGRESS),null);else{r.isLoading=!0;var d=zt.get(r);R.get(r._iid).container.apiClient.getMessageList({channelUrl:d.url,channelType:d.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:a,messageType:"",customType:""},(function(e,t){var n=null;e||(n=t.messages.map((function(e){return l.buildMessage(e,d)}))),r.isLoading=!1,i(e,n)}))}}),i)}}]),e}(),qt=function(){function e(t){var n=this;if(u(this,e),this.state=0,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t((function(e){0===n.state&&(n.state=1,n._value=e)}),(function(e){0===n.state&&(n.state=2,n._reason=e)}))}return g(e,[{key:"then",value:function(t,n){var a=this,i=this;switch(this.state){case 0:setTimeout((function(){return a.then(t,n)}),100);break;case 1:t&&"function"==typeof t&&(i=t(this._value));break;case 2:n&&"function"==typeof n&&(i=n(this._reason))}return i instanceof e?i:this}},{key:"catch",value:function(t){var n=this,a=this;switch(this.state){case 0:setTimeout((function(){return n.catch(t)}),100);break;case 1:break;case 2:a=t(this._reason)}return a instanceof e?a:this}},{key:"finally",value:function(t){var n=this,a=this;switch(this.state){case 0:setTimeout((function(){return n.finally(t)}),100);break;case 1:case 2:a=t()}return a instanceof e?a:this}},{key:"length",get:function(){return 1}}],[{key:"all",value:function(t){return new e((function(n,a){if(Array.isArray(t)||"string"==typeof t)if(t.length>0){var i=[];for(var s in t)t[s]instanceof e?i.push(t[s]):i.push(e.resolve(t[s]));var r=new Array(i.length).fill(null),o=i.length,l=function(e,t,i){t?a(t):(o--,r[e]=i,o<=0&&n(r))};i.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else n([]);else a(new Error("Uncaught (in promise) TypeError: ".concat(d(t)," ").concat(t," is not iterable")))}))}},{key:"resolve",value:function(t){return new e((function(e){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}}]),e}(),Gt=function(){"undefined"==typeof Promise&&("undefined"!=typeof window?window.Promise=qt:void 0!==i?i.Promise=qt:"undefined"!=typeof self?self.Promise=qt:"undefined"!=typeof globalThis&&(globalThis.Promise=qt)),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},Wt=null,Kt={},Yt=!1,Qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),Gt();var n=!1;if((t.newInstance||!Wt||Wt&&t.appId!==Wt.getApplicationId()&&Wt.getConnectionState()===Wt.ConnectionState.CLOSED)&&(n=!0,Wt=this),n){try{if(!t.hasOwnProperty("appId"))return Y.warn("Must be set appId."),Wt=null,null}catch(e){return Y.warn("Must be set appId."),Wt=null,null}var a=De.create();Object.defineProperty(this,"_iid",{get:function(){return a}}),Kt[a]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new oe(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:ke.MessageTypeFilter};var i={User:xe,Member:Ue,GroupChannel:Fe,OpenChannel:We,UserMessage:Ke,FileMessage:Ye,AdminMessage:Qe,GroupChannelListQuery:at,MemberListQuery:it,GroupChannelParams:bt,OpenChannelParams:jt,BaseMessageParams:Ot,UserMessageParams:vt,FileMessageParams:xt,ScheduledUserMessageParams:_t,GroupChannelTotalUnreadMessageCountParams:Ct,MessageRetrievalParams:kt,MessageListParams:wt,ThreadedMessageListParams:Tt,MessageChangeLogsParams:St,GroupChannelChangeLogsParams:Et,MessageMetaArray:Nt,UserEventHandler:Mt,SessionHandler:le,ChannelHandler:Dt,ConnectionHandler:It,AppleCriticalAlertOptions:Bt},s={SessionManager:ce,BaseChannel:ke,BaseMessage:ve,UserListQuery:Vt,ApplicationUserListQuery:Ze,BannedUserListQuery:et,BlockedUserListQuery:tt,FriendListQuery:nt,MutedUserListQuery:st,OpenChannelListQuery:rt,OperatorListQuery:lt,ParticipantListQuery:dt,MessageListQuery:Ht,PreviousMessageListQuery:mt,MessageSearchQuery:pt,PublicGroupChannelListQuery:ft,ScheduledUserMessage:Je,ThreadInfo:Lt,ThreadInfoUpdateEvent:Xe,OGMetaData:Ft,OGImage:Ut,Plugin:$t,Command:pe,Sender:$e,ReadStatus:At,Reaction:Pt,ReactionEvent:me,Emoji:ze,EmojiCategory:Ve,EmojiContainer:Be,FileMessageQueue:Me},r=new U(this._iid,f(f({},i),s));for(var o in r)i[o]&&(this[o]=r[o]);R.create(a,{appId:t.appId,pinger:new J(this),apiClient:new ae(this),wsAdapter:new se(this),commandHandler:new Se(this),onlineDetector:new de(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:D.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,auth:new L,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(D.SDK_VERSION,"/").concat(t,"/").concat(n)},sessionManager:new r.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=3e5&&(this._websocketResponseTimeout=e)}}}return Wt}return g(e,[{key:"getApplicationId",value:function(){return R.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Yt}},{key:"setDebugMode",value:function(e){Yt=e,Y.mode=e?Y.Mode.DEBUG:Y.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return R.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&R.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=R.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=R.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=R.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"connect",value:function(e,t,n,a,i){var s=this,r=R.get(this._iid),o=r.container,l=o.wsAdapter,c=o.onlineDetector;c&&c.start();var d=null,u=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new re({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new re({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new re({type:"callback"})]),p=T(u,6);return d=p[0],e=p[1],t=p[2],n=p[3],a=p[4],i=p[5],je(this._iid,(function(i){d?i(d,null):(s.customApiHost=n,s.customWsHost=a,s.connecting=!0,s.reconnecting=!1,s.isReconnectingOnError=!1,s.reconnectTimer&&(clearTimeout(s.reconnectTimer),s.reconnectTimer=null,s.onReconnectTimerCancel=null),s.getConnectionState()===s.ConnectionState.OPEN&&s.currentUser&&s.currentUser.userId===e?(s.connecting=!1,i(null,s.currentUser)):(s.connectionCallbacks.push(i),1===s.connectionCallbacks.length&&(l.disconnect({clearSession:!0,err:null},null),l.connect(e,t))))}),i)}},{key:"reconnect",value:function(){var e=R.get(this._iid).container,t=e.wsAdapter;if(e.auth.sessionKey&&this.currentUser){var n=!0;return t.reconnectCount>0&&(n=!1),t.disconnect({clearSession:!1,err:new P("Connection has been canceled.",P.CONNECTION_CANCELED)},null),t.reconnectCount=0,t.reconnect(this.currentUser.userId,n),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return je(this._iid,(function(e){var n=R.get(t._iid).container,a=n.wsAdapter,i=n.onlineDetector;i&&i.stop(),a.disconnect({clearSession:!0,err:new P("Connection has been canceled.",P.CONNECTION_CANCELED)},e)}),e)}},{key:"setBackgroundState",value:function(){var e=R.get(this._iid),t=e.container,n=t.wsAdapter,a=t.stateChangeEnabled;!t.isInBackground&&a&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new P("Websocket connection failed.",P.WEBSOCKET_CONNECTION_FAILED)},null)):e.set("closedByGoingBackground",!1))}},{key:"setForegroundState",value:function(){var e=R.get(this._iid),t=e.container,n=t.wsAdapter,a=t.stateChangeEnabled,i=t.isInBackground,s=t.closedByGoingBackground;i&&a&&(e.set("isInBackground",!1),s&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=R.get(this._iid).container,a=n.extensions;n.supportedExtensionKeys.indexOf(e)>-1&&(a[e]=t)}},{key:"createUserListQuery",value:function(e){return new(0,U.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,U.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,U.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,U.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(0,U.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return je(this._iid,(function(t){n.ConnectionManager.ready((function(a,i){if(a)t(a,null);else{var s=R.get(n._iid).container,r=s.wsAdapter,o=s.ackStateMap;if(null==r||null==r.client||r.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new P("Connection is not valid. Please reconnect.",P.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,c={handler:t,timer:setTimeout((function(){t(new P("Command received no ack.",P.ACK_TIMEOUT),null),delete o[l]}),n.Options.websocketResponseTimeout)};o[l]=c,r.client.send(e,(function(e){e&&(clearTimeout(c.timer),t(e,null))}))}else r.client.send(e,t)}}),!1)}),t)}},{key:"setSessionHandler",value:function(e){R.get(this._iid).container.sessionManager.handler=e}},{key:"addUserEventHandler",value:function(e,t){t instanceof U.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof U.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof U.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:"string",nullable:!0}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},(function(i,s){var r=null;i||(a.currentUser&&(e&&(a.currentUser.nickname=e),t&&(a.currentUser.plainProfileUrl=t)),r=a.currentUser),n(i,r)}))}),n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:"file",nullable:!0}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},(function(t,i){var s=null;t||(a.currentUser&&(e&&(a.currentUser.nickname=e),i.profile_url&&(a.currentUser.plainProfileUrl=i.profile_url)),s=a.currentUser),n(t,s)}))}),n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},(function(a,i){var s=null;a||(n.currentUser&&e&&(n.currentUser._preferredLanguages=e),s=n.currentUser),t(a,s)}))}),t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,n.pushTokenRegistrationState.ERROR):n.currentUser?R.get(n._iid).container.apiClient.registerGCMPushToken({token:e},(function(e,a){var i=n.pushTokenRegistrationState.ERROR;e||(n.GCMPushToken="",i=n.pushTokenRegistrationState.SUCCESS),t(e,i)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):n.currentUser?R.get(n._iid).container.apiClient.unregisterGCMPushToken({token:e},(function(e,n){t(e,null)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,n.pushTokenRegistrationState.ERROR):n.currentUser?R.get(n._iid).container.apiClient.registerAPNSPushToken({token:e},(function(e,a){var i=n.pushTokenRegistrationState.ERROR;e||(n.APNSPushToken="",i=n.pushTokenRegistrationState.SUCCESS),t(e,i)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e.length>0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):n.currentUser?R.get(n._iid).container.apiClient.unregisterAPNSPushToken({token:e},(function(e,n){t(e,null)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:"array",optional:!0,nullable:!0,defaultValue:null}),new re({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new re({type:"callback"})]),o=T(r,5);s=o[0],e=o[1],t=o[2],n=o[3],a=o[4];var l=U.get(this._iid),c=l.GroupChannelChangeLogsParams,d=null;if(s){var u=re.parse(arguments,[new re({type:"string",nullable:!0}),new re({type:c,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),p=T(u,4);s=p[0],e=p[1],d=p[2],a=p[3]}else(d=new c).customTypes=t,d.includeEmpty=n,d.includeFrozen=!0;return je(this._iid,(function(t){s?t(s,null):R.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(f({ts:null,token:e},d),(function(e,n){if(e)t(e,null);else{var a=U.get(i._iid).GroupChannel,s=n.updated.map((function(e){return new a(e)})),r=n.deleted,o=n.has_more,l=n.next;t(null,{updatedChannels:s,deletedChannelUrls:r,hasMore:o,token:l})}}))}),a)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"number",constraint:function(e){return e>=0}}),new re({type:"array",optional:!0,nullable:!0,defaultValue:null}),new re({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new re({type:"callback"})]),o=T(r,5);s=o[0],e=o[1],t=o[2],n=o[3],a=o[4];var l=U.get(this._iid),c=l.GroupChannelChangeLogsParams,d=null;if(s){var u=re.parse(arguments,[new re({type:"number",constraint:function(e){return e>=0}}),new re({type:c,constraint:function(e){return e._validate()}}),new re({type:"callback"})]),p=T(u,4);s=p[0],e=p[1],d=p[2],a=p[3]}else(d=new c).customTypes=t,d.includeEmpty=n,d.includeFrozen=!0;return je(this._iid,(function(t){s?t(s,null):R.get(i._iid).container.apiClient.getMyGroupChannelChangeLogs(f({ts:e,token:null},d),(function(e,n){if(e)t(e,null);else{var a=U.get(i._iid).GroupChannel,s=n.updated.map((function(e){return new a(e)})),r=n.deleted,o=n.has_more,l=n.next;t(null,{updatedChannels:s,deletedChannelUrls:r,hasMore:o,token:l})}}))}),a)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getChannelInvitationPreference({},(function(t,n){var a=null;t||(a={autoAccept:n.auto_accept}),e(t,a)}))}),e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"boolean"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},(function(e,n){var a=null;e||(a={autoAccept:n.auto_accept}),t(e,a)}))}),t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getDoNotDisturb({},(function(t,n){var a=null;t||(a={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,a)}))}),e)}},{key:"setDoNotDisturb",value:function(e,t,n,a,i,s,r){var o=this,l=null,c=re.parse(arguments,[new re({type:"boolean"}),new re({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new re({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new re({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new re({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new re({type:"string"}),new re({type:"callback"})]),d=T(c,8);return l=d[0],e=d[1],t=d[2],n=d[3],a=d[4],i=d[5],s=d[6],r=d[7],je(this._iid,(function(r){l?r(l,null):R.get(o._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:a,endMin:i,timezone:s},(function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),r(e,n)}))}),r)}},{key:"getSnoozePeriod",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getSnoozePeriod({},(function(t,n){var a=null;t||(a={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,a)}))}),e)}},{key:"setSnoozePeriod",value:function(e,t,n,a){var i=this,s=null,r=re.parse(arguments,[new re({type:"boolean"}),new re({type:"number",constraint:function(e){return e>0}}),new re({type:"number",constraint:function(e){return e>0}}),new re({type:"callback"})]),o=T(r,5);return s=o[0],e=o[1],t=o[2],n=o[3],a=o[4],je(this._iid,(function(a){s?a(s,null):R.get(i._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},(function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),a(e,n)}))}),a)}},{key:"blockUser",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new re({type:"callback"})]),i=T(a,3);return n=i[0],e=i[1],t=i[2],n?je(this._iid,(function(e){e(n,null)}),t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.blockUser({blockedUserId:e},(function(e,n){var a=null;e||(a=new xe(n)),t(e,a)}))}),t)}},{key:"unblockUser",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new re({type:"callback"})]),i=T(a,3);return n=i[0],e=i[1],t=i[2],n?je(this._iid,(function(e){e(n,null)}),t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.unblockUser({unblockedUserId:e},(function(e,n){t(e,null)}))}),t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getPushTriggerOption({},(function(t,n){e(t,n?n.push_trigger_option:null)}))}),e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return je(this._iid,(function(t){Object.keys(n.PushTriggerOption).map((function(e){return n.PushTriggerOption[e]})).indexOf(e)>-1?R.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},(function(e,n){t(e,n?n.push_trigger_option:null)})):t(re.error,null)}),t)}},{key:"getGroupChannelCount",value:function(e,t){var n=this,a=U.get(this._iid),i=a.GroupChannel,s=null,r=re.parse(arguments,[new re({type:i.MemberStateFilter,optional:!0,defaultValue:i.MemberStateFilter.ALL}),new re({type:"callback"})]),o=T(r,3);return s=o[0],e=o[1],t=o[2],je(this._iid,(function(t){s?t(s,null):R.get(n._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},(function(e,n){var a=null;e||(a=parseInt(n.group_channel_count)),t(e,a)}))}),t)}},{key:"getTotalUnreadChannelCount",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getTotalUnreadChannelCount({},(function(t,n){var a=null;t||(a=parseInt(n.unread_count)),e(t,a)}))}),e)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n=this,a=U.get(this._iid),i=a.GroupChannel,s=a.GroupChannelTotalUnreadMessageCountParams,r=null,o=re.parse(arguments,[new re({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))||e instanceof s}}),new re({type:"callback"})]),l=T(o,3);return r=l[0],e=l[1],t=l[2],je(this._iid,(function(t){if(r)t(r,null);else{var a=i.SuperChannelFilter.ALL;if(e instanceof s){var o=e;e=o.channelCustomTypesFilter,a=o.superChannelFilter}R.get(n._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:a},(function(e,n){var a=null;e||(a=parseInt(n.unread_count)),t(e,a)}))}}),t)}},{key:"getUnreadItemCount",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return Object.keys(Fe.UnreadItemKey).map((function(e){return Fe.UnreadItemKey[e]})).indexOf(e)>-1}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){if(a)t(a,null);else{var i=e.filter((function(t,n){return e.indexOf(t)===n}));R.get(n._iid).container.apiClient.getUnreadItemCount({keys:i},(function(e,n){t(e,n)}))}}),t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var t=0;for(var n in e.custom_types)t+=e.custom_types[n];return t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=R.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var a=this,i=null,s=re.parse(arguments,[new re({type:"string"}),new re({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new re({type:"callback"})]),r=T(s,4);return i=r[0],e=r[1],t=r[2],n=r[3],je(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},(function(e,t){if(e)n(e,null);else{var a=t.type;n(null,{deviceTokens:t.device_tokens,type:a?a.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}}))}),n)}},{key:"getPushTemplate",value:function(e){var t=this;return je(this._iid,(function(e){R.get(t._iid).container.apiClient.getPushTemplate({},(function(t,n){var a=null;t||(a=n.name.toString()),e(t,a)}))}),e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return je(this._iid,(function(t){[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?R.get(n._iid).container.apiClient.setPushTemplate({templateName:e},(function(e,n){var a=null;e||(a=n.name.toString()),t(e,a)})):t(re.error,null)}),t)}},{key:"markAsReadAll",value:function(e){var t=this;return je(this._iid,(function(e){var n=U.get(t._iid).GroupChannel,a=(new Date).getTime();a-n.markAsReadAllLastSentAt<1e3?e(new P("MarkAsRead rate limit exceeded.",P.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=a,R.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},(function(i,s){if(!i)for(var r in n.cachedChannels)t.currentUser&&n.cachedChannels[r].updateReadReceipt(t.currentUser.userId,a),n.cachedChannels[r]._setGroupChannelUnreadCount(0,0);e(i,null)})))}),e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){if(a)t(a,null);else{var i=(new Date).getTime();R.get(n._iid).container.apiClient.markAsReadAll({channelUrls:e},(function(a,s){if(!a)for(var r in e){var o=e[r];Fe.cachedChannels[o]&&(n.currentUser&&Fe.cachedChannels[o].updateReadReceipt(n.currentUser.userId,i),Fe.cachedChannels[o]._setGroupChannelUnreadCount(0,0))}t(a,null)}))}}),t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&U.get(this._iid).GroupChannel.getChannel(e,D.INTERNAL_CALL,(function(e,t){e||t.markAsDelivered()}))}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string",optional:!0,defaultValue:null}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getFriendChangeLogsByToken({token:e},(function(e,a){var i=null;if(!e){var s=U.get(n._iid).User;i={updatedUsers:a.updated.map((function(e){return new s(e)})),deletedUserIds:a.deleted,hasMore:a.has_more,token:a.next}}t(e,i)}))}),t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return e.hasOwnProperty("friendDiscoveryKey")}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},(function(e,n){t(e,n)}))}),t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),i=T(a,3);return n=i[0],e=i[1],t=i[2],n?je(this._iid,(function(e){e(n,null)}),t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},(function(e,n){t(e,n)}))}),t)}},{key:"addFriends",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.addFriends({userIds:e},(function(e,a){var i=null;if(!e){var s=U.get(n._iid).User;i=a.users.map((function(e){return new s(e)}))}t(e,i)}))}),t)}},{key:"deleteFriend",value:function(e,t){var n=null,a=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),i=T(a,3);return n=i[0],e=i[1],t=i[2],n?je(this._iid,(function(e){e(n,null)}),t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.deleteFriends({userIds:e},(function(e,n){t(e,n)}))}),t)}},{key:"getAllEmoji",value:function(e){var t=this,n=null,a=re.parse(arguments,[new re({type:"callback"})]),i=T(a,2);return n=i[0],e=i[1],je(this._iid,(function(e){n?e(n,null):R.get(t._iid).container.apiClient.getAllEmoji((function(n,a){if(n)e(n,null);else{var i=new(0,U.get(t._iid).EmojiContainer)(a);e(null,i)}}))}),e)}},{key:"getEmojiCategory",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"number",constraint:function(e){return e>=0}}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getEmojiCategory({categoryId:e},(function(e,a){if(e)t(e,null);else{var i=new(0,U.get(n._iid).EmojiCategory)(a);t(null,i)}}))}),t)}},{key:"getEmoji",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"string"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getEmoji({emojiKey:e},(function(e,a){if(e)t(e,null);else{var i=new(0,U.get(n._iid).Emoji)(a);t(null,i)}}))}),t)}},{key:"getAllowFriendDiscovery",value:function(e){var t=this,n=null,a=re.parse(arguments,[new re({type:"callback"})]),i=T(a,2);return n=i[0],e=i[1],je(this._iid,(function(e){n?e(n,null):R.get(t._iid).container.apiClient.getAllowFriendDiscovery((function(t,n){var a=n.allow_friend_discovery;t||e(null,a)}))}),e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n=this,a=null,i=re.parse(arguments,[new re({type:"boolean"}),new re({type:"callback"})]),s=T(i,3);return a=s[0],e=s[1],t=s[2],je(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},(function(n,a){n||t(null,e)}))}),t)}},{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return R.get(this._iid).container.appInfo}},{key:"ekey",get:function(){var e=R.get(this._iid).container.auth;return e?e.eKey:""}}],[{key:"getInstance",value:function(e){return e?Kt[e]:Wt}},{key:"getLogLevel",value:function(){return Y.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(Y.supportedLogLevels);if(t.includes(e))Y.logLevel=e;else{Y.logLevel=Y.defaultLogLevel;var n=t.map((function(e){return"'".concat(e,"'")})).join(", ");Y.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(Y.defaultLogLevel,"`."))}}},{key:"version",get:function(){return D.SDK_VERSION}},{key:"LogLevel",get:function(){return Y.supportedLogLevels}}]),e}();return Qt}(n("vDqi"),n("WjD0"),n("f3NI"))}).call(this,n("8oxB"),n("tjlA").Buffer,n("yLpj"))},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},idjV:function(e,t,n){(function(e,a){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,a){for(var i=-1,s=null==e?0:e.length;++i<s;){var r=e[i];t(a,r,n(r),e)}return a}function o(e,t){for(var n=-1,a=null==e?0:e.length;++n<a&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function d(e,t){for(var n=-1,a=null==e?0:e.length,i=0,s=[];++n<a;){var r=e[n];t(r,n,e)&&(s[i++]=r)}return s}function u(e,t){return!(null==e||!e.length)&&v(e,t,0)>-1}function p(e,t,n){for(var a=-1,i=null==e?0:e.length;++a<i;)if(n(t,e[a]))return!0;return!1}function g(e,t){for(var n=-1,a=null==e?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}function h(e,t){for(var n=-1,a=t.length,i=e.length;++n<a;)e[i+n]=t[n];return e}function m(e,t,n,a){var i=-1,s=null==e?0:e.length;for(a&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function f(e,t,n,a){var i=null==e?0:e.length;for(a&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function b(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}function j(e){return e.match(Ye)||[]}function y(e,t,n){var a;return n(e,(function(e,n,i){if(t(e,n,i))return a=n,!1})),a}function O(e,t,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function v(e,t,n){return t==t?function(e,t,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}(e,t,n):O(e,_,n)}function x(e,t,n,a){for(var i=n-1,s=e.length;++i<s;)if(a(e[i],t))return i;return-1}function _(e){return e!=e}function C(e,t){var n=null==e?0:e.length;return n?S(e,t)/n:X}function k(e){return function(t){return null==t?G:t[e]}}function w(e){return function(t){return null==e?G:e[t]}}function T(e,t,n,a,i){return i(e,(function(e,i,s){n=a?(a=!1,e):t(n,e,i,s)})),n}function S(e,t){for(var n,a=-1,i=e.length;++a<i;){var s=t(e[a]);s!==G&&(n=n===G?s:n+s)}return n}function E(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}function I(e){return function(t){return e(t)}}function M(e,t){return g(t,(function(t){return e[t]}))}function D(e,t){return e.has(t)}function A(e,t){for(var n=-1,a=e.length;++n<a&&v(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&v(t,e[n],0)>-1;);return n}function R(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function P(e){return"\\"+Gt[e]}function L(e){return $t.test(e)}function F(e){return Bt.test(e)}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e,a){n[++t]=[a,e]})),n}function $(e,t){return function(n){return e(t(n))}}function B(e,t){for(var n=-1,a=e.length,i=0,s=[];++n<a;){var r=e[n];r!==t&&r!==Y||(e[n]=Y,s[i++]=n)}return s}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function z(e){return L(e)?function(e){for(var t=Ft.lastIndex=0;Ft.test(e);)++t;return t}(e):dn(e)}function H(e){return L(e)?function(e){return e.match(Ft)||[]}(e):function(e){return e.split("")}(e)}function q(e){return e.match(Ut)||[]}var G,W="Expected a function",K="__lodash_hash_undefined__",Y="__lodash_placeholder__",Q=128,J=9007199254740991,X=NaN,Z=4294967295,ee=[["ary",Q],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],te="[object Arguments]",ne="[object Array]",ae="[object Boolean]",ie="[object Date]",se="[object Error]",re="[object Function]",oe="[object GeneratorFunction]",le="[object Map]",ce="[object Number]",de="[object Object]",ue="[object Promise]",pe="[object RegExp]",ge="[object Set]",he="[object String]",me="[object Symbol]",fe="[object WeakMap]",be="[object ArrayBuffer]",je="[object DataView]",ye="[object Float32Array]",Oe="[object Float64Array]",ve="[object Int8Array]",xe="[object Int16Array]",_e="[object Int32Array]",Ce="[object Uint8Array]",ke="[object Uint8ClampedArray]",we="[object Uint16Array]",Te="[object Uint32Array]",Se=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,Ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Me=/&(?:amp|lt|gt|quot|#39);/g,De=/[&<>"']/g,Ae=RegExp(Me.source),Ne=RegExp(De.source),Re=/<%-([\s\S]+?)%>/g,Pe=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,Fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/,$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(Be.source),ze=/^\s+|\s+$/g,He=/^\s+/,qe=/\s+$/,Ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,We=/\{\n\/\* \[wrapped with (.+)\] \*/,Ke=/,? & /,Ye=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qe=/\\(\\)?/g,Je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xe=/\w*$/,Ze=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,tt=/^\[object .+?Constructor\]$/,nt=/^0o[0-7]+$/i,at=/^(?:0|[1-9]\d*)$/,it=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,st=/($^)/,rt=/['\n\r\u2028\u2029\\]/g,ot="\\ud800-\\udfff",lt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ct="\\u2700-\\u27bf",dt="a-z\\xdf-\\xf6\\xf8-\\xff",ut="A-Z\\xc0-\\xd6\\xd8-\\xde",pt="\\ufe0e\\ufe0f",gt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="['’]",mt="["+ot+"]",ft="["+gt+"]",bt="["+lt+"]",jt="\\d+",yt="["+ct+"]",Ot="["+dt+"]",vt="[^"+ot+gt+jt+ct+dt+ut+"]",xt="\\ud83c[\\udffb-\\udfff]",_t="[^"+ot+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",wt="["+ut+"]",Tt="(?:"+Ot+"|"+vt+")",St="(?:"+wt+"|"+vt+")",Et="(?:['’](?:d|ll|m|re|s|t|ve))?",It="(?:['’](?:D|LL|M|RE|S|T|VE))?",Mt="(?:"+bt+"|"+xt+")"+"?",Dt="["+pt+"]?",At=Dt+Mt+("(?:\\u200d(?:"+[_t,Ct,kt].join("|")+")"+Dt+Mt+")*"),Nt="(?:"+[yt,Ct,kt].join("|")+")"+At,Rt="(?:"+[_t+bt+"?",bt,Ct,kt,mt].join("|")+")",Pt=RegExp(ht,"g"),Lt=RegExp(bt,"g"),Ft=RegExp(xt+"(?="+xt+")|"+Rt+At,"g"),Ut=RegExp([wt+"?"+Ot+"+"+Et+"(?="+[ft,wt,"$"].join("|")+")",St+"+"+It+"(?="+[ft,wt+Tt,"$"].join("|")+")",wt+"?"+Tt+"+"+Et,wt+"+"+It,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jt,Nt].join("|"),"g"),$t=RegExp("[\\u200d"+ot+lt+pt+"]"),Bt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zt=-1,Ht={};Ht[ye]=Ht[Oe]=Ht[ve]=Ht[xe]=Ht[_e]=Ht[Ce]=Ht[ke]=Ht[we]=Ht[Te]=!0,Ht[te]=Ht[ne]=Ht[be]=Ht[ae]=Ht[je]=Ht[ie]=Ht[se]=Ht[re]=Ht[le]=Ht[ce]=Ht[de]=Ht[pe]=Ht[ge]=Ht[he]=Ht[fe]=!1;var qt={};qt[te]=qt[ne]=qt[be]=qt[je]=qt[ae]=qt[ie]=qt[ye]=qt[Oe]=qt[ve]=qt[xe]=qt[_e]=qt[le]=qt[ce]=qt[de]=qt[pe]=qt[ge]=qt[he]=qt[me]=qt[Ce]=qt[ke]=qt[we]=qt[Te]=!0,qt[se]=qt[re]=qt[fe]=!1;var Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wt=parseFloat,Kt=parseInt,Yt="object"==typeof e&&e&&e.Object===Object&&e,Qt="object"==typeof self&&self&&self.Object===Object&&self,Jt=Yt||Qt||Function("return this")(),Xt=t&&!t.nodeType&&t,Zt=Xt&&"object"==typeof a&&a&&!a.nodeType&&a,en=Zt&&Zt.exports===Xt,tn=en&&Yt.process,nn=function(){try{var e=Zt&&Zt.require&&Zt.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch(e){}}(),an=nn&&nn.isArrayBuffer,sn=nn&&nn.isDate,rn=nn&&nn.isMap,on=nn&&nn.isRegExp,ln=nn&&nn.isSet,cn=nn&&nn.isTypedArray,dn=k("length"),un=w({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),pn=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),gn=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){function n(e){if(Ni(e)&&!Co(e)&&!(e instanceof w)){if(e instanceof i)return e;if(_s.call(e,"__wrapped__"))return ri(e)}return new i(e)}function a(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=G}function w(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function Ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function ot(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function lt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function ct(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new lt;++t<n;)this.add(e[t])}function dt(e){this.size=(this.__data__=new ot(e)).size}function ut(e,t){var n=Co(e),a=!n&&_o(e),i=!n&&!a&&wo(e),s=!n&&!a&&!i&&Mo(e),r=n||a||i||s,o=r?E(e.length,fs):[],l=o.length;for(var c in e)!t&&!_s.call(e,c)||r&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||za(c,l))||o.push(c);return o}function pt(e){var t=e.length;return t?e[wn(0,t-1)]:G}function gt(e,t){return ni(aa(e),xt(t,0,e.length))}function ht(e){return ni(aa(e))}function mt(e,t,n){(n===G||wi(e[t],n))&&(n!==G||t in e)||Ot(e,t,n)}function ft(e,t,n){var a=e[t];_s.call(e,t)&&wi(a,n)&&(n!==G||t in e)||Ot(e,t,n)}function bt(e,t){for(var n=e.length;n--;)if(wi(e[n][0],t))return n;return-1}function jt(e,t,n,a){return vr(e,(function(e,i,s){t(a,e,n(e),s)})),a}function yt(e,t){return e&&ia(t,Ki(t),e)}function Ot(e,t,n){"__proto__"==t&&Bs?Bs(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function vt(e,t){for(var n=-1,a=t.length,i=cs(a),s=null==e;++n<a;)i[n]=s?G:Gi(e,t[n]);return i}function xt(e,t,n){return e==e&&(n!==G&&(e=e<=n?e:n),t!==G&&(e=e>=t?e:t)),e}function _t(e,t,n,a,i,s){var r,l=1&t,c=2&t,d=4&t;if(n&&(r=i?n(e,a,i,s):n(e)),r!==G)return r;if(!Ai(e))return e;var u=Co(e);if(u){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&_s.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return aa(e,r)}else{var p=Ar(e),g=p==re||p==oe;if(wo(e))return Jn(e,l);if(p==de||p==te||g&&!i){if(r=c||g?{}:Ba(e),!l)return c?function(e,t){return ia(e,Dr(e),t)}(e,function(e,t){return e&&ia(t,Yi(t),e)}(r,e)):function(e,t){return ia(e,Mr(e),t)}(e,yt(r,e))}else{if(!qt[p])return i?e:{};r=function(e,t,n){var a=e.constructor;switch(t){case be:return Xn(e);case ae:case ie:return new a(+e);case je:return function(e,t){return new e.constructor(t?Xn(e.buffer):e.buffer,e.byteOffset,e.byteLength)}(e,n);case ye:case Oe:case ve:case xe:case _e:case Ce:case ke:case we:case Te:return Zn(e,n);case le:return new a;case ce:case he:return new a(e);case pe:return function(e){var t=new e.constructor(e.source,Xe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ge:return new a;case me:return function(e){return jr?hs(jr.call(e)):{}}(e)}}(e,p,l)}}s||(s=new dt);var h=s.get(e);if(h)return h;s.set(e,r),Io(e)?e.forEach((function(a){r.add(_t(a,t,n,a,e,s))})):So(e)&&e.forEach((function(a,i){r.set(i,_t(a,t,n,i,e,s))}));var m=u?G:(d?c?Aa:Da:c?Yi:Ki)(e);return o(m||e,(function(a,i){m&&(a=e[i=a]),ft(r,i,_t(a,t,n,i,e,s))})),r}function Ct(e,t,n){var a=n.length;if(null==e)return!a;for(e=hs(e);a--;){var i=n[a],s=t[i],r=e[i];if(r===G&&!(i in e)||!s(r))return!1}return!0}function kt(e,t,n){if("function"!=typeof e)throw new bs(W);return Pr((function(){e.apply(G,n)}),t)}function wt(e,t,n,a){var i=-1,s=u,r=!0,o=e.length,l=[],c=t.length;if(!o)return l;n&&(t=g(t,I(n))),a?(s=p,r=!1):t.length>=200&&(s=D,r=!1,t=new ct(t));e:for(;++i<o;){var d=e[i],h=null==n?d:n(d);if(d=a||0!==d?d:0,r&&h==h){for(var m=c;m--;)if(t[m]===h)continue e;l.push(d)}else s(t,h,a)||l.push(d)}return l}function Tt(e,t){var n=!0;return vr(e,(function(e,a,i){return n=!!t(e,a,i)})),n}function St(e,t,n){for(var a=-1,i=e.length;++a<i;){var s=e[a],r=t(s);if(null!=r&&(o===G?r==r&&!Fi(r):n(r,o)))var o=r,l=s}return l}function Et(e,t){var n=[];return vr(e,(function(e,a,i){t(e,a,i)&&n.push(e)})),n}function It(e,t,n,a,i){var s=-1,r=e.length;for(n||(n=Va),i||(i=[]);++s<r;){var o=e[s];t>0&&n(o)?t>1?It(o,t-1,n,a,i):h(i,o):a||(i[i.length]=o)}return i}function Mt(e,t){return e&&_r(e,t,Ki)}function Dt(e,t){return e&&Cr(e,t,Ki)}function At(e,t){return d(t,(function(t){return Ii(e[t])}))}function Nt(e,t){for(var n=0,a=(t=Yn(t,e)).length;null!=e&&n<a;)e=e[ai(t[n++])];return n&&n==a?e:G}function Rt(e,t,n){var a=t(e);return Co(e)?a:h(a,n(e))}function Ft(e){return null==e?e===G?"[object Undefined]":"[object Null]":$s&&$s in hs(e)?function(e){var t=_s.call(e,$s),n=e[$s];try{e[$s]=G;var a=!0}catch(e){}var i=ws.call(e);return a&&(t?e[$s]=n:delete e[$s]),i}(e):function(e){return ws.call(e)}(e)}function Ut(e,t){return e>t}function $t(e,t){return null!=e&&_s.call(e,t)}function Bt(e,t){return null!=e&&t in hs(e)}function Gt(e,t,n){for(var a=n?p:u,i=e[0].length,s=e.length,r=s,o=cs(s),l=1/0,c=[];r--;){var d=e[r];r&&t&&(d=g(d,I(t))),l=Zs(d.length,l),o[r]=!n&&(t||i>=120&&d.length>=120)?new ct(r&&d):G}d=e[0];var h=-1,m=o[0];e:for(;++h<i&&c.length<l;){var f=d[h],b=t?t(f):f;if(f=n||0!==f?f:0,!(m?D(m,b):a(c,b,n))){for(r=s;--r;){var j=o[r];if(!(j?D(j,b):a(e[r],b,n)))continue e}m&&m.push(b),c.push(f)}}return c}function Yt(e,t,n){var a=null==(e=Ja(e,t=Yn(t,e)))?e:e[ai(ui(t))];return null==a?G:s(a,e,n)}function Qt(e){return Ni(e)&&Ft(e)==te}function Xt(e,t,n,a,i){return e===t||(null==e||null==t||!Ni(e)&&!Ni(t)?e!=e&&t!=t:function(e,t,n,a,i,s){var r=Co(e),o=Co(t),l=r?ne:Ar(e),c=o?ne:Ar(t),d=(l=l==te?de:l)==de,u=(c=c==te?de:c)==de,p=l==c;if(p&&wo(e)){if(!wo(t))return!1;r=!0,d=!1}if(p&&!d)return s||(s=new dt),r||Mo(e)?Ia(e,t,n,a,i,s):function(e,t,n,a,i,s,r){switch(n){case je:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case be:return!(e.byteLength!=t.byteLength||!s(new Ds(e),new Ds(t)));case ae:case ie:case ce:return wi(+e,+t);case se:return e.name==t.name&&e.message==t.message;case pe:case he:return e==t+"";case le:var o=U;case ge:var l=1&a;if(o||(o=V),e.size!=t.size&&!l)return!1;var c=r.get(e);if(c)return c==t;a|=2,r.set(e,t);var d=Ia(o(e),o(t),a,i,s,r);return r.delete(e),d;case me:if(jr)return jr.call(e)==jr.call(t)}return!1}(e,t,l,n,a,i,s);if(!(1&n)){var g=d&&_s.call(e,"__wrapped__"),h=u&&_s.call(t,"__wrapped__");if(g||h){var m=g?e.value():e,f=h?t.value():t;return s||(s=new dt),i(m,f,n,a,s)}}return!!p&&(s||(s=new dt),function(e,t,n,a,i,s){var r=1&n,o=Da(e),l=o.length;if(l!=Da(t).length&&!r)return!1;for(var c=l;c--;){var d=o[c];if(!(r?d in t:_s.call(t,d)))return!1}var u=s.get(e),p=s.get(t);if(u&&p)return u==t&&p==e;var g=!0;s.set(e,t),s.set(t,e);for(var h=r;++c<l;){d=o[c];var m=e[d],f=t[d];if(a)var b=r?a(f,m,d,t,e,s):a(m,f,d,e,t,s);if(!(b===G?m===f||i(m,f,n,a,s):b)){g=!1;break}h||(h="constructor"==d)}if(g&&!h){var j=e.constructor,y=t.constructor;j!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof j&&j instanceof j&&"function"==typeof y&&y instanceof y)&&(g=!1)}return s.delete(e),s.delete(t),g}(e,t,n,a,i,s))}(e,t,n,a,Xt,i))}function Zt(e,t,n,a){var i=n.length,s=i,r=!a;if(null==e)return!s;for(e=hs(e);i--;){var o=n[i];if(r&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<s;){var l=(o=n[i])[0],c=e[l],d=o[1];if(r&&o[2]){if(c===G&&!(l in e))return!1}else{var u=new dt;if(a)var p=a(c,d,l,e,t,u);if(!(p===G?Xt(d,c,3,a,u):p))return!1}}return!0}function tn(e){return!(!Ai(e)||function(e){return!!ks&&ks in e}(e))&&(Ii(e)?Es:tt).test(ii(e))}function nn(e){return"function"==typeof e?e:null==e?ns:"object"==typeof e?Co(e)?yn(e[0],e[1]):jn(e):rs(e)}function dn(e){if(!Wa(e))return Js(e);var t=[];for(var n in hs(e))_s.call(e,n)&&"constructor"!=n&&t.push(n);return t}function mn(e){if(!Ai(e))return function(e){var t=[];if(null!=e)for(var n in hs(e))t.push(n);return t}(e);var t=Wa(e),n=[];for(var a in e)("constructor"!=a||!t&&_s.call(e,a))&&n.push(a);return n}function fn(e,t){return e<t}function bn(e,t){var n=-1,a=Ti(e)?cs(e.length):[];return vr(e,(function(e,i,s){a[++n]=t(e,i,s)})),a}function jn(e){var t=Fa(e);return 1==t.length&&t[0][2]?Ya(t[0][0],t[0][1]):function(n){return n===e||Zt(n,e,t)}}function yn(e,t){return qa(e)&&Ka(t)?Ya(ai(e),t):function(n){var a=Gi(n,e);return a===G&&a===t?Wi(n,e):Xt(t,a,3)}}function On(e,t,n,a,i){e!==t&&_r(t,(function(s,r){if(i||(i=new dt),Ai(s))!function(e,t,n,a,i,s,r){var o=Za(e,n),l=Za(t,n),c=r.get(l);if(c)return mt(e,n,c),G;var d=s?s(o,l,n+"",e,t,r):G,u=d===G;if(u){var p=Co(l),g=!p&&wo(l),h=!p&&!g&&Mo(l);d=l,p||g||h?Co(o)?d=o:Si(o)?d=aa(o):g?(u=!1,d=Jn(l,!0)):h?(u=!1,d=Zn(l,!0)):d=[]:Pi(l)||_o(l)?(d=o,_o(o)?d=Hi(o):Ai(o)&&!Ii(o)||(d=Ba(l))):u=!1}u&&(r.set(l,d),i(d,l,a,s,r),r.delete(l)),mt(e,n,d)}(e,t,r,n,On,a,i);else{var o=a?a(Za(e,r),s,r+"",e,t,i):G;o===G&&(o=s),mt(e,r,o)}}),Yi)}function vn(e,t){var n=e.length;if(n)return za(t+=t<0?n:0,n)?e[t]:G}function xn(e,t,n){t=t.length?g(t,(function(e){return Co(e)?function(t){return Nt(t,1===e.length?e[0]:e)}:e})):[ns];var a=-1;return t=g(t,I(Pa())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(bn(e,(function(e,n,i){return{criteria:g(t,(function(t){return t(e)})),index:++a,value:e}})),(function(e,t){return function(e,t,n){for(var a=-1,i=e.criteria,s=t.criteria,r=i.length,o=n.length;++a<r;){var l=ea(i[a],s[a]);if(l)return a>=o?l:l*("desc"==n[a]?-1:1)}return e.index-t.index}(e,t,n)}))}function _n(e,t,n){for(var a=-1,i=t.length,s={};++a<i;){var r=t[a],o=Nt(e,r);n(o,r)&&Mn(s,Yn(r,e),o)}return s}function Cn(e,t,n,a){var i=a?x:v,s=-1,r=t.length,o=e;for(e===t&&(t=aa(t)),n&&(o=g(e,I(n)));++s<r;)for(var l=0,c=t[s],d=n?n(c):c;(l=i(o,d,l,a))>-1;)o!==e&&Ls.call(o,l,1),Ls.call(e,l,1);return e}function kn(e,t){for(var n=e?t.length:0,a=n-1;n--;){var i=t[n];if(n==a||i!==s){var s=i;za(i)?Ls.call(e,i,1):Bn(e,i)}}return e}function wn(e,t){return e+Gs(nr()*(t-e+1))}function Tn(e,t){var n="";if(!e||t<1||t>J)return n;do{t%2&&(n+=e),(t=Gs(t/2))&&(e+=e)}while(t);return n}function Sn(e,t){return Lr(Qa(e,t,ns),e+"")}function En(e){return pt(Ji(e))}function In(e,t){var n=Ji(e);return ni(n,xt(t,0,n.length))}function Mn(e,t,n,a){if(!Ai(e))return e;for(var i=-1,s=(t=Yn(t,e)).length,r=s-1,o=e;null!=o&&++i<s;){var l=ai(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=r){var d=o[l];(c=a?a(d,l,o):G)===G&&(c=Ai(d)?d:za(t[i+1])?[]:{})}ft(o,l,c),o=o[l]}return e}function Dn(e){return ni(Ji(e))}function An(e,t,n){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=cs(i);++a<i;)s[a]=e[a+t];return s}function Nn(e,t){var n;return vr(e,(function(e,a,i){return!(n=t(e,a,i))})),!!n}function Rn(e,t,n){var a=0,i=null==e?a:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;a<i;){var s=a+i>>>1,r=e[s];null!==r&&!Fi(r)&&(n?r<=t:r<t)?a=s+1:i=s}return i}return Pn(e,t,ns,n)}function Pn(e,t,n,a){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var r=(t=n(t))!=t,o=null===t,l=Fi(t),c=t===G;i<s;){var d=Gs((i+s)/2),u=n(e[d]),p=u!==G,g=null===u,h=u==u,m=Fi(u);if(r)var f=a||h;else f=c?h&&(a||p):o?h&&p&&(a||!g):l?h&&p&&!g&&(a||!m):!g&&!m&&(a?u<=t:u<t);f?i=d+1:s=d}return Zs(s,4294967294)}function Ln(e,t){for(var n=-1,a=e.length,i=0,s=[];++n<a;){var r=e[n],o=t?t(r):r;if(!n||!wi(o,l)){var l=o;s[i++]=0===r?0:r}}return s}function Fn(e){return"number"==typeof e?e:Fi(e)?X:+e}function Un(e){if("string"==typeof e)return e;if(Co(e))return g(e,Un)+"";if(Fi(e))return yr?yr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $n(e,t,n){var a=-1,i=u,s=e.length,r=!0,o=[],l=o;if(n)r=!1,i=p;else if(s>=200){var c=t?null:Er(e);if(c)return V(c);r=!1,i=D,l=new ct}else l=t?[]:o;e:for(;++a<s;){var d=e[a],g=t?t(d):d;if(d=n||0!==d?d:0,r&&g==g){for(var h=l.length;h--;)if(l[h]===g)continue e;t&&l.push(g),o.push(d)}else i(l,g,n)||(l!==o&&l.push(g),o.push(d))}return o}function Bn(e,t){return null==(e=Ja(e,t=Yn(t,e)))||delete e[ai(ui(t))]}function Vn(e,t,n,a){return Mn(e,t,n(Nt(e,t)),a)}function zn(e,t,n,a){for(var i=e.length,s=a?i:-1;(a?s--:++s<i)&&t(e[s],s,e););return n?An(e,a?0:s,a?s+1:i):An(e,a?s+1:0,a?i:s)}function Hn(e,t){var n=e;return n instanceof w&&(n=n.value()),m(t,(function(e,t){return t.func.apply(t.thisArg,h([e],t.args))}),n)}function qn(e,t,n){var a=e.length;if(a<2)return a?$n(e[0]):[];for(var i=-1,s=cs(a);++i<a;)for(var r=e[i],o=-1;++o<a;)o!=i&&(s[i]=wt(s[i]||r,e[o],t,n));return $n(It(s,1),t,n)}function Gn(e,t,n){for(var a=-1,i=e.length,s=t.length,r={};++a<i;)n(r,e[a],a<s?t[a]:G);return r}function Wn(e){return Si(e)?e:[]}function Kn(e){return"function"==typeof e?e:ns}function Yn(e,t){return Co(e)?e:qa(e,t)?[e]:Fr(qi(e))}function Qn(e,t,n){var a=e.length;return n=n===G?a:n,!t&&n>=a?e:An(e,t,n)}function Jn(e,t){if(t)return e.slice();var n=e.length,a=As?As(n):new e.constructor(n);return e.copy(a),a}function Xn(e){var t=new e.constructor(e.byteLength);return new Ds(t).set(new Ds(e)),t}function Zn(e,t){return new e.constructor(t?Xn(e.buffer):e.buffer,e.byteOffset,e.length)}function ea(e,t){if(e!==t){var n=e!==G,a=null===e,i=e==e,s=Fi(e),r=t!==G,o=null===t,l=t==t,c=Fi(t);if(!o&&!c&&!s&&e>t||s&&r&&l&&!o&&!c||a&&r&&l||!n&&l||!i)return 1;if(!a&&!s&&!c&&e<t||c&&n&&i&&!a&&!s||o&&n&&i||!r&&i||!l)return-1}return 0}function ta(e,t,n,a){for(var i=-1,s=e.length,r=n.length,o=-1,l=t.length,c=Xs(s-r,0),d=cs(l+c),u=!a;++o<l;)d[o]=t[o];for(;++i<r;)(u||i<s)&&(d[n[i]]=e[i]);for(;c--;)d[o++]=e[i++];return d}function na(e,t,n,a){for(var i=-1,s=e.length,r=-1,o=n.length,l=-1,c=t.length,d=Xs(s-o,0),u=cs(d+c),p=!a;++i<d;)u[i]=e[i];for(var g=i;++l<c;)u[g+l]=t[l];for(;++r<o;)(p||i<s)&&(u[g+n[r]]=e[i++]);return u}function aa(e,t){var n=-1,a=e.length;for(t||(t=cs(a));++n<a;)t[n]=e[n];return t}function ia(e,t,n,a){var i=!n;n||(n={});for(var s=-1,r=t.length;++s<r;){var o=t[s],l=a?a(n[o],e[o],o,n,e):G;l===G&&(l=e[o]),i?Ot(n,o,l):ft(n,o,l)}return n}function sa(e,t){return function(n,a){var i=Co(n)?r:jt,s=t?t():{};return i(n,e,Pa(a,2),s)}}function ra(e){return Sn((function(t,n){var a=-1,i=n.length,s=i>1?n[i-1]:G,r=i>2?n[2]:G;for(s=e.length>3&&"function"==typeof s?(i--,s):G,r&&Ha(n[0],n[1],r)&&(s=i<3?G:s,i=1),t=hs(t);++a<i;){var o=n[a];o&&e(t,o,a,s)}return t}))}function oa(e,t){return function(n,a){if(null==n)return n;if(!Ti(n))return e(n,a);for(var i=n.length,s=t?i:-1,r=hs(n);(t?s--:++s<i)&&!1!==a(r[s],s,r););return n}}function la(e){return function(t,n,a){for(var i=-1,s=hs(t),r=a(t),o=r.length;o--;){var l=r[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function ca(e){return function(t){var n=L(t=qi(t))?H(t):G,a=n?n[0]:t.charAt(0),i=n?Qn(n,1).join(""):t.slice(1);return a[e]()+i}}function da(e){return function(t){return m(es(Zi(t).replace(Pt,"")),e,"")}}function ua(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Or(e.prototype),a=e.apply(n,t);return Ai(a)?a:n}}function pa(e,t,n){var a=ua(e);return function i(){for(var r=arguments.length,o=cs(r),l=r,c=Ra(i);l--;)o[l]=arguments[l];var d=r<3&&o[0]!==c&&o[r-1]!==c?[]:B(o,c);return(r-=d.length)<n?_a(e,t,ma,i.placeholder,G,o,d,G,G,n-r):s(this&&this!==Jt&&this instanceof i?a:e,this,o)}}function ga(e){return function(t,n,a){var i=hs(t);if(!Ti(t)){var s=Pa(n,3);t=Ki(t),n=function(e){return s(i[e],e,i)}}var r=e(t,n,a);return r>-1?i[s?t[r]:r]:G}}function ha(e){return Ma((function(t){var n=t.length,a=n,s=i.prototype.thru;for(e&&t.reverse();a--;){var r=t[a];if("function"!=typeof r)throw new bs(W);if(s&&!o&&"wrapper"==Na(r))var o=new i([],!0)}for(a=o?a:n;++a<n;){var l=Na(r=t[a]),c="wrapper"==l?Ir(r):G;o=c&&Ga(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?o[Na(c[0])].apply(o,c[3]):1==r.length&&Ga(r)?o[l]():o.thru(r)}return function(){var e=arguments,a=e[0];if(o&&1==e.length&&Co(a))return o.plant(a).value();for(var i=0,s=n?t[i].apply(this,e):a;++i<n;)s=t[i].call(this,s);return s}}))}function ma(e,t,n,a,i,s,r,o,l,c){var d=t&Q,u=1&t,p=2&t,g=24&t,h=512&t,m=p?G:ua(e);return function f(){for(var b=arguments.length,j=cs(b),y=b;y--;)j[y]=arguments[y];if(g)var O=Ra(f),v=R(j,O);if(a&&(j=ta(j,a,i,g)),s&&(j=na(j,s,r,g)),b-=v,g&&b<c)return _a(e,t,ma,f.placeholder,n,j,B(j,O),o,l,c-b);var x=u?n:this,_=p?x[e]:e;return b=j.length,o?j=Xa(j,o):h&&b>1&&j.reverse(),d&&l<b&&(j.length=l),this&&this!==Jt&&this instanceof f&&(_=m||ua(_)),_.apply(x,j)}}function fa(e,t){return function(n,a){return function(e,t,n,a){return Mt(e,(function(e,i,s){t(a,n(e),i,s)})),a}(n,e,t(a),{})}}function ba(e,t){return function(n,a){var i;if(n===G&&a===G)return t;if(n!==G&&(i=n),a!==G){if(i===G)return a;"string"==typeof n||"string"==typeof a?(n=Un(n),a=Un(a)):(n=Fn(n),a=Fn(a)),i=e(n,a)}return i}}function ja(e){return Ma((function(t){return t=g(t,I(Pa())),Sn((function(n){var a=this;return e(t,(function(e){return s(e,a,n)}))}))}))}function ya(e,t){var n=(t=t===G?" ":Un(t)).length;if(n<2)return n?Tn(t,e):t;var a=Tn(t,qs(e/z(t)));return L(t)?Qn(H(a),0,e).join(""):a.slice(0,e)}function Oa(e,t,n,a){var i=1&t,r=ua(e);return function t(){for(var o=-1,l=arguments.length,c=-1,d=a.length,u=cs(d+l),p=this&&this!==Jt&&this instanceof t?r:e;++c<d;)u[c]=a[c];for(;l--;)u[c++]=arguments[++o];return s(p,i?n:this,u)}}function va(e){return function(t,n,a){return a&&"number"!=typeof a&&Ha(t,n,a)&&(n=a=G),t=$i(t),n===G?(n=t,t=0):n=$i(n),function(e,t,n,a){for(var i=-1,s=Xs(qs((t-e)/(n||1)),0),r=cs(s);s--;)r[a?s:++i]=e,e+=n;return r}(t,n,a=a===G?t<n?1:-1:$i(a),e)}}function xa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=zi(t),n=zi(n)),e(t,n)}}function _a(e,t,n,a,i,s,r,o,l,c){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var u=[e,t,i,d?s:G,d?r:G,d?G:s,d?G:r,o,l,c],p=n.apply(G,u);return Ga(e)&&Rr(p,u),p.placeholder=a,ei(p,e,t)}function Ca(e){var t=gs[e];return function(e,n){if(e=zi(e),(n=null==n?0:Zs(Bi(n),292))&&Ys(e)){var a=(qi(e)+"e").split("e");return+((a=(qi(t(a[0]+"e"+(+a[1]+n)))+"e").split("e"))[0]+"e"+(+a[1]-n))}return t(e)}}function ka(e){return function(t){var n=Ar(t);return n==le?U(t):n==ge?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return g(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function wa(e,t,n,a,i,s,r,o){var l=2&t;if(!l&&"function"!=typeof e)throw new bs(W);var c=a?a.length:0;if(c||(t&=-97,a=i=G),r=r===G?r:Xs(Bi(r),0),o=o===G?o:Bi(o),c-=i?i.length:0,64&t){var d=a,u=i;a=i=G}var p=l?G:Ir(e),g=[e,t,n,a,i,d,u,s,r,o];if(p&&function(e,t){var n=e[1],a=t[1],i=n|a,s=i<131,r=a==Q&&8==n||a==Q&&256==n&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==n;if(!s&&!r)return e;1&a&&(e[2]=t[2],i|=1&n?0:4);var o=t[3];if(o){var l=e[3];e[3]=l?ta(l,o,t[4]):o,e[4]=l?B(e[3],Y):t[4]}(o=t[5])&&(l=e[5],e[5]=l?na(l,o,t[6]):o,e[6]=l?B(e[5],Y):t[6]),(o=t[7])&&(e[7]=o),a&Q&&(e[8]=null==e[8]?t[8]:Zs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(g,p),e=g[0],t=g[1],n=g[2],a=g[3],i=g[4],!(o=g[9]=g[9]===G?l?0:e.length:Xs(g[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?pa(e,t,o):32!=t&&33!=t||i.length?ma.apply(G,g):Oa(e,t,n,a);else var h=function(e,t,n){var a=1&t,i=ua(e);return function t(){return(this&&this!==Jt&&this instanceof t?i:e).apply(a?n:this,arguments)}}(e,t,n);return ei((p?kr:Rr)(h,g),e,t)}function Ta(e,t,n,a){return e===G||wi(e,Os[n])&&!_s.call(a,n)?t:e}function Sa(e,t,n,a,i,s){return Ai(e)&&Ai(t)&&(s.set(t,e),On(e,t,G,Sa,s),s.delete(t)),e}function Ea(e){return Pi(e)?G:e}function Ia(e,t,n,a,i,s){var r=1&n,o=e.length,l=t.length;if(o!=l&&!(r&&l>o))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,p=!0,g=2&n?new ct:G;for(s.set(e,t),s.set(t,e);++u<o;){var h=e[u],m=t[u];if(a)var f=r?a(m,h,u,t,e,s):a(h,m,u,e,t,s);if(f!==G){if(f)continue;p=!1;break}if(g){if(!b(t,(function(e,t){if(!D(g,t)&&(h===e||i(h,e,n,a,s)))return g.push(t)}))){p=!1;break}}else if(h!==m&&!i(h,m,n,a,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function Ma(e){return Lr(Qa(e,G,ci),e+"")}function Da(e){return Rt(e,Ki,Mr)}function Aa(e){return Rt(e,Yi,Dr)}function Na(e){for(var t=e.name+"",n=ur[t],a=_s.call(ur,t)?n.length:0;a--;){var i=n[a],s=i.func;if(null==s||s==e)return i.name}return t}function Ra(e){return(_s.call(n,"placeholder")?n:e).placeholder}function Pa(){var e=n.iteratee||as;return e=e===as?nn:e,arguments.length?e(arguments[0],arguments[1]):e}function La(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Fa(e){for(var t=Ki(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,Ka(i)]}return t}function Ua(e,t){var n=function(e,t){return null==e?G:e[t]}(e,t);return tn(n)?n:G}function $a(e,t,n){for(var a=-1,i=(t=Yn(t,e)).length,s=!1;++a<i;){var r=ai(t[a]);if(!(s=null!=e&&n(e,r)))break;e=e[r]}return s||++a!=i?s:!!(i=null==e?0:e.length)&&Di(i)&&za(r,i)&&(Co(e)||_o(e))}function Ba(e){return"function"!=typeof e.constructor||Wa(e)?{}:Or(Ns(e))}function Va(e){return Co(e)||_o(e)||!!(Fs&&e&&e[Fs])}function za(e,t){var n=typeof e;return!!(t=null==t?J:t)&&("number"==n||"symbol"!=n&&at.test(e))&&e>-1&&e%1==0&&e<t}function Ha(e,t,n){if(!Ai(n))return!1;var a=typeof t;return!!("number"==a?Ti(n)&&za(t,n.length):"string"==a&&t in n)&&wi(n[t],e)}function qa(e,t){if(Co(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Fi(e))||Ue.test(e)||!Fe.test(e)||null!=t&&e in hs(t)}function Ga(e){var t=Na(e),a=n[t];if("function"!=typeof a||!(t in w.prototype))return!1;if(e===a)return!0;var i=Ir(a);return!!i&&e===i[0]}function Wa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Os)}function Ka(e){return e==e&&!Ai(e)}function Ya(e,t){return function(n){return null!=n&&n[e]===t&&(t!==G||e in hs(n))}}function Qa(e,t,n){return t=Xs(t===G?e.length-1:t,0),function(){for(var a=arguments,i=-1,r=Xs(a.length-t,0),o=cs(r);++i<r;)o[i]=a[t+i];i=-1;for(var l=cs(t+1);++i<t;)l[i]=a[i];return l[t]=n(o),s(e,this,l)}}function Ja(e,t){return t.length<2?e:Nt(e,An(t,0,-1))}function Xa(e,t){for(var n=e.length,a=Zs(t.length,n),i=aa(e);a--;){var s=t[a];e[a]=za(s,n)?i[s]:G}return e}function Za(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function ei(e,t,n){var a=t+"";return Lr(e,function(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(n>1?"& ":"")+t[a],t=t.join(n>2?", ":" "),e.replace(Ge,"{\n/* [wrapped with "+t+"] */\n")}(a,si(function(e){var t=e.match(We);return t?t[1].split(Ke):[]}(a),n)))}function ti(e){var t=0,n=0;return function(){var a=er(),i=16-(a-n);if(n=a,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(G,arguments)}}function ni(e,t){var n=-1,a=e.length,i=a-1;for(t=t===G?a:t;++n<t;){var s=wn(n,i),r=e[s];e[s]=e[n],e[n]=r}return e.length=t,e}function ai(e){if("string"==typeof e||Fi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ii(e){if(null!=e){try{return xs.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function si(e,t){return o(ee,(function(n){var a="_."+n[0];t&n[1]&&!u(e,a)&&e.push(a)})),e.sort()}function ri(e){if(e instanceof w)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=aa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function oi(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=null==n?0:Bi(n);return i<0&&(i=Xs(a+i,0)),O(e,Pa(t,3),i)}function li(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a-1;return n!==G&&(i=Bi(n),i=n<0?Xs(a+i,0):Zs(i,a-1)),O(e,Pa(t,3),i,!0)}function ci(e){return null!=e&&e.length?It(e,1):[]}function di(e){return e&&e.length?e[0]:G}function ui(e){var t=null==e?0:e.length;return t?e[t-1]:G}function pi(e,t){return e&&e.length&&t&&t.length?Cn(e,t):e}function gi(e){return null==e?e:ar.call(e)}function hi(e){if(!e||!e.length)return[];var t=0;return e=d(e,(function(e){if(Si(e))return t=Xs(e.length,t),!0})),E(t,(function(t){return g(e,k(t))}))}function mi(e,t){if(!e||!e.length)return[];var n=hi(e);return null==t?n:g(n,(function(e){return s(t,G,e)}))}function fi(e){var t=n(e);return t.__chain__=!0,t}function bi(e,t){return t(e)}function ji(e,t){return(Co(e)?o:vr)(e,Pa(t,3))}function yi(e,t){return(Co(e)?l:xr)(e,Pa(t,3))}function Oi(e,t){return(Co(e)?g:bn)(e,Pa(t,3))}function vi(e,t,n){return t=n?G:t,t=e&&null==t?e.length:t,wa(e,Q,G,G,G,G,t)}function xi(e,t){var n;if("function"!=typeof t)throw new bs(W);return e=Bi(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=G),n}}function _i(e,t,n){function a(t){var n=c,a=d;return c=d=G,m=t,p=e.apply(a,n)}function i(e){return m=e,g=Pr(r,t),f?a(e):p}function s(e){var n=e-h;return h===G||n>=t||n<0||b&&e-m>=u}function r(){var e=po();return s(e)?o(e):(g=Pr(r,function(e){var n=t-(e-h);return b?Zs(n,u-(e-m)):n}(e)),G)}function o(e){return g=G,j&&c?a(e):(c=d=G,p)}function l(){var e=po(),n=s(e);if(c=arguments,d=this,h=e,n){if(g===G)return i(h);if(b)return Sr(g),g=Pr(r,t),a(h)}return g===G&&(g=Pr(r,t)),p}var c,d,u,p,g,h,m=0,f=!1,b=!1,j=!0;if("function"!=typeof e)throw new bs(W);return t=zi(t)||0,Ai(n)&&(f=!!n.leading,u=(b="maxWait"in n)?Xs(zi(n.maxWait)||0,t):u,j="trailing"in n?!!n.trailing:j),l.cancel=function(){g!==G&&Sr(g),m=0,c=h=d=g=G},l.flush=function(){return g===G?p:o(po())},l}function Ci(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new bs(W);var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],s=n.cache;if(s.has(i))return s.get(i);var r=e.apply(this,a);return n.cache=s.set(i,r)||s,r};return n.cache=new(Ci.Cache||lt),n}function ki(e){if("function"!=typeof e)throw new bs(W);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function wi(e,t){return e===t||e!=e&&t!=t}function Ti(e){return null!=e&&Di(e.length)&&!Ii(e)}function Si(e){return Ni(e)&&Ti(e)}function Ei(e){if(!Ni(e))return!1;var t=Ft(e);return t==se||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Pi(e)}function Ii(e){if(!Ai(e))return!1;var t=Ft(e);return t==re||t==oe||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Mi(e){return"number"==typeof e&&e==Bi(e)}function Di(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=J}function Ai(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ni(e){return null!=e&&"object"==typeof e}function Ri(e){return"number"==typeof e||Ni(e)&&Ft(e)==ce}function Pi(e){if(!Ni(e)||Ft(e)!=de)return!1;var t=Ns(e);if(null===t)return!0;var n=_s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&xs.call(n)==Ts}function Li(e){return"string"==typeof e||!Co(e)&&Ni(e)&&Ft(e)==he}function Fi(e){return"symbol"==typeof e||Ni(e)&&Ft(e)==me}function Ui(e){if(!e)return[];if(Ti(e))return Li(e)?H(e):aa(e);if(Us&&e[Us])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Us]());var t=Ar(e);return(t==le?U:t==ge?V:Ji)(e)}function $i(e){return e?(e=zi(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Bi(e){var t=$i(e),n=t%1;return t==t?n?t-n:t:0}function Vi(e){return e?xt(Bi(e),0,Z):0}function zi(e){if("number"==typeof e)return e;if(Fi(e))return X;if(Ai(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ai(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ze,"");var n=et.test(e);return n||nt.test(e)?Kt(e.slice(2),n?2:8):Ze.test(e)?X:+e}function Hi(e){return ia(e,Yi(e))}function qi(e){return null==e?"":Un(e)}function Gi(e,t,n){var a=null==e?G:Nt(e,t);return a===G?n:a}function Wi(e,t){return null!=e&&$a(e,t,Bt)}function Ki(e){return Ti(e)?ut(e):dn(e)}function Yi(e){return Ti(e)?ut(e,!0):mn(e)}function Qi(e,t){if(null==e)return{};var n=g(Aa(e),(function(e){return[e]}));return t=Pa(t),_n(e,n,(function(e,n){return t(e,n[0])}))}function Ji(e){return null==e?[]:M(e,Ki(e))}function Xi(e){return al(qi(e).toLowerCase())}function Zi(e){return(e=qi(e))&&e.replace(it,un).replace(Lt,"")}function es(e,t,n){return e=qi(e),(t=n?G:t)===G?F(e)?q(e):j(e):e.match(t)||[]}function ts(e){return function(){return e}}function ns(e){return e}function as(e){return nn("function"==typeof e?e:_t(e,1))}function is(e,t,n){var a=Ki(t),i=At(t,a);null!=n||Ai(t)&&(i.length||!a.length)||(n=t,t=e,e=this,i=At(t,Ki(t)));var s=!(Ai(n)&&"chain"in n&&!n.chain),r=Ii(e);return o(i,(function(n){var a=t[n];e[n]=a,r&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=aa(this.__actions__)).push({func:a,args:arguments,thisArg:e}),n.__chain__=t,n}return a.apply(e,h([this.value()],arguments))})})),e}function ss(){}function rs(e){return qa(e)?k(ai(e)):function(e){return function(t){return Nt(t,e)}}(e)}function os(){return[]}function ls(){return!1}var cs=(t=null==t?Jt:hn.defaults(Jt.Object(),t,hn.pick(Jt,Vt))).Array,ds=t.Date,us=t.Error,ps=t.Function,gs=t.Math,hs=t.Object,ms=t.RegExp,fs=t.String,bs=t.TypeError,js=cs.prototype,ys=ps.prototype,Os=hs.prototype,vs=t["__core-js_shared__"],xs=ys.toString,_s=Os.hasOwnProperty,Cs=0,ks=function(){var e=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ws=Os.toString,Ts=xs.call(hs),Ss=Jt._,Es=ms("^"+xs.call(_s).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Is=en?t.Buffer:G,Ms=t.Symbol,Ds=t.Uint8Array,As=Is?Is.allocUnsafe:G,Ns=$(hs.getPrototypeOf,hs),Rs=hs.create,Ps=Os.propertyIsEnumerable,Ls=js.splice,Fs=Ms?Ms.isConcatSpreadable:G,Us=Ms?Ms.iterator:G,$s=Ms?Ms.toStringTag:G,Bs=function(){try{var e=Ua(hs,"defineProperty");return e({},"",{}),e}catch(e){}}(),Vs=t.clearTimeout!==Jt.clearTimeout&&t.clearTimeout,zs=ds&&ds.now!==Jt.Date.now&&ds.now,Hs=t.setTimeout!==Jt.setTimeout&&t.setTimeout,qs=gs.ceil,Gs=gs.floor,Ws=hs.getOwnPropertySymbols,Ks=Is?Is.isBuffer:G,Ys=t.isFinite,Qs=js.join,Js=$(hs.keys,hs),Xs=gs.max,Zs=gs.min,er=ds.now,tr=t.parseInt,nr=gs.random,ar=js.reverse,ir=Ua(t,"DataView"),sr=Ua(t,"Map"),rr=Ua(t,"Promise"),or=Ua(t,"Set"),lr=Ua(t,"WeakMap"),cr=Ua(hs,"create"),dr=lr&&new lr,ur={},pr=ii(ir),gr=ii(sr),hr=ii(rr),mr=ii(or),fr=ii(lr),br=Ms?Ms.prototype:G,jr=br?br.valueOf:G,yr=br?br.toString:G,Or=function(){function e(){}return function(t){if(!Ai(t))return{};if(Rs)return Rs(t);e.prototype=t;var n=new e;return e.prototype=G,n}}();n.templateSettings={escape:Re,evaluate:Pe,interpolate:Le,variable:"",imports:{_:n}},n.prototype=a.prototype,n.prototype.constructor=n,i.prototype=Or(a.prototype),i.prototype.constructor=i,w.prototype=Or(a.prototype),w.prototype.constructor=w,Ye.prototype.clear=function(){this.__data__=cr?cr(null):{},this.size=0},Ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ye.prototype.get=function(e){var t=this.__data__;if(cr){var n=t[e];return n===K?G:n}return _s.call(t,e)?t[e]:G},Ye.prototype.has=function(e){var t=this.__data__;return cr?t[e]!==G:_s.call(t,e)},Ye.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=cr&&t===G?K:t,this},ot.prototype.clear=function(){this.__data__=[],this.size=0},ot.prototype.delete=function(e){var t=this.__data__,n=bt(t,e);return!(n<0||(n==t.length-1?t.pop():Ls.call(t,n,1),--this.size,0))},ot.prototype.get=function(e){var t=this.__data__,n=bt(t,e);return n<0?G:t[n][1]},ot.prototype.has=function(e){return bt(this.__data__,e)>-1},ot.prototype.set=function(e,t){var n=this.__data__,a=bt(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this},lt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(sr||ot),string:new Ye}},lt.prototype.delete=function(e){var t=La(this,e).delete(e);return this.size-=t?1:0,t},lt.prototype.get=function(e){return La(this,e).get(e)},lt.prototype.has=function(e){return La(this,e).has(e)},lt.prototype.set=function(e,t){var n=La(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this},ct.prototype.add=ct.prototype.push=function(e){return this.__data__.set(e,K),this},ct.prototype.has=function(e){return this.__data__.has(e)},dt.prototype.clear=function(){this.__data__=new ot,this.size=0},dt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},dt.prototype.get=function(e){return this.__data__.get(e)},dt.prototype.has=function(e){return this.__data__.has(e)},dt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ot){var a=n.__data__;if(!sr||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new lt(a)}return n.set(e,t),this.size=n.size,this};var vr=oa(Mt),xr=oa(Dt,!0),_r=la(),Cr=la(!0),kr=dr?function(e,t){return dr.set(e,t),e}:ns,wr=Bs?function(e,t){return Bs(e,"toString",{configurable:!0,enumerable:!1,value:ts(t),writable:!0})}:ns,Tr=Sn,Sr=Vs||function(e){return Jt.clearTimeout(e)},Er=or&&1/V(new or([,-0]))[1]==1/0?function(e){return new or(e)}:ss,Ir=dr?function(e){return dr.get(e)}:ss,Mr=Ws?function(e){return null==e?[]:(e=hs(e),d(Ws(e),(function(t){return Ps.call(e,t)})))}:os,Dr=Ws?function(e){for(var t=[];e;)h(t,Mr(e)),e=Ns(e);return t}:os,Ar=Ft;(ir&&Ar(new ir(new ArrayBuffer(1)))!=je||sr&&Ar(new sr)!=le||rr&&Ar(rr.resolve())!=ue||or&&Ar(new or)!=ge||lr&&Ar(new lr)!=fe)&&(Ar=function(e){var t=Ft(e),n=t==de?e.constructor:G,a=n?ii(n):"";if(a)switch(a){case pr:return je;case gr:return le;case hr:return ue;case mr:return ge;case fr:return fe}return t});var Nr=vs?Ii:ls,Rr=ti(kr),Pr=Hs||function(e,t){return Jt.setTimeout(e,t)},Lr=ti(wr),Fr=function(e){var t=Ci(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($e,(function(e,n,a,i){t.push(a?i.replace(Qe,"$1"):n||e)})),t})),Ur=Sn((function(e,t){return Si(e)?wt(e,It(t,1,Si,!0)):[]})),$r=Sn((function(e,t){var n=ui(t);return Si(n)&&(n=G),Si(e)?wt(e,It(t,1,Si,!0),Pa(n,2)):[]})),Br=Sn((function(e,t){var n=ui(t);return Si(n)&&(n=G),Si(e)?wt(e,It(t,1,Si,!0),G,n):[]})),Vr=Sn((function(e){var t=g(e,Wn);return t.length&&t[0]===e[0]?Gt(t):[]})),zr=Sn((function(e){var t=ui(e),n=g(e,Wn);return t===ui(n)?t=G:n.pop(),n.length&&n[0]===e[0]?Gt(n,Pa(t,2)):[]})),Hr=Sn((function(e){var t=ui(e),n=g(e,Wn);return(t="function"==typeof t?t:G)&&n.pop(),n.length&&n[0]===e[0]?Gt(n,G,t):[]})),qr=Sn(pi),Gr=Ma((function(e,t){var n=null==e?0:e.length,a=vt(e,t);return kn(e,g(t,(function(e){return za(e,n)?+e:e})).sort(ea)),a})),Wr=Sn((function(e){return $n(It(e,1,Si,!0))})),Kr=Sn((function(e){var t=ui(e);return Si(t)&&(t=G),$n(It(e,1,Si,!0),Pa(t,2))})),Yr=Sn((function(e){var t=ui(e);return t="function"==typeof t?t:G,$n(It(e,1,Si,!0),G,t)})),Qr=Sn((function(e,t){return Si(e)?wt(e,t):[]})),Jr=Sn((function(e){return qn(d(e,Si))})),Xr=Sn((function(e){var t=ui(e);return Si(t)&&(t=G),qn(d(e,Si),Pa(t,2))})),Zr=Sn((function(e){var t=ui(e);return t="function"==typeof t?t:G,qn(d(e,Si),G,t)})),eo=Sn(hi),to=Sn((function(e){var t=e.length,n=t>1?e[t-1]:G;return n="function"==typeof n?(e.pop(),n):G,mi(e,n)})),no=Ma((function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,s=function(t){return vt(t,e)};return!(t>1||this.__actions__.length)&&a instanceof w&&za(n)?((a=a.slice(n,+n+(t?1:0))).__actions__.push({func:bi,args:[s],thisArg:G}),new i(a,this.__chain__).thru((function(e){return t&&!e.length&&e.push(G),e}))):this.thru(s)})),ao=sa((function(e,t,n){_s.call(e,n)?++e[n]:Ot(e,n,1)})),io=ga(oi),so=ga(li),ro=sa((function(e,t,n){_s.call(e,n)?e[n].push(t):Ot(e,n,[t])})),oo=Sn((function(e,t,n){var a=-1,i="function"==typeof t,r=Ti(e)?cs(e.length):[];return vr(e,(function(e){r[++a]=i?s(t,e,n):Yt(e,t,n)})),r})),lo=sa((function(e,t,n){Ot(e,n,t)})),co=sa((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),uo=Sn((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ha(e,t[0],t[1])?t=[]:n>2&&Ha(t[0],t[1],t[2])&&(t=[t[0]]),xn(e,It(t,1),[])})),po=zs||function(){return Jt.Date.now()},go=Sn((function(e,t,n){var a=1;if(n.length){var i=B(n,Ra(go));a|=32}return wa(e,a,t,n,i)})),ho=Sn((function(e,t,n){var a=3;if(n.length){var i=B(n,Ra(ho));a|=32}return wa(t,a,e,n,i)})),mo=Sn((function(e,t){return kt(e,1,t)})),fo=Sn((function(e,t,n){return kt(e,zi(t)||0,n)}));Ci.Cache=lt;var bo=Tr((function(e,t){var n=(t=1==t.length&&Co(t[0])?g(t[0],I(Pa())):g(It(t,1),I(Pa()))).length;return Sn((function(a){for(var i=-1,r=Zs(a.length,n);++i<r;)a[i]=t[i].call(this,a[i]);return s(e,this,a)}))})),jo=Sn((function(e,t){return wa(e,32,G,t,B(t,Ra(jo)))})),yo=Sn((function(e,t){return wa(e,64,G,t,B(t,Ra(yo)))})),Oo=Ma((function(e,t){return wa(e,256,G,G,G,t)})),vo=xa(Ut),xo=xa((function(e,t){return e>=t})),_o=Qt(function(){return arguments}())?Qt:function(e){return Ni(e)&&_s.call(e,"callee")&&!Ps.call(e,"callee")},Co=cs.isArray,ko=an?I(an):function(e){return Ni(e)&&Ft(e)==be},wo=Ks||ls,To=sn?I(sn):function(e){return Ni(e)&&Ft(e)==ie},So=rn?I(rn):function(e){return Ni(e)&&Ar(e)==le},Eo=on?I(on):function(e){return Ni(e)&&Ft(e)==pe},Io=ln?I(ln):function(e){return Ni(e)&&Ar(e)==ge},Mo=cn?I(cn):function(e){return Ni(e)&&Di(e.length)&&!!Ht[Ft(e)]},Do=xa(fn),Ao=xa((function(e,t){return e<=t})),No=ra((function(e,t){if(Wa(t)||Ti(t))return ia(t,Ki(t),e),G;for(var n in t)_s.call(t,n)&&ft(e,n,t[n])})),Ro=ra((function(e,t){ia(t,Yi(t),e)})),Po=ra((function(e,t,n,a){ia(t,Yi(t),e,a)})),Lo=ra((function(e,t,n,a){ia(t,Ki(t),e,a)})),Fo=Ma(vt),Uo=Sn((function(e,t){e=hs(e);var n=-1,a=t.length,i=a>2?t[2]:G;for(i&&Ha(t[0],t[1],i)&&(a=1);++n<a;)for(var s=t[n],r=Yi(s),o=-1,l=r.length;++o<l;){var c=r[o],d=e[c];(d===G||wi(d,Os[c])&&!_s.call(e,c))&&(e[c]=s[c])}return e})),$o=Sn((function(e){return e.push(G,Sa),s(qo,G,e)})),Bo=fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ws.call(t)),e[t]=n}),ts(ns)),Vo=fa((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ws.call(t)),_s.call(e,t)?e[t].push(n):e[t]=[n]}),Pa),zo=Sn(Yt),Ho=ra((function(e,t,n){On(e,t,n)})),qo=ra((function(e,t,n,a){On(e,t,n,a)})),Go=Ma((function(e,t){var n={};if(null==e)return n;var a=!1;t=g(t,(function(t){return t=Yn(t,e),a||(a=t.length>1),t})),ia(e,Aa(e),n),a&&(n=_t(n,7,Ea));for(var i=t.length;i--;)Bn(n,t[i]);return n})),Wo=Ma((function(e,t){return null==e?{}:function(e,t){return _n(e,t,(function(t,n){return Wi(e,n)}))}(e,t)})),Ko=ka(Ki),Yo=ka(Yi),Qo=da((function(e,t,n){return t=t.toLowerCase(),e+(n?Xi(t):t)})),Jo=da((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Xo=da((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Zo=ca("toLowerCase"),el=da((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),tl=da((function(e,t,n){return e+(n?" ":"")+al(t)})),nl=da((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),al=ca("toUpperCase"),il=Sn((function(e,t){try{return s(e,G,t)}catch(e){return Ei(e)?e:new us(e)}})),sl=Ma((function(e,t){return o(t,(function(t){t=ai(t),Ot(e,t,go(e[t],e))})),e})),rl=ha(),ol=ha(!0),ll=Sn((function(e,t){return function(n){return Yt(n,e,t)}})),cl=Sn((function(e,t){return function(n){return Yt(e,n,t)}})),dl=ja(g),ul=ja(c),pl=ja(b),gl=va(),hl=va(!0),ml=ba((function(e,t){return e+t}),0),fl=Ca("ceil"),bl=ba((function(e,t){return e/t}),1),jl=Ca("floor"),yl=ba((function(e,t){return e*t}),1),Ol=Ca("round"),vl=ba((function(e,t){return e-t}),0);return n.after=function(e,t){if("function"!=typeof t)throw new bs(W);return e=Bi(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=vi,n.assign=No,n.assignIn=Ro,n.assignInWith=Po,n.assignWith=Lo,n.at=Fo,n.before=xi,n.bind=go,n.bindAll=sl,n.bindKey=ho,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Co(e)?e:[e]},n.chain=fi,n.chunk=function(e,t,n){t=(n?Ha(e,t,n):t===G)?1:Xs(Bi(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,s=0,r=cs(qs(a/t));i<a;)r[s++]=An(e,i,i+=t);return r},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,a=0,i=[];++t<n;){var s=e[t];s&&(i[a++]=s)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=cs(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return h(Co(n)?aa(n):[n],It(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=Pa();return e=t?g(e,(function(e){if("function"!=typeof e[1])throw new bs(W);return[n(e[0]),e[1]]})):[],Sn((function(n){for(var a=-1;++a<t;){var i=e[a];if(s(i[0],this,n))return s(i[1],this,n)}}))},n.conforms=function(e){return function(e){var t=Ki(e);return function(n){return Ct(n,e,t)}}(_t(e,1))},n.constant=ts,n.countBy=ao,n.create=function(e,t){var n=Or(e);return null==t?n:yt(n,t)},n.curry=function e(t,n,a){var i=wa(t,8,G,G,G,G,G,n=a?G:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,a){var i=wa(t,16,G,G,G,G,G,n=a?G:n);return i.placeholder=e.placeholder,i},n.debounce=_i,n.defaults=Uo,n.defaultsDeep=$o,n.defer=mo,n.delay=fo,n.difference=Ur,n.differenceBy=$r,n.differenceWith=Br,n.drop=function(e,t,n){var a=null==e?0:e.length;return a?An(e,(t=n||t===G?1:Bi(t))<0?0:t,a):[]},n.dropRight=function(e,t,n){var a=null==e?0:e.length;return a?An(e,0,(t=a-(t=n||t===G?1:Bi(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?zn(e,Pa(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?zn(e,Pa(t,3),!0):[]},n.fill=function(e,t,n,a){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ha(e,t,n)&&(n=0,a=i),function(e,t,n,a){var i=e.length;for((n=Bi(n))<0&&(n=-n>i?0:i+n),(a=a===G||a>i?i:Bi(a))<0&&(a+=i),a=n>a?0:Vi(a);n<a;)e[n++]=t;return e}(e,t,n,a)):[]},n.filter=function(e,t){return(Co(e)?d:Et)(e,Pa(t,3))},n.flatMap=function(e,t){return It(Oi(e,t),1)},n.flatMapDeep=function(e,t){return It(Oi(e,t),1/0)},n.flatMapDepth=function(e,t,n){return n=n===G?1:Bi(n),It(Oi(e,t),n)},n.flatten=ci,n.flattenDeep=function(e){return null!=e&&e.length?It(e,1/0):[]},n.flattenDepth=function(e,t){return null!=e&&e.length?It(e,t=t===G?1:Bi(t)):[]},n.flip=function(e){return wa(e,512)},n.flow=rl,n.flowRight=ol,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,a={};++t<n;){var i=e[t];a[i[0]]=i[1]}return a},n.functions=function(e){return null==e?[]:At(e,Ki(e))},n.functionsIn=function(e){return null==e?[]:At(e,Yi(e))},n.groupBy=ro,n.initial=function(e){return null!=e&&e.length?An(e,0,-1):[]},n.intersection=Vr,n.intersectionBy=zr,n.intersectionWith=Hr,n.invert=Bo,n.invertBy=Vo,n.invokeMap=oo,n.iteratee=as,n.keyBy=lo,n.keys=Ki,n.keysIn=Yi,n.map=Oi,n.mapKeys=function(e,t){var n={};return t=Pa(t,3),Mt(e,(function(e,a,i){Ot(n,t(e,a,i),e)})),n},n.mapValues=function(e,t){var n={};return t=Pa(t,3),Mt(e,(function(e,a,i){Ot(n,a,t(e,a,i))})),n},n.matches=function(e){return jn(_t(e,1))},n.matchesProperty=function(e,t){return yn(e,_t(t,1))},n.memoize=Ci,n.merge=Ho,n.mergeWith=qo,n.method=ll,n.methodOf=cl,n.mixin=is,n.negate=ki,n.nthArg=function(e){return e=Bi(e),Sn((function(t){return vn(t,e)}))},n.omit=Go,n.omitBy=function(e,t){return Qi(e,ki(Pa(t)))},n.once=function(e){return xi(2,e)},n.orderBy=function(e,t,n,a){return null==e?[]:(Co(t)||(t=null==t?[]:[t]),Co(n=a?G:n)||(n=null==n?[]:[n]),xn(e,t,n))},n.over=dl,n.overArgs=bo,n.overEvery=ul,n.overSome=pl,n.partial=jo,n.partialRight=yo,n.partition=co,n.pick=Wo,n.pickBy=Qi,n.property=rs,n.propertyOf=function(e){return function(t){return null==e?G:Nt(e,t)}},n.pull=qr,n.pullAll=pi,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Cn(e,t,Pa(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Cn(e,t,G,n):e},n.pullAt=Gr,n.range=gl,n.rangeRight=hl,n.rearg=Oo,n.reject=function(e,t){return(Co(e)?d:Et)(e,ki(Pa(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,i=[],s=e.length;for(t=Pa(t,3);++a<s;){var r=e[a];t(r,a,e)&&(n.push(r),i.push(a))}return kn(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new bs(W);return Sn(e,t=t===G?t:Bi(t))},n.reverse=gi,n.sampleSize=function(e,t,n){return t=(n?Ha(e,t,n):t===G)?1:Bi(t),(Co(e)?gt:In)(e,t)},n.set=function(e,t,n){return null==e?e:Mn(e,t,n)},n.setWith=function(e,t,n,a){return a="function"==typeof a?a:G,null==e?e:Mn(e,t,n,a)},n.shuffle=function(e){return(Co(e)?ht:Dn)(e)},n.slice=function(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&Ha(e,t,n)?(t=0,n=a):(t=null==t?0:Bi(t),n=n===G?a:Bi(n)),An(e,t,n)):[]},n.sortBy=uo,n.sortedUniq=function(e){return e&&e.length?Ln(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?Ln(e,Pa(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&Ha(e,t,n)&&(t=n=G),(n=n===G?Z:n>>>0)?(e=qi(e))&&("string"==typeof t||null!=t&&!Eo(t))&&(!(t=Un(t))&&L(e))?Qn(H(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new bs(W);return t=null==t?0:Xs(Bi(t),0),Sn((function(n){var a=n[t],i=Qn(n,0,t);return a&&h(i,a),s(e,this,i)}))},n.tail=function(e){var t=null==e?0:e.length;return t?An(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?An(e,0,(t=n||t===G?1:Bi(t))<0?0:t):[]},n.takeRight=function(e,t,n){var a=null==e?0:e.length;return a?An(e,(t=a-(t=n||t===G?1:Bi(t)))<0?0:t,a):[]},n.takeRightWhile=function(e,t){return e&&e.length?zn(e,Pa(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?zn(e,Pa(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new bs(W);return Ai(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),_i(e,t,{leading:a,maxWait:t,trailing:i})},n.thru=bi,n.toArray=Ui,n.toPairs=Ko,n.toPairsIn=Yo,n.toPath=function(e){return Co(e)?g(e,ai):Fi(e)?[e]:aa(Fr(qi(e)))},n.toPlainObject=Hi,n.transform=function(e,t,n){var a=Co(e),i=a||wo(e)||Mo(e);if(t=Pa(t,4),null==n){var s=e&&e.constructor;n=i?a?new s:[]:Ai(e)&&Ii(s)?Or(Ns(e)):{}}return(i?o:Mt)(e,(function(e,a,i){return t(n,e,a,i)})),n},n.unary=function(e){return vi(e,1)},n.union=Wr,n.unionBy=Kr,n.unionWith=Yr,n.uniq=function(e){return e&&e.length?$n(e):[]},n.uniqBy=function(e,t){return e&&e.length?$n(e,Pa(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:G,e&&e.length?$n(e,G,t):[]},n.unset=function(e,t){return null==e||Bn(e,t)},n.unzip=hi,n.unzipWith=mi,n.update=function(e,t,n){return null==e?e:Vn(e,t,Kn(n))},n.updateWith=function(e,t,n,a){return a="function"==typeof a?a:G,null==e?e:Vn(e,t,Kn(n),a)},n.values=Ji,n.valuesIn=function(e){return null==e?[]:M(e,Yi(e))},n.without=Qr,n.words=es,n.wrap=function(e,t){return jo(Kn(t),e)},n.xor=Jr,n.xorBy=Xr,n.xorWith=Zr,n.zip=eo,n.zipObject=function(e,t){return Gn(e||[],t||[],ft)},n.zipObjectDeep=function(e,t){return Gn(e||[],t||[],Mn)},n.zipWith=to,n.entries=Ko,n.entriesIn=Yo,n.extend=Ro,n.extendWith=Po,is(n,n),n.add=ml,n.attempt=il,n.camelCase=Qo,n.capitalize=Xi,n.ceil=fl,n.clamp=function(e,t,n){return n===G&&(n=t,t=G),n!==G&&(n=(n=zi(n))==n?n:0),t!==G&&(t=(t=zi(t))==t?t:0),xt(zi(e),t,n)},n.clone=function(e){return _t(e,4)},n.cloneDeep=function(e){return _t(e,5)},n.cloneDeepWith=function(e,t){return _t(e,5,t="function"==typeof t?t:G)},n.cloneWith=function(e,t){return _t(e,4,t="function"==typeof t?t:G)},n.conformsTo=function(e,t){return null==t||Ct(e,t,Ki(t))},n.deburr=Zi,n.defaultTo=function(e,t){return null==e||e!=e?t:e},n.divide=bl,n.endsWith=function(e,t,n){e=qi(e),t=Un(t);var a=e.length,i=n=n===G?a:xt(Bi(n),0,a);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=wi,n.escape=function(e){return(e=qi(e))&&Ne.test(e)?e.replace(De,pn):e},n.escapeRegExp=function(e){return(e=qi(e))&&Ve.test(e)?e.replace(Be,"\\$&"):e},n.every=function(e,t,n){var a=Co(e)?c:Tt;return n&&Ha(e,t,n)&&(t=G),a(e,Pa(t,3))},n.find=io,n.findIndex=oi,n.findKey=function(e,t){return y(e,Pa(t,3),Mt)},n.findLast=so,n.findLastIndex=li,n.findLastKey=function(e,t){return y(e,Pa(t,3),Dt)},n.floor=jl,n.forEach=ji,n.forEachRight=yi,n.forIn=function(e,t){return null==e?e:_r(e,Pa(t,3),Yi)},n.forInRight=function(e,t){return null==e?e:Cr(e,Pa(t,3),Yi)},n.forOwn=function(e,t){return e&&Mt(e,Pa(t,3))},n.forOwnRight=function(e,t){return e&&Dt(e,Pa(t,3))},n.get=Gi,n.gt=vo,n.gte=xo,n.has=function(e,t){return null!=e&&$a(e,t,$t)},n.hasIn=Wi,n.head=di,n.identity=ns,n.includes=function(e,t,n,a){e=Ti(e)?e:Ji(e),n=n&&!a?Bi(n):0;var i=e.length;return n<0&&(n=Xs(i+n,0)),Li(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&v(e,t,n)>-1},n.indexOf=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=null==n?0:Bi(n);return i<0&&(i=Xs(a+i,0)),v(e,t,i)},n.inRange=function(e,t,n){return t=$i(t),n===G?(n=t,t=0):n=$i(n),function(e,t,n){return e>=Zs(t,n)&&e<Xs(t,n)}(e=zi(e),t,n)},n.invoke=zo,n.isArguments=_o,n.isArray=Co,n.isArrayBuffer=ko,n.isArrayLike=Ti,n.isArrayLikeObject=Si,n.isBoolean=function(e){return!0===e||!1===e||Ni(e)&&Ft(e)==ae},n.isBuffer=wo,n.isDate=To,n.isElement=function(e){return Ni(e)&&1===e.nodeType&&!Pi(e)},n.isEmpty=function(e){if(null==e)return!0;if(Ti(e)&&(Co(e)||"string"==typeof e||"function"==typeof e.splice||wo(e)||Mo(e)||_o(e)))return!e.length;var t=Ar(e);if(t==le||t==ge)return!e.size;if(Wa(e))return!dn(e).length;for(var n in e)if(_s.call(e,n))return!1;return!0},n.isEqual=function(e,t){return Xt(e,t)},n.isEqualWith=function(e,t,n){var a=(n="function"==typeof n?n:G)?n(e,t):G;return a===G?Xt(e,t,G,n):!!a},n.isError=Ei,n.isFinite=function(e){return"number"==typeof e&&Ys(e)},n.isFunction=Ii,n.isInteger=Mi,n.isLength=Di,n.isMap=So,n.isMatch=function(e,t){return e===t||Zt(e,t,Fa(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:G,Zt(e,t,Fa(t),n)},n.isNaN=function(e){return Ri(e)&&e!=+e},n.isNative=function(e){if(Nr(e))throw new us("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return tn(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=Ri,n.isObject=Ai,n.isObjectLike=Ni,n.isPlainObject=Pi,n.isRegExp=Eo,n.isSafeInteger=function(e){return Mi(e)&&e>=-J&&e<=J},n.isSet=Io,n.isString=Li,n.isSymbol=Fi,n.isTypedArray=Mo,n.isUndefined=function(e){return e===G},n.isWeakMap=function(e){return Ni(e)&&Ar(e)==fe},n.isWeakSet=function(e){return Ni(e)&&"[object WeakSet]"==Ft(e)},n.join=function(e,t){return null==e?"":Qs.call(e,t)},n.kebabCase=Jo,n.last=ui,n.lastIndexOf=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a;return n!==G&&(i=(i=Bi(n))<0?Xs(a+i,0):Zs(i,a-1)),t==t?function(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}(e,t,i):O(e,_,i,!0)},n.lowerCase=Xo,n.lowerFirst=Zo,n.lt=Do,n.lte=Ao,n.max=function(e){return e&&e.length?St(e,ns,Ut):G},n.maxBy=function(e,t){return e&&e.length?St(e,Pa(t,2),Ut):G},n.mean=function(e){return C(e,ns)},n.meanBy=function(e,t){return C(e,Pa(t,2))},n.min=function(e){return e&&e.length?St(e,ns,fn):G},n.minBy=function(e,t){return e&&e.length?St(e,Pa(t,2),fn):G},n.stubArray=os,n.stubFalse=ls,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=yl,n.nth=function(e,t){return e&&e.length?vn(e,Bi(t)):G},n.noConflict=function(){return Jt._===this&&(Jt._=Ss),this},n.noop=ss,n.now=po,n.pad=function(e,t,n){e=qi(e);var a=(t=Bi(t))?z(e):0;if(!t||a>=t)return e;var i=(t-a)/2;return ya(Gs(i),n)+e+ya(qs(i),n)},n.padEnd=function(e,t,n){e=qi(e);var a=(t=Bi(t))?z(e):0;return t&&a<t?e+ya(t-a,n):e},n.padStart=function(e,t,n){e=qi(e);var a=(t=Bi(t))?z(e):0;return t&&a<t?ya(t-a,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),tr(qi(e).replace(He,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Ha(e,t,n)&&(t=n=G),n===G&&("boolean"==typeof t?(n=t,t=G):"boolean"==typeof e&&(n=e,e=G)),e===G&&t===G?(e=0,t=1):(e=$i(e),t===G?(t=e,e=0):t=$i(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var i=nr();return Zs(e+i*(t-e+Wt("1e-"+((i+"").length-1))),t)}return wn(e,t)},n.reduce=function(e,t,n){var a=Co(e)?m:T,i=arguments.length<3;return a(e,Pa(t,4),n,i,vr)},n.reduceRight=function(e,t,n){var a=Co(e)?f:T,i=arguments.length<3;return a(e,Pa(t,4),n,i,xr)},n.repeat=function(e,t,n){return t=(n?Ha(e,t,n):t===G)?1:Bi(t),Tn(qi(e),t)},n.replace=function(){var e=arguments,t=qi(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var a=-1,i=(t=Yn(t,e)).length;for(i||(i=1,e=G);++a<i;){var s=null==e?G:e[ai(t[a])];s===G&&(a=i,s=n),e=Ii(s)?s.call(e):s}return e},n.round=Ol,n.runInContext=e,n.sample=function(e){return(Co(e)?pt:En)(e)},n.size=function(e){if(null==e)return 0;if(Ti(e))return Li(e)?z(e):e.length;var t=Ar(e);return t==le||t==ge?e.size:dn(e).length},n.snakeCase=el,n.some=function(e,t,n){var a=Co(e)?b:Nn;return n&&Ha(e,t,n)&&(t=G),a(e,Pa(t,3))},n.sortedIndex=function(e,t){return Rn(e,t)},n.sortedIndexBy=function(e,t,n){return Pn(e,t,Pa(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var a=Rn(e,t);if(a<n&&wi(e[a],t))return a}return-1},n.sortedLastIndex=function(e,t){return Rn(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return Pn(e,t,Pa(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Rn(e,t,!0)-1;if(wi(e[n],t))return n}return-1},n.startCase=tl,n.startsWith=function(e,t,n){return e=qi(e),n=null==n?0:xt(Bi(n),0,e.length),t=Un(t),e.slice(n,n+t.length)==t},n.subtract=vl,n.sum=function(e){return e&&e.length?S(e,ns):0},n.sumBy=function(e,t){return e&&e.length?S(e,Pa(t,2)):0},n.template=function(e,t,a){var i=n.templateSettings;a&&Ha(e,t,a)&&(t=G),e=qi(e),t=Po({},t,i,Ta);var s,r,o=Po({},t.imports,i.imports,Ta),l=Ki(o),c=M(o,l),d=0,u=t.interpolate||st,p="__p += '",g=ms((t.escape||st).source+"|"+u.source+"|"+(u===Le?Je:st).source+"|"+(t.evaluate||st).source+"|$","g"),h="//# sourceURL="+(_s.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zt+"]")+"\n";e.replace(g,(function(t,n,a,i,o,l){return a||(a=i),p+=e.slice(d,l).replace(rt,P),n&&(s=!0,p+="' +\n__e("+n+") +\n'"),o&&(r=!0,p+="';\n"+o+";\n__p += '"),a&&(p+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),d=l+t.length,t})),p+="';\n";var m=_s.call(t,"variable")&&t.variable;m||(p="with (obj) {\n"+p+"\n}\n"),p=(r?p.replace(Se,""):p).replace(Ee,"$1").replace(Ie,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var f=il((function(){return ps(l,h+"return "+p).apply(G,c)}));if(f.source=p,Ei(f))throw f;return f},n.times=function(e,t){if((e=Bi(e))<1||e>J)return[];var n=Z,a=Zs(e,Z);t=Pa(t),e-=Z;for(var i=E(a,t);++n<e;)t(n);return i},n.toFinite=$i,n.toInteger=Bi,n.toLength=Vi,n.toLower=function(e){return qi(e).toLowerCase()},n.toNumber=zi,n.toSafeInteger=function(e){return e?xt(Bi(e),-J,J):0===e?e:0},n.toString=qi,n.toUpper=function(e){return qi(e).toUpperCase()},n.trim=function(e,t,n){if((e=qi(e))&&(n||t===G))return e.replace(ze,"");if(!e||!(t=Un(t)))return e;var a=H(e),i=H(t);return Qn(a,A(a,i),N(a,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=qi(e))&&(n||t===G))return e.replace(qe,"");if(!e||!(t=Un(t)))return e;var a=H(e);return Qn(a,0,N(a,H(t))+1).join("")},n.trimStart=function(e,t,n){if((e=qi(e))&&(n||t===G))return e.replace(He,"");if(!e||!(t=Un(t)))return e;var a=H(e);return Qn(a,A(a,H(t))).join("")},n.truncate=function(e,t){var n=30,a="...";if(Ai(t)){var i="separator"in t?t.separator:i;n="length"in t?Bi(t.length):n,a="omission"in t?Un(t.omission):a}var s=(e=qi(e)).length;if(L(e)){var r=H(e);s=r.length}if(n>=s)return e;var o=n-z(a);if(o<1)return a;var l=r?Qn(r,0,o).join(""):e.slice(0,o);if(i===G)return l+a;if(r&&(o+=l.length-o),Eo(i)){if(e.slice(o).search(i)){var c,d=l;for(i.global||(i=ms(i.source,qi(Xe.exec(i))+"g")),i.lastIndex=0;c=i.exec(d);)var u=c.index;l=l.slice(0,u===G?o:u)}}else if(e.indexOf(Un(i),o)!=o){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+a},n.unescape=function(e){return(e=qi(e))&&Ae.test(e)?e.replace(Me,gn):e},n.uniqueId=function(e){var t=++Cs;return qi(e)+t},n.upperCase=nl,n.upperFirst=al,n.each=ji,n.eachRight=yi,n.first=di,is(n,function(){var e={};return Mt(n,(function(t,a){_s.call(n.prototype,a)||(e[a]=t)})),e}(),{chain:!1}),n.VERSION="4.17.20",o(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){n[e].placeholder=n})),o(["drop","take"],(function(e,t){w.prototype[e]=function(n){n=n===G?1:Xs(Bi(n),0);var a=this.__filtered__&&!t?new w(this):this.clone();return a.__filtered__?a.__takeCount__=Zs(n,a.__takeCount__):a.__views__.push({size:Zs(n,Z),type:e+(a.__dir__<0?"Right":"")}),a},w.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),o(["filter","map","takeWhile"],(function(e,t){var n=t+1,a=1==n||3==n;w.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Pa(e,3),type:n}),t.__filtered__=t.__filtered__||a,t}})),o(["head","last"],(function(e,t){var n="take"+(t?"Right":"");w.prototype[e]=function(){return this[n](1).value()[0]}})),o(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");w.prototype[e]=function(){return this.__filtered__?new w(this):this[n](1)}})),w.prototype.compact=function(){return this.filter(ns)},w.prototype.find=function(e){return this.filter(e).head()},w.prototype.findLast=function(e){return this.reverse().find(e)},w.prototype.invokeMap=Sn((function(e,t){return"function"==typeof e?new w(this):this.map((function(n){return Yt(n,e,t)}))})),w.prototype.reject=function(e){return this.filter(ki(Pa(e)))},w.prototype.slice=function(e,t){e=Bi(e);var n=this;return n.__filtered__&&(e>0||t<0)?new w(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==G&&(n=(t=Bi(t))<0?n.dropRight(-t):n.take(t-e)),n)},w.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},w.prototype.toArray=function(){return this.take(Z)},Mt(w.prototype,(function(e,t){var a=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),r=n[s?"take"+("last"==t?"Right":""):t],o=s||/^find/.test(t);r&&(n.prototype[t]=function(){var t=this.__wrapped__,l=s?[1]:arguments,c=t instanceof w,d=l[0],u=c||Co(t),p=function(e){var t=r.apply(n,h([e],l));return s&&g?t[0]:t};u&&a&&"function"==typeof d&&1!=d.length&&(c=u=!1);var g=this.__chain__,m=!!this.__actions__.length,f=o&&!g,b=c&&!m;if(!o&&u){t=b?t:new w(this);var j=e.apply(t,l);return j.__actions__.push({func:bi,args:[p],thisArg:G}),new i(j,g)}return f&&b?e.apply(this,l):(j=this.thru(p),f?s?j.value()[0]:j.value():j)})})),o(["pop","push","shift","sort","splice","unshift"],(function(e){var t=js[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Co(n)?n:[],e)}return this[a]((function(n){return t.apply(Co(n)?n:[],e)}))}})),Mt(w.prototype,(function(e,t){var a=n[t];if(a){var i=a.name+"";_s.call(ur,i)||(ur[i]=[]),ur[i].push({name:t,func:a})}})),ur[ma(G,2).name]=[{name:"wrapper",func:G}],w.prototype.clone=function(){var e=new w(this.__wrapped__);return e.__actions__=aa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=aa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=aa(this.__views__),e},w.prototype.reverse=function(){if(this.__filtered__){var e=new w(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},w.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Co(e),a=t<0,i=n?e.length:0,s=function(e,t,n){for(var a=-1,i=n.length;++a<i;){var s=n[a],r=s.size;switch(s.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=Zs(t,e+r);break;case"takeRight":e=Xs(e,t-r)}}return{start:e,end:t}}(0,i,this.__views__),r=s.start,o=s.end,l=o-r,c=a?o:r-1,d=this.__iteratees__,u=d.length,p=0,g=Zs(l,this.__takeCount__);if(!n||!a&&i==l&&g==l)return Hn(e,this.__actions__);var h=[];e:for(;l--&&p<g;){for(var m=-1,f=e[c+=t];++m<u;){var b=d[m],j=b.iteratee,y=b.type,O=j(f);if(2==y)f=O;else if(!O){if(1==y)continue e;break e}}h[p++]=f}return h},n.prototype.at=no,n.prototype.chain=function(){return fi(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===G&&(this.__values__=Ui(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?G:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof a;){var i=ri(n);i.__index__=0,i.__values__=G,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof w){var t=e;return this.__actions__.length&&(t=new w(this)),(t=t.reverse()).__actions__.push({func:bi,args:[gi],thisArg:G}),new i(t,this.__chain__)}return this.thru(gi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return Hn(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,Us&&(n.prototype[Us]=function(){return this}),n}();Jt._=hn,void 0===(i=function(){return hn}.call(t,n,t,a))||(a.exports=i)}).call(this)}).call(this,n("yLpj"),n("YuTi")(e))},idmN:function(e,t,n){var a=n("ZWtO"),i=n("FZoo"),s=n("4uTw");e.exports=function(e,t,n){for(var r=-1,o=t.length,l={};++r<o;){var c=t[r],d=a(e,c);n(d,c)&&i(l,s(c,e),d)}return l}},ig3W:function(e,t){e.exports={}},ii4M:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-announcements/2916"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"1 announcement for 1 group channel with 1 URL"))),Object(a.a)("p",null,"Regardless of how many users are in a group channel (as long as it is under 10,000 users), an announcement message sent out to a group channel with the same URL will count as one announcement message.")),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("hr",null),Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all announcement messages sent out across all existing applications within the organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nAnnouncement message count for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 3\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 5\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 2")),Object(a.a)("p",null,"Then, organization’s ",Object(a.a)("strong",{parentName:"p"},"announcements")," usage for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"3 + 5 + 2 = ",Object(a.a)("strong",{parentName:"p"},"10 announcement messages")))))}l.isMDXComponent=!0},ixoo:function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},"j+1e":function(e,t,n){var a=n("hypo"),i=n("UMY1"),s=Object.prototype.hasOwnProperty,r=i((function(e,t,n){s.call(e,n)?++e[n]:a(e,n,1)}));e.exports=r},jjfR:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-chatbot-interface/2963"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"The number of translated characters, including whitespace and symbols."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"I love birds!"),"\n10 alphabets + 2 whitespace + 1 symbol = ",Object(a.a)("strong",{parentName:"p"},"13 characters")))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all applications’ usages within your organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nTranslated characters for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 13 characters\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 25 characters\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 22 characters")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"organization usage")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"13 + 25 + 22 = ",Object(a.a)("strong",{parentName:"p"},"60 characters")))))}l.isMDXComponent=!0},jo6Y:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}},jpHx:function(e,t,n){var a={"./announcement_sent_user_count.md":"ii4M","./auto_thumbnail.md":"sAEG","./auto_translation.md":"jjfR","./avg_file_storage.md":"SuOv","./bot_interface.md":"ETJ2","./image_moderation.md":"XfZS","./mau.md":"o3Xl","./message_search_index.md":"N1zF","./message_search_query.md":"nS86","./pc.md":"K6oM","./upload_traffic.md":"N4QS"};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="jpHx"},kKuS:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("3bBZ");var a=n("dDsW"),i=n("vOnD"),s=n("JsuU"),r=n("UWC4"),o=n("nKUr");const l=i.default.div.withConfig({displayName:"FeatureDocument__Wrapper",componentId:"sc-1mphryq-0"})(["background:",";border-radius:4px;padding:24px;margin-top:24px;"],Object(s.cssVariables)("neutral-1")),c=i.default.div.withConfig({displayName:"FeatureDocument__Title",componentId:"sc-1mphryq-1"})(["font-size:16px;font-weight:500;line-height:20px;letter-spacing:-0.15px;color:",";margin-bottom:8px;"],Object(s.cssVariables)("neutral-10")),d=i.default.div.withConfig({displayName:"FeatureDocument__Description",componentId:"sc-1mphryq-2"})(["font-size:14px;line-height:20px;letter-spacing:-0.1px;color:",";margin-bottom:24px;"],Object(s.cssVariables)("neutral-7")),u=i.default.ul.withConfig({displayName:"FeatureDocument__DocumentLinks",componentId:"sc-1mphryq-3"})(["list-style:none;display:flex;align-items:center;li{svg{margin-left:4px;}& + li{margin-left:24px;}font-size:14px;}"]),p={doc:"Help center",ios:"iOS SDK",android:"Android SDK",javascript:"JavaScript SDK",platformAPI:"Platform API"},g=({feature:e})=>{const t=Object(a.a)(),n=(i=e,Object.prototype.hasOwnProperty.call(r.fb,i)?Object.entries(r.fb[i]).map(([e,t])=>({label:p[e],url:t})):[]);var i;return 0===n.length?null:Object(o.jsxs)(l,{children:[Object(o.jsx)(c,{children:t.formatMessage({id:"common.featureDocument.title"})}),Object(o.jsx)(d,{children:t.formatMessage({id:"common.featureDocument.description"})}),Object(o.jsx)(u,{children:n.map(({label:e,url:t})=>Object(o.jsx)("li",{children:Object(o.jsxs)(s.Link,{href:t,target:"_blank",children:[e," ",Object(o.jsx)(s.Icon,{size:16,icon:"open-in-new"})]})},`documentLinks_${e}`))})]})}},kUGv:function(e,t,n){var a=n("7whZ").document;e.exports=a&&a.documentElement},"kVK+":function(e,t){t.read=function(e,t,n,a,i){var s,r,o=8*i-a-1,l=(1<<o)-1,c=l>>1,d=-7,u=n?i-1:0,p=n?-1:1,g=e[t+u];for(u+=p,s=g&(1<<-d)-1,g>>=-d,d+=o;d>0;s=256*s+e[t+u],u+=p,d-=8);for(r=s&(1<<-d)-1,s>>=-d,d+=a;d>0;r=256*r+e[t+u],u+=p,d-=8);if(0===s)s=1-c;else{if(s===l)return r?NaN:1/0*(g?-1:1);r+=Math.pow(2,a),s-=c}return(g?-1:1)*r*Math.pow(2,s-a)},t.write=function(e,t,n,a,i,s){var r,o,l,c=8*s-i-1,d=(1<<c)-1,u=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=a?0:s-1,h=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(r++,l/=2),r+u>=d?(o=0,r=d):r+u>=1?(o=(t*l-1)*Math.pow(2,i),r+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),r=0));i>=8;e[n+g]=255&o,g+=h,o/=256,i-=8);for(r=r<<i|o,c+=i;c>0;e[n+g]=255&r,g+=h,r/=256,c-=8);e[n+g-h]|=128*m}},kvAF:function(e,t,n){var a=n("GhSp").f,i=n("nA4W"),s=n("zBWt")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&a(e,s,{configurable:!0,value:t})}},l0Kd:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},loZk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var a=String(t),i=n||{},s=a.match(e.matchPattern);if(!s)return null;var r=s[0],o=a.match(e.parsePattern);if(!o)return null;var l=e.valueCallback?e.valueCallback(o[0]):o[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:a.slice(r.length)}}},e.exports=t.default},mHY4:function(e,t,n){var a=n("A9a0"),i=n("l0Kd");e.exports=Object.keys||function(e){return a(e,i)}},mRg0:function(e,t,n){"use strict";t.__esModule=!0;var a=r(n("s3Ml")),i=r(n("AyUB")),s=r(n("EJiy"));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},"mVx/":function(e,t,n){var a=n("XKAG")(n("JELi"));e.exports=a},mby5:function(e,t,n){"use strict";var a=n("vOnD"),i=n("JsuU"),s=n("UWC4");const r=Object(a.default)(i.Avatar).attrs({type:s.I.Bot}).withConfig({displayName:"DeskBotAvatar",componentId:"sc-18kvjjr-0"})(["margin-left:0 !important;"]);t.a=r},n7vu:function(e,t,n){var a=n("TYje");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},nA4W:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},nAx8:function(e,t,n){var a=n("FgkJ");e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,i){return e.call(t,n,a,i)}}return function(){return e.apply(t,arguments)}}},nRFE:function(e,t,n){var a=n("/F7N"),i=Math.max,s=Math.min;e.exports=function(e,t){return(e=a(e))<0?i(e+t,0):s(e,t)}},nS86:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-message-search/2964"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,'The number of times search queries of strings are made.\nEmpty string (" ") API calls also count as one search query.'),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"The following is an example of usage calculation for message search query at an application level."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},'"I love birds!" = 1 search query\n" " = 1 search query\n',Object(a.a)("strong",{parentName:"p"},"Total = 2 search queries")))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all search queries made across all existing applications within the organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nMessage search query count for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 100 search queries\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 105 search queries\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 25 search queries")),Object(a.a)("p",null,"Then, organization’s ",Object(a.a)("strong",{parentName:"p"},"message search query")," count for this month is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"100 + 105 + 25 = ",Object(a.a)("strong",{parentName:"p"},"230 search queries")))))}l.isMDXComponent=!0},o3Xl:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-monthly-active-users/2861"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"The highest count of active users connected to Sendbird server in a single day of a given month.\nDifferent devices with the same user ID are counted as 1 MAU."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let's say there are a total of ",Object(a.a)("strong",{parentName:"p"},"three")," users in your application that connected to Sendbird server this month."),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"User 1:")," connected on January 1, 5, 15.\n",Object(a.a)("strong",{parentName:"p"},"User 2:")," connected on January 5, 15.\n",Object(a.a)("strong",{parentName:"p"},"User 3:")," connected on January 1, 15.")),Object(a.a)("p",null,"Then, the count of ",Object(a.a)("strong",{parentName:"p"},"active users")," for each day is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"January 1:")," 2 users (User1,3)\n",Object(a.a)("strong",{parentName:"p"},"January 5:")," 2 users (User1,2)\n",Object(a.a)("strong",{parentName:"p"},"January 15:")," 3 users (User1,2,3)")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"Application MAU")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"3 users")," because January 15th has the highest number of active users for this month."))),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all applications’ MAU usages within your organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let's say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nMAU for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 3\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 5\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 2")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"Organization MAU")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"3+5+2 = ",Object(a.a)("strong",{parentName:"p"},"10 users")))))}l.isMDXComponent=!0},oMRN:function(e,t){e.exports=function(e,t,n,a){for(var i=-1,s=null==e?0:e.length;++i<s;){var r=e[i];t(a,r,n(r),e)}return a}},p532:function(e,t,n){"use strict";var a=n("I+eb"),i=n("xDBR"),s=n("/qmn"),r=n("0Dky"),o=n("0GbY"),l=n("SEBh"),c=n("zfnd"),d=n("busE");a({target:"Promise",proto:!0,real:!0,forced:!!s&&r((function(){s.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,o("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof s||s.prototype.finally||d(s.prototype,"finally",o("Promise").prototype.finally)},pol2:function(e,t,n){"use strict";e.exports=n("yiba").PhoneNumber,Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=e.exports},psfB:function(e,t,n){"use strict";
/**
* @license nested-property https://github.com/cosmosio/nested-property
*
* The MIT License (MIT)
*
* Copyright (c) 2014-2015 Olivier Scherrer <pode.fr@gmail.com>
*/e.exports={set:function(e,t,n){if(e&&"object"==typeof e){if("string"==typeof t&&""!==t){var a=t.split(".");return a.reduce((function(e,t,i){const s=Number.isInteger(Number(a[i+1]));return e[t]=e[t]||(s?[]:{}),a.length==i+1&&(e[t]=n),e[t]}),e)}return"number"==typeof t?(e[t]=n,e[t]):e}return e},get:function(e,t){return e&&"object"==typeof e?"string"==typeof t&&""!==t?t.split(".").reduce((function(e,t){return e&&e[t]}),e):"number"==typeof t?e[t]:e:e},has:function(e,t,n){return n=n||{},!(!e||"object"!=typeof e)&&("string"==typeof t&&""!==t?t.split(".").reduce((function(e,t,a,i){return a==i.length-1?n.own?!(!e||!e.hasOwnProperty(t)):!(null===e||"object"!=typeof e||!(t in e)):e&&e[t]}),e):"number"==typeof t&&t in e)},hasOwn:function(e,t,n){return this.has(e,t,n||{own:!0})},isIn:function(e,t,n,a){if(a=a||{},e&&"object"==typeof e){if("string"==typeof t&&""!==t){var i,s=t.split("."),r=!1;return i=!!s.reduce((function(e,t){return r=r||e===n||!!e&&e[t]===n,e&&e[t]}),e),a.validPath?r&&i:r}return!1}return!1}}},q92V:function(e,t,n){var a=n("dunj"),i=n("V9xz"),s=n("zZ0H");e.exports=function(e){return e&&e.length?a(e,s,i):void 0}},qPyV:function(e,t,n){var a=n("ut/Y"),i=n("LGYb");e.exports=function(e,t){return e&&e.length?i(e,a(t,2)):[]}},qxEb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i;n=n||{},i="string"==typeof a[e]?a[e]:1===t?a[e].one:a[e].other.replace("{{count}}",t);if(n.addSuffix)return n.comparison>0?"in "+i:i+" ago";return i};var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};e.exports=t.default},rwOc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var a,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,r=i.width?String(i.width):s;a=e.formattingValues[r]||e.formattingValues[s]}else{var o=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;a=e.values[l]||e.values[o]}return a[e.argumentCallback?e.argumentCallback(t):t]}},e.exports=t.default},s2er:function(e,t,n){var a=n("VSTI"),i=n("7whZ"),s=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:n("5ETA")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},s3Ml:function(e,t,n){e.exports={default:n("QRdY"),__esModule:!0}},sAEG:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"default",(function(){return l}));n("q1tI");var a=n("7ljp"),i=n("5rLa");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const r={communityUrl:"https://community.sendbird.com/t/usage-calculation-auto-thumbnail-generator/2913"},o={frontMatter:r};function l({components:e,...t}){return Object(a.a)("wrapper",s({},o,t,{components:e,mdxType:"MDXLayout"}),Object(a.a)(i.a,{id:"application",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Application?"),Object(a.a)("p",null,"Each thumbnail created for a file message is counted as one usage.")),Object(a.a)(i.a,{id:"organization",mdxType:"OrderComponent"},Object(a.a)("h2",null,"Usage calculation per Organization?"),Object(a.a)("p",null,"The sum of all applications’ usages within your organization."),Object(a.a)("h4",null,"[Example]"),Object(a.a)("p",null,"Let’s say there are a total of ",Object(a.a)("strong",{parentName:"p"},"3 applications")," within your organization.\nAuto-generated image count for each application is as shown below:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},Object(a.a)("strong",{parentName:"p"},"App A:")," 3\n",Object(a.a)("strong",{parentName:"p"},"App B:")," 5\n",Object(a.a)("strong",{parentName:"p"},"App C:")," 2")),Object(a.a)("p",null,"Then, ",Object(a.a)("strong",{parentName:"p"},"organization usage")," is:"),Object(a.a)("blockquote",null,Object(a.a)("p",{parentName:"blockquote"},"3+5+2 = ",Object(a.a)("strong",{parentName:"p"},"10 Auto-generated images")))))}l.isMDXComponent=!0},sCib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var a=String(t),i=n||{},s=i.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=a.match(r);if(!o)return null;var l,c=o[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(d,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=i.valueCallback?i.valueCallback(l):l,rest:a.slice(c.length)}}},e.exports=t.default},szUW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("HyFC"))&&a.__esModule?a:{default:a};var s={date:(0,i.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};t.default=s,e.exports=t.default},t6IN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("loZk")),i=s(n("sCib"));function s(e){return e&&e.__esModule?e:{default:e}}var r={ordinalNumber:(0,a.default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,i.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,i.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};t.default=r,e.exports=t.default},tGOr:function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"k",(function(){return K})),n.d(t,"j",(function(){return X})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return k})),n.d(t,"b",(function(){return T})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return ge})),n.d(t,"l",(function(){return be}));n("3bBZ");var a=n("q1tI"),i=n.n(a),s=n("vOnD"),r=n("MO+k"),o=n.n(r),l=n("JsuU"),c=n("Y+p1"),d=n.n(c),u=n("X8yK"),p=n("dDsW"),g=n("hyLW"),h=n.n(g),m=n("nKUr");const f=s.default.div.withConfig({displayName:"stars__StyledStars",componentId:"sc-1uarwzq-0"})(["display:flex;align-items:center;.stars{&__wrapper{position:relative;}&__value{"," margin-left:8px;color:",";font-weight:500;}}"],l.Subtitles["subtitle-01"],Object(l.cssVariables)("neutral-10")),b=s.default.div.withConfig({displayName:"stars__StarBaseArea",componentId:"sc-1uarwzq-1"})([""]),j=s.default.div.withConfig({displayName:"stars__StarScoredArea",componentId:"sc-1uarwzq-2"})(["position:absolute;overflow:hidden;white-space:nowrap;z-index:1;"]),y=({current:e,max:t=5,size:n=20,showValue:a=!1,toFixed:i=2})=>{const s=Math.ceil(e)||0;return e>t?null:Object(m.jsxs)(f,{children:[Object(m.jsxs)("div",{className:"stars__wrapper",children:[Object(m.jsx)(j,{style:{width:`${e/t*100}%`},children:Array(s).fill(0).map((e,t)=>Object(m.jsx)(l.Icon,{icon:"star-filled",size:n,color:Object(l.cssVariables)("yellow-5")},`scored_star_${t}`))}),Object(m.jsx)(b,{children:Array(t).fill(0).map((e,t)=>Object(m.jsx)(l.Icon,{icon:"star-filled",size:n,color:Object(l.cssVariables)("neutral-3")},`base_star_${t}`))})]}),a&&Object(m.jsx)("div",{className:"stars__value",children:e.toFixed(i)})]})},O=s.default.div.withConfig({displayName:"components__ChartTitle",componentId:"ev1go7-0"})(["font-size:16px;line-height:20px;font-weight:600;letter-spacing:-0.15px;color:",";margin-bottom:12px;display:flex;align-items:center;"],Object(l.cssVariables)("neutral-10")),v=s.default.div.withConfig({displayName:"components__StyledChartValue",componentId:"ev1go7-1"})(["display:flex;align-items:center;padding-left:16px;position:relative;height:24px;&:before{position:absolute;content:'';top:8px;right:0;left:0;bottom:0;width:8px;height:8px;border-radius:4px;background:",";}.chartValue{&__label{font-size:14px;line-height:20px;margin-right:4px;letter-spacing:-0.1px;color:",";}&__value{"," color:",";}}"],({color:e})=>e,Object(l.cssVariables)("neutral-7"),l.Subtitles["subtitle-03"],Object(l.cssVariables)("neutral-10")),x=s.default.div.withConfig({displayName:"components__ChartValueDiff",componentId:"ev1go7-2"})(["display:flex;align-items:center;"," font-size:14px;font-weight:500;letter-spacing:-0.1px;line-height:20px;margin-left:4px;svg{margin-right:4px;}"],({isUp:e})=>e?Object(s.css)(["color:",";svg{fill:",";}"],Object(l.cssVariables)("blue-5"),Object(l.cssVariables)("blue-5")):Object(s.css)(["color:",";svg{fill:",";}"],Object(l.cssVariables)("red-5"),Object(l.cssVariables)("red-5"))),_=({label:e="",value:t,format:n="",color:a=Object(l.cssVariables)("purple-7"),previousValue:i,tooltipMessage:r,testId:o})=>Object(m.jsxs)(v,{color:a,children:[e&&Object(m.jsx)("div",{className:"chartValue__label",children:e}),t&&Object(m.jsx)("div",{className:"chartValue__value","data-test-id":`${o}__value`,children:"string"==typeof n?h()(t).format(n):n(t)}),(()=>{if(t&&i){const o=(e=i,a=t,parseInt(Math.abs((a-e)/e*100).toFixed(1),10));if(o>0){const e=i<=t,a=e?"arrow-up":"arrow-down",c=t-i,d="string"==typeof n?h()(c).format(n):n(c),u=Object(m.jsxs)(x,{isUp:e,children:[Object(m.jsx)(l.Icon,{icon:a,size:16}),d," (",Math.abs(o),"%)"]});return r?Object(m.jsx)(l.Tooltip,{content:r,placement:"bottom-start",tooltipContentStyle:Object(s.css)(["display:flex;align-items:center;"]),children:u}):u}}var e,a;return""})()]}),C=s.default.div.withConfig({displayName:"components__StyledChartValueTotal",componentId:"ev1go7-3"})(["position:absolute;top:-14px;right:0;display:flex;flex-direction:column;justify-content:center;align-items:flex-end;.cvt{&__header{font-size:12px;line-height:16px;color:",";}&__value{font-size:14px;line-height:20px;font-weight:500;letter-spacing:-0.1px;color:",";}}"],Object(l.cssVariables)("neutral-7"),Object(l.cssVariables)("neutral-10")),k=({value:e})=>{const t=Object(p.a)();return Object(m.jsxs)(C,{children:[Object(m.jsx)("div",{className:"cvt__header",children:t.formatMessage({id:"desk.statistics.overview.messageCount.lbl.total"})}),Object(m.jsx)("div",{className:"cvt__value",children:h()(e).format("0,")})]})},w=s.default.div.withConfig({displayName:"components__StyledChartCSATValue",componentId:"ev1go7-4"})(["display:flex;align-items:center;.chartValue{&__value{margin-left:8px;"," color:",";}}"],l.Subtitles["subtitle-03"],Object(l.cssVariables)("neutral-10")),T=({value:e})=>Object(m.jsxs)(w,{children:[Object(m.jsx)(y,{current:e}),Object(m.jsx)("div",{className:"chartValue__value",children:e>0?e.toFixed(1):""})]}),S=s.default.div.withConfig({displayName:"components__ChartValues",componentId:"ev1go7-5"})(["display:flex;align-items:center;margin-bottom:24px;position:relative;"," + ","{margin-left:24px;}"],v,v),E=s.default.div.withConfig({displayName:"components__ChartWrapper",componentId:"ev1go7-6"})(["padding:20px 12px;margin-top:15px;"]),I=s.default.div.withConfig({displayName:"components__StyledTooltip",componentId:"ev1go7-7"})(["position:absolute;z-index:999;min-width:160px;padding:12px 16px;border-radius:4px;background-color:white;"," opacity:0;pointer-events:none;transition:0.2s ",";transition-property:top,left;"],l.elevation.popover,l.transitionDefault),M=s.default.div.withConfig({displayName:"components__TooltipLabel",componentId:"ev1go7-8"})(["font-size:12px;line-height:16px;color:",";white-space:nowrap;display:flex;align-items:center;&:before{content:'';margin-right:8px;width:8px;height:8px;border-radius:4px;background:",";}"],Object(l.cssVariables)("neutral-7"),({$color:e})=>e||Object(l.cssVariables)("purple-7")),D=s.default.div.withConfig({displayName:"components__TooltipValue",componentId:"ev1go7-9"})([""," height:28px;padding-left:16px;"],l.Headings["heading-04"]),A=s.default.div.withConfig({displayName:"components__TooltipHeader",componentId:"ev1go7-10"})([""," margin-bottom:16px;"," white-space:nowrap;"],l.Subtitles["subtitle-01"],({init:e})=>e&&"opacity: 0;"),N=s.default.div.withConfig({displayName:"components__TooltipPoint",componentId:"ev1go7-11"})(["& + &{margin-top:12px;}"]),R=({canvas:e,tooltip:t,datasets:n,xLabelFormatter:i,valueFormatter:s,colors:r})=>{const o=Object(a.useRef)(null);if(t&&e){var l;const a=e.getBoundingClientRect();let c=160,d=86;return o.current&&(c=o.current.getBoundingClientRect().width,d=o.current.getBoundingClientRect().height),Object(m.jsxs)(I,{ref:o,style:{opacity:t.opacity,top:t.caretY-(d+48)<0?48:t.caretY-(d+48),left:t.caretX>a.width/2?t.caretX-c-10:t.caretX+10},children:[t.dataPoints&&t.dataPoints.length>0?Object(m.jsx)(A,{children:null!=(l=null==i?void 0:i(t.dataPoints[0]))?l:t.dataPoints[0].label}):Object(m.jsx)(A,{init:!0}),t&&t.dataPoints?t.dataPoints.map(e=>{var t;const{value:a,datasetIndex:i}=e;var o;return null==i?Object(m.jsx)(N,{children:Object(m.jsx)(D,{children:null!=(o=null==s?void 0:s(e))?o:h()(a).format({thousandSeparated:!0,mantissa:0})})},i):Object(m.jsxs)(N,{children:[Object(m.jsx)(M,{$color:r[i],children:n[i].label}),Object(m.jsx)(D,{children:null!=(t=null==s?void 0:s(e))?t:h()(a).format({thousandSeparated:!0,mantissa:0})})]},i)}):""]})}return null},P=({canvas:e,chart:t,tooltip:n,tooltipItems:i,labels:s,values:r,hiddenLegends:o})=>{const l=Object(a.useRef)(null);if(n&&n.dataPoints&&e&&t){const t=e.getBoundingClientRect();let a=160,c=86;l.current&&(a=l.current.getBoundingClientRect().width,c=l.current.getBoundingClientRect().height);const d=n.dataPoints[0].index,u=r[d];return Object(m.jsxs)(I,{ref:l,style:{position:"absolute",opacity:n.opacity,top:n.caretY-(c+48)<0?48:n.caretY-(c+48),left:n.caretX<t.width/2?n.caretX-a:n.caretX},children:[Object(m.jsx)(A,{children:s[d]}),i&&i.map(({label:e,valueFormatter:t,color:n},a)=>Object(m.jsxs)(N,{children:[Object(m.jsx)(M,{$color:n,children:e}),Object(m.jsx)(D,{children:t?t(u,r,o):u})]},a))]})}return null},L=s.default.div.withConfig({displayName:"barChart__BarChartWrapper",componentId:"eq2qom-0"})(["position:relative;padding:",";flex:1;canvas{max-width:100%;}"],e=>e.noPadding?"0":"24px"),F=i.a.memo(({height:e=0,colors:t=u.a,noPadding:n=!1,showLegend:i=!1,tooltipXLabelFormatter:s,tooltipValueFormatter:r,labels:c,datasets:d=[],options:p={}})=>{const g=Object(a.useRef)(),h=Object(a.useRef)(null),[f,b]=Object(a.useState)(null),j={},y=e=>e.map((e,n)=>{const a=Object.assign({},j,n>=0&&d.length<=t.length?{...e,backgroundColor:t[n],backgroundHoverColor:u.b[n]}:e);return Object.assign({},a,{label:e.label,data:e.data})});return Object(a.useEffect)(()=>((()=>{const e={hover:{mode:"index",intersect:!1,animationDuration:0},maintainAspectRatio:!1,tooltips:{enabled:!1,custom:e=>{b(e||null)},mode:"index",intersect:!1,position:"average"},legend:{display:i,position:"top",onClick:(e,t)=>{const n=t,{index:a}=n;if(g.current){const e=g.current.getDatasetMeta(a);e.hidden=!(e.hidden||!g.current.data.datasets)&&!g.current.data.datasets[a].hidden,g.current.update()}},onHover:()=>{g.current&&g.current.canvas&&(g.current.canvas.style.cursor="pointer")},labels:{usePointStyle:!0,fontFamily:l.typeface.system,fontColor:Object(l.cssColors)("neutral-7"),fontSize:14,padding:20,boxWidth:8}},elements:{point:{radius:0,hoverRadius:4.5,hoverBorderWidth:3}}},t=h.current&&h.current.getContext("2d");if(t){const n=new o.a(t,{type:"bar",data:{labels:c,datasets:y(d)},options:o.a.helpers.configMerge(e,p),plugins:[{beforeDraw:({ctx:e,chartArea:t})=>{e&&(e.fillStyle="transparent",e.fillRect(t.left,t.top,t.right-t.left,t.bottom-t.top))}}]});g.current=n}})(),()=>{g.current&&g.current.destroy()}),[]),Object(a.useEffect)(()=>{g.current&&(g.current.data.datasets=y(d),g.current.update())},[d]),Object(m.jsxs)(L,{noPadding:n,children:[Object(m.jsx)("canvas",{ref:h,height:e||"80"}),f&&Object(m.jsx)(R,{canvas:h.current,tooltip:f,datasets:d,xLabelFormatter:s,valueFormatter:r,colors:t})]})},(e,t)=>d()(e,t));n("E9XD");var U=n("q92V"),$=n.n(U),B=n("ufqH"),V=n("ponP"),z=n("UWC4");const H={hover:{mode:"index",intersect:!1,animationDuration:0},maintainAspectRatio:!1,tooltips:{enabled:!1,mode:"index",intersect:!1,position:"average"},layout:{padding:{left:0,right:24,top:24,bottom:0}},scales:{xAxes:[{type:"time",time:{unit:"day",tooltipFormat:z.A,displayFormats:{hour:z.F}},gridLines:{display:!1,drawBorder:!1},ticks:{autoSkip:!0,maxTicksLimit:6,maxRotation:0,minRotation:0,fontColor:Object(l.cssColors)("neutral-10"),fontFamily:l.typeface.system,fontSize:11}}],yAxes:[{gridLines:{color:Object(l.cssColors)("neutral-2"),display:!0,drawBorder:!1},type:"linear",ticks:{beginAtZero:!0,maxTicksLimit:6,callback:e=>Number.isInteger(Number(e))?e:null,min:0,fontColor:Object(l.cssColors)("neutral-10"),fontFamily:l.typeface.system,fontSize:11,padding:10}}]},elements:{point:{radius:0,hoverRadius:4.5,hoverBorderWidth:3}},legend:{display:!1}},q=s.default.div.withConfig({displayName:"lineChart__StyledLineChart",componentId:"qiisry-0"})(["position:relative;padding:",";"],e=>e.noPadding?"0":"24px"),G=s.default.div.withConfig({displayName:"lineChart__LineChartWrapper",componentId:"qiisry-1"})(["flex:1;padding:0;canvas{max-width:100%;}"]),W={borderWidth:2,borderCapStyle:"round",pointBorderColor:"#fff",pointHoverBorderColor:"#fff",pointHitRadius:3,lineTension:0};o.a.defaults.LineWithLine=o.a.defaults.line,o.a.controllers.LineWithLine=o.a.controllers.line.extend({draw(e){if(this.chart.tooltip._active&&this.chart.tooltip._active.length>0){const{ctx:e}=this.chart,t=this.chart.tooltip._active[0],{x:n}=t.tooltipPosition(),a=this.chart.scales["y-axis-0"].top,i=this.chart.scales["y-axis-0"].bottom;e&&(e.save(),e.beginPath(),e.moveTo(n,a),e.lineTo(n,i),e.lineWidth=1,e.strokeStyle=String(Object(l.cssColors)("neutral-3")),e.stroke(),e.restore())}o.a.controllers.line.prototype.draw.call(this,e)}});const K=i.a.memo(({height:e=0,colors:t=u.a,noPadding:n=!1,useArea:i=!1,showHighest:s=!1,renderLegend:r,tooltipXLabelFormatter:c,tooltipValueFormatter:d,datasets:p=[],options:g={}})=>{const f=Object(a.useRef)(),b=Object(a.useRef)(null),[j,y]=Object(a.useState)([]),[O,v]=Object(a.useState)(null),x=Object(a.useCallback)(e=>e.map((e,n)=>{const a=Object.assign({},W,n>=0&&p.length<=t.length?{backgroundColor:i?Object(B.rgba)(t[n],.08):"transparent",borderColor:t[n],pointBackgroundColor:t[n],pointHoverBackgroundColor:t[n]}:{});return Object.assign({},a,{label:e.label,data:e.data})}),[t,p.length,i]),_=Object(a.useCallback)(()=>{const e=b.current&&b.current.getContext("2d"),n=H;if(n.tooltips&&(n.tooltips.custom=e=>{v(e||null)}),e){const a=new o.a(e,{type:"LineWithLine",data:{datasets:x(p)},options:o.a.helpers.configMerge(n,g),plugins:[{afterDraw:(e,n)=>{if(e&&s){const{ctx:a}=e;a&&(a.font=`normal 600 11px ${l.typeface.system}`,a.textAlign="center",a.textBaseline="bottom",e.data.datasets&&e.data.datasets.forEach((i,s)=>{const r=e.getDatasetMeta(s);if(i.data){const e=i.data.map(e=>e.y),o=$()(e),c=e.reduce((e,t,n)=>(t===o&&e.push(n),e),[]);c.forEach((i,d)=>{const u=r.data[i];if(u&&1===parseFloat(n)){const{width:n}=a.measureText(o);if(d===c.length-1){a.fillStyle="rgba(255, 255, 255, 0.8)";const t=i===e.length-1,s={x:u._model.x-(t?n:Math.round(n/2))-5,y:u._model.y-23};((e,t,n,a,i,s,r=!0)=>{void 0===s&&(s=5),e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+a-s,n),e.quadraticCurveTo(t+a,n,t+a,n+s),e.lineTo(t+a,n+i-s),e.quadraticCurveTo(t+a,n+i,t+a-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),r&&e.fill()})(a,s.x,s.y,n+9,16,4),a.fillStyle=`${Object(l.cssVariables)("neutral-9")}`,a.fillText(h()(o).format({thousandSeparated:!0,mantissa:0}),u._model.x-(t?Math.round(n/2):0),u._model.y-9)}a.beginPath(),a.arc(u._model.x,u._model.y,3,0,2*Math.PI),a.fillStyle=t[s],a.fill()}})}}))}}}]});f.current=a}},[p,x,s,t,g]);Object(a.useEffect)(()=>(_(),()=>{f.current&&f.current.destroy()}),[]),Object(a.useEffect)(()=>{f.current&&(f.current.data.datasets=x(p),f.current.update())},[x,p]);return Object(m.jsxs)(q,{noPadding:n,children:[r?r(e=>()=>{if(f.current)try{const t=f.current.getDatasetMeta(e);let n=!1;t.dataset?(n=!t.hidden,t.hidden=n):(n=!t.data[e].hidden,t.data[e].hidden=n),!j.includes(e)&&n?y(t=>t.concat([e])):j.includes(e)&&!n&&y(t=>t.filter(t=>t!==e)),f.current.update()}catch(e){Object(V.logException)({error:e})}},e=>j.includes(e)):"",Object(m.jsx)(G,{style:{height:e},children:Object(m.jsx)("canvas",{ref:b,height:e||"80"})}),O&&Object(m.jsx)(R,{canvas:b.current,tooltip:O,datasets:p,xLabelFormatter:c,valueFormatter:d,colors:t})]})},(e,t)=>d()(e,t));var Y=n("E+oP"),Q=n.n(Y);const J=s.default.div.withConfig({displayName:"horizontalBar__StyledHorizontalBar",componentId:"zomp6n-0"})(["display:block;width:100%;position:relative;"]);class X extends a.Component{constructor(...e){super(...e),this.canvas=void 0,this.state={chart:{},resized:!1},this.drawChart=e=>{const t=this.canvas.getContext("2d"),n=()=>{const t=this.state.chart,{ctx:n}=t;e.datasets.forEach((a,i)=>{const s=t.getDatasetMeta&&t.getDatasetMeta(i),r=e.datasets[0].data[0];s&&s.data.forEach((e,t)=>{const i=a.data[t],s=Math.floor(i/r*100)||0;n&&(n.fillStyle=String(Object(l.cssColors)("purple-7")),n.textAlign="center",n.textBaseline="bottom",n.fillText(`${s}%`,e._model.x+20,e._model.y+8),i>0&&(n.fillStyle="white",n.textAlign="center",n.textBaseline="bottom",n.fillText(i,e._model.x-12,e._model.y+8)))})})},a={hover:{},tooltips:{enabled:!1},maintainAspectRatio:!1,onResize:()=>{this.setState({resized:!0})},legend:{display:e.showLegend},scales:{xAxes:[{gridLines:{drawBorder:!1},ticks:{beginAtZero:!0,callback:()=>""}}],yAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{fontColor:Object(l.cssColors)("neutral-7"),fontFamily:l.typeface.system,fontSize:12},barThickness:24}]},layout:{padding:{top:4,right:50}},animation:{duration:1,onProgress:()=>{n()},onComplete:()=>{this.state.resized&&this.setState({resized:!1},()=>{n()})}}};o.a.defaults.global.defaultFontFamily=l.typeface.system,o.a.defaults.global.defaultFontSize=12;const i=new o.a(t,{type:"horizontalBar",data:{labels:e.labels,datasets:e.datasets},options:a,plugins:[{beforeDraw:t=>{const{ctx:n,chartArea:a}=t;n&&(n.fillStyle=e.areaBackground,n.fillRect(a.left,a.top,a.right-a.left,a.bottom-a.top))}}]});this.setState({chart:i})}}componentDidMount(){this.drawChart(this.props)}UNSAFE_componentWillReceiveProps(e){d()(this.props,e)||Q()(this.state.chart)||(this.state.chart.destroy(),this.drawChart(e))}render(){return Object(m.jsx)(J,{children:Object(m.jsx)("canvas",{ref:e=>{this.canvas=e},height:212})})}}X.defaultProps={areaBackground:"white"};const Z=s.default.div.withConfig({displayName:"doughnutChart__DoughnutChartWrapper",componentId:"wb19k8-0"})(["position:relative;flex:1;display:flex;align-items:center;justify-content:center;width:100%;canvas{max-width:100%;}"]),ee=s.default.div.withConfig({displayName:"doughnutChart__DoughnutChartLeft",componentId:"wb19k8-1"})(["position:relative;width:100%;max-width:300px;max-height:300px;min-height:220px;"]),te=s.default.div.withConfig({displayName:"doughnutChart__DoughnutChartRight",componentId:"wb19k8-2"})(["padding-left:10px;"]),ne=s.default.div.withConfig({displayName:"doughnutChart__CustomLegends",componentId:"wb19k8-3"})(["flex:1;display:flex;flex-direction:column;align-items:flex-start;"]),ae=s.default.div.withConfig({displayName:"doughnutChart__CustomLegendPoint",componentId:"wb19k8-4"})(["width:8px;height:8px;border-radius:4px;margin-right:8px;background:",";"],({background:e})=>e),ie=s.default.div.withConfig({displayName:"doughnutChart__CustomLegend",componentId:"wb19k8-5"})(["display:flex;align-items:center;font-size:14px;line-height:20px;color:",";cursor:pointer;& + &{margin-top:8px;}",""],Object(l.cssVariables)("neutral-7"),({isHidden:e})=>e&&Object(s.css)(["color:",";","{background:",";}"],Object(l.cssVariables)("neutral-5"),ae,Object(l.cssVariables)("neutral-3"))),se=s.default.canvas.withConfig({displayName:"doughnutChart__DoughnutCanvas",componentId:"wb19k8-6"})(["position:relative;width:100%;height:100%;z-index:100;"]),re=s.default.div.withConfig({displayName:"doughnutChart__DoughnutCenter",componentId:"wb19k8-7"})(["position:absolute;z-index:50;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),oe=s.default.div.withConfig({displayName:"doughnutChart__DoughnutCenterValue",componentId:"wb19k8-8"})(["font-size:18px;font-weight:500;line-height:24px;letter-spacing:-0.25px;color:",";margin-bottom:4px;"],Object(l.cssVariables)("neutral-10")),le=s.default.div.withConfig({displayName:"doughnutChart__DoughnutCenterLabelTop",componentId:"wb19k8-9"})(["font-size:12px;line-height:16px;color:",";margin-bottom:2px;"],Object(l.cssVariables)("neutral-6")),ce=s.default.div.withConfig({displayName:"doughnutChart__DoughnutCenterLabel",componentId:"wb19k8-10"})(["font-size:12px;line-height:16px;color:",";"],Object(l.cssVariables)("neutral-6")),{background:de,hover:ue}=Object(u.d)({dataSize:5}),pe={backgroundColors:de,hoverBorderColors:ue},ge=i.a.memo(({colors:e=pe,labels:t=[],values:n=[],tooltip:i={items:[]},centerLabelTop:s,centerLabelBottom:r,options:c={}})=>{const d=Object(a.useRef)(),u=Object(a.useRef)(null),p=Object(a.useRef)(null),[g,f]=Object(a.useState)([]),[b,j]=Object(a.useState)(null),y=Object(a.useMemo)(()=>{const t=n.reduce((e,t)=>e+t,0),a=[];return n.forEach((e,t)=>{e>0&&a.push(t)}),{data:n,borderWidth:0===t||a.length<=1?0:2,hoverBorderWidth:4,backgroundColor:e.backgroundColors,hoverBackgroundColor:e.backgroundColors,hoverBorderColor:e.hoverBorderColors}},[e.backgroundColors,e.hoverBorderColors,n]),O=Object(a.useRef)(null);Object(a.useEffect)(()=>{O.current=()=>{const e={cutoutPercentage:68,responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1,custom:e=>{j(e||null)}},legend:{display:!1}},n=u.current&&u.current.getContext("2d"),a=e=>{if(e){const t=e.canvas.clientWidth/2,n=e.canvas.clientHeight/2,{ctx:a}=e;a.beginPath(),a.arc(t,n,e.outerRadius-e.radiusLength/2,0,2*Math.PI),a.lineWidth=e.radiusLength-4,a.strokeStyle=Object(l.cssColors)("bg-3"),a.stroke()}};if(n){const i=new o.a(n,{type:"doughnut",data:{labels:t,datasets:[y]},options:o.a.helpers.configMerge(e,c),plugins:[{beforeDatasetsDraw:a,resize:a}]});d.current=i}}}),Object(a.useEffect)(()=>(null==O.current||O.current(),()=>{var e;null==(e=d.current)||e.destroy()}),[]),Object(a.useEffect)(()=>{d.current&&(d.current.data.datasets=[y],d.current.update(),f([]))},[y]);const v=e=>()=>{if(d.current)try{const t=d.current.getDatasetMeta(0),n=!t.data[e].hidden;t.data[e].hidden=n,d.current.update(),!g.includes(e)&&n?f(t=>t.concat([e])):g.includes(e)&&!n&&f(t=>t.filter(t=>t!==e))}catch(e){Object(V.logException)({error:e})}},x=n.reduce((e,t,n)=>g.includes(n)?e:e+t,0);return Object(m.jsxs)(Z,{children:[Object(m.jsxs)(ee,{ref:p,children:[Object(m.jsx)(se,{ref:u}),Object(m.jsxs)(re,{children:[Object(m.jsx)(le,{children:s}),Object(m.jsx)(oe,{children:h()(x).format({thousandSeparated:!0,mantissa:0})}),Object(m.jsx)(ce,{children:r})]}),Object(m.jsx)(P,{canvas:u.current,chart:d.current,labels:t,values:n,tooltip:b,tooltipItems:i.items,hiddenLegends:g})]}),Object(m.jsx)(te,{children:t&&t.length>0?Object(m.jsx)(ne,{children:t.map((t,n)=>Object(m.jsxs)(ie,{onClick:v(n),isHidden:g.includes(n),children:[Object(m.jsx)(ae,{background:e.backgroundColors[n]}),t]},n))}):""})]})},(e,t)=>d()(e,t));n("Ym+k");const he=s.default.div.withConfig({displayName:"MixedChart__MixedChartWrapper",componentId:"sc-171igb9-0"})(["position:relative;"]);o.a.defaults.global.defaultFontFamily=l.typeface.system,o.a.defaults.global.defaultFontColor=Object(l.cssColors)("neutral-7");const me={hover:{animationDuration:0},maintainAspectRatio:!1,elements:{point:{radius:4,hoverRadius:4,hoverBorderWidth:0}},layout:{padding:{left:0,right:8,top:24,bottom:0}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:"day",tooltipFormat:z.A,displayFormats:{hour:z.F}},gridLines:{display:!1,drawBorder:!1},ticks:{autoSkip:!0,maxTicksLimit:6,maxRotation:0,minRotation:0,fontColor:Object(l.cssColors)("neutral-10"),fontSize:11},offset:!0}],yAxes:[{gridLines:{color:Object(l.cssColors)("neutral-2"),display:!0,drawBorder:!1},type:"linear",ticks:{beginAtZero:!0,maxTicksLimit:6,callback:e=>Number.isInteger(Number(e))?e:null,min:0,fontColor:Object(l.cssColors)("neutral-10"),fontSize:11,padding:8},offset:!0}]},tooltips:{enabled:!1,mode:"index",intersect:!1,position:"average"}},fe=e=>{if(e){const{ctx:t}=e;if(e.tooltip._active&&e.tooltip._active.length>0){const n=e.tooltip._active[0],{x:a}=n.tooltipPosition(),i=e.scales["y-axis-0"].top,s=e.scales["y-axis-0"].bottom;t&&(t.save(),t.beginPath(),t.moveTo(a,i),t.lineTo(a,s),t.lineWidth=1,t.strokeStyle=String(Object(l.cssColors)("neutral-3")),t.stroke(),t.restore())}}},be=({height:e,datasets:t,labels:n,annotation:i})=>{const s=Object(a.useRef)(),r=Object(a.useRef)(null),[c,d]=Object(a.useState)(null);return me.tooltips&&!c&&(me.tooltips.custom=e=>{d(e||null)}),Object(a.useEffect)(()=>{var e;const a=null==(e=r.current)?void 0:e.getContext("2d");if(a){const e=new o.a(a,{type:"bar",data:{datasets:t,labels:n},options:{...me,annotation:(c=i.value,d=i.label,{drawTime:"afterDatasetsDraw",events:["click"],dblClickSpeed:350,annotations:[{drawTime:"afterDraw",type:"line",mode:"horizontal",scaleID:"y-axis-0",value:c,borderColor:Object(l.cssColors)("neutral-6"),borderWidth:1,label:{backgroundColor:"transparent",fontFamily:l.typeface.system,fontSize:12,fontStyle:"normal",fontColor:Object(l.cssColors)("neutral-7"),xPadding:0,yPadding:0,cornerRadius:0,position:"right",xAdjust:0,yAdjust:-10,enabled:!0,content:d}}]})},plugins:[{beforeDraw:fe}]});s.current=e}var c,d},[i.label,i.value,t,n]),Object(m.jsxs)(he,{children:[Object(m.jsx)("canvas",{ref:r,height:e||80}),c&&Object(m.jsx)(R,{canvas:r.current,tooltip:c,datasets:t,colors:[Object(l.cssColors)("purple-7"),Object(l.cssColors)("blue-5")],valueFormatter:({value:e})=>Object(V.getTransformedUsage)(Number(e))})]})}},tjlA:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var a=n("H7XF"),i=n("kVK+"),s=n("49sm");function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,a){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t);return e}(e,t,n,a):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=0|h(t,n),i=(e=o(e,a)).write(t,n);i!==a&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|g(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(a=t.length)!=a?o(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=o(e,t<0?0:0|g(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var a=0;a<n;a+=1)e[a]=255&t[a];return e}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function h(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(a)return $(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,n){var a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function f(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function b(e,t,n,a,i){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,a)),l.isBuffer(t))return 0===t.length?-1:j(e,t,n,a,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):j(e,[t],n,a,i);throw new TypeError("val must be string, number or Buffer")}function j(e,t,n,a,i){var s,r=1,o=e.length,l=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;r=2,o/=2,l/=2,n/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(i){var d=-1;for(s=n;s<o;s++)if(c(e,s)===c(t,-1===d?0:s-d)){if(-1===d&&(d=s),s-d+1===l)return d*r}else-1!==d&&(s-=s-d),d=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var u=!0,p=0;p<l;p++)if(c(e,s+p)!==c(t,p)){u=!1;break}if(u)return s}return-1}function y(e,t,n,a){n=Number(n)||0;var i=e.length-n;a?(a=Number(a))>i&&(a=i):a=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");a>s/2&&(a=s/2);for(var r=0;r<a;++r){var o=parseInt(t.substr(2*r,2),16);if(isNaN(o))return r;e[n+r]=o}return r}function O(e,t,n,a){return V($(t,e.length-n),e,n,a)}function v(e,t,n,a){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function x(e,t,n,a){return v(e,t,n,a)}function _(e,t,n,a){return V(B(t),e,n,a)}function C(e,t,n,a){return V(function(e,t){for(var n,a,i,s=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),a=n>>8,i=n%256,s.push(i),s.push(a);return s}(t,e.length-n),e,n,a)}function k(e,t,n){return 0===t&&n===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var a=[],i=t;i<n;){var s,r,o,l,c=e[i],d=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(s=e[i+1]))&&(l=(31&c)<<6|63&s)>127&&(d=l);break;case 3:s=e[i+1],r=e[i+2],128==(192&s)&&128==(192&r)&&(l=(15&c)<<12|(63&s)<<6|63&r)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:s=e[i+1],r=e[i+2],o=e[i+3],128==(192&s)&&128==(192&r)&&128==(192&o)&&(l=(15&c)<<18|(63&s)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(d=l)}null===d?(d=65533,u=1):d>65535&&(d-=65536,a.push(d>>>10&1023|55296),d=56320|1023&d),a.push(d),i+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=4096));return n}(a)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,a){return d(t),t<=0?o(e,t):void 0!==n?"string"==typeof a?o(e,t).fill(n,a):o(e,t).fill(n):o(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,i=0,s=Math.min(n,a);i<s;++i)if(e[i]!==t[i]){n=e[i],a=t[i];break}return n<a?-1:a<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var r=e[n];if(!l.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(a,i),i+=r.length}return a},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,a,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===i&&(i=this.length),t<0||n>e.length||a<0||i>this.length)throw new RangeError("out of range index");if(a>=i&&t>=n)return 0;if(a>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(a>>>=0),r=(n>>>=0)-(t>>>=0),o=Math.min(s,r),c=this.slice(a,i),d=e.slice(t,n),u=0;u<o;++u)if(c[u]!==d[u]){s=c[u],r=d[u];break}return s<r?-1:r<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},l.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var s=!1;;)switch(a){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;i<n;++i)a+=String.fromCharCode(127&e[i]);return a}function S(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;i<n;++i)a+=String.fromCharCode(e[i]);return a}function E(e,t,n){var a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var i="",s=t;s<n;++s)i+=U(e[s]);return i}function I(e,t,n){for(var a=e.slice(t,n),i="",s=0;s<a.length;s+=2)i+=String.fromCharCode(a[s]+256*a[s+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,a,i,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function A(e,t,n,a){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(a?i:1-i))>>>8*(a?i:1-i)}function N(e,t,n,a){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(a?i:3-i)&255}function R(e,t,n,a,i,s){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,a,s){return s||R(e,0,n,4),i.write(e,t,n,a,23,4),n+4}function L(e,t,n,a,s){return s||R(e,0,n,8),i.write(e,t,n,a,52,8),n+8}l.prototype.slice=function(e,t){var n,a=this.length;if((e=~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),(t=void 0===t?a:~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e],i=1,s=0;++s<t&&(i*=256);)a+=this[e+s]*i;return a},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e+--t],i=1;t>0&&(i*=256);)a+=this[e+--t]*i;return a},l.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e],i=1,s=0;++s<t&&(i*=256);)a+=this[e+s]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=t,i=1,s=this[e+--a];a>0&&(i*=256);)s+=this[e+--a]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t|=0,!a){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var s=0,r=1,o=0;for(this[t]=255&e;++s<n&&(r*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/r>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t|=0,!a){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var s=n-1,r=1,o=0;for(this[t+s]=255&e;--s>=0&&(r*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/r>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var i,s=a-n;if(this===e&&n<t&&t<a)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},l.prototype.fill=function(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!l.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var r=l.isBuffer(e)?e:$(new l(e,a).toString()),o=r.length;for(s=0;s<n-t;++s)this[s+t]=r[s%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var a=e.length,i=null,s=[],r=0;r<a;++r){if((n=e.charCodeAt(r))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(r+1===a){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function B(e){return a.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,a){for(var i=0;i<a&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("yLpj"))},twaH:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI"),i=n("dDsW"),s=n("Q+E5");const r=()=>{const e=Object(i.a)(),{supergroupMemberLimit:t,isSupergroupSupportedByPlan:n,isSubscriptionLoaded:r}=Object(s.a)();return Object(a.useMemo)(()=>{const a=`${(t/1e3).toFixed(0)}K`;return{tooltipDefinition:e.formatMessage({id:"chat.channelList.list.column.memberCount.tooltip.supergroup.body"}),channelTypeName:r&&n?e.formatMessage({id:"chat.groupChannels.channelTypeBasedOnIsSuper.yes"},{limitAbbreviation:a}):e.formatMessage({id:"chat.groupChannels.channelTypeBasedOnIsSuper.yes.notSupportedByCurrentPlan"}),dialogDefinition:e.formatMessage({id:"chat.groupChannels.createGroupChannelDialog.field.isSuper.option.yes.tooltip.unsupportedByPlan"})}},[e,r,n,t])}},u5p2:function(e,t,n){e.exports=function(e){var t=e.helpers,a=n("wU0g")(e);function i(e){var t=(e.x2-e.x1)/(e.y2-e.y1),n=e.x1||0;this.m=t,this.b=n,this.getX=function(a){return t*(a-e.y1)+n},this.getY=function(a){return(a-n)/t+e.y1},this.intersects=function(e,t,n){n=n||.001;var a=this.getY(e),i=this.getX(t);return(!isFinite(a)||Math.abs(t-a)<n)&&(!isFinite(i)||Math.abs(e-i)<n)}}return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,t=this.options;e.ranges={},e.ranges[t.scaleID]={min:t.value,max:t.endValue||t.value}},configure:function(){var e,n,s=this._model,r=this.options,o=this.chartInstance,l=o.chart.ctx,c=o.scales[r.scaleID];if(c&&(e=a.isValid(r.value)?c.getPixelForValue(r.value):NaN,n=a.isValid(r.endValue)?c.getPixelForValue(r.endValue):e),!isNaN(e)){var d=o.chartArea;s.clip={x1:d.left,x2:d.right,y1:d.top,y2:d.bottom},"horizontal"==this.options.mode?(s.x1=d.left,s.x2=d.right,s.y1=e,s.y2=n):(s.y1=d.top,s.y2=d.bottom,s.x1=e,s.x2=n),s.line=new i(s),s.mode=r.mode,s.labelBackgroundColor=r.label.backgroundColor,s.labelFontFamily=r.label.fontFamily,s.labelFontSize=r.label.fontSize,s.labelFontStyle=r.label.fontStyle,s.labelFontColor=r.label.fontColor,s.labelXPadding=r.label.xPadding,s.labelYPadding=r.label.yPadding,s.labelCornerRadius=r.label.cornerRadius,s.labelPosition=r.label.position,s.labelXAdjust=r.label.xAdjust,s.labelYAdjust=r.label.yAdjust,s.labelEnabled=r.label.enabled,s.labelContent=r.label.content,l.font=t.fontString(s.labelFontSize,s.labelFontStyle,s.labelFontFamily);var u=l.measureText(s.labelContent).width,p=l.measureText("M").width,g=function(e,t,n,a,i){var s=e.line,r={},o=0,l=0;switch(!0){case"vertical"==e.mode&&"top"==e.labelPosition:l=i+e.labelYAdjust,o=t/2+e.labelXAdjust,r.y=e.y1+l,r.x=(isFinite(s.m)?s.getX(r.y):e.x1)-o;break;case"vertical"==e.mode&&"bottom"==e.labelPosition:l=n+i+e.labelYAdjust,o=t/2+e.labelXAdjust,r.y=e.y2-l,r.x=(isFinite(s.m)?s.getX(r.y):e.x1)-o;break;case"horizontal"==e.mode&&"left"==e.labelPosition:o=a+e.labelXAdjust,l=-n/2+e.labelYAdjust,r.x=e.x1+o,r.y=s.getY(r.x)+l;break;case"horizontal"==e.mode&&"right"==e.labelPosition:o=t+a+e.labelXAdjust,l=-n/2+e.labelYAdjust,r.x=e.x2-o,r.y=s.getY(r.x)+l;break;default:r.x=(e.x1+e.x2-t)/2+e.labelXAdjust,r.y=(e.y1+e.y2-n)/2+e.labelYAdjust}return r}(s,u,p,s.labelXPadding,s.labelYPadding);s.labelX=g.x-s.labelXPadding,s.labelY=g.y-s.labelYPadding,s.labelWidth=u+2*s.labelXPadding,s.labelHeight=p+2*s.labelYPadding,s.borderColor=r.borderColor,s.borderWidth=r.borderWidth,s.borderDash=r.borderDash||[],s.borderDashOffset=r.borderDashOffset||0}},inRange:function(e,t){var n=this._model;return n.line&&n.line.intersects(e,t,this.getHeight())||n.labelEnabled&&n.labelContent&&e>=n.labelX&&e<=n.labelX+n.labelWidth&&t>=n.labelY&&t<=n.labelY+n.labelHeight},getCenterPoint:function(){return{x:(this._model.x2+this._model.x1)/2,y:(this._model.y2+this._model.y1)/2}},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},draw:function(){var e=this._view,n=this.chartInstance.chart.ctx;e.clip&&(n.save(),n.beginPath(),n.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),n.clip(),n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,n.setLineDash&&n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.beginPath(),n.moveTo(e.x1,e.y1),n.lineTo(e.x2,e.y2),n.stroke(),e.labelEnabled&&e.labelContent&&(n.beginPath(),n.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),n.clip(),n.fillStyle=e.labelBackgroundColor,t.drawRoundedRectangle(n,e.labelX,e.labelY,e.labelWidth,e.labelHeight,e.labelCornerRadius),n.fill(),n.font=t.fontString(e.labelFontSize,e.labelFontStyle,e.labelFontFamily),n.fillStyle=e.labelFontColor,n.textAlign="center",n.textBaseline="middle",n.fillText(e.labelContent,e.labelX+e.labelWidth/2,e.labelY+e.labelHeight/2)),n.restore())}})}},uFVl:function(e,t,n){"use strict";e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])?|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},uGGy:function(e,t,n){"use strict";const a=n("EE1x"),i={exact:!1},s=`${a.v4().source}\\/(3[0-2]|[12]?[0-9])`,r=`${a.v6().source}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,o=new RegExp(`^${s}$`),l=new RegExp(`^${r}$`),c=new RegExp(`(?:^${s}$)|(?:^${r}$)`);e.exports=({exact:e}=i)=>e?c:new RegExp(`(?:${s})|(?:${r})`,"g"),e.exports.v4=({exact:e}=i)=>e?o:new RegExp(s,"g"),e.exports.v6=({exact:e}=i)=>e?l:new RegExp(r,"g")},uccp:function(e,t,n){n("5Qd4"),e.exports=n("VSTI").Object.assign},ugGH:function(e,t,n){e.exports=n("BRsN")},vNbC:function(e,t,n){n("du/1");var a=n("VSTI").Object;e.exports=function(e,t){return a.create(e,t)}},wNFp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("/MKj"),i=n("sPrd"),s=n("A6Uk");const r=[i.m],o=()=>{const{uid:e}=Object(a.g)(e=>e.organizations.current),{flags:{rtl:t}}=Object(s.a)();return r.includes(e)||!!t?"auto":"ltr"}},wU0g:function(e,t){function n(){}function a(e){var t=e.annotation.elements;return Object.keys(t).map((function(e){return t[e]}))}function i(){return Math.random().toString(36).substr(2,6)}function s(e){return null!=e&&("number"==typeof e?isFinite(e):!!e)}function r(e,t,n){e["$"+t]||(e[t]?(e["$"+t]=e[t].bind(e),e[t]=function(){var a=[e["$"+t]].concat(Array.prototype.slice.call(arguments));return n.apply(e,a)}):e[t]=function(){var t=[void 0].concat(Array.prototype.slice.call(arguments));return n.apply(e,t)})}function o(e,t){e.forEach((function(e){(t?e[t]:e)()}))}function l(e){return"on"+e[0].toUpperCase()+e.substring(1)}function c(e,t){try{return new MouseEvent(e,t)}catch(i){try{var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,t.canBubble,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n}catch(n){var a=document.createEvent("Event");return a.initEvent(e,t.canBubble,t.cancelable),a}}}e.exports=function(e){var t=e.helpers;return{initConfig:function(n){return n=t.configMerge(e.Annotation.defaults,n),t.isArray(n.annotations)&&n.annotations.forEach((function(n){n.label=t.configMerge(e.Annotation.labelDefaults,n.label)})),n},elements:a,callEach:o,noop:n,objectId:i,isValid:s,decorate:r,adjustScaleRange:function(e){var t,n,i,s,r,o=(t=e.id,n=a(e.chart),i=e.min,s=e.max,{min:(r=n.filter((function(e){return!!e._model.ranges[t]})).map((function(e){return e._model.ranges[t]}))).map((function(e){return Number(e.min)})).reduce((function(e,t){return isFinite(t)&&!isNaN(t)&&t<e?t:e}),i),max:r.map((function(e){return Number(e.max)})).reduce((function(e,t){return isFinite(t)&&!isNaN(t)&&t>e?t:e}),s)});void 0===e.options.ticks.min&&void 0===e.options.ticks.suggestedMin&&(e.min=o.min),void 0===e.options.ticks.max&&void 0===e.options.ticks.suggestedMax&&(e.max=o.max),e.handleTickRangeOptions&&e.handleTickRangeOptions()},getNearestItems:function(e,n){var a=Number.POSITIVE_INFINITY;return e.filter((function(e){return e.inRange(n.x,n.y)})).reduce((function(e,i){var s=i.getCenterPoint(),r=t.distanceBetweenPoints(n,s);return r<a?(e=[i],a=r):r===a&&e.push(i),e}),[]).sort((function(e,t){var n=e.getArea(),a=t.getArea();return n>a||n<a?n-a:e._index-t._index})).slice(0,1)[0]},getEventHandlerName:l,createMouseEvent:c}}},wYM1:function(e,t,n){var a=n("USwo");a(a.S+a.F*!n("C61u"),"Object",{defineProperty:n("GhSp").f})},xfML:function(e,t,n){var a=n("USwo");a(a.S,"Object",{setPrototypeOf:n("DrT7").set})},xxsC:function(e,t){e.exports=function(e){var t=e.helpers;return e.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=t.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},yQFZ:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},yiba:function(e,t,n){!function(){var e,n=this;function a(e){return"string"==typeof e}function i(e,t){e=e.split(".");var a,i=n;e[0]in i||!i.execScript||i.execScript("var "+e[0]);for(;e.length&&(a=e.shift());)e.length||void 0===t?i=i[a]&&i[a]!==Object.prototype[a]?i[a]:i[a]={}:i[a]=t}function s(e,t){function n(){}n.prototype=t.prototype,e.ya=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ea=function(e,n,a){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function r(e,t){null!=e&&this.a.apply(this,arguments)}function o(e){e.b=""}r.prototype.b="",r.prototype.set=function(e){this.b=""+e},r.prototype.a=function(e,t,n){if(this.b+=String(e),null!=t)for(var a=1;a<arguments.length;a++)this.b+=arguments[a];return this},r.prototype.toString=function(){return this.b};var l=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,a(e))return a(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},c=Array.prototype.filter?function(e,t,n){return Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var i=e.length,s=[],r=0,o=a(e)?e.split(""):e,l=0;l<i;l++)if(l in o){var c=o[l];t.call(n,c,l,e)&&(s[r++]=c)}return s},d=Array.prototype.map?function(e,t,n){return Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var i=e.length,s=Array(i),r=a(e)?e.split(""):e,o=0;o<i;o++)o in r&&(s[o]=t.call(n,r[o],o,e));return s};function u(e,t){e.sort(t||p)}function p(e,t){return e>t?1:e<t?-1:0}function g(e,t){for(this.b=e,this.a={},e=0;e<t.length;e++){var n=t[e];this.a[n.a]=n}}function h(e,t){switch(this.a=e,this.g=!!t.w,this.b=t.c,this.j=t.type,this.i=!1,this.b){case b:case j:case y:case O:case v:case f:case m:this.i=!0}this.f=t.defaultValue}var m=1,f=2,b=3,j=4,y=6,O=16,v=18;function x(){this.b={},this.f=this.h().a,this.a=this.g=null}function _(e,t){for(var n=function(e){return u(e=function(e){var t,n=[],a=0;for(t in e)n[a++]=e[t];return n}(e.a),(function(e,t){return e.a-t.a})),e}(e.h()),a=0;a<n.length;a++){var i=n[a],s=i.a;if(C(t,s)){e.a&&delete e.a[i.a];var r=11==i.b||10==i.b;if(i.g){i=S(t,s);for(var o=0;o<i.length;o++)M(e,s,r?i[o].clone():i[o])}else i=k(t,s),r?(r=k(e,s))?_(r,i):I(e,s,i.clone()):I(e,s,i)}}}function C(e,t){return null!=e.b[t]}function k(e,t){var n=e.b[t];if(null==n)return null;if(e.g){if(!(t in e.a)){var a=e.g,i=e.f[t];if(null!=n)if(i.g){for(var s=[],r=0;r<n.length;r++)s[r]=a.b(i,n[r]);n=s}else n=a.b(i,n);return e.a[t]=n}return e.a[t]}return n}function w(e,t,n){var a=k(e,t);return e.f[t].g?a[n||0]:a}function T(e,t){if(C(e,t))e=w(e,t,void 0);else e:{if(void 0===(e=e.f[t]).f)if((t=e.j)===Boolean)e.f=!1;else if(t===Number)e.f=0;else{if(t!==String){e=new t;break e}e.f=e.i?"0":""}e=e.f}return e}function S(e,t){return k(e,t)||[]}function E(e,t){return e.f[t].g?C(e,t)?e.b[t].length:0:C(e,t)?1:0}function I(e,t,n){e.b[t]=n,e.a&&(e.a[t]=n)}function M(e,t,n){e.b[t]||(e.b[t]=[]),e.b[t].push(n),e.a&&delete e.a[t]}function D(e,t){var n,a=[];for(n in t)0!=n&&a.push(new h(n,t[n]));return new g(e,a)}function A(){x.call(this)}(e=x.prototype).has=function(e){return C(this,e.a)},e.get=function(e,t){return w(this,e.a,t)},e.set=function(e,t){I(this,e.a,t)},e.add=function(e,t){M(this,e.a,t)},e.clone=function(){var e=new this.constructor;return e!=this&&(e.b={},e.a&&(e.a={}),_(e,this)),e},s(A,x);var N=null;function R(){x.call(this)}s(R,x);var P=null;function L(){x.call(this)}s(L,x);var F=null;function U(){}A.prototype.h=function(){var e=N;return e||(N=e=D(A,{0:{name:"NumberFormat",ga:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,c:9,type:String},2:{name:"format",required:!0,c:9,type:String},3:{name:"leading_digits_pattern",w:!0,c:9,type:String},4:{name:"national_prefix_formatting_rule",c:9,type:String},6:{name:"national_prefix_optional_when_formatting",c:8,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",c:9,type:String}})),e},A.h=A.prototype.h,R.prototype.h=function(){var e=P;return e||(P=e=D(R,{0:{name:"PhoneNumberDesc",ga:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",c:9,type:String},9:{name:"possible_length",w:!0,c:5,type:Number},10:{name:"possible_length_local_only",w:!0,c:5,type:Number},6:{name:"example_number",c:9,type:String}})),e},R.h=R.prototype.h,L.prototype.h=function(){var e=F;return e||(F=e=D(L,{0:{name:"PhoneMetadata",ga:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",c:11,type:R},2:{name:"fixed_line",c:11,type:R},3:{name:"mobile",c:11,type:R},4:{name:"toll_free",c:11,type:R},5:{name:"premium_rate",c:11,type:R},6:{name:"shared_cost",c:11,type:R},7:{name:"personal_number",c:11,type:R},8:{name:"voip",c:11,type:R},21:{name:"pager",c:11,type:R},25:{name:"uan",c:11,type:R},27:{name:"emergency",c:11,type:R},28:{name:"voicemail",c:11,type:R},29:{name:"short_code",c:11,type:R},30:{name:"standard_rate",c:11,type:R},31:{name:"carrier_specific",c:11,type:R},33:{name:"sms_services",c:11,type:R},24:{name:"no_international_dialling",c:11,type:R},9:{name:"id",required:!0,c:9,type:String},10:{name:"country_code",c:5,type:Number},11:{name:"international_prefix",c:9,type:String},17:{name:"preferred_international_prefix",c:9,type:String},12:{name:"national_prefix",c:9,type:String},13:{name:"preferred_extn_prefix",c:9,type:String},15:{name:"national_prefix_for_parsing",c:9,type:String},16:{name:"national_prefix_transform_rule",c:9,type:String},18:{name:"same_mobile_and_fixed_line_pattern",c:8,defaultValue:!1,type:Boolean},19:{name:"number_format",w:!0,c:11,type:A},20:{name:"intl_number_format",w:!0,c:11,type:A},22:{name:"main_country_for_code",c:8,defaultValue:!1,type:Boolean},23:{name:"leading_digits",c:9,type:String},26:{name:"leading_zero_possible",c:8,defaultValue:!1,type:Boolean}})),e},L.h=L.prototype.h,U.prototype.a=function(e){throw new e.b,Error("Unimplemented")},U.prototype.b=function(e,t){if(11==e.b||10==e.b)return t instanceof x?t:this.a(e.j.prototype.h(),t);if(14==e.b)return a(t)&&$.test(t)&&0<(e=Number(t))?e:t;if(!e.i)return t;if((e=e.j)===String){if("number"==typeof t)return String(t)}else if(e===Number&&a(t)&&("Infinity"===t||"-Infinity"===t||"NaN"===t||$.test(t)))return Number(t);return t};var $=/^-?[0-9]+$/;function B(){}function V(){}function z(){x.call(this)}s(B,U),B.prototype.a=function(e,t){return(e=new e.b).g=this,e.b=t,e.a={},e},s(V,B),V.prototype.b=function(e,t){return 8==e.b?!!t:U.prototype.b.apply(this,arguments)},V.prototype.a=function(e,t){return V.ya.a.call(this,e,t)},s(z,x);var H=null,q={Da:0,Ca:1,Ba:5,Aa:10,za:20};z.prototype.h=function(){var e=H;return e||(H=e=D(z,{0:{name:"PhoneNumber",ga:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,c:5,type:Number},2:{name:"national_number",required:!0,c:4,type:Number},3:{name:"extension",c:9,type:String},4:{name:"italian_leading_zero",c:8,type:Boolean},8:{name:"number_of_leading_zeros",c:5,defaultValue:1,type:Number},5:{name:"raw_input",c:9,type:String},6:{name:"country_code_source",c:14,defaultValue:0,type:q},7:{name:"preferred_domestic_carrier_code",c:9,type:String}})),e},z.ctor=z,z.ctor.h=z.prototype.h;var G={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},W={AC:[,[,,"(?:[01589]\\d|[46])\\d{4}",,,,,,,[5,6]],[,,"6[2-467]\\d{3}",,,,"62889",,,[5]],[,,"4\\d{4}",,,,"40123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AC",247,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:0[1-9]|[1589]\\d)\\d{4}",,,,"542011",,,[6]],,,[,,,,,,,,,[-1]]],AD:[,[,,"(?:1|6\\d)\\d{7}|[135-9]\\d{5}",,,,,,,[6,8,9]],[,,"[78]\\d{5}",,,,"712345",,,[6]],[,,"690\\d{6}|[356]\\d{5}",,,,"312345",,,[6,9]],[,,"180[02]\\d{4}",,,,"18001234",,,[8]],[,,"[19]\\d{5}",,,,"912345",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["1"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,"1800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AE:[,[,,"(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"[2-4679][2-8]\\d{6}",,,,"22345678",,,[8],[7]],[,,"5[024-68]\\d{7}",,,,"501234567",,,[9]],[,,"400\\d{6}|800\\d{2,9}",,,,"800123456"],[,,"900[02]\\d{5}",,,,"900234567",,,[9]],[,,"700[05]\\d{5}",,,,"700012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AE",971,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],[,"(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"600[25]\\d{5}",,,,"600212345",,,[9]],,,[,,,,,,,,,[-1]]],AF:[,[,,"[2-7]\\d{8}",,,,,,,[9],[7]],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}",,,,"234567890",,,,[7]],[,,"7\\d{8}",,,,"701234567",,,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AF",93,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AG:[,[,,"(?:268|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",,,,"2684601234",,,,[7]],[,,"268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}",,,,"2684641234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"26848[01]\\d{4}",,,,"2684801234",,,,[7]],"AG",1,"011","1",,,"1|([457]\\d{6})$","268$1",,,,,[,,"26840[69]\\d{4}",,,,"2684061234",,,,[7]],,"268",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AI:[,[,,"(?:264|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"264(?:292|4(?:6[12]|9[78]))\\d{4}",,,,"2644612345",,,,[7]],[,,"264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",,,,"2642351234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AI",1,"011","1",,,"1|([2457]\\d{6})$","264$1",,,,,[,,"264724\\d{4}",,,,"2647241234",,,,[7]],,"264",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AL:[,[,,"(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",,,,,,,[6,7,8,9],[5]],[,,"(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",,,,"22345678",,,[8],[5,6,7]],[,,"6(?:[78][2-9]|9\\d)\\d{6}",,,,"672123456",,,[9]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"900[1-9]\\d\\d",,,,"900123",,,[6]],[,,"808[1-9]\\d\\d",,,,"808123",,,[6]],[,,"700[2-9]\\d{4}",,,,"70021234",,,[8]],[,,,,,,,,,[-1]],"AL",355,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AM:[,[,,"(?:[1-489]\\d|55|60|77)\\d{6}",,,,,,,[8],[5,6]],[,,"(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",,,,"10123456",,,,[5,6]],[,,"(?:33|4[1349]|55|77|88|9[13-9])\\d{6}",,,,"77123456"],[,,"800\\d{5}",,,,"80012345"],[,,"90[016]\\d{5}",,,,"90012345"],[,,"80[1-4]\\d{5}",,,,"80112345"],[,,,,,,,,,[-1]],[,,"60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|90)\\d{4}",,,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],[,"(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AO:[,[,,"[29]\\d{8}",,,,,,,[9]],[,,"2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}",,,,"222123456"],[,,"9[1-49]\\d{7}",,,,"923123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AR:[,[,,"11\\d{8}|(?:[2368]|9\\d)\\d{9}",,,,,,,[10,11],[6,7,8]],[,,"3888[013-9]\\d{5}|(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-7]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"1123456789",,,[10],[6,7,8]],[,,"93888[013-9]\\d{5}|9(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|93(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-7]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"91123456789",,,,[6,7,8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"60[04579]\\d{7}",,,,"6001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",,,[[,"(\\d{3})","$1",["0|1(?:0[0-35-7]|1[02-5]|2[015]|34|4[478])|911"]],[,"(\\d{2})(\\d{4})","$1-$2",["[1-9]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[1-8]"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1"],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1"]],[[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"]],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3-$4",["91"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9"]]],[,,,,,,,,,[-1]],,,[,,"810\\d{7}",,,,,,,[10]],[,,"810\\d{7}",,,,"8101234567",,,[10]],,,[,,,,,,,,,[-1]]],AS:[,[,,"(?:[58]\\d\\d|684|900)\\d{7}",,,,,,,[10],[7]],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",,,,"6846221234",,,,[7]],[,,"684(?:2(?:48|5[2468]|72)|7(?:3[13]|70|82))\\d{4}",,,,"6847331234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AS",1,"011","1",,,"1|([267]\\d{6})$","684$1",,,,,[,,,,,,,,,[-1]],,"684",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AT:[,[,,"1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",,,,,,,[4,5,6,7,8,9,10,11,12,13],[3]],[,,"1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",,,,"1234567890",,,,[3]],[,,"6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",,,,"664123456",,,[7,8,9,10,11,12,13]],[,,"800\\d{6,10}",,,,"800123456",,,[9,10,11,12,13]],[,,"9(?:0[01]|3[019])\\d{6,10}",,,,"900123456",,,[9,10,11,12,13]],[,,"8(?:10|2[018])\\d{6,10}|828\\d{5}",,,,"810123456",,,[8,9,10,11,12,13]],[,,,,,,,,,[-1]],[,,"5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",,,,"780123456",,,[5,6,7,8,9,10,11,12,13]],"AT",43,"00","0",,,"0",,,,[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AU:[,[,,"1(?:[0-79]\\d{7,8}|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",,,,,,,[5,6,7,8,9,10]],[,,"8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-7]|3[2-4]|[4-6]\\d))|91(?:[0-57-9]\\d|6[0135-9])\\d)\\d{3}|(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8])|8(?:6[0-8]|[78]\\d|9[02-9]))\\d{6}",,,,"212345678",,,[9],[8]],[,,"4(?:83[0-38]|93[01])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"AU",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|(183[12])",,"0011",,[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["13"]],[,"(\\d{3})(\\d{3})","$1 $2",["19"]],[,"(\\d{3})(\\d{4})","$1 $2",["180","1802"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["19"]],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[,,"163\\d{2,6}",,,,"1631234",,,[5,6,7,8,9]],1,,[,,"1[38]00\\d{6}|1(?:345[0-4]|802)\\d{3}|13\\d{4}",,,,,,,[6,7,8,10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AW:[,[,,"(?:[25-79]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"5(?:2\\d|8[1-9])\\d{4}",,,,"5212345"],[,,"(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",,,,"5601234"],[,,"800\\d{4}",,,,"8001234"],[,,"900\\d{4}",,,,"9001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:28\\d|501)\\d{4}",,,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AX:[,[,,"2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"18[1-8]\\d{3,6}",,,,"181234567",,,[6,7,8,9]],[,,"(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AX",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,,,[,,,,,,,,,[-1]],,"18",[,,,,,,,,,[-1]],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],AZ:[,[,,"365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",,,,,,,[9],[7]],[,,"(?:222[0-79]\\d|365(?:[0-46-9]\\d|5[0-35-9]))\\d{4}|(?:(?:1[28]|46)\\d|2(?:[045]2|1[24]|2[34]|33|6[23]))\\d{6}",,,,"123123456",,,,[7]],[,,"(?:36554|99[2-9]\\d\\d)\\d{4}|(?:[16]0|4[04]|5[015]|7[07])\\d{7}",,,,"401234567"],[,,"88\\d{7}",,,,"881234567"],[,,"900200\\d{3}",,,,"900200123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[1-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BA:[,[,,"6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",,,,,,,[8,9],[6]],[,,"(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",,,,"30212345",,,[8],[6]],[,,"6040[0-4]\\d{4}|6(?:03|[1-356]|44|7\\d)\\d{6}",,,,"61123456"],[,,"8[08]\\d{6}",,,,"80123456",,,[8]],[,,"9[0246]\\d{6}",,,,"90123456",,,[8]],[,,"8[12]\\d{6}",,,,"82123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BA",387,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70(?:3[0146]|[56]0)\\d{4}",,,,"70341234",,,[8]],,,[,,,,,,,,,[-1]]],BB:[,[,,"(?:246|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",,,,"2464123456",,,,[7]],[,,"246(?:2(?:[3568]\\d|4[0-57-9])|45\\d|69[5-7]|8(?:[2-5]\\d|83))\\d{4}",,,,"2462501234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"(?:246976|900[2-9]\\d\\d)\\d{4}",,,,"9002123456",,,,[7]],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"24631\\d{5}",,,,"2463101234",,,,[7]],"BB",1,"011","1",,,"1|([2-9]\\d{6})$","246$1",,,,,[,,,,,,,,,[-1]],,"246",[,,,,,,,,,[-1]],[,,"246(?:292|367|4(?:1[7-9]|3[01]|44|67)|7(?:36|53))\\d{4}",,,,"2464301234",,,,[7]],,,[,,,,,,,,,[-1]]],BD:[,[,,"1\\d{9}|2\\d{7,8}|88\\d{4,6}|(?:8[0-79]|9\\d)\\d{4,8}|(?:[346]\\d|[57])\\d{5,8}",,,,,,,[6,7,8,9,10]],[,,"(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2[45]\\d\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",,,,"27111234"],[,,"(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",,,,"1812345678",,,[10]],[,,"80[03]\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"96(?:0[469]|1[0-47]|3[389]|6[69]|7[78])\\d{6}",,,,"9604123456",,,[10]],"BD",880,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],[,"(\\d{4})(\\d{3,6})","$1-$2",["[13-9]"],"0$1"],[,"(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BE:[,[,,"4\\d{8}|[1-9]\\d{7}",,,,,,,[8,9]],[,,"80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",,,,"12345678",,,[8]],[,,"4[5-9]\\d{7}",,,,"470123456",,,[9]],[,,"800[1-9]\\d{4}",,,,"80012345",,,[8]],[,,"(?:70(?:2[0-57]|3[0457]|44|69|7[0579])|90(?:0[0-35-8]|1[36]|2[0-3568]|3[0135689]|4[2-68]|5[1-68]|6[0-378]|7[23568]|9[34679]))\\d{4}",,,,"90012345",,,[8]],[,,"7879\\d{4}",,,,"78791234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BE",32,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"78(?:0[57]|1[0458]|2[25]|3[15-8]|48|[56]0|7[078])\\d{4}",,,,"78102345",,,[8]],,,[,,,,,,,,,[-1]]],BF:[,[,,"[025-7]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:49|5[23]|6[56]|9[016-9])|4(?:4[569]|5[4-6]|6[56]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",,,,"20491234"],[,,"(?:0[127]|5[1-8]|[67]\\d)\\d{6}",,,,"70123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BG:[,[,,"[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",,,,,,,[6,7,8,9],[4,5]],[,,"2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",,,,"2123456",,,[6,7,8],[4,5]],[,,"43[07-9]\\d{5}|(?:48|8[7-9]\\d|9(?:8\\d|9[69]))\\d{6}",,,,"48123456",,,[8,9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,"700\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BG",359,"00","0",,,"0",,,,[[,"(\\d{6})","$1",["1"]],[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BH:[,[,,"[136-9]\\d{7}",,,,,,,[8]],[,,"(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|7[7-9]|88)|9[69][69])|7(?:1(?:11|78)|7\\d\\d))\\d{4}",,,,"17001234"],[,,"(?:3(?:[1-79]\\d|8[0-47-9])\\d|6(?:3(?:00|33|6[16])|6(?:3[03-9]|[69]\\d|7[0-6])))\\d{4}",,,,"36001234"],[,,"80\\d{6}",,,,"80123456"],[,,"(?:87|9[014578])\\d{6}",,,,"90123456"],[,,"84\\d{6}",,,,"84123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BI:[,[,,"(?:[267]\\d|31)\\d{6}",,,,,,,[8]],[,,"22\\d{6}",,,,"22201234"],[,,"(?:29|31|6[1289]|7[125-9])\\d{6}",,,,"79561234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BJ:[,[,,"(?:[2689]\\d|51)\\d{6}",,,,,,,[8]],[,,"2(?:02|1[037]|2[45]|3[68])\\d{5}",,,,"20211234"],[,,"(?:51|6\\d|9[013-9])\\d{6}",,,,"90011234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"857[58]\\d{4}",,,,"85751234"],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"81\\d{6}",,,,"81123456"],,,[,,,,,,,,,[-1]]],BL:[,[,,"(?:590|69\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:2[7-9]|5[12]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}",,,,"690001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"BL",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BM:[,[,,"(?:441|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}",,,,"4414123456",,,,[7]],[,,"441(?:[2378]\\d|5[0-39])\\d{5}",,,,"4413701234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BM",1,"011","1",,,"1|([2-8]\\d{6})$","441$1",,,,,[,,,,,,,,,[-1]],,"441",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BN:[,[,,"[2-578]\\d{6}",,,,,,,[7]],[,,"22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}",,,,"2345678"],[,,"(?:22[89]|[78]\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[34]\\d{5}",,,,"5345678"],"BN",673,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BO:[,[,,"(?:[2-467]\\d\\d|8001)\\d{5}",,,,,,,[8,9],[7]],[,,"(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",,,,"22123456",,,[8],[7]],[,,"[67]\\d{7}",,,,"71234567",,,[8]],[,,"8001[07]\\d{4}",,,,"800171234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BO",591,"00(?:1\\d)?","0",,,"0(1\\d)?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[23]|4[46]"],,"0$CC $1"],[,"(\\d{8})","$1",["[67]"],,"0$CC $1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"],,"0$CC $1"]],,[,,,,,,,,,[-1]],,,[,,"8001[07]\\d{4}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BQ:[,[,,"(?:[34]1|7\\d)\\d{5}",,,,,,,[7]],[,,"(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}",,,,"7151234"],[,,"(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",,,,"3181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BQ",599,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"[347]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BR:[,[,,"(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",,,,,,,[8,9,10,11]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",,,,"1123456789",,,[10],[8]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",,,,"11961234567",,,[10,11],[8,9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"300\\d{6}|[59]00\\d{6,7}",,,,"300123456",,,[9,10]],[,,"300\\d{7}|[34]00\\d{5}|4(?:02|37)0\\d{4}",,,,"40041234",,,[8,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BR",55,"00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","0",,,"0(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",,,[[,"(\\d{3,6})","$1",["1(?:1[25-8]|2[357-9]|3[02-68]|4[12568]|5|6[0-8]|8[015]|9[0-47-9])|321|610"]],[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{4})(\\d{4})","$1-$2",["[2-57]","[2357]|4(?:[0-24-9]|3(?:[0-689]|7[1-9]))"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{5})(\\d{4})","$1-$2",["9"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[,,,,,,,,,[-1]],,,[,,"4020\\d{4}|[34]00\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BS:[,[,,"(?:242|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-4]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",,,,"2423456789",,,,[7]],[,,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|[89]9))\\d{4}",,,,"2423591234",,,,[7]],[,,"242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,,[7]],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BS",1,"011","1",,,"1|([3-8]\\d{6})$","242$1",,,,,[,,,,,,,,,[-1]],,"242",[,,,,,,,,,[-1]],[,,"242225\\d{4}",,,,"2422250123"],,,[,,,,,,,,,[-1]]],BT:[,[,,"[17]\\d{7}|[2-8]\\d{6}",,,,,,,[7,8],[6]],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",,,,"2345678",,,[7],[6]],[,,"(?:1[67]|77)\\d{6}",,,,"17123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BT",975,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BW:[,[,,"90\\d{5}|(?:[2-6]|7\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013])|4(?:6[03]|7[1267]|9[0-5])|5(?:3[0389]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",,,,"2401234",,,[7]],[,,"77200\\d{3}|7(?:[1-6]\\d|7[013-9])\\d{5}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"79(?:1(?:[01]\\d|20)|2[0-2]\\d)\\d{3}",,,,"79101234",,,[8]],"BW",267,"00",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["90"]],[,"(\\d{3})(\\d{4})","$1 $2",["[2-6]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BY:[,[,,"(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",,,,"152450911",,,[9],[5,6,7]],[,,"(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",,,,"294911911",,,[9]],[,,"800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}",,,,"8011234567"],[,,"(?:810|902)\\d{7}",,,,"9021234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"249\\d{6}",,,,"249123456",,,[9]],"BY",375,"810","8",,,"0|80?",,"8~10",,[[,"(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],[,"(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,"800\\d{3,7}|(?:8(?:0[13]|10|20\\d)|902)\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BZ:[,[,,"(?:0800\\d|[2-8])\\d{6}",,,,,,,[7,11]],[,,"(?:236|732)\\d{4}|[2-578][02]\\d{5}",,,,"2221234",,,[7]],[,,"6[0-35-7]\\d{5}",,,,"6221234",,,[7]],[,,"0800\\d{7}",,,,"08001234123",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CA:[,[,,"(?:[2-8]\\d|90)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[57])|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[57])|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}",,,,"5002345678"],[,,"600[2-9]\\d{6}",,,,"6002012345"],"CA",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CC:[,[,,"1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10]],[,,"8(?:51(?:0(?:02|31|60|89)|118)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",,,,"891621234",,,[9],[8]],[,,"4(?:83[0-38]|93[01])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CC",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CD:[,[,,"[189]\\d{8}|[1-68]\\d{6}",,,,,,,[7,9]],[,,"12\\d{7}|[1-6]\\d{6}",,,,"1234567"],[,,"88\\d{5}|(?:8[0-2459]|9[017-9])\\d{7}",,,,"991234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CF:[,[,,"(?:[27]\\d{3}|8776)\\d{4}",,,,,,,[8]],[,,"2[12]\\d{6}",,,,"21612345"],[,,"7[0257]\\d{6}",,,,"70012345"],[,,,,,,,,,[-1]],[,,"8776\\d{4}",,,,"87761234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CG:[,[,,"222\\d{6}|(?:0\\d|80)\\d{7}",,,,,,,[9]],[,,"222[1-589]\\d{5}",,,,"222123456"],[,,"0[14-6]\\d{7}",,,,"061234567"],[,,,,,,,,,[-1]],[,,"80(?:0\\d\\d|11[0-4])\\d{4}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CG",242,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["801"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CH:[,[,,"8\\d{11}|[2-9]\\d{8}",,,,,,,[9,12]],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",,,,"212345678",,,[9]],[,,"7[35-9]\\d{7}",,,,"781234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[016]\\d{6}",,,,"900123456",,,[9]],[,,"84[0248]\\d{6}",,,,"840123456",,,[9]],[,,"878\\d{6}",,,,"878123456",,,[9]],[,,,,,,,,,[-1]],"CH",41,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],,[,,"74[0248]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"5[18]\\d{7}",,,,"581234567",,,[9]],,,[,,"860\\d{9}",,,,"860123456789",,,[12]]],CI:[,[,,"[02-9]\\d{7}",,,,,,,[8]],[,,"(?:2(?:0[023]|1[02357]|[23][045]|4[03-5])|3(?:0[06]|1[069]|[2-4][07]|5[09]|6[08]))\\d{5}",,,,"21234567"],[,,"(?:2[0-3]80|97[0-3]\\d)\\d{4}|(?:0[1-9]|[457]\\d|6[014-9]|8[4-9]|95)\\d{6}",,,,"01234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[02-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CK:[,[,,"[2-578]\\d{4}",,,,,,,[5]],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}",,,,"21234"],[,,"[578]\\d{4}",,,,"71234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CL:[,[,,"12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",,,,,,,[9,10,11]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:0\\d|1[0-35-9]|2[1-9]|3[0-2]|40)))|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:0\\d|1[0-35-9]|2[1-9]|3[0-2]|40)))|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"(?:123|8)00\\d{6}",,,,"800123456",,,[9,11]],[,,,,,,,,,[-1]],[,,"600\\d{7,8}",,,,"6001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,"44\\d{7}",,,,"441234567",,,[9]],"CL",56,"(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",,,,,,,1,[[,"(\\d{4})","$1",["1(?:[03-589]|21)|[29]0|78"]],[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[,,,,,,,,,[-1]],,,[,,"600\\d{7,8}",,,,,,,[10,11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CM:[,[,,"(?:[26]\\d\\d|88)\\d{6}",,,,,,,[8,9]],[,,"2(?:22|33)\\d{6}",,,,"222123456",,,[9]],[,,"(?:24[23]|6[5-9]\\d)\\d{6}",,,,"671234567",,,[9]],[,,"88\\d{6}",,,,"88012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CM",237,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CN:[,[,,"1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",,,,,,,[7,8,9,10,11,12],[5,6]],[,,"(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",,,,"1012345678",,,[7,8,9,10,11],[5,6]],[,,"1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|5[0-35-9]|6[25-7]|7[0-35-8]|9[0135-9])\\d{8}",,,,"13123456789",,,[11]],[,,"(?:(?:10|21)8|8)00\\d{7}",,,,"8001234567",,,[10,12]],[,,"16[08]\\d{5}",,,,"16812345",,,[8]],[,,"400\\d{7}|950\\d{7,8}|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",,,,"4001234567",,,[7,8,9,10,11],[5,6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CN",86,"00|1(?:[12]\\d|79)\\d\\d00","0",,,"0|(1(?:[12]\\d|79)\\d\\d)",,"00",,[[,"(\\d{5,6})","$1",["96"]],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{4})(\\d{4})","$1 $2",["16[08]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","26|3(?:[0268]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9])|(?:34|85[23])[0-8]|(?:1|58)[1-9]|(?:63|95)[06-9]|(?:33|85[23]9)[0-46-9]|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[0-8]|9[0-47-9])","26|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23](?:[02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:1|58|85[23]10)[1-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"(?:(?:10|21)8|[48])00\\d{7}|950\\d{7,8}",,,,,,,[10,11,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CO:[,[,,"(?:1\\d|3)\\d{9}|[124-8]\\d{7}",,,,,,,[8,10,11],[7]],[,,"[124-8][2-9]\\d{6}",,,,"12345678",,,[8],[7]],[,,"3333(?:0(?:0\\d|1[0-5])|[4-9]\\d\\d)\\d{3}|33(?:00|3[0-24-9])\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",,,,"3211234567",,,[10]],[,,"1800\\d{7}",,,,"18001234567",,,[11]],[,,"19(?:0[01]|4[78])\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:[14]4|56))?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[14][2-9]|[25-8]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1"]],[[,"(\\d)(\\d{7})","$1 $2",["[14][2-9]|[25-8]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CR:[,[,,"(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",,,,,,,[8,10]],[,,"210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",,,,"22123456",,,[8]],[,,"(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",,,,"83123456",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"90[059]\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210[0-6]|4\\d{3}|5100)\\d{4}",,,,"40001234",,,[8]],"CR",506,"00",,,,"(19(?:0[0-2468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CU:[,[,,"[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",,,,,,,[6,7,8,10],[4,5]],[,,"(?:3[23]|48)\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",,,,"71234567",,,,[4,5]],[,,"5\\d{7}",,,,"51234567",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,"807\\d{7}",,,,"8071234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CU",53,"119","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["5"],"0$1"],[,"(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CV:[,[,,"(?:[2-59]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}",,,,"2211234"],[,,"(?:[34][36]|5[1-389]|9\\d)\\d{5}",,,,"9911234"],[,,"800\\d{4}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CW:[,[,,"(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",,,,,,,[7,8]],[,,"9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",,,,"94351234"],[,,"953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}",,,,"95181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"60[0-2]\\d{4}",,,,"6001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[3467]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],,[,,"955\\d{5}",,,,"95581234",,,[8]],1,"[69]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CX:[,[,,"1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10]],[,,"8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|235)|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",,,,"891641234",,,[9],[8]],[,,"4(?:83[0-38]|93[01])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-2457-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",,,,"1300123456",,,[6,8,10]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CX",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CY:[,[,,"(?:[279]\\d|[58]0)\\d{6}",,,,,,,[8]],[,,"2[2-6]\\d{6}",,,,"22345678"],[,,"9[4-79]\\d{6}",,,,"96123456"],[,,"800\\d{5}",,,,"80001234"],[,,"90[09]\\d{5}",,,,"90012345"],[,,"80[1-9]\\d{5}",,,,"80112345"],[,,"700\\d{5}",,,,"70012345"],[,,,,,,,,,[-1]],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:50|77)\\d{6}",,,,"77123456"],,,[,,,,,,,,,[-1]]],CZ:[,[,,"(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",,,,,,,[9,10,11,12]],[,,"(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",,,,"212345678",,,[9]],[,,"(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}",,,,"601123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:0[05689]|76)\\d{6}",,,,"900123456",,,[9]],[,,"8[134]\\d{7}",,,,"811234567",,,[9]],[,,"70[01]\\d{6}",,,,"700123456",,,[9]],[,,"9[17]0\\d{6}",,,,"910123456",,,[9]],"CZ",420,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"9(?:5\\d|7[2-4])\\d{6}",,,,"972123456",,,[9]],,,[,,"9(?:3\\d{9}|6\\d{7,10})",,,,"93123456789"]],DE:[,[,,"[2579]\\d{5,14}|49(?:[05]\\d{10}|[46][1-8]\\d{4,9})|49(?:[0-25]\\d|3[1-689]|7[1-7])\\d{4,8}|49(?:[0-2579]\\d|[34][1-9]|6[0-8])\\d{3}|49\\d{3,4}|(?:1|[368]\\d|4[0-8])\\d{3,13}",,,,,,,[4,5,6,7,8,9,10,11,12,13,14,15],[2,3]],[,,"(?:32|49[4-6]\\d)\\d{9}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",,,,"30123456",,,[5,6,7,8,9,10,11,12,13,14,15],[2,3,4]],[,,"15[0-25-9]\\d{8}|1(?:6[023]|7\\d)\\d{7,8}",,,,"15123456789",,,[10,11]],[,,"800\\d{7,12}",,,,"8001234567890",,,[10,11,12,13,14,15]],[,,"(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",,,,"9001234567",,,[10,11]],[,,"180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",,,,"18012345",,,[7,8,9,10,11,12,13,14]],[,,"700\\d{8}",,,,"70012345678",,,[11]],[,,,,,,,,,[-1]],"DE",49,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],,[,,"16(?:4\\d{1,10}|[89]\\d{1,11})",,,,"16412345",,,[4,5,6,7,8,9,10,11,12,13,14]],,,[,,,,,,,,,[-1]],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})",,,,"18500123456",,,[8,9,10,11,12,13,14]],,,[,,"1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",,,,"177991234567",,,[12,13]]],DJ:[,[,,"(?:2\\d|77)\\d{6}",,,,,,,[8]],[,,"2(?:1[2-5]|7[45])\\d{5}",,,,"21360003"],[,,"77\\d{6}",,,,"77831001"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DK:[,[,,"[2-9]\\d{7}",,,,,,,[8]],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DK",45,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DM:[,[,,"(?:[58]\\d\\d|767|900)\\d{7}",,,,,,,[10],[7]],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}",,,,"7674201234",,,,[7]],[,,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-7]|70[1-6])\\d{4}",,,,"7672251234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DM",1,"011","1",,,"1|([2-7]\\d{6})$","767$1",,,,,[,,,,,,,,,[-1]],,"767",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DO:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",,,,"8092345678",,,,[7]],[,,"8[024]9[2-9]\\d{6}",,,,"8092345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DO",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"8[024]9",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DZ:[,[,,"(?:[1-4]|[5-79]\\d|80)\\d{7}",,,,,,,[8,9]],[,,"9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[0135689])\\d{6}",,,,"12345678"],[,,"(?:5(?:4[0-29]|5\\d|6[01])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",,,,"551234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"80[3-689]1\\d{5}",,,,"808123456",,,[9]],[,,"80[12]1\\d{5}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,"98[23]\\d{6}",,,,"983123456",,,[9]],"DZ",213,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EC:[,[,,"1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",,,,,,,[8,9,10,11],[7]],[,,"[2-7][2-7]\\d{6}",,,,"22123456",,,[8],[7]],[,,"964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",,,,"991234567",,,[9]],[,,"1800\\d{7}|1[78]00\\d{6}",,,,"18001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[2-7]890\\d{4}",,,,"28901234",,,[8]],"EC",593,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-7]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EE:[,[,,"8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",,,,"3212345",,,[7]],[,,"5(?:[0-35-9]\\d{6}|4(?:[0-57-9]\\d{5}|6(?:[0-24-9]\\d{4}|3(?:[0-35-9]\\d{3}|4000))))|8(?:1(?:0(?:000|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:23|[3-79]\\d)\\d)\\d)|2(?:0(?:000|(?:19|[24-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9]|8[2-4])\\d|7(?:[679]\\d|8[13-9]))\\d)|[349]\\d{4})\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",,,,"51234567",,,[7,8]],[,,"800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}",,,,"80012345"],[,,"(?:40\\d\\d|900)\\d{4}",,,,"9001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"70[0-2]\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],"EE",372,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,"800[2-9]\\d{3}",,,,,,,[7]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EG:[,[,,"[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",,,,"234567890",,,[8,9],[6,7]],[,,"1[0-25]\\d{8}",,,,"1001234567",,,[10]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EH:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"528[89]\\d{5}",,,,"528812345"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0[016-8]|6[1267]|7[0-27]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"EH",212,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"528[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ER:[,[,,"[178]\\d{6}",,,,,,,[7],[6]],[,,"(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}",,,,"8370362",,,,[6]],[,,"(?:17[1-3]|7\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ES:[,[,,"(?:51|[6-9]\\d)\\d{7}",,,,,,,[9]],[,,"96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",,,,"810123456"],[,,"9(?:6906(?:09|10)|7390\\d\\d)\\d\\d|(?:6\\d|7[1-48])\\d{7}",,,,"612345678"],[,,"[89]00\\d{6}",,,,"800123456"],[,,"80[367]\\d{6}",,,,"803123456"],[,,"90[12]\\d{6}",,,,"901123456"],[,,"70\\d{7}",,,,"701234567"],[,,,,,,,,,[-1]],"ES",34,"00",,,,,,,,[[,"(\\d{4})","$1",["905"]],[,"(\\d{6})","$1",["[79]9"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"51\\d{7}",,,,"511234567"],,,[,,,,,,,,,[-1]]],ET:[,[,,"(?:11|[2-59]\\d)\\d{7}",,,,,,,[9],[7]],[,,"116671\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[78]|2[69]|39|4[5-7]|5[1-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",,,,"111112345",,,,[7]],[,,"9\\d{8}",,,,"911234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ET",251,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FI:[,[,,"[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"(?:1[3-79][1-8]|[235689][1-8]\\d)\\d{2,6}",,,,"131234567",,,[5,6,7,8,9]],[,,"(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FI",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,[[,"(\\d{5})","$1",["75[12]"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{6})","$1",["11"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[,,,,,,,,,[-1]],1,"1[03-79]|[2-9]",[,,"20(?:2[023]|9[89])\\d{1,6}|(?:60[12]\\d|7099)\\d{4,5}|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:[1-3]00|7(?:0[1-5]\\d\\d|5[03-9]))\\d{3,7}"],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],FJ:[,[,,"45\\d{5}|(?:0800\\d|[235-9])\\d{6}",,,,,,,[7,11]],[,,"603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",,,,"3212345",,,[7]],[,,"(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",,,,"7012345",,,[7]],[,,"0800\\d{7}",,,,"08001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FK:[,[,,"[2-7]\\d{4}",,,,,,,[5]],[,,"[2-47]\\d{4}",,,,"31234"],[,,"[56]\\d{4}",,,,"51234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FK",500,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FM:[,[,,"(?:[39]\\d\\d|820)\\d{4}",,,,,,,[7]],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",,,,"3201234"],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",,,,"3501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[389]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FO:[,[,,"(?:[2-8]\\d|90)\\d{4}",,,,,,,[6]],[,,"(?:20|[34]\\d|8[19])\\d{4}",,,,"201234"],[,,"(?:[27][1-9]|5\\d)\\d{4}",,,,"211234"],[,,"80[257-9]\\d{3}",,,,"802123"],[,,"90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d",,,,"901123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:6[0-36]|88)\\d{4}",,,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",["[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FR:[,[,,"[1-9]\\d{8}",,,,,,,[9]],[,,"(?:[1-35]\\d|4[1-9])\\d{7}",,,,"123456789"],[,,"700\\d{6}|(?:6\\d|7[3-9])\\d{7}",,,,"612345678"],[,,"80[0-5]\\d{6}",,,,"801234567"],[,,"836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",,,,"891123456"],[,,"8(?:1[01]|2[0156]|84)\\d{6}",,,,"884012345"],[,,,,,,,,,[-1]],[,,"9\\d{8}",,,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["10"]],[,"(\\d{3})(\\d{3})","$1 $2",["1"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"80[6-9]\\d{6}",,,,"806123456"],,,[,,,,,,,,,[-1]]],GA:[,[,,"(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",,,,,,,[7,8]],[,,"[01]1\\d{6}",,,,"01441234",,,[8]],[,,"(?:0[2-7]|6[256]|7[47])\\d{6}|[2-7]\\d{6}",,,,"06031234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GA",241,"00",,,,"0(11\\d{6}|6[256]\\d{6}|7[47]\\d{6})","$1",,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GB:[,[,,"[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",,,,,,,[7,9,10],[4,5,6,8]],[,,"(?:1(?:1(?:3(?:[0-58]\\d\\d|73[03])|(?:4[0-5]|5[0-26-9]|6[0-4]|[78][0-49])\\d\\d)|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:0\\d|20)))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",,,,"1212345678",,,[9,10],[4,5,6,7,8]],[,,"7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",,,,"7400123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GB",44,"00","0"," x",,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],,[,,"76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[39])\\d{6}",,,,"7640123456",,,[10]],1,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GD:[,[,,"(?:473|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",,,,"4732691234",,,,[7]],[,,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|58)|5(?:2[01]|3[3-8])|901)\\d{4}",,,,"4734031234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GD",1,"011","1",,,"1|([2-9]\\d{6})$","473$1",,,,,[,,,,,,,,,[-1]],,"473",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GE:[,[,,"(?:[3-57]\\d\\d|800)\\d{6}",,,,,,,[9],[6,7]],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",,,,"322123456",,,,[6,7]],[,,"5(?:0(?:0(?:0\\d|50)\\d|555[5-9])|(?:111\\d|8(?:58[89]|888))\\d|(?:2222|3333)[0-4]|52(?:00\\d|22[0-4])|75(?:00\\d|7(?:7[7-9]|8[01])))\\d{3}|(?:5(?:[14]4|5[0157-9]|68|7[0147-9]|9[1-35-9])|790)\\d{6}",,,,"555123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70[67]\\d{6}",,,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"70[67]\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GF:[,[,,"(?:[56]94|976)\\d{6}",,,,,,,[9]],[,,"594(?:[023]\\d|1[01]|4[03-9]|5[6-9]|6[0-3]|80|9[014])\\d{4}",,,,"594101234"],[,,"694(?:[0-249]\\d|3[0-48])\\d{4}",,,,"694201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976\\d{6}",,,,"976012345"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GG:[,[,,"(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",,,,,,,[7,9,10],[6]],[,,"1481[25-9]\\d{5}",,,,"1481256789",,,[10],[6]],[,,"7(?:(?:781|839)\\d|911[17])\\d{5}",,,,"7781123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GG",44,"00","0",,,"0|([25-9]\\d{5})$","1481$1",,,,,[,,"76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[39])\\d{6}",,,,"7640123456",,,[10]],,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GH:[,[,,"(?:[235]\\d{3}|800)\\d{5}",,,,,,,[8,9],[7]],[,,"3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",,,,"302345678",,,[9],[7]],[,,"(?:2[0346-8]\\d|5(?:[0457]\\d|6[01]|9[1-6]))\\d{6}",,,,"231234567",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GH",233,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[237]|8[0-2]"]],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"800\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GI:[,[,,"[256]\\d{7}",,,,,,,[8]],[,,"21(?:6[24-7]\\d|90[0-2])\\d{3}|2(?:00|2[25])\\d{5}",,,,"20012345"],[,,"(?:5[146-8]\\d|6(?:06|29))\\d{5}",,,,"57123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GL:[,[,,"(?:19|[2-689]\\d)\\d{4}",,,,,,,[6]],[,,"(?:19|3[1-7]|6[14689]|8[14-79]|9\\d)\\d{4}",,,,"321000"],[,,"[245]\\d{5}",,,,"221234"],[,,"80\\d{4}",,,,"801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3[89]\\d{4}",,,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GM:[,[,,"[2-9]\\d{6}",,,,,,,[7]],[,,"(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}",,,,"5661234"],[,,"(?:[23679]\\d|5[0-389])\\d{5}",,,,"3012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GN:[,[,,"722\\d{6}|(?:3|6\\d)\\d{7}",,,,,,,[8,9]],[,,"3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",,,,"30241234",,,[8]],[,,"6[02356]\\d{7}",,,,"601123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"722\\d{6}",,,,"722123456",,,[9]],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GP:[,[,,"(?:590|69\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}",,,,"590201234"],[,,"69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}",,,,"690001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"GP",590,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GQ:[,[,,"222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",,,,,,,[9]],[,,"33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}",,,,"333091234"],[,,"(?:222|55[015])\\d{6}",,,,"222123456"],[,,"80\\d[1-9]\\d{5}",,,,"800123456"],[,,"90\\d[1-9]\\d{5}",,,,"900123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GR:[,[,,"5005000\\d{3}|(?:[2689]\\d|70)\\d{8}",,,,,,,[10]],[,,"2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",,,,"2123456789"],[,,"68[57-9]\\d{7}|(?:69|94)\\d{8}",,,,"6912345678"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[19]\\d{7}",,,,"9091234567"],[,,"8(?:0[16]|12|[27]5|50)\\d{7}",,,,"8011234567"],[,,"70\\d{8}",,,,"7012345678"],[,,,,,,,,,[-1]],"GR",30,"00",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],[,"(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"5005000\\d{3}",,,,"5005000123"],,,[,,,,,,,,,[-1]]],GT:[,[,,"(?:1\\d{3}|[2-7])\\d{7}",,,,,,,[8,11]],[,,"[267][2-9]\\d{6}",,,,"22456789",,,[8]],[,,"[3-5]\\d{7}",,,,"51234567",,,[8]],[,,"18[01]\\d{8}",,,,"18001112222",,,[11]],[,,"19\\d{9}",,,,"19001112222",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GU:[,[,,"(?:[58]\\d\\d|671|900)\\d{7}",,,,,,,[10],[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GU",1,"011","1",,,"1|([3-9]\\d{6})$","671$1",,1,,,[,,,,,,,,,[-1]],,"671",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GW:[,[,,"[49]\\d{8}|4\\d{6}",,,,,,,[7,9]],[,,"443\\d{6}",,,,"443201234",,,[9]],[,,"9(?:5\\d|6[569]|77)\\d{6}",,,,"955012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"40\\d{5}",,,,"4012345",,,[7]],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["40"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GY:[,[,,"(?:862\\d|9008)\\d{3}|(?:[2-46]\\d|77)\\d{5}",,,,,,,[7]],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-24-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|77[1-57])\\d{4}",,,,"2201234"],[,,"6\\d{6}",,,,"6091234"],[,,"(?:289|862)\\d{4}",,,,"2891234"],[,,"9008\\d{3}",,,,"9008123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HK:[,[,,"8[0-46-9]\\d{6,7}|9\\d{4}(?:\\d(?:\\d(?:\\d{4})?)?)?|(?:[235-79]\\d|46)\\d{6}",,,,,,,[5,6,7,8,9,11]],[,,"(?:384[0-5]|58(?:0[1-8]|1[2-9]))\\d{4}|(?:2(?:[13-9]\\d|2[013-9])|3(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69]|89))\\d{5}",,,,"21234567",,,[8]],[,,"(?:46(?:[01][0-6]|4[0-57-9])|5730|(?:626|848)[01]|707[1-5]|929[03-9])\\d{4}|(?:5(?:[1-59][0-46-9]|6[0-4689]|7[0-2469])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",,,,"51234567",,,[8]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})",,,,"90012345678",,,[5,6,7,8,11]],[,,,,,,,,,[-1]],[,,"8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",,,,"81123456",,,[8]],[,,,,,,,,,[-1]],"HK",852,"00(?:30|5[09]|[126-9]?)",,,,,,"00",,[[,"(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,"7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",,,,"71123456",,,[8]],,,[,,,,,,,,,[-1]],[,,"30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",,,,"30161234",,,[8]],,,[,,,,,,,,,[-1]]],HN:[,[,,"8\\d{10}|[237-9]\\d{7}",,,,,,,[8,11]],[,,"2(?:2(?:0[0139]|1[1-36]|[23]\\d|4[04-6]|5[57]|6[24]|7[0135689]|8[01346-9]|9[0-2])|4(?:07|2[3-59]|3[13-689]|4[0-68]|5[1-35])|5(?:0[78]|16|4[03-5]|5\\d|6[014-6]|74|80)|6(?:[056]\\d|17|2[07]|3[04]|4[0-378]|[78][0-8]|9[01])|7(?:6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",,,,"22123456",,,[8]],[,,"[37-9]\\d{7}",,,,"91234567",,,[8]],[,,"8002\\d{7}",,,,"80021234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["8"]]],[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],[,,,,,,,,,[-1]],,,[,,"8002\\d{7}",,,,,,,[11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HR:[,[,,"(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",,,,,,,[6,7,8,9]],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"9(?:751\\d{5}|8\\d{6,7})|9(?:0[1-9]|[1259]\\d|7[0679])\\d{6}",,,,"921234567",,,[8,9]],[,,"80[01]\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"6[01459]\\d{6}|6[01]\\d{4,5}",,,,"611234",,,[6,7,8]],[,,,,,,,,,[-1]],[,,"7[45]\\d{6}",,,,"74123456",,,[8]],[,,,,,,,,,[-1]],"HR",385,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"62\\d{6,7}|72\\d{6}",,,,"62123456",,,[8,9]],,,[,,,,,,,,,[-1]]],HT:[,[,,"[2-489]\\d{7}",,,,,,,[8]],[,,"2(?:2\\d|5[1-5]|81|9[149])\\d{5}",,,,"22453300"],[,,"[34]\\d{7}",,,,"34101234"],[,,"8\\d{7}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}",,,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HU:[,[,,"[2357]\\d{8}|[1-9]\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",,,,"12345678",,,[8],[6,7]],[,,"(?:[257]0|3[01])\\d{7}",,,,"201234567",,,[9]],[,,"[48]0\\d{6}",,,,"80123456",,,[8]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"21\\d{7}",,,,"211234567",,,[9]],"HU",36,"00","06",,,"06",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57-9]"],"06 $1"]],,[,,,,,,,,,[-1]],,,[,,"[48]0\\d{6}",,,,,,,[8]],[,,"38\\d{7}",,,,"381234567",,,[9]],,,[,,,,,,,,,[-1]]],ID:[,[,,"(?:(?:007803|8\\d{4})\\d|[1-36])\\d{6}|[1-9]\\d{8,10}|[2-9]\\d{7}",,,,,,,[7,8,9,10,11,12,13],[5,6]],[,,"2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",,,,"218350123",,,[7,8,9,10,11],[5,6]],[,,"8[1-35-9]\\d{7,10}",,,,"812345678",,,[9,10,11,12]],[,,"007803\\d{7}|(?:177\\d|800)\\d{5,7}",,,,"8001234567",,,[8,9,10,11,13]],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,"804\\d{7}",,,,"8041234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ID",62,"00[189]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"(?:007803\\d|8071)\\d{6}",,,,,,,[10,13]],[,,"(?:1500|8071\\d{3})\\d{3}",,,,"8071123456",,,[7,10]],,,[,,,,,,,,,[-1]]],IE:[,[,,"(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",,,,,,,[7,8,9,10],[5,6]],[,,"(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",,,,"2212345",,,,[5,6]],[,,"8(?:22|[35-9]\\d)\\d{6}",,,,"850123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}",,,,"1520123456",,,[10]],[,,"18[59]0\\d{6}",,,,"1850123456",,,[10]],[,,"700\\d{6}",,,,"700123456",,,[9]],[,,"76\\d{7}",,,,"761234567",,,[9]],"IE",353,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],[,"(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],[,"(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"18[59]0\\d{6}",,,,,,,[10]],[,,"818\\d{6}",,,,"818123456",,,[9]],,,[,,"88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",,,,"8551234567",,,[10]]],IL:[,[,,"1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,"153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",,,,"21234567",,,[8,11,12],[7]],[,,"5(?:(?:[02368]\\d|[19][2-9]|4[1-9])\\d|5(?:01|1[79]|2[2-8]|3[23]|44|5[05689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",,,,"502345678",,,[9]],[,,"1(?:255|80[019]\\d{3})\\d{3}",,,,"1800123456",,,[7,10]],[,,"1212\\d{4}|1(?:200|9(?:0[01]|19))\\d{6}",,,,"1919123456",,,[8,10]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,"78(?:33|55|77|81)\\d{5}|7(?:18|2[23]|3[237]|47|6[58]|7\\d|82|9[235-9])\\d{6}",,,,"771234567",,,[9]],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"(\\d{4})(\\d{3})","$1-$2",["125"]],[,"(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],[,"(\\d{4})(\\d{6})","$1-$2",["159"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],[,"(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],,[,,,,,,,,,[-1]],,,[,,"1700\\d{6}",,,,,,,[10]],[,,"1599\\d{6}",,,,"1599123456",,,[10]],,,[,,"151\\d{8,9}",,,,"15112340000",,,[11,12]]],IM:[,[,,"1624\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1624[5-8]\\d{5}",,,,"1624756789",,,,[6]],[,,"76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}",,,,"7924123456"],[,,"808162\\d{4}",,,,"8081624567"],[,,"8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}",,,,"9016247890"],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678"],[,,"56\\d{8}",,,,"5612345678"],"IM",44,"00","0",,,"0|([5-8]\\d{5})$","1624$1",,,,,[,,,,,,,,,[-1]],,"74576|(?:16|7[56])24",[,,,,,,,,,[-1]],[,,"3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],IN:[,[,,"(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",,,,,,,[8,9,10,11,12,13],[6,7]],[,,"2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",,,,"7410410123",,,[10],[6,7,8]],[,,"(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",,,,"8123456789",,,[10]],[,,"000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))",,,,"1800123456"],[,,"186[12]\\d{9}",,,,"1861123456789",,,[13]],[,,"1860\\d{7}",,,,"18603451234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IN",91,"00","0",,,"0",,,,[[,"(\\d{7})","$1",["575"]],[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[,,,,,,,,,[-1]],,,[,,"1(?:600\\d{6}|800\\d{4,9})|(?:000800|18(?:03\\d\\d|6(?:0|[12]\\d\\d)))\\d{7}"],[,,"140\\d{7}",,,,"1409305260",,,[10]],,,[,,,,,,,,,[-1]]],IO:[,[,,"3\\d{6}",,,,,,,[7]],[,,"37\\d{5}",,,,"3709100"],[,,"38\\d{5}",,,,"3801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IQ:[,[,,"(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"7[3-9]\\d{8}",,,,"7912345678",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IQ",964,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IR:[,[,,"[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",,,,,,,[4,5,6,7,10],[8]],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|2(?:121|[2689]0\\d)|30[0-2]\\d|4(?:111|40\\d))\\d{4}",,,,"2123456789",,,[6,7,10],[4,5,8]],[,,"9(?:(?:0(?:[1-35]\\d|44)|(?:[13]\\d|2[0-2])\\d)\\d|9(?:(?:[0-2]\\d|4[45])\\d|5[15]0|8(?:1\\d|88)|9(?:0[013]|1[0134]|21|77|9[6-9])))\\d{5}",,,,"9123456789",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"993\\d{7}",,,,"9932123456",,,[10]],"IR",98,"00","0",,,"0",,,,[[,"(\\d{4,5})","$1",["96"],"0$1"],[,"(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"9(?:4440\\d{5}|6(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19]))",,,,,,,[4,5,10]],[,,"96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",,,,"9601",,,[4,5]],,,[,,,,,,,,,[-1]]],IS:[,[,,"(?:38\\d|[4-9])\\d{6}",,,,,,,[7,9]],[,,"(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-245]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",,,,"4101234",,,[7]],[,,"(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[027-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[28]))\\d{4}",,,,"6111234"],[,,"80[08]\\d{4}",,,,"8001234",,,[7]],[,,"90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"49[0-24-79]\\d{4}",,,,"4921234",,,[7]],"IS",354,"00|1(?:0(?:01|[12]0)|100)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"809\\d{4}",,,,"8091234",,,[7]],,,[,,"(?:689|8(?:7[18]|80)|95[48])\\d{4}",,,,"6891234",,,[7]]],IT:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",,,,"0212345678",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"IT",39,"00",,,,,,,,[[,"(\\d{4,5})","$1",["1(?:0|9[246])","1(?:0|9(?:2[2-9]|[46]))"]],[,"(\\d{6})","$1",["1(?:1|92)"]],[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[,,,,,,,,,[-1]],1,,[,,"848\\d{6}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],JE:[,[,,"1534\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1534[0-24-8]\\d{5}",,,,"1534456789",,,,[6]],[,,"7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}",,,,"7797712345"],[,,"80(?:07(?:35|81)|8901)\\d{4}",,,,"8007354567"],[,,"(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",,,,"9018105678"],[,,,,,,,,,[-1]],[,,"701511\\d{4}",,,,"7015115678"],[,,"56\\d{8}",,,,"5612345678"],"JE",44,"00","0",,,"0|([0-24-8]\\d{5})$","1534$1",,,,,[,,"76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[39])\\d{6}",,,,"7640123456"],,,[,,,,,,,,,[-1]],[,,"(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],JM:[,[,,"(?:[58]\\d\\d|658|900)\\d{7}",,,,,,,[10],[7]],[,,"(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:5(?:02|1[0-468]|2[35]|63)|6(?:0[1-3579]|1[0237-9]|[23]\\d|40|5[06]|6[2-589]|7[05]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",,,,"8765230123",,,,[7]],[,,"(?:658295|876(?:2(?:[14-9]\\d|2[013-9]|3[7-9])|[348]\\d\\d|5(?:0[13-9]|1[579]|[2-57-9]\\d|6[0-24-9])|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",,,,"8762101234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"JM",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"658|876",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],JO:[,[,,"(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",,,,,,,[8,9]],[,,"87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-467]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",,,,"62001234",,,[8]],[,,"7(?:[78][0-25-9]|9\\d)\\d{6}",,,,"790123456",,,[9]],[,,"80\\d{6}",,,,"80012345",,,[8]],[,,"9\\d{7}",,,,"90012345",,,[8]],[,,"85\\d{6}",,,,"85012345",,,[8]],[,,"70\\d{7}",,,,"700123456",,,[9]],[,,,,,,,,,[-1]],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],[,"(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,"74(?:66|77)\\d{5}",,,,"746612345",,,[9]],,,[,,,,,,,,,[-1]],[,,"8(?:10|8\\d)\\d{5}",,,,"88101234",,,[8]],,,[,,,,,,,,,[-1]]],JP:[,[,,"00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",,,,,,,[8,9,10,11,12,13,14,15,16,17]],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",,,,"312345678",,,[9]],[,,"[7-9]0[1-9]\\d{7}",,,,"9012345678",,,[10]],[,,"00(?:(?:37|66)\\d{6,13}|(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d)|(?:120|800\\d)\\d{6}",,,,"120123456"],[,,"990\\d{6}",,,,"990123456",,,[9]],[,,,,,,,,,[-1]],[,,"60\\d{7}",,,,"601234567",,,[9]],[,,"50[1-9]\\d{7}",,,,"5012345678",,,[10]],"JP",81,"010","0",,,"0",,,,[[,"(\\d{4})(\\d{4})","$1-$2",["007","0077","00777","00777[01]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[78]|96)|477|51[24]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[78]|96[2457-9])|477|51[24]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[279]|49|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3[3-8]|5[2-9])","[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3(?:[3-6][2-9]|7|8[2-5])|5[2-9])"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["007"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["008"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]|80"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["0"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[78]|96)|477|51[24]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[78]|96[2457-9])|477|51[24]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[279]|49|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[0468][01]|[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3[3-8]|5[2-9])","[14]|[29][2-9]|5[3-9]|7[2-4679]|8(?:[246-9]|3(?:[3-6][2-9]|7|8[2-5])|5[2-9])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]|80"],"0$1"]],[,,"20\\d{8}",,,,"2012345678",,,[10]],,,[,,"00(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d|00(?:37|66)\\d{6,13}"],[,,"570\\d{6}",,,,"570123456",,,[9]],,,[,,,,,,,,,[-1]]],KE:[,[,,"(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",,,,,,,[7,8,9,10]],[,,"(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",,,,"202012345",,,[7,8,9]],[,,"(?:1(?:0[0-2]|1[01])|7\\d\\d)\\d{6}",,,,"712123456",,,[9]],[,,"800[24-8]\\d{5,6}",,,,"800223456",,,[9,10]],[,,"900[02-9]\\d{5}",,,,"900223456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KG:[,[,,"8\\d{9}|(?:[235-8]\\d|99)\\d{7}",,,,,,,[9,10],[5,6]],[,,"312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",,,,"312123456",,,[9],[5,6]],[,,"(?:312(?:58\\d|973)|8801\\d\\d)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|7(?:[07]\\d|55)|99[05-9])\\d{6}",,,,"700123456",,,[9]],[,,"800\\d{6,7}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KG",996,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],[,"(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KH:[,[,,"1\\d{9}|[1-9]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",,,,"23756789",,,[8,9],[6,7]],[,,"(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",,,,"91234567",,,[8,9]],[,,"1800(?:1\\d|2[019])\\d{4}",,,,"1800123456",,,[10]],[,,"1900(?:1\\d|2[09])\\d{4}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KI:[,[,,"(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",,,,,,,[5,8]],[,,"(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",,,,"31234"],[,,"(?:63\\d{3}|73(?:0[0-5]\\d|140))\\d{3}|[67]200[01]\\d{3}",,,,"72001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",,,,"30010000",,,[8]],"KI",686,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KM:[,[,,"[3478]\\d{6}",,,,,,,[7],[4]],[,,"7[4-7]\\d{5}",,,,"7712345",,,,[4]],[,,"[34]\\d{6}",,,,"3212345"],[,,,,,,,,,[-1]],[,,"8\\d{6}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KN:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70))\\d{4}",,,,"8692361234",,,,[7]],[,,"869(?:48[89]|5(?:5[6-8]|6[5-7])|66\\d|76[02-7])\\d{4}",,,,"8697652917",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KN",1,"011","1",,,"1|([2-7]\\d{6})$","869$1",,,,,[,,,,,,,,,[-1]],,"869",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KP:[,[,,"85\\d{6}|(?:19\\d|[2-7])\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}",,,,"21234567",,,,[6,7]],[,,"19[1-3]\\d{7}",,,,"1921234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"238[02-9]\\d{4}|2(?:[0-24-9]\\d|3[0-79])\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KR:[,[,,"00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",,,,,,,[5,6,8,9,10,11,12,13,14],[3,4,7]],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",,,,"22123456",,,[5,6,8,9,10],[3,4,7]],[,,"1(?:05(?:[0-8]\\d|9[0-5])|22[13]\\d)\\d{4,5}|1(?:0[1-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",,,,"1020000000",,,[9,10]],[,,"00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",,,,"801234567",,,[9,11,12,13,14]],[,,"60[2-9]\\d{6}",,,,"602345678",,,[9]],[,,,,,,,,,[-1]],[,,"50\\d{8,9}",,,,"5012345678",,,[10,11]],[,,"70\\d{8}",,,,"7012345678",,,[10]],"KR",82,"00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","0",,,"0(8(?:[1-46-8]|5\\d\\d))?",,,,[[,"(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"],"0$1"],[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3})(\\d{3})","$1 $2 $3",["003","0030"]],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3,4})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{5})(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"]],[,,"15\\d{7,8}",,,,"1523456789",,,[9,10]],,,[,,"00(?:3(?:08\\d{6,7}|68\\d{7})|798\\d{7,9})",,,,,,,[11,12,13,14]],[,,"1(?:5(?:22|44|66|77|88|99)|6(?:[07]0|44|6[16]|88)|8(?:00|33|55|77|99))\\d{4}",,,,"15441234",,,[8]],,,[,,,,,,,,,[-1]]],KW:[,[,,"(?:18|[2569]\\d\\d)\\d{5}",,,,,,,[7,8]],[,,"2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",,,,"22345678",,,[8]],[,,"(?:5(?:2(?:22|5[25])|88[58])|6(?:222|444|70[013-9]|888|93[039])|9(?:11[01]|333|500))\\d{4}|(?:5(?:[05]\\d|1[0-7]|6[56])|6(?:0[034679]|5[015-9]|6\\d|7[67]|9[069])|9(?:0[09]|22|[4679]\\d|55|8[057-9]))\\d{5}",,,,"50012345",,,[8]],[,,"18\\d{5}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],[,"(\\d{3})(\\d{5})","$1 $2",["[25]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KY:[,[,,"(?:345|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|25|[48]8)|9(?:14|4[035-9]))\\d{4}",,,,"3452221234",,,,[7]],[,,"345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",,,,"3453231234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"(?:345976|900[2-9]\\d\\d)\\d{4}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KY",1,"011","1",,,"1|([2-9]\\d{6})$","345$1",,,,,[,,"345849\\d{4}",,,,"3458491234"],,"345",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KZ:[,[,,"33622\\d{5}|(?:7\\d|80)\\d{8}",,,,,,,[10],[5,6,7]],[,,"(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9])|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-246-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",,,,"7123456789",,,,[5,6,7]],[,,"7(?:0[0-25-8]|47|6[02-4]|7[15-8]|85)\\d{7}",,,,"7710009998"],[,,"800\\d{7}",,,,"8001234567"],[,,"809\\d{7}",,,,"8091234567"],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567"],[,,"751\\d{7}",,,,"7511234567"],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,,,,,,,,[-1]],,"33|7",[,,"751\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LA:[,[,,"[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",,,,,,,[8,9,10],[6]],[,,"(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",,,,"21212862",,,[8],[6]],[,,"(?:20(?:[239]\\d|5[24-9]|7[6-8])|302\\d)\\d{6}",,,,"2023123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LA",856,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"30[013-9]\\d{6}",,,,"301234567",,,[9]],,,[,,,,,,,,,[-1]]],LB:[,[,,"[7-9]\\d{7}|[13-9]\\d{6}",,,,,,,[7,8]],[,,"(?:(?:[14-69]\\d|8[02-9])\\d|7(?:[2-57]\\d|62|8[0-7]|9[04-9]))\\d{4}",,,,"1123456",,,[7]],[,,"793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}",,,,"71123456"],[,,,,,,,,,[-1]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,"80\\d{6}",,,,"80123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LC:[,[,,"(?:[58]\\d\\d|758|900)\\d{7}",,,,,,,[10],[7]],[,,"758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}",,,,"7584305678",,,,[7]],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",,,,"7582845678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"LC",1,"011","1",,,"1|([2-8]\\d{6})$","758$1",,,,,[,,,,,,,,,[-1]],,"758",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LI:[,[,,"90\\d{5}|(?:[2378]|6\\d\\d)\\d{6}",,,,,,,[7,9]],[,,"(?:2(?:01|1[27]|22|3\\d|6[02-578]|96)|3(?:33|40|7[0135-7]|8[048]|9[0269]))\\d{4}",,,,"2345678",,,[7]],[,,"(?:6(?:4(?:89|9\\d)|5[0-3]\\d|6(?:0[0-7]|10|2[06-9]|39))\\d|7(?:[37-9]\\d|42|56))\\d{4}",,,,"660234567"],[,,"80(?:02[28]|9\\d\\d)\\d\\d",,,,"8002222",,,[7]],[,,"90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",,,,"9002222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LI",423,"00","0",,,"0|(1001)",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"870(?:28|87)\\d\\d",,,,"8702812",,,[7]],,,[,,"697(?:42|56|[78]\\d)\\d{4}",,,,"697861234",,,[9]]],LK:[,[,,"[1-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",,,,"112345678",,,,[7]],[,,"7[0-25-8]\\d{7}",,,,"712345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"1973\\d{5}",,,,"197312345"],,,[,,,,,,,,,[-1]]],LR:[,[,,"(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",,,,,,,[7,8,9]],[,,"(?:2\\d{3}|33333)\\d{4}",,,,"21234567",,,[8,9]],[,,"(?:(?:330|555|(?:77|88)\\d)\\d|4[67])\\d{5}|[56]\\d{6}",,,,"770123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"332(?:02|[34]\\d)\\d{4}",,,,"332021234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LR",231,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LS:[,[,,"(?:[256]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2\\d{7}",,,,"22123456"],[,,"[56]\\d{7}",,,,"50123456"],[,,"800[256]\\d{4}",,,,"80021234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LT:[,[,,"(?:[3469]\\d|52|[78]0)\\d{6}",,,,,,,[8]],[,,"(?:3[1478]|4[124-6]|52)\\d{6}",,,,"31234567"],[,,"6\\d{7}",,,,"61234567"],[,,"80[02]\\d{5}",,,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,"70[05]\\d{5}",,,,"70012345"],[,,"[89]01\\d{5}",,,,"80123456"],"LT",370,"00","8",,,"[08]",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",,1],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",,1],[,"(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",,1],[,"(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70[67]\\d{5}",,,,"70712345"],,,[,,,,,,,,,[-1]]],LU:[,[,,"35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",,,,,,,[4,5,6,7,8,9,10,11]],[,,"(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",,,,"27123456"],[,,"6(?:[269][18]|5[158]|7[189]|81)\\d{6}",,,,"628123456",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90[015]\\d{5}",,,,"90012345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,,,,,,,,[-1]],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})",,,,"20201234",,,[4,5,6,7,8,9,10]],"LU",352,"00",,,,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LV:[,[,,"(?:[268]\\d|90)\\d{6}",,,,,,,[8]],[,,"6\\d{7}",,,,"63123456"],[,,"2\\d{7}",,,,"21234567"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,"81\\d{6}",,,,"81123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LV",371,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LY:[,[,,"[2-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",,,,"212345678",,,,[7]],[,,"9[1-6]\\d{7}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LY",218,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MA:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"5(?:29(?:[189][05]|2[29]|3[01])|38[89][05])\\d{4}|5(?:2(?:[015-7]\\d|2[02-9]|3[0-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",,,,"520123456"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0[016-8]|6[1267]|7[0-27]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"MA",212,"00","0",,,"0",,,,[[,"(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],[,"(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],[,"(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],[,"(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MC:[,[,,"870\\d{5}|(?:[349]|6\\d)\\d{7}",,,,,,,[8,9]],[,,"(?:870|9[2-47-9]\\d)\\d{5}",,,,"99123456",,,[8]],[,,"4(?:[46]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}",,,,"612345678"],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MC",377,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[39]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[39]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"870\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MD:[,[,,"(?:[235-7]\\d|[89]0)\\d{6}",,,,,,,[8]],[,,"(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}",,,,"22212345"],[,,"562\\d{5}|(?:6\\d|7[16-9])\\d{6}",,,,"62112345"],[,,"800\\d{5}",,,,"80012345"],[,,"90[056]\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,,,,,,,,[-1]],[,,"3[08]\\d{6}",,,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"803\\d{5}",,,,"80312345"],,,[,,,,,,,,,[-1]]],ME:[,[,,"(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",,,,,,,[8,9],[6]],[,,"(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",,,,"30234567",,,[8],[6]],[,,"6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",,,,"67622901",,,[8]],[,,"80(?:[0-2578]|9\\d)\\d{5}",,,,"80080002"],[,,"9(?:4[1568]|5[178])\\d{5}",,,,"94515151",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"78[1-49]\\d{5}",,,,"78108780",,,[8]],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"77[1-9]\\d{5}",,,,"77273012",,,[8]],,,[,,,,,,,,,[-1]]],MF:[,[,,"(?:590|69\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[29]|3[0-5]))\\d{4}",,,,"690001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"MF",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MG:[,[,,"[23]\\d{8}",,,,,,,[9],[7]],[,,"2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}",,,,"202123456",,,,[7]],[,,"3[2-49]\\d{7}",,,,"321234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"22\\d{7}",,,,"221234567"],"MG",261,"00","0",,,"0|([24-9]\\d{6})$","20$1",,,[[,"(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MH:[,[,,"329\\d{4}|(?:[256]\\d|45)\\d{5}",,,,,,,[7]],[,,"(?:247|528|625)\\d{4}",,,,"2471234"],[,,"(?:(?:23|54)5|329|45[56])\\d{4}",,,,"2351234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"635\\d{4}",,,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MK:[,[,,"[2-578]\\d{7}",,,,,,,[8],[6,7]],[,,"(?:2(?:[23]\\d|5[0-24578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",,,,"22012345",,,,[6,7]],[,,"7(?:4(?:60\\d|747)|94(?:[01]\\d|2[0-4]))\\d{3}|7(?:[0-25-8]\\d|3[2-4]|42|9[23])\\d{5}",,,,"72345678"],[,,"800\\d{5}",,,,"80012345"],[,,"5[02-9]\\d{6}",,,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}",,,,"80123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MK",389,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ML:[,[,,"[24-9]\\d{7}",,,,,,,[8]],[,,"2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}",,,,"20212345"],[,,"2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[239])\\d{6}",,,,"65012345"],[,,"80\\d{6}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ML",223,"00",,,,,,,,[[,"(\\d{4})","$1",["67[057-9]|74[045]","67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[,,,,,,,,,[-1]],,,[,,"80\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MM:[,[,,"1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",,,,,,,[6,7,8,9,10],[5]],[,,"(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[2-469]|39|46|6[25]|7[0-3]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|2[246]|39|46|62|7[0-3]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[0-3])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|247[23]|3(?:20\\d|470)|4(?:2[04]\\d|47[23])|7(?:(?:3\\d|8[01459])\\d|4(?:39|60|7[013]))))\\d{4}|5(?:2(?:2\\d{5,6}|47[023]\\d{4})|(?:347[23]|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[0-2])|8(?:20\\d|47[02])|9(?:20\\d|47[01]))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:2\\d|4[1-9]|51)\\d|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",,,,"1234567",,,[6,7,8,9],[5]],[,,"(?:17[01]|9(?:2[0-4]|(?:3[0-36]|(?:6\\d|8[89]|98)\\d)\\d|4(?:[1379]\\d|88)|5[0-6])\\d)\\d{4}|9(?:[69]1|73)\\d{6}|9(?:[68]\\d|9[089])\\d{5}|9(?:2[56]|34|4[0245]|7[5-9]|9[4-7])\\d{7}",,,,"92123456",,,[7,8,9,10]],[,,"80080(?:[01][1-9]|2\\d)\\d{3}",,,,"8008001234",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1333\\d{4}|[12]468\\d{4}",,,,"13331234",,,[8]],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],[,"(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],[,"(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MN:[,[,,"[12]\\d{7,9}|[57-9]\\d{7}",,,,,,,[8,9,10],[4,5,6]],[,,"[12]2[1-3]\\d{5,6}|7(?:0[0-5]\\d|128)\\d{4}|(?:[12](?:1|27)|5[368])\\d{6}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",,,,"53123456",,,,[4,5,6]],[,,"(?:83[01]|920)\\d{5}|(?:5[05]|8[05689]|9[013-9])\\d{6}",,,,"88123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"712[0-79]\\d{4}|7(?:1[013-9]|[5-8]\\d)\\d{5}",,,,"75123456",,,[8]],"MN",976,"001","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MO:[,[,,"(?:28|[68]\\d)\\d{6}",,,,,,,[8]],[,,"(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",,,,"28212345"],[,,"6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:[02][5-9]|[146-8]\\d|[35][0-4]))\\d{4}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MO",853,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[268]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MP:[,[,,"[58]\\d{9}|(?:67|90)0\\d{7}",,,,,,,[10],[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MP",1,"011","1",,,"1|([2-9]\\d{6})$","670$1",,1,,,[,,,,,,,,,[-1]],,"670",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MQ:[,[,,"69\\d{7}|(?:59|97)6\\d{6}",,,,,,,[9]],[,,"596(?:0[0-7]|10|2[7-9]|3[05-9]|4[0-46-8]|[5-7]\\d|8[09]|9[4-8])\\d{4}",,,,"596301234"],[,,"69(?:6(?:[0-47-9]\\d|5[0-6]|6[0-4])|727)\\d{4}",,,,"696201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976(?:6[1-9]|7[0-367])\\d{4}",,,,"976612345"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MR:[,[,,"(?:[2-4]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"(?:25[08]|35\\d|45[1-7])\\d{5}",,,,"35123456"],[,,"[2-4][0-46-9]\\d{6}",,,,"22123456"],[,,"800\\d{5}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MR",222,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MS:[,[,,"(?:[58]\\d\\d|664|900)\\d{7}",,,,,,,[10],[7]],[,,"6644(?:1[0-3]|91)\\d{4}",,,,"6644912345",,,,[7]],[,,"664(?:3(?:49|9[1-6])|49[2-6])\\d{4}",,,,"6644923456",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MS",1,"011","1",,,"1|([34]\\d{6})$","664$1",,,,,[,,,,,,,,,[-1]],,"664",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MT:[,[,,"3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2(?:0(?:[19]\\d|3[1-4]|6[059])|[1-357]\\d\\d)\\d{4}",,,,"21001234"],[,,"(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",,,,"96961234"],[,,"800[3467]\\d{4}",,,,"80071234"],[,,"5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}",,,,"50037123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3550\\d{4}",,,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],,[,,"7117\\d{4}",,,,"71171234"],,,[,,,,,,,,,[-1]],[,,"501\\d{5}",,,,"50112345"],,,[,,,,,,,,,[-1]]],MU:[,[,,"(?:[2-468]|5\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-7])|54(?:[34]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",,,,"54480123"],[,,"5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|5(?:2[589]|4[3489]|7\\d|8[0-689]|9[0-8])\\d{5}",,,,"52512345",,,[8]],[,,"80[0-2]\\d{4}",,,,"8001234",,,[7]],[,,"30\\d{5}",,,,"3012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3(?:20|9\\d)\\d{4}",,,,"3201234",,,[7]],"MU",230,"0(?:0|[24-7]0|3[03])",,,,,,"020",,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],[,"(\\d{4})(\\d{4})","$1 $2",["5"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MV:[,[,,"(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",,,,,,,[7,10]],[,,"(?:3(?:0[0-3]|3[0-59])|6(?:[57][02468]|6[024-68]|8[024689]))\\d{4}",,,,"6701234",,,[7]],[,,"46[46]\\d{4}|(?:7\\d|9[13-9])\\d{5}",,,,"7712345",,,[7]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"4[05]0\\d{4}",,,,"4001234",,,[7]],,,[,,,,,,,,,[-1]]],MW:[,[,,"1\\d{6}(?:\\d{2})?|(?:[23]1|77|88|99)\\d{7}",,,,,,,[7,9]],[,,"(?:1[2-9]|21\\d\\d)\\d{5}",,,,"1234567"],[,,"111\\d{6}|(?:31|77|88|99)\\d{7}",,,,"991234567",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MX:[,[,,"(?:1(?:[01467]\\d|[2359][1-9]|8[1-79])|[2-9]\\d)\\d{8}",,,,,,,[10,11],[7,8]],[,,"(?:2(?:0[01]|2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7}",,,,"2001234567",,,[10],[7,8]],[,,"(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))\\d{7}",,,,"12221234567",,,,[7,8]],[,,"8(?:00|88)\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,"300\\d{7}",,,,"3001234567",,,[10]],[,,"500\\d{7}",,,,"5001234567",,,[10]],[,,,,,,,,,[-1]],"MX",52,"0[09]","01",,,"0(?:[12]|4[45])|1",,"00",,[[,"(\\d{5})","$1",["53"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MY:[,[,,"1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",,,,"323856789",,,[8,9],[6,7]],[,,"1(?:4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:0\\d|1[01]|2[2-6]))|(?:(?:[269]|59)\\d|[37][1-9]|4[235-9])\\d|8(?:1[23]|[236]\\d|4[06]|5[7-9]|7[016-9]|8[01]|9[0-8]))\\d{5}",,,,"123456789",,,[9,10]],[,,"1[378]00\\d{6}",,,,"1300123456",,,[10]],[,,"1600\\d{6}",,,,"1600123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",,,,"1546012345",,,[10]],"MY",60,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MZ:[,[,,"(?:2|8\\d)\\d{7}",,,,,,,[8,9]],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",,,,"21123456",,,[8]],[,,"8[2-79]\\d{7}",,,,"821234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MZ",258,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NA:[,[,,"[68]\\d{7,8}",,,,,,,[8,9]],[,,"6(?:1(?:[02-4]\\d\\d|17)|2(?:17|54\\d|69|70)|3(?:17|2[0237]\\d|34|6[289]|7[01]|81)|4(?:17|(?:27|41|5[25])\\d|69|7[01])|5(?:17|2[236-8]\\d|69|7[01])|6(?:17|26\\d|38|42|69|7[01])|7(?:17|(?:2[2-4]|30)\\d|6[89]|7[01]))\\d{4}|6(?:1(?:2[2-7]|3[01378]|4[0-4]|69|7[014])|25[0-46-8]|32\\d|4(?:2[0-27]|4[016]|5[0-357])|52[02-9]|62[56]|7(?:2[2-69]|3[013]))\\d{4}",,,,"61221234"],[,,"(?:60|8[1245])\\d{7}",,,,"811234567",,,[9]],[,,"80\\d{7}",,,,"800123456",,,[9]],[,,"8701\\d{5}",,,,"870123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8(?:3\\d\\d|86)\\d{5}",,,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NC:[,[,,"[2-57-9]\\d{5}",,,,,,,[6]],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}",,,,"201234"],[,,"(?:5[0-4]|[79]\\d|8[0-79])\\d{4}",,,,"751234"],[,,,,,,,,,[-1]],[,,"36\\d{4}",,,,"366711"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NC",687,"00",,,,,,,,[[,"(\\d{3})","$1",["5[6-8]"]],[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NE:[,[,,"[0289]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",,,,"20201234"],[,,"(?:23|8[014589]|9\\d)\\d{6}",,,,"93123456"],[,,"08\\d{6}",,,,"08123456"],[,,"09\\d{6}",,,,"09123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NF:[,[,,"[13]\\d{5}",,,,,,,[6],[5]],[,,"(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}",,,,"106609",,,,[5]],[,,"(?:14|3[58])\\d{4}",,,,"381234",,,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NF",672,"00",,,,"([0-258]\\d{4})$","3$1",,,[[,"(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],[,"(\\d)(\\d{5})","$1 $2",["[13]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NG:[,[,,"(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",,,,,,,[7,8,10,11,12,13,14],[5,6]],[,,"(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",,,,"18040123",,,[7,8],[5,6]],[,,"(?:702[0-24-9]|8(?:01|19)[01])\\d{6}|(?:70[13-689]|8(?:0[2-9]|1[0-8])|90[1-9])\\d{7}",,,,"8021234567",,,[10]],[,,"800\\d{7,11}",,,,"80017591759",,,[10,11,12,13,14]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NG",234,"009","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"700\\d{7,11}",,,,"7001234567",,,[10,11,12,13,14]],,,[,,,,,,,,,[-1]]],NI:[,[,,"(?:1800|[25-8]\\d{3})\\d{4}",,,,,,,[8]],[,,"2\\d{7}",,,,"21234567"],[,,"(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",,,,"81234567"],[,,"1800\\d{4}",,,,"18001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NL:[,[,,"(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",,,,,,,[5,6,7,8,9,10]],[,,"(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",,,,"101234567",,,[9]],[,,"6[1-58]\\d{7}",,,,"612345678",,,[9]],[,,"800\\d{4,7}",,,,"8001234",,,[7,8,9,10]],[,,"90[069]\\d{4,7}",,,,"9061234",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:85|91)\\d{7}",,,,"851234567",,,[9]],"NL",31,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["1[238]|[34]"]],[,"(\\d{2})(\\d{3,4})","$1 $2",["14"]],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],[[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],[,,"66\\d{7}",,,,"662345678",,,[9]],,,[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)\\d",,,,,,,[5,6]],[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",,,,"14020",,,[5,6,9]],,,[,,,,,,,,,[-1]]],NO:[,[,,"(?:0|[2-9]\\d{3})\\d{4}",,,,,,,[5,8]],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",,,,"21234567",,,[8]],[,,"(?:4[015-8]|5[89]|9\\d)\\d{6}",,,,"40612345",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"NO",47,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|5[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],,[,,,,,,,,,[-1]],1,"[02-689]|7[0-8]",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],NP:[,[,,"9\\d{9}|[1-9]\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",,,,"14567890",,,[8],[6,7]],[,,"9(?:6[0-3]|7[245]|8[0-24-68])\\d{7}",,,,"9841234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NP",977,"00","0",,,"0",,,,[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["[1-8]|9(?:[1-579]|6[2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NR:[,[,,"(?:444|(?:55|8\\d)\\d|666)\\d{4}",,,,,,,[7]],[,,"444\\d{4}",,,,"4441234"],[,,"(?:55[3-9]|666|8\\d\\d)\\d{4}",,,,"5551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NU:[,[,,"(?:[47]|888\\d)\\d{3}",,,,,,,[4,7]],[,,"[47]\\d{3}",,,,"7012",,,[4]],[,,"888[4-9]\\d{3}",,,,"8884012",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NU",683,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NZ:[,[,,"[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",,,,,,,[5,6,7,8,9,10]],[,,"24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",,,,"32345678",,,[8],[7]],[,,"2[0-27-9]\\d{7,8}|21\\d{6}",,,,"211234567",,,[8,9,10]],[,,"508\\d{6,7}|80\\d{6,8}",,,,"800123456",,,[8,9,10]],[,,"(?:11\\d{5}|50(?:0[08]|30|66|77))\\d{3}|90\\d{6,8}",,,,"900123456",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,"70\\d{7}",,,,"701234567",,,[9]],[,,,,,,,,,[-1]],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,8})","$1 $2",["83"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[0367]|[89]0"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],,[,,"[28]6\\d{6,7}",,,,"26123456",,,[8,9]],,,[,,,,,,,,,[-1]],[,,"83\\d{3,8}",,,,"83012378"],,,[,,,,,,,,,[-1]]],OM:[,[,,"(?:1505|[279]\\d{3}|500)\\d{4}|8007\\d{4,5}",,,,,,,[7,8,9]],[,,"2[2-6]\\d{6}",,,,"23123456",,,[8]],[,,"(?:1505|90[1-9]\\d)\\d{4}|(?:7[1289]|9[1-9])\\d{6}",,,,"92123456",,,[8]],[,,"500\\d{4}|8007\\d{4,5}",,,,"80071234"],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"OM",968,"00",,,,,,,,[[,"(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],[,"(\\d{2})(\\d{6})","$1 $2",["2"]],[,"(\\d{4})(\\d{4})","$1 $2",["[179]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PA:[,[,,"(?:[1-57-9]|6\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[58]|7[0167]|8[258]|9[139])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[026-9])|3(?:[089]\\d|1[014-7]|2[0-5]|33|4[0-79]|55|6[068]|7[03-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[056]|7[0-24-9]|8[6-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",,,,"2001234",,,[7]],[,,"(?:1[16]1|21[89]|6(?:[02-9]\\d|1[0-6])\\d|8(?:1[01]|7[23]))\\d{4}",,,,"61234567"],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",,,,"8601234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["6"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PE:[,[,,"(?:[14-8]|9\\d)\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",,,,"11234567",,,[8],[6,7]],[,,"9\\d{8}",,,,"912345678",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"805\\d{5}",,,,"80512345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,"80[24]\\d{5}",,,,"80212345",,,[8]],[,,,,,,,,,[-1]],"PE",51,"19(?:1[124]|77|90)00","0"," Anexo ",,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PF:[,[,,"[48]\\d{7}|4\\d{5}",,,,,,,[6,8]],[,,"4(?:0[4-689]|9[4-68])\\d{5}",,,,"40412345",,,[8]],[,,"8[7-9]\\d{6}",,,,"87123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"499\\d{5}",,,,"49901234",,,[8]],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[48]"]]],,[,,,,,,,,,[-1]],,,[,,"44\\d{4}",,,,,,,[6]],[,,"44\\d{4}",,,,"440123",,,[6]],,,[,,,,,,,,,[-1]]],PG:[,[,,"(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",,,,,,,[7,8]],[,,"(?:64[1-9]|7730|85[02-46-9])\\d{4}|(?:3[0-2]|4[257]|5[34]|77[0-24]|9[78])\\d{5}",,,,"3123456"],[,,"77(?:3[1-9]|[5-9]\\d)\\d{4}|(?:7[0-689]|81)\\d{6}",,,,"70123456",,,[8]],[,,"180\\d{4}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2(?:0[0-47]|7[568])\\d{4}",,,,"2751234",,,[7]],"PG",675,"00|140[1-3]",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],[,"(\\d{4})(\\d{4})","$1 $2",["[78]"]]],,[,,"27[01]\\d{4}",,,,"2700123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PH:[,[,,"1800\\d{7,9}|(?:2|[89]\\d{4})\\d{5}|[2-8]\\d{8}|[28]\\d{7}",,,,,,,[6,8,9,10,11,12,13],[4,5,7]],[,,"(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|2\\d{5}(?:\\d{2})?|8[2-8]\\d{7}",,,,"21234567",,,[6,8,9,10],[4,5,7]],[,,"(?:81[37]|9(?:0[5-9]|1[0-24-9]|2[0-35-9]|[35]\\d|4[235-9]|6[0-25-8]|7[1-9]|8[189]|9[4-9]))\\d{7}",,,,"9051234567",,,[10]],[,,"1800\\d{7,9}",,,,"180012345678",,,[11,12,13]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PH",63,"00","0",,,"0",,,,[[,"(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PK:[,[,,"122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",,,,,,,[8,9,10,11,12],[5,6,7]],[,,"(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",,,,"2123456789",,,[9,10],[5,6,7,8]],[,,"3(?:[014]\\d|2[0-5]|3[0-7]|55|64)\\d{7}",,,,"3012345678",,,[10]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,"122\\d{6}",,,,"122044444",,,[9]],[,,,,,,,,,[-1]],"PK",92,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["[89]0"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["1"]],[,"(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],[,"(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",,,,"21111825888",,,[11,12]],,,[,,,,,,,,,[-1]]],PL:[,[,,"[1-57-9]\\d{6}(?:\\d{2})?|6\\d{5,8}",,,,,,,[6,7,8,9]],[,,"(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",,,,"123456789",,,[7,9]],[,,"(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",,,,"512345678",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"70[01346-8]\\d{6}",,,,"701234567",,,[9]],[,,"801\\d{6}",,,,"801234567",,,[9]],[,,,,,,,,,[-1]],[,,"39\\d{7}",,,,"391234567",,,[9]],"PL",48,"00",,,,,,,,[[,"(\\d{5})","$1",["19"]],[,"(\\d{3})(\\d{3})","$1 $2",["11|64"]],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["39|45|5[0137]|6[0469]|7[02389]|8[08]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-8]|9[145]"]]],,[,,"64\\d{4,7}",,,,"641234567"],,,[,,,,,,,,,[-1]],[,,"804\\d{6}",,,,"804123456",,,[9]],,,[,,,,,,,,,[-1]]],PM:[,[,,"[45]\\d{5}",,,,,,,[6]],[,,"(?:4[1-3]|50)\\d{4}",,,,"430123"],[,,"(?:4[02-4]|5[05])\\d{4}",,,,"551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PM",508,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PR:[,[,,"(?:[589]\\d\\d|787)\\d{7}",,,,,,,[10],[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"PR",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,"787|939",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PS:[,[,,"[2489]2\\d{6}|(?:1\\d|5)\\d{8}",,,,,,,[8,9,10],[7]],[,,"(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",,,,"22234567",,,[8],[7]],[,,"5[69]\\d{7}",,,,"599123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,,,,,,,,[-1]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PS",970,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PT:[,[,,"(?:[26-9]\\d|30)\\d{7}",,,,,,,[9]],[,,"2(?:[12]\\d|[35][1-689]|4[1-59]|6[1-35689]|7[1-9]|8[1-69]|9[1256])\\d{6}",,,,"212345678"],[,,"6[356]9230\\d{3}|(?:6[036]93|9(?:[1-36]\\d\\d|480))\\d{5}",,,,"912345678"],[,,"80[02]\\d{6}",,,,"800123456"],[,,"(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}",,,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}",,,,"808123456"],[,,"884[0-4689]\\d{5}",,,,"884123456"],[,,"30\\d{7}",,,,"301234567"],"PT",351,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70(?:7\\d|8[17])\\d{5}",,,,"707123456"],,,[,,"600\\d{6}",,,,"600110000"]],PW:[,[,,"(?:[24-8]\\d\\d|345|900)\\d{4}",,,,,,,[7]],[,,"(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",,,,"2771234"],[,,"(?:45[0-5]|6[2-4689]0|(?:77|88)\\d)\\d{4}",,,,"6201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PY:[,[,,"59\\d{4,6}|(?:[2-46-9]\\d|5[0-8])\\d{4,7}",,,,,,,[6,7,8,9],[5]],[,,"(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",,,,"212345678",,,[7,8,9],[5,6]],[,,"9(?:51|6[129]|[78][1-6]|9[1-5])\\d{6}",,,,"961456789",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8700[0-4]\\d{4}",,,,"870012345",,,[9]],"PY",595,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],[,"(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],[,"(\\d{3})(\\d{6})","$1 $2",["9"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"[2-9]0\\d{4,7}",,,,"201234567"],,,[,,,,,,,,,[-1]]],QA:[,[,,"[2-7]\\d{7}|(?:2\\d\\d|800)\\d{4}",,,,,,,[7,8]],[,,"(?:23|4[04])\\d{6}",,,,"44123456",,,[8]],[,,"(?:28|[35-7]\\d)\\d{6}",,,,"33123456",,,[8]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"QA",974,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]],,[,,"2(?:[12]\\d|61)\\d{4}",,,,"2123456",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RE:[,[,,"9769\\d{5}|(?:26|[68]\\d)\\d{7}",,,,,,,[9]],[,,"26(?:2\\d\\d|30[01])\\d{4}",,,,"262161234"],[,,"(?:69(?:2\\d\\d|3(?:0[0-46]|1[013]|2[0-2]|3[0-39]|4\\d|5[05]|6[0-26]|7[0-27]|8[0-8]|9[0-479]))|9769\\d)\\d{4}",,,,"692123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89[1-37-9]\\d{6}",,,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RE",262,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],,[,,,,,,,,,[-1]],1,"26[23]|69|[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RO:[,[,,"(?:[237]\\d|[89]0)\\d{7}|[23]\\d{5}",,,,,,,[6,9]],[,,"[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d",,,,"211234567"],[,,"7[01]20\\d{5}|7(?:0[013-9]|1[01]|[2-7]\\d|8[03-8]|9[09])\\d{6}",,,,"712034567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[0136]\\d{6}",,,,"900123456",,,[9]],[,,"801\\d{6}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RO",40,"00","0"," int ",,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],[,"(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:37\\d|80[578])\\d{6}",,,,"372123456",,,[9]],,,[,,,,,,,,,[-1]]],RS:[,[,,"38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",,,,,,,[6,7,8,9,10,11,12],[4,5]],[,,"(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",,,,"10234567",,,[7,8,9,10,11,12],[4,5,6]],[,,"6(?:[0-689]|7\\d)\\d{6,7}",,,,"601234567",,,[8,9,10]],[,,"800\\d{3,9}",,,,"80012345"],[,,"(?:78\\d|90[0169])\\d{3,7}",,,,"90012345",,,[6,7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RS",381,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],[,"(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7[06]\\d{4,10}",,,,"700123456"],,,[,,,,,,,,,[-1]]],RU:[,[,,"[347-9]\\d{9}",,,,,,,[10],[7]],[,,"(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",,,,"3011234567",,,,[7]],[,,"9\\d{9}",,,,"9123456789"],[,,"80[04]\\d{7}",,,,"8001234567"],[,,"80[39]\\d{7}",,,,"8091234567"],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567"],[,,,,,,,,,[-1]],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[0-79]"]],[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"],"8 ($1)",,1]],[[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"],"8 ($1)",,1]],[,,,,,,,,,[-1]],1,"3[04-689]|[489]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RW:[,[,,"(?:06|[27]\\d\\d|[89]00)\\d{6}",,,,,,,[8,9]],[,,"(?:06|2[23568]\\d)\\d{6}",,,,"250123456"],[,,"7[238]\\d{7}",,,,"720123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900\\d{6}",,,,"900123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RW",250,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SA:[,[,,"92\\d{7}|(?:[15]|8\\d)\\d{8}",,,,,,,[9,10],[7]],[,,"1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",,,,"112345678",,,[9],[7]],[,,"5(?:[013-689]\\d|7[0-36-8])\\d{6}",,,,"512345678",,,[9]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"925\\d{6}",,,,"925012345",,,[9]],[,,"920\\d{6}",,,,"920012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SA",966,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["9"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"811\\d{7}",,,,"8110123456",,,[10]],,,[,,,,,,,,,[-1]]],SB:[,[,,"(?:[1-6]|[7-9]\\d\\d)\\d{4}",,,,,,,[5,7]],[,,"(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",,,,"40123",,,[5]],[,,"48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",,,,"7421234"],[,,"1[38]\\d{3}",,,,"18123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[12]\\d{3}",,,,"51123",,,[5]],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SC:[,[,,"8000\\d{3}|(?:[249]\\d|64)\\d{5}",,,,,,,[7]],[,,"4[2-46]\\d{5}",,,,"4217123"],[,,"2[5-8]\\d{5}",,,,"2510123"],[,,"8000\\d{3}",,,,"8000000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"971\\d{4}|(?:64|95)\\d{5}",,,,"6412345"],"SC",248,"010|0[0-2]",,,,,,"00",,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SD:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1(?:5\\d|8[35-7])\\d{6}",,,,"153123456"],[,,"(?:1[0-2]|9[0-3569])\\d{7}",,,,"911231234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SE:[,[,,"(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",,,,,,,[6,7,8,9,10,12]],[,,"(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",,,,"8123456",,,[7,8,9]],[,,"7[02369]\\d{7}",,,,"701234567",,,[9]],[,,"20\\d{4,7}",,,,"20123456",,,[6,7,8,9]],[,,"649\\d{6}|9(?:00|39|44)[1-8]\\d{3,6}",,,,"9001234567",,,[7,8,9,10]],[,,"77[0-7]\\d{6}",,,,"771234567",,,[9]],[,,"75[1-8]\\d{6}",,,,"751234567",,,[9]],[,,,,,,,,,[-1]],"SE",46,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1"],[,"(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1"],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1"]],[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(\\d{3})(\\d{4})","$1 $2",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"]],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1 $2 $3",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["10|7"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],[,,"74[02-9]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"10[1-8]\\d{6}",,,,"102345678",,,[9]],,,[,,"(?:25[245]|67[3-68])\\d{9}",,,,"254123456789",,,[12]]],SG:[,[,,"(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",,,,,,,[8,10,11]],[,,"662[0-24-9]\\d{4}|6(?:[1-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",,,,"61234567",,,[8]],[,,"(?:8(?:01[0-7]|[1-8]\\d\\d|9(?:[014]\\d|2[1-9]|3[0-489]|5[0-2]))|9[0-8]\\d\\d)\\d{4}",,,,"81234567",,,[8]],[,,"(?:18|8)00\\d{7}",,,,"18001234567",,,[10,11]],[,,"1900\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[12]\\d|666)\\d{5}",,,,"31234567",,,[8]],"SG",65,"0[0-3]\\d",,,,,,,,[[,"(\\d{4,5})","$1",["1[013-9]|77","1(?:[013-8]|9(?:0[1-9]|[1-9]))|77"]],[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:01|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:01|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7000\\d{7}",,,,"70001234567",,,[11]],,,[,,,,,,,,,[-1]]],SH:[,[,,"(?:[256]\\d|8)\\d{3}",,,,,,,[4,5]],[,,"2(?:[0-57-9]\\d|6[4-9])\\d\\d",,,,"22158"],[,,"[56]\\d{4}",,,,"51234",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"262\\d\\d",,,,"26212",,,[5]],"SH",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],1,"[256]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SI:[,[,,"[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",,,,,,,[5,6,7,8]],[,,"(?:[1-357][2-8]|4[24-8])\\d{6}",,,,"12345678",,,[8],[7]],[,,"65(?:1\\d|55|[67]0)\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",,,,"31234567",,,[8]],[,,"80\\d{4,6}",,,,"80123456",,,[6,7,8]],[,,"89[1-3]\\d{2,5}|90\\d{4,6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:59\\d\\d|8(?:1(?:[67]\\d|8[01389])|2(?:0\\d|2[0378]|8[0-2489])|3[389]\\d))\\d{4}",,,,"59012345",,,[8]],"SI",386,"00|10(?:22|66|88|99)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SJ:[,[,,"0\\d{4}|(?:[4589]\\d|79)\\d{6}",,,,,,,[5,8]],[,,"79\\d{6}",,,,"79123456",,,[8]],[,,"(?:4[015-8]|5[89]|9\\d)\\d{6}",,,,"41234567",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"SJ",47,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"79",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],SK:[,[,,"[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",,,,,,,[6,7,9]],[,,"(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",,,,"221234567"],[,,"909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",,,,"912123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:00|[78]\\d)\\d{6}",,,,"900123456",,,[9]],[,,"8[5-9]\\d{7}",,,,"850123456",,,[9]],[,,,,,,,,,[-1]],[,,"6(?:02|5[0-4]|9[0-6])\\d{6}",,,,"690123456",,,[9]],"SK",421,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d{4})(\\d{3})","$1 $2",["909","9090"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[,,"9090\\d{3}",,,,"9090123",,,[7]],,,[,,"9090\\d{3}|(?:602|8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}",,,,,,,[7,9]],[,,"96\\d{7}",,,,"961234567",,,[9]],,,[,,,,,,,,,[-1]]],SL:[,[,,"(?:[2378]\\d|66|99)\\d{6}",,,,,,,[8],[6]],[,,"22[2-4][2-9]\\d{4}",,,,"22221234",,,,[6]],[,,"(?:25|3[013-5]|66|7[4-9]|8[08]|99)\\d{6}",,,,"25123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SM:[,[,,"(?:0549|[5-7]\\d)\\d{6}",,,,,,,[8,10],[6]],[,,"0549(?:8[0157-9]|9\\d)\\d{4}",,,,"0549886377",,,[10],[6]],[,,"6[16]\\d{6}",,,,"66661212",,,[8]],[,,,,,,,,,[-1]],[,,"7[178]\\d{6}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[158]\\d{6}",,,,"58001110",,,[8]],"SM",378,"00",,,,"([89]\\d{5})$","0549$1",,,[[,"(\\d{6})","$1",["[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SN:[,[,,"(?:[378]\\d{4}|93330)\\d{4}",,,,,,,[9]],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}",,,,"301012345"],[,,"7(?:[06-8]\\d|21|90)\\d{6}",,,,"701234567"],[,,"800\\d{6}",,,,"800123456"],[,,"88[4689]\\d{6}",,,,"884123456"],[,,"81[02468]\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"93330\\d{4}|3(?:392|9[01]\\d)\\d{5}",,,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SO:[,[,,"[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",,,,,,,[6,7,8,9]],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",,,,"4012345",,,[6,7]],[,,"28\\d{5}|(?:6[1-9]|79)\\d{6,7}|(?:15|24|(?:3[59]|4[89]|8[08])\\d|60|7[1-8]|9(?:0\\d|[2-9]))\\d{6}",,,,"71123456",,,[7,8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SO",252,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4})","$1 $2",["8[125]"]],[,"(\\d{6})","$1",["[134]"]],[,"(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],[,"(\\d)(\\d{7})","$1 $2",["24|[67]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],[,"(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[1-35-9]|9[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SR:[,[,,"(?:[2-5]|68|[78]\\d)\\d{5}",,,,,,,[6,7]],[,,"(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}",,,,"211234"],[,,"(?:7[124-7]|8[124-9])\\d{5}",,,,"7412345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"56\\d{4}",,,,"561234",,,[6]],"SR",597,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],[,"(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SS:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1[89]\\d{7}",,,,"181234567"],[,,"(?:12|9[12579])\\d{7}",,,,"977123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ST:[,[,,"(?:22|9\\d)\\d{5}",,,,,,,[7]],[,,"22\\d{5}",,,,"2221234"],[,,"900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}",,,,"9812345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SV:[,[,,"[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",,,,,,,[7,8,11]],[,,"2(?:[1-6]\\d{3}|[79]90[034]|890[0245])\\d{3}",,,,"21234567",,,[8]],[,,"66(?:[02-9]\\d\\d|1(?:[02-9]\\d|16))\\d{3}|(?:6[0-57-9]|7\\d)\\d{6}",,,,"70123456",,,[8]],[,,"800\\d{4}(?:\\d{4})?",,,,"8001234",,,[7,11]],[,,"900\\d{4}(?:\\d{4})?",,,,"9001234",,,[7,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SV",503,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[89]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[267]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SX:[,[,,"7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",,,,"7215425678",,,,[7]],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",,,,"7215205678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"SX",1,"011","1",,,"1|(5\\d{6})$","721$1",,,,,[,,,,,,,,,[-1]],,"721",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SY:[,[,,"[1-39]\\d{8}|[1-5]\\d{7}",,,,,,,[8,9],[6,7]],[,,"21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",,,,"112345678",,,,[6,7]],[,,"9(?:22|[3-589]\\d|6[02-9])\\d{6}",,,,"944567890",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SZ:[,[,,"0800\\d{4}|(?:[237]\\d|900)\\d{6}",,,,,,,[8,9]],[,,"[23][2-5]\\d{6}",,,,"22171234",,,[8]],[,,"7[6-9]\\d{6}",,,,"76123456",,,[8]],[,,"0800\\d{4}",,,,"08001234",,,[8]],[,,"900\\d{6}",,,,"900012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70\\d{6}",,,,"70012345",,,[8]],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[0237]"]],[,"(\\d{5})(\\d{4})","$1 $2",["9"]]],,[,,,,,,,,,[-1]],,,[,,"0800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TA:[,[,,"8\\d{3}",,,,,,,[4]],[,,"8\\d{3}",,,,"8999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TA",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"8",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TC:[,[,,"(?:[58]\\d\\d|649|900)\\d{7}",,,,,,,[10],[7]],[,,"649(?:266|712|9(?:4\\d|50))\\d{4}",,,,"6497121234",,,,[7]],[,,"649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}",,,,"6492311234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"649(?:71[01]|966)\\d{4}",,,,"6497101234",,,,[7]],"TC",1,"011","1",,,"1|([2-479]\\d{6})$","649$1",,,,,[,,,,,,,,,[-1]],,"649",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TD:[,[,,"(?:22|[69]\\d|77)\\d{6}",,,,,,,[8]],[,,"22(?:[37-9]0|5[0-5]|6[89])\\d{4}",,,,"22501234"],[,,"(?:6[023568]|77|9\\d)\\d{6}",,,,"63012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TG:[,[,,"[279]\\d{7}",,,,,,,[8]],[,,"2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}",,,,"22212345"],[,,"(?:7[09]|9[0-36-9])\\d{6}",,,,"90112345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TH:[,[,,"1\\d{9}|[1689]\\d{8}|[1-57]\\d{7}",,,,,,,[8,9,10]],[,,"(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",,,,"21234567",,,[8]],[,,"(?:14|6[1-6]|[89]\\d)\\d{7}",,,,"812345678",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"1900\\d{6}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"6[08]\\d{7}",,,,"601234567",,,[9]],"TH",66,"00[1-9]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TJ:[,[,,"(?:00|11|[3-579]\\d|88)\\d{7}",,,,,,,[9],[3,5,6,7]],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}",,,,"372123456",,,,[3,5,6,7]],[,,"41[18]\\d{6}|(?:00|11|5[05]|7[07]|88|9\\d)\\d{7}",,,,"917123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TJ",992,"810","8",,,"8",,"8~10",,[[,"(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"],,,1],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],,,1],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3"],,,1],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0457-9]|11"],,,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TK:[,[,,"[2-47]\\d{3,6}",,,,,,,[4,5,6,7]],[,,"(?:2[2-4]|[34]\\d)\\d{2,5}",,,,"3101"],[,,"7[2-4]\\d{2,5}",,,,"7290"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TK",690,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TL:[,[,,"7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",,,,,,,[7,8]],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",,,,"2112345",,,[7]],[,,"7[2-8]\\d{6}",,,,"77212345",,,[8]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,"70\\d{5}",,,,"7012345",,,[7]],[,,,,,,,,,[-1]],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],[,"(\\d{4})(\\d{4})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TM:[,[,,"[1-6]\\d{7}",,,,,,,[8]],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",,,,"12345678"],[,,"6\\d{7}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],[,"(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TN:[,[,,"[2-57-9]\\d{7}",,,,,,,[8]],[,,"81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}",,,,"30010123"],[,,"3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-6])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",,,,"20123456"],[,,"8010\\d{4}",,,,"80101234"],[,,"88\\d{6}",,,,"88123456"],[,,"8[12]10\\d{4}",,,,"81101234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TO:[,[,,"(?:0800|[5-8]\\d{3})\\d{3}|[2-8]\\d{4}",,,,,,,[5,7]],[,,"(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",,,,"20123",,,[5]],[,,"6(?:3[02]|8[5-9])\\d{4}|(?:6[09]|7\\d|8[46-9])\\d{5}",,,,"7715123",,,[7]],[,,"0800\\d{3}",,,,"0800222",,,[7]],[,,"55[04]\\d{4}",,,,"5501234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[5-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TR:[,[,,"(?:4|8\\d{5})\\d{6}|(?:[2-58]\\d\\d|900)\\d{7}",,,,,,,[7,10,12]],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",,,,"2123456789",,,[10]],[,,"56161\\d{5}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",,,,"5012345678",,,[10]],[,,"800\\d{7}(?:\\d{2})?",,,,"8001234567",,,[10,12]],[,,"(?:8[89]8|900)\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,"592(?:21[12]|461)\\d{4}",,,,"5922121234",,,[10]],[,,,,,,,,,[-1]],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d)(\\d{3})","$1 $2 $3",["444"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[0589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6})","$1 $2 $3",["80"],"0$1",,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[0589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6})","$1 $2 $3",["80"],"0$1",,1]],[,,"512\\d{7}",,,,"5123456789",,,[10]],,,[,,"444\\d{4}",,,,,,,[7]],[,,"(?:444|850\\d{3})\\d{4}",,,,"4441444",,,[7,10]],,,[,,,,,,,,,[-1]]],TT:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"868(?:2(?:0[13]|1[89]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",,,,"8682211234",,,,[7]],[,,"868(?:2(?:6[3-9]|[7-9]\\d)|(?:3\\d|4[6-9])\\d|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",,,,"8682911234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"TT",1,"011","1",,,"1|([2-46-8]\\d{6})$","868$1",,,,,[,,,,,,,,,[-1]],,"868",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"868619\\d{4}",,,,"8686191234",,,,[7]]],TV:[,[,,"(?:2|7\\d\\d|90)\\d{4}",,,,,,,[5,6,7]],[,,"2[02-9]\\d{3}",,,,"20123",,,[5]],[,,"(?:7[01]\\d|90)\\d{4}",,,,"901234",,,[6,7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TV",688,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2"]],[,"(\\d{2})(\\d{4})","$1 $2",["90"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TW:[,[,,"[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",,,,,,,[7,8,9,10,11]],[,,"(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",,,,"221234567",,,[8,9]],[,,"(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",,,,"912345678",,,[9]],[,,"80[0-79]\\d{6}|800\\d{5}",,,,"800123456",,,[8,9]],[,,"20(?:[013-9]\\d\\d|2)\\d{4}",,,,"203123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"99\\d{7}",,,,"990123456",,,[9]],[,,"7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",,,,"7012345678",,,[10,11]],"TW",886,"0(?:0[25-79]|19)","0","#",,"0",,,,[[,"(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"50[0-46-9]\\d{6}",,,,"500123456",,,[9]],,,[,,,,,,,,,[-1]]],TZ:[,[,,"(?:[26-8]\\d|41|90)\\d{7}",,,,,,,[9]],[,,"2[2-8]\\d{7}",,,,"222345678"],[,,"77[2-9]\\d{6}|(?:6[2-9]|7[13-689])\\d{7}",,,,"621234567"],[,,"80[08]\\d{6}",,,,"800123456"],[,,"90\\d{7}",,,,"900123456"],[,,"8(?:40|6[01])\\d{6}",,,,"840123456"],[,,,,,,,,,[-1]],[,,"41\\d{7}",,,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"(?:8(?:[04]0|6[01])|90\\d)\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UA:[,[,,"[89]\\d{9}|[3-9]\\d{8}",,,,,,,[9,10],[5,6,7]],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",,,,"311234567",,,[9],[5,6,7]],[,,"(?:50|6[36-8]|7[1-3]|9[1-9])\\d{7}",,,,"501234567",,,[9]],[,,"800[1-8]\\d{5,6}",,,,"800123456"],[,,"900[239]\\d{5,6}",,,,"900212345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"89[1-579]\\d{6}",,,,"891234567",,,[9]],"UA",380,"00","0",,,"0",,"0~0",,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UG:[,[,,"800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",,,,,,,[9],[5,6,7]],[,,"20(?:(?:(?:24|81)0|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[0147]\\d|2[5-9]|32|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",,,,"312345678",,,,[5,6,7]],[,,"7260\\d{5}|7(?:[0157-9]\\d|20|36|4[0-4])\\d{6}",,,,"712345678"],[,,"800[1-3]\\d{5}",,,,"800123456"],[,,"90[1-3]\\d{6}",,,,"901123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],US:[,[,,"[2-9]\\d{9}",,,,,,,[10],[7]],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-28]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0179]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-28]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0179]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],,,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UY:[,[,,"(?:[249]\\d\\d|80)\\d{5}|9\\d{6}",,,,,,,[7,8]],[,,"(?:2\\d|4[2-7])\\d{6}",,,,"21231234",,,[8],[7]],[,,"9[1-9]\\d{6}",,,,"94231234",,,[8]],[,,"80[05]\\d{4}",,,,"8001234",,,[7]],[,,"90[0-8]\\d{4}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UY",598,"0(?:0|1[3-9]\\d)","0"," int. ",,"0",,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["8|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[24]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UZ:[,[,,"(?:[679]\\d|88)\\d{7}",,,,,,,[9]],[,,"(?:6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|8\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|6(?:22|3[12457]|4[13-8])|9(?:22|5[1-9])))\\d{5}",,,,"669050123"],[,,"(?:6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|6(?:2(?:2[1245]|4[2-4])|39\\d|41[179]|5(?:[349]\\d|5[0-2])|7(?:0[017]|[13]\\d|22|44|55|67|88))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07])))|(?:88|9[0-57-9])\\d{3})\\d{4}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UZ",998,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[6-9]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VA:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"06698\\d{1,6}",,,,"0669812345",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"VA",39,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"06698",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],VC:[,[,,"(?:[58]\\d\\d|784|900)\\d{7}",,,,,,,[10],[7]],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",,,,"7842661234",,,,[7]],[,,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}",,,,"7844301234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VC",1,"011","1",,,"1|([2-7]\\d{6})$","784$1",,,,,[,,,,,,,,,[-1]],,"784",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VE:[,[,,"[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}",,,,"2121234567",,,,[7]],[,,"4(?:1[24-8]|2[46])\\d{7}",,,,"4121234567"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[01]\\d{7}",,,,"9001234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1","$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"501\\d{7}",,,,"5010123456",,,,[7]],,,[,,,,,,,,,[-1]]],VG:[,[,,"(?:284|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"284496[0-5]\\d{3}|284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}",,,,"2842291234",,,,[7]],[,,"284496[6-9]\\d{3}|284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|99)|5(?:4[0-7]|68|9[69]))\\d{4}",,,,"2843001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VG",1,"011","1",,,"1|([2-578]\\d{6})$","284$1",,,,,[,,,,,,,,,[-1]],,"284",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VI:[,[,,"[58]\\d{9}|(?:34|90)0\\d{7}",,,,,,,[10],[7]],[,,"340(?:2(?:0[12]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"340(?:2(?:0[12]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:35(?:[02-46-9]\\d|1[02-9]|5[0-46-9])|45(?:[034]\\d|1[02-9]|2[024-9]|5[0-46-9]))\\d{4}|52(?:3[2-46-9]|4[2-4])(?:[02-9]\\d|1[02-9])\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VI",1,"011","1",,,"1|([2-9]\\d{6})$","340$1",,1,,,[,,,,,,,,,[-1]],,"340",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VN:[,[,,"[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",,,,,,,[7,8,9,10]],[,,"2(?:0[3-9]|1[0-689]|2[0-25-9]|3[2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|8[2-79]|9[0-4679])\\d{7}",,,,"2101234567",,,[10]],[,,"(?:52[238]|89[689]|99[013-9])\\d{6}|(?:3\\d|5[689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",,,,"912345678",,,[9]],[,,"1800\\d{4,6}|12(?:03|28)\\d{4}",,,,"1800123456",,,[8,9,10]],[,,"1900\\d{4,6}",,,,"1900123456",,,[8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"672\\d{6}",,,,"672012345",,,[9]],"VN",84,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[17]99"],"0$1",,1],[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{3})(\\d{4,5})","$1 $2",["69"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"[17]99\\d{4}|69\\d{5,6}",,,,,,,[7,8]],[,,"(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",,,,"1992000",,,[7,8]],,,[,,,,,,,,,[-1]]],VU:[,[,,"(?:[23]\\d|[48]8)\\d{3}|(?:[57]\\d|90)\\d{5}",,,,,,,[5,7]],[,,"(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",,,,"22123",,,[5]],[,,"(?:5\\d|7[013-7])\\d{5}",,,,"5912345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"90[1-9]\\d{4}",,,,"9010123",,,[7]],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[579]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:3[03]|900\\d)\\d{3}",,,,"30123"],,,[,,,,,,,,,[-1]]],WF:[,[,,"(?:[45]0|68|72|8\\d)\\d{4}",,,,,,,[6]],[,,"(?:50|68|72)\\d{4}",,,,"501234"],[,,"(?:50|68|72|8[23])\\d{4}",,,,"501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WF",681,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[4-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"[48]0\\d{4}",,,,"401234"]],WS:[,[,,"(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",,,,,,,[5,6,7,10]],[,,"6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",,,,"22123",,,[5,6]],[,,"(?:7[235-7]|8(?:[3-7]|9\\d{3}))\\d{5}",,,,"7212345",,,[7,10]],[,,"800\\d{3}",,,,"800123",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WS",685,"0",,,,,,,,[[,"(\\d{5})","$1",["[2-5]|6[1-9]"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],XK:[,[,,"[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",,,,,,,[8,9]],[,,"(?:2[89]|39)0\\d{6}|[23][89]\\d{6}",,,,"28012345"],[,,"4[3-9]\\d{6}",,,,"43201234",,,[8]],[,,"800\\d{5}",,,,"80001234",,,[8]],[,,"900\\d{5}",,,,"90001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"XK",383,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YE:[,[,,"(?:1|7\\d)\\d{7}|[1-7]\\d{6}",,,,,,,[7,8,9],[6]],[,,"78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",,,,"1234567",,,[7,8],[6]],[,,"7[0137]\\d{7}",,,,"712345678",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YE",967,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YT:[,[,,"80\\d{7}|(?:26|63)9\\d{6}",,,,,,,[9]],[,,"269(?:0[67]|5[0-2]|6\\d|[78]0)\\d{4}",,,,"269601234"],[,,"639(?:0[0-79]|1[019]|[267]\\d|3[09]|[45]0|9[04-79])\\d{4}",,,,"639012345"],[,,"80\\d{7}",,,,"801234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YT",262,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"269|63",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZA:[,[,,"[1-9]\\d{8}|8\\d{4,7}",,,,,,,[5,6,7,8,9]],[,,"(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",,,,"101234567",,,[9]],[,,"(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",,,,"711234567"],[,,"80\\d{7}",,,,"801234567",,,[9]],[,,"(?:86[2-9]|9[0-2]\\d)\\d{6}",,,,"862345678",,,[9]],[,,"860\\d{6}",,,,"860123456",,,[9]],[,,,,,,,,,[-1]],[,,"87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",,,,"871234567",,,[9]],"ZA",27,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"861\\d{6}",,,,"861123456",,,[9]],,,[,,,,,,,,,[-1]]],ZM:[,[,,"(?:63|80)0\\d{6}|(?:21|[79]\\d)\\d{7}",,,,,,,[9],[6]],[,,"21[1-8]\\d{6}",,,,"211234567",,,,[6]],[,,"(?:7[679]|9[5-8])\\d{7}",,,,"955123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"630\\d{6}",,,,"630012345"],"ZM",260,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[1-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZW:[,[,,"2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",,,,,,,[5,6,7,8,9,10],[3,4]],[,,"(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",,,,"1312345",,,,[3,4]],[,,"7(?:[17]\\d|[38][1-9])\\d{6}",,,,"712345678",,,[9]],[,,"80(?:[01]\\d|20|8[0-8])\\d{3}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",,,,"8686123456",,,[10]],"ZW",263,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],[,"(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],[,"(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],800:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",800,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],808:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",808,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],870:[,[,,"[35-7]\\d{8}",,,,,,,[9]],[,,,,,,,,,[-1]],[,,"(?:[356]\\d|7[6-8])\\d{7}",,,,"301234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",870,,,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],878:[,[,,"10\\d{10}",,,,,,,[12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"10\\d{10}",,,,"101234567890"],"001",878,,,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],881:[,[,,"[0-36-9]\\d{8}",,,,,,,[9]],[,,,,,,,,,[-1]],[,,"[0-36-9]\\d{8}",,,,"612345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",881,,,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],882:[,[,,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|[19]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,,,,,,,,[-1]],[,,"3(?:37\\d\\d|42)\\d{4}|3(?:2|47|7\\d{3})\\d{7}",,,,"3421234",,,[7,9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}",,,,"390123456789"],"001",882,,,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["16|342"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"348[57]\\d{7}",,,,"34851234567",,,[11]]],883:[,[,,"51\\d{7}(?:\\d{3})?",,,,,,,[9,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"51[013]0\\d{8}|5100\\d{5}",,,,"510012345"],"001",883,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["5"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],888:[,[,,"\\d{11}",,,,,,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",888,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"\\d{11}",,,,"12345678901"],,,[,,,,,,,,,[-1]]],979:[,[,,"[1359]\\d{8}",,,,,,,[9],[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1359]\\d{8}",,,,"123456789",,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",979,,,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]]};function K(){this.a={}}K.a=void 0,K.b=function(){return K.a?K.a:K.a=new K};var Y={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"},Q={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":"+","*":"*","#":"#"},J={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},X=/[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?/,Z=/[+\uff0b]+/,ee=/^[+\uff0b]+/,te=/([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9])/,ne=/[+\uff0b0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]/,ae=/[\\\/] *x/,ie=/[^0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9A-Za-z#]+$/,se=/(?:.*?[A-Za-z]){3}.*/,re=/(?:;ext=([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,7})|[ \u00a0\t,]*(?:e?xt(?:ensi(?:o\u0301?|\u00f3))?n?|\uff45?\uff58\uff54\uff4e?|\u0434\u043e\u0431|[;,x\uff58#\uff03~\uff5e]|int|anexo|\uff49\uff4e\uff54)[:\.\uff0e]?[ \u00a0\t,-]*([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,7})#?|[- ]+([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,5})#)$/i,oe=/^[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{2}$|^[+\uff0b]*(?:[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e*]*[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]){3,}[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e*A-Za-z0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]*(?:;ext=([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,7})|[ \u00a0\t,]*(?:e?xt(?:ensi(?:o\u0301?|\u00f3))?n?|\uff45?\uff58\uff54\uff4e?|\u0434\u043e\u0431|[;,x\uff58#\uff03~\uff5e]|int|anexo|\uff49\uff4e\uff54)[:\.\uff0e]?[ \u00a0\t,-]*([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,7})#?|[- ]+([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{1,5})#)?$/i,le=/(\$\d)/,ce=/^\(?\$1\)?$/;function de(e){return!(2>e.length)&&$e(oe,e)}function ue(e){return $e(se,e)?me(e,J):me(e,Y)}function pe(e){var t=ue(e.toString());o(e),e.a(t)}function ge(){var e=Object.keys(G);return function(e){return Array.prototype.concat.apply([],arguments)}(function(){var e=c(Object.keys(W),(function(e){return!isNaN(e)}));return d(e,(function(e){return parseInt(e,10)}))}(),d(e,(function(e){return parseInt(e,10)})))}function he(e){return null!=e&&(1!=E(e,9)||-1!=S(e,9)[0])}function me(e,t){for(var n,a=new r,i=e.length,s=0;s<i;++s)null!=(n=t[(n=e.charAt(s)).toUpperCase()])&&a.a(n);return a.toString()}function fe(e){return 0==e.length||ce.test(e)}function be(e){return null!=e&&isNaN(e)&&e.toUpperCase()in W}function je(e,t,n){if(0==w(t,2)&&C(t,5)){var a=T(t,5);if(0<a.length)return a}a=T(t,1);var i=Oe(t);return 0==n?ve(a,0,i,""):a in G?(t=Ce(t,e=ye(e,a,Me(a)),n),ve(a,n,i=xe(i,e,n),t)):i}function ye(e,t,n){return Te(e,"001"==n?""+t:n)}function Oe(e){if(!C(e,2))return"";var t=""+w(e,2);return C(e,4)&&w(e,4)&&0<T(e,8)?Array(T(e,8)+1).join("0")+t:t}function ve(e,t,n,a){switch(t){case 0:return"+"+e+n+a;case 1:return"+"+e+" "+n+a;case 3:return"tel:+"+e+"-"+n+a;default:return n+a}}function xe(e,t,n){e:{for(var a,i=(t=0==S(t,20).length||2==n?S(t,19):S(t,20)).length,s=0;s<i;++s){var r=E(a=t[s],3);if((0==r||0==e.search(w(a,3,r-1)))&&$e(r=new RegExp(w(a,1)),e)){t=a;break e}}t=null}return null!=t&&(t=T(i=t,2),a=new RegExp(w(i,1)),T(i,5),i=T(i,4),e=2==n&&null!=i&&0<i.length?e.replace(a,t.replace(le,i)):e.replace(a,t),3==n&&(e=(e=e.replace(/^[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]+/,"")).replace(/[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]+/g,"-"))),e}function _e(e,t){var n=at;if(!be(e))return null;t=ke(Te(n,e),t);try{if(C(t,6))return Ue(n,w(t,6),e)}catch(e){}return null}function Ce(e,t,n){return C(e,3)&&0!=w(e,3).length?3==n?";ext="+w(e,3):C(t,13)?w(t,13)+T(e,3):" ext. "+T(e,3):""}function ke(e,t){switch(t){case 4:return w(e,5);case 3:return w(e,4);case 1:return w(e,3);case 0:case 2:return w(e,2);case 5:return w(e,6);case 6:return w(e,8);case 7:return w(e,7);case 8:return w(e,21);case 9:return w(e,25);case 10:return w(e,28);default:return w(e,1)}}function we(e,t){return Se(e,w(t,1))?Se(e,w(t,5))?4:Se(e,w(t,4))?3:Se(e,w(t,6))?5:Se(e,w(t,8))?6:Se(e,w(t,7))?7:Se(e,w(t,21))?8:Se(e,w(t,25))?9:Se(e,w(t,28))?10:Se(e,w(t,2))?w(t,18)||Se(e,w(t,3))?2:0:!w(t,18)&&Se(e,w(t,3))?1:-1:-1}function Te(e,t){if(null==t)return null;t=t.toUpperCase();var n=e.a[t];if(null==n){if(null==(n=W[t]))return null;n=(new V).a(L.h(),n),e.a[t]=n}return n}function Se(e,t){var n=e.length;return!(0<E(t,9)&&-1==l(S(t,9),n))&&$e(T(t,2),e)}function Ee(e){var t=at,n=Ie(t,e),a=T(e,1),i=ye(t,a,n);return null==i||"001"!=n&&a!=De(t,n)?i=!1:i=-1!=we(e=Oe(e),i),i}function Ie(e,t){if(null==t)return null;var n=T(t,1);if(null==(n=G[n]))e=null;else if(1==n.length)e=n[0];else e:{t=Oe(t);for(var a,i=n.length,s=0;s<i;s++){var r=Te(e,a=n[s]);if(C(r,23)){if(0==t.search(w(r,23))){e=a;break e}}else if(-1!=we(t,r)){e=a;break e}}e=null}return e}function Me(e){return null==(e=G[e])?"ZZ":e[0]}function De(e,t){if(null==(e=Te(e,t)))throw Error("Invalid region code: "+t);return T(e,10)}function Ae(e){return 0==(e=Re(e))||4==e}function Ne(e,t,n,a){var i=ke(n,a),s=0==E(i,9)?S(w(n,1),9):S(i,9);if(i=S(i,10),2==a){if(!he(ke(n,0)))return Ne(e,t,n,1);he(e=ke(n,1))&&(u(s=s.concat(0==E(e,9)?S(w(n,1),9):S(e,9))),0==i.length?i=S(e,10):u(i=i.concat(S(e,10))))}return-1==s[0]?5:(t=t.length,-1<l(i,t)?4:(n=s[0])==t?0:n>t?2:s[s.length-1]<t?3:-1<l(s,t,1)?0:5)}function Re(e){var t=at,n=Oe(e);return(e=T(e,1))in G?Ne(t,n,e=ye(t,e,Me(e)),-1):1}function Pe(e,t){if(0==(e=e.toString()).length||"0"==e.charAt(0))return 0;for(var n,a=e.length,i=1;3>=i&&i<=a;++i)if((n=parseInt(e.substring(0,i),10))in G)return t.a(e.substring(i)),n;return 0}function Le(e,t,n,a,i){if(0==t.length)return 0;var s;t=new r(t),null!=n&&(s=w(n,11)),null==s&&(s="NonMatch");var l=t.toString();if(0==l.length)s=20;else if(ee.test(l))l=l.replace(ee,""),o(t),t.a(ue(l)),s=1;else{if(l=new RegExp(s),pe(t),0==(s=t.toString()).search(l)){l=s.match(l)[0].length;var c=s.substring(l).match(te);c&&null!=c[1]&&0<c[1].length&&"0"==me(c[1],Y)?s=!1:(o(t),t.a(s.substring(l)),s=!0)}else s=!1;s=s?5:20}if(20!=s){if(2>=t.b.length)throw Error("Phone number too short after IDD");if(0!=(e=Pe(t,a)))return I(i,1,e),e;throw Error("Invalid country calling code")}return null!=n&&(l=""+(s=T(n,10)),0==(c=t.toString()).lastIndexOf(l,0)&&(l=new r(c.substring(l.length)),c=w(n,1),c=new RegExp(T(c,2)),Fe(l,n,null),l=l.toString(),!$e(c,t.toString())&&$e(c,l)||3==Ne(e,t.toString(),n,-1)))?(a.a(l),I(i,1,s),s):(I(i,1,0),0)}function Fe(e,t,n){var a=e.toString(),i=a.length,s=w(t,15);if(0!=i&&null!=s&&0!=s.length){var r=new RegExp("^(?:"+s+")");if(i=r.exec(a)){var o=$e(s=new RegExp(T(w(t,1),2)),a),l=i.length-1;null==(t=w(t,16))||0==t.length||null==i[l]||0==i[l].length?o&&!$e(s,a.substring(i[0].length))||(null!=n&&0<l&&null!=i[l]&&n.a(i[1]),e.set(a.substring(i[0].length))):(a=a.replace(r,t),(!o||$e(s,a))&&(null!=n&&0<l&&n.a(i[1]),e.set(a)))}}}function Ue(e,t,n){if(null==t)throw Error("The string supplied did not seem to be a phone number");if(250<t.length)throw Error("The string supplied is too long to be a phone number");var a=new r,i=t.indexOf(";phone-context=");if(0<=i){var s=i+15;if("+"==t.charAt(s)){var l=t.indexOf(";",s);0<l?a.a(t.substring(s,l)):a.a(t.substring(s))}s=t.indexOf("tel:"),a.a(t.substring(0<=s?s+4:0,i))}else a.a(function(e){var t=e.search(ne);return 0<=t?0<=(t=(e=(e=e.substring(t)).replace(ie,"")).search(ae))&&(e=e.substring(0,t)):e="",e}(t));if(0<(i=(t=a.toString()).indexOf(";isub="))&&(o(a),a.a(t.substring(0,i))),!de(a.toString()))throw Error("The string supplied did not seem to be a phone number");if(t=a.toString(),!(be(n)||null!=t&&0<t.length&&ee.test(t)))throw Error("Invalid country calling code");t=new z;e:{if(0<=(s=(i=a.toString()).search(re))&&de(i.substring(0,s)))for(var c=(l=i.match(re)).length,d=1;d<c;++d)if(null!=l[d]&&0<l[d].length){o(a),a.a(i.substring(0,s)),i=l[d];break e}i=""}0<i.length&&I(t,3,i),s=Te(e,n),i=new r,l=0,c=a.toString();try{l=Le(e,c,s,i,t)}catch(n){if("Invalid country calling code"!=n.message||!ee.test(c))throw n;if(0==(l=Le(e,c=c.replace(ee,""),s,i,t)))throw n}if(0!=l?(a=Me(l))!=n&&(s=ye(e,l,a)):(pe(a),i.a(a.toString()),null!=n&&I(t,1,l=T(s,10))),2>i.b.length)throw Error("The string supplied is too short to be a phone number");if(null!=s&&(Fe(n=new r(i.toString()),s,new r),2!=(e=Ne(e,n.toString(),s,-1))&&4!=e&&5!=e&&(i=n)),2>(n=(e=i.toString()).length))throw Error("The string supplied is too short to be a phone number");if(17<n)throw Error("The string supplied is too long to be a phone number");if(1<e.length&&"0"==e.charAt(0)){for(I(t,4,!0),n=1;n<e.length-1&&"0"==e.charAt(n);)n++;1!=n&&I(t,8,n)}return I(t,2,parseInt(e,10)),t}function $e(e,t){return!(!(e="string"==typeof e?t.match("^(?:"+e+")$"):t.match(e))||e[0].length!=t.length)}function Be(e){this.ha=/\u2008/,this.ca="",this.m=new r,this.$="",this.j=new r,this.o=new r,this.l=!0,this.aa=this.s=this.ea=!1,this.fa=K.b(),this.u=0,this.b=new r,this.ba=!1,this.i="",this.a=new r,this.f=[],this.da=e,this.ma=this.g=qe(this,this.da)}var Ve=new L;I(Ve,11,"NA");var ze=/^[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]*(\$\d[-x\u2010-\u2015\u2212\u30fc\uff0d-\uff0f \u00a0\u00ad\u200b\u2060\u3000()\uff08\uff09\uff3b\uff3d.\[\]/~\u2053\u223c\uff5e]*)+$/,He=/[- ]/;function qe(e,t){return t=be(t)?De(e.fa,t):0,null!=(e=Te(e.fa,Me(t)))?e:Ve}function Ge(e){for(var t=e.f.length,n=0;n<t;++n){var a=e.f[n],i=T(a,1);if(e.$==i)return!1;var s=e,r=a,l=T(r,1);o(s.m);var c=s;r=T(r,2);var d="999999999999999".match(l)[0];if(d.length<c.a.b.length?c="":c=(c=d.replace(new RegExp(l,"g"),r)).replace(/9/g," "),0<c.length?(s.m.a(c),s=!0):s=!1,s)return e.$=i,e.ba=He.test(w(a,4)),e.u=0,!0}return e.l=!1}function We(e,t){for(var n=[],a=t.length-3,i=e.f.length,s=0;s<i;++s){var r=e.f[s];0==E(r,3)?n.push(e.f[s]):(r=w(r,3,Math.min(a,E(r,3)-1)),0==t.search(r)&&n.push(e.f[s]))}e.f=n}function Ke(e){return e.l=!0,e.aa=!1,e.f=[],e.u=0,o(e.m),e.$="",Je(e)}function Ye(e){for(var t=e.a.toString(),n=e.f.length,a=0;a<n;++a){var i=e.f[a],s=T(i,1);if(new RegExp("^(?:"+s+")$").test(t)&&(e.ba=He.test(w(i,4)),me(i=Qe(e,i=t.replace(new RegExp(s,"g"),w(i,2))),Q)==e.o))return i}return""}function Qe(e,t){var n=e.b.b.length;return e.ba&&0<n&&" "!=e.b.toString().charAt(n-1)?e.b+" "+t:e.b+t}function Je(e){var t=e.a.toString();if(3<=t.length){for(var n=e.s&&0==e.i.length&&0<E(e.g,20)?S(e.g,20):S(e.g,19),a=n.length,i=0;i<a;++i){var s=n[i];0<e.i.length&&fe(T(s,4))&&!w(s,6)&&!C(s,5)||(0!=e.i.length||e.s||fe(T(s,4))||w(s,6))&&ze.test(T(s,2))&&e.f.push(s)}return We(e,t),0<(t=Ye(e)).length?t:Ge(e)?Xe(e):e.j.toString()}return Qe(e,t)}function Xe(e){var t=e.a.toString(),n=t.length;if(0<n){for(var a="",i=0;i<n;i++)a=nt(e,t.charAt(i));return e.l?Qe(e,a):e.j.toString()}return e.b.toString()}function Ze(e){var t=e.a.toString(),n=0;if(1!=w(e.g,10))var a=!1;else a="1"==(a=e.a.toString()).charAt(0)&&"0"!=a.charAt(1)&&"1"!=a.charAt(1);return a?(n=1,e.b.a("1").a(" "),e.s=!0):C(e.g,15)&&(a=new RegExp("^(?:"+w(e.g,15)+")"),null!=(a=t.match(a))&&null!=a[0]&&0<a[0].length&&(e.s=!0,n=a[0].length,e.b.a(t.substring(0,n)))),o(e.a),e.a.a(t.substring(n)),t.substring(0,n)}function et(e){var t=e.o.toString(),n=new RegExp("^(?:\\+|"+w(e.g,11)+")");return null!=(n=t.match(n))&&null!=n[0]&&0<n[0].length&&(e.s=!0,n=n[0].length,o(e.a),e.a.a(t.substring(n)),o(e.b),e.b.a(t.substring(0,n)),"+"!=t.charAt(0)&&e.b.a(" "),!0)}function tt(e){if(0==e.a.b.length)return!1;var t=new r,n=Pe(e.a,t);return 0!=n&&(o(e.a),e.a.a(t.toString()),"001"==(t=Me(n))?e.g=Te(e.fa,""+n):t!=e.da&&(e.g=qe(e,t)),e.b.a(""+n).a(" "),e.i="",!0)}function nt(e,t){var n=e.m.toString();if(0<=n.substring(e.u).search(e.ha)){var a=n.search(e.ha);return t=n.replace(e.ha,t),o(e.m),e.m.a(t),e.u=a,t.substring(0,e.u+1)}return 1==e.f.length&&(e.l=!1),e.$="",e.j.toString()}var at=K.b();function it(e){try{switch(Re(e)){case 0:return"is-possible";case 1:return"invalid-country-code";case 3:return"too-long";case 2:return"too-short"}if(Ae(e))return"is-possible"}catch(e){}return"unknown"}function st(e,t){if(!(this instanceof st))return new st(e,t);if("string"==typeof e)var n=!1;else try{Ee(e),n=!0}catch(e){n=!1}if(!n&&"string"!=typeof e)throw Error("Invalid phone number, expected a string");if(!n&&null!=t&&"string"!=typeof t)throw Error("Invalid region code, expected a string");if(!n){if(t&&"+"===e.charAt(0)){var a=rt(t);e.substr(1,(""+a).length)!==""+a&&(t=null)}if(!t){var i=function(e){if("+"!==e.charAt(0))return{parsed:t,v:n};try{var t=Ue(at,e,void 0)}catch(e){}if(t){var n=Ie(at,t);if(null!=n&&"ZZ"!==n)return{parsed:t,v:n}}for(var a=1;4>a;++a){if(n=void 0,e.length<a+1)return{parsed:t,v:n};if("ZZ"!==(n=Me(e.substring(1,a+1))))return{v:n}}return{parsed:t,v:void 0}}(e);t=void 0===i.v?null:i.v,i=i.parsed}}if(this.a={number:{},regionCode:t,valid:!1,possible:!1},n)this.b=e;else{if(this.b=null,this.a.number.input=e,!t)return void(this.a.possibility="invalid-country-code");if(0===(a=rt(t)))return void(this.a.possibility="invalid-country-code");try{this.b=i||Ue(at,e,t)}catch(t){return void(this.a.possibility=it(e))}}this.a.number.international=je(at,this.b,1),this.a.number.national=je(at,this.b,2),this.a.number.e164=je(at,this.b,0),this.a.number.rfc3966=je(at,this.b,3),this.a.number.significant=Oe(this.b),e=this.a,t=this.b,null==(n=Te(n=at,Ie(n,t)))?t=!0:t=!Se(t=Oe(t),w(n,24)),e.canBeInternationallyDialled=t,this.a.possible=Ae(this.b),this.a.valid=Ee(this.b),this.a.type=function(e){var t=at,n=Ie(t,e);switch(null==(t=ye(t,T(e,1),n))?e=-1:e=we(e=Oe(e),t),e){case 0:return"fixed-line";case 2:return"fixed-line-or-mobile";case 1:return"mobile";case 8:return"pager";case 7:return"personal-number";case 4:return"premium-rate";case 5:return"shared-cost";case 3:return"toll-free";case 9:return"uan";case 6:return"voip";default:case-1:return"unknown"}}(this.b),this.a.possibility=it(this.b)}function rt(e){return be(e)?De(at,e):0}function ot(e){this.f=e,this.b=new Be(e),this.a=""}(e=st.prototype).toJSON=function(){return this.a},e.ka=function(){return this.a.canBeInternationallyDialled},e.va=function(){return this.a.valid},e.ua=function(){return this.a.possible},e.ra=function(){return this.a.type},e.ta=function(){return"mobile"===this.a.type||"fixed-line-or-mobile"===this.a.type},e.sa=function(){return"fixed-line"===this.a.type||"fixed-line-or-mobile"===this.a.type},e.na=function(e){return this.a.number[null==e?"e164":e]},e.oa=function(e){return function(e,t){var n=at;if(!be(t))return je(n,e,1);var a=T(e,1),i=Oe(e);if(!(a in G))return i;if(1==a){if(null!=t&&0<=l(G[1],t.toUpperCase()))return a+" "+je(n,e,2)}else if(a==De(n,t))return je(n,e,2);var s=Te(n,t),r=T(s,11);return t="",$e(X,r)?t=r:C(s,17)&&(t=T(s,17)),i=xe(i,n=ye(n,a,Me(a)),1),e=Ce(e,n,1),0<t.length?t+" "+a+" "+i+e:ve(a,1,i,e)}(this.b,e)},e.qa=function(){return this.a.regionCode},e.la=function(){return rt(this.a.regionCode)},(e=ot.prototype).ja=function(e){var t=this.b;return t.ca=function(e,t){e.j.a(t);var n=t;if(te.test(n)||1==e.j.b.length&&Z.test(n)?("+"==t?(n=t,e.o.a(t)):(n=Y[t],e.o.a(n),e.a.a(n)),t=n):(e.l=!1,e.ea=!0),!e.l){if(!e.ea)if(et(e)){if(tt(e))return Ke(e)}else if(0<e.i.length&&(t=e.a.toString(),o(e.a),e.a.a(e.i),e.a.a(t),n=(t=e.b.toString()).lastIndexOf(e.i),o(e.b),e.b.a(t.substring(0,n))),e.i!=Ze(e))return e.b.a(" "),Ke(e);return e.j.toString()}switch(e.o.b.length){case 0:case 1:case 2:return e.j.toString();case 3:if(!et(e))return e.i=Ze(e),Je(e);e.aa=!0;default:return e.aa?(tt(e)&&(e.aa=!1),e.b.toString()+e.a.toString()):0<e.f.length?(t=nt(e,t),0<(n=Ye(e)).length?n:(We(e,e.a.toString()),Ge(e)?Xe(e):e.l?Qe(e,t):e.j.toString())):Je(e)}}(t,e),this.a=t.ca},e.wa=function(){return this.a},e.xa=function(){var e=this.a;return 0<e.length&&this.ia(e.substr(0,e.length-1)),this.a},e.ia=function(e){var t=this.b;if(t.ca="",o(t.j),o(t.o),o(t.m),t.u=0,t.$="",o(t.b),t.i="",o(t.a),t.l=!0,t.ea=!1,t.s=!1,t.aa=!1,t.f=[],t.ba=!1,t.g!=t.ma&&(t.g=qe(t,t.da)),e){t=0;for(var n=e.length;t<n;++t)this.ja(e.charAt(t))}return this.a},e.pa=function(){return new st(this.a,this.f)},n=t,i("PhoneNumber",st),i("PhoneNumber.getCountryCodeForRegionCode",rt),i("PhoneNumber.getRegionCodeForCountryCode",(function(e){return Me(e)})),i("PhoneNumber.getSupportedRegionCodes",(function(){return c(Object.keys(W),(function(e){return isNaN(e)}))})),i("PhoneNumber.getSupportedCallingCodes",(function(){return ge()})),i("PhoneNumber.getExample",(function(e,t){return new st(t=_e(e,t?function(e){switch(e){case"fixed-line":return 0;case"fixed-line-or-mobile":return 2;case"mobile":return 1;case"pager":return 8;case"personal-number":return 7;case"premium-rate":return 4;case"shared-cost":return 5;case"toll-free":return 3;case"uan":return 9;case"voip":return 6;default:case"unknown":return-1}}(t):0),e)})),i("PhoneNumber.getAsYouType",(function(e){return new ot(e)})),i("PhoneNumber.prototype.toJSON",st.prototype.toJSON),i("PhoneNumber.prototype.canBeInternationallyDialled",st.prototype.ka),i("PhoneNumber.prototype.isValid",st.prototype.va),i("PhoneNumber.prototype.isPossible",st.prototype.ua),i("PhoneNumber.prototype.getType",st.prototype.ra),i("PhoneNumber.prototype.isMobile",st.prototype.ta),i("PhoneNumber.prototype.isFixedLine",st.prototype.sa),i("PhoneNumber.prototype.getNumber",st.prototype.na),i("PhoneNumber.prototype.getNumberFrom",st.prototype.oa),i("PhoneNumber.prototype.getRegionCode",st.prototype.qa),i("PhoneNumber.prototype.getCountryCode",st.prototype.la),i("AsYouType",ot),i("AsYouType.prototype.addChar",ot.prototype.ja),i("AsYouType.prototype.number",ot.prototype.wa),i("AsYouType.prototype.removeChar",ot.prototype.xa),i("AsYouType.prototype.reset",ot.prototype.ia),i("AsYouType.prototype.getPhoneNumber",ot.prototype.pa)}()},zBWt:function(e,t,n){var a=n("s2er")("wks"),i=n("ixoo"),s=n("7whZ").Symbol,r="function"==typeof s;(e.exports=function(e){return a[e]||(a[e]=r&&s[e]||(r?s:i)("Symbol."+e))}).store=a},zELP:function(e,t){var n=new Error("Element already at target scroll position"),a=new Error("Scroll cancelled"),i=Math.min,s=Date.now;function r(e){return function(t,r,c,d){"function"==typeof(c=c||{})&&(d=c,c={}),"function"!=typeof d&&(d=l);var u=s(),p=t[e],g=c.ease||o,h=isNaN(c.duration)?350:+c.duration,m=!1;return p===r?d(n,t[e]):requestAnimationFrame((function n(o){if(m)return d(a,t[e]);var l=s(),c=i(1,(l-u)/h),f=g(c);t[e]=f*(r-p)+p,c<1?requestAnimationFrame(n):requestAnimationFrame((function(){d(null,t[e])}))})),function(){m=!0}}}function o(e){return.5*(1-Math.cos(Math.PI*e))}function l(){}e.exports={left:r("scrollLeft"),top:r("scrollTop")}},zmLq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(2,arguments);var n=(0,a.default)(e),s=(0,a.default)(t),r=n.getTime()-s.getTime();return r<0?-1:r>0?1:r};var a=s(n("2Oix")),i=s(n("YGjY"));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},znrX:function(e,t,n){var a=n("nA4W"),i=n("CYMq"),s=n("WpRT")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),a(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},zs13:function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}}]);
//# sourceMappingURL=23.js.map?v=90415b094853abc72a50