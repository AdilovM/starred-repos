(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{av8z:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("3bBZ");var n=a("q1tI"),i=a("dDsW"),s=a("/MKj"),o=a("Ty5D"),c=a("JsuU"),r=a("b2r9"),l=a("gbG6"),p=a("Mfcq"),d=a("KqxG"),m=a("W7Pl");const b=()=>{var e,t;const a=Object(i.a)(),b=Object(s.f)(),u=Object(o.k)(),{uid:g}=Object(m.O)(),j=Object(n.useCallback)(e=>(async(e,{name:t,region:a,enableCalls:n})=>{const{data:i}=await d.createApplication({app_name:t,organization_uid:e,region:a,is_calls_enabled:n}),{application:s}=i;if(s.attrs.sendbird_calls.enabled){const{isFreeVoucherIssued:e}=await Object(l.d)(s.app_id);return{application:s,isFreeVoucherIssued:e}}return{application:s,isFreeVoucherIssued:!1}})(g,e),[g]),[{data:h,status:f,error:O},x]=Object(m.g)(j,[j]);return Object(n.useEffect)(()=>{if(null==h||!h.application)return;const{application:e,isFreeVoucherIssued:t}=h;c.toast.success({message:a.formatMessage({id:"common.createApplication.success"})}),Object(s.c)(()=>{b(r.c.setApplicationRequest(e)),b(r.c.createAppSuccess(e)),e.attrs.sendbird_calls.enabled&&b(r.b.verifyAuthenticationRequest()),b(t?r.b.showDialogsRequest({dialogTypes:p.a.CallsFreeVoucher}):r.b.hideDialogsRequest())}),u.push(`/${e.app_id}`)},[h,b,a,u]),Object(m.s)(O),{isLoading:"loading"===f,createApplication:x,error:null!=(e=null==O||null==(t=O.data)?void 0:t.message)?e:null}}},yyQV:function(e,t,a){"use strict";a.d(t,"a",(function(){return F}));a("3bBZ");var n=a("q1tI"),i=a("NKCw"),s=a("dDsW"),o=a("vOnD"),c=a("JsuU"),r=a("UWC4"),l=a("26RP"),p=a("6889"),d=a("nKUr");const m=(e,t)=>t.name.includes("North Virginia")?-1:e.name.includes("North Virginia")?1:e.name.localeCompare(t.name),b=Object(o.default)(c.Icon).attrs({icon:"plus",size:16}).withConfig({displayName:"createAppForm__Plus",componentId:"u988b0-0"})([""]),u=o.default.div.withConfig({displayName:"createAppForm__ContentContainer",componentId:"u988b0-1"})(["display:flex;flex-direction:column;align-items:center;> svg + span{margin-top:9px;}> span{",";}"],c.Subtitles["subtitle-02"]),g=o.default.div.withConfig({displayName:"createAppForm__TabsContainer",componentId:"u988b0-2"})(["display:grid;grid-template-columns:1fr 1fr;grid-column-gap:8px;transition:opacity 0.2s ",";",""],c.transitionDefault,e=>e.disabled&&Object(o.css)(["pointer-events:none;opacity:0.5;"])),j=Object(o.default)(c.Tile).attrs(()=>({selectable:!0})).withConfig({displayName:"createAppForm__ProductTab",componentId:"u988b0-3"})(["display:flex;justify-content:center;align-items:center;min-height:116px;&,svg,span{transition:all 0.3s ",";}&:focus{outline:none;}","{svg{fill:",";}span{color:",";}}& > ","{margin:8px;fill:",";}"],c.transitionDefault,u,e=>e.selected?Object(c.cssVariables)("purple-7"):Object(c.cssVariables)("neutral-9"),e=>e.selected?Object(c.cssVariables)("purple-7"):Object(c.cssVariables)("neutral-10"),b,e=>e.selected?Object(c.cssVariables)("purple-7"):Object(c.cssVariables)("neutral-6")),h=({icon:e,title:t})=>Object(d.jsxs)(u,{children:[Object(d.jsx)(c.Icon,{icon:e,size:24}),Object(d.jsx)("span",{children:t})]}),f=({selected:e="chat/calls",disabled:t,onChange:a})=>{const n=Object(s.a)(),i=Object(d.jsx)(h,{icon:"feature-chat",title:n.formatMessage({id:"common.settings.createAppDialog.productType.chat"})},"chat"),o=Object(d.jsx)(h,{icon:"call",title:n.formatMessage({id:"common.settings.createAppDialog.productType.calls"})},"call"),c=[{id:"chat",contents:[i]},{id:"chat/calls",contents:[i,Object(d.jsx)(b,{},"plus"),o]}];return Object(d.jsx)(g,{disabled:t,children:c.map(({id:t,contents:n})=>Object(d.jsx)(j,{selected:t===e,onClick:()=>a(t),children:n},t))})},O=o.default.div.withConfig({displayName:"createAppForm__RegionItemContainer",componentId:"u988b0-4"})(["display:flex;align-items:center;svg{margin-right:6px;}"]),x=({name:e})=>Object(d.jsxs)(O,{children:[Object(d.jsx)(c.Icon,{icon:"location",size:16}),e]}),y=o.default.p.withConfig({displayName:"createAppForm__Error",componentId:"u988b0-5"})(["",";transition:0.2s all ",";color:",";font-size:12px;line-height:16px;margin-top:4px;"],({show:e})=>e?Object(o.css)(["{opacity:1;height:16px;transform:translateY(0px);}"]):Object(o.css)(["{opacity:0;height:0px;transform:translateY(-16px);}"]),c.transitionDefault,Object(c.cssVariables)("red-5")),_=({error:e,...t})=>{const a=Object(s.a)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(c.Dropdown,{width:"100%",placeholder:a.formatMessage({id:"common.settings.createAppDialog.region.placeholder"}),itemToString:e=>e.name,itemToElement:e=>Object(d.jsx)(x,{name:e.name}),isItemDisabled:e=>!e.allowed,useSearch:!0,hasError:null==e?void 0:e.hasError,...t}),Object(d.jsx)(y,{show:null==e?void 0:e.hasError,children:null==e?void 0:e.message})]})},w=()=>{const e=Object(s.a)();return Object(d.jsx)(c.ContextualHelp,{content:e.formatMessage({id:"common.settings.createAppDialog.region.tooltip"}),placement:"right-start",tooltipContentStyle:Object(o.css)(["max-width:256px;font-weight:400;"]),children:Object(d.jsx)(c.TooltipTargetIcon,{icon:"info"})})},C=o.default.span.withConfig({displayName:"createAppForm__Description",componentId:"u988b0-6"})(["",";color:",";margin-top:16px;"],c.Body["body-short-01"],Object(c.cssVariables)("neutral-7")),A=o.default.p.withConfig({displayName:"createAppForm__ApplicationRemains",componentId:"u988b0-7"})(["font-size:14px;line-height:20px;color:",";margin-bottom:22px;strong{font-weight:500;}"],Object(c.cssVariables)("neutral-10"));var I=Object(o.default)(p.U).withConfig({displayName:"createAppForm___StyledDialogFormSet",componentId:"u988b0-8"})(["margin-bottom:24px;"]),D=Object(o.default)(p.U).withConfig({displayName:"createAppForm___StyledDialogFormSet2",componentId:"u988b0-9"})(["margin-top:16px !important;","{margin-bottom:0px;}"],p.T),v=Object(o.default)(c.InlineNotification).withConfig({displayName:"createAppForm___StyledInlineNotification",componentId:"u988b0-10"})(["margin-top:16px;"]);const F=({organization:e,disabled:t,actions:a,error:o,onSubmit:b})=>{const u=Object(s.a)(),[g,j]=Object(n.useState)(""),{register:h,control:O,watch:x,setValue:y,handleSubmit:F,errors:V}=Object(i.d)({defaultValues:{type:"chat",name:"",region:null}}),N=x("type"),S="chat/calls"===N,T=Object(n.useMemo)(()=>Object.keys(e.regions).map(t=>({key:t,...e.regions[t]})).filter(e=>e.allowed).filter(e=>{return t=e.name,a=g,t.toLowerCase().includes(a.toLowerCase());var t,a}).filter(e=>!S||r.q.includes(e.key)).sort(m),[S,e.regions,g]);return Object(n.useEffect)(()=>{y("region",null)},[y,N]),Object(d.jsxs)("form",{onSubmit:F(b),children:[Object(d.jsxs)(p.R,{children:[Object(d.jsx)(A,{children:u.formatMessage({id:"common.applications.maxApplicationCount.withRemains"},{max:Object(d.jsx)("strong",{children:e.max_application_count}),remain:Object(d.jsx)("strong",{children:e.max_application_count-e.total_applications}),remainCount:e.max_application_count-e.total_applications})}),Object(d.jsxs)(I,{children:[Object(d.jsx)(p.T,{children:"Product type"}),Object(d.jsx)(i.a,{name:"type",control:O,render:({onChange:e})=>Object(d.jsx)(f,{onChange:e,selected:N,disabled:t})})]}),Object(d.jsxs)(p.U,{children:[Object(d.jsx)(p.T,{"data-test-id":"NameField",children:u.formatMessage({id:"common.settings.createAppDialog.name.label"})}),Object(d.jsx)(c.InputText,{name:"name",ref:h({required:!0}),error:{hasError:!!V.name,message:u.formatMessage({id:"common.settings.createAppDialog.name.required"})},placeholder:u.formatMessage({id:"common.settings.createAppDialog.name.placeholder"}),disabled:t})]}),Object(d.jsxs)(D,{children:[Object(d.jsxs)(p.T,{children:[u.formatMessage({id:"common.settings.createAppDialog.region.label"}),Object(d.jsx)(w,{})]}),Object(d.jsx)(i.a,{name:"region",control:O,rules:{required:!0},render:({onChange:e,value:a})=>Object(d.jsx)(_,{error:{hasError:!!V.region,message:u.formatMessage({id:"common.settings.createAppDialog.region.required"})},items:T,onItemSelected:e,selectedItem:a,disabled:t,onSearchChange:j})})]}),S&&Object(d.jsx)(C,{children:u.formatMessage({id:"common.settings.createAppDialog.callsRegionsNotice"})}),o&&Object(d.jsx)(v,{type:"error",message:Object(l.b)(o)})]}),a]})}}}]);
//# sourceMappingURL=16.js.map?v=cfaef17af5b2b8dc067c