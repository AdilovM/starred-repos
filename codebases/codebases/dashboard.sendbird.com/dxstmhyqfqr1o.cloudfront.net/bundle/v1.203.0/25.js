(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+I7e":function(e,t,i){e.exports=i.p+"30493c54680612498cf120b09b53007f.svg"},"0sZ6":function(e,t,i){e.exports=i.p+"d3d059a19419508baa3c1e6b934b16b6.svg"},"1LQM":function(e,t,i){e.exports=i.p+"1411ebb2d96c6c55ca272b7432a3ec17.svg"},"1XSo":function(e,t,i){e.exports=i.p+"39613f96b2be9ddc777fd00c591701a3.mp3"},"2r4B":function(e,t,i){e.exports=i.p+"a6fbb534901171f8ab49065fba562ac5.svg"},"4D/w":function(e,t,i){e.exports=i.p+"e8626e121c99ef686f67e52fce878937.svg"},"4I8z":function(e,t,i){e.exports=i.p+"1ec58e8170bd4a34959a53db5c0ea2e6.svg"},"61N+":function(e,t,i){e.exports=i.p+"17963b6fbe7ced609bad1bf11214430e.svg"},"6qbC":function(e,t,i){e.exports=i.p+"76fef9855799249fd7a63756e7736cf8.svg"},"7+dL":function(e,t,i){e.exports=i.p+"6e758897a2764e89a3ba73ba2839bcb0.svg"},"7kB/":function(e,t,i){e.exports=i.p+"fbcc67b67b7b3ce49d29b301ca61d8e9.svg"},D3ju:function(e,t,i){e.exports=i.p+"1399890d905dd2a5a6cd4fc0ce83acd8.mp3"},DxFA:function(e,t,i){e.exports=i.p+"6e758897a2764e89a3ba73ba2839bcb0.svg"},FAnq:function(e,t,i){e.exports=i.p+"338e0bbb7ebc06d7574005b2f4d4f5c5.svg"},FTCn:function(e,t,i){e.exports=i.p+"65a0783a12328863868ec9561bfe479d.svg"},Fsm5:function(e,t,i){e.exports=i.p+"30493c54680612498cf120b09b53007f.svg"},GF0j:function(e,t,i){e.exports=i.p+"3d87a0f3b7c70b0baa170667bc513875.svg"},LVH7:function(e,t,i){e.exports=i.p+"dd22725369afed409f8e08195bc153a4.svg"},Legu:function(e,t,i){e.exports=i.p+"f2cbfe6cd51a4e29566081bec92c82bf.svg"},RMVh:function(e,t,i){e.exports=i.p+"407699ed3d79a87d958741b53399e5d6.svg"},UG97:function(e,t,i){e.exports=i.p+"d764c67f180e6988bf11c2720482f10f.svg"},UIlp:function(e,t,i){e.exports=i.p+"76da21a9ad1d4371cbf7b62f378d1f74.svg"},XCv8:function(e,t,i){e.exports=i.p+"2d143b2da2fe025a143ab32a3d117a95.svg"},XtHK:function(e,t,i){e.exports=i.p+"27aff077d74d9114e9fdb27b1ae12fcf.svg"},YX1t:function(e,t,i){e.exports=i.p+"6f57b851a36d87ff1d0703c2fcf119d3.mp3"},b0uV:function(e,t,i){e.exports=i.p+"72f699553c383f62e37ee507288560e5.svg"},bpss:function(e,t,i){e.exports=i.p+"eeca652ee45697e7167dd58094d2a2db.svg"},c76Y:function(e,t,i){e.exports=i.p+"b16f4186546f1a41e143dde2d21b5860.svg"},d1da:function(e,t,i){e.exports=i.p+"edc6f08db8d80fd2871d864b167313bb.svg"},fA9l:function(e,t,i){e.exports=i.p+"b6c114cf3abfe3ec1f138c270cca0088.svg"},hnFM:function(e,t,i){e.exports=i.p+"72f699553c383f62e37ee507288560e5.svg"},kH23:function(e,t,i){e.exports=i.p+"07dbb713d75a7ed023e45e79de4582a2.svg"},llMG:function(e,t,i){e.exports=i.p+"ea32c4f3e6f3a5eb0cfdca4fa7a8802d.svg"},lywC:function(e,t,i){e.exports=i.p+"4a9f88c5110bbaa96ea4061045a6b1e2.svg"},mMDt:function(e,t,i){e.exports=i.p+"7ba7ea0a719e22454a63f443193e182d.svg"},"n+Bi":function(e,t,i){e.exports=i.p+"5d832c83fc80700c6cbc969750e45329.mp3"},"ohU+":function(e,t,i){"use strict";i.r(t);i("UxlC"),i("3bBZ");var n=i("q1tI"),a=i("dDsW"),o=i("Ty5D"),s=i("vOnD"),l=i("JsuU"),r=i("W7Pl"),d=i("wFjZ"),c=i("8Z7i"),p=i.n(c);function h(e){return Object.assign({localMediaView:null,remoteMediaView:null,videoEnabled:!0,audioEnabled:!0},e)}function g(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function u({tagName:e,id:t,innerText:i,attrs:n,className:a}){if(!e)throw"NoTagName";const o=document.createElement(e);return t&&(o.id=t),i&&(o.innerText=i),n&&Object.entries(n).forEach(([e,t])=>{o.setAttribute(e,t)}),a&&(o.className=a),o}function m({id:e,className:t,innerText:i}={}){return u({tagName:"div",id:e,className:t,innerText:i})}function b({id:e,htmlFor:t,className:i,innerText:n}={}){const a={};return t&&(a.for=t),u({tagName:"label",id:e,className:i,innerText:n,attrs:a})}function f({id:e,className:t,autoplay:i,muted:n,remote:a}={}){const o=u({tagName:"audio",id:e,className:t,attrs:{}});return o.autoplay=i,o.muted=n,a&&g()&&(o.controls=!0),o}function x({id:e,className:t,autoplay:i,muted:n,remote:a}={}){const o=u({tagName:"video",id:e,className:t,attrs:{playsinline:""}});return o.autoplay=i,o.muted=n,a&&g()&&(o.controls=!0),o}function v({id:e,className:t,placeholder:i}={}){const n={};return i&&(n.placeholder=i),u({tagName:"input",id:e,className:t,attrs:n})}function w({id:e,className:t}={}){return u({tagName:"select",id:e,className:t})}function C({id:e,className:t,innerText:i}={}){return u({tagName:"button",id:e,className:t,innerText:i})}function $({id:e,className:t,src:i,alt:n,onerror:a}={}){const o=u({tagName:"img",id:e,className:t,attrs:{src:i,alt:n}});return o.onerror=a,o}function k({id:e,className:t,innerText:i}={}){return u({tagName:"p",id:e,className:t,innerText:i})}function y(e,t,i){e.classList.replace(t,i)}function I(e,t){return-1!==e.classList.value.indexOf(t)}class N{constructor({id:e,className:t,element:i,args:n}={}){this.children=[],this.args=n||{},this.element=i||m({}),e&&(this.element.id=e),this.element.className=this.element.className||" "+t||""}build(){throw"Implement this in subclass."}onLoaded(){}_passArgs(e){this.args=e}appendToHTML(e){this.build(),e.appendChild(this.element),this.onLoaded&&this.onLoaded()}appendToBaseElement(e){this._passArgs(e.args),this.build(),e.element.appendChild(this.element),this.parent=e,e.children.push(this),this.onLoaded&&this.onLoaded()}sendToParent(e,t){this.parent&&this.parent.recvMessage(e,t)}sendToChildren(e,t){this.children.map(i=>i.recvMessage(e,t))}recvMessage(e,t){}remove(){if(!this.removed){if(this.removed=!0,this.onRemoved&&this.onRemoved(),this.parent){const e=this.parent.children.indexOf(this);e>-1&&this.parent.children.splice(e,1),this.parent=null}this.element.parentElement&&this.element.parentElement.removeChild(this.element);for(let e=this.children.length-1;e>=0;e--){this.children[e].remove()}return this.element=void 0,!0}}}var L=i("/ceM"),T=i("DBTG"),D=i("UG97"),_=i.n(D),S=i("roG5"),B=i.n(S),A=i("+I7e"),R=i.n(A),V=i("lywC"),M=i.n(V),P=i("DxFA"),H=i.n(P),W=i("c76Y"),E=i.n(W),j=i("XtHK"),O=i.n(j),F=i("7kB/"),z=i.n(F),U=i("1LQM"),G=i.n(U),Q=i("RMVh"),X=i.n(Q),q=i("mMDt"),Y=i.n(q),K=i("Legu"),Z=i.n(K),J=i("FTCn"),ee=i.n(J),te=i("y3y/"),ie=i.n(te),ne=i("FAnq"),ae=i.n(ne),oe=i("0sZ6"),se=i.n(oe),le=i("4D/w"),re=i.n(le),de=i("7+dL"),ce=i.n(de),pe=i("kH23"),he=i.n(pe),ge=i("UIlp"),ue=i.n(ge),me=i("GF0j"),be=i.n(me),fe=i("fA9l"),xe=i.n(fe),ve=i("6qbC"),we=i.n(ve),Ce=i("b0uV"),$e=i.n(Ce),ke=i("61N+"),ye=i.n(ke),Ie=i("XCv8"),Ne=i.n(Ie),Le=i("bpss"),Te=i.n(Le),De=i("llMG"),_e=i.n(De),Se=i("vt5h"),Be=i.n(Se),Ae=i("hnFM"),Re=i.n(Ae),Ve=i("d1da"),Me=i.n(Ve),Pe=i("Fsm5"),He=i.n(Pe),We=i("2r4B"),Ee=i.n(We);const je=Object.assign({},Object(T.a)(),{createGenerateId:()=>(e,t)=>`sendbird-sample-${e.key}`});L.a.setup(je);const Oe={navy50:"#f6f8fc",navy80:"#eef2fa",navy100:"#dee2f2",navy200:"#c9d0e6",navy300:"#b6bdd7",navy400:"#8a92ba",navy600:"#595e8a",navy800:"#353761",navy900:"#212242",white:"#ffffff",purple50:"#ededff",purple300:"#825eeb",purple400:"#6440c4",green300:"#1fcca1",green400:"#00998c",green500:"#007a7a",red300:"#f24d6b",red400:"#d92148",mutegray:"rgba(168, 168, 168, 0.38)"},Fe={mainApp:{},center:{alignItems:"center",justifyContent:"center"},right:{alignItems:"center",justifyContent:"flex-end"},column:{display:"flex",flexDirection:"column"},row:{display:"flex",flexDirection:"row"},content:{marginBottom:"auto",width:"100%"},grow1:{flexGrow:1},grow2:{flexGrow:2},grow3:{flexGrow:3},grow4:{flexGrow:4},btn:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",textDecoration:"none",border:"none",borderRadius:"4px",height:"40px","& label":{cursor:"inherit"},backgroundColor:Oe.white},btnPrimary:{backgroundColor:Oe.purple300,color:Oe.white},btnBig:{width:"180px",height:"50px",marginLeft:"16px",marginRight:"16px"},btnMid:{width:"80px",height:"40px"},btns:{marginTop:"16px"},container:{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},hidden:{display:"none !important"},invisible:{visibility:"hidden"},avatar:{flexShrink:"0",width:"32px",height:"32px",borderRadius:"50%",marginLeft:"24px",marginRight:"16px",backgroundImage:`url(${we.a})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},profileSmall:{flexShrink:"0",width:"40px",height:"40px",borderRadius:"50%",marginLeft:"24px",marginRight:"16px",backgroundImage:e=>`url(${e.profileUrl})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},logoMid:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:`${Oe.white}`,backgroundImage:`url(${_.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",marginBottom:"16px"},logoBig:{display:"block",width:"180px",height:"40px",background:`url(${R.a})`,marginBottom:"24px"},headerLogo:{display:"block",width:"100%",height:"24px",backgroundImage:`url(${_e.a})`,backgroundRepeat:"no-repeat",marginLeft:"16px"},view:{boxSizing:"border-box",width:"100%",height:"100%",padding:"24px",display:"relative"},viewDial:{height:"calc(100% - 110px)",color:Oe.navy900,"& $content":{marginTop:"auto"},"& $formContainer":{border:"none"}},viewLogin:{backgroundColor:Oe.navy50,color:Oe.navy900,"& $content":{marginTop:"134px"}},viewCall:{backgroundColor:Oe.navy900,color:Oe.white},viewSettings:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",zIndex:"100",overflow:"hidden",borderRadius:"inherit"},settingsCloseButton:{display:"inline-flex",width:"32px",height:"32px",cursor:"pointer",backgroundImage:`url(${ue.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center"},cover:{position:"absolute",width:"100%",height:"100%",opacity:.6,backgroundColor:Oe.navy800},popup:{boxSizing:"border-box",width:"100%",maxWidth:"480px",paddingTop:"16px",paddingBottom:"24px",paddingLeft:"24px",paddingRight:"24px",zIndex:"1",boxShadow:"0 6px 10px -5px rgba(33, 34, 66, 0.04), 0 6px 30px 5px rgba(33, 34, 66, 0.08), 0 16px 24px 2px rgba(33, 34, 66, 0.12)",borderRadius:"4px",backgroundColor:Oe.white},popupHeader:{display:"flex",alignItems:"center",width:"100%"},popupTitle:{display:"inline-flex",width:"calc(100% - 20px)"},popupItemLabel:{display:"inline-block",width:"100%",height:"12px",marginTop:"22px",marginBottom:"6px",lineHeight:"12px !important"},widgetpopup:{width:"312px",marginBottom:"2px"},appInfoLabelWrap:{display:"flex",width:"100%",height:"40px",borderRadius:"4px",alignItems:"center",justifyContent:"space-between",backgroundColor:Oe.navy80},appInfoLabel:{display:"inline-flex",width:"calc(100% - 60px)",height:"40px",borderRadius:"4px",paddingLeft:"16px",lineHeight:"40px !important",textOverflow:"clip",overflow:"hidden",backgroundColor:Oe.navy80,color:Oe.nany600},appName:{width:"calc(100% - 16px) !important"},appInfoIdLabel:{textOverflow:"clip",overflow:"hidden",whiteSpace:"pre"},appInfoIdCopy:{display:"inline-flex",width:"32px",height:"32px",borderRadius:"4px",marginRight:"4px",backgroundImage:`url(${Ee.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",cursor:"pointer"},fontSmall:{fontFamily:"Avenir Next",fontSize:"12px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",color:Oe.navy900,lineHeight:"normal",letterSpacing:"normal",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},fontNormal:{fontFamily:"Avenir Next",fontSize:"14px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",color:Oe.navy900,lineHeight:"1.43",letterSpacing:"normal",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},fontMidBig:{fontFamily:"Avenir Next",fontSize:"18px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",color:Oe.navy900,lineHeight:"1.33",letterSpacing:"-0.25px",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},font16:{fontFamily:"Avenir Next",fontSize:"16px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",color:Oe.navy900,lineHeight:"1.25",letterSpacing:"-0.15px",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},font20:{fontFamily:"Avenir Next",fontSize:"20px",fontStretch:"normal",fontStyle:"normal",lineHeight:"1.33",letterSpacing:"-0.25px",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},font24:{fontFamily:"Avenir Next",fontSize:"24px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",color:Oe.navy900,lineHeight:"1.33",letterSpacing:"-0.25px",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},fontBig:{fontFamily:"Avenir Next",height:"32px",fontSize:"24px",fontWeight:"normal",fontStretch:"normal",fontStyle:"normal",lineHeight:"1.33",letterSpacing:"-0.25px",textRendering:"optimizelegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},fontHeavy:{fontWeight:500},fontDemi:{fontWeight:600},fontColorWhite:{color:Oe.white},fontReadOnlyColor:{color:Oe.navy600},tabToolBar:{position:"relative",display:"inline-flex",justifyContent:"center",width:"100%",height:"55px",backgroundColor:Oe.white,textAlign:"center",borderTop:"solid 1px #dee2f2",borderBottom:"solid 1px #dee2f2"},tabToolBarWidget:{position:"absolute",display:"inline-block",bottom:"0px",left:"0px",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},btnTab:{display:"inline-block",width:"100px",height:"55px",cursor:"pointer"},btnTabWidget:{width:"156px"},tabIco:{width:"100%",height:"32px",backgroundRepeat:"no-repeat",backgroundPosition:"center"},dialActive:{backgroundImage:`url(${$e.a})`},dialDeactive:{backgroundImage:`url(${ye.a})`},btnTabCaption:{width:"100%",height:"12px",margin:0,lineHeight:1,textAlign:"center"},icoTabCallLog:{width:"100%",height:"32px",backgroundRepeat:"no-repeat",backgroundPosition:"center"},callLogActive:{backgroundImage:`url(${Te.a})`},callLogDeactive:{backgroundImage:`url(${Ne.a})`},btnTabActive:{color:Oe.purple300},btnTabDeactive:{color:Oe.navy600},formContainer:{boxSizing:"border-box",width:"100%",maxWidth:"500px",borderRadius:"4px",border:"solid 1px #dee2f2",backgroundColor:Oe.white,paddingLeft:"48px",paddingRight:"48px"},field:{boxSizing:"border-box",width:"100%",height:"40px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"16px",borderRadius:"4px",border:`solid 1px ${Oe.navy200}`,backgroundColor:Oe.white,marginBottom:"16px"},dialField:{width:"312px"},fieldInvalid:{border:`solid 1px ${Oe.red300}`},fieldLabel:{display:"inline-block",height:"12px",marginTop:"6px",marginBottom:"6px","&:first-of-type":{marginTop:"38px"}},dialTitle:{marginBottom:"32px"},loginButton:{width:"100%",marginBottom:"40px"},dialButton:{},logoutButton:{},loginTitleDiv:{marginBottom:"40px"},hr:`\n    width: calc(100% + 96px);\n    height: 1px;\n    border: 0;\n    border-top: 1px solid ${Oe.navy100};\n    margin-left: -48px;\n    margin-top: 10px;\n    margin-bottom: 23px;\n  `,error:{marginBottom:"8px",color:Oe.red300},remoteProfile:"\n    display: block;\n    width: 80px;\n    height: 80px;\n    border-radius: 50%;\n    object-fit: contain;\n    margin-bottom: 24px;\n  ",peerName:"\n    min-height: 32px;\n    height: auto;\n    text-align: center;\n    word-break: break-all;\n    margin-bottom: 4px;\n  ",connectionInfo:"\n    height: 20px;\n    margin-bottom: 24px;\n  ",peerStateDiv:"\n    align-items: center;\n    margin-bottom: 97px;\n  ",peerMuteIcon:`\n    width: 32px;\n    height: 32px;\n    background-image: url(${Y.a});\n    background-repeat: no-repeat;\n    background-position: center;\n    margin-bottom: 8px;\n  `,peerMuteLabel:"\n    display: block;\n  ",peerVideoMuteIcon:`\n    width: 40px;\n    height: 40px;\n    background-image: url(${Z.a});\n    background-repeat: no-repeat;\n    background-position: center;\n    margin-bottom: 16px;\n  `,peerVideoMuteLabel:"\n    display: block;\n  ",callButtons:{position:"relative"},callButtonsWidget:{position:"absolute",bottom:"40px"},btnCircle:{width:"64px",height:"64px",borderRadius:"50%",backgroundColor:Oe.white,borderColor:"transparent",cursor:"pointer","&::before":{content:"",display:"block",width:"56px",height:"56px",borderRadius:"50%"},"btn-circle:hover::before":{backgroundColor:Oe.mutegray}},btnCall:{marginLeft:"10px",marginRight:"10px"},btnVideoAccept:{backgroundColor:"#2eba9f",backgroundImage:`url(${E.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:Oe.green500}},btnAccept:{backgroundColor:"#2eba9f",backgroundImage:`url(${M.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:Oe.green500}},btnMute:{backgroundColor:Oe.mutegray,backgroundImage:`url(${Y.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:"rgba(168, 168, 168, 0.5)"}},btnUnmute:{backgroundColor:Oe.white,backgroundImage:`url(${X.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:"rgba(168, 168, 168, 0.5)"}},btnStopVideo:{backgroundColor:Oe.mutegray,backgroundImage:`url(${z.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:"rgba(168, 168, 168, 0.5)"}},btnStartVideo:{backgroundColor:Oe.white,backgroundImage:`url(${G.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:"rgba(168, 168, 168, 0.5)"}},btnEnd:{backgroundColor:"#e53157",backgroundImage:`url(${ae.a})`,backgroundRepeat:"no-repeat",backgroundSize:"32px",backgroundPosition:"center","&:hover":{backgroundColor:"#a30e2d"}},videoView:{position:"absolute",height:"100%",left:"50%",transform:"translate(-50%)"},videoViewDiv:{position:"absolute",overflow:"hidden"},videoViewStopped:{"& $videoView":{visibility:"invisible"}},videoFull:{position:"absolute",width:"100%",height:"100%",transition:"all 1s"},videoSmall:{position:"absolute",top:"16px",left:"16px",width:"200px",height:"150px",borderRadius:"8px",backgroundColor:Oe.navy300,transition:"all 1s"},videoHidden:{opacity:"0",transition:"all 0.5s",display:"none"},callBackground:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},callBackgroundWidget:{borderRadius:"8px"},callForeground:{position:"relative"},btnDecline:{backgroundColor:"rgba(0, 0, 0, 0.12)",backgroundImage:`url(${ee.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.38)"}},closeDiv:{},btnClose:{width:"248px",height:"48px",border:"none",borderRadius:"4px",marginBottom:"28px",background:"rgba(255, 255, 255, 0.08)",color:Oe.white,"&:hover":{cursor:"pointer",background:"rgba(255, 255, 255, 0.28)"}},"@keyframes fadein":{from:{bottom:0,opacity:0},to:{bottom:"24px",opacity:1}},"@keyframes fadeout":{from:{opacity:1},to:{bottom:0,opacity:0}},toast:{visibility:"hidden",display:"inline-flex",position:"absolute",left:"32px",bottom:"24px",width:"33%",padding:"14px 16px",zIndex:"200",borderRadius:"4px",boxShadow:"0 6px 10px -5px rgba(33, 34, 66, 0.04), 0 6px 30px 5px rgba(33, 34, 66, 0.08), 0 16px 24px 2px rgba(33, 34, 66, 0.12)",backgroundColor:Oe.red300},toastShow:{animation:"$fadein 0.5s"},toastHide:{animation:"$fadeout 0.5s"},toastErrorIcon:{boxSizing:"border-box",alignSelf:"start",width:"20px",height:"20px",paddingRight:"20px",objectFit:"contain",backgroundColor:"inherit",backgroundImage:`url(${se.a})`},toastMsg:{marginLeft:"16px",color:Oe.white},toastCloseBtn:{cursor:"pointer",boxSizing:"border-box",alignSelf:"start",width:"20px",height:"20px",paddingLeft:"32px",marginLeft:"auto",objectFit:"contain",border:"none",backgroundColor:"inherit",backgroundImage:`url(${re.a})`,backgroundPosition:"right",backgroundRepeat:"no-repeat"},selectContainer:{boxSizing:"border-box",width:"100%",maxWidth:"500px",borderRadius:"4px",backgroundColor:Oe.white},selectLabel:{display:"inline-block",height:"12px",marginTop:"6px",marginBottom:"6px","&:first-of-type":{marginTop:"16px"}},blockSelect:{appearance:"none",display:"block",width:"100%",height:"40px",marginBottom:"16px",paddingLeft:"16px",paddingRight:"36px",paddingTop:"10px",paddingBottom:"10px",borderRadius:"4px",border:`solid 1px ${Oe.navy200}`,backgroundColor:Oe.white,backgroundImage:`url(${xe.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"calc(100% - 12px) center","&:last-of-type":{marginBottom:"0"}},versionInfo:{display:"none",position:"absolute",width:"100%",bottom:"24px"},versionLabel:{marginLeft:"8px",marginRight:"8px"},widgetApp:{"& $fieldLabel":{"&:first-of-type":{marginTop:"0px"}},"& $viewLogin":{backgroundColor:Oe.white,"& $content":{marginTop:"96px"},"& $versionInfo":{display:"flex"},"& $closeButton":{position:"absolute",top:"16px",right:"16px",backgroundImage:`url(${ie.a})`}},"& $viewDial":{height:"calc(100% - 136px)","& $content":{margin:"auto"},"& $versionInfo":{display:"none"}},"& $widgetHeader":{flexDirection:"row",height:"80px",borderTopLeftRadius:"8px",borderTopRightRadius:"8px","& $closeButton:hover":{backgroundColor:Oe.purple400}},"& $userDiv":{cursor:"auto",flexDirection:"row"},"& $avatar":{width:"40px",height:"40px"},"& $headerDivider":{display:"none"},"& $headerButtons":{marginLeft:"auto",marginRight:"14px"},"& $settingsButton":{width:"48px",height:"48px"},"& $closeButton":{display:"block"},"& $headerUserId":{display:"block"},"& $formContainer":{boxSizing:"border-box",paddingLeft:"24px",paddingRight:"24px",border:"none"},"& $videoSmall":{width:"96px",height:"160px",borderRadius:"8px"},"& $toast":{left:"calc((100% - 80% - 32px) / 2)",width:"80%"}},widgetDiv:{position:"inherit",width:"376px",height:"592px",border:"none",borderRadius:"8px",boxShadow:"0 9px 15px -7px rgba(33, 34, 66, 0.04), 0 9px 46px 8px rgba(33, 34, 66, 0.08), 0 24px 38px 3px rgba(33, 34, 66, 0.12)",backgroundColor:Oe.white,overflow:"hidden"},widgetIcon:{cursor:"pointer",width:"48px",height:"48px",borderRadius:"24px",backgroundColor:Oe.purple300,backgroundImage:`url(${ce.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",boxShadow:"0 5px 8px -4px rgba(33, 34, 66, 0.04), 0 5px 22px 4px rgba(33, 34, 66, 0.08), 0 12px 17px 2px rgba(33, 34, 66, 0.12)",marginBottom:"32px"},widgetHeader:{display:"inline-flex",position:"relative",flexDirection:"row-reverse",alignItems:"center",width:"100%",height:"48px",backgroundColor:Oe.purple300},userDiv:{display:"flex",cursor:"pointer",flexDirection:"row-reverse"},headerInfo:{display:"flex",flexDirection:"column",justifyContent:"center"},headerUserId:{display:"none",whiteSpace:"nowrap",color:Oe.purple50},headerNickname:{whiteSpace:"nowrap",color:Oe.white},userDetail:{display:"flex",flexDirection:"row","& $profileSmall":{width:"32px",height:"32px",marginLeft:"0px"},"& $avatar":{marginLeft:"0px"},"& $headerNickname":{color:Oe.navy900},"& $headerUserId":{color:Oe.navy600,display:"block"}},menuItemsDiv:{position:"absolute",top:"40px",right:"0",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"0px",paddingRight:"0px",minWidth:"248px",borderRadius:"4px",boxShadow:"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(33, 34, 66, 0.08), 0 8px 10px 1px rgba(33, 34, 66, 0.12)",backgroundColor:Oe.white,zIndex:"1"},menuItem:{display:"block",boxSizing:"border-box",paddingTop:"0px",paddingBottom:"0px",paddingLeft:"16px",paddingRight:"16px",width:"100%",height:"auto",minHeight:"32px",textAlign:"left","&:hover":{backgroundColor:Oe.navy50}},disabledMenuItem:{display:"block",boxSizing:"border-box",cursor:"default",paddingTop:"0px",paddingBottom:"0px",paddingLeft:"16px",paddingRight:"16px",width:"100%",height:"auto",minHeight:"32px",textAlign:"left"},menuDivider:{width:"100%",height:"1px",marginTop:"8px",marginBottom:"8px",backgroundColor:Oe.navy100},headerDivider:{width:"1px",height:"20px",marginLeft:"8px",marginRight:"16px",backgroundColor:Oe.purple400},headerButtons:{marginLeft:"14px"},settingsButton:{position:"relative",marginLeft:"2px",marginRight:"2px",width:"48px",height:"48px",borderRadius:"4px",cursor:"pointer",backgroundImage:`url(${he.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",zIndex:10},closeButton:{display:"none",marginLeft:"2px",marginRight:"2px",width:"48px",height:"48px",borderRadius:"4px",cursor:"pointer",backgroundImage:`url(${be.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center"},logoMidBlack:{width:"56px",height:"56px",marginBottom:"8px",backgroundImage:`url(${B.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center"},btnVideo:{backgroundImage:`url(${O.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",border:`solid 1px ${Oe.purple300}`},btnAudio:{backgroundImage:`url(${H.a})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:Oe.purple300},callLogListContainer:{display:"inline-block",position:"relative",height:"100%",overflowY:"auto",listStyle:"none",margin:"0",padding:"0",borderRight:"solid 1px #dee2f2",li:{"&:first-child":{borderTop:"unset"}}},callLogListDesc:{display:"inline-flex",position:"absolute",width:"calc(100% - 382px)",height:"calc(100% - 103px)",margin:"0",padding:"0",right:"0px",justifyContent:"center",alignItems:"center",flexDirection:"column"},callLogDescLogo:{display:"block",position:"relative",width:"100%",height:"40px",backgroundImage:`url(${He.a})`,backgroundPosition:"center",backgroundRepeat:"no-repeat"},callLogDescTitle:{position:"relative",width:"100%",height:"32px",textAlign:"center",marginTop:"24px",color:Oe.navy900},callLogDescLabel:{position:"relative",width:"275px",height:"40px",textAlign:"center",marginTop:"16px",color:Oe.navy600},widgetCallLog:{height:"100%",width:"100%",overflowX:"hidden"},callLogItemWrap:{display:"flex",flexDirection:"row",justifyContent:"flex-start",position:"relative",width:"100%",minHeight:"88px",height:"auto",borderBottom:"solid 1px #dee2f2"},callLogEmptyWrap:{position:"relative",width:"312px",height:"116px",marginTop:"158px",marginLeft:"32px"},icoCallLogEmpty:{display:"inline-block",width:"100%",height:"64px",backgroundImage:`url(${Me.a})`,backgroundPosition:"center",backgroundRepeat:"no-repeat"},labelCallLogEmpty:{display:"inline-block",width:"100%",height:"20px",marginTop:"12px",textAlign:"center",color:Oe.navy600},callLogTypeDiv:{display:"inline-flex",width:"44px",height:"100%"},callLogProfileDiv:{display:"inline-flex",width:"32px",height:"100%"},callLogInfoDiv:{display:"inline-flex",flexDirection:"column",justifyContent:"flex-start",width:"156px",height:"100%"},callLogActionDiv:{display:"inline-flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"right",width:"136px",height:"100%"},callLogItemType:{display:"block",width:"20px",height:"20px",marginLeft:"16px",marginTop:"24px"},callLogProfileImg:{display:"block",width:"32px",height:"32px",marginTop:"18px",borderRadius:"50%"},callLogDisplayName:{display:"inline-flex",width:"140px",height:"auto",marginTop:"16px",marginLeft:"12px",wordBreak:"break-all"},callLogDisplayId:{display:"inline-flex",width:"140px",height:"auto",marginLeft:"12px",wordBreak:"break-all",color:Oe.navy600},callLogEndInfo:{display:"inline-flex",width:"100%",height:"16px",marginLeft:"12px",marginTop:"8px",color:Oe.navy600},callLogStartTime:{display:"block",width:"120px",height:"16px",textAlign:"right",marginTop:"18px",marginRight:"16px",color:Oe.navy600},callLogActionBtnWrap:{display:"inline-flex",flexDirection:"row",justifyContent:"flex-end",width:"136px",height:"56px"},callLogVideoActionBtn:{width:"32px",height:"32px",borderRadius:"50%",backgroundImage:`url(${Be.a})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",marginRight:"12px",marginTop:"8px",backgroundColor:Oe.navy80,cursor:"pointer"},callLogVoiceActionBtn:{width:"32px",height:"32px",borderRadius:"50%",backgroundImage:`url(${Re.a})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",marginTop:"8px",marginRight:"16px",backgroundColor:Oe.navy80,cursor:"pointer"},welcomeDiv:{}},ze=L.a.createStyleSheet(Fe,{link:!0}),Ue=ze.classes;var Ge=i("n+Bi"),Qe=i.n(Ge),Xe=i("1XSo"),qe=i.n(Xe),Ye=i("D3ju"),Ke=i.n(Ye),Ze=i("YX1t"),Je=i.n(Ze);class et extends N{constructor({args:e}){super({id:"login_view",className:`${Ue.column} ${Ue.center} ${Ue.view} ${Ue.viewLogin}`,args:e})}onLoaded(){this.args.userId&&this.setCredentials(this.args.userId,this.args.accessToken)}build(){const e=m({id:"close_button",className:`${Ue.closeButton}`});e.onclick=()=>{this.sendToParent("widgetclose")};const t=m({id:"content",className:`${Ue.content} ${Ue.column} ${Ue.center}`}),i=m({id:"logo_oval",className:Ue.logoMid}),n=m({id:"login_title_div",className:Ue.loginTitleDiv}),a=b({id:"login_title",innerText:"Sendbird Calls",className:`${Ue.fontBig} ${Ue.fontDemi}`});n.appendChild(a);const o=m({id:"form_container",className:Ue.formContainer}),s=b({id:"input_app_id_label",htmlFor:"input_app_id",innerText:"Application ID",className:`${Ue.fieldLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`}),l=v({id:"input_app_id",className:`${Ue.field} ${Ue.fontNormal}`}),r=b({id:"input_id_label",htmlFor:"input_id",innerText:"User ID",className:`${Ue.fieldLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`}),d=v({id:"input_id",className:`${Ue.field} ${Ue.fontNormal}`}),h=b({id:"input_access_token_label",htmlFor:"input_access_token",innerText:"Access token",className:`${Ue.fieldLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`}),g=v({id:"input_access_token",className:`${Ue.field} ${Ue.fontNormal}`}),u=C({id:"btn_login",className:`${Ue.btn} ${Ue.btnPrimary} ${Ue.btnMid} ${Ue.loginButton} ${Ue.fontNormal}`}),f=b({id:"login_label",className:`${Ue.fontNormal} ${Ue.fontColorWhite} ${Ue.fontDemi}`,innerText:"Sign in"});u.appendChild(f),u.onclick=()=>{const e=l.value,t=d.value,i=g.value;e&&this.setAppId(e),this.setCredentials(t,i),p.a.addDirectCallSound(c.SoundType.DIALING,Qe.a),p.a.addDirectCallSound(c.SoundType.RINGING,qe.a),p.a.addDirectCallSound(c.SoundType.RECONNECTING,Ke.a),p.a.addDirectCallSound(c.SoundType.RECONNECTED,Je.a)},this.args.appId||(o.appendChild(s),o.appendChild(l)),o.appendChild(r),o.appendChild(d),this.args.isAccessTokenNeeded&&(o.appendChild(h),o.appendChild(g)),o.appendChild(u),t.appendChild(i),t.appendChild(n),t.appendChild(o);const x=p.a.sdkVersion,w=m({id:"version_info",className:`${Ue.versionInfo} ${Ue.row} ${Ue.center}`}),$=b({id:"sdk_version_label",className:`${Ue.fontSmall} ${Ue.versionLabel}`,innerText:`SDK ${x}`});w.appendChild($),this.element.appendChild(e),this.element.appendChild(t),this.element.appendChild(w)}async setAppId(e){this.sendToParent("appId",e)}async setCredentials(e,t){const i={userId:e,accessToken:t};this.sendToParent("credentials",i)}}class tt{constructor({buttonClass:e,labelClass:t,labelText:i,type:n}){const a=m({className:`${Ue.column} ${Ue.center} ${Ue.hidden}`}),o=m({className:e}),s=b({className:t,innerText:i});a.appendChild(o),a.appendChild(s),this.element=a,this.type=n||"mutual",this.icon=o,this.label=s}set onclick(e){this.icon.onclick=e}}class it{constructor({buttonClass:e,labelText:t,type:i}){const n=m({className:`${Ue.column} ${Ue.center} ${Ue.hidden}`}),a=C({className:e}),o=b({innerText:t});a.appendChild(o),n.appendChild(a),this.element=n,this.type=i||"mutual",this.icon=a,this.label=o}set onclick(e){this.icon.onclick=e}}class nt extends N{constructor({id:e,parent:t,element:i,args:n,call:a}={}){super({id:e,parent:t,element:i,args:n}),this.acceptBtn=null,this.muteBtn=null,this.endBtn=null,this.videoBtn=null,this.btnEnd=null,this.closeBtn=null,this.activeButtons=[],this.call=a}build(){let e=null;e=this.args.isWidget?m({className:`${Ue.row} ${Ue.center} ${Ue.callButtonsWidget}`}):m({className:`${Ue.row} ${Ue.center} ${Ue.callButtons}`}),this.element=e,this.call.isVideoCall?this.acceptBtn=new tt({buttonClass:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnVideoAccept}`,labelClass:Ue.fontSmall,type:"mutual"}):this.acceptBtn=new tt({buttonClass:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnAccept}`,labelClass:Ue.fontSmall,type:"mutual"}),this.muteBtn=new tt({buttonClass:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnMute}`,labelClass:Ue.fontSmall,type:"mutual"}),this.videoBtn=new tt({buttonClass:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnStopVideo}`,labelClass:Ue.fontSmall,type:"video"}),this.endBtn=new tt({buttonClass:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnEnd}`,labelClass:Ue.fontSmall,type:"mutual"}),this.closeBtn=new it({buttonClass:`${Ue.btnClose} ${Ue.fontNormal}`,labelText:"Back",type:"mutual"}),e.appendChild(this.acceptBtn.element),e.appendChild(this.muteBtn.element),e.appendChild(this.videoBtn.element),e.appendChild(this.endBtn.element),e.appendChild(this.closeBtn.element),this.acceptBtn.onclick=()=>{this.setAccepting(),this.sendToParent("click_accept")},this.muteBtn.onclick=()=>{this.invertMuteIcon(),this.sendToParent("click_mute")},this.videoBtn.onclick=()=>{this.invertVideoIcon(),this.sendToParent("click_video")},this.endBtn.onclick=()=>{this.sendToParent("click_end")},this.closeBtn.onclick=()=>{this.sendToParent("click_close")}}invertMuteIcon(){this.call.isLocalAudioEnabled?y(this.muteBtn.icon,Ue.btnMute,Ue.btnUnmute):y(this.muteBtn.icon,Ue.btnUnmute,Ue.btnMute)}invertVideoIcon(){this.call.isLocalVideoEnabled?y(this.videoBtn.icon,Ue.btnStopVideo,Ue.btnStartVideo):y(this.videoBtn.icon,Ue.btnStartVideo,Ue.btnStopVideo)}recvMessage(e,t){switch(e){case"dialing":this.setDialing();break;case"ringing":this.setRinging();break;case"connected":this.setConnected();break;case"ended":this.setEnded()}}setAccepting(){this.hideActiveButtons(),this.showButtons(this.endBtn)}setDialing(){this.hideActiveButtons(),this.showButtons(this.muteBtn,this.videoBtn,this.endBtn)}setRinging(){this.hideActiveButtons(),this.showButtons(this.muteBtn,this.videoBtn,this.acceptBtn,this.endBtn)}setConnected(){this.hideActiveButtons(),this.showButtons(this.muteBtn,this.videoBtn,this.endBtn)}setEnded(){this.hideActiveButtons(),this.showButtons(this.closeBtn)}hideActiveButtons(){for(const e of this.activeButtons)e.element.classList.add(Ue.hidden);this.activeButtons=[]}showButtons(...e){for(const t of e)!this.call.isVideoCall&&"video"===t.type||this.call.isVideoCall&&"audio"===t.type||t.element.classList.remove(Ue.hidden);this.activeButtons.push(...e)}}class at{constructor(e,t=1e3){this.jobFunc=e,this.interval=t,this.lastResult=null}start(){return this.stop(),this.timer=setInterval(()=>{this.lastResult=this.jobFunc()},this.interval),this}stop(){return this.timer&&(clearInterval(this.timer),this.timer=null),this}}class ot extends N{constructor({call:e,state:t,args:i}){super({id:"call_view",className:`${Ue.column} ${Ue.center} ${Ue.view} ${Ue.viewCall}`,args:i}),this.call=e,this.state=t,this.connected=!1,this.addCallListeners(e)}onLoaded(){}build(){const e=this.call.localUser,t=this.call.remoteUser;let i;this.peerProfile=$({src:t.profileUrl,alt:"Sendbird voice & video call opponent profile photo",className:Ue.remoteProfile,onerror:e=>e.target.style.visibility="hidden"}),this.peerName=b({id:"peer_name",innerText:t.nickname?t.nickname:t.userId,className:`${Ue.peerName} ${Ue.fontBig} ${Ue.fontDemi}`}),i=this.call.isVideoCall?"incoming video call…":"incoming voice call…",this.connectionInfo=b({id:"conn_info_label",className:`${Ue.connectionInfo} ${Ue.fontNormal} ${Ue.fontColorWhite}`,innerText:i});const n=m({id:"peer_state",className:`${Ue.column} ${Ue.peerStateDiv} ${Ue.invisible}`}),a=m({id:"peer_mute_icon",className:`${Ue.peerMuteIcon}`}),o=b({id:"peer_mute_label",className:`${Ue.peerMuteLabel} ${Ue.fontSmall} ${Ue.fontColorWhite}`,innerText:`${t.userId} is muted.`});n.appendChild(a),n.appendChild(o);const s=new nt({call:this.call});let l;this.call.isVideoCall?(this.localMediaView=x({className:`${Ue.videoView}`,autoplay:!0,muted:!0,style:"background-color: #fff;"}),this.remoteMediaView=x({className:`${Ue.videoView}`,autoplay:!0,muted:!1,remote:!0})):(this.localMediaView=f({autoplay:!0,muted:!0}),this.remoteMediaView=f({autoplay:!0,muted:!1,remote:!0})),this.localMediaViewDiv=m({className:`${Ue.videoViewDiv} ${Ue.videoFull}`}),this.remoteMediaViewDiv=m({className:`${Ue.videoViewDiv} ${Ue.videoHidden}`}),this.localMediaViewDiv.appendChild(this.localMediaView),this.remoteMediaViewDiv.appendChild(this.remoteMediaView),this.call.setLocalMediaView(this.localMediaView),this.call.setRemoteMediaView(this.remoteMediaView),l=this.args.isWidget?m({className:`${Ue.callBackground} ${Ue.callBackgroundWidget}`}):m({className:Ue.callBackground});const r=m({className:`${Ue.column} ${Ue.center} ${Ue.callForeground}`});l.appendChild(this.remoteMediaViewDiv),l.appendChild(this.localMediaViewDiv),r.appendChild(this.peerProfile),r.appendChild(this.peerName),r.appendChild(this.connectionInfo),r.appendChild(n),this.element.appendChild(l),this.element.appendChild(r),s.appendToBaseElement(this),this.call.caller.userId===e.userId&&this.drawCallingText(),this.sendToChildren(this.state)}addCallListeners(e){e.onConnected=()=>{this.connected=!0,this.drawCurrentTime(),this.call.isVideoCall&&(this.localMediaViewDiv.classList.remove(Ue.videoFull),this.localMediaViewDiv.classList.add(Ue.videoSmall),this.remoteMediaViewDiv.classList.remove(Ue.videoHidden),this.remoteMediaViewDiv.classList.add(Ue.videoFull),this.hideSecondaryInfo()),this.sendToChildren("connected")},e.onEnded=e=>{this.drawEndResult(),e.isVideoCall&&(this.localMediaViewDiv.classList.add(Ue.videoHidden),this.remoteMediaViewDiv.classList.add(Ue.videoHidden),this.showSecondaryInfo()),this.sendToChildren("ended")},e.onReconnected=()=>{this.drawCurrentTime()},e.onReconnecting=()=>{this.drawReconnectingText()},e.onRemoteAudioSettingsChanged=e=>{this.onRemoteAudioMuted(e.isRemoteAudioEnabled)},e.onRemoteVideoSettingsChanged=e=>{this.onRemoteVideoMuted(e.isRemoteVideoEnabled)}}onRemoteAudioMuted(e){const t=this.element.querySelector("#peer_state");e?t.classList.add(Ue.invisible):t.classList.remove(Ue.invisible)}onRemoteVideoMuted(e){e?this.remoteMediaViewDiv.classList.remove(Ue.videoHidden):this.remoteMediaViewDiv.classList.add(Ue.videoHidden)}recvMessage(e,t){switch(e){case"click_accept":this.accept();break;case"click_end":this.end();break;case"click_mute":this.toggleMute();break;case"click_video":this.toggleVideo();break;case"click_close":this.close()}}accept(){const e=h({localMediaView:this.localMediaView,remoteMediaView:this.remoteMediaView,audioEnabled:this.call.isLocalAudioEnabled,videoEnabled:this.call.isLocalVideoEnabled});this.call.accept({callOption:e})}end(){this.call.end()}toggleMute(){this.call.isLocalAudioEnabled?this.call.muteMicrophone():this.call.unmuteMicrophone()}toggleVideo(){this.call.isLocalVideoEnabled?(this.call.stopVideo(),this.localMediaView.classList.add(Ue.videoHidden)):(this.localMediaView.classList.remove(Ue.videoHidden),this.call.startVideo())}close(){this.end(),this.removeConnectionInfoDrawer(),this.sendToParent("close",this.call)}drawCallingText(){this.removeConnectionInfoDrawer();const e=["calling","calling.","calling.."];let t=0;this.connectionInfoDrawer=new at(()=>{this.connectionInfo.innerText=e[t],t=(t+1)%e.length}).start()}drawReconnectingText(){this.removeConnectionInfoDrawer();const e=["reconnecting","reconnecting.","reconnecting.."];let t=0;this.connectionInfoDrawer=new at(()=>{this.connectionInfo.innerText=e[t],t=(t+1)%e.length}).start()}drawCurrentTime(){this.removeConnectionInfoDrawer(),this.connectionInfoDrawer=new at(()=>{const e=Math.floor(this.call.getDuration()/1e3),t=`0${Math.floor(e/60)}`.slice(-2),i=`0${e%60}`.slice(-2);this.connectionInfo.innerText=`${t}:${i}`}).start()}drawEndResult(){this.removeConnectionInfoDrawer(),this.connectionInfo.innerText=this.call.endResult}removeConnectionInfoDrawer(){this.connectionInfoDrawer&&(this.connectionInfoDrawer.stop(),this.connectionInfoDrawer=null),this.connectionInfo.innerText=""}hideSecondaryInfo(){this.peerProfile.classList.add(Ue.invisible),this.peerName.classList.add(Ue.invisible),this.connectionInfo.classList.add(Ue.invisible)}showSecondaryInfo(){this.peerProfile.classList.remove(Ue.invisible),this.peerName.classList.remove(Ue.invisible),this.connectionInfo.classList.remove(Ue.invisible)}}class st extends N{constructor({args:e}){super({id:"dial_view",className:`${Ue.container} ${Ue.column} ${Ue.center} ${Ue.view} ${Ue.viewDial}`,args:e})}onLoaded(){}build(){const e=m({id:"content",className:`${Ue.content} ${Ue.column} ${Ue.center}`}),t=m({className:`${Ue.formContainer} ${Ue.column} ${Ue.center}`}),i=m({id:"title",className:`${Ue.fontBig} ${Ue.fontDemi} ${Ue.dialTitle}`,innerText:"Make a call"}),n=v({id:"peer_id",className:`${Ue.field} ${Ue.fontNormal} ${Ue.dialField}`,placeholder:"Enter user ID"}),a=m({id:"buttons",className:`${Ue.row} ${Ue.center} ${Ue.btns}`}),o=C({id:"btn_video",className:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnVideo}`}),s=C({id:"btn_audio",className:`${Ue.btnCircle} ${Ue.btnCall} ${Ue.btnAudio}`});a.appendChild(o),a.appendChild(s),t.appendChild(i),t.appendChild(n),t.appendChild(a),e.appendChild(t),this.element.appendChild(e);const l=p.a.sdkVersion,r=m({id:"version_info",className:`${Ue.versionInfo} ${Ue.row} ${Ue.center}`}),d=b({id:"sdk_version_label",className:`${Ue.fontSmall} ${Ue.versionLabel}`,innerText:`SDK ${l}`});r.appendChild(d),this.element.appendChild(r),o.onclick=()=>{this.dial(n.value,!0,null)},s.onclick=()=>{this.dial(n.value,!1,null)}}dial(e,t,i){this.sendToParent("dial",{peerId:e,isVideoCall:t,callOption:i})}deauthenticate(){p.a.deauthenticate(),this.sendToParent("deauthenticate")}}var lt=i("4I8z"),rt=i.n(lt),dt=i("so49"),ct=i.n(dt),pt=i("oynm"),ht=i.n(pt),gt=i("LVH7"),ut=i.n(gt);class mt{constructor({callLogInfo:e,className:t}){if(e){const i=function({id:e,className:t}={}){return u({tagName:"li",id:e,className:t})}({id:e.callId,className:t});let n,a,o,s,l;e.isVideoCall?"dc_caller"===e.userRole?(n=rt.a,a="Outgoing call history"):(n=ct.a,a="Incoming call history"):"dc_caller"===e.userRole?(n=ht.a,a="Outgoing call history"):(n=ut.a,a="Incoming call history"),"dc_caller"===e.userRole?(o=e.callee.profileUrl,s=e.callee.nickname||"—",l=e.callee.userId):(o=e.caller.profileUrl,s=e.caller.nickname||"—",l=e.caller.userId);const r=$({className:`${Ue.callLogItemType}`,src:n,alt:a}),d=m({className:`${Ue.callLogTypeDiv}`});d.appendChild(r);const c=$({className:`${Ue.callLogProfileImg}`,src:o,alt:"Opponent profile photo of call history",onerror:e=>{e.currentTarget.src=we.a}}),p=m({className:`${Ue.callLogProfileDiv}`});p.appendChild(c);let h="";if(e.duration>0){let t=Math.ceil(e.duration/1e3),i=parseInt(t/3600),n=parseInt((t-3600*i)/60);i>0&&(h=i+"h "),n>0&&(h+=n+"m "),h+=t-3600*i-60*n+"s"}else h="0s";const g=b({className:`${Ue.callLogDisplayName} ${Ue.fontNormal} ${Ue.fontHeavy}`,innerText:s}),f=b({className:`${Ue.callLogDisplayId} ${Ue.fontSmall}`,innerText:`User ID: ${l}`}),x=b({className:`${Ue.callLogEndInfo} ${Ue.fontSmall}`,innerText:`${e.endResult} · ${h}`}),v=m({className:`${Ue.callLogInfoDiv}`});v.appendChild(g),v.appendChild(f),v.appendChild(x);let w=new Date(e.startedAt),C=`${w.getFullYear()}/${w.toLocaleString(["en-US"],{month:"2-digit"})}/${w.toLocaleString(["en-US"],{day:"2-digit"})} ${this.formatAMPM(w)}`;const k=b({className:`${Ue.callLogStartTime} ${Ue.fontSmall}`,innerText:C}),y=m({className:`${Ue.callLogActionBtnWrap}`}),I=m({className:`${Ue.callLogVideoActionBtn}`}),N=m({className:`${Ue.callLogVoiceActionBtn}`});y.appendChild(N),y.appendChild(I);const L=m({className:`${Ue.callLogActionDiv}`});L.appendChild(k),L.appendChild(y),i.appendChild(d),i.appendChild(p),i.appendChild(v),i.appendChild(L),this.element=i,this.btnCallVideo=I,this.btnCallVoice=N,this.destPeerID=l}else{const e=m({id:"empty_calllog",className:t}),i=m({className:`${Ue.icoCallLogEmpty}`}),n=m({innerText:"The list of calls you make will show here.\nTap the phone button to start making a call.",className:`${Ue.labelCallLogEmpty} ${Ue.fontSmall}`});e.appendChild(i),e.appendChild(n),this.element=e}}formatAMPM(e){let t=e.getHours(),i=e.getMinutes(),n=t>=12?"pm":"am";return t%=12,t=t||12,i=i<10?"0"+i:i,t+":"+i+n}set onclick(e){this.btnCallVideo.onclick=t=>{e(t,{peerId:this.destPeerID,isVideoCall:!0,callOption:null})},this.btnCallVoice.onclick=t=>{e(t,{peerId:this.destPeerID,isVideoCall:!1,callOption:null})}}}class bt extends N{constructor({args:e}){super({id:"calllog_view",className:`${Ue.container} ${Ue.center} ${Ue.viewDial}`,args:e}),this.callLogQuery=null,this.callLogQueryData=[]}build(){const e=function({id:e,className:t}={}){return u({tagName:"ul",id:e,className:t})}({id:"call_log_list",className:`${Ue.callLogListContainer}`});if(this.callLogQuery=p.a.createDirectCallLogListQuery({limit:30}),this.getDirectCalls(e),e.onscroll=t=>{t.target.scrollHeight-t.target.clientHeight===t.target.scrollTop&&this.getDirectCalls(e)},this.args.isWidget)e.classList.add(Ue.widgetCallLog),this.element.appendChild(e);else{const t=m({id:"call_log_desc",className:`${Ue.callLogListDesc}`}),i=m({className:`${Ue.callLogDescLogo}`}),n=m({innerText:"Sendbird Calls Quickstart",className:`${Ue.callLogDescTitle} ${Ue.font24} ${Ue.fontDemi}`}),a=m({innerText:"This is the Sendbird Calls Quickstart page.",className:`${Ue.callLogDescLabel} ${Ue.fontNormal} ${Ue.fontHeavy}`});t.appendChild(i),t.appendChild(n),t.appendChild(a),this.element.appendChild(e),this.element.appendChild(t)}}getDirectCalls(e){this.callLogQuery.hasNext&&!this.callLogQuery.isLoading&&this.callLogQuery.next(t=>{if(t.length>0)for(let i of t){const t=new mt({callLogInfo:i,className:`${Ue.callLogItemWrap}`});t.onclick=(e,t)=>{this.sendToParent("dial",t)},e.appendChild(t.element)}else{const t=new mt({className:`${Ue.callLogEmptyWrap}`});e.appendChild(t.element)}})}}class ft extends N{constructor({id:e,className:t,pages:i,styles:n,args:a}){super({id:e,className:t,args:a}),this.pages=i,this.styles=n,this.sheets=[],this.onPageChange=null}_applyStyle(){this.sheets.forEach(e=>{e.detach()}),ze.attach();const e=L.a.createStyleSheet(this.styles);e.attach(),this.sheets.push(ze,e)}build(){this._applyStyle(),this.route("index",{})}route(e,t={}){for(let e=this.children.length-1;e>=0;e--){const i=this.children[e];"header"===i.element.id||"tabtoolbar"===i.element.id?t.isRemoveHeader&&i.remove():i.remove()}const i=this.pages[e]?e:"index";new(0,this.pages[i])(t).appendToBaseElement(this),this.onPageChange&&this.onPageChange(i)}}class xt extends N{constructor({id:e,msg:t,duration:i}={}){super({id:e,className:`${Ue.toast} ${Ue.center} ${Ue.row}`}),this.msg=t,this.duration=i}build(){const e=m({className:`${Ue.toastErrorIcon}`}),t=b({className:`${Ue.toastMsg} ${Ue.fontNormal}`,innerText:this.msg}),i=C({className:`${Ue.toastCloseBtn}`});i.onclick=()=>{this.remove()},this.element.appendChild(e),this.element.appendChild(t),this.element.appendChild(i)}show(){this.element.style.visibility="visible",this.element.classList.add(Ue.toastShow),this.duration&&(setTimeout(()=>{this.element.classList.add(Ue.toastHide)},this.duration),setTimeout(()=>{this.element.style.visibility="hidden"},this.duration+500))}}class vt extends N{constructor({args:e}){super({id:"settings_view",className:`${Ue.viewSettings} ${Ue.column} ${Ue.center}`,args:e}),this.microphone=null,this.speaker=null,this.camera=null}onLoaded(){this.mediaAccess=p.a.useMedia({audio:!0,video:!0}),this.refreshDeviceList(this.microphone,p.a.getCurrentAudioInputDevice(),p.a.getAvailableAudioInputDevices()),this.refreshDeviceList(this.speaker,p.a.getCurrentAudioOutputDevice(),p.a.getAvailableAudioOutputDevices()),this.refreshDeviceList(this.camera,p.a.getCurrentVideoInputDevice(),p.a.getAvailableVideoInputDevices())}onRemoved(){this.revokeMediaAccess()}revokeMediaAccess(){this.mediaAccess&&(this.mediaAccess.dispose(),this.mediaAccess=null)}build(){const e=m({id:"cover",className:Ue.cover});let t;e.onclick=()=>{this.remove()},t=this.args.isWidget?m({id:"settings_popup",className:`${Ue.popup} ${Ue.widgetpopup}`}):m({id:"settings_popup",className:Ue.popup});const i=m({id:"settings_popup_header",className:`${Ue.popupHeader}`}),n=m({id:"settings_popup_title",className:`${Ue.popupTitle} ${Ue.font20} ${Ue.fontDemi}`,innerText:"Device Settings"}),a=m({id:"popup_close_button",className:`${Ue.settingsCloseButton}`});a.onclick=()=>{this.remove()},i.appendChild(n),i.appendChild(a);const o=m({id:"select_container",className:Ue.selectContainer}),s=b({id:"microphone_label",htmlFor:"microphone_select",innerText:"Microphone",className:`${Ue.selectLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`});this.microphone=w({id:"microphone_select",className:`${Ue.blockSelect} ${Ue.fontNormal}`}),this.microphone.onchange=()=>{const e=this.microphone.value,t=p.a.getAvailableAudioInputDevices().find(t=>t.deviceId===e);p.a.selectAudioInputDevice(t)};const l=b({id:"speaker_label",htmlFor:"speaker_select",innerText:"Speaker",className:`${Ue.selectLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`});this.speaker=w({id:"speaker_select",className:`${Ue.blockSelect} ${Ue.fontNormal}`}),this.speaker.onchange=()=>{const e=this.speaker.value,t=p.a.getAvailableAudioOutputDevices().find(t=>t.deviceId===e);p.a.selectAudioOutputDevice(t)};const r=b({id:"camera_label",htmlFor:"camera_select",innerText:"Camera",className:`${Ue.selectLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`});this.camera=w({id:"camera_select",className:`${Ue.blockSelect} ${Ue.fontNormal}`}),this.camera.onchange=()=>{const e=this.camera.value,t=p.a.getAvailableVideoInputDevices().find(t=>t.deviceId===e);p.a.selectVideoInputDevice(t)},o.appendChild(s),o.appendChild(this.microphone),o.appendChild(l),o.appendChild(this.speaker),o.appendChild(r),o.appendChild(this.camera),t.appendChild(i),t.appendChild(o),this.element.appendChild(e),this.element.appendChild(t)}recvMessage(e,t){switch(e){case"audio_input_device_change":this.refreshDeviceList(this.microphone,t.currentDevice,t.availableDevices);break;case"audio_output_device_change":this.refreshDeviceList(this.speaker,t.currentDevice,t.availableDevices);break;case"video_input_device_change":this.refreshDeviceList(this.camera,t.currentDevice,t.availableDevices)}}refreshDeviceList(e,t,i){e.innerHTML="",i.forEach(i=>{const n=function({id:e,className:t,value:i,innerText:n}={}){const a={};return i&&(a.value=i),u({tagName:"option",id:e,className:t,innerText:n,attrs:a})}({value:i.deviceId,innerText:i.label});i.deviceId===t.deviceId&&(n.selected=!0),e.appendChild(n)})}}class wt extends N{constructor({id:e,className:t,divider:i,parent:n,element:a,items:o}={}){super({id:e,className:t,parent:n,element:a}),this.items=o,this.divider=i,this.opened=!1}build(){this.element.addEventListener("mouseenter",(function(){this.style.backgroundColor="#6440c4"})),this.element.addEventListener("mouseout",(function(){this.style.backgroundColor=""})),this.menuItemsDiv=m({className:`${Ue.menuItemsDiv} ${Ue.hidden}`}),this.items.forEach((e,t)=>{const{label:i,element:n,disabled:a,callback:o}=e,s=n||b({className:`${Ue.fontNormal} ${Ue.fontHeavy}`,innerText:i}),l=C({className:`${Ue.btn} ${a?Ue.disabledMenuItem:Ue.menuItem}`});if(o&&(l.onclick=()=>{o()}),l.appendChild(s),this.menuItemsDiv.appendChild(l),this.divider&&t<this.items.length-1){const e=this.divider.cloneNode(!0);this.menuItemsDiv.appendChild(e)}}),this.element.appendChild(this.menuItemsDiv),this.element.onclick=e=>{e.stopPropagation(),this.opened?this.hide():this.show()},document.querySelector(`.${Ue.mainApp}`).addEventListener("click",()=>{this.hide()})}show(){this.menuItemsDiv.classList.remove(Ue.hidden),this.opened=!0}hide(){this.menuItemsDiv.classList.add(Ue.hidden),this.opened=!1}}class Ct extends N{constructor({id:e,className:t,parent:i,element:n,args:a}={}){super({id:e,className:t,parent:i,element:n,args:a}),this.element=n,this.parent=i,this.settingItems=[{label:"Device Settings",callback:()=>{this.sendToParent("show_settings")}},{label:"Application information",callback:()=>{this.sendToParent("show_app_info")}}],this.parent=i}build(){let e,t=m({className:`${Ue.userDiv}`});this.args.user&&this.args.user.profileUrl?(ze.update({profileUrl:this.args.user.profileUrl}),e=m({className:Ue.profileSmall})):e=m({className:`${Ue.avatar}`});const i=m({className:`${Ue.headerInfo}`}),n=m({className:this.args.isWidget?`${Ue.headerNickname} ${Ue.fontMidBig} ${Ue.fontDemi}`:`${Ue.headerNickname} ${Ue.fontNormal} ${Ue.fontDemi}`,innerText:this.args.user.nickname||"—"}),a=m({className:`${Ue.headerUserId} ${Ue.fontSmall}`,innerText:`User ID: ${this.args.user.userId||""}`});let o;if(i.appendChild(n),i.appendChild(a),t.appendChild(e),t.appendChild(i),!this.args.isWidget){const e=t.cloneNode(!0);y(e,Ue.userDiv,Ue.userDetail),o=new wt({element:t,items:[{element:e,disabled:!0},{label:"Sign out",callback:()=>{p.a.deauthenticate(),this.sendToParent("deauthenticate")}}],divider:m({className:Ue.menuDivider})})}const s=m({className:`${Ue.headerButtons} ${Ue.row} ${Ue.center}`}),l=new wt({element:m({className:`${Ue.settingsButton}`}),items:this.settingItems}),r=m({className:`${Ue.closeButton}`});r.onclick=()=>{this.parent.sendToParent("widgetclose")},l.appendToHTML(s),s.appendChild(r);const d=m({className:Ue.headerDivider});if(o?o.appendToBaseElement(this):this.element.appendChild(t),this.element.appendChild(d),this.element.appendChild(s),!this.args.isWidget){const e=m({id:"header_logo",className:`${Ue.headerLogo}`});this.element.appendChild(e)}}}class $t extends N{constructor({id:e,className:t,parent:i,element:n,args:a}={}){super({id:e,className:t,parent:i,element:n}),this.element=n}build(){this.args.isWidget&&this.element.classList.add(Ue.tabToolBarWidget);const e=m({id:"btn_tab_dial",className:`${Ue.btnTab}`}),t=m({id:"ico_tab_dial",className:`${Ue.tabIco}  ${Ue.dialActive}`}),i=k({id:"btn_dial_caption",innerText:"Call",className:`${Ue.fontSmall} ${Ue.fontHeavy} ${Ue.btnTabCaption} ${Ue.btnTabActive}`});e.appendChild(t),e.appendChild(i),e.onclick=e=>{I(t,Ue.dialActive)||(y(t,Ue.dialDeactive,Ue.dialActive),y(i,Ue.btnTabDeactive,Ue.btnTabActive),y(a,Ue.callLogActive,Ue.callLogDeactive),y(o,Ue.btnTabActive,Ue.btnTabDeactive),this.sendToParent("show_dial"))},this.args.isWidget&&e.classList.add(Ue.btnTabWidget);const n=m({id:"btn_tab_calllog",className:`${Ue.btnTab}`}),a=m({id:"ico_tab_callog",className:`${Ue.tabIco} ${Ue.callLogDeactive}`}),o=k({id:"btn_calllog_caption",innerText:"Recents",className:`${Ue.fontSmall} ${Ue.fontHeavy} ${Ue.btnTabCaption} ${Ue.btnTabDeactive}`});n.appendChild(a),n.appendChild(o),n.onclick=e=>{I(a,Ue.callLogActive)||(y(a,Ue.callLogDeactive,Ue.callLogActive),y(o,Ue.btnTabDeactive,Ue.btnTabActive),y(t,Ue.dialActive,Ue.dialDeactive),y(i,Ue.btnTabActive,Ue.btnTabDeactive),this.sendToParent("show_calllog"))},this.args.isWidget&&n.classList.add(Ue.btnTabWidget),this.element.appendChild(e),this.element.appendChild(n)}}class kt extends N{constructor({args:e}){super({id:"appinfo_view",className:`${Ue.viewSettings} ${Ue.column} ${Ue.center}`,args:e})}onLoaded(){}onRemoved(){}build(){const e=m({id:"cover",className:Ue.cover});let t;e.onclick=()=>{this.remove()},t=this.args.isWidget?m({id:"settings_popup",className:`${Ue.popup} ${Ue.widgetpopup}`}):m({id:"settings_popup",className:Ue.popup});const i=m({id:"settings_popup_header",className:`${Ue.popupHeader}`}),n=m({id:"settings_popup_title",className:`${Ue.popupTitle} ${Ue.font20} ${Ue.fontDemi}`,innerText:"Application information"}),a=m({id:"popup_close_button",className:`${Ue.settingsCloseButton}`});a.onclick=()=>{this.remove()},i.appendChild(n),i.appendChild(a);const o=m({id:"select_container",className:Ue.selectContainer}),s=b({id:"app_name_label",innerText:"Name",className:`${Ue.popupItemLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`}),l=b({id:"app_name",innerText:"Voice & Video",className:`${Ue.appInfoLabel} ${Ue.appName} ${Ue.fontNormal} ${Ue.fontReadOnlyColor}`});o.appendChild(s),o.appendChild(l);const r=b({id:"app_id_label",innerText:"ID",className:`${Ue.popupItemLabel} ${Ue.fontSmall} ${Ue.fontHeavy}`}),d=m({id:"app_id_wrap",className:`${Ue.appInfoLabelWrap}`}),c=b({id:"app_id",innerText:this.args.appId,className:`${Ue.appInfoLabel} ${Ue.appInfoIdLabel} ${Ue.fontNormal} ${Ue.fontReadOnlyColor}`}),p=m({id:"btn_app_id_copy",className:`${Ue.appInfoIdCopy}`});p.onclick=()=>{navigator.clipboard.writeText(this.args.appId)},d.appendChild(c),d.appendChild(p),o.appendChild(r),o.appendChild(d),t.appendChild(i),t.appendChild(o),this.element.appendChild(e),this.element.appendChild(t)}}class yt extends ft{constructor({id:e,className:t,pages:i,styles:n,args:a}){super({id:e,className:`${Ue.mainApp} ${Ue.container} ${Ue.center} ${t||""}`,pages:i,styles:n,args:a}),this.onLoginSuccess=null,this.onLoginFailure=null,this.settings=null,this.appInfoView=null,this.init()}onLoaded(){}toast(e,t){const i=new xt({msg:e,duration:t});i.appendToBaseElement(this),i.show(),t&&setTimeout(()=>{i.remove()},t+500)}showSettings(){this.settings=new vt({}),this.settings.appendToBaseElement(this)}closeSettings(){this.settings&&(this.settings.remove(),this.settings=null)}showAppInfo(){this.appInfoView=new kt({}),this.appInfoView.appendToBaseElement(this)}closeAppInfo(){this.appInfoView&&(this.appInfoView.remove(),this.appInfoView=null)}async setAppId(e){await this._setArgs({appId:e})}async setCredentials(e,t){await this._setArgs({userId:e,accessToken:t})}async _setArgs(e){e&&Object.assign(this.args,e),e.appId&&this.init(),e.userId&&await this.login(e.userId,e.accessToken)}init(){this.args.appId&&(p.a.init(this.args.appId),p.a.addListener(1,{onRinging:e=>{this.isBusy()?e.end():e.endResult||(this.sendToParent("widgetringing",void 0),this.addCall(e,"ringing"))},onAudioInputDeviceChanged:(e,t)=>{this.sendToChildren("audio_input_device_change",{currentDevice:e,availableDevices:t})},onAudioOutputDeviceChanged:(e,t)=>{this.sendToChildren("audio_output_device_change",{currentDevice:e,availableDevices:t})},onVideoInputDeviceChanged:(e,t)=>{this.sendToChildren("video_input_device_change",{currentDevice:e,availableDevices:t})}}))}async login(e,t){try{const i=await p.a.authenticate({userId:e,accessToken:t});await p.a.connectWebSocket(),this.args.user=i,this.onLoginSuccess&&this.onLoginSuccess(),this.createHeaderNTab(),this.route("dial_view",{})}catch(e){this.onLoginFailure&&this.onLoginFailure(e),this.toast(e)}}dial(e,t=!1,i,n){if(""===e)return void this.toast("Enter a valid user ID");const a=h(i);try{p.a.dial({userId:e,isVideoCall:t,callOption:a},(e,t)=>{if(t)return this.toast(t),void(n&&n(e,t));this.addCall(e,"dialing"),n&&n(e,t)})}catch(e){this.toast(e)}}addCall(e,t){this.isBusy()||this.route("call_view",{call:e,state:t,isRemoveHeader:!0})}isBusy(){return this.children.some(e=>e instanceof ot&&!e.call.isEnded)}recvMessage(e,t){switch(e){case"widgetclose":this.recvWidgetClose();break;case"appId":this.setAppId(t);break;case"credentials":const{userId:e,accessToken:i}=t;this.setCredentials(e,i);break;case"dial":this.recvDial(t);break;case"deauthenticate":this.recvDeauth();break;case"show_settings":this.recvShowSettings();break;case"close_settings":this.recvCloseSettings();break;case"show_app_info":this.recvShowAppInfo();break;case"close_app_info":this.recvCloseAppInfo();break;case"close":this.recvClose(t);break;case"show_calllog":this.route("calllog_view",{args:this.args});break;case"show_dial":this.route("dial_view",{})}}recvWidgetClose(){this.sendToParent("widgetclose")}recvDial({peerId:e,isVideoCall:t,callOption:i}){this.dial(e,t,i)}recvDeauth(){this.args.user=void 0,this.args.userId=void 0,this.args.accessToken=void 0,this.route("login_view",{isRemoveHeader:!0})}recvShowSettings(){this.showSettings()}recvCloseSettings(){this.closeSettings()}recvShowAppInfo(){this.showAppInfo()}recvCloseAppInfo(){this.closeAppInfo()}recvClose(){this.createHeaderNTab(),this.route("dial_view",{})}createHeaderNTab(){const e=new Ct({parent:this,element:m({id:"header",className:`${Ue.widgetHeader}`})}),t=new $t({parent:this,element:m({id:"tabtoolbar",className:`${Ue.tabToolBar}`}),args:this.args});e.appendToBaseElement(this),t.appendToBaseElement(this)}}class It extends N{constructor({id:e,className:t,pages:i,styles:n,icon:a,args:o}){super({id:e,className:`${Ue.widgetApp} ${t}`,args:o}),this.pages=i,this.styles=n,this.mainApp=null,this.widgetIcon=a||null,this.opened=!1,this.onMainAppOpened=null,this.onMainAppClosed=null}set onPageChange(e){this.mainApp&&(this.mainApp.onPageChange=e)}set onLoginSuccess(e){this.mainApp&&(this.mainApp.onLoginSuccess=e)}set onLoginFailure(e){this.mainApp&&(this.mainApp.onLoginFailure=e)}async setAppId(e){await this.mainApp.setAppId(e)}async setCredentials(e,t){await this.mainApp.setCredentials(e,t)}onLoaded(){}openWidget(){this.mainApp.element.classList.remove(Ue.hidden),this.widgetIcon.classList.add(Ue.hidden),this.onMainAppOpened&&this.onMainAppOpened()}closeWidget(){this.mainApp.element.classList.add(Ue.hidden),this.widgetIcon.classList.remove(Ue.hidden),this.onMainAppClosed&&this.onMainAppClosed()}build(){this.widgetIcon||(this.widgetIcon=m({id:"widget_icon",className:Ue.widgetIcon})),this.args.isWidget=!0,this.mainApp=new yt({className:`${Ue.widgetDiv} ${Ue.hidden}`,pages:this.pages,styles:this.styles,args:this.args}),this.widgetIcon.onclick=()=>{this.opened?this.closeWidget():this.openWidget()},this.element.appendChild(this.widgetIcon),this.mainApp.appendToBaseElement(this)}recvMessage(e,t){switch(e){case"widgetringing":this.sendToParent(e,t),this.recvRinging(t);break;case"widgetclose":this.recvWidgetClose()}}recvWidgetClose(){this.closeWidget()}recvRinging(){this.opened||this.openWidget()}}const Nt={widgetDiv:{position:"absolute",right:0,bottom:0,zIndex:1},btnCall:{width:"56px",height:"56px","margin-left":"16px","margin-right":"16px"}};var Lt=i("Xvkt"),Tt=i("nKUr");const Dt=s.default.div.withConfig({displayName:"widget__WidgetContainer",componentId:"ex2um-0"})(["position:fixed;right:32px;bottom:32px;z-index:",";"],d.b.callsWidget),_t=s.default.div.withConfig({displayName:"widget__WidgetIconWrapper",componentId:"ex2um-1"})(["position:absolute;right:0;bottom:0;z-index:0;display:",";flex-direction:row;align-items:center;justify-content:center;background-color:",";border-radius:28px;border-bottom-right-radius:0;height:48px;padding-left:16px;padding-right:16px;white-space:nowrap;cursor:pointer;transform-origin:right bottom;transition:0.2s margin-bottom ",";"," color:white;"," ",':not([data-is-loaded="true"]) &{display:none;}'],e=>e.isHidden?"none":"flex",Object(l.cssVariables)("purple-7"),l.transitionDefault,l.Headings["heading-01"],l.elevation.modal,Dt),St=()=>{const e=Object(n.useRef)(!1);Object(n.useEffect)(()=>{const t=()=>{(()=>{try{return p.a.addDirectCallSound(c.SoundType.DIALING,Qe.a),p.a.addDirectCallSound(c.SoundType.RINGING,qe.a),!0}catch(e){return!1}})()&&(e.current=!0,document.removeEventListener("click",t))};document.addEventListener("click",t)},[])};var Bt=Object(s.default)(l.Icon).withConfig({displayName:"widget___StyledIcon",componentId:"ex2um-2"})(["margin-right:8px;"]);const At=Object(n.forwardRef)((e,t)=>{const i=Object(a.a)();return Object(Tt.jsxs)(_t,{ref:t,...e,children:[Object(Tt.jsx)(Bt,{icon:"call-filled",size:16,color:"#FFFFFF"}),i.messages["calls.widget_lbl.collapsedLabel"]]})});var Rt=Object(s.default)(At).withConfig({displayName:"widget___StyledWidgetIcon",componentId:"ex2um-3"})(["",""],e=>e._css);t.default=()=>{const e=Object(r.c)(),{pathname:t}=Object(o.l)(),i=!t.startsWith(`/${e}/calls`),a=t.replace(/\/$/,"")===`/${e}/calls/direct-calls`,s=t.startsWith(`/${e}/calls/group-calls`),[l,d]=Object(n.useState)("index"),[c,p]=Object(n.useState)(!1),[h,g]=Object(n.useState)(!1),{userId:u,accessToken:m,isUserActive:b,nickname:f,profileUrl:x}=Object(r.V)(e=>{const{user_id:t="",access_token:i="",is_active:n=!1,nickname:a,profile_url:o}=e.moderations.sdkUser||{};return{userId:t,accessToken:i,isUserActive:n,nickname:a,profileUrl:o}}),v=Object(n.useRef)(null),w=Object(n.useRef)(null),C=Object(Lt.c)(),{current:$}=v,{current:k}=w;return Object(n.useEffect)(()=>{let t;return $&&k&&e&&u&&b&&(t=function({appId:e,userId:t,accessToken:i,isAccessTokenNeeded:n,icon:a}){const o=document.querySelector("#widget"),s=new It({id:"widget_app",pages:{index:et,login_view:et,dial_view:st,call_view:ot,calllog_view:bt},styles:Nt,args:{appId:e,userId:t,accessToken:i,isAccessTokenNeeded:n},icon:a});return s.appendToHTML(o),s}({appId:e,userId:u,isAccessTokenNeeded:!!m,accessToken:m,icon:k}),t.onPageChange=e=>{d(e)},t.onMainAppOpened=()=>{p(!0)},t.onMainAppClosed=()=>{p(!1)},t.onLoginSuccess=()=>{g(!0)},t.onLoginFailure=()=>{g(!1)},C(t),$.setAttribute("data-is-loaded","true")),()=>{var e;null==(e=t)||e.closeWidget(),$&&($.setAttribute("data-is-loaded","false"),$.innerHTML="")}},[m,e,b,C,$,k,u,f,x]),St(),Object(Tt.jsxs)(Tt.Fragment,{children:[Object(Tt.jsx)(Dt,{id:"widget",ref:v}),Object(Tt.jsx)(Rt,{id:"widgetIcon","data-test-id":"WidgetIcon",ref:w,isHidden:!h||c||i&&"call_view"!==l,_css:(a||s)&&"margin-bottom: 48px;"})]})}},oynm:function(e,t,i){e.exports=i.p+"4c1e94fec589a89067d7a717e1384750.svg"},roG5:function(e,t,i){e.exports=i.p+"a26479c84ff3d98c73798de0690c7ee3.svg"},so49:function(e,t,i){e.exports=i.p+"99ff013c40b3f639e9f1251e460b5fb5.svg"},vt5h:function(e,t,i){e.exports=i.p+"9287151f3e38e1c0ce94dc8896c20336.svg"},"y3y/":function(e,t,i){e.exports=i.p+"1ff94db54b76705033209e3ff85e140b.svg"}}]);
//# sourceMappingURL=25.js.map?v=915c8eae03ab44115edf