import{a as F,c as N,d as W}from"./chunk-WESR4O32.js";import"./chunk-GPJLMQ4S.js";import{a as U}from"./chunk-T7CR7IOP.js";import{a as q,b as c,c as G,d as Q}from"./chunk-Y2VMCV7S.js";import{a as M}from"./chunk-HVWSZP6M.js";import{a as _}from"./chunk-SJXFQYTK.js";import{a as A}from"./chunk-KCN7NYIH.js";import"./chunk-YG5VU5UW.js";import"./chunk-CWNFCDZO.js";import"./chunk-JLSB3ZPE.js";import"./chunk-7MXQG6UX.js";import"./chunk-JELGMUFY.js";import"./chunk-AQM24QTG.js";import{a as P}from"./chunk-TQDX6ACF.js";import"./chunk-WEIYGZZI.js";import"./chunk-TZWC6Q34.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import"./chunk-M3VXQ3H4.js";import{a as E}from"./chunk-UJ4RDOBF.js";import{g as $,h}from"./chunk-EWS3NXQH.js";import{d as b,g as v,h as y}from"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import{i as D}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import{b as L,c as g}from"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import{m as w}from"./chunk-4DDSFSZM.js";import{a as O}from"./chunk-I2CW5RII.js";import"./chunk-EHER635N.js";import"./chunk-D3V43LVN.js";import{a as C}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{d as f}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as p,b as B,c as k,f as x,i as T}from"./chunk-ORNWO27Z.js";var t=x(T());var o=x(T());var ot=l=>{var e=l,{teamId:i,siteId:s,uuid:n,status:r}=e,a=k(e,["teamId","siteId","uuid","status"]);return o.default.createElement($,{type:N[r],p:0},o.default.createElement(w,{to:`/teams/${i}/${s}/budgets/${n}`},o.default.createElement(W,B(p({status:r},a),{compact:!0}))))},Y=({teamId:i,siteId:s,loading:n,site:r,budgets:a,filter:l})=>!n&&!a.length?o.default.createElement(P,{id:`budgets.${l}`,offset:190,offsets:[317,190]}):o.default.createElement(v,{gridTemplateColumns:["1fr","1fr","1fr 1fr"],gridColumnGap:3,pt:3},n?o.default.createElement(h,null):a.sort((e,d)=>F.indexOf(e.status)-F.indexOf(d.status)).map(e=>o.default.createElement(y,{key:e.uuid,mb:3},o.default.createElement(ot,p({teamId:i,siteId:s,site:r},e)))));Y.defaultProps={filters:"all"};var j=Y;var z=["all","unmet","met","risk"],it=({match:{params:{teamId:i,siteId:s}}})=>{let{can:n}=O({teamId:i,siteId:s}),[r,a]=(0,t.useState)(z[0]),[l,e]=(0,t.useState)(),{feedback:d,clearFeedback:H}=_(),I={team:i,site:s},{data:J,loading:K}=C(U,{variables:I}),{team:V}=J||{},{site:S,organisation:X}=V||{},{name:Z}=X||{},{metricBudgetsList:R={edges:[]},name:tt}=S||{},rt=R.edges.map(({node:m})=>m).filter(({status:m,budgets:et})=>(r==="all"||m===r)&&(!l||l==="all"||et.filter(({profile:{device:u}})=>l==="mobile"?u&&u.isMobile:!u||u&&!u.isMobile).length));return t.default.createElement(t.default.Fragment,null,t.default.createElement(E,{id:"budgets.title",breadcrumbs:[tt,Z]}),t.default.createElement(b,null,t.default.createElement(L,{flexWrap:["wrap","nowrap"],alignItems:"center"},t.default.createElement(g,{flex:1,mb:[4,0]},t.default.createElement(M,null,t.default.createElement(f,{id:"budgets.title"}))),n("createMetricBudgets")?t.default.createElement(g,{width:[1,"auto"],my:"-8px"},t.default.createElement(D,{to:`/teams/${i}/${s}/budgets/new`,variant:"primary"},t.default.createElement(f,{id:"budgets.actions.new"})," ")):null)),t.default.createElement(b,{p:null,px:4,pt:4},t.default.createElement(Q,{flexWrap:["wrap","wrap","nowrap"]},t.default.createElement(c,{mr:4,mb:4},z.map(m=>t.default.createElement(G,{key:m,selected:r===m,onClick:()=>a(m)},t.default.createElement(f,{id:`budgets.${m}.title`})))),t.default.createElement(c,{mb:4},t.default.createElement(q,{currentDeviceFilter:l,onChange:e})))),d.location==="budget"&&t.default.createElement(A,p({"data-qa":"budgetFeedback",p:null,pt:3,px:0,pb:0,duration:0,onDismiss:H},d))||null,t.default.createElement(j,{teamId:i,siteId:s,site:S,budgets:rt,loading:K,filter:r}))},vt=it;export{vt as default};
//# sourceMappingURL=Overview-B3BVEXVV.js.map
