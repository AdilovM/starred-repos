import{b as L}from"./chunk-5AV6UUBC.js";import{a as j}from"./chunk-SJXFQYTK.js";import"./chunk-KCN7NYIH.js";import"./chunk-YG5VU5UW.js";import"./chunk-CWNFCDZO.js";import{f as q,g as E}from"./chunk-ZNS7TFW4.js";import{a as N}from"./chunk-IHTWZOQH.js";import"./chunk-OFY5O3WH.js";import"./chunk-WEIYGZZI.js";import"./chunk-ECKCXZDJ.js";import"./chunk-5AD3ZUGZ.js";import"./chunk-2OWL4LTV.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import{a as C}from"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as M}from"./chunk-UJ4RDOBF.js";import"./chunk-EWS3NXQH.js";import{d as A,i as $}from"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import{i as v}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import{b as F,c as f}from"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as B}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{b as w,d as k}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as r,b as y,f as h,i as x}from"./chunk-ORNWO27Z.js";var t=h(x());var e=h(x());var U=({orgId:m,onUpdate:a,onValidating:d})=>{let[o,g]=(0,e.useState)({0:{name:""}});return e.default.createElement(e.default.Fragment,null,e.default.createElement(L,{orgId:m,onUpdate:n=>{let s=r(r({},o),n);g(s),a(s)},onRemove:n=>{delete o[n],g(r({},o))},onValidating:d,onAdd:()=>{let n=`${Date.now()}${Object.keys(o).length}`,s=y(r({},o),{[n]:{}});g(s)},pages:o}))},z=({orgId:m,loading:a,onCreate:d,onCancel:o})=>{let g=(0,e.useRef)(),[l,c]=(0,e.useState)({}),[u,n]=(0,e.useState)(!1),{pages:s}=l,b=i=>{let p=r(r({},l),i);c(p)};return e.default.createElement(A,null,e.default.createElement(F,{alignItems:"center"},e.default.createElement(f,null,e.default.createElement($,{id:"site.settings.pages.new",mb:0}))),e.default.createElement("form",{onSubmit:i=>{i.preventDefault(),d(Object.keys(s).map(p=>s[p]))},ref:g,"data-qa":"pageForm"},e.default.createElement(U,{orgId:m,onUpdate:i=>b({pages:i}),onValidating:n}),e.default.createElement(F,null,e.default.createElement(f,{order:2},e.default.createElement(v,{disabled:u||a||!s||!Object.keys(s).length,loading:a,type:"submit"},e.default.createElement(k,{id:"site.settings.pages.actions.save"}))),e.default.createElement(f,{mr:2,order:1},e.default.createElement(v,{"data-testid":"pages-settings-cancel",onClick:o,variant:"tertiary"},e.default.createElement(k,{id:"site.actions.cancel"}))))))},O=z;var G=t.default.lazy(()=>import("./Feedback-J4FBAYX2.js")),I=({match:{params:{teamId:m,siteId:a}},history:d})=>{let o=w(),{setFeedback:g}=j(),[l,c]=(0,t.useState)(),{data:u}=B(q,{variables:{siteId:a,teamId:m}}),{team:n}=u||{},{organisation:s,site:b}=n||{},{name:S,slug:i}=s||{},{name:p}=b||{},[V,{loading:D}]=C(E,{onError:P=>{c({type:"error",message:N(P)})},onCompleted:()=>{g({location:"pages",type:"success",message:o.formatMessage({id:"site.settings.pages.new.success"})}),d.push(`/teams/${m}/${a}/settings/pages`)}}),Q=P=>V({variables:{orgId:i,siteId:a,attributes:P}}),T=()=>d.push(`/teams/${m}/${a}/settings/pages`);return t.default.createElement(t.default.Fragment,null,t.default.createElement(M,{id:"site.settings.pages.new.title",breadcrumbs:[p,S]}),!l||t.default.createElement(t.Suspense,{fallback:t.default.createElement("div",null)},t.default.createElement(G,r({},l))),t.default.createElement(O,{orgId:i,loading:D,onCreate:Q,onCancel:T}))},ae=I;export{ae as default};
//# sourceMappingURL=CreatePage-PWEKRJJZ.js.map
