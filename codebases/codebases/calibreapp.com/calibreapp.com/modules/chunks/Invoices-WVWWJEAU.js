import{a as R,b as oo,c as io,d as to}from"./chunk-76HOP7CX.js";import{d as W,f as X}from"./chunk-JVL6PN7W.js";import{a as Z}from"./chunk-EKOJVSNL.js";import{a as K}from"./chunk-KCN7NYIH.js";import"./chunk-YG5VU5UW.js";import"./chunk-DQSCGVX4.js";import"./chunk-CWNFCDZO.js";import"./chunk-DGXX4BQF.js";import{a as Y}from"./chunk-IHTWZOQH.js";import"./chunk-OFY5O3WH.js";import{c as C,e as z,g as J}from"./chunk-ECKCXZDJ.js";import"./chunk-5AD3ZUGZ.js";import"./chunk-2OWL4LTV.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import{a as w}from"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as V}from"./chunk-UJ4RDOBF.js";import{a as Q,b as G}from"./chunk-EWS3NXQH.js";import{c as q,d as F,i as S}from"./chunk-AQDAG4C2.js";import{a as N,b as D,c,d as h,e as _,f as j}from"./chunk-TT3E6PQD.js";import{i as $}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import{B as O}from"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import{b as k,e as B}from"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as M}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{a as U,d as T,e as H}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as l,b as x,c as E,f as v,i as I}from"./chunk-ORNWO27Z.js";var d=v(I());var i=v(I());var A=v(I());var no=m=>{var t=m,{hint:p,value:s,onChange:a,loading:e}=t,r=E(t,["hint","value","onChange","loading"]);return A.default.createElement(z,l({label:"Additional information",hint:p,span:2},r),A.default.createElement(J,{id:"extras",type:"text",placeholder:"Company identification details",value:s,onChange:a,loading:e}))};no.defaultProps={mb:3};var eo=no;var so=({onUpdate:p,taxIdType:s,taxId:a,invoiceExtras:e,company:r,email:m,loading:t,saving:u})=>{let[L,b]=(0,i.useState)(!1),[g,y]=(0,i.useState)({}),f=n=>{b(!0),y(l(l({},g),n))};return(0,i.useEffect)(()=>{y({company:r||"",email:m||"",taxId:a||"",taxIdType:s||"",invoiceExtras:e||""})},[t]),(0,i.useEffect)(()=>{b(u)},[u]),i.default.createElement(F,null,i.default.createElement(S,{id:"organisations.settings"}),i.default.createElement("form",{onSubmit:n=>{n.preventDefault(),p(g)}},i.default.createElement(C,null,i.default.createElement(oo,{mb:0,loading:t,hint:"Invoices will be made out to this name.",value:g.company,onChange:n=>f({company:n})}),i.default.createElement(R,{mb:0,loading:t,hint:"Payment receipts will be sent to this address.",value:g.email,onChange:n=>f({email:n})})),i.default.createElement(C,null,i.default.createElement(io,{mb:4,hint:"Your tax residence determines your tax rates.",value:g.taxIdType,onChange:n=>f({taxIdType:n}),loading:t}),i.default.createElement(to,{mb:4,hint:"Tax identification number will appear on all receipts.",value:g.taxId,onChange:n=>f({taxId:n}),loading:t}),i.default.createElement(eo,{mb:0,hint:"This will appear on all receipts.",value:g.invoiceExtras,onChange:n=>f({invoiceExtras:n}),loading:t})),t?i.default.createElement(G,null):i.default.createElement($,{loading:u,variant:"primary",type:"submit",disabled:!L||u},i.default.createElement(T,{id:"organisations.settings.actions.save"}))))},ro=so;var o=v(I());var mo={paid:"grey400",unpaid:"red300",undefined:"grey400"},lo=({history:p})=>o.default.createElement(j,{bleed:0},o.default.createElement(N,null,o.default.createElement(D,null,o.default.createElement(h,null,"Date"),o.default.createElement(h,null,"Amount"),o.default.createElement(h,null,"Status"),o.default.createElement(h,{textAlign:"right"},"Receipt"))),o.default.createElement(_,null,p.map(({date:s,amount:a,status:e,url:r,currency:m},t)=>a>0&&o.default.createElement(D,{key:t},o.default.createElement(c,null,s&&Z(s)),o.default.createElement(c,null,o.default.createElement(H,{value:a&&a/100,style:"currency",currency:m,minimumFractionDigits:0})," "),o.default.createElement(c,null,!e||o.default.createElement(k,{color:mo[e]},o.default.createElement(T,{id:`organisations.invoices.status.${e}`}))),o.default.createElement(c,{textAlign:"right"},!r||o.default.createElement(B,{href:r},o.default.createElement(O,{mr:2}),"Download")))||null))),po=({slug:p,subscription:s,loading:a,invoices:e})=>{let{status:r}=s||{},m=e&&e.edges&&e.edges.map(t=>t.node).filter(({amount:t})=>parseInt(t,10));return o.default.createElement(F,{"data-qa":"invoiceHistory"},o.default.createElement(S,{id:"organisations.invoices"}),a&&o.default.createElement(Q,null)||m&&m.length&&o.default.createElement(lo,{history:m})||o.default.createElement(k,null,o.default.createElement(T,{id:`organisations.invoices.no_history.${r==="trialing"?"trial":"empty"}`}),r==="trialing"?o.default.createElement(o.default.Fragment,null," ",o.default.createElement(B,{to:`/organisations/${p}/billing/plan`},"choose a plan"),"."):null))},ao=po;var go=U(({intl:p,match:{params:{orgId:s}}})=>{let a={organisation:s},[e,r]=(0,d.useState)({}),{data:m,loading:t}=M(W,{variables:a,pollInterval:1e4}),[u,{loading:L}]=w(X,{onCompleted:()=>{r({type:"success",message:p.formatMessage({id:"organisations.settings.feedback.saved"})})},onError:n=>{r({type:"error",message:Y(n)})}}),b=n=>{u({variables:x(l({},a),{billingInfo:n})})},g=()=>r({}),{organisation:y}=m||{},{name:f,billingInfo:P}=y||{};return d.default.createElement(d.default.Fragment,null,d.default.createElement(V,{id:"organisations.invoices.title",breadcrumbs:[f]}),d.default.createElement(q,null,!e.type||d.default.createElement(K,l({p:0,pt:4,px:4,duration:0,onDismiss:g},e)),d.default.createElement(ro,x(l({},P),{onUpdate:b,loading:t,saving:L})),d.default.createElement(ao,x(l({},y),{loading:t}))))}),_o=go;export{_o as default};
//# sourceMappingURL=Invoices-WVWWJEAU.js.map
