import{a as T}from"./chunk-HVWSZP6M.js";import{a as N}from"./chunk-XJWG5ZCE.js";import{a as V,b as D}from"./chunk-TCDCK6CB.js";import"./chunk-VSZVUKJA.js";import{a as E}from"./chunk-7FHB4OCK.js";import"./chunk-2OWL4LTV.js";import"./chunk-TZWC6Q34.js";import{a as v}from"./chunk-RZQ4QVPP.js";import{a as _}from"./chunk-UJ4RDOBF.js";import{d as f,i as p,j as y}from"./chunk-AQDAG4C2.js";import"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import{b,c as S}from"./chunk-FJD4SS3V.js";import"./chunk-TKNWVBCA.js";import"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as F}from"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{d as u}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as k,f as P,i as Q}from"./chunk-ORNWO27Z.js";var n=P(Q());var d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Get"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"events"},name:{kind:"Name",value:"__type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"EventSubscriptionTag",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"enumValues"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:void 0}]}}]}},{kind:"Field",alias:{kind:"Name",value:"siteEvents"},name:{kind:"Name",value:"__type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"StringValue",value:"SiteEventSubscriptionTag",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"enumValues"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:void 0}]}}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"uuid"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"features"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"eventSubscriptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"siteEventSubscriptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"eventType"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"site"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0}]}}]}},{kind:"Field",alias:void 0,name:{kind:"Name",value:"memberships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"teams"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"sitesList"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]}}]}}]}}]}}]},U={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SiteEventSubscriptionToggle"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"site"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"siteEventSubscriptionToggle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"site"},value:{kind:"Variable",name:{kind:"Name",value:"site"}}},{kind:"Argument",name:{kind:"Name",value:"eventType"},value:{kind:"Variable",name:{kind:"Name",value:"eventType"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"eventType"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"site"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"slug"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateEventSubscriptions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventSubscriptions"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"EventSubscriptionTag"}}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"updateUserSettings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"eventSubscriptions"},value:{kind:"Variable",name:{kind:"Name",value:"eventSubscriptions"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"uuid"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"eventSubscriptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]};var w=["new_team"],G=["initial_snapshot"],C=()=>{let{data:h}=F(d,{fetchPolicy:"cache-and-network"}),{currentUser:{memberships:m,siteEventSubscriptions:A,eventSubscriptions:g},siteEvents:o,events:r}=h||{currentUser:{}},[L]=v(U,{update(e,{data:i}){let{currentUser:t}=e.readQuery({query:d}),a=k({},t);a.siteEventSubscriptions=i.siteEventSubscriptionToggle,e.writeQuery({query:d,data:{currentUser:a}})}}),[q]=v(x,{update(e,{data:i}){var s;let{currentUser:t}=e.readQuery({query:d}),a=k({},t);a.eventSubscriptions=(s=i==null?void 0:i.updateUserSettings)==null?void 0:s.eventSubscriptions,e.writeQuery({query:d,data:{currentUser:a}})}}),B=e=>{let i=g.map(({value:t})=>t);i.find(t=>t===e)?i=i.filter(t=>t!==e):i=i.concat(e),q({variables:{eventSubscriptions:i}})},c=[];m==null||m.forEach(({teams:e})=>{e.forEach(({sitesList:i})=>{c=c.concat(i.edges.map(({node:t})=>t))})});let $=((r==null?void 0:r.enumValues)||[]).map(({name:e})=>e).filter(e=>!w.includes(e)),O=((o==null?void 0:o.enumValues)||[]).map(({name:e})=>e).filter(e=>!G.includes(e));return n.default.createElement(n.default.Fragment,null,n.default.createElement(_,{id:"you.settings.emailNotifications.title"}),n.default.createElement(y,null,n.default.createElement(S,{flex:1,mb:[4,0]},n.default.createElement(T,null,n.default.createElement(u,{id:"you.settings.emailNotifications.heading"})))),n.default.createElement(f,null,n.default.createElement(p,{id:"you.settings.emailNotifications.teamNotifications",mb:0}),n.default.createElement(b,null,$.map(e=>n.default.createElement(S,{key:`event_subscriptions.${e}.description`},n.default.createElement(u,{id:`event_subscriptions.${e}.description`},i=>n.default.createElement(N,{id:e,label:i[0],value:e,checked:!!g.find(({value:t})=>e===t),onChange:B})))))),n.default.createElement(f,null,n.default.createElement(p,{id:"you.settings.emailNotifications.siteNotifications",mb:0}),n.default.createElement(V,null,c.map(({name:e,slug:i,page:t})=>n.default.createElement(D,{preview:t&&n.default.createElement(E,{title:e,src:t.favicon}),title:e,key:`emailNotifications-${i}`,actions:O.map(a=>n.default.createElement(u,{key:`site_event_subscriptions.${a}`,id:`site_event_subscriptions.${a}`},s=>n.default.createElement(N,{id:`${i}-${a}`,label:s[0],value:i,checked:!!A.find(l=>l.site.slug===i&&l.eventType===a),onChange:l=>{L({variables:{site:l,eventType:a}})}})))})))))},R=C;export{R as default};
//# sourceMappingURL=EmailNotifications-UYRDXZYE.js.map
