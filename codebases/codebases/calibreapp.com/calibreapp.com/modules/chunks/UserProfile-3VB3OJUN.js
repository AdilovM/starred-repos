import{a as Y}from"./chunk-HVWSZP6M.js";import{a as S}from"./chunk-SJXFQYTK.js";import{a as L}from"./chunk-YG5VU5UW.js";import{b as Z,c as R,d as oo,e as eo}from"./chunk-POPT6TP2.js";import{a as G}from"./chunk-IHTWZOQH.js";import"./chunk-OFY5O3WH.js";import"./chunk-WEIYGZZI.js";import{c as O}from"./chunk-H7BUDTAB.js";import{c as D,e as k,f as v}from"./chunk-ECKCXZDJ.js";import"./chunk-5AD3ZUGZ.js";import"./chunk-2OWL4LTV.js";import{a as W}from"./chunk-TZWC6Q34.js";import"./chunk-62V4AEVH.js";import"./chunk-WDJIMBUZ.js";import"./chunk-ZK4YBVUK.js";import"./chunk-URMVBSCF.js";import{a as M}from"./chunk-RZQ4QVPP.js";import"./chunk-M3VXQ3H4.js";import{a as X}from"./chunk-UJ4RDOBF.js";import"./chunk-EWS3NXQH.js";import{d as Q,g as $,h as j,i as q,j as N}from"./chunk-AQDAG4C2.js";import"./chunk-TT3E6PQD.js";import{i as B}from"./chunk-WNVFIGRJ.js";import"./chunk-BYK2LYTJ.js";import{Q as z}from"./chunk-SOUDSSPT.js";import"./chunk-YN3ICWDL.js";import{b as x,c as J,e as K,f as H}from"./chunk-JXNVBN57.js";import"./chunk-4JRWSVEX.js";import{b as T,c as o}from"./chunk-FJD4SS3V.js";import{a as co}from"./chunk-TKNWVBCA.js";import{a as go}from"./chunk-V454E5QD.js";import"./chunk-4DDSFSZM.js";import{a as E}from"./chunk-I2CW5RII.js";import"./chunk-EHER635N.js";import"./chunk-D3V43LVN.js";import"./chunk-M5TAP4VX.js";import"./chunk-X4YGTLGV.js";import"./chunk-BBW4QHNN.js";import{b as _,d as t}from"./chunk-CL7MNENB.js";import"./chunk-5ZVMZG6E.js";import"./chunk-33HWVBTX.js";import{a as l,b as F,c as V,f as P,i as C}from"./chunk-ORNWO27Z.js";var b=P(C());var p=P(C());var h=P(C());var bo=({name:r,email:n})=>{let{setFeedback:u}=S(),[a,f]=(0,h.useState)({name:r,email:n}),[m,{loading:w,data:I}]=M(Z,{onCompleted:()=>{u({location:"userProfile",type:"success",message:h.default.createElement(t,{id:"you.settings.profile.personalDetails.update.success"})})},onError:g=>{u({type:"error",message:G(g),location:"userProfile"})}}),A=g=>{m({variables:{attributes:g}})};return h.default.createElement("form",{onSubmit:g=>{g.preventDefault(),A(a)},"data-qa":"personal-details-form"},h.default.createElement(D,{mb:0},h.default.createElement(k,{labelid:"you.settings.profile.personalDetails.update.name.label",helpid:"you.settings.profile.personalDetails.update.name.help",span:2},h.default.createElement(v,{name:"name",defaultValue:r,required:!0,maxLength:255,onChange:g=>f(F(l({},a),{name:g})),autoComplete:"name"})),h.default.createElement(k,{labelid:"you.settings.profile.personalDetails.update.email.label",helpid:"you.settings.profile.personalDetails.update.email.help",span:2},h.default.createElement(v,{name:"email",type:"email",defaultValue:n,required:!0,maxLength:255,onChange:g=>f(F(l({},a),{email:g})),autoComplete:"new-password"}))),h.default.createElement(o,{mr:2},h.default.createElement(B,{type:"submit",variant:"primary",loading:w},h.default.createElement(t,{id:"you.settings.profile.personalDetails.update.action.label"}))))},ro=bo;var wo=()=>{let{currentUser:r,membership:n,memberships:u}=E(),{feedback:a,clearFeedback:f}=S(),{role:m}=n||u[0]||{role:"member"};return p.default.createElement(p.default.Fragment,null,p.default.createElement(q,{id:"you.settings.profile.personalDetails",mb:0}),a&&a.location==="userProfile"&&p.default.createElement(o,{mb:4},p.default.createElement(L,l({onDismiss:()=>f()},a),a.message)),p.default.createElement(T,{alignItems:"center",mb:4},p.default.createElement(o,{mr:3},p.default.createElement(O,{size:"large",name:r.name,url:r.avatar,variant:`${m}Link`})),r.authMethod=="password"?p.default.createElement(o,null,p.default.createElement(x,null,p.default.createElement(t,{id:"you.settings.profile.personalDetails.avatarHelp"}))):p.default.createElement(o,{mr:3},p.default.createElement(H,{as:"p"},r.name),p.default.createElement(x,null,r.email))),p.default.createElement(o,{mb:4},r.authMethod=="password"&&p.default.createElement(ro,{name:r.name,email:r.email})))},to=wo;var c=P(C());var ao=P(go()),lo=P(co());var s=P(C());var ho=()=>{let r={newPassword:"",newPasswordConfirmation:""},{feedback:n,setFeedback:u}=S(),[a,f]=(0,s.useState)(!1),[m,w]=(0,s.useState)(r),[I,{loading:A,data:U}]=M(R,{onCompleted:()=>{w(l({},r)),u({location:"userPassword",type:"success",message:s.default.createElement(t,{id:"you.settings.profile.authentication.password.success"})})},onError:i=>{u({type:"error",message:G(i),location:"userPassword"})}}),g=i=>{I({variables:{attributes:i}})};return s.default.createElement(s.default.Fragment,null,s.default.createElement("form",{onSubmit:i=>{i.preventDefault(),g(m)},"data-qa":"set-password-form"},n&&n.location==="userPassword"&&s.default.createElement(o,{mb:4},s.default.createElement(L,l({},n),n.message)),s.default.createElement(D,{gridTemplateColumns:["1fr","1fr 1fr"],mb:0},s.default.createElement(k,{labelid:"you.settings.profile.authentication.password.newPassword.label",span:1},s.default.createElement(v,{name:"newPassword",type:"password",autoComplete:"new-password",value:m.newPassword,required:!0,maxLength:255,onChange:i=>{w(F(l({},m),{newPassword:i})),f(!0)}})),s.default.createElement(k,{labelid:"you.settings.profile.authentication.password.confirmationPassword.label",span:1},s.default.createElement(v,{name:"newPasswordConfirmation",type:"password",autoComplete:"new-password",value:m.newPasswordConfirmation,required:!0,maxLength:255,onChange:i=>{w(F(l({},m),{newPasswordConfirmation:i})),f(!0)}}))),s.default.createElement(o,{mb:4},s.default.createElement(x,null,s.default.createElement(t,{id:"you.settings.profile.authentication.password.passwordHelp"}))),s.default.createElement(o,{mr:2,order:1},s.default.createElement(B,{type:"submit",variant:"primary",disabled:!a||A,loading:A},s.default.createElement(t,{id:"you.settings.profile.authentication.password.setAction.label"})))))},yo=()=>{let[r,n]=(0,s.useState)(!1);return r?s.default.createElement(ho,null):s.default.createElement(T,{alignItems:"center"},s.default.createElement(o,{mr:4,flex:2},s.default.createElement(t,{id:"you.settings.profile.authentication.password.switch"})),s.default.createElement(o,{textAlign:"right",flex:1},s.default.createElement(B,{type:"primary",onClick:()=>n(!0)},s.default.createElement(t,{id:"you.settings.profile.authentication.password.setAction.label"}))))},so=yo;var e=P(C());var xo=()=>{let r={currentPassword:"",newPassword:"",newPasswordConfirmation:""},{feedback:n,setFeedback:u}=S(),[a,f]=(0,e.useState)(!1),[m,w]=(0,e.useState)(r),[I,{loading:A,data:U}]=M(oo,{onCompleted:()=>{w(l({},r)),u({location:"userPassword",type:"success",message:e.default.createElement(t,{id:"you.settings.profile.authentication.password.success"})}),f(!1)},onError:i=>{u({type:"error",message:G(i),location:"userPassword"}),f(!1)}}),g=i=>{I({variables:{currentPassword:i.currentPassword,attributes:{newPassword:i.newPassword,newPasswordConfirmation:i.newPasswordConfirmation}}})};return e.default.createElement(e.default.Fragment,null,e.default.createElement(T,{mb:4},e.default.createElement(o,null,e.default.createElement(x,null,e.default.createElement(t,{id:"you.settings.profile.authentication.password.description"}))),e.default.createElement(o,{textAlign:"right",flex:1},e.default.createElement(W,{type:"success"},e.default.createElement(t,{id:"you.settings.profile.authentication.currentLabel"})))),e.default.createElement("form",{onSubmit:i=>{i.preventDefault(),g(m)},"data-qa":"change-password-form"},n&&n.location==="userPassword"&&e.default.createElement(o,{my:4},e.default.createElement(L,l({},n),n.message)),e.default.createElement(D,{mb:0},e.default.createElement(k,{labelid:"you.settings.profile.authentication.password.currentPassword.label",span:3},e.default.createElement(v,{name:"currentPassword",type:"password",autoComplete:"current-password",value:m.currentPassword,required:!0,maxLength:255,onChange:i=>{w(F(l({},m),{currentPassword:i})),f(!0)}}))),e.default.createElement(D,{gridTemplateColumns:["1fr","1fr 1fr"]},e.default.createElement(k,{labelid:"you.settings.profile.authentication.password.newPassword.label",span:1},e.default.createElement(v,{name:"newPassword",type:"password",autoComplete:"new-password",value:m.newPassword,required:!0,maxLength:255,onChange:i=>{w(F(l({},m),{newPassword:i})),f(!0)}})),e.default.createElement(k,{labelid:"you.settings.profile.authentication.password.confirmationPassword.label",span:1},e.default.createElement(v,{name:"newPasswordConfirmation",type:"password",autoComplete:"new-password",value:m.newPasswordConfirmation,required:!0,maxLength:255,onChange:i=>{w(F(l({},m),{newPasswordConfirmation:i})),f(!0)}}))),e.default.createElement(o,{mt:2,mb:4},e.default.createElement(x,null,e.default.createElement(t,{id:"you.settings.profile.authentication.password.passwordHelp"}))),e.default.createElement(o,{mr:2,order:1},e.default.createElement(B,{type:"submit",variant:"primary",disabled:!a||A,loading:A},e.default.createElement(t,{id:"you.settings.profile.authentication.password.changeAction.label"})))))},io=xo;var d=P(C());var Bo=()=>d.default.createElement("form",{method:"post",action:"/registrations/google/authorization"},d.default.createElement("input",{type:"hidden",name:"proceed_to",value:"/you/settings/profile/connect/google"}),d.default.createElement(B,{type:"submit",variant:"outlined",icon:d.default.createElement(z,null)},d.default.createElement(t,{id:"you.settings.profile.authentication.thirdPartyAuth.google.label"}))),Fo=({email:r})=>d.default.createElement(T,{alignItems:"center"},d.default.createElement(o,{mr:3},d.default.createElement(z,{width:"30",height:"30"})),d.default.createElement(o,null,d.default.createElement(x,null,d.default.createElement(t,{id:"you.settings.profile.authentication.thirdPartyAuth.google.inUse",values:{email:d.default.createElement(H,null,r)}}))),d.default.createElement(o,{textAlign:"right",flex:1},d.default.createElement(W,{type:"success"},d.default.createElement(t,{id:"you.settings.profile.authentication.currentLabel"})))),Po=u=>{var a=u,{isInUse:r}=a,n=V(a,["isInUse"]);return r?d.default.createElement(Fo,l({},n)):d.default.createElement(Bo,null)},no=Po;var mo=(0,ao.default)(o)({borderWidth:1,borderStyle:"solid",borderRadius:3},(0,lo.variant)({variants:{collapsed:{p:0,borderStyle:"none"},inactive:{padding:4,borderColor:"grey100"},active:{bg:"grey50",borderColor:"grey100",padding:4}}})),ko=()=>{let{currentUser:r}=E(),n=r.authMethod=="password",u=r.authMethod=="google";return c.default.createElement(c.default.Fragment,null,c.default.createElement(q,{id:"you.settings.profile.authentication",mb:0}),c.default.createElement($,null,c.default.createElement(j,{span:2},c.default.createElement(mo,{mb:4,variant:n?"active":"inactive"},n?c.default.createElement(io,null):c.default.createElement(so,null)),c.default.createElement(o,{mb:4},c.default.createElement(J,{level:"xs"},c.default.createElement(t,{id:"you.settings.profile.authentication.thirdPartyAuth.title"}))),c.default.createElement(mo,{variant:u?"active":"collapsed"},c.default.createElement(no,{isInUse:u,email:r.email})))))},po=ko;var y=P(C());var vo=()=>{let{currentUser:r}=E(),u=_().formatMessage({id:"you.settings.profile.deleteAccount.descriptionLinkUrl"}),{feedback:a,setFeedback:f}=S(),[m,{loading:w,data:I}]=M(eo,{onCompleted:()=>{window.location="/"},onError:U=>{f({type:"error",message:G(U),location:"deleteUserAccount"})}}),A=()=>{m()};return y.default.createElement(y.default.Fragment,null,y.default.createElement(q,{id:"you.settings.profile.deleteAccount",mb:2},y.default.createElement(x,null,y.default.createElement(t,{id:"you.settings.profile.deleteAccount.extendedDescription",values:{descriptionLink:y.default.createElement(K,{href:u},y.default.createElement(t,{id:"you.settings.profile.deleteAccount.descriptionLinkText"}))}}))),a&&a.location==="deleteUserAccount"&&y.default.createElement(o,{mb:4},y.default.createElement(L,l({},a),a.message)),y.default.createElement(t,{id:"you.settings.profile.deleteAccount.action.prompt",values:{confirmText:r.email}},U=>y.default.createElement(B,{variant:"danger",disabled:w,loading:w,onClick:()=>{prompt(U)===r.email&&A()}},y.default.createElement(t,{id:"you.settings.profile.deleteAccount.action.label"}))))},uo=vo;var So=()=>b.default.createElement(b.default.Fragment,null,b.default.createElement(X,{id:"you.settings.profile.title"}),b.default.createElement(N,null,b.default.createElement(o,{flex:1,mb:[4,0]},b.default.createElement(Y,null,b.default.createElement(t,{id:"you.settings.profile.heading"})))),b.default.createElement(Q,{p:null,px:4,pt:4},b.default.createElement(to,null)),b.default.createElement(Q,{pt:4},b.default.createElement(po,null)),b.default.createElement(Q,{pt:4},b.default.createElement(uo,null))),Ye=So;export{Ye as default};
//# sourceMappingURL=UserProfile-3VB3OJUN.js.map
